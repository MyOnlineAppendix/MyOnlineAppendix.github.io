<h3><span class=" glyphicon glyphicon-tag"/>&nbspInternalCallVerifier</h3><kbd>Verifies values of objects/variables related to AUT calls</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.cassandra.auth.RoleOptionsTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void emptyByDefault(){
  RoleOptions opts=new RoleOptions();
  assertTrue(opts.isEmpty());
  assertFalse(opts.getLogin().isPresent());
  opts.setOption(IRoleManager.Option.LOGIN,true);
  assertFalse(opts.isEmpty());
  assertTrue(opts.getLogin().isPresent());
  assertTrue(opts.getLogin().get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.batchlog.BatchTest </h4><pre class="type-6 type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * This is just to test decodeMutations() when deserializing,
 * since Batch will never be serialized at a version 2.2.
 * @throws IOException
 */
@Test public void testSerializationNonCurrentVersion() throws IOException {
  CFMetaData cfm=Keyspace.open(KEYSPACE).getColumnFamilyStore(CF_STANDARD).metadata;
  long now=FBUtilities.timestampMicros();
  int version=MessagingService.VERSION_22;
  UUID uuid=UUIDGen.getTimeUUID();
  List<Mutation> mutations=new ArrayList<>(10);
  for (int i=0; i < 10; i++) {
    mutations.add(new RowUpdateBuilder(cfm,FBUtilities.timestampMicros(),bytes(i)).clustering("name" + i).add("val","val" + i).build());
  }
  Batch batch1=Batch.createLocal(uuid,now,mutations);
  assertEquals(uuid,batch1.id);
  assertEquals(now,batch1.creationTime);
  assertEquals(mutations,batch1.decodedMutations);
  DataOutputBuffer out=new DataOutputBuffer();
  Batch.serializer.serialize(batch1,out,version);
  assertEquals(out.getLength(),Batch.serializer.serializedSize(batch1,version));
  DataInputPlus dis=new DataInputBuffer(out.getData());
  Batch batch2=Batch.serializer.deserialize(dis,version);
  assertEquals(batch1.id,batch2.id);
  assertEquals(batch1.creationTime,batch2.creationTime);
  assertEquals(batch1.decodedMutations.size(),batch2.decodedMutations.size());
  Iterator<Mutation> it1=batch1.decodedMutations.iterator();
  Iterator<Mutation> it2=batch2.decodedMutations.iterator();
  while (it1.hasNext())   assertEquals(it1.next().toString(),it2.next().toString());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testSerialization() throws IOException {
  CFMetaData cfm=Keyspace.open(KEYSPACE).getColumnFamilyStore(CF_STANDARD).metadata;
  long now=FBUtilities.timestampMicros();
  int version=MessagingService.current_version;
  UUID uuid=UUIDGen.getTimeUUID();
  List<Mutation> mutations=new ArrayList<>(10);
  for (int i=0; i < 10; i++) {
    mutations.add(new RowUpdateBuilder(cfm,FBUtilities.timestampMicros(),bytes(i)).clustering("name" + i).add("val","val" + i).build());
  }
  Batch batch1=Batch.createLocal(uuid,now,mutations);
  assertEquals(uuid,batch1.id);
  assertEquals(now,batch1.creationTime);
  assertEquals(mutations,batch1.decodedMutations);
  DataOutputBuffer out=new DataOutputBuffer();
  Batch.serializer.serialize(batch1,out,version);
  assertEquals(out.getLength(),Batch.serializer.serializedSize(batch1,version));
  DataInputPlus dis=new DataInputBuffer(out.getData());
  Batch batch2=Batch.serializer.deserialize(dis,version);
  assertEquals(batch1.id,batch2.id);
  assertEquals(batch1.creationTime,batch2.creationTime);
  assertEquals(batch1.decodedMutations.size(),batch2.encodedMutations.size());
  Iterator<Mutation> it1=batch1.decodedMutations.iterator();
  Iterator<ByteBuffer> it2=batch2.encodedMutations.iterator();
  while (it1.hasNext()) {
    try (DataInputBuffer in=new DataInputBuffer(it2.next().array())){
      assertEquals(it1.next().toString(),Mutation.serializer.deserialize(in,version).toString());
    }
   }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.batchlog.BatchlogManagerTest </h4><pre class="type-6 type-7 type-13 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("deprecation") public void testConversion() throws Exception {
  long initialAllBatches=BatchlogManager.instance.countAllBatches();
  long initialReplayedBatches=BatchlogManager.instance.getTotalBatchesReplayed();
  CFMetaData cfm=Schema.instance.getCFMetaData(KEYSPACE1,CF_STANDARD4);
  for (int i=0; i < 1400; i++) {
    Mutation mutation=new RowUpdateBuilder(cfm,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(i)).clustering("name" + i).add("val","val" + i).build();
    long timestamp=i < 700 ? (System.currentTimeMillis() - BatchlogManager.getBatchlogTimeout()) : (System.currentTimeMillis() + BatchlogManager.getBatchlogTimeout());
    Mutation batchMutation=LegacyBatchlogMigrator.getStoreMutation(Batch.createLocal(UUIDGen.getTimeUUID(timestamp,i),TimeUnit.MILLISECONDS.toMicros(timestamp),Collections.singleton(mutation)),MessagingService.VERSION_20);
    assertTrue(LegacyBatchlogMigrator.isLegacyBatchlogMutation(batchMutation));
    LegacyBatchlogMigrator.handleLegacyMutation(batchMutation);
  }
  for (int i=1400; i < 1500; i++) {
    Mutation mutation=new RowUpdateBuilder(cfm,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(i)).clustering("name" + i).add("val","val" + i).build();
    long timestamp=i < 1450 ? (System.currentTimeMillis() - BatchlogManager.getBatchlogTimeout()) : (System.currentTimeMillis() + BatchlogManager.getBatchlogTimeout());
    BatchlogManager.store(Batch.createLocal(UUIDGen.getTimeUUID(timestamp,i),FBUtilities.timestampMicros(),Collections.singleton(mutation)));
  }
  Keyspace.open(SystemKeyspace.NAME).getColumnFamilyStore(SystemKeyspace.BATCHES).forceBlockingFlush();
  assertEquals(1500,BatchlogManager.instance.countAllBatches() - initialAllBatches);
  assertEquals(0,BatchlogManager.instance.getTotalBatchesReplayed() - initialReplayedBatches);
  UntypedResultSet result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",SystemKeyspace.NAME,SystemKeyspace.LEGACY_BATCHLOG));
  assertNotNull(result);
  assertEquals("Count in blog legacy",0,result.one().getLong("count"));
  result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",SystemKeyspace.NAME,SystemKeyspace.BATCHES));
  assertNotNull(result);
  assertEquals("Count in blog",1500,result.one().getLong("count"));
  BatchlogManager.instance.performInitialReplay();
  assertEquals(750,BatchlogManager.instance.countAllBatches() - initialAllBatches);
  assertEquals(750,BatchlogManager.instance.getTotalBatchesReplayed() - initialReplayedBatches);
  for (int i=0; i < 1500; i++) {
    result=executeInternal(String.format("SELECT * FROM \"%s\".\"%s\" WHERE key = intAsBlob(%d)",KEYSPACE1,CF_STANDARD4,i));
    assertNotNull(result);
    if (i < 700 || i >= 1400 && i < 1450) {
      assertEquals(ByteBufferUtil.bytes(i),result.one().getBytes("key"));
      assertEquals("name" + i,result.one().getString("name"));
      assertEquals("val" + i,result.one().getString("val"));
    }
 else {
      assertTrue("Present at " + i,result.isEmpty());
    }
  }
  result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",KEYSPACE1,CF_STANDARD4));
  assertNotNull(result);
  assertEquals(750,result.one().getLong("count"));
  result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",SystemKeyspace.NAME,SystemKeyspace.BATCHES));
  assertNotNull(result);
  assertEquals("Count in blog after initial replay",750,result.one().getLong("count"));
  result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",SystemKeyspace.NAME,SystemKeyspace.LEGACY_BATCHLOG));
  assertNotNull(result);
  assertEquals("Count in blog legacy after initial replay ",0,result.one().getLong("count"));
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTruncatedReplay() throws InterruptedException, ExecutionException {
  CFMetaData cf2=Schema.instance.getCFMetaData(KEYSPACE1,CF_STANDARD2);
  CFMetaData cf3=Schema.instance.getCFMetaData(KEYSPACE1,CF_STANDARD3);
  for (int i=0; i < 1000; i++) {
    Mutation mutation1=new RowUpdateBuilder(cf2,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(i)).clustering("name" + i).add("val","val" + i).build();
    Mutation mutation2=new RowUpdateBuilder(cf3,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(i)).clustering("name" + i).add("val","val" + i).build();
    List<Mutation> mutations=Lists.newArrayList(mutation1,mutation2);
    long timestamp=System.currentTimeMillis() - BatchlogManager.getBatchlogTimeout();
    if (i == 500)     SystemKeyspace.saveTruncationRecord(Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD2),timestamp,ReplayPosition.NONE);
    if (i >= 500)     timestamp++;
 else     timestamp--;
    BatchlogManager.store(Batch.createLocal(UUIDGen.getTimeUUID(timestamp,i),FBUtilities.timestampMicros(),mutations));
  }
  Keyspace.open(SystemKeyspace.NAME).getColumnFamilyStore(SystemKeyspace.BATCHES).forceBlockingFlush();
  BatchlogManager.instance.startBatchlogReplay().get();
  for (int i=0; i < 1000; i++) {
    UntypedResultSet result=executeInternal(String.format("SELECT * FROM \"%s\".\"%s\" WHERE key = intAsBlob(%d)",KEYSPACE1,CF_STANDARD2,i));
    assertNotNull(result);
    if (i >= 500) {
      assertEquals(ByteBufferUtil.bytes(i),result.one().getBytes("key"));
      assertEquals("name" + i,result.one().getString("name"));
      assertEquals("val" + i,result.one().getString("val"));
    }
 else {
      assertTrue(result.isEmpty());
    }
  }
  for (int i=0; i < 1000; i++) {
    UntypedResultSet result=executeInternal(String.format("SELECT * FROM \"%s\".\"%s\" WHERE key = intAsBlob(%d)",KEYSPACE1,CF_STANDARD3,i));
    assertNotNull(result);
    assertEquals(ByteBufferUtil.bytes(i),result.one().getBytes("key"));
    assertEquals("name" + i,result.one().getString("name"));
    assertEquals("val" + i,result.one().getString("val"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cache.AutoSavingCacheTest </h4><pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerializeAndLoadKeyCache() throws Exception {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD1);
  for (int i=0; i < 2; i++) {
    ColumnDefinition colDef=ColumnDefinition.regularDef(cfs.metadata,ByteBufferUtil.bytes("col1"),AsciiType.instance);
    RowUpdateBuilder rowBuilder=new RowUpdateBuilder(cfs.metadata,System.currentTimeMillis(),"key1");
    rowBuilder.add(colDef,"val1");
    rowBuilder.build().apply();
    cfs.forceBlockingFlush();
  }
  Assert.assertEquals(2,cfs.getLiveSSTables().size());
  for (  SSTableReader sstable : cfs.getLiveSSTables())   sstable.getPosition(Util.dk("key1"),SSTableReader.Operator.EQ);
  AutoSavingCache<KeyCacheKey,RowIndexEntry> keyCache=CacheService.instance.keyCache;
  keyCache.submitWrite(keyCache.size()).get();
  keyCache.clear();
  Assert.assertEquals(0,keyCache.size());
  keyCache.loadSavedAsync().get();
  for (  SSTableReader sstable : cfs.getLiveSSTables())   Assert.assertNotNull(keyCache.get(new KeyCacheKey(cfs.metadata.ksAndCFName,sstable.descriptor,ByteBufferUtil.bytes("key1"))));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cache.CacheProviderTest </h4><pre class="type-7 type-4 type-14 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeys(){
  Pair<String,String> ksAndCFName=Pair.create(KEYSPACE1,CF_STANDARD1);
  byte[] b1={1,2,3,4};
  RowCacheKey key1=new RowCacheKey(ksAndCFName,ByteBuffer.wrap(b1));
  byte[] b2={1,2,3,4};
  RowCacheKey key2=new RowCacheKey(ksAndCFName,ByteBuffer.wrap(b2));
  assertEquals(key1,key2);
  assertEquals(key1.hashCode(),key2.hashCode());
  byte[] b3={1,2,3,5};
  RowCacheKey key3=new RowCacheKey(ksAndCFName,ByteBuffer.wrap(b3));
  assertNotSame(key1,key3);
  assertNotSame(key1.hashCode(),key3.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql.jdbc.JdbcDecimalTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComposeDecompose(){
  BigDecimal expected=new BigDecimal("123456789123456789.987654321");
  DecimalSerializer decimal=new DecimalSerializer();
  ByteBuffer buffer=decimal.serialize(expected);
  BigDecimal actual=decimal.deserialize(buffer);
  Assert.assertEquals(expected,actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.ColumnConditionTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSimpleBoundIsSatisfiedByValue() throws InvalidRequestException {
  ColumnDefinition definition=ColumnDefinition.regularDef("ks","cf","c",ListType.getInstance(Int32Type.instance,true));
  ColumnCondition condition=ColumnCondition.condition(definition,new Constants.Value(ONE),Operator.EQ);
  ColumnCondition.Bound bound=condition.bind(QueryOptions.DEFAULT);
  assertTrue(isSatisfiedBy(bound,ONE,ONE));
  assertFalse(isSatisfiedBy(bound,ZERO,ONE));
  assertFalse(isSatisfiedBy(bound,TWO,ONE));
  assertFalse(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE));
  assertFalse(isSatisfiedBy(bound,ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertTrue(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertTrue(isSatisfiedBy(bound,null,null));
  assertFalse(isSatisfiedBy(bound,ONE,null));
  assertFalse(isSatisfiedBy(bound,null,ONE));
  condition=ColumnCondition.condition(definition,new Constants.Value(ONE),Operator.NEQ);
  bound=condition.bind(QueryOptions.DEFAULT);
  assertFalse(isSatisfiedBy(bound,ONE,ONE));
  assertTrue(isSatisfiedBy(bound,ZERO,ONE));
  assertTrue(isSatisfiedBy(bound,TWO,ONE));
  assertTrue(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE));
  assertTrue(isSatisfiedBy(bound,ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertFalse(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertFalse(isSatisfiedBy(bound,null,null));
  assertTrue(isSatisfiedBy(bound,ONE,null));
  assertTrue(isSatisfiedBy(bound,null,ONE));
  condition=ColumnCondition.condition(definition,new Constants.Value(ONE),Operator.LT);
  bound=condition.bind(QueryOptions.DEFAULT);
  assertFalse(isSatisfiedBy(bound,ONE,ONE));
  assertFalse(isSatisfiedBy(bound,ZERO,ONE));
  assertTrue(isSatisfiedBy(bound,TWO,ONE));
  assertFalse(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE));
  assertTrue(isSatisfiedBy(bound,ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertFalse(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertThrowsIRE(bound,null,ONE);
  assertFalse(isSatisfiedBy(bound,ONE,null));
  condition=ColumnCondition.condition(definition,new Constants.Value(ONE),Operator.LTE);
  bound=condition.bind(QueryOptions.DEFAULT);
  assertTrue(isSatisfiedBy(bound,ONE,ONE));
  assertFalse(isSatisfiedBy(bound,ZERO,ONE));
  assertTrue(isSatisfiedBy(bound,TWO,ONE));
  assertFalse(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE));
  assertTrue(isSatisfiedBy(bound,ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertTrue(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertThrowsIRE(bound,null,ONE);
  assertFalse(isSatisfiedBy(bound,ONE,null));
  condition=ColumnCondition.condition(definition,new Constants.Value(ONE),Operator.GT);
  bound=condition.bind(QueryOptions.DEFAULT);
  assertFalse(isSatisfiedBy(bound,ONE,ONE));
  assertTrue(isSatisfiedBy(bound,ZERO,ONE));
  assertFalse(isSatisfiedBy(bound,TWO,ONE));
  assertTrue(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE));
  assertFalse(isSatisfiedBy(bound,ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertFalse(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertThrowsIRE(bound,null,ONE);
  assertFalse(isSatisfiedBy(bound,ONE,null));
  condition=ColumnCondition.condition(definition,new Constants.Value(ONE),Operator.GTE);
  bound=condition.bind(QueryOptions.DEFAULT);
  assertTrue(isSatisfiedBy(bound,ONE,ONE));
  assertTrue(isSatisfiedBy(bound,ZERO,ONE));
  assertFalse(isSatisfiedBy(bound,TWO,ONE));
  assertTrue(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE));
  assertFalse(isSatisfiedBy(bound,ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertTrue(isSatisfiedBy(bound,ByteBufferUtil.EMPTY_BYTE_BUFFER,ByteBufferUtil.EMPTY_BYTE_BUFFER));
  assertThrowsIRE(bound,null,ONE);
  assertFalse(isSatisfiedBy(bound,ONE,null));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSetCollectionBoundAppliesTo() throws InvalidRequestException {
  ColumnDefinition definition=ColumnDefinition.regularDef("ks","cf","c",ListType.getInstance(Int32Type.instance,true));
  ColumnCondition condition=ColumnCondition.condition(definition,null,new Sets.Value(set(ONE)),Operator.EQ);
  ColumnCondition.CollectionBound bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(setAppliesTo(bound,set(ONE),list(ONE)));
  assertTrue(setAppliesTo(bound,set(),list()));
  assertFalse(setAppliesTo(bound,set(ZERO),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ZERO)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ONE,TWO)));
  assertFalse(setAppliesTo(bound,set(ONE,TWO),list(ONE)));
  assertFalse(setAppliesTo(bound,set(),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list()));
  assertFalse(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Sets.Value(set(ONE)),Operator.NEQ);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(setAppliesTo(bound,set(ONE),list(ONE)));
  assertFalse(setAppliesTo(bound,set(),list()));
  assertTrue(setAppliesTo(bound,set(ZERO),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ZERO)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ONE,TWO)));
  assertTrue(setAppliesTo(bound,set(ONE,TWO),list(ONE)));
  assertTrue(setAppliesTo(bound,set(),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list()));
  assertTrue(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.LT);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(setAppliesTo(bound,set(ONE),list(ONE)));
  assertFalse(setAppliesTo(bound,set(),list()));
  assertFalse(setAppliesTo(bound,set(ZERO),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ZERO)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ONE,TWO)));
  assertTrue(setAppliesTo(bound,set(ONE,TWO),list(ONE)));
  assertFalse(setAppliesTo(bound,set(),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list()));
  assertFalse(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.LTE);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(setAppliesTo(bound,set(ONE),list(ONE)));
  assertTrue(setAppliesTo(bound,set(),list()));
  assertFalse(setAppliesTo(bound,set(ZERO),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ZERO)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ONE,TWO)));
  assertTrue(setAppliesTo(bound,set(ONE,TWO),list(ONE)));
  assertFalse(setAppliesTo(bound,set(),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list()));
  assertFalse(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.GT);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(setAppliesTo(bound,set(ONE),list(ONE)));
  assertFalse(setAppliesTo(bound,set(),list()));
  assertTrue(setAppliesTo(bound,set(ZERO),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ZERO)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ONE,TWO)));
  assertFalse(setAppliesTo(bound,set(ONE,TWO),list(ONE)));
  assertTrue(setAppliesTo(bound,set(),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list()));
  assertTrue(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.GTE);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(setAppliesTo(bound,set(ONE),list(ONE)));
  assertTrue(setAppliesTo(bound,set(),list()));
  assertTrue(setAppliesTo(bound,set(ZERO),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ZERO)));
  assertTrue(setAppliesTo(bound,set(ONE),list(ONE,TWO)));
  assertFalse(setAppliesTo(bound,set(ONE,TWO),list(ONE)));
  assertTrue(setAppliesTo(bound,set(),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list()));
  assertTrue(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertFalse(setAppliesTo(bound,set(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(setAppliesTo(bound,set(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testMapCollectionBoundIsSatisfiedByValue() throws InvalidRequestException {
  ColumnDefinition definition=ColumnDefinition.regularDef("ks","cf","c",ListType.getInstance(Int32Type.instance,true));
  Map<ByteBuffer,ByteBuffer> placeholderMap=new TreeMap<>();
  placeholderMap.put(ONE,ONE);
  Maps.Value placeholder=new Maps.Value(placeholderMap);
  ColumnCondition condition=ColumnCondition.condition(definition,null,placeholder,Operator.EQ);
  ColumnCondition.CollectionBound bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(),map()));
  assertFalse(mapAppliesTo(bound,map(ZERO,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ZERO,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ZERO),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ZERO)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE,TWO,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE,TWO,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map()));
  assertFalse(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,placeholder,Operator.NEQ);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(),map()));
  assertTrue(mapAppliesTo(bound,map(ZERO,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ZERO,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ZERO),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ZERO)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE,TWO,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE,TWO,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map()));
  assertTrue(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,placeholder,Operator.LT);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(),map()));
  assertFalse(mapAppliesTo(bound,map(ZERO,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ZERO,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ZERO),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ZERO)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE,TWO,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE,TWO,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map()));
  assertFalse(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,placeholder,Operator.LTE);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(),map()));
  assertFalse(mapAppliesTo(bound,map(ZERO,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ZERO,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ZERO),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ZERO)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE,TWO,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE,TWO,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map()));
  assertFalse(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,placeholder,Operator.GT);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(),map()));
  assertTrue(mapAppliesTo(bound,map(ZERO,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ZERO,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ZERO),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ZERO)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE,TWO,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE,TWO,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map()));
  assertTrue(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,placeholder,Operator.GTE);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(),map()));
  assertTrue(mapAppliesTo(bound,map(ZERO,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ZERO,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ZERO),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ZERO)));
  assertTrue(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ONE,TWO,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE,TWO,ONE),map(ONE,ONE)));
  assertTrue(mapAppliesTo(bound,map(),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map()));
  assertTrue(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ONE)));
  assertFalse(mapAppliesTo(bound,map(ONE,ONE),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(mapAppliesTo(bound,map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE),map(ByteBufferUtil.EMPTY_BYTE_BUFFER,ONE)));
  assertTrue(mapAppliesTo(bound,map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER),map(ONE,ByteBufferUtil.EMPTY_BYTE_BUFFER)));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testListCollectionBoundAppliesTo() throws InvalidRequestException {
  ColumnDefinition definition=ColumnDefinition.regularDef("ks","cf","c",ListType.getInstance(Int32Type.instance,true));
  ColumnCondition condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.EQ);
  ColumnCondition.CollectionBound bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(listAppliesTo(bound,list(ONE),list(ONE)));
  assertTrue(listAppliesTo(bound,list(),list()));
  assertFalse(listAppliesTo(bound,list(ZERO),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ZERO)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ONE,ONE)));
  assertFalse(listAppliesTo(bound,list(ONE,ONE),list(ONE)));
  assertFalse(listAppliesTo(bound,list(),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list()));
  assertFalse(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.NEQ);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(listAppliesTo(bound,list(ONE),list(ONE)));
  assertFalse(listAppliesTo(bound,list(),list()));
  assertTrue(listAppliesTo(bound,list(ZERO),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ZERO)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ONE,ONE)));
  assertTrue(listAppliesTo(bound,list(ONE,ONE),list(ONE)));
  assertTrue(listAppliesTo(bound,list(),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list()));
  assertTrue(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.LT);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(listAppliesTo(bound,list(ONE),list(ONE)));
  assertFalse(listAppliesTo(bound,list(),list()));
  assertFalse(listAppliesTo(bound,list(ZERO),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ZERO)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ONE,ONE)));
  assertTrue(listAppliesTo(bound,list(ONE,ONE),list(ONE)));
  assertFalse(listAppliesTo(bound,list(),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list()));
  assertFalse(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.LTE);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(listAppliesTo(bound,list(ONE),list(ONE)));
  assertTrue(listAppliesTo(bound,list(),list()));
  assertFalse(listAppliesTo(bound,list(ZERO),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ZERO)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ONE,ONE)));
  assertTrue(listAppliesTo(bound,list(ONE,ONE),list(ONE)));
  assertFalse(listAppliesTo(bound,list(),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list()));
  assertFalse(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.GT);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertFalse(listAppliesTo(bound,list(ONE),list(ONE)));
  assertFalse(listAppliesTo(bound,list(),list()));
  assertTrue(listAppliesTo(bound,list(ZERO),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ZERO)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ONE,ONE)));
  assertFalse(listAppliesTo(bound,list(ONE,ONE),list(ONE)));
  assertTrue(listAppliesTo(bound,list(),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list()));
  assertTrue(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertFalse(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  condition=ColumnCondition.condition(definition,null,new Lists.Value(Arrays.asList(ONE)),Operator.GTE);
  bound=(ColumnCondition.CollectionBound)condition.bind(QueryOptions.DEFAULT);
  assertTrue(listAppliesTo(bound,list(ONE),list(ONE)));
  assertTrue(listAppliesTo(bound,list(),list()));
  assertTrue(listAppliesTo(bound,list(ZERO),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ZERO)));
  assertTrue(listAppliesTo(bound,list(ONE),list(ONE,ONE)));
  assertFalse(listAppliesTo(bound,list(ONE,ONE),list(ONE)));
  assertTrue(listAppliesTo(bound,list(),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list()));
  assertTrue(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ONE)));
  assertFalse(listAppliesTo(bound,list(ONE),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
  assertTrue(listAppliesTo(bound,list(ByteBufferUtil.EMPTY_BYTE_BUFFER),list(ByteBufferUtil.EMPTY_BYTE_BUFFER)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.NonNativeTimestampTest </h4><pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setServerTimestampForNonCqlNativeStatements() throws Throwable {
  createTable("CREATE TABLE %s (k int PRIMARY KEY, v int)");
  execute("INSERT INTO %s (k, v) values (1, ?)",2);
  UntypedResultSet.Row row=execute("SELECT v, writetime(v) AS wt FROM %s WHERE k = 1").one();
  assertEquals(2,row.getInt("v"));
  long timestamp1=row.getLong("wt");
  assertFalse(timestamp1 == -1l);
  execute("INSERT INTO %s (k, v) values (1, ?)",1);
  row=execute("SELECT v, writetime(v) AS wt FROM %s WHERE k = 1").one();
  assertEquals(1,row.getInt("v"));
  assertTrue(row.getLong("wt") > timestamp1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.PreparedStatementsTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStatementRePreparationOnReconnect(){
  session.execute(dropKsStatement);
  session.execute(createKsStatement);
  session.execute("CREATE TABLE IF NOT EXISTS " + KEYSPACE + ".qp_test (id int PRIMARY KEY, cid int, val text);");
  String insertCQL="INSERT INTO " + KEYSPACE + ".qp_test (id, cid, val) VALUES (?, ?, ?)";
  String selectCQL="Select * from " + KEYSPACE + ".qp_test where id = ?";
  PreparedStatement preparedInsert=session.prepare(insertCQL);
  PreparedStatement preparedSelect=session.prepare(selectCQL);
  session.execute(preparedInsert.bind(1,1,"value"));
  assertEquals(1,session.execute(preparedSelect.bind(1)).all().size());
  cluster.close();
  cluster=Cluster.builder().addContactPoint("127.0.0.1").withPort(DatabaseDescriptor.getNativeTransportPort()).build();
  session=cluster.connect();
  preparedInsert=session.prepare(insertCQL);
  preparedSelect=session.prepare(selectCQL);
  session.execute(preparedInsert.bind(1,1,"value"));
  assertEquals(1,session.execute(preparedSelect.bind(1)).all().size());
}

</code></pre>

<br>
<pre class="type-7 type-15 type-4 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void prepareAndExecuteWithCustomExpressions() throws Throwable {
  session.execute(dropKsStatement);
  session.execute(createKsStatement);
  String table="custom_expr_test";
  String index="custom_index";
  session.execute(String.format("CREATE TABLE IF NOT EXISTS %s.%s (id int PRIMARY KEY, cid int, val text);",KEYSPACE,table));
  session.execute(String.format("CREATE CUSTOM INDEX %s ON %s.%s(val) USING '%s'",index,KEYSPACE,table,StubIndex.class.getName()));
  session.execute(String.format("INSERT INTO %s.%s(id, cid, val) VALUES (0, 0, 'test')",KEYSPACE,table));
  PreparedStatement prepared1=session.prepare(String.format("SELECT * FROM %s.%s WHERE expr(%s, 'foo')",KEYSPACE,table,index));
  assertEquals(1,session.execute(prepared1.bind()).all().size());
  PreparedStatement prepared2=session.prepare(String.format("SELECT * FROM %s.%s WHERE expr(%s, ?)",KEYSPACE,table,index));
  assertEquals(1,session.execute(prepared2.bind("foo bar baz")).all().size());
  try {
    session.prepare(String.format("SELECT * FROM %s.%s WHERE expr(?, 'foo bar baz')",KEYSPACE,table));
    fail("Expected syntax exception, but none was thrown");
  }
 catch (  SyntaxError e) {
    assertEquals("Bind variables cannot be used for index names",e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.SerializationMirrorTest </h4><pre class="type-6 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testManyClusterings() throws Throwable {
  StringBuilder table=new StringBuilder("CREATE TABLE %s (a TEXT");
  StringBuilder cols=new StringBuilder();
  StringBuilder args=new StringBuilder("?");
  List vals=new ArrayList<>();
  vals.add("a");
  for (int i=0; i < 40; i++) {
    table.append(", c").append(i).append(" text");
    cols.append(", c").append(i);
    if (ThreadLocalRandom.current().nextBoolean())     vals.add(Integer.toString(i));
 else     vals.add("");
    args.append(",?");
  }
  args.append(",?");
  vals.add("value");
  table.append(", v text, PRIMARY KEY ((a)").append(cols).append("))");
  createTable(table.toString());
  execute("INSERT INTO %s (a" + cols + ", v) VALUES ("+ args+ ")",vals.toArray());
  flush();
  UntypedResultSet.Row row=execute("SELECT * FROM %s").one();
  for (int i=0; i < row.getColumns().size(); i++)   Assert.assertEquals(vals.get(i),row.getString(i == 0 ? "a" : i < 41 ? "c" + (i - 1) : "v"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.ThriftCompatibilityTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonTextComparator() throws Throwable {
  ColumnDef column=new ColumnDef();
  column.setName(bytes(42)).setValidation_class(UTF8Type.instance.toString());
  CfDef cf=new CfDef("thriftcompat","JdbcInteger");
  cf.setColumn_type("Standard").setComparator_type(Int32Type.instance.toString()).setDefault_validation_class(UTF8Type.instance.toString()).setKey_validation_class(BytesType.instance.toString()).setColumn_metadata(Collections.singletonList(column));
  SchemaLoader.createKeyspace("thriftcompat",KeyspaceParams.simple(1),ThriftConversion.fromThrift(cf));
  execute("INSERT INTO \"thriftcompat\".\"JdbcInteger\" (key, \"42\") VALUES (0x00000001, 'abc')");
  execute("UPDATE \"thriftcompat\".\"JdbcInteger\" SET \"42\" = 'abc' WHERE key = 0x00000001");
  execute("DELETE \"42\" FROM \"thriftcompat\".\"JdbcInteger\" WHERE key = 0x00000000");
  UntypedResultSet results=execute("SELECT key, \"42\" FROM \"thriftcompat\".\"JdbcInteger\"");
  assertEquals(1,results.size());
  UntypedResultSet.Row row=results.iterator().next();
  assertEquals(ByteBufferUtil.bytes(1),row.getBytes("key"));
  assertEquals("abc",row.getString("42"));
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testDropCompactStaticColumn(){
  ColumnDef column1=new ColumnDef();
  column1.setName(bytes(42)).setValidation_class(UTF8Type.instance.toString());
  ColumnDef column2=new ColumnDef();
  column2.setName(bytes(25)).setValidation_class(UTF8Type.instance.toString());
  CfDef cf=new CfDef("thriftks","staticcompact");
  cf.setColumn_type("Standard").setComparator_type(Int32Type.instance.toString()).setDefault_validation_class(UTF8Type.instance.toString()).setKey_validation_class(BytesType.instance.toString()).setColumn_metadata(Arrays.asList(column1,column2));
  SchemaLoader.createKeyspace("thriftks",KeyspaceParams.simple(1),ThriftConversion.fromThrift(cf));
  CFMetaData cfm=Schema.instance.getCFMetaData("thriftks","staticcompact");
  assertTrue(cfm.getColumnMetadata().containsKey(bytes(42)));
  assertTrue(cfm.getColumnMetadata().containsKey(bytes(25)));
  cf.setColumn_metadata(Collections.singletonList(column1));
  MigrationManager.announceColumnFamilyUpdate(ThriftConversion.fromThriftForUpdate(cf,cfm),true);
  assertTrue(cfm.getColumnMetadata().containsKey(bytes(42)));
  assertFalse(cfm.getColumnMetadata().containsKey(bytes(25)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.UDHelperTest </h4><pre class="type-15 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNonEmptyPrimitiveTypes(){
  AbstractType<?>[] types=new AbstractType<?>[]{TimeType.instance,SimpleDateType.instance,ByteType.instance,ShortType.instance};
  for (  AbstractType<?> type : types) {
    try {
      type.getSerializer().validate(ByteBufferUtil.EMPTY_BYTE_BUFFER);
      Assert.fail(type.getClass().getSimpleName());
    }
 catch (    MarshalException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testEmptiableTypes(){
  AbstractType<?>[] types=new AbstractType<?>[]{BooleanType.instance,CounterColumnType.instance,DateType.instance,DecimalType.instance,DoubleType.instance,FloatType.instance,InetAddressType.instance,Int32Type.instance,IntegerType.instance,LongType.instance,TimestampType.instance,TimeUUIDType.instance,UUIDType.instance};
  for (  AbstractType<?> type : types) {
    Assert.assertTrue(type.getClass().getSimpleName(),UDHelper.isNullOrEmpty(type,ByteBufferUtil.EMPTY_BYTE_BUFFER));
    Assert.assertTrue("reversed " + type.getClass().getSimpleName(),UDHelper.isNullOrEmpty(ReversedType.getInstance(type),ByteBufferUtil.EMPTY_BYTE_BUFFER));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.ViewSchemaTest </h4><pre class="type-13 type-15 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAllTypes() throws Throwable {
  String myType=createType("CREATE TYPE %s (a int, b uuid, c set<text>)");
  createTable("CREATE TABLE %s (" + "k int PRIMARY KEY, " + "asciival ascii, "+ "bigintval bigint, "+ "blobval blob, "+ "booleanval boolean, "+ "dateval date, "+ "decimalval decimal, "+ "doubleval double, "+ "floatval float, "+ "inetval inet, "+ "intval int, "+ "textval text, "+ "timeval time, "+ "timestampval timestamp, "+ "timeuuidval timeuuid, "+ "uuidval uuid,"+ "varcharval varchar, "+ "varintval varint, "+ "listval list<int>, "+ "frozenlistval frozen<list<int>>, "+ "setval set<uuid>, "+ "frozensetval frozen<set<uuid>>, "+ "mapval map<ascii, int>,"+ "frozenmapval frozen<map<ascii, int>>,"+ "tupleval frozen<tuple<int, ascii, uuid>>,"+ "udtval frozen<" + myType + ">)");
  CFMetaData metadata=currentTableMetadata();
  execute("USE " + keyspace());
  executeNet(protocolVersion,"USE " + keyspace());
  for (  ColumnDefinition def : new HashSet<>(metadata.allColumns())) {
    try {
      createView("mv_" + def.name,"CREATE MATERIALIZED VIEW %s AS SELECT * FROM %%s WHERE " + def.name + " IS NOT NULL AND k IS NOT NULL PRIMARY KEY ("+ def.name+ ",k)");
      if (def.type.isMultiCell())       Assert.fail("MV on a multicell should fail " + def);
      if (def.isPartitionKey())       Assert.fail("MV on partition key should fail " + def);
    }
 catch (    InvalidQueryException e) {
      if (!def.type.isMultiCell() && !def.isPartitionKey())       Assert.fail("MV creation failed on " + def);
    }
  }
  assertInvalidMessage("fromJson() cannot be used in the selection clause","SELECT fromJson(asciival) FROM %s",0,0);
  String func1=createFunction(KEYSPACE,"int","CREATE FUNCTION %s (a int) CALLED ON NULL INPUT RETURNS text LANGUAGE java AS $$ return a.toString(); $$");
  createFunctionOverload(func1,"int","CREATE FUNCTION %s (a text) CALLED ON NULL INPUT RETURNS text LANGUAGE java AS $$ return new String(a); $$");
  updateView("INSERT INTO %s (k, asciival) VALUES (?, fromJson(?))",0,"\"ascii text\"");
  assertRows(execute("SELECT k, asciival FROM %s WHERE k = ?",0),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, asciival) VALUES (?, fromJson(?))",0,"\"ascii \\\" text\"");
  assertRows(execute("SELECT k, asciival FROM %s WHERE k = ?",0),row(0,"ascii \" text"));
  assertRows(execute("SELECT asciival FROM %s WHERE k = fromJson(?)","0"),row("ascii \" text"));
  assertRows(execute("SELECT k, udtval from mv_asciival WHERE asciival = ?","ascii text"));
  assertRows(execute("SELECT k, udtval from mv_asciival WHERE asciival = ?","ascii \" text"),row(0,null));
  updateView("UPDATE %s SET asciival = fromJson(?) WHERE k = fromJson(?)","\"ascii \\\" text\"","0");
  assertRows(execute("SELECT k, udtval from mv_asciival WHERE asciival = ?","ascii \" text"),row(0,null));
  updateView("DELETE FROM %s WHERE k = fromJson(?)","0");
  assertRows(execute("SELECT k, asciival FROM %s WHERE k = ?",0));
  assertRows(execute("SELECT k, udtval from mv_asciival WHERE asciival = ?","ascii \" text"));
  updateView("INSERT INTO %s (k, asciival) VALUES (?, fromJson(?))",0,"\"ascii text\"");
  assertRows(execute("SELECT k, udtval from mv_asciival WHERE asciival = ?","ascii text"),row(0,null));
  updateView("INSERT INTO %s (k, bigintval) VALUES (?, fromJson(?))",0,"123123123123");
  assertRows(execute("SELECT k, bigintval FROM %s WHERE k = ?",0),row(0,123123123123L));
  assertRows(execute("SELECT k, asciival from mv_bigintval WHERE bigintval = ?",123123123123L),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, blobval) VALUES (?, fromJson(?))",0,"\"0x00000001\"");
  assertRows(execute("SELECT k, blobval FROM %s WHERE k = ?",0),row(0,ByteBufferUtil.bytes(1)));
  assertRows(execute("SELECT k, asciival from mv_blobval WHERE blobval = ?",ByteBufferUtil.bytes(1)),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, booleanval) VALUES (?, fromJson(?))",0,"true");
  assertRows(execute("SELECT k, booleanval FROM %s WHERE k = ?",0),row(0,true));
  assertRows(execute("SELECT k, asciival from mv_booleanval WHERE booleanval = ?",true),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, booleanval) VALUES (?, fromJson(?))",0,"false");
  assertRows(execute("SELECT k, booleanval FROM %s WHERE k = ?",0),row(0,false));
  assertRows(execute("SELECT k, asciival from mv_booleanval WHERE booleanval = ?",true));
  assertRows(execute("SELECT k, asciival from mv_booleanval WHERE booleanval = ?",false),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, dateval) VALUES (?, fromJson(?))",0,"\"1987-03-23\"");
  assertRows(execute("SELECT k, dateval FROM %s WHERE k = ?",0),row(0,SimpleDateSerializer.dateStringToDays("1987-03-23")));
  assertRows(execute("SELECT k, asciival from mv_dateval WHERE dateval = fromJson(?)","\"1987-03-23\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, decimalval) VALUES (?, fromJson(?))",0,"123123.123123");
  assertRows(execute("SELECT k, decimalval FROM %s WHERE k = ?",0),row(0,new BigDecimal("123123.123123")));
  assertRows(execute("SELECT k, asciival from mv_decimalval WHERE decimalval = fromJson(?)","123123.123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, decimalval) VALUES (?, fromJson(?))",0,"123123");
  assertRows(execute("SELECT k, decimalval FROM %s WHERE k = ?",0),row(0,new BigDecimal("123123")));
  assertRows(execute("SELECT k, asciival from mv_decimalval WHERE decimalval = fromJson(?)","123123.123123"));
  assertRows(execute("SELECT k, asciival from mv_decimalval WHERE decimalval = fromJson(?)","123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, decimalval) VALUES (?, fromJson(?))",0,"\"123123.123123\"");
  assertRows(execute("SELECT k, decimalval FROM %s WHERE k = ?",0),row(0,new BigDecimal("123123.123123")));
  updateView("INSERT INTO %s (k, decimalval) VALUES (?, fromJson(?))",0,"\"-1.23E-12\"");
  assertRows(execute("SELECT k, decimalval FROM %s WHERE k = ?",0),row(0,new BigDecimal("-1.23E-12")));
  assertRows(execute("SELECT k, asciival from mv_decimalval WHERE decimalval = fromJson(?)","\"-1.23E-12\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, doubleval) VALUES (?, fromJson(?))",0,"123123.123123");
  assertRows(execute("SELECT k, doubleval FROM %s WHERE k = ?",0),row(0,123123.123123d));
  assertRows(execute("SELECT k, asciival from mv_doubleval WHERE doubleval = fromJson(?)","123123.123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, doubleval) VALUES (?, fromJson(?))",0,"123123");
  assertRows(execute("SELECT k, doubleval FROM %s WHERE k = ?",0),row(0,123123.0d));
  assertRows(execute("SELECT k, asciival from mv_doubleval WHERE doubleval = fromJson(?)","123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, floatval) VALUES (?, fromJson(?))",0,"123123.123123");
  assertRows(execute("SELECT k, floatval FROM %s WHERE k = ?",0),row(0,123123.123123f));
  assertRows(execute("SELECT k, asciival from mv_floatval WHERE floatval = fromJson(?)","123123.123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, floatval) VALUES (?, fromJson(?))",0,"123123");
  assertRows(execute("SELECT k, floatval FROM %s WHERE k = ?",0),row(0,123123.0f));
  assertRows(execute("SELECT k, asciival from mv_floatval WHERE floatval = fromJson(?)","123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, inetval) VALUES (?, fromJson(?))",0,"\"127.0.0.1\"");
  assertRows(execute("SELECT k, inetval FROM %s WHERE k = ?",0),row(0,InetAddress.getByName("127.0.0.1")));
  assertRows(execute("SELECT k, asciival from mv_inetval WHERE inetval = fromJson(?)","\"127.0.0.1\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, inetval) VALUES (?, fromJson(?))",0,"\"::1\"");
  assertRows(execute("SELECT k, inetval FROM %s WHERE k = ?",0),row(0,InetAddress.getByName("::1")));
  assertRows(execute("SELECT k, asciival from mv_inetval WHERE inetval = fromJson(?)","\"127.0.0.1\""));
  assertRows(execute("SELECT k, asciival from mv_inetval WHERE inetval = fromJson(?)","\"::1\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, intval) VALUES (?, fromJson(?))",0,"123123");
  assertRows(execute("SELECT k, intval FROM %s WHERE k = ?",0),row(0,123123));
  assertRows(execute("SELECT k, asciival from mv_intval WHERE intval = fromJson(?)","123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, textval) VALUES (?, fromJson(?))",0,"\"some \\\" text\"");
  assertRows(execute("SELECT k, textval FROM %s WHERE k = ?",0),row(0,"some \" text"));
  updateView("INSERT INTO %s (k, textval) VALUES (?, fromJson(?))",0,"\"\\u2013\"");
  assertRows(execute("SELECT k, textval FROM %s WHERE k = ?",0),row(0,"\u2013"));
  assertRows(execute("SELECT k, asciival from mv_textval WHERE textval = fromJson(?)","\"\\u2013\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, textval) VALUES (?, fromJson(?))",0,"\"abcd\"");
  assertRows(execute("SELECT k, textval FROM %s WHERE k = ?",0),row(0,"abcd"));
  assertRows(execute("SELECT k, asciival from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, timeval) VALUES (?, fromJson(?))",0,"\"07:35:07.000111222\"");
  assertRows(execute("SELECT k, timeval FROM %s WHERE k = ?",0),row(0,TimeSerializer.timeStringToLong("07:35:07.000111222")));
  assertRows(execute("SELECT k, asciival from mv_timeval WHERE timeval = fromJson(?)","\"07:35:07.000111222\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, timestampval) VALUES (?, fromJson(?))",0,"123123123123");
  assertRows(execute("SELECT k, timestampval FROM %s WHERE k = ?",0),row(0,new Date(123123123123L)));
  assertRows(execute("SELECT k, asciival from mv_timestampval WHERE timestampval = fromJson(?)","123123123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, timestampval) VALUES (?, fromJson(?))",0,"\"2014-01-01\"");
  assertRows(execute("SELECT k, timestampval FROM %s WHERE k = ?",0),row(0,new SimpleDateFormat("y-M-d").parse("2014-01-01")));
  assertRows(execute("SELECT k, asciival from mv_timestampval WHERE timestampval = fromJson(?)","\"2014-01-01\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, timeuuidval) VALUES (?, fromJson(?))",0,"\"6bddc89a-5644-11e4-97fc-56847afe9799\"");
  assertRows(execute("SELECT k, timeuuidval FROM %s WHERE k = ?",0),row(0,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")));
  updateView("INSERT INTO %s (k, timeuuidval) VALUES (?, fromJson(?))",0,"\"6BDDC89A-5644-11E4-97FC-56847AFE9799\"");
  assertRows(execute("SELECT k, timeuuidval FROM %s WHERE k = ?",0),row(0,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")));
  assertRows(execute("SELECT k, asciival from mv_timeuuidval WHERE timeuuidval = fromJson(?)","\"6BDDC89A-5644-11E4-97FC-56847AFE9799\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, uuidval) VALUES (?, fromJson(?))",0,"\"6bddc89a-5644-11e4-97fc-56847afe9799\"");
  assertRows(execute("SELECT k, uuidval FROM %s WHERE k = ?",0),row(0,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")));
  updateView("INSERT INTO %s (k, uuidval) VALUES (?, fromJson(?))",0,"\"6BDDC89A-5644-11E4-97FC-56847AFE9799\"");
  assertRows(execute("SELECT k, uuidval FROM %s WHERE k = ?",0),row(0,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")));
  assertRows(execute("SELECT k, asciival from mv_uuidval WHERE uuidval = fromJson(?)","\"6BDDC89A-5644-11E4-97FC-56847AFE9799\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, varintval) VALUES (?, fromJson(?))",0,"123123123123");
  assertRows(execute("SELECT k, varintval FROM %s WHERE k = ?",0),row(0,new BigInteger("123123123123")));
  assertRows(execute("SELECT k, asciival from mv_varintval WHERE varintval = fromJson(?)","123123123123"),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, varintval) VALUES (?, fromJson(?))",0,"\"1234567890123456789012345678901234567890\"");
  assertRows(execute("SELECT k, varintval FROM %s WHERE k = ?",0),row(0,new BigInteger("1234567890123456789012345678901234567890")));
  assertRows(execute("SELECT k, asciival from mv_varintval WHERE varintval = fromJson(?)","\"1234567890123456789012345678901234567890\""),row(0,"ascii text"));
  updateView("INSERT INTO %s (k, listval) VALUES (?, fromJson(?))",0,"[1, 2, 3]");
  assertRows(execute("SELECT k, listval FROM %s WHERE k = ?",0),row(0,list(1,2,3)));
  assertRows(execute("SELECT k, listval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list(1,2,3)));
  updateView("INSERT INTO %s (k, listval) VALUES (?, fromJson(?))",0,"[1]");
  assertRows(execute("SELECT k, listval FROM %s WHERE k = ?",0),row(0,list(1)));
  assertRows(execute("SELECT k, listval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list(1)));
  updateView("UPDATE %s SET listval = listval + fromJson(?) WHERE k = ?","[2]",0);
  assertRows(execute("SELECT k, listval FROM %s WHERE k = ?",0),row(0,list(1,2)));
  assertRows(execute("SELECT k, listval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list(1,2)));
  updateView("UPDATE %s SET listval = fromJson(?) + listval WHERE k = ?","[0]",0);
  assertRows(execute("SELECT k, listval FROM %s WHERE k = ?",0),row(0,list(0,1,2)));
  assertRows(execute("SELECT k, listval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list(0,1,2)));
  updateView("UPDATE %s SET listval[1] = fromJson(?) WHERE k = ?","10",0);
  assertRows(execute("SELECT k, listval FROM %s WHERE k = ?",0),row(0,list(0,10,2)));
  assertRows(execute("SELECT k, listval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list(0,10,2)));
  updateView("DELETE listval[1] FROM %s WHERE k = ?",0);
  assertRows(execute("SELECT k, listval FROM %s WHERE k = ?",0),row(0,list(0,2)));
  assertRows(execute("SELECT k, listval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list(0,2)));
  updateView("INSERT INTO %s (k, listval) VALUES (?, fromJson(?))",0,"[]");
  assertRows(execute("SELECT k, listval FROM %s WHERE k = ?",0),row(0,null));
  assertRows(execute("SELECT k, listval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,null));
  updateView("INSERT INTO %s (k, frozenlistval) VALUES (?, fromJson(?))",0,"[1, 2, 3]");
  assertRows(execute("SELECT k, frozenlistval FROM %s WHERE k = ?",0),row(0,list(1,2,3)));
  assertRows(execute("SELECT k, frozenlistval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list(1,2,3)));
  assertRows(execute("SELECT k, textval from mv_frozenlistval where frozenlistval = fromJson(?)","[1, 2, 3]"),row(0,"abcd"));
  updateView("INSERT INTO %s (k, frozenlistval) VALUES (?, fromJson(?))",0,"[3, 2, 1]");
  assertRows(execute("SELECT k, frozenlistval FROM %s WHERE k = ?",0),row(0,list(3,2,1)));
  assertRows(execute("SELECT k, textval from mv_frozenlistval where frozenlistval = fromJson(?)","[1, 2, 3]"));
  assertRows(execute("SELECT k, textval from mv_frozenlistval where frozenlistval = fromJson(?)","[3, 2, 1]"),row(0,"abcd"));
  assertRows(execute("SELECT k, frozenlistval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list(3,2,1)));
  updateView("INSERT INTO %s (k, frozenlistval) VALUES (?, fromJson(?))",0,"[]");
  assertRows(execute("SELECT k, frozenlistval FROM %s WHERE k = ?",0),row(0,list()));
  assertRows(execute("SELECT k, frozenlistval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,list()));
  updateView("INSERT INTO %s (k, setval) VALUES (?, fromJson(?))",0,"[\"6bddc89a-5644-11e4-97fc-56847afe9798\", \"6bddc89a-5644-11e4-97fc-56847afe9799\"]");
  assertRows(execute("SELECT k, setval FROM %s WHERE k = ?",0),row(0,set(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  assertRows(execute("SELECT k, setval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,set(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  updateView("INSERT INTO %s (k, setval) VALUES (?, fromJson(?))",0,"[\"6bddc89a-5644-11e4-97fc-56847afe9798\", \"6bddc89a-5644-11e4-97fc-56847afe9798\", \"6bddc89a-5644-11e4-97fc-56847afe9799\"]");
  assertRows(execute("SELECT k, setval FROM %s WHERE k = ?",0),row(0,set(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  assertRows(execute("SELECT k, setval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,set(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  updateView("UPDATE %s SET setval = setval + fromJson(?) WHERE k = ?","[\"6bddc89a-5644-0000-97fc-56847afe9799\"]",0);
  assertRows(execute("SELECT k, setval FROM %s WHERE k = ?",0),row(0,set(UUID.fromString("6bddc89a-5644-0000-97fc-56847afe9799"),UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  assertRows(execute("SELECT k, setval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,set(UUID.fromString("6bddc89a-5644-0000-97fc-56847afe9799"),UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  updateView("UPDATE %s SET setval = setval - fromJson(?) WHERE k = ?","[\"6bddc89a-5644-0000-97fc-56847afe9799\"]",0);
  assertRows(execute("SELECT k, setval FROM %s WHERE k = ?",0),row(0,set(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  assertRows(execute("SELECT k, setval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,set(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  updateView("INSERT INTO %s (k, setval) VALUES (?, fromJson(?))",0,"[]");
  assertRows(execute("SELECT k, setval FROM %s WHERE k = ?",0),row(0,null));
  assertRows(execute("SELECT k, setval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,null));
  updateView("INSERT INTO %s (k, frozensetval) VALUES (?, fromJson(?))",0,"[\"6bddc89a-5644-11e4-97fc-56847afe9798\", \"6bddc89a-5644-11e4-97fc-56847afe9799\"]");
  assertRows(execute("SELECT k, frozensetval FROM %s WHERE k = ?",0),row(0,set(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  assertRows(execute("SELECT k, frozensetval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,set(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799")))));
  updateView("INSERT INTO %s (k, frozensetval) VALUES (?, fromJson(?))",0,"[\"6bddc89a-0000-11e4-97fc-56847afe9799\", \"6bddc89a-5644-11e4-97fc-56847afe9798\"]");
  assertRows(execute("SELECT k, frozensetval FROM %s WHERE k = ?",0),row(0,set(UUID.fromString("6bddc89a-0000-11e4-97fc-56847afe9799"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798")))));
  assertRows(execute("SELECT k, frozensetval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,set(UUID.fromString("6bddc89a-0000-11e4-97fc-56847afe9799"),(UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9798")))));
  updateView("INSERT INTO %s (k, mapval) VALUES (?, fromJson(?))",0,"{\"a\": 1, \"b\": 2}");
  assertRows(execute("SELECT k, mapval FROM %s WHERE k = ?",0),row(0,map("a",1,"b",2)));
  assertRows(execute("SELECT k, mapval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,map("a",1,"b",2)));
  updateView("UPDATE %s SET mapval[?] = ?  WHERE k = ?","c",3,0);
  assertRows(execute("SELECT k, mapval FROM %s WHERE k = ?",0),row(0,map("a",1,"b",2,"c",3)));
  assertRows(execute("SELECT k, mapval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,map("a",1,"b",2,"c",3)));
  updateView("UPDATE %s SET mapval[?] = ?  WHERE k = ?","b",10,0);
  assertRows(execute("SELECT k, mapval FROM %s WHERE k = ?",0),row(0,map("a",1,"b",10,"c",3)));
  assertRows(execute("SELECT k, mapval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,map("a",1,"b",10,"c",3)));
  updateView("DELETE mapval[?] FROM %s WHERE k = ?","b",0);
  assertRows(execute("SELECT k, mapval FROM %s WHERE k = ?",0),row(0,map("a",1,"c",3)));
  assertRows(execute("SELECT k, mapval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,map("a",1,"c",3)));
  updateView("INSERT INTO %s (k, mapval) VALUES (?, fromJson(?))",0,"{}");
  assertRows(execute("SELECT k, mapval FROM %s WHERE k = ?",0),row(0,null));
  assertRows(execute("SELECT k, mapval from mv_textval WHERE textval = fromJson(?)","\"abcd\""),row(0,null));
  updateView("INSERT INTO %s (k, frozenmapval) VALUES (?, fromJson(?))",0,"{\"a\": 1, \"b\": 2}");
  assertRows(execute("SELECT k, frozenmapval FROM %s WHERE k = ?",0),row(0,map("a",1,"b",2)));
  assertRows(execute("SELECT k, textval FROM mv_frozenmapval WHERE frozenmapval = fromJson(?)","{\"a\": 1, \"b\": 2}"),row(0,"abcd"));
  updateView("INSERT INTO %s (k, frozenmapval) VALUES (?, fromJson(?))",0,"{\"b\": 2, \"a\": 3}");
  assertRows(execute("SELECT k, frozenmapval FROM %s WHERE k = ?",0),row(0,map("a",3,"b",2)));
  assertRows(execute("SELECT k, frozenmapval FROM %s WHERE k = ?",0),row(0,map("a",3,"b",2)));
  updateView("INSERT INTO %s (k, tupleval) VALUES (?, fromJson(?))",0,"[1, \"foobar\", \"6bddc89a-5644-11e4-97fc-56847afe9799\"]");
  assertRows(execute("SELECT k, tupleval FROM %s WHERE k = ?",0),row(0,tuple(1,"foobar",UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"))));
  assertRows(execute("SELECT k, textval FROM mv_tupleval WHERE tupleval = ?",tuple(1,"foobar",UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"))),row(0,"abcd"));
  updateView("INSERT INTO %s (k, tupleval) VALUES (?, fromJson(?))",0,"[1, null, \"6bddc89a-5644-11e4-97fc-56847afe9799\"]");
  assertRows(execute("SELECT k, tupleval FROM %s WHERE k = ?",0),row(0,tuple(1,null,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"))));
  assertRows(execute("SELECT k, textval FROM mv_tupleval WHERE tupleval = ?",tuple(1,"foobar",UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"))));
  assertRows(execute("SELECT k, textval FROM mv_tupleval WHERE tupleval = ?",tuple(1,null,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"))),row(0,"abcd"));
  updateView("INSERT INTO %s (k, udtval) VALUES (?, fromJson(?))",0,"{\"a\": 1, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\", \"c\": [\"foo\", \"bar\"]}");
  assertRows(execute("SELECT k, udtval.a, udtval.b, udtval.c FROM %s WHERE k = ?",0),row(0,1,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"),set("bar","foo")));
  assertRows(execute("SELECT k, textval FROM mv_udtval WHERE udtval = fromJson(?)","{\"a\": 1, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\", \"c\": [\"foo\", \"bar\"]}"),row(0,"abcd"));
  updateView("INSERT INTO %s (k, udtval) VALUES (?, fromJson(?))",0,"{\"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\", \"a\": 1, \"c\": [\"foo\", \"bar\"]}");
  assertRows(execute("SELECT k, udtval.a, udtval.b, udtval.c FROM %s WHERE k = ?",0),row(0,1,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"),set("bar","foo")));
  assertRows(execute("SELECT k, textval FROM mv_udtval WHERE udtval = fromJson(?)","{\"a\": 1, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\", \"c\": [\"foo\", \"bar\"]}"),row(0,"abcd"));
  updateView("INSERT INTO %s (k, udtval) VALUES (?, fromJson(?))",0,"{\"a\": null, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\", \"c\": [\"foo\", \"bar\"]}");
  assertRows(execute("SELECT k, udtval.a, udtval.b, udtval.c FROM %s WHERE k = ?",0),row(0,null,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"),set("bar","foo")));
  assertRows(execute("SELECT k, textval FROM mv_udtval WHERE udtval = fromJson(?)","{\"a\": 1, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\", \"c\": [\"foo\", \"bar\"]}"));
  assertRows(execute("SELECT k, textval FROM mv_udtval WHERE udtval = fromJson(?)","{\"a\": null, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\", \"c\": [\"foo\", \"bar\"]}"),row(0,"abcd"));
  updateView("INSERT INTO %s (k, udtval) VALUES (?, fromJson(?))",0,"{\"a\": 1, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\"}");
  assertRows(execute("SELECT k, udtval.a, udtval.b, udtval.c FROM %s WHERE k = ?",0),row(0,1,UUID.fromString("6bddc89a-5644-11e4-97fc-56847afe9799"),null));
  assertRows(execute("SELECT k, textval FROM mv_udtval WHERE udtval = fromJson(?)","{\"a\": null, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\", \"c\": [\"foo\", \"bar\"]}"));
  assertRows(execute("SELECT k, textval FROM mv_udtval WHERE udtval = fromJson(?)","{\"a\": 1, \"b\": \"6bddc89a-5644-11e4-97fc-56847afe9799\"}"),row(0,"abcd"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.ViewTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIgnoreUpdate() throws Throwable {
  createTable("CREATE TABLE %s (" + "a int, " + "b int, "+ "c int, "+ "d int, "+ "PRIMARY KEY (a, b))");
  execute("USE " + keyspace());
  executeNet(protocolVersion,"USE " + keyspace());
  createView("mv","CREATE MATERIALIZED VIEW %s AS SELECT a, b, c FROM %%s WHERE a IS NOT NULL AND b IS NOT NULL PRIMARY KEY (b, a)");
  updateView("INSERT INTO %s (a, b, c) VALUES (?, ?, ?)",0,0,0);
  assertRows(execute("SELECT a, b, c from mv WHERE b = ?",0),row(0,0,0));
  updateView("UPDATE %s SET d = ? WHERE a = ? AND b = ?",0,0,0);
  assertRows(execute("SELECT a, b, c from mv WHERE b = ?",0),row(0,0,0));
  String table=KEYSPACE + "." + currentTable();
  updateView("BEGIN BATCH " + "INSERT INTO " + table + " (a, b, c, d) VALUES (?, ?, ?, ?); "+ "UPDATE "+ table+ " SET d = ? WHERE a = ? AND b = ?; "+ "APPLY BATCH",0,0,0,0,1,0,1);
  assertRows(execute("SELECT a, b, c from mv WHERE b = ?",0),row(0,0,0));
  assertEmpty(execute("SELECT a, b, c from mv WHERE b = ?",1));
  ColumnFamilyStore cfs=Keyspace.open(keyspace()).getColumnFamilyStore("mv");
  cfs.forceBlockingFlush();
  Assert.assertEquals(1,cfs.getLiveSSTables().size());
}

</code></pre>

<br>
<pre class="type-13 type-15 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCompoundPartitionKey() throws Throwable {
  createTable("CREATE TABLE %s (" + "k int, " + "asciival ascii, "+ "bigintval bigint, "+ "PRIMARY KEY((k, asciival)))");
  CFMetaData metadata=currentTableMetadata();
  execute("USE " + keyspace());
  executeNet(protocolVersion,"USE " + keyspace());
  for (  ColumnDefinition def : new HashSet<>(metadata.allColumns())) {
    try {
      String query="CREATE MATERIALIZED VIEW %s AS SELECT * FROM %%s WHERE " + def.name + " IS NOT NULL AND k IS NOT NULL "+ (def.name.toString().equals("asciival") ? "" : "AND asciival IS NOT NULL ")+ "PRIMARY KEY ("+ def.name+ ", k"+ (def.name.toString().equals("asciival") ? "" : ", asciival")+ ")";
      createView("mv1_" + def.name,query);
      if (def.type.isMultiCell())       Assert.fail("MV on a multicell should fail " + def);
    }
 catch (    InvalidQueryException e) {
      if (!def.type.isMultiCell() && !def.isPartitionKey())       Assert.fail("MV creation failed on " + def);
    }
    try {
      String query="CREATE MATERIALIZED VIEW %s AS SELECT * FROM %%s WHERE " + def.name + " IS NOT NULL AND k IS NOT NULL "+ (def.name.toString().equals("asciival") ? "" : "AND asciival IS NOT NULL ")+ " PRIMARY KEY ("+ def.name+ ", asciival"+ (def.name.toString().equals("k") ? "" : ", k")+ ")";
      createView("mv2_" + def.name,query);
      if (def.type.isMultiCell())       Assert.fail("MV on a multicell should fail " + def);
    }
 catch (    InvalidQueryException e) {
      if (!def.type.isMultiCell() && !def.isPartitionKey())       Assert.fail("MV creation failed on " + def);
    }
    try {
      String query="CREATE MATERIALIZED VIEW %s AS SELECT * FROM %%s WHERE " + def.name + " IS NOT NULL AND k IS NOT NULL "+ (def.name.toString().equals("asciival") ? "" : "AND asciival IS NOT NULL ")+ "PRIMARY KEY (("+ def.name+ ", k), asciival)";
      createView("mv3_" + def.name,query);
      if (def.type.isMultiCell())       Assert.fail("MV on a multicell should fail " + def);
    }
 catch (    InvalidQueryException e) {
      if (!def.type.isMultiCell() && !def.isPartitionKey())       Assert.fail("MV creation failed on " + def);
    }
    try {
      String query="CREATE MATERIALIZED VIEW %s AS SELECT * FROM %%s WHERE " + def.name + " IS NOT NULL AND k IS NOT NULL "+ (def.name.toString().equals("asciival") ? "" : "AND asciival IS NOT NULL ")+ "PRIMARY KEY (("+ def.name+ ", k), asciival)";
      createView("mv3_" + def.name,query);
      Assert.fail("Should fail on duplicate name");
    }
 catch (    Exception e) {
    }
    try {
      String query="CREATE MATERIALIZED VIEW %s AS SELECT * FROM %%s WHERE " + def.name + " IS NOT NULL AND k IS NOT NULL "+ (def.name.toString().equals("asciival") ? "" : "AND asciival IS NOT NULL ")+ "PRIMARY KEY (("+ def.name+ ", k), nonexistentcolumn)";
      createView("mv3_" + def.name,query);
      Assert.fail("Should fail with unknown base column");
    }
 catch (    InvalidQueryException e) {
    }
  }
  updateView("INSERT INTO %s (k, asciival, bigintval) VALUES (?, ?, fromJson(?))",0,"ascii text","123123123123");
  updateView("INSERT INTO %s (k, asciival) VALUES (?, fromJson(?))",0,"\"ascii text\"");
  assertRows(execute("SELECT bigintval FROM %s WHERE k = ? and asciival = ?",0,"ascii text"),row(123123123123L));
  assertRows(execute("SELECT k, bigintval from mv1_asciival WHERE asciival = ?","ascii text"),row(0,123123123123L));
  assertRows(execute("SELECT k, bigintval from mv2_k WHERE asciival = ? and k = ?","ascii text",0),row(0,123123123123L));
  assertRows(execute("SELECT k from mv1_bigintval WHERE bigintval = ?",123123123123L),row(0));
  assertRows(execute("SELECT asciival from mv3_bigintval where bigintval = ? AND k = ?",123123123123L,0),row("ascii text"));
  updateView("INSERT INTO %s (k, asciival, bigintval) VALUES (?, ?, fromJson(?))",0,"ascii text","1");
  assertRows(execute("SELECT bigintval FROM %s WHERE k = ? and asciival = ?",0,"ascii text"),row(1L));
  assertRows(execute("SELECT k, bigintval from mv1_asciival WHERE asciival = ?","ascii text"),row(0,1L));
  assertRows(execute("SELECT k, bigintval from mv2_k WHERE asciival = ? and k = ?","ascii text",0),row(0,1L));
  assertRows(execute("SELECT k from mv1_bigintval WHERE bigintval = ?",123123123123L));
  assertRows(execute("SELECT asciival from mv3_bigintval where bigintval = ? AND k = ?",123123123123L,0));
  assertRows(execute("SELECT asciival from mv3_bigintval where bigintval = ? AND k = ?",1L,0),row("ascii text"));
  updateView("TRUNCATE %s");
  assertRows(execute("SELECT bigintval FROM %s WHERE k = ? and asciival = ?",0,"ascii text"));
  assertRows(execute("SELECT k, bigintval from mv1_asciival WHERE asciival = ?","ascii text"));
  assertRows(execute("SELECT k, bigintval from mv2_k WHERE asciival = ? and k = ?","ascii text",0));
  assertRows(execute("SELECT asciival from mv3_bigintval where bigintval = ? AND k = ?",1L,0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.functions.TimeFctsTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeUuidToUnixTimestamp(){
  DateTime dateTime=DateTimeFormat.forPattern("yyyy-MM-dd hh:mm:ss").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21 11:03:02");
  long timeInMillis=dateTime.getMillis();
  ByteBuffer input=ByteBuffer.wrap(UUIDGen.getTimeUUIDBytes(timeInMillis,0));
  ByteBuffer output=executeFunction(TimeFcts.timeUuidToUnixTimestamp,input);
  assertEquals(timeInMillis,LongType.instance.compose(output).longValue());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeUuidToTimestamp(){
  DateTime dateTime=DateTimeFormat.forPattern("yyyy-MM-dd hh:mm:ss").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21 11:03:02");
  long timeInMillis=dateTime.getMillis();
  ByteBuffer input=ByteBuffer.wrap(UUIDGen.getTimeUUIDBytes(timeInMillis,0));
  ByteBuffer output=executeFunction(TimeFcts.timeUuidToTimestamp,input);
  assertEquals(dateTime.toDate(),TimestampType.instance.compose(output));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMinTimeUuid(){
  DateTime dateTime=DateTimeFormat.forPattern("yyyy-MM-dd hh:mm:ss").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21 11:03:02");
  long timeInMillis=dateTime.getMillis();
  ByteBuffer input=TimestampType.instance.fromString("2015-05-21 11:03:02+00");
  ByteBuffer output=executeFunction(TimeFcts.minTimeuuidFct,input);
  assertEquals(UUIDGen.minTimeUUID(timeInMillis),TimeUUIDType.instance.compose(output));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeUuidToDate(){
  DateTime dateTime=DateTimeFormat.forPattern("yyyy-MM-dd hh:mm:ss").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21 11:03:02");
  long timeInMillis=dateTime.getMillis();
  ByteBuffer input=ByteBuffer.wrap(UUIDGen.getTimeUUIDBytes(timeInMillis,0));
  ByteBuffer output=executeFunction(TimeFcts.timeUuidtoDate,input);
  long expectedTime=DateTimeFormat.forPattern("yyyy-MM-dd").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21").getMillis();
  assertEquals(expectedTime,SimpleDateType.instance.toTimeInMillis(output));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDateOf(){
  DateTime dateTime=DateTimeFormat.forPattern("yyyy-MM-dd hh:mm:ss").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21 11:03:02");
  long timeInMillis=dateTime.getMillis();
  ByteBuffer input=ByteBuffer.wrap(UUIDGen.getTimeUUIDBytes(timeInMillis,0));
  ByteBuffer output=executeFunction(TimeFcts.dateOfFct,input);
  assertEquals(dateTime.toDate(),TimestampType.instance.compose(output));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimestampToUnixTimestamp(){
  DateTime dateTime=DateTimeFormat.forPattern("yyyy-MM-dd hh:mm:ss").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21 11:03:02");
  ByteBuffer input=TimestampType.instance.decompose(dateTime.toDate());
  ByteBuffer output=executeFunction(TimeFcts.timestampToUnixTimestamp,input);
  assertEquals(dateTime.getMillis(),LongType.instance.compose(output).longValue());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxTimeUuid(){
  DateTime dateTime=DateTimeFormat.forPattern("yyyy-MM-dd hh:mm:ss").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21 11:03:02");
  long timeInMillis=dateTime.getMillis();
  ByteBuffer input=TimestampType.instance.fromString("2015-05-21 11:03:02+00");
  ByteBuffer output=executeFunction(TimeFcts.maxTimeuuidFct,input);
  assertEquals(UUIDGen.maxTimeUUID(timeInMillis),TimeUUIDType.instance.compose(output));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnixTimestampOfFct(){
  DateTime dateTime=DateTimeFormat.forPattern("yyyy-MM-dd hh:mm:ss").withZone(DateTimeZone.UTC).parseDateTime("2015-05-21 11:03:02");
  long timeInMillis=dateTime.getMillis();
  ByteBuffer input=ByteBuffer.wrap(UUIDGen.getTimeUUIDBytes(timeInMillis,0));
  ByteBuffer output=executeFunction(TimeFcts.unixTimestampOfFct,input);
  assertEquals(timeInMillis,LongType.instance.compose(output).longValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.restrictions.PrimaryKeyRestrictionSetTest </h4><pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test '(clustering_0, clustering_1) = (1, 2)' with two clustering column
 */
@Test public void testboundsAsClusteringWithMultiEqRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(2);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  Restriction eq=newMultiEq(cfMetaData,0,value1,value2);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test mixing single equal restrictions with multi-column slice restrictions
 * (e.g. clustering_0 = 1 AND (clustering_1, clustering_2) > (2, 3))
 */
@Test public void testboundsAsClusteringWithSingleEqAndSliceRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(3);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  ByteBuffer value4=ByteBufferUtil.bytes(4);
  ByteBuffer value5=ByteBufferUtil.bytes(5);
  Restriction singleEq=newSingleEq(cfMetaData,0,value1);
  Restriction multiSlice=newMultiSlice(cfMetaData,1,Bound.START,false,value2,value3);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(singleEq).mergeWith(multiSlice);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1,value2,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1);
  singleEq=newSingleEq(cfMetaData,0,value1);
  multiSlice=newMultiSlice(cfMetaData,1,Bound.START,false,value2,value3);
  Restriction multiSlice2=newMultiSlice(cfMetaData,1,Bound.END,false,value4);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(multiSlice2).mergeWith(singleEq).mergeWith(multiSlice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1,value2,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value1,value4);
  singleEq=newSingleEq(cfMetaData,0,value1);
  multiSlice=newMultiSlice(cfMetaData,1,Bound.START,true,value2,value3);
  multiSlice2=newMultiSlice(cfMetaData,1,Bound.END,true,value4,value5);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(multiSlice2).mergeWith(singleEq).mergeWith(multiSlice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value4,value5);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test slice restriction (e.g 'clustering_0 > 1') with only one clustering column
 */
@Test public void testboundsAsClusteringWithSliceRestrictionsAndOneClusteringColumn() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(1);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  Restriction slice=newSingleSlice(cfMetaData,0,Bound.START,false,value1);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyEnd(get(bounds,0));
  slice=newSingleSlice(cfMetaData,0,Bound.START,true,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyEnd(get(bounds,0));
  slice=newSingleSlice(cfMetaData,0,Bound.END,true,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyStart(get(bounds,0));
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1);
  slice=newSingleSlice(cfMetaData,0,Bound.END,false,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyStart(get(bounds,0));
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value1);
  slice=newSingleSlice(cfMetaData,0,Bound.START,false,value1);
  Restriction slice2=newSingleSlice(cfMetaData,0,Bound.END,false,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice).mergeWith(slice2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value2);
  slice=newSingleSlice(cfMetaData,0,Bound.START,true,value1);
  slice2=newSingleSlice(cfMetaData,0,Bound.END,true,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice).mergeWith(slice2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value2);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test '(clustering_0, clustering_1) IN ((1, 2), (2, 3))' with two clustering column
 */
@Test public void testboundsAsClusteringWithMultiInRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(2);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  Restriction in=newMultiIN(cfMetaData,0,asList(value1,value2),asList(value2,value3));
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(in);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(2,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2);
  assertStartBound(get(bounds,1),true,value2,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(2,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2);
  assertEndBound(get(bounds,1),true,value2,value3);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test 'clustering_0 IN (1, 2, 3)' with only one clustering column
 */
@Test public void testboundsAsClusteringWithOneInRestrictionsAndOneClusteringColumn() throws InvalidRequestException {
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  CFMetaData cfMetaData=newCFMetaData(2);
  Restriction in=newSingleIN(cfMetaData,0,value1,value2,value3);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(in);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(3,bounds.size());
  assertStartBound(get(bounds,0),true,value1);
  assertStartBound(get(bounds,1),true,value2);
  assertStartBound(get(bounds,2),true,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(3,bounds.size());
  assertEndBound(get(bounds,0),true,value1);
  assertEndBound(get(bounds,1),true,value2);
  assertEndBound(get(bounds,2),true,value3);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test multi-column slice restrictions (e.g '(clustering_0) > (1)') with only one clustering column
 */
@Test public void testboundsAsClusteringWithMultiSliceRestrictionsWithOneClusteringColumn() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(1);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  Restriction slice=newMultiSlice(cfMetaData,0,Bound.START,false,value1);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyEnd(get(bounds,0));
  slice=newMultiSlice(cfMetaData,0,Bound.START,true,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyEnd(get(bounds,0));
  slice=newMultiSlice(cfMetaData,0,Bound.END,true,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyStart(get(bounds,0));
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1);
  slice=newMultiSlice(cfMetaData,0,Bound.END,false,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyStart(get(bounds,0));
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value1);
  slice=newMultiSlice(cfMetaData,0,Bound.START,false,value1);
  Restriction slice2=newMultiSlice(cfMetaData,0,Bound.END,false,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice).mergeWith(slice2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value2);
  slice=newMultiSlice(cfMetaData,0,Bound.START,true,value1);
  slice2=newMultiSlice(cfMetaData,0,Bound.END,true,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice).mergeWith(slice2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value2);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test 'clustering_0 = 1' with only one clustering column
 */
@Test public void testboundsAsClusteringWithOneEqRestrictionsAndOneClusteringColumn() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(1);
  ByteBuffer clustering_0=ByteBufferUtil.bytes(1);
  Restriction eq=newSingleEq(cfMetaData,0,clustering_0);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,clustering_0);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,clustering_0);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test 'clustering_1 = 1' with 2 clustering columns
 */
@Test public void testboundsAsClusteringWithOneEqRestrictionsAndTwoClusteringColumns() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(2);
  ByteBuffer clustering_0=ByteBufferUtil.bytes(1);
  Restriction eq=newSingleEq(cfMetaData,0,clustering_0);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,clustering_0);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,clustering_0);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test multi-column slice restrictions (e.g '(clustering_0, clustering_1) > (1, 2)')
 */
@Test public void testboundsAsClusteringWithMultiSliceRestrictionsWithTwoClusteringColumn() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(2);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  Restriction slice=newMultiSlice(cfMetaData,0,Bound.START,false,value1,value2);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1,value2);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyEnd(get(bounds,0));
  slice=newMultiSlice(cfMetaData,0,Bound.START,true,value1,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyEnd(get(bounds,0));
  slice=newMultiSlice(cfMetaData,0,Bound.END,true,value1,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyStart(get(bounds,0));
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2);
  slice=newMultiSlice(cfMetaData,0,Bound.END,false,value1,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyStart(get(bounds,0));
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value1,value2);
  slice=newMultiSlice(cfMetaData,0,Bound.START,false,value1,value2);
  Restriction slice2=newMultiSlice(cfMetaData,0,Bound.END,false,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice).mergeWith(slice2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1,value2);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value2);
  slice=newMultiSlice(cfMetaData,0,Bound.START,true,value1,value2);
  slice2=newMultiSlice(cfMetaData,0,Bound.END,true,value2,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(slice).mergeWith(slice2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value2,value1);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test mixing single and multi equals restrictions (e.g. clustering_0 = 1 AND (clustering_1, clustering_2) = (2, 3))
 */
@Test public void testboundsAsClusteringWithSingleEqAndMultiEqRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(4);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  ByteBuffer value4=ByteBufferUtil.bytes(4);
  Restriction singleEq=newSingleEq(cfMetaData,0,value1);
  Restriction multiEq=newMultiEq(cfMetaData,1,value2,value3);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(singleEq).mergeWith(multiEq);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2,value3);
  singleEq=newSingleEq(cfMetaData,0,value1);
  Restriction singleEq2=newSingleEq(cfMetaData,1,value2);
  multiEq=newMultiEq(cfMetaData,2,value3,value4);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(singleEq).mergeWith(singleEq2).mergeWith(multiEq);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3,value4);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2,value3,value4);
  singleEq=newSingleEq(cfMetaData,2,value3);
  multiEq=newMultiEq(cfMetaData,0,value1,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(singleEq).mergeWith(multiEq);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2,value3);
  singleEq=newSingleEq(cfMetaData,0,value1);
  singleEq2=newSingleEq(cfMetaData,3,value4);
  multiEq=newMultiEq(cfMetaData,1,value2,value3);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(singleEq).mergeWith(multiEq).mergeWith(singleEq2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3,value4);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2,value3,value4);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test 'clustering_0 = 1 AND clustering_1 IN (1, 2, 3)'
 */
@Test public void testboundsAsClusteringWithEqAndInRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(2);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  Restriction eq=newSingleEq(cfMetaData,0,value1);
  Restriction in=newSingleIN(cfMetaData,1,value1,value2,value3);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq).mergeWith(in);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(3,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value1);
  assertStartBound(get(bounds,1),true,value1,value2);
  assertStartBound(get(bounds,2),true,value1,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(3,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value1);
  assertEndBound(get(bounds,1),true,value1,value2);
  assertEndBound(get(bounds,2),true,value1,value3);
}

</code></pre>

<br>
<pre class="type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testboundsAsClusteringWithNoRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(1);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyStart(get(bounds,0));
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEmptyEnd(get(bounds,0));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testboundsAsClusteringWithSeveralMultiColumnRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(4);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  ByteBuffer value4=ByteBufferUtil.bytes(4);
  ByteBuffer value5=ByteBufferUtil.bytes(5);
  Restriction multiEq=newMultiEq(cfMetaData,0,value1,value2);
  Restriction multiSlice=newMultiSlice(cfMetaData,2,Bound.START,false,value3,value4);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(multiEq).mergeWith(multiSlice);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1,value2,value3,value4);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2);
  multiEq=newMultiEq(cfMetaData,0,value1,value2);
  Restriction multiIN=newMultiIN(cfMetaData,2,asList(value3,value4),asList(value4,value5));
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(multiEq).mergeWith(multiIN);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(2,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3,value4);
  assertStartBound(get(bounds,1),true,value1,value2,value4,value5);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(2,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2,value3,value4);
  assertEndBound(get(bounds,1),true,value1,value2,value4,value5);
  multiEq=newMultiEq(cfMetaData,0,value1,value2);
  Restriction multiEq2=newMultiEq(cfMetaData,2,value3,value4);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(multiEq).mergeWith(multiEq2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3,value4);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2,value3,value4);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test equal and slice restrictions (e.g 'clustering_0 = 0 clustering_1 > 1')
 */
@Test public void testboundsAsClusteringWithEqAndSliceRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(2);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  Restriction eq=newSingleEq(cfMetaData,0,value3);
  Restriction slice=newSingleSlice(cfMetaData,1,Bound.START,false,value1);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq).mergeWith(slice);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value3,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value3);
  slice=newSingleSlice(cfMetaData,1,Bound.START,true,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq).mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value3,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value3);
  slice=newSingleSlice(cfMetaData,1,Bound.END,true,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq).mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value3,value1);
  slice=newSingleSlice(cfMetaData,1,Bound.END,false,value1);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq).mergeWith(slice);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value3,value1);
  slice=newSingleSlice(cfMetaData,1,Bound.START,false,value1);
  Restriction slice2=newSingleSlice(cfMetaData,1,Bound.END,false,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq).mergeWith(slice).mergeWith(slice2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value3,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),false,value3,value2);
  slice=newSingleSlice(cfMetaData,1,Bound.START,true,value1);
  slice2=newSingleSlice(cfMetaData,1,Bound.END,true,value2);
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(eq).mergeWith(slice).mergeWith(slice2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value3,value1);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value3,value2);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test mixing multi equal restrictions with single-column slice restrictions
 * (e.g. clustering_0 = 1 AND (clustering_1, clustering_2) > (2, 3))
 */
@Test public void testboundsAsClusteringWithMultiEqAndSingleSliceRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(3);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  Restriction multiEq=newMultiEq(cfMetaData,0,value1,value2);
  Restriction singleSlice=newSingleSlice(cfMetaData,2,Bound.START,false,value3);
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(multiEq).mergeWith(singleSlice);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),false,value1,value2,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test clustering_0 = 1 AND (clustering_1, clustering_2) IN ((2, 3), (4, 5))
 */
@Test public void testboundsAsClusteringWithSingleEqAndMultiINRestrictions() throws InvalidRequestException {
  CFMetaData cfMetaData=newCFMetaData(4);
  ByteBuffer value1=ByteBufferUtil.bytes(1);
  ByteBuffer value2=ByteBufferUtil.bytes(2);
  ByteBuffer value3=ByteBufferUtil.bytes(3);
  ByteBuffer value4=ByteBufferUtil.bytes(4);
  ByteBuffer value5=ByteBufferUtil.bytes(5);
  Restriction singleEq=newSingleEq(cfMetaData,0,value1);
  Restriction multiIN=newMultiIN(cfMetaData,1,asList(value2,value3),asList(value4,value5));
  PrimaryKeyRestrictions restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(singleEq).mergeWith(multiIN);
  SortedSet<Slice.Bound> bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(2,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3);
  assertStartBound(get(bounds,1),true,value1,value4,value5);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(2,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2,value3);
  assertEndBound(get(bounds,1),true,value1,value4,value5);
  singleEq=newSingleEq(cfMetaData,0,value1);
  multiIN=newMultiIN(cfMetaData,1,asList(value2,value3));
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(multiIN).mergeWith(singleEq);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value2,value3);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(1,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value2,value3);
  singleEq=newSingleEq(cfMetaData,0,value1);
  Restriction singleEq2=newSingleEq(cfMetaData,1,value5);
  multiIN=newMultiIN(cfMetaData,2,asList(value2,value3),asList(value4,value5));
  restrictions=new PrimaryKeyRestrictionSet(cfMetaData.comparator,false);
  restrictions=restrictions.mergeWith(singleEq).mergeWith(multiIN).mergeWith(singleEq2);
  bounds=restrictions.boundsAsClustering(Bound.START,QueryOptions.DEFAULT);
  assertEquals(2,bounds.size());
  assertStartBound(get(bounds,0),true,value1,value5,value2,value3);
  assertStartBound(get(bounds,1),true,value1,value5,value4,value5);
  bounds=restrictions.boundsAsClustering(Bound.END,QueryOptions.DEFAULT);
  assertEquals(2,bounds.size());
  assertEndBound(get(bounds,0),true,value1,value5,value2,value3);
  assertEndBound(get(bounds,1),true,value1,value5,value4,value5);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.statements.PropertyDefinitionsTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetBooleanNonexistant(){
  assertEquals(Boolean.FALSE,pd.getBoolean("nonexistant",Boolean.FALSE));
  assertEquals(Boolean.TRUE,pd.getBoolean("nonexistant",Boolean.TRUE));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetBooleanExistant(){
  String key="one";
  pd.addProperty(key,"1");
  assertEquals(Boolean.TRUE,pd.getBoolean(key,null));
  key="TRUE";
  pd.addProperty(key,"TrUe");
  assertEquals(Boolean.TRUE,pd.getBoolean(key,null));
  key="YES";
  pd.addProperty(key,"YeS");
  assertEquals(Boolean.TRUE,pd.getBoolean(key,null));
  key="BAD_ONE";
  pd.addProperty(key," 1");
  assertEquals(Boolean.FALSE,pd.getBoolean(key,null));
  key="BAD_TRUE";
  pd.addProperty(key,"true ");
  assertEquals(Boolean.FALSE,pd.getBoolean(key,null));
  key="BAD_YES";
  pd.addProperty(key,"ye s");
  assertEquals(Boolean.FALSE,pd.getBoolean(key,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.entities.FrozenCollectionsTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToString(){
  SetType t=SetType.getInstance(ListType.getInstance(Int32Type.instance,false),true);
  assertEquals("SetType(FrozenType(ListType(Int32Type)))",clean(t.toString()));
  assertEquals("SetType(ListType(Int32Type))",clean(t.toString(true)));
  t=SetType.getInstance(ListType.getInstance(Int32Type.instance,false),false);
  assertEquals("FrozenType(SetType(ListType(Int32Type)))",clean(t.toString()));
  assertEquals("SetType(ListType(Int32Type))",clean(t.toString(true)));
  MapType m=MapType.getInstance(ListType.getInstance(Int32Type.instance,false),Int32Type.instance,true);
  assertEquals("MapType(FrozenType(ListType(Int32Type)),Int32Type)",clean(m.toString()));
  assertEquals("MapType(ListType(Int32Type),Int32Type)",clean(m.toString(true)));
  m=MapType.getInstance(ListType.getInstance(Int32Type.instance,false),Int32Type.instance,false);
  assertEquals("FrozenType(MapType(ListType(Int32Type),Int32Type))",clean(m.toString()));
  assertEquals("MapType(ListType(Int32Type),Int32Type)",clean(m.toString(true)));
  List<AbstractType<?>> types=new ArrayList<>();
  types.add(SetType.getInstance(Int32Type.instance,true));
  TupleType tuple=new TupleType(types);
  assertEquals("TupleType(SetType(Int32Type))",clean(tuple.toString()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.entities.SecondaryIndexTest </h4><pre class="type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeletions() throws Throwable {
  String indexClassName=StubIndex.class.getName();
  createTable("CREATE TABLE %s (a int, b int, c int, PRIMARY KEY ((a), b))");
  createIndex(String.format("CREATE CUSTOM INDEX c_idx ON %%s(c) USING '%s'",indexClassName));
  ColumnFamilyStore cfs=getCurrentColumnFamilyStore();
  CFMetaData cfm=cfs.metadata;
  StubIndex index1=(StubIndex)cfs.indexManager.getIndex(cfm.getIndexes().get("c_idx").orElseThrow(throwAssert("index not found")));
  execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?) USING TIMESTAMP 1",0,0,0);
  assertEquals(1,index1.rowsInserted.size());
  execute("DELETE FROM %s USING TIMESTAMP 2 WHERE a = ? AND b = ?",0,0);
  assertEquals(1,index1.rowsUpdated.size());
  Pair<Row,Row> update=index1.rowsUpdated.get(0);
  Row existingRow=update.left;
  Row newRow=update.right;
  assertTrue(existingRow.deletion().isLive());
  assertEquals(DeletionTime.LIVE,existingRow.deletion().time());
  assertEquals(1L,existingRow.primaryKeyLivenessInfo().timestamp());
  assertFalse(newRow.deletion().isLive());
  assertEquals(2L,newRow.deletion().time().markedForDeleteAt());
  assertFalse(newRow.cells().iterator().hasNext());
  execute("DELETE FROM %s USING TIMESTAMP 3 WHERE a = ? AND b = ?",0,0);
  assertEquals(2,index1.rowsUpdated.size());
  update=index1.rowsUpdated.get(1);
  existingRow=update.left;
  newRow=update.right;
  assertFalse(existingRow.deletion().isLive());
  assertEquals(2L,existingRow.deletion().time().markedForDeleteAt());
  assertFalse(existingRow.cells().iterator().hasNext());
  assertFalse(newRow.deletion().isLive());
  assertEquals(3L,newRow.deletion().time().markedForDeleteAt());
  assertFalse(newRow.cells().iterator().hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdatesToMemtableData() throws Throwable {
  createTable("CREATE TABLE %s (k int, c int, v1 int, v2 int, PRIMARY KEY (k,c))");
  createIndex(String.format("CREATE CUSTOM INDEX test_index ON %%s() USING '%s'",StubIndex.class.getName()));
  execute("INSERT INTO %s (k, c, v1, v2) VALUES (0, 0, 0, 0) USING TIMESTAMP 0");
  ColumnDefinition v1=getCurrentColumnFamilyStore().metadata.getColumnDefinition(new ColumnIdentifier("v1",true));
  ColumnDefinition v2=getCurrentColumnFamilyStore().metadata.getColumnDefinition(new ColumnIdentifier("v2",true));
  StubIndex index=(StubIndex)getCurrentColumnFamilyStore().indexManager.getIndexByName("test_index");
  assertEquals(1,index.rowsInserted.size());
  execute("UPDATE %s USING TIMESTAMP 1 SET v1=1 WHERE k=0 AND c=0");
  assertEquals(1,index.rowsUpdated.size());
  Row oldRow=index.rowsUpdated.get(0).left;
  assertEquals(1,oldRow.size());
  validateCell(oldRow.getCell(v1),v1,ByteBufferUtil.bytes(0),0);
  Row newRow=index.rowsUpdated.get(0).right;
  assertEquals(1,newRow.size());
  validateCell(newRow.getCell(v1),v1,ByteBufferUtil.bytes(1),1);
  index.reset();
  execute("UPDATE %s USING TIMESTAMP 2 SET v1=2, v2=2 WHERE k=0 AND c=0");
  assertEquals(1,index.rowsUpdated.size());
  oldRow=index.rowsUpdated.get(0).left;
  assertEquals(2,oldRow.size());
  validateCell(oldRow.getCell(v1),v1,ByteBufferUtil.bytes(1),1);
  validateCell(oldRow.getCell(v2),v2,ByteBufferUtil.bytes(0),0);
  newRow=index.rowsUpdated.get(0).right;
  assertEquals(2,newRow.size());
  validateCell(newRow.getCell(v1),v1,ByteBufferUtil.bytes(2),2);
  validateCell(newRow.getCell(v2),v2,ByteBufferUtil.bytes(2),2);
  index.reset();
  execute("DELETE v1 FROM %s USING TIMESTAMP 3 WHERE k=0 AND c=0");
  assertEquals(1,index.rowsUpdated.size());
  oldRow=index.rowsUpdated.get(0).left;
  assertEquals(1,oldRow.size());
  validateCell(oldRow.getCell(v1),v1,ByteBufferUtil.bytes(2),2);
  newRow=index.rowsUpdated.get(0).right;
  assertEquals(1,newRow.size());
  Cell newCell=newRow.getCell(v1);
  assertTrue(newCell.isTombstone());
  assertEquals(3,newCell.timestamp());
  index.reset();
  execute("INSERT INTO %s(k, c) VALUES (0, 0) USING TIMESTAMP 4");
  assertEquals(1,index.rowsUpdated.size());
  oldRow=index.rowsUpdated.get(0).left;
  assertEquals(0,oldRow.size());
  assertEquals(0,oldRow.primaryKeyLivenessInfo().timestamp());
  newRow=index.rowsUpdated.get(0).right;
  assertEquals(0,newRow.size());
  assertEquals(4,newRow.primaryKeyLivenessInfo().timestamp());
}

</code></pre>

<br>
<pre class="type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testMultipleIndexesOnOneColumn() throws Throwable {
  String indexClassName=StubIndex.class.getName();
  createTable("CREATE TABLE %s (a int, b int, c int, PRIMARY KEY ((a), b))");
  createIndex(String.format("CREATE CUSTOM INDEX c_idx_1 ON %%s(c) USING '%s' WITH OPTIONS = {'foo':'a'}",indexClassName));
  createIndex(String.format("CREATE CUSTOM INDEX c_idx_2 ON %%s(c) USING '%s' WITH OPTIONS = {'foo':'b'}",indexClassName));
  ColumnFamilyStore cfs=getCurrentColumnFamilyStore();
  CFMetaData cfm=cfs.metadata;
  StubIndex index1=(StubIndex)cfs.indexManager.getIndex(cfm.getIndexes().get("c_idx_1").orElseThrow(throwAssert("index not found")));
  StubIndex index2=(StubIndex)cfs.indexManager.getIndex(cfm.getIndexes().get("c_idx_2").orElseThrow(throwAssert("index not found")));
  Object[] row1a=row(0,0,0);
  Object[] row1b=row(0,0,1);
  Object[] row2=row(2,2,2);
  execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?)",row1a);
  execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?)",row1b);
  execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?)",row2);
  assertEquals(2,index1.rowsInserted.size());
  assertColumnValue(0,"c",index1.rowsInserted.get(0),cfm);
  assertColumnValue(2,"c",index1.rowsInserted.get(1),cfm);
  assertEquals(2,index2.rowsInserted.size());
  assertColumnValue(0,"c",index2.rowsInserted.get(0),cfm);
  assertColumnValue(2,"c",index2.rowsInserted.get(1),cfm);
  assertEquals(1,index1.rowsUpdated.size());
  assertColumnValue(0,"c",index1.rowsUpdated.get(0).left,cfm);
  assertColumnValue(1,"c",index1.rowsUpdated.get(0).right,cfm);
  assertEquals(1,index2.rowsUpdated.size());
  assertColumnValue(0,"c",index2.rowsUpdated.get(0).left,cfm);
  assertColumnValue(1,"c",index2.rowsUpdated.get(0).right,cfm);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.entities.UFTest </h4><pre class="type-15 type-4 type-5 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testJavaFunctionInvalidBodies() throws Throwable {
  try {
    execute("CREATE OR REPLACE FUNCTION " + KEYSPACE + ".jfinv() "+ "RETURNS NULL ON NULL INPUT "+ "RETURNS bigint "+ "LANGUAGE JAVA\n"+ "AS '\n"+ "foobarbaz"+ "\n';");
    Assert.fail();
  }
 catch (  InvalidRequestException e) {
    Assert.assertTrue(e.getMessage(),e.getMessage().contains("Java source compilation failed"));
    Assert.assertTrue(e.getMessage(),e.getMessage().contains("insert \";\" to complete BlockStatements"));
  }
  try {
    execute("CREATE OR REPLACE FUNCTION " + KEYSPACE + ".jfinv() "+ "RETURNS NULL ON NULL INPUT "+ "RETURNS bigint "+ "LANGUAGE JAVA\n"+ "AS '\n"+ "foobarbaz;"+ "\n';");
    Assert.fail();
  }
 catch (  InvalidRequestException e) {
    Assert.assertTrue(e.getMessage(),e.getMessage().contains("Java source compilation failed"));
    Assert.assertTrue(e.getMessage(),e.getMessage().contains("foobarbaz cannot be resolved to a type"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testComplexNullValues() throws Throwable {
  String type=KEYSPACE + '.' + createType("CREATE TYPE %s (txt text, i int)");
  createTable("CREATE TABLE %s (key int primary key, lst list<double>, st set<text>, mp map<int, boolean>," + "tup frozen<tuple<double, text, int, boolean>>, udt frozen<" + type + ">)");
  String fList=createFunction(KEYSPACE,"list<double>","CREATE FUNCTION %s( coll list<double> ) " + "CALLED ON NULL INPUT " + "RETURNS list<double> "+ "LANGUAGE java\n"+ "AS $$return coll;$$;");
  String fSet=createFunction(KEYSPACE,"set<text>","CREATE FUNCTION %s( coll set<text> ) " + "CALLED ON NULL INPUT " + "RETURNS set<text> "+ "LANGUAGE java\n"+ "AS $$return coll;$$;");
  String fMap=createFunction(KEYSPACE,"map<int, boolean>","CREATE FUNCTION %s( coll map<int, boolean> ) " + "CALLED ON NULL INPUT " + "RETURNS map<int, boolean> "+ "LANGUAGE java\n"+ "AS $$return coll;$$;");
  String fTup=createFunction(KEYSPACE,"tuple<double, text, int, boolean>","CREATE FUNCTION %s( val tuple<double, text, int, boolean> ) " + "CALLED ON NULL INPUT " + "RETURNS tuple<double, text, int, boolean> "+ "LANGUAGE java\n"+ "AS $$return val;$$;");
  String fUdt=createFunction(KEYSPACE,type,"CREATE FUNCTION %s( val " + type + " ) "+ "CALLED ON NULL INPUT "+ "RETURNS "+ type+ " "+ "LANGUAGE java\n"+ "AS $$return val;$$;");
  List<Double> list=Arrays.asList(1d,2d,3d);
  Set<String> set=new TreeSet<>(Arrays.asList("one","three","two"));
  Map<Integer,Boolean> map=new TreeMap<>();
  map.put(1,true);
  map.put(2,false);
  map.put(3,true);
  Object t=tuple(1d,"one",42,false);
  execute("INSERT INTO %s (key, lst, st, mp, tup, udt) VALUES (1, ?, ?, ?, ?, {txt: 'one', i:1})",list,set,map,t);
  execute("INSERT INTO %s (key, lst, st, mp, tup, udt) VALUES (2, ?, ?, ?, ?, null)",null,null,null,null);
  execute("SELECT " + fList + "(lst), "+ fSet+ "(st), "+ fMap+ "(mp), "+ fTup+ "(tup), "+ fUdt+ "(udt) FROM %s WHERE key = 1");
  UntypedResultSet.Row row=execute("SELECT " + fList + "(lst) as l, "+ fSet+ "(st) as s, "+ fMap+ "(mp) as m, "+ fTup+ "(tup) as t, "+ fUdt+ "(udt) as u "+ "FROM %s WHERE key = 1").one();
  Assert.assertNotNull(row.getBytes("l"));
  Assert.assertNotNull(row.getBytes("s"));
  Assert.assertNotNull(row.getBytes("m"));
  Assert.assertNotNull(row.getBytes("t"));
  Assert.assertNotNull(row.getBytes("u"));
  row=execute("SELECT " + fList + "(lst) as l, "+ fSet+ "(st) as s, "+ fMap+ "(mp) as m, "+ fTup+ "(tup) as t, "+ fUdt+ "(udt) as u "+ "FROM %s WHERE key = 2").one();
  Assert.assertNull(row.getBytes("l"));
  Assert.assertNull(row.getBytes("s"));
  Assert.assertNull(row.getBytes("m"));
  Assert.assertNull(row.getBytes("t"));
  Assert.assertNull(row.getBytes("u"));
  for (  int version : PROTOCOL_VERSIONS) {
    Row r=executeNet(version,"SELECT " + fList + "(lst) as l, "+ fSet+ "(st) as s, "+ fMap+ "(mp) as m, "+ fTup+ "(tup) as t, "+ fUdt+ "(udt) as u "+ "FROM %s WHERE key = 1").one();
    Assert.assertNotNull(r.getBytesUnsafe("l"));
    Assert.assertNotNull(r.getBytesUnsafe("s"));
    Assert.assertNotNull(r.getBytesUnsafe("m"));
    Assert.assertNotNull(r.getBytesUnsafe("t"));
    Assert.assertNotNull(r.getBytesUnsafe("u"));
    r=executeNet(version,"SELECT " + fList + "(lst) as l, "+ fSet+ "(st) as s, "+ fMap+ "(mp) as m, "+ fTup+ "(tup) as t, "+ fUdt+ "(udt) as u "+ "FROM %s WHERE key = 2").one();
    Assert.assertNull(r.getBytesUnsafe("l"));
    Assert.assertNull(r.getBytesUnsafe("s"));
    Assert.assertNull(r.getBytesUnsafe("m"));
    Assert.assertNull(r.getBytesUnsafe("t"));
    Assert.assertNull(r.getBytesUnsafe("u"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJavaUserTypeWithUse() throws Throwable {
  String type=createType("CREATE TYPE %s (txt text, i int)");
  createTable("CREATE TABLE %s (key int primary key, udt frozen<" + KEYSPACE + '.'+ type+ ">)");
  execute("INSERT INTO %s (key, udt) VALUES (1, {txt: 'one', i:1})");
  for (  int version : PROTOCOL_VERSIONS) {
    executeNet(version,"USE " + KEYSPACE);
    executeNet(version,"CREATE FUNCTION f_use1( udt " + type + " ) "+ "RETURNS NULL ON NULL INPUT "+ "RETURNS "+ type+ " "+ "LANGUAGE java "+ "AS $$return "+ "     udt;$$;");
    try {
      List<Row> rowsNet=executeNet(version,"SELECT f_use1(udt) FROM %s WHERE key = 1").all();
      Assert.assertEquals(1,rowsNet.size());
      UDTValue udtVal=rowsNet.get(0).getUDTValue(0);
      Assert.assertEquals("one",udtVal.getString("txt"));
      Assert.assertEquals(1,udtVal.getInt("i"));
    }
  finally {
      executeNet(version,"DROP FUNCTION f_use1");
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFunctionWithReservedName() throws Throwable {
  execute("CREATE TABLE " + KEYSPACE_PER_TEST + ".second_tab (key int primary key, val double)");
  String fName=createFunction(KEYSPACE_PER_TEST,"","CREATE OR REPLACE FUNCTION %s() " + "RETURNS NULL ON NULL INPUT " + "RETURNS timestamp "+ "LANGUAGE JAVA "+ "AS 'return null;';");
  execute("INSERT INTO " + KEYSPACE_PER_TEST + ".second_tab (key, val) VALUES (?, ?)",1,1d);
  execute("INSERT INTO " + KEYSPACE_PER_TEST + ".second_tab (key, val) VALUES (?, ?)",2,2d);
  execute("INSERT INTO " + KEYSPACE_PER_TEST + ".second_tab (key, val) VALUES (?, ?)",3,3d);
  UntypedResultSet rows=execute("SELECT key, val, now() FROM " + KEYSPACE_PER_TEST + ".second_tab");
  Assert.assertEquals(3,rows.size());
  UntypedResultSet.Row row=rows.iterator().next();
  Date ts=row.getTimestamp(row.getColumns().get(2).name.toString());
  Assert.assertNotNull(ts);
  rows=execute("SELECT key, val, " + fName + "() FROM "+ KEYSPACE_PER_TEST+ ".second_tab");
  Assert.assertEquals(3,rows.size());
  row=rows.iterator().next();
  Assert.assertFalse(row.has(row.getColumns().get(2).name.toString()));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJavaUserType() throws Throwable {
  String type=KEYSPACE + '.' + createType("CREATE TYPE %s (txt text, i int)");
  createTable("CREATE TABLE %s (key int primary key, udt frozen<" + type + ">)");
  String fUdt0=createFunction(KEYSPACE,type,"CREATE FUNCTION %s( udt " + type + " ) "+ "RETURNS NULL ON NULL INPUT "+ "RETURNS "+ type+ " "+ "LANGUAGE java "+ "AS $$return "+ "     udt;$$;");
  String fUdt1=createFunction(KEYSPACE,type,"CREATE FUNCTION %s( udt " + type + ") "+ "RETURNS NULL ON NULL INPUT "+ "RETURNS text "+ "LANGUAGE java "+ "AS $$return "+ "     udt.getString(\"txt\");$$;");
  String fUdt2=createFunction(KEYSPACE,type,"CREATE FUNCTION %s( udt " + type + ") "+ "CALLED ON NULL INPUT "+ "RETURNS int "+ "LANGUAGE java "+ "AS $$return "+ "     Integer.valueOf(udt.getInt(\"i\"));$$;");
  execute("INSERT INTO %s (key, udt) VALUES (1, {txt: 'one', i:1})");
  UntypedResultSet rows=execute("SELECT " + fUdt0 + "(udt) FROM %s WHERE key = 1");
  Assert.assertEquals(1,rows.size());
  assertRows(execute("SELECT " + fUdt1 + "(udt) FROM %s WHERE key = 1"),row("one"));
  assertRows(execute("SELECT " + fUdt2 + "(udt) FROM %s WHERE key = 1"),row(1));
  for (  int version : PROTOCOL_VERSIONS) {
    List<Row> rowsNet=executeNet(version,"SELECT " + fUdt0 + "(udt) FROM %s WHERE key = 1").all();
    Assert.assertEquals(1,rowsNet.size());
    UDTValue udtVal=rowsNet.get(0).getUDTValue(0);
    Assert.assertEquals("one",udtVal.getString("txt"));
    Assert.assertEquals(1,udtVal.getInt("i"));
    assertRowsNet(version,executeNet(version,"SELECT " + fUdt1 + "(udt) FROM %s WHERE key = 1"),row("one"));
    assertRowsNet(version,executeNet(version,"SELECT " + fUdt2 + "(udt) FROM %s WHERE key = 1"),row(1));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.miscellaneous.SSTableMetadataTrackingTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMinMaxtimestampRow() throws Throwable {
  createTable("CREATE TABLE %s (a int, b int, c text, PRIMARY KEY (a, b))");
  ColumnFamilyStore cfs=Keyspace.open(keyspace()).getColumnFamilyStore(currentTable());
  execute("INSERT INTO %s (a,b,c) VALUES (1,1,'1') using timestamp 10000");
  execute("DELETE FROM %s USING TIMESTAMP 9999 WHERE a = 1");
  cfs.forceBlockingFlush();
  StatsMetadata metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(10000,metadata.maxTimestamp);
  assertEquals(Integer.MAX_VALUE,metadata.maxLocalDeletionTime,5);
  cfs.forceMajorCompaction();
  metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(10000,metadata.maxTimestamp);
  assertEquals(Integer.MAX_VALUE,metadata.maxLocalDeletionTime,5);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTrackMetadata_rowMarker() throws Throwable {
  createTable("CREATE TABLE %s (a int, PRIMARY KEY (a))");
  ColumnFamilyStore cfs=Keyspace.open(keyspace()).getColumnFamilyStore(currentTable());
  execute("INSERT INTO %s (a) VALUES (1) USING TIMESTAMP 9999");
  cfs.forceBlockingFlush();
  assertEquals(1,cfs.getLiveSSTables().size());
  StatsMetadata metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(9999,metadata.maxTimestamp);
  assertEquals(Integer.MAX_VALUE,metadata.maxLocalDeletionTime);
  cfs.forceMajorCompaction();
  StatsMetadata metadata2=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(metadata.maxLocalDeletionTime,metadata2.maxLocalDeletionTime);
  assertEquals(metadata.minTimestamp,metadata2.minTimestamp);
  assertEquals(metadata.maxTimestamp,metadata2.maxTimestamp);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTrackMetadata_rowTombstone() throws Throwable {
  createTable("CREATE TABLE %s (a int, b int, c text, PRIMARY KEY (a, b))");
  ColumnFamilyStore cfs=Keyspace.open(keyspace()).getColumnFamilyStore(currentTable());
  execute("DELETE FROM %s USING TIMESTAMP 9999 WHERE a = 1");
  cfs.forceBlockingFlush();
  assertEquals(1,cfs.getLiveSSTables().size());
  StatsMetadata metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(9999,metadata.maxTimestamp);
  assertEquals(System.currentTimeMillis() / 1000,metadata.maxLocalDeletionTime,5);
  cfs.forceMajorCompaction();
  StatsMetadata metadata2=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(metadata.maxLocalDeletionTime,metadata2.maxLocalDeletionTime);
  assertEquals(metadata.minTimestamp,metadata2.minTimestamp);
  assertEquals(metadata.maxTimestamp,metadata2.maxTimestamp);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTrackMetadata_rowMarkerDelete() throws Throwable {
  createTable("CREATE TABLE %s (a int, PRIMARY KEY (a))");
  ColumnFamilyStore cfs=Keyspace.open(keyspace()).getColumnFamilyStore(currentTable());
  execute("DELETE FROM %s USING TIMESTAMP 9999 WHERE a=1");
  cfs.forceBlockingFlush();
  assertEquals(1,cfs.getLiveSSTables().size());
  StatsMetadata metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(9999,metadata.maxTimestamp);
  assertEquals(System.currentTimeMillis() / 1000,metadata.maxLocalDeletionTime,5);
  cfs.forceMajorCompaction();
  StatsMetadata metadata2=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(metadata.maxLocalDeletionTime,metadata2.maxLocalDeletionTime);
  assertEquals(metadata.minTimestamp,metadata2.minTimestamp);
  assertEquals(metadata.maxTimestamp,metadata2.maxTimestamp);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMinMaxtimestampRange() throws Throwable {
  createTable("CREATE TABLE %s (a int, b int, c text, PRIMARY KEY (a, b))");
  ColumnFamilyStore cfs=Keyspace.open(keyspace()).getColumnFamilyStore(currentTable());
  execute("INSERT INTO %s (a,b,c) VALUES (1,1,'1') using timestamp 10000");
  execute("DELETE FROM %s USING TIMESTAMP 9999 WHERE a = 1 and b = 1");
  cfs.forceBlockingFlush();
  StatsMetadata metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(10000,metadata.maxTimestamp);
  assertEquals(Integer.MAX_VALUE,metadata.maxLocalDeletionTime,5);
  cfs.forceMajorCompaction();
  metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(10000,metadata.maxTimestamp);
  assertEquals(Integer.MAX_VALUE,metadata.maxLocalDeletionTime,5);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTrackMetadata_rangeTombstone() throws Throwable {
  createTable("CREATE TABLE %s (a int, b int, c text, PRIMARY KEY (a, b)) WITH gc_grace_seconds = 10000");
  ColumnFamilyStore cfs=Keyspace.open(keyspace()).getColumnFamilyStore(currentTable());
  execute("DELETE FROM %s USING TIMESTAMP 9999 WHERE a = 1 and b = 1");
  cfs.forceBlockingFlush();
  assertEquals(1,cfs.getLiveSSTables().size());
  StatsMetadata metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(9999,metadata.maxTimestamp);
  assertEquals(System.currentTimeMillis() / 1000,metadata.maxLocalDeletionTime,5);
  cfs.forceMajorCompaction();
  StatsMetadata metadata2=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(metadata.maxLocalDeletionTime,metadata2.maxLocalDeletionTime);
  assertEquals(metadata.minTimestamp,metadata2.minTimestamp);
  assertEquals(metadata.maxTimestamp,metadata2.maxTimestamp);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void baseCheck() throws Throwable {
  createTable("CREATE TABLE %s (a int, b int, c text, PRIMARY KEY (a, b))");
  ColumnFamilyStore cfs=Keyspace.open(keyspace()).getColumnFamilyStore(currentTable());
  execute("INSERT INTO %s (a,b,c) VALUES (1,1,'1') using timestamp 9999");
  cfs.forceBlockingFlush();
  StatsMetadata metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(Integer.MAX_VALUE,metadata.maxLocalDeletionTime);
  cfs.forceMajorCompaction();
  metadata=cfs.getLiveSSTables().iterator().next().getSSTableMetadata();
  assertEquals(9999,metadata.minTimestamp);
  assertEquals(Integer.MAX_VALUE,metadata.maxLocalDeletionTime);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.operations.AggregationTest </h4><pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAggregateWithWriteTimeOrTTL() throws Throwable {
  createTable("CREATE TABLE %s (a int primary key, b int, c int)");
  assertColumnNames(execute("SELECT count(writetime(b)), min(ttl(b)) as min, writetime(b), ttl(c) as first FROM %s"),"system.count(writetime(b))","min","writetime(b)","first");
  assertRows(execute("SELECT count(writetime(b)), min(ttl(b)) as min, writetime(b), ttl(c) as first FROM %s"),row(0L,null,null,null));
  long today=System.currentTimeMillis() * 1000;
  long yesterday=today - (DateUtils.MILLIS_PER_DAY * 1000);
  final int secondsPerMinute=60;
  execute("INSERT INTO %s (a, b, c) VALUES (1, 2, null) USING TTL " + (20 * secondsPerMinute));
  execute("INSERT INTO %s (a, b, c) VALUES (2, 4, 6) USING TTL " + (10 * secondsPerMinute));
  execute("INSERT INTO %s (a, b, c) VALUES (4, 8, 12) USING TIMESTAMP " + yesterday);
  assertRows(execute("SELECT count(writetime(b)), count(ttl(b)) FROM %s"),row(3L,2L));
  UntypedResultSet resultSet=execute("SELECT min(ttl(b)), ttl(b) FROM %s");
  assertEquals(1,resultSet.size());
  Row row=resultSet.one();
  assertTrue(row.getInt("ttl(b)") > (10 * secondsPerMinute));
  assertTrue(row.getInt("system.min(ttl(b))") <= (10 * secondsPerMinute));
  resultSet=execute("SELECT min(writetime(b)), writetime(b) FROM %s");
  assertEquals(1,resultSet.size());
  row=resultSet.one();
  assertTrue(row.getLong("writetime(b)") >= today);
  assertTrue(row.getLong("system.min(writetime(b))") == yesterday);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.operations.SelectTest </h4><pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Migrated from cql_tests.py:TestCQL.select_with_alias_test()
 */
@Test public void testSelectWithAlias() throws Throwable {
  createTable("CREATE TABLE %s (id int PRIMARY KEY, name text)");
  for (int id=0; id < 5; id++)   execute("INSERT INTO %s (id, name) VALUES (?, ?) USING TTL 10 AND TIMESTAMP 0",id,"name" + id);
  UntypedResultSet rs=execute("SELECT count(*) AS user_count FROM %s");
  assertEquals("user_count",rs.metadata().get(0).name.toString());
  assertEquals(5L,rs.one().getLong(rs.metadata().get(0).name.toString()));
  rs=execute("SELECT name AS user_name FROM %s WHERE id = 0");
  assertEquals("user_name",rs.metadata().get(0).name.toString());
  assertEquals("name0",rs.one().getString(rs.metadata().get(0).name.toString()));
  rs=execute("SELECT writeTime(name) AS name_writetime FROM %s WHERE id = 0");
  assertEquals("name_writetime",rs.metadata().get(0).name.toString());
  assertEquals(0,rs.one().getInt(rs.metadata().get(0).name.toString()));
  rs=execute("SELECT ttl(name) AS name_ttl FROM %s WHERE id = 0");
  assertEquals("name_ttl",rs.metadata().get(0).name.toString());
  int ttl=rs.one().getInt(rs.metadata().get(0).name.toString());
  assertTrue(ttl == 9 || ttl == 10);
  rs=execute("SELECT intAsBlob(id) AS id_blob FROM %s WHERE id = 0");
  assertEquals("id_blob",rs.metadata().get(0).name.toString());
  assertEquals(ByteBuffer.wrap(new byte[4]),rs.one().getBlob(rs.metadata().get(0).name.toString()));
  assertInvalidMessage("Aliases aren't allowed in the where clause","SELECT id AS user_id, name AS user_name FROM %s WHERE user_id = 0");
  assertInvalidMessage("Aliases are not allowed in order by clause","SELECT id AS user_id, name AS user_name FROM %s WHERE id IN (0) ORDER BY user_name");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.CellTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplexCellReconcile(){
  ColumnDefinition m=cfm2.getColumnDefinition(new ColumnIdentifier("m",false));
  int now1=FBUtilities.nowInSeconds();
  long ts1=now1 * 1000000;
  Cell r1m1=BufferCell.live(cfm2,m,ts1,bb(1),CellPath.create(bb(1)));
  Cell r1m2=BufferCell.live(cfm2,m,ts1,bb(2),CellPath.create(bb(2)));
  List<Cell> cells1=Lists.newArrayList(r1m1,r1m2);
  int now2=now1 + 1;
  long ts2=now2 * 1000000;
  Cell r2m2=BufferCell.live(cfm2,m,ts2,bb(1),CellPath.create(bb(2)));
  Cell r2m3=BufferCell.live(cfm2,m,ts2,bb(2),CellPath.create(bb(3)));
  Cell r2m4=BufferCell.live(cfm2,m,ts2,bb(3),CellPath.create(bb(4)));
  List<Cell> cells2=Lists.newArrayList(r2m2,r2m3,r2m4);
  RowBuilder builder=new RowBuilder();
  Cells.reconcileComplex(m,cells1.iterator(),cells2.iterator(),DeletionTime.LIVE,builder,now2 + 1);
  Assert.assertEquals(Lists.newArrayList(r1m1,r2m2,r2m3,r2m4),builder.cells);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.CleanupTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCleanupWithNewToken() throws ExecutionException, InterruptedException, UnknownHostException {
  StorageService.instance.getTokenMetadata().clearUnsafe();
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  fillCF(cfs,"val",LOOPS);
  assertEquals(LOOPS,Util.getAll(Util.cmd(cfs).build()).size());
  TokenMetadata tmd=StorageService.instance.getTokenMetadata();
  byte[] tk1=new byte[1], tk2=new byte[1];
  tk1[0]=2;
  tk2[0]=1;
  tmd.updateNormalToken(new BytesToken(tk1),InetAddress.getByName("127.0.0.1"));
  tmd.updateNormalToken(new BytesToken(tk2),InetAddress.getByName("127.0.0.2"));
  CompactionManager.instance.performCleanup(cfs);
  assertEquals(0,Util.getAll(Util.cmd(cfs).build()).size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNeedsCleanup() throws Exception {
  StorageService.instance.getTokenMetadata().clearUnsafe();
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  fillCF(cfs,"val",LOOPS);
  SSTableReader ssTable=cfs.getLiveSSTables().iterator().next();
  final Token ssTableMin=ssTable.first.getToken();
  final Token ssTableMax=ssTable.last.getToken();
  final Token min=token((byte)0);
  final Token before1=token((byte)2);
  final Token before2=token((byte)5);
  final Token before3=token((byte)10);
  final Token before4=token((byte)47);
  final Token insideSsTable1=token((byte)50);
  final Token insideSsTable2=token((byte)55);
  final Token max=token((byte)127,(byte)127,(byte)127,(byte)127);
  assert (min.compareTo(ssTableMin) < 0);
  assert (before1.compareTo(ssTableMin) < 0);
  assert (before2.compareTo(ssTableMin) < 0);
  assert (before3.compareTo(ssTableMin) < 0);
  assert (before4.compareTo(ssTableMin) < 0);
  assert (ssTableMin.compareTo(insideSsTable1) < 0);
  assert (insideSsTable1.compareTo(ssTableMax) < 0);
  assert (ssTableMin.compareTo(insideSsTable2) < 0);
  assert (insideSsTable2.compareTo(ssTableMax) < 0);
  assert (ssTableMax.compareTo(max) < 0);
  List<Map.Entry<Boolean,List<Range<Token>>>> testCases=new LinkedList<Map.Entry<Boolean,List<Range<Token>>>>(){
{
      add(entry(false,Arrays.asList(range(min,max))));
      add(entry(true,Arrays.asList(range(min,insideSsTable1))));
      add(entry(true,Arrays.asList(range(insideSsTable1,max))));
      add(entry(true,Arrays.asList(range(min,ssTableMin))));
      add(entry(true,Arrays.asList(range(ssTableMax,max))));
      add(entry(true,Arrays.asList(range(min,insideSsTable1),range(insideSsTable2,max))));
      add(entry(true,Arrays.asList(range(ssTableMin,ssTableMax))));
      add(entry(false,Arrays.asList(range(before4,max))));
      add(entry(false,Arrays.asList(range(min,before1),range(before2,before3),range(before4,max))));
    }
  }
;
  for (  Map.Entry<Boolean,List<Range<Token>>> testCase : testCases) {
    assertEquals(testCase.getKey(),CompactionManager.needsCleanup(ssTable,testCase.getValue()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testuserDefinedCleanupWithNewToken() throws ExecutionException, InterruptedException, UnknownHostException {
  StorageService.instance.getTokenMetadata().clearUnsafe();
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  fillCF(cfs,"val",LOOPS);
  assertEquals(LOOPS,Util.getAll(Util.cmd(cfs).build()).size());
  TokenMetadata tmd=StorageService.instance.getTokenMetadata();
  byte[] tk1=new byte[1], tk2=new byte[1];
  tk1[0]=2;
  tk2[0]=1;
  tmd.updateNormalToken(new BytesToken(tk1),InetAddress.getByName("127.0.0.1"));
  tmd.updateNormalToken(new BytesToken(tk2),InetAddress.getByName("127.0.0.2"));
  for (  SSTableReader r : cfs.getLiveSSTables())   CompactionManager.instance.forceUserDefinedCleanup(r.getFilename());
  assertEquals(0,Util.getAll(Util.cmd(cfs).build()).size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCleanupWithIndexes() throws IOException, ExecutionException, InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_INDEXED1);
  fillCF(cfs,"birthdate",LOOPS);
  assertEquals(LOOPS,Util.getAll(Util.cmd(cfs).build()).size());
  ColumnDefinition cdef=cfs.metadata.getColumnDefinition(COLUMN);
  String indexName="birthdate_key_index";
  long start=System.nanoTime();
  while (!cfs.getBuiltIndexes().contains(indexName) && System.nanoTime() - start < TimeUnit.SECONDS.toNanos(10))   Thread.sleep(10);
  RowFilter cf=RowFilter.create();
  cf.add(cdef,Operator.EQ,VALUE);
  assertEquals(LOOPS,Util.getAll(Util.cmd(cfs).filterOn("birthdate",Operator.EQ,VALUE).build()).size());
  TokenMetadata tmd=StorageService.instance.getTokenMetadata();
  byte[] tk1=new byte[1], tk2=new byte[1];
  tk1[0]=2;
  tk2[0]=1;
  tmd.updateNormalToken(new BytesToken(tk1),InetAddress.getByName("127.0.0.1"));
  tmd.updateNormalToken(new BytesToken(tk2),InetAddress.getByName("127.0.0.2"));
  CompactionManager.instance.performCleanup(cfs);
  assertEquals(0,Util.getAll(Util.cmd(cfs).build()).size());
  assert cfs.getLiveSSTables().isEmpty();
  assertEquals(0,Util.getAll(Util.cmd(cfs).filterOn("birthdate",Operator.EQ,VALUE).build()).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.ColumnFamilyStoreTest </h4><pre class="type-7 type-4 type-5 type-19 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClearEphemeralSnapshots() throws Throwable {
  Assume.assumeTrue(!FBUtilities.isWindows());
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_INDEX1);
  cfs.clearSnapshot("");
  int numRows=1000;
  long[] colValues=new long[numRows * 2];
  for (int i=0; i < colValues.length; i+=2) {
    colValues[i]=(i % 4 == 0 ? 1L : 2L);
    colValues[i + 1]=3L;
  }
  ScrubTest.fillIndexCF(cfs,false,colValues);
  cfs.snapshot("nonEphemeralSnapshot",null,false,false);
  cfs.snapshot("ephemeralSnapshot",null,true,false);
  Map<String,Pair<Long,Long>> snapshotDetails=cfs.getSnapshotDetails();
  assertEquals(2,snapshotDetails.size());
  assertTrue(snapshotDetails.containsKey("ephemeralSnapshot"));
  assertTrue(snapshotDetails.containsKey("nonEphemeralSnapshot"));
  ColumnFamilyStore.clearEphemeralSnapshots(cfs.getDirectories());
  snapshotDetails=cfs.getSnapshotDetails();
  assertEquals(1,snapshotDetails.size());
  assertTrue(snapshotDetails.containsKey("nonEphemeralSnapshot"));
  cfs.clearSnapshot("");
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testBackupAfterFlush() throws Throwable {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE2).getColumnFamilyStore(CF_STANDARD1);
  new RowUpdateBuilder(cfs.metadata,0,ByteBufferUtil.bytes("key1")).clustering("Column1").add("val","asdf").build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,0,ByteBufferUtil.bytes("key2")).clustering("Column1").add("val","asdf").build().applyUnsafe();
  cfs.forceBlockingFlush();
  for (int version=1; version <= 2; ++version) {
    Descriptor existing=new Descriptor(cfs.getDirectories().getDirectoryForNewSSTables(),KEYSPACE2,CF_STANDARD1,version);
    Descriptor desc=new Descriptor(Directories.getBackupsDirectory(existing),KEYSPACE2,CF_STANDARD1,version);
    for (    Component c : new Component[]{Component.DATA,Component.PRIMARY_INDEX,Component.FILTER,Component.STATS})     assertTrue("Cannot find backed-up file:" + desc.filenameFor(c),new File(desc.filenameFor(c)).exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeSortedQuery(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  new RowUpdateBuilder(cfs.metadata,0,"key1").clustering("Column1").add("val","asdf").build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,1,"key1").clustering("Column1").add("val","asdf").build().applyUnsafe();
  cfs.forceBlockingFlush();
  ((ClearableHistogram)cfs.metric.sstablesPerReadHistogram.cf).clear();
  Util.getAll(Util.cmd(cfs,"key1").includeRow("c1").build());
  assertEquals(1,cfs.metric.sstablesPerReadHistogram.cf.getCount());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScrubDataDirectories() throws Throwable {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD1);
  ColumnFamilyStore.scrubDataDirectories(cfs.metadata);
  new RowUpdateBuilder(cfs.metadata,2,"key").clustering("name").add("val","2").build().applyUnsafe();
  cfs.forceBlockingFlush();
  Collection<SSTableReader> ssTables=cfs.getLiveSSTables();
  assertEquals(1,ssTables.size());
  SSTableReader ssTable=ssTables.iterator().next();
  String dataFileName=ssTable.descriptor.filenameFor(Component.DATA);
  String tmpDataFileName=ssTable.descriptor.tmpFilenameFor(Component.DATA);
  new File(dataFileName).renameTo(new File(tmpDataFileName));
  ssTable.selfRef().release();
  ColumnFamilyStore.scrubDataDirectories(cfs.metadata);
  List<File> ssTableFiles=new Directories(cfs.metadata).sstableLister(Directories.OnTxnErr.THROW).listFiles();
  assertNotNull(ssTableFiles);
  assertEquals(0,ssTableFiles.size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetColumnWithWrongBF(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  List<Mutation> rms=new LinkedList<>();
  rms.add(new RowUpdateBuilder(cfs.metadata,0,"key1").clustering("Column1").add("val","asdf").build());
  Util.writeColumnFamily(rms);
  List<SSTableReader> ssTables=keyspace.getAllSSTables(SSTableSet.LIVE);
  assertEquals(1,ssTables.size());
  ssTables.get(0).forceFilterFailures();
  Util.assertEmpty(Util.cmd(cfs,"key2").build());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.CounterCacheTest </h4><pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadWrite(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COUNTER1);
  cfs.truncateBlocking();
  CacheService.instance.invalidateCounterCache();
  Clustering c1=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(1)).build();
  Clustering c2=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(2)).build();
  ColumnDefinition cd=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("c"));
  assertEquals(0,CacheService.instance.counterCache.size());
  assertNull(cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c2,cd,null));
  cfs.putCachedCounter(bytes(1),c1,cd,null,ClockAndCount.create(1L,1L));
  cfs.putCachedCounter(bytes(1),c2,cd,null,ClockAndCount.create(1L,2L));
  cfs.putCachedCounter(bytes(2),c1,cd,null,ClockAndCount.create(2L,1L));
  cfs.putCachedCounter(bytes(2),c2,cd,null,ClockAndCount.create(2L,2L));
  assertEquals(ClockAndCount.create(1L,1L),cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertEquals(ClockAndCount.create(1L,2L),cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertEquals(ClockAndCount.create(2L,1L),cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertEquals(ClockAndCount.create(2L,2L),cfs.getCachedCounter(bytes(2),c2,cd,null));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testSaveLoad() throws ExecutionException, InterruptedException, WriteTimeoutException {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COUNTER1);
  cfs.truncateBlocking();
  CacheService.instance.invalidateCounterCache();
  new CounterMutation(new RowUpdateBuilder(cfs.metadata,0,bytes(1)).clustering(1).add("c",1L).build(),ConsistencyLevel.ONE).apply();
  new CounterMutation(new RowUpdateBuilder(cfs.metadata,0,bytes(1)).clustering(2).add("c",2L).build(),ConsistencyLevel.ONE).apply();
  new CounterMutation(new RowUpdateBuilder(cfs.metadata,0,bytes(2)).clustering(1).add("c",1L).build(),ConsistencyLevel.ONE).apply();
  new CounterMutation(new RowUpdateBuilder(cfs.metadata,0,bytes(2)).clustering(2).add("c",2L).build(),ConsistencyLevel.ONE).apply();
  assertEquals(4,CacheService.instance.counterCache.size());
  CacheService.instance.counterCache.submitWrite(Integer.MAX_VALUE).get();
  CacheService.instance.invalidateCounterCache();
  assertEquals(0,CacheService.instance.counterCache.size());
  CacheService.instance.counterCache.loadSaved();
  assertEquals(4,CacheService.instance.counterCache.size());
  Clustering c1=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(1)).build();
  Clustering c2=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(2)).build();
  ColumnDefinition cd=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("c"));
  assertEquals(ClockAndCount.create(1L,1L),cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertEquals(ClockAndCount.create(1L,2L),cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertEquals(ClockAndCount.create(1L,1L),cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertEquals(ClockAndCount.create(1L,2L),cfs.getCachedCounter(bytes(2),c2,cd,null));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCounterCacheInvalidate(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COUNTER1);
  cfs.truncateBlocking();
  CacheService.instance.invalidateCounterCache();
  Clustering c1=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(1)).build();
  Clustering c2=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(2)).build();
  ColumnDefinition cd=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("c"));
  assertEquals(0,CacheService.instance.counterCache.size());
  assertNull(cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c2,cd,null));
  assertNull(cfs.getCachedCounter(bytes(3),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(3),c2,cd,null));
  cfs.putCachedCounter(bytes(1),c1,cd,null,ClockAndCount.create(1L,1L));
  cfs.putCachedCounter(bytes(1),c2,cd,null,ClockAndCount.create(1L,2L));
  cfs.putCachedCounter(bytes(2),c1,cd,null,ClockAndCount.create(2L,1L));
  cfs.putCachedCounter(bytes(2),c2,cd,null,ClockAndCount.create(2L,2L));
  cfs.putCachedCounter(bytes(3),c1,cd,null,ClockAndCount.create(3L,1L));
  cfs.putCachedCounter(bytes(3),c2,cd,null,ClockAndCount.create(3L,2L));
  assertEquals(ClockAndCount.create(1L,1L),cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertEquals(ClockAndCount.create(1L,2L),cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertEquals(ClockAndCount.create(2L,1L),cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertEquals(ClockAndCount.create(2L,2L),cfs.getCachedCounter(bytes(2),c2,cd,null));
  assertEquals(ClockAndCount.create(3L,1L),cfs.getCachedCounter(bytes(3),c1,cd,null));
  assertEquals(ClockAndCount.create(3L,2L),cfs.getCachedCounter(bytes(3),c2,cd,null));
  cfs.invalidateCounterCache(Collections.singleton(new Bounds<Token>(cfs.decorateKey(bytes(1)).getToken(),cfs.decorateKey(bytes(2)).getToken())));
  assertEquals(2,CacheService.instance.counterCache.size());
  assertNull(cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c2,cd,null));
  assertEquals(ClockAndCount.create(3L,1L),cfs.getCachedCounter(bytes(3),c1,cd,null));
  assertEquals(ClockAndCount.create(3L,2L),cfs.getCachedCounter(bytes(3),c2,cd,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.CounterCellTest </h4><pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testDiff(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COUNTER1);
  ByteBuffer col=ByteBufferUtil.bytes("val");
  Cell leftCell;
  Cell rightCell;
  leftCell=createLegacyCounterCell(cfs,col,2,2);
  rightCell=createLegacyCounterCell(cfs,col,2,1);
  assertEquals(CounterContext.Relationship.EQUAL,CounterContext.instance().diff(leftCell.value(),rightCell.value()));
  leftCell=createLegacyCounterCell(cfs,col,1,2);
  rightCell=createLegacyCounterCell(cfs,col,2,1);
  assertEquals(CounterContext.Relationship.DISJOINT,CounterContext.instance().diff(leftCell.value(),rightCell.value()));
  CounterId id=CounterId.generate();
  leftCell=createCounterCell(cfs,col,id,2,2);
  rightCell=createCounterCell(cfs,col,id,2,1);
  assertEquals(CounterContext.Relationship.GREATER_THAN,CounterContext.instance().diff(leftCell.value(),rightCell.value()));
  ContextState leftContext;
  ContextState rightContext;
  leftContext=ContextState.allocate(0,0,3);
  leftContext.writeRemote(CounterId.fromInt(3),3L,0L);
  leftContext.writeRemote(CounterId.fromInt(6),2L,0L);
  leftContext.writeRemote(CounterId.fromInt(9),1L,0L);
  rightContext=ContextState.wrap(ByteBufferUtil.clone(leftContext.context));
  leftCell=createCounterCellFromContext(cfs,col,leftContext,1);
  rightCell=createCounterCellFromContext(cfs,col,rightContext,1);
  assertEquals(CounterContext.Relationship.EQUAL,CounterContext.instance().diff(leftCell.value(),rightCell.value()));
  leftContext=ContextState.allocate(0,0,4);
  leftContext.writeRemote(CounterId.fromInt(3),3L,0L);
  leftContext.writeRemote(CounterId.fromInt(6),2L,0L);
  leftContext.writeRemote(CounterId.fromInt(9),1L,0L);
  leftContext.writeRemote(CounterId.fromInt(12),0L,0L);
  rightContext=ContextState.allocate(0,0,3);
  rightContext.writeRemote(CounterId.fromInt(3),3L,0L);
  rightContext.writeRemote(CounterId.fromInt(6),2L,0L);
  rightContext.writeRemote(CounterId.fromInt(9),1L,0L);
  leftCell=createCounterCellFromContext(cfs,col,leftContext,1);
  rightCell=createCounterCellFromContext(cfs,col,rightContext,1);
  assertEquals(CounterContext.Relationship.GREATER_THAN,CounterContext.instance().diff(leftCell.value(),rightCell.value()));
  assertEquals(CounterContext.Relationship.LESS_THAN,CounterContext.instance().diff(rightCell.value(),leftCell.value()));
  leftContext=ContextState.allocate(0,0,3);
  leftContext.writeRemote(CounterId.fromInt(3),1L,0L);
  leftContext.writeRemote(CounterId.fromInt(4),1L,0L);
  leftContext.writeRemote(CounterId.fromInt(9),1L,0L);
  rightContext=ContextState.allocate(0,0,3);
  rightContext.writeRemote(CounterId.fromInt(3),1L,0L);
  rightContext.writeRemote(CounterId.fromInt(6),1L,0L);
  rightContext.writeRemote(CounterId.fromInt(9),1L,0L);
  leftCell=createCounterCellFromContext(cfs,col,leftContext,1);
  rightCell=createCounterCellFromContext(cfs,col,rightContext,1);
  assertEquals(CounterContext.Relationship.DISJOINT,CounterContext.instance().diff(leftCell.value(),rightCell.value()));
  assertEquals(CounterContext.Relationship.DISJOINT,CounterContext.instance().diff(rightCell.value(),leftCell.value()));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReconcile(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COUNTER1);
  ByteBuffer col=ByteBufferUtil.bytes("val");
  Cell left;
  Cell right;
  left=createDeleted(cfs,col,2,5);
  right=createDeleted(cfs,col,2,10);
  assert Cells.reconcile(left,right,10) == right;
  right=createLegacyCounterCell(cfs,col,1,10);
  assert Cells.reconcile(left,right,10) == left;
  left=createDeleted(cfs,col,6,6);
  right=createLegacyCounterCell(cfs,col,1,5);
  assert Cells.reconcile(left,right,10) == left;
  left=createDeleted(cfs,col,1,1);
  right=createLegacyCounterCell(cfs,col,1,5);
  assert Cells.reconcile(left,right,10) == left;
  left=createDeleted(cfs,col,8,8);
  right=createLegacyCounterCell(cfs,col,1,8);
  assert Cells.reconcile(left,right,10) == left;
  left=createLegacyCounterCell(cfs,col,1,2);
  right=createLegacyCounterCell(cfs,col,3,5);
  Cell reconciled=Cells.reconcile(left,right,10);
  assertEquals(CounterContext.instance().total(reconciled.value()),4);
  assertEquals(reconciled.timestamp(),5L);
  Cell addTen=createLegacyCounterCell(cfs,col,10,4);
  reconciled=Cells.reconcile(reconciled,addTen,10);
  assertEquals(CounterContext.instance().total(reconciled.value()),14);
  assertEquals(reconciled.timestamp(),5L);
  Cell addThree=createLegacyCounterCell(cfs,col,3,7);
  reconciled=Cells.reconcile(reconciled,addThree,10);
  assertEquals(CounterContext.instance().total(reconciled.value()),17);
  assertEquals(reconciled.timestamp(),7L);
  assert reconciled.localDeletionTime() == Integer.MAX_VALUE;
  Cell deleted=createDeleted(cfs,col,8,8);
  reconciled=Cells.reconcile(reconciled,deleted,10);
  assert reconciled.localDeletionTime() == 8;
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreate(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COUNTER1);
  long delta=3L;
  Cell cell=createLegacyCounterCell(cfs,ByteBufferUtil.bytes("val"),delta,1);
  assertEquals(delta,CounterContext.instance().total(cell.value()));
  assertEquals(1,cell.value().getShort(0));
  assertEquals(0,cell.value().getShort(2));
  Assert.assertTrue(CounterId.wrap(cell.value(),4).isLocalId());
  assertEquals(1L,cell.value().getLong(4 + idLength));
  assertEquals(delta,cell.value().getLong(4 + idLength + clockLength));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.CounterMutationTest </h4><pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testDeletes() throws WriteTimeoutException {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF1);
  cfs.truncateBlocking();
  ColumnDefinition cOne=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("val"));
  ColumnDefinition cTwo=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("val2"));
  new CounterMutation(new RowUpdateBuilder(cfs.metadata,5,"key1").clustering("cc").add("val",1L).add("val2",-1L).build(),ConsistencyLevel.ONE).apply();
  Row row=Util.getOnlyRow(Util.cmd(cfs).includeRow("cc").columns("val","val2").build());
  assertEquals(1L,CounterContext.instance().total(row.getCell(cOne).value()));
  assertEquals(-1L,CounterContext.instance().total(row.getCell(cTwo).value()));
  new CounterMutation(new RowUpdateBuilder(cfs.metadata,5,"key1").clustering("cc").delete(cOne).add("val2",-5L).build(),ConsistencyLevel.ONE).apply();
  row=Util.getOnlyRow(Util.cmd(cfs).includeRow("cc").columns("val","val2").build());
  assertEquals(null,row.getCell(cOne));
  assertEquals(-6L,CounterContext.instance().total(row.getCell(cTwo).value()));
  new CounterMutation(new RowUpdateBuilder(cfs.metadata,5,"key1").clustering("cc").add("val",1L).build(),ConsistencyLevel.ONE).apply();
  row=Util.getOnlyRow(Util.cmd(cfs).includeRow("cc").columns("val","val2").build());
  assertEquals(null,row.getCell(cOne));
  RowUpdateBuilder.deleteRow(cfs.metadata,6,"key1","cc").applyUnsafe();
  Util.assertEmpty(Util.cmd(cfs).includeRow("cc").columns("val","val2").build());
  new CounterMutation(new RowUpdateBuilder(cfs.metadata,6,"key1").clustering("cc").add("val",1L).add("val2",1L).build(),ConsistencyLevel.ONE).apply();
  Util.assertEmpty(Util.cmd(cfs).includeRow("cc").columns("val","val2").build());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testBatch() throws WriteTimeoutException {
  ColumnFamilyStore cfsOne=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF1);
  ColumnFamilyStore cfsTwo=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF2);
  cfsOne.truncateBlocking();
  cfsTwo.truncateBlocking();
  Mutation batch=new Mutation(KEYSPACE1,Util.dk("key1"));
  batch.add(new RowUpdateBuilder(cfsOne.metadata,5,"key1").clustering("cc").add("val",1L).add("val2",-1L).build().get(cfsOne.metadata));
  batch.add(new RowUpdateBuilder(cfsTwo.metadata,5,"key1").clustering("cc").add("val",2L).add("val2",-2L).build().get(cfsTwo.metadata));
  new CounterMutation(batch,ConsistencyLevel.ONE).apply();
  ColumnDefinition c1cfs1=cfsOne.metadata.getColumnDefinition(ByteBufferUtil.bytes("val"));
  ColumnDefinition c2cfs1=cfsOne.metadata.getColumnDefinition(ByteBufferUtil.bytes("val2"));
  Row row=Util.getOnlyRow(Util.cmd(cfsOne).includeRow("cc").columns("val","val2").build());
  assertEquals(1L,CounterContext.instance().total(row.getCell(c1cfs1).value()));
  assertEquals(-1L,CounterContext.instance().total(row.getCell(c2cfs1).value()));
  ColumnDefinition c1cfs2=cfsTwo.metadata.getColumnDefinition(ByteBufferUtil.bytes("val"));
  ColumnDefinition c2cfs2=cfsTwo.metadata.getColumnDefinition(ByteBufferUtil.bytes("val2"));
  row=Util.getOnlyRow(Util.cmd(cfsTwo).includeRow("cc").columns("val","val2").build());
  assertEquals(2L,CounterContext.instance().total(row.getCell(c1cfs2).value()));
  assertEquals(-2L,CounterContext.instance().total(row.getCell(c2cfs2).value()));
  CBuilder cb=CBuilder.create(cfsOne.metadata.comparator);
  cb.add("cc");
  assertEquals(ClockAndCount.create(1L,1L),cfsOne.getCachedCounter(Util.dk("key1").getKey(),cb.build(),c1cfs1,null));
  assertEquals(ClockAndCount.create(1L,-1L),cfsOne.getCachedCounter(Util.dk("key1").getKey(),cb.build(),c2cfs1,null));
  assertEquals(ClockAndCount.create(1L,2L),cfsTwo.getCachedCounter(Util.dk("key1").getKey(),cb.build(),c1cfs2,null));
  assertEquals(ClockAndCount.create(1L,-2L),cfsTwo.getCachedCounter(Util.dk("key1").getKey(),cb.build(),c2cfs2,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.DirectoriesTest </h4><pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSecondaryIndexDirectories(){
  UUID tableID=CFMetaData.generateLegacyCfId(KS,"cf");
  CFMetaData PARENT_CFM=CFMetaData.Builder.create(KS,"cf").withId(tableID).addPartitionKey("thekey",UTF8Type.instance).addClusteringColumn("col",UTF8Type.instance).build();
  ColumnDefinition col=PARENT_CFM.getColumnDefinition(ByteBufferUtil.bytes("col"));
  IndexMetadata indexDef=IndexMetadata.fromIndexTargets(PARENT_CFM,Collections.singletonList(new IndexTarget(col.name,IndexTarget.Type.VALUES)),"idx",IndexMetadata.Kind.KEYS,Collections.emptyMap());
  PARENT_CFM.indexes(PARENT_CFM.getIndexes().with(indexDef));
  CFMetaData INDEX_CFM=CassandraIndex.indexCfsMetadata(PARENT_CFM,indexDef);
  Directories parentDirectories=new Directories(PARENT_CFM);
  Directories indexDirectories=new Directories(INDEX_CFM);
  for (  File dir : indexDirectories.getCFDirectories()) {
    assertEquals(cfDir(INDEX_CFM),dir);
  }
  Descriptor parentDesc=new Descriptor(parentDirectories.getDirectoryForNewSSTables(),KS,PARENT_CFM.cfName,0);
  Descriptor indexDesc=new Descriptor(indexDirectories.getDirectoryForNewSSTables(),KS,INDEX_CFM.cfName,0);
  File parentSnapshotDirectory=Directories.getSnapshotDirectory(parentDesc,"test");
  File indexSnapshotDirectory=Directories.getSnapshotDirectory(indexDesc,"test");
  assertEquals(parentSnapshotDirectory,indexSnapshotDirectory.getParentFile());
  parentSnapshotDirectory.mkdirs();
  assertTrue(parentDirectories.snapshotExists("test"));
  assertTrue(indexDirectories.snapshotExists("test"));
  assertEquals(parentDirectories.snapshotCreationTime("test"),indexDirectories.snapshotCreationTime("test"));
  Descriptor parentSnapshot=new Descriptor(parentSnapshotDirectory,KS,PARENT_CFM.cfName,0);
  createFile(parentSnapshot.filenameFor(Component.DATA),30);
  Descriptor indexSnapshot=new Descriptor(indexSnapshotDirectory,KS,INDEX_CFM.cfName,0);
  createFile(indexSnapshot.filenameFor(Component.DATA),40);
  assertEquals(30,parentDirectories.trueSnapshotsSize());
  assertEquals(40,indexDirectories.trueSnapshotsSize());
  Map<String,Pair<Long,Long>> parentSnapshotDetail=parentDirectories.getSnapshotDetails();
  assertTrue(parentSnapshotDetail.containsKey("test"));
  assertEquals(30L,parentSnapshotDetail.get("test").right.longValue());
  Map<String,Pair<Long,Long>> indexSnapshotDetail=indexDirectories.getSnapshotDetails();
  assertTrue(indexSnapshotDetail.containsKey("test"));
  assertEquals(40L,indexSnapshotDetail.get("test").right.longValue());
  File parentBackupDirectory=Directories.getBackupsDirectory(parentDesc);
  File indexBackupDirectory=Directories.getBackupsDirectory(indexDesc);
  assertEquals(parentBackupDirectory,indexBackupDirectory.getParentFile());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.KeyCacheTest </h4><pre class="type-7 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testKeyCacheLoad() throws Exception {
  CompactionManager.instance.disableAutoCompaction();
  ColumnFamilyStore store=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COLUMN_FAMILY2);
  CacheService.instance.invalidateKeyCache();
  assertKeyCacheSize(0,KEYSPACE1,COLUMN_FAMILY2);
  SchemaLoader.insertData(KEYSPACE1,COLUMN_FAMILY2,0,100);
  store.forceBlockingFlush();
  readData(KEYSPACE1,COLUMN_FAMILY2,0,100);
  assertKeyCacheSize(100,KEYSPACE1,COLUMN_FAMILY2);
  Map<KeyCacheKey,RowIndexEntry> savedMap=new HashMap<KeyCacheKey,RowIndexEntry>();
  for (Iterator<KeyCacheKey> iter=CacheService.instance.keyCache.keyIterator(); iter.hasNext(); ) {
    KeyCacheKey k=iter.next();
    if (k.desc.ksname.equals(KEYSPACE1) && k.desc.cfname.equals(COLUMN_FAMILY2))     savedMap.put(k,CacheService.instance.keyCache.get(k));
  }
  CacheService.instance.keyCache.submitWrite(Integer.MAX_VALUE).get();
  CacheService.instance.invalidateKeyCache();
  assertKeyCacheSize(0,KEYSPACE1,COLUMN_FAMILY2);
  CacheService.instance.keyCache.loadSaved();
  assertKeyCacheSize(savedMap.size(),KEYSPACE1,COLUMN_FAMILY2);
  for (  Map.Entry<KeyCacheKey,RowIndexEntry> entry : savedMap.entrySet()) {
    RowIndexEntry expected=entry.getValue();
    RowIndexEntry actual=CacheService.instance.keyCache.get(entry.getKey());
    assertEquals(expected.position,actual.position);
    assertEquals(expected.columnsIndex(),actual.columnsIndex());
    if (expected.isIndexed()) {
      assertEquals(expected.deletionTime(),actual.deletionTime());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.KeyspaceTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLimitSSTablesComposites() throws Throwable {
  String tableName=createTable("CREATE TABLE %s (a text, b text, c int, d int, PRIMARY KEY (a, b, c))");
  final ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(tableName);
  cfs.disableAutoCompaction();
  for (int j=0; j < 10; j++) {
    for (int i=0; i < 10; i++)     execute("INSERT INTO %s (a, b, c, d) VALUES (?, ?, ?, ?)","0","a" + i,j * 10 + i,0);
    cfs.forceBlockingFlush();
  }
  ((ClearableHistogram)cfs.metric.sstablesPerReadHistogram.cf).clear();
  assertRows(execute("SELECT * FROM %s WHERE a = ? AND (b, c) >= (?, ?) AND (b) <= (?) LIMIT 1000","0","a5",85,"a5"),row("0","a5",85,0),row("0","a5",95,0));
  assertEquals(2,cfs.metric.sstablesPerReadHistogram.cf.getSnapshot().getMax(),0.1);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSliceBloomFilterFalsePositive() throws Throwable {
  String tableName=createTable("CREATE TABLE %s (a text, b int, c int, PRIMARY KEY (a, b))");
  execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?)","1",1,1);
  final ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(tableName);
  for (  String key : new String[]{"0","2"})   Util.assertEmpty(Util.cmd(cfs,key).build());
  cfs.forceBlockingFlush();
  for (  String key : new String[]{"0","2"})   Util.assertEmpty(Util.cmd(cfs,key).build());
  Collection<SSTableReader> sstables=cfs.getLiveSSTables();
  assertEquals(1,sstables.size());
  sstables.iterator().next().forceFilterFailures();
  for (  String key : new String[]{"0","2"})   Util.assertEmpty(Util.cmd(cfs,key).build());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLimitSSTables() throws Throwable {
  String tableName=createTable("CREATE TABLE %s (a text, b int, c int, PRIMARY KEY (a, b))");
  final ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(tableName);
  cfs.disableAutoCompaction();
  for (int j=0; j < 10; j++) {
    for (int i=1000 + (j * 100); i < 1000 + ((j + 1) * 100); i++)     execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?) USING TIMESTAMP ?","0",i,i,(long)i);
    cfs.forceBlockingFlush();
  }
  ((ClearableHistogram)cfs.metric.sstablesPerReadHistogram.cf).clear();
  SinglePartitionReadCommand command=singlePartitionSlice(cfs,"0",slices(cfs,null,1499,false),1000);
  int[] expectedValues=new int[500];
  for (int i=0; i < 500; i++)   expectedValues[i]=i + 1000;
  assertRowsInResult(cfs,command,expectedValues);
  assertEquals(5,cfs.metric.sstablesPerReadHistogram.cf.getSnapshot().getMax(),0.1);
  ((ClearableHistogram)cfs.metric.sstablesPerReadHistogram.cf).clear();
  command=singlePartitionSlice(cfs,"0",slices(cfs,1500,2000,false),1000);
  for (int i=0; i < 500; i++)   expectedValues[i]=i + 1500;
  assertRowsInResult(cfs,command,expectedValues);
  assertEquals(5,cfs.metric.sstablesPerReadHistogram.cf.getSnapshot().getMax(),0.1);
  ((ClearableHistogram)cfs.metric.sstablesPerReadHistogram.cf).clear();
  command=singlePartitionSlice(cfs,"0",slices(cfs,1500,2000,true),1000);
  for (int i=0; i < 500; i++)   expectedValues[i]=1999 - i;
  assertRowsInResult(cfs,command,expectedValues);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testReversedWithFlushing() throws Throwable {
  String tableName=createTable("CREATE TABLE %s (a text, b int, c int, PRIMARY KEY (a, b)) WITH CLUSTERING ORDER BY (b DESC)");
  final ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(tableName);
  for (int i=0; i < 10; i++)   execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?)","0",i,i);
  cfs.forceBlockingFlush();
  for (int i=10; i < 20; i++) {
    execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?)","0",i,i);
    PartitionColumns columns=PartitionColumns.of(cfs.metadata.getColumnDefinition(new ColumnIdentifier("c",false)));
    ClusteringIndexSliceFilter filter=new ClusteringIndexSliceFilter(Slices.ALL,false);
    SinglePartitionReadCommand command=singlePartitionSlice(cfs,"0",filter,null);
    try (ReadExecutionController executionController=command.executionController();PartitionIterator iterator=command.executeInternal(executionController)){
      try (RowIterator rowIterator=iterator.next()){
        Row row=rowIterator.next();
        Cell cell=row.getCell(cfs.metadata.getColumnDefinition(new ColumnIdentifier("c",false)));
        assertEquals(ByteBufferUtil.bytes(i),cell.value());
      }
     }
   }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.PartitionRangeReadTest </h4><pre class="type-7 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testCassandra6778() throws CharacterCodingException {
  String cfname=CF_STANDARDINT;
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  cfs.truncateBlocking();
  ByteBuffer col=ByteBufferUtil.bytes("val");
  ColumnDefinition cDef=cfs.metadata.getColumnDefinition(col);
  new RowUpdateBuilder(cfs.metadata,0,"k1").clustering(new BigInteger(new byte[]{1})).add("val","val1").build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,1,"k1").clustering(new BigInteger(new byte[]{0,0,1})).add("val","val2").build().applyUnsafe();
  cfs.forceBlockingFlush();
  Row row=Util.getOnlyRow(Util.cmd(cfs,"k1").includeRow(new BigInteger(new byte[]{1})).build());
  assertTrue(row.getCell(cDef).value().equals(ByteBufferUtil.bytes("val2")));
  row=Util.getOnlyRow(Util.cmd(cfs,"k1").includeRow(new BigInteger(new byte[]{0,0,1})).build());
  assertTrue(row.getCell(cDef).value().equals(ByteBufferUtil.bytes("val2")));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRangeSliceInclusionExclusion() throws Throwable {
  String keyspaceName=KEYSPACE1;
  String cfName=CF_STANDARD1;
  Keyspace keyspace=Keyspace.open(keyspaceName);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfName);
  cfs.clearUnsafe();
  for (int i=0; i < 10; ++i) {
    RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,10,String.valueOf(i));
    builder.clustering("c");
    builder.add("val",String.valueOf(i));
    builder.build().applyUnsafe();
  }
  cfs.forceBlockingFlush();
  ColumnDefinition cDef=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("val"));
  List<FilteredPartition> partitions;
  partitions=Util.getAll(Util.cmd(cfs).fromKeyIncl("2").toKeyIncl("7").build());
  assertEquals(6,partitions.size());
  assertTrue(partitions.get(0).iterator().next().getCell(cDef).value().equals(ByteBufferUtil.bytes("2")));
  assertTrue(partitions.get(partitions.size() - 1).iterator().next().getCell(cDef).value().equals(ByteBufferUtil.bytes("7")));
  partitions=Util.getAll(Util.cmd(cfs).fromKeyExcl("2").toKeyExcl("7").build());
  assertEquals(4,partitions.size());
  assertTrue(partitions.get(0).iterator().next().getCell(cDef).value().equals(ByteBufferUtil.bytes("3")));
  assertTrue(partitions.get(partitions.size() - 1).iterator().next().getCell(cDef).value().equals(ByteBufferUtil.bytes("6")));
  partitions=Util.getAll(Util.cmd(cfs).fromKeyExcl("2").toKeyIncl("7").build());
  assertEquals(5,partitions.size());
  assertTrue(partitions.get(0).iterator().next().getCell(cDef).value().equals(ByteBufferUtil.bytes("3")));
  assertTrue(partitions.get(partitions.size() - 1).iterator().next().getCell(cDef).value().equals(ByteBufferUtil.bytes("7")));
  partitions=Util.getAll(Util.cmd(cfs).fromKeyIncl("2").toKeyExcl("7").build());
  assertEquals(5,partitions.size());
  assertTrue(partitions.get(0).iterator().next().getCell(cDef).value().equals(ByteBufferUtil.bytes("2")));
  assertTrue(partitions.get(partitions.size() - 1).iterator().next().getCell(cDef).value().equals(ByteBufferUtil.bytes("6")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.PartitionTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testColumnStatsRecordsRowDeletesCorrectly(){
  long timestamp=System.currentTimeMillis();
  int localDeletionTime=(int)(timestamp / 1000);
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_TENCOL);
  RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,5,"key1").clustering("c").add("val","val1");
  for (int i=0; i < 10; i++)   builder.add("val" + i,"val" + i);
  builder.build().applyUnsafe();
  RowUpdateBuilder.deleteRowAt(cfs.metadata,10L,localDeletionTime,"key1","c").applyUnsafe();
  ImmutableBTreePartition partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,"key1").build());
  EncodingStats stats=partition.stats();
  assertEquals(localDeletionTime,stats.minLocalDeletionTime);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManyColumns() throws IOException {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_TENCOL);
  RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,5,"key1").clustering("c").add("val","val1");
  for (int i=0; i < 10; i++)   builder.add("val" + i,"val" + i);
  PartitionUpdate update=builder.buildUpdate();
  CachedBTreePartition partition=CachedBTreePartition.create(update.unfilteredIterator(),FBUtilities.nowInSeconds());
  DataOutputBuffer bufOut=new DataOutputBuffer();
  CachedPartition.cacheSerializer.serialize(partition,bufOut);
  CachedPartition deserialized=CachedPartition.cacheSerializer.deserialize(new DataInputBuffer(bufOut.getData()));
  assertEquals(partition.columns().regulars.size(),deserialized.columns().regulars.size());
  assertTrue(deserialized.columns().regulars.getSimple(1).equals(partition.columns().regulars.getSimple(1)));
  assertTrue(deserialized.columns().regulars.getSimple(5).equals(partition.columns().regulars.getSimple(5)));
  ColumnDefinition cDef=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("val8"));
  assertTrue(partition.lastRow().getCell(cDef).value().equals(deserialized.lastRow().getCell(cDef).value()));
  assert deserialized.partitionKey().equals(partition.partitionKey());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RangeTombstoneListTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void addRangeWithEmptyStartAndEnd(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(rt(4,10,3));
  l.add(atMost(12,4,0));
  Iterator<RangeTombstone> iter=l.iterator();
  assertRT(atMost(12,4,0),iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void searchTest(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(rt(0,4,5));
  l.add(rt(4,6,2));
  l.add(rt(9,12,1));
  l.add(rt(14,15,3));
  l.add(rt(15,17,6));
  assertEquals(null,l.searchDeletionTime(clustering(-1)));
  assertEquals(5,l.searchDeletionTime(clustering(0)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(3)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(4)).markedForDeleteAt());
  assertEquals(2,l.searchDeletionTime(clustering(5)).markedForDeleteAt());
  assertEquals(null,l.searchDeletionTime(clustering(7)));
  assertEquals(3,l.searchDeletionTime(clustering(14)).markedForDeleteAt());
  assertEquals(6,l.searchDeletionTime(clustering(15)).markedForDeleteAt());
  assertEquals(null,l.searchDeletionTime(clustering(18)));
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void addIncludedRangeToRangeWithEmptyEnd(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(atLeast(3,3,0));
  l.add(rt(4,10,4));
  Iterator<RangeTombstone> iter=l.iterator();
  assertRT(rtie(3,4,3),iter.next());
  assertRT(rt(4,10,4),iter.next());
  assertRT(greaterThan(10,3,0),iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void addIncludedRangeWithEmptyEndToRangeWithEmptyEnd(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(atLeast(3,3,0));
  l.add(atLeast(5,4,0));
  Iterator<RangeTombstone> iter=l.iterator();
  assertRT(rtie(3,5,3),iter.next());
  assertRT(atLeast(5,4,0),iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void addRangeWithEmptyEndWitchOverlapExistingRange(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(rt(4,10,3));
  l.add(atLeast(6,4,0));
  Iterator<RangeTombstone> iter=l.iterator();
  assertRT(rtie(4,6,3),iter.next());
  assertRT(atLeast(6,4,0),iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void searchTestWithEmptyStart(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(atMost(4,5,0));
  l.add(rt(4,6,2));
  l.add(rt(9,12,1));
  l.add(rt(14,15,3));
  l.add(rt(15,17,6));
  assertEquals(5,l.searchDeletionTime(clustering(-1)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(0)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(3)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(4)).markedForDeleteAt());
  assertEquals(2,l.searchDeletionTime(clustering(5)).markedForDeleteAt());
  assertEquals(null,l.searchDeletionTime(clustering(7)));
  assertEquals(3,l.searchDeletionTime(clustering(14)).markedForDeleteAt());
  assertEquals(6,l.searchDeletionTime(clustering(15)).markedForDeleteAt());
  assertEquals(null,l.searchDeletionTime(clustering(18)));
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void addOverlappingRangeToRangeWithEmptyEnd(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(atLeast(3,3,0));
  l.add(rt(1,10,4));
  Iterator<RangeTombstone> iter=l.iterator();
  assertRT(rt(1,10,4),iter.next());
  assertRT(greaterThan(10,3,0),iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void addRangeWithEmptyEndWitchIncludeExistingRangeWithEmptyEnd(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(atLeast(5,3,0));
  l.add(atLeast(3,4,0));
  Iterator<RangeTombstone> iter=l.iterator();
  assertRT(atLeast(3,4,0),iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void largeAdditionTest(){
  int N=3000;
  RangeTombstoneList l=new RangeTombstoneList(cmp,N);
  for (int i=0; i < N; i++)   l.add(rt(2 * i + 1,2 * i + 2,1));
  assertEquals(l.size(),N);
  l.add(rt(0,2 * N + 3,2));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void overlappingPreviousEndEqualsStartTest(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(rt(11,12,2));
  l.add(rt(1,4,2));
  l.add(rt(4,10,5));
  assertEquals(2,l.searchDeletionTime(clustering(3)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(4)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(8)).markedForDeleteAt());
  assertEquals(3,l.size());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void searchTestWithRangeWithEmptyEnd(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(rt(0,4,5));
  l.add(rt(4,6,2));
  l.add(rt(9,12,1));
  l.add(rt(14,15,3));
  l.add(atLeast(15,6,0));
  assertEquals(null,l.searchDeletionTime(clustering(-1)));
  assertEquals(5,l.searchDeletionTime(clustering(0)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(3)).markedForDeleteAt());
  assertEquals(5,l.searchDeletionTime(clustering(4)).markedForDeleteAt());
  assertEquals(2,l.searchDeletionTime(clustering(5)).markedForDeleteAt());
  assertEquals(null,l.searchDeletionTime(clustering(7)));
  assertEquals(3,l.searchDeletionTime(clustering(14)).markedForDeleteAt());
  assertEquals(6,l.searchDeletionTime(clustering(15)).markedForDeleteAt());
  assertEquals(6,l.searchDeletionTime(clustering(1000)).markedForDeleteAt());
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void addRangeWithEmptyEndToRangeWithEmptyStartAndEnd(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(new RangeTombstone(Slice.ALL,new DeletionTime(2,0)));
  l.add(atLeast(12,4,0));
  Iterator<RangeTombstone> iter=l.iterator();
  assertRT(lessThan(12,2,0),iter.next());
  assertRT(atLeast(12,4,0),iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void addRangeWithEmptyEndWitchIncludeExistingRange(){
  RangeTombstoneList l=new RangeTombstoneList(cmp,0);
  l.add(rt(4,10,3));
  l.add(atLeast(3,4,0));
  Iterator<RangeTombstone> iter=l.iterator();
  assertRT(atLeast(3,4,0),iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RangeTombstoneTest </h4><pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void rangeTombstoneFilteringTest() throws Exception {
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KSNAME);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CFNAME);
  String key="k111";
  UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,key).withTimestamp(0);
  for (int i=0; i < 40; i+=2)   builder.newRow(i).add("val",i);
  builder.applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,1,key).addRangeTombstone(5,10).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,2,key).addRangeTombstone(15,20).build().applyUnsafe();
  ImmutableBTreePartition partition;
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(11).toIncl(14).build());
  Collection<RangeTombstone> rt=rangeTombstones(partition);
  assertEquals(0,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(11).toIncl(15).build());
  rt=rangeTombstones(partition);
  assertEquals(1,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(20).toIncl(25).build());
  rt=rangeTombstones(partition);
  assertEquals(1,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(12).toIncl(25).build());
  rt=rangeTombstones(partition);
  assertEquals(1,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(25).toIncl(35).build());
  rt=rangeTombstones(partition);
  assertEquals(0,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(1).toIncl(40).build());
  rt=rangeTombstones(partition);
  assertEquals(2,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(7).toIncl(17).build());
  rt=rangeTombstones(partition);
  assertEquals(2,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(5).toIncl(20).build());
  rt=rangeTombstones(partition);
  assertEquals(2,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(5).toIncl(20).build());
  rt=rangeTombstones(partition);
  assertEquals(2,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(1).toIncl(2).build());
  rt=rangeTombstones(partition);
  assertEquals(0,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(1).toIncl(5).build());
  rt=rangeTombstones(partition);
  assertEquals(1,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(1).toIncl(10).build());
  rt=rangeTombstones(partition);
  assertEquals(1,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(5).toIncl(6).build());
  rt=rangeTombstones(partition);
  assertEquals(1,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(17).toIncl(20).build());
  rt=rangeTombstones(partition);
  assertEquals(1,rt.size());
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(17).toIncl(18).build());
  rt=rangeTombstones(partition);
  assertEquals(1,rt.size());
  Slices.Builder sb=new Slices.Builder(cfs.getComparator());
  sb.add(Slice.Bound.create(cfs.getComparator(),true,true,1),Slice.Bound.create(cfs.getComparator(),false,true,10));
  sb.add(Slice.Bound.create(cfs.getComparator(),true,true,16),Slice.Bound.create(cfs.getComparator(),false,true,20));
  partition=Util.getOnlyPartitionUnfiltered(SinglePartitionReadCommand.create(cfs.metadata,FBUtilities.nowInSeconds(),Util.dk(key),sb.build()));
  rt=rangeTombstones(partition);
  assertEquals(2,rt.size());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void overlappingRangeTest() throws Exception {
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KSNAME);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CFNAME);
  String key="k2";
  UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,key).withTimestamp(0);
  for (int i=0; i < 20; i++)   builder.newRow(i).add("val",i);
  builder.applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,1,key).addRangeTombstone(5,15).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,1,key).addRangeTombstone(5,10).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,2,key).addRangeTombstone(5,8).build().applyUnsafe();
  cfs.forceBlockingFlush();
  Partition partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build());
  int nowInSec=FBUtilities.nowInSeconds();
  for (int i=0; i < 5; i++)   assertTrue("Row " + i + " should be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(nowInSec));
  for (int i=16; i < 20; i++)   assertTrue("Row " + i + " should be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(nowInSec));
  for (int i=5; i <= 15; i++)   assertFalse("Row " + i + " shouldn't be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(nowInSec));
  CompactionManager.instance.performMaximal(cfs,false);
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build());
  for (int i=0; i < 5; i++)   assertTrue("Row " + i + " should be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(FBUtilities.nowInSeconds()));
  for (int i=16; i < 20; i++)   assertTrue("Row " + i + " should be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(FBUtilities.nowInSeconds()));
  for (int i=5; i <= 15; i++)   assertFalse("Row " + i + " shouldn't be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(nowInSec));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testOverwritesToDeletedColumns() throws Exception {
  Keyspace table=Keyspace.open(KSNAME);
  ColumnFamilyStore cfs=table.getColumnFamilyStore(CFNAME);
  ByteBuffer key=ByteBufferUtil.bytes("k6");
  ByteBuffer indexedColumnName=ByteBufferUtil.bytes("val");
  cfs.truncateBlocking();
  cfs.disableAutoCompaction();
  ColumnDefinition cd=cfs.metadata.getColumnDefinition(indexedColumnName).copy();
  IndexMetadata indexDef=IndexMetadata.fromIndexTargets(cfs.metadata,Collections.singletonList(new IndexTarget(cd.name,IndexTarget.Type.VALUES)),"test_index",IndexMetadata.Kind.CUSTOM,ImmutableMap.of(IndexTarget.CUSTOM_INDEX_OPTION_NAME,StubIndex.class.getName()));
  if (!cfs.metadata.getIndexes().get("test_index").isPresent())   cfs.metadata.indexes(cfs.metadata.getIndexes().with(indexDef));
  Future<?> rebuild=cfs.indexManager.addIndex(indexDef);
  if (rebuild != null)   rebuild.get();
  StubIndex index=(StubIndex)cfs.indexManager.getIndexByName("test_index");
  index.reset();
  UpdateBuilder.create(cfs.metadata,key).withTimestamp(0).newRow(1).add("val",1).applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,1,key).addRangeTombstone(0,1).build().applyUnsafe();
  UpdateBuilder.create(cfs.metadata,key).withTimestamp(2).newRow(1).add("val",1).applyUnsafe();
  cfs.forceBlockingFlush();
  assertEquals(1,index.rowsInserted.size());
  assertEquals(1,index.rowsUpdated.size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRangeTombstoneCompaction() throws Exception {
  Keyspace table=Keyspace.open(KSNAME);
  ColumnFamilyStore cfs=table.getColumnFamilyStore(CFNAME);
  ByteBuffer key=ByteBufferUtil.bytes("k4");
  cfs.truncateBlocking();
  cfs.disableAutoCompaction();
  UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,key).withTimestamp(0);
  for (int i=0; i < 10; i+=2)   builder.newRow(i).add("val",i);
  builder.applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,0,key).addRangeTombstone(0,7).build().applyUnsafe();
  cfs.forceBlockingFlush();
  assertEquals(2,cfs.getLiveSSTables().size());
  CompactionManager.instance.performMaximal(cfs,false);
  assertEquals(1,cfs.getLiveSSTables().size());
  SSTableReader sstable=cfs.getLiveSSTables().iterator().next();
  try (UnfilteredPartitionIterator scanner=sstable.getScanner()){
    try (UnfilteredRowIterator iter=scanner.next()){
      Unfiltered u1=iter.next();
      assertTrue("Expecting open marker, got " + u1.toString(cfs.metadata),u1 instanceof RangeTombstoneMarker);
      Unfiltered u2=iter.next();
      assertTrue("Expecting close marker, got " + u2.toString(cfs.metadata),u2 instanceof RangeTombstoneMarker);
      Unfiltered u3=iter.next();
      assertTrue("Expecting row, got " + u3.toString(cfs.metadata),u3 instanceof Row);
    }
   }
 }

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test7808_2() throws ExecutionException, InterruptedException {
  Keyspace ks=Keyspace.open(KSNAME);
  ColumnFamilyStore cfs=ks.getColumnFamilyStore(CFNAME);
  cfs.metadata.gcGraceSeconds(2);
  String key="7808_2";
  UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,key).withTimestamp(0);
  for (int i=10; i < 20; i++)   builder.newRow(i).add("val",i);
  builder.apply();
  cfs.forceBlockingFlush();
  new Mutation(PartitionUpdate.fullPartitionDelete(cfs.metadata,Util.dk(key),0,0)).apply();
  UpdateBuilder.create(cfs.metadata,key).withTimestamp(1).newRow(5).add("val",5).apply();
  cfs.forceBlockingFlush();
  Thread.sleep(5);
  cfs.forceMajorCompaction();
  assertEquals(1,Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build()).rowCount());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void simpleQueryWithRangeTombstoneTest() throws Exception {
  Keyspace keyspace=Keyspace.open(KSNAME);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CFNAME);
  String key="k1";
  UpdateBuilder builder;
  builder=UpdateBuilder.create(cfs.metadata,key).withTimestamp(0);
  for (int i=0; i < 40; i+=2)   builder.newRow(i).add("val",i);
  builder.applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,1,key).addRangeTombstone(10,22).build().applyUnsafe();
  builder=UpdateBuilder.create(cfs.metadata,key).withTimestamp(2);
  for (int i=1; i < 40; i+=2)   builder.newRow(i).add("val",i);
  builder.applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,3,key).addRangeTombstone(19,27).build().applyUnsafe();
  int[] live=new int[]{4,9,11,17,28};
  int[] dead=new int[]{12,19,21,24,27};
  AbstractReadCommandBuilder.SinglePartitionBuilder cmdBuilder=Util.cmd(cfs,key);
  for (  int i : live)   cmdBuilder.includeRow(i);
  for (  int i : dead)   cmdBuilder.includeRow(i);
  Partition partition=Util.getOnlyPartitionUnfiltered(cmdBuilder.build());
  int nowInSec=FBUtilities.nowInSeconds();
  for (  int i : live)   assertTrue("Row " + i + " should be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(nowInSec));
  for (  int i : dead)   assertFalse("Row " + i + " shouldn't be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(nowInSec));
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).fromIncl(7).toIncl(30).build());
  for (  int i : new int[]{7,8,9,11,13,15,17,28,29,30})   assertTrue("Row " + i + " should be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(nowInSec));
  for (  int i : new int[]{10,12,14,16,18,19,20,21,22,23,24,25,26,27})   assertFalse("Row " + i + " shouldn't be live",partition.getRow(Clustering.make(bb(i))).hasLiveData(nowInSec));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test7810() throws ExecutionException, InterruptedException {
  Keyspace ks=Keyspace.open(KSNAME);
  ColumnFamilyStore cfs=ks.getColumnFamilyStore(CFNAME);
  cfs.metadata.gcGraceSeconds(2);
  String key="7810";
  UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,key).withTimestamp(0);
  for (int i=10; i < 20; i++)   builder.newRow(i).add("val",i);
  builder.apply();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,1,key).addRangeTombstone(10,11).build().apply();
  cfs.forceBlockingFlush();
  Thread.sleep(5);
  cfs.forceMajorCompaction();
  assertEquals(8,Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build()).rowCount());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void reverseQueryTest() throws Exception {
  Keyspace table=Keyspace.open(KSNAME);
  ColumnFamilyStore cfs=table.getColumnFamilyStore(CFNAME);
  String key="k3";
  UpdateBuilder.create(cfs.metadata,key).withTimestamp(0).newRow(2).add("val",2).applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,1,key).addRangeTombstone(0,10).build().applyUnsafe();
  UpdateBuilder.create(cfs.metadata,key).withTimestamp(2).newRow(1).add("val",1).applyUnsafe();
  cfs.forceBlockingFlush();
  FilteredPartition partition=Util.getOnlyPartition(Util.cmd(cfs,key).build());
  assertTrue(partition.rowCount() > 0);
  int last=i(partition.unfilteredIterator(ColumnFilter.all(cfs.metadata),Slices.ALL,true).next().clustering().get(0));
  assertEquals("Last column should be column 1 since column 2 has been deleted",1,last);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.ReadCommandTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPartitionRangeAbort() throws Exception {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(CF1);
  new RowUpdateBuilder(cfs.metadata,0,ByteBufferUtil.bytes("key1")).clustering("Column1").add("val",ByteBufferUtil.bytes("abcd")).build().apply();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,0,ByteBufferUtil.bytes("key2")).clustering("Column1").add("val",ByteBufferUtil.bytes("abcd")).build().apply();
  ReadCommand readCommand=Util.cmd(cfs).build();
  assertEquals(2,Util.getAll(readCommand).size());
  readCommand.abort();
  assertEquals(0,Util.getAll(readCommand).size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSinglePartitionSliceAbort() throws Exception {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(CF2);
  cfs.truncateBlocking();
  new RowUpdateBuilder(cfs.metadata,0,ByteBufferUtil.bytes("key")).clustering("cc").add("a",ByteBufferUtil.bytes("abcd")).build().apply();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,0,ByteBufferUtil.bytes("key")).clustering("dd").add("a",ByteBufferUtil.bytes("abcd")).build().apply();
  ReadCommand readCommand=Util.cmd(cfs,Util.dk("key")).build();
  List<FilteredPartition> partitions=Util.getAll(readCommand);
  assertEquals(1,partitions.size());
  assertEquals(2,partitions.get(0).rowCount());
  readCommand.abort();
  assertEquals(0,Util.getAll(readCommand).size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSinglePartitionNamesAbort() throws Exception {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(CF2);
  cfs.truncateBlocking();
  new RowUpdateBuilder(cfs.metadata,0,ByteBufferUtil.bytes("key")).clustering("cc").add("a",ByteBufferUtil.bytes("abcd")).build().apply();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,0,ByteBufferUtil.bytes("key")).clustering("dd").add("a",ByteBufferUtil.bytes("abcd")).build().apply();
  ReadCommand readCommand=Util.cmd(cfs,Util.dk("key")).includeRow("cc").includeRow("dd").build();
  List<FilteredPartition> partitions=Util.getAll(readCommand);
  assertEquals(1,partitions.size());
  assertEquals(2,partitions.get(0).rowCount());
  readCommand.abort();
  assertEquals(0,Util.getAll(readCommand).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RecoveryManagerMissingHeaderTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testMissingHeader() throws IOException {
  Keyspace keyspace1=Keyspace.open(KEYSPACE1);
  Keyspace keyspace2=Keyspace.open(KEYSPACE2);
  DecoratedKey dk=Util.dk("keymulti");
  UnfilteredRowIterator upd1=Util.apply(new RowUpdateBuilder(keyspace1.getColumnFamilyStore(CF_STANDARD1).metadata,1L,0,"keymulti").clustering("col1").add("val","1").build());
  UnfilteredRowIterator upd2=Util.apply(new RowUpdateBuilder(keyspace2.getColumnFamilyStore(CF_STANDARD3).metadata,1L,0,"keymulti").clustering("col1").add("val","1").build());
  keyspace1.getColumnFamilyStore("Standard1").clearUnsafe();
  keyspace2.getColumnFamilyStore("Standard3").clearUnsafe();
  for (  File file : new File(DatabaseDescriptor.getCommitLogLocation()).listFiles()) {
    if (file.getName().endsWith(".header"))     FileUtils.deleteWithConfirm(file);
  }
  CommitLog.instance.resetUnsafe(false);
  Assert.assertTrue(Util.equal(upd1,Util.getOnlyPartitionUnfiltered(Util.cmd(keyspace1.getColumnFamilyStore(CF_STANDARD1),dk).build()).unfilteredIterator()));
  Assert.assertTrue(Util.equal(upd2,Util.getOnlyPartitionUnfiltered(Util.cmd(keyspace2.getColumnFamilyStore(CF_STANDARD3),dk).build()).unfilteredIterator()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RecoveryManagerTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testRecoverBlocksOnBytesOutstanding() throws Exception {
  long originalMaxOutstanding=CommitLogReplayer.MAX_OUTSTANDING_REPLAY_BYTES;
  CommitLogReplayer.MAX_OUTSTANDING_REPLAY_BYTES=1;
  CommitLogReplayer.MutationInitiator originalInitiator=CommitLogReplayer.mutationInitiator;
  CommitLogReplayer.mutationInitiator=mockInitiator;
  try {
    CommitLog.instance.resetUnsafe(true);
    Keyspace keyspace1=Keyspace.open(KEYSPACE1);
    Keyspace keyspace2=Keyspace.open(KEYSPACE2);
    UnfilteredRowIterator upd1=Util.apply(new RowUpdateBuilder(keyspace1.getColumnFamilyStore(CF_STANDARD1).metadata,1L,0,"keymulti").clustering("col1").add("val","1").build());
    UnfilteredRowIterator upd2=Util.apply(new RowUpdateBuilder(keyspace2.getColumnFamilyStore(CF_STANDARD3).metadata,1L,0,"keymulti").clustering("col2").add("val","1").build());
    keyspace1.getColumnFamilyStore("Standard1").clearUnsafe();
    keyspace2.getColumnFamilyStore("Standard3").clearUnsafe();
    DecoratedKey dk=Util.dk("keymulti");
    Assert.assertTrue(Util.getAllUnfiltered(Util.cmd(keyspace1.getColumnFamilyStore(CF_STANDARD1),dk).build()).isEmpty());
    Assert.assertTrue(Util.getAllUnfiltered(Util.cmd(keyspace2.getColumnFamilyStore(CF_STANDARD3),dk).build()).isEmpty());
    final AtomicReference<Throwable> err=new AtomicReference<Throwable>();
    Thread t=new Thread(){
      @Override public void run(){
        try {
          CommitLog.instance.resetUnsafe(false);
        }
 catch (        Throwable t) {
          err.set(t);
        }
      }
    }
;
    t.start();
    Assert.assertTrue(blocked.tryAcquire(1,20,TimeUnit.SECONDS));
    Thread.sleep(100);
    Assert.assertTrue(t.isAlive());
    blocker.release(Integer.MAX_VALUE);
    t.join(20 * 1000);
    if (err.get() != null)     throw new RuntimeException(err.get());
    if (t.isAlive()) {
      Throwable toPrint=new Throwable();
      toPrint.setStackTrace(Thread.getAllStackTraces().get(t));
      toPrint.printStackTrace(System.out);
    }
    Assert.assertFalse(t.isAlive());
    Assert.assertTrue(Util.equal(upd1,Util.getOnlyPartitionUnfiltered(Util.cmd(keyspace1.getColumnFamilyStore(CF_STANDARD1),dk).build()).unfilteredIterator()));
    Assert.assertTrue(Util.equal(upd2,Util.getOnlyPartitionUnfiltered(Util.cmd(keyspace2.getColumnFamilyStore(CF_STANDARD3),dk).build()).unfilteredIterator()));
  }
  finally {
    CommitLogReplayer.mutationInitiator=originalInitiator;
    CommitLogReplayer.MAX_OUTSTANDING_REPLAY_BYTES=originalMaxOutstanding;
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testRecoverCounter() throws IOException {
  CommitLog.instance.resetUnsafe(true);
  Keyspace keyspace1=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace1.getColumnFamilyStore(CF_COUNTER1);
  for (int i=0; i < 10; ++i) {
    new CounterMutation(new RowUpdateBuilder(cfs.metadata,1L,0,"key").clustering("cc").add("val",CounterContext.instance().createLocal(1L)).build(),ConsistencyLevel.ALL).apply();
  }
  keyspace1.getColumnFamilyStore("Counter1").clearUnsafe();
  int replayed=CommitLog.instance.resetUnsafe(false);
  ColumnDefinition counterCol=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("val"));
  Row row=Util.getOnlyRow(Util.cmd(cfs).includeRow("cc").columns("val").build());
  assertEquals(10L,CounterContext.instance().total(row.getCell(counterCol).value()));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testOne() throws IOException {
  CommitLog.instance.resetUnsafe(true);
  Keyspace keyspace1=Keyspace.open(KEYSPACE1);
  Keyspace keyspace2=Keyspace.open(KEYSPACE2);
  UnfilteredRowIterator upd1=Util.apply(new RowUpdateBuilder(keyspace1.getColumnFamilyStore(CF_STANDARD1).metadata,1L,0,"keymulti").clustering("col1").add("val","1").build());
  UnfilteredRowIterator upd2=Util.apply(new RowUpdateBuilder(keyspace2.getColumnFamilyStore(CF_STANDARD3).metadata,1L,0,"keymulti").clustering("col2").add("val","1").build());
  keyspace1.getColumnFamilyStore("Standard1").clearUnsafe();
  keyspace2.getColumnFamilyStore("Standard3").clearUnsafe();
  CommitLog.instance.resetUnsafe(false);
  DecoratedKey dk=Util.dk("keymulti");
  Assert.assertTrue(Util.equal(upd1,Util.getOnlyPartitionUnfiltered(Util.cmd(keyspace1.getColumnFamilyStore(CF_STANDARD1),dk).build()).unfilteredIterator()));
  Assert.assertTrue(Util.equal(upd2,Util.getOnlyPartitionUnfiltered(Util.cmd(keyspace2.getColumnFamilyStore(CF_STANDARD3),dk).build()).unfilteredIterator()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RecoveryManagerTruncateTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testTruncate() throws IOException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore("Standard1");
  new RowUpdateBuilder(cfs.metadata,0,"key1").clustering("cc").add("val","val1").build().applyUnsafe();
  assertTrue(Util.getAll(Util.cmd(cfs).build()).size() > 0);
  cfs.truncateBlocking();
  assert 0 != CommitLog.instance.resetUnsafe(false);
  Util.assertEmptyUnfiltered(Util.cmd(cfs).build());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RepairedDataTombstonesTest </h4><pre class="type-6 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readTestPartitionTombstones() throws Throwable {
  createTable("create table %s (id int, id2 int, t text, t2 text, primary key (id, id2)) with gc_grace_seconds=0 and compaction = {'class':'SizeTieredCompactionStrategy', 'only_purge_repaired_tombstones':true}");
  for (int i=0; i < 10; i++) {
    execute("delete from %s where id=?",i);
  }
  flush();
  SSTableReader repairedSSTable=getCurrentColumnFamilyStore().getSSTables(SSTableSet.LIVE).iterator().next();
  repair(getCurrentColumnFamilyStore(),repairedSSTable);
  Thread.sleep(2000);
  for (int i=10; i < 20; i++) {
    execute("delete from %s where id=?",i);
  }
  flush();
  Thread.sleep(1000);
  ReadCommand cmd=Util.cmd(getCurrentColumnFamilyStore()).build();
  int partitionsFound=0;
  try (ReadExecutionController executionController=cmd.executionController();UnfilteredPartitionIterator iterator=cmd.executeLocally(executionController)){
    while (iterator.hasNext()) {
      partitionsFound++;
      UnfilteredRowIterator rowIter=iterator.next();
      int val=ByteBufferUtil.toInt(rowIter.partitionKey().getKey());
      assertTrue("val=" + val,val >= 10 && val < 20);
    }
  }
   assertEquals(10,partitionsFound);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RowCacheTest </h4><pre class="type-6 type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testRowCache() throws Exception {
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE_CACHED);
  ColumnFamilyStore cachedStore=keyspace.getColumnFamilyStore(CF_CACHED);
  CacheService.instance.invalidateRowCache();
  CacheService.instance.setRowCacheCapacityInMB(1);
  SchemaLoader.insertData(KEYSPACE_CACHED,CF_CACHED,0,100);
  for (int i=0; i < 100; i++) {
    DecoratedKey key=Util.dk("key" + i);
    Util.getAll(Util.cmd(cachedStore,key).build());
    assert CacheService.instance.rowCache.size() == i + 1;
    assert cachedStore.containsCachedParition(key);
    CachedPartition cp=cachedStore.getRawCachedPartition(key);
    try (UnfilteredRowIterator ai=cp.unfilteredIterator(ColumnFilter.selection(cp.columns()),Slices.ALL,false)){
      assert ai.hasNext();
      Row r=(Row)ai.next();
      assertFalse(ai.hasNext());
      Iterator<Cell> ci=r.cells().iterator();
      assert (ci.hasNext());
      Cell cell=ci.next();
      assert cell.column().name.bytes.equals(ByteBufferUtil.bytes("val"));
      assert cell.value().equals(ByteBufferUtil.bytes("val" + i));
    }
   }
  SchemaLoader.insertData(KEYSPACE_CACHED,CF_CACHED,100,10);
  for (int i=100; i < 110; i++) {
    DecoratedKey key=Util.dk("key" + i);
    Util.getAll(Util.cmd(cachedStore,key).build());
    assert cachedStore.containsCachedParition(key);
    CachedPartition cp=cachedStore.getRawCachedPartition(key);
    try (UnfilteredRowIterator ai=cp.unfilteredIterator(ColumnFilter.selection(cp.columns()),Slices.ALL,false)){
      assert ai.hasNext();
      Row r=(Row)ai.next();
      assertFalse(ai.hasNext());
      Iterator<Cell> ci=r.cells().iterator();
      assert (ci.hasNext());
      Cell cell=ci.next();
      assert cell.column().name.bytes.equals(ByteBufferUtil.bytes("val"));
      assert cell.value().equals(ByteBufferUtil.bytes("val" + i));
    }
   }
  int keysLeft=109;
  for (int i=109; i >= 10; i--) {
    cachedStore.invalidateCachedPartition(Util.dk("key" + i));
    assert CacheService.instance.rowCache.size() == keysLeft;
    keysLeft--;
  }
  CacheService.instance.setRowCacheCapacityInMB(0);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testRoundTrip() throws Exception {
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE_CACHED);
  String cf="CachedIntCF";
  ColumnFamilyStore cachedStore=keyspace.getColumnFamilyStore(cf);
  long startRowCacheHits=cachedStore.metric.rowCacheHit.getCount();
  long startRowCacheOutOfRange=cachedStore.metric.rowCacheHitOutOfRange.getCount();
  CacheService.instance.invalidateRowCache();
  CacheService.instance.setRowCacheCapacityInMB(1);
  ByteBuffer key=ByteBufferUtil.bytes("rowcachekey");
  DecoratedKey dk=cachedStore.decorateKey(key);
  RowCacheKey rck=new RowCacheKey(cachedStore.metadata.ksAndCFName,dk);
  RowUpdateBuilder rub=new RowUpdateBuilder(cachedStore.metadata,System.currentTimeMillis(),key);
  rub.clustering(String.valueOf(0));
  rub.add("val",ByteBufferUtil.bytes("val" + 0));
  rub.build().applyUnsafe();
  Util.getAll(Util.cmd(cachedStore,dk).withLimit(1).build());
  assertEquals(startRowCacheHits,cachedStore.metric.rowCacheHit.getCount());
  Util.getAll(Util.cmd(cachedStore,dk).withLimit(1).build());
  assertEquals(++startRowCacheHits,cachedStore.metric.rowCacheHit.getCount());
  assertEquals(startRowCacheOutOfRange,cachedStore.metric.rowCacheHitOutOfRange.getCount());
  CachedPartition cachedCf=(CachedPartition)CacheService.instance.rowCache.get(rck);
  assertEquals(1,cachedCf.rowCount());
  for (  Unfiltered unfiltered : Util.once(cachedCf.unfilteredIterator(ColumnFilter.selection(cachedCf.columns()),Slices.ALL,false))) {
    Row r=(Row)unfiltered;
    for (    ColumnData c : r) {
      assertEquals(((Cell)c).value(),ByteBufferUtil.bytes("val" + 0));
    }
  }
  cachedStore.truncateBlocking();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testRowCacheRange(){
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE_CACHED);
  String cf="CachedIntCF";
  ColumnFamilyStore cachedStore=keyspace.getColumnFamilyStore(cf);
  long startRowCacheHits=cachedStore.metric.rowCacheHit.getCount();
  long startRowCacheOutOfRange=cachedStore.metric.rowCacheHitOutOfRange.getCount();
  CacheService.instance.invalidateRowCache();
  CacheService.instance.setRowCacheCapacityInMB(1);
  ByteBuffer key=ByteBufferUtil.bytes("rowcachekey");
  DecoratedKey dk=cachedStore.decorateKey(key);
  RowCacheKey rck=new RowCacheKey(cachedStore.metadata.ksAndCFName,dk);
  String values[]=new String[200];
  for (int i=0; i < 200; i++) {
    RowUpdateBuilder rub=new RowUpdateBuilder(cachedStore.metadata,System.currentTimeMillis(),key);
    rub.clustering(String.valueOf(i));
    values[i]="val" + i;
    rub.add("val",ByteBufferUtil.bytes(values[i]));
    rub.build().applyUnsafe();
  }
  Arrays.sort(values);
  Util.getAll(Util.cmd(cachedStore,dk).withLimit(10).build());
  assertEquals(startRowCacheHits,cachedStore.metric.rowCacheHit.getCount());
  Util.getAll(Util.cmd(cachedStore,dk).withLimit(10).build());
  assertEquals(++startRowCacheHits,cachedStore.metric.rowCacheHit.getCount());
  assertEquals(startRowCacheOutOfRange,cachedStore.metric.rowCacheHitOutOfRange.getCount());
  Util.getAll(Util.cmd(cachedStore,dk).fromIncl(String.valueOf(210)).toExcl(String.valueOf(215)).build());
  assertEquals(startRowCacheHits,cachedStore.metric.rowCacheHit.getCount());
  assertEquals(++startRowCacheOutOfRange,cachedStore.metric.rowCacheHitOutOfRange.getCount());
  Util.getAll(Util.cmd(cachedStore,dk).withLimit(101).build());
  assertEquals(startRowCacheHits,cachedStore.metric.rowCacheHit.getCount());
  assertEquals(++startRowCacheOutOfRange,cachedStore.metric.rowCacheHitOutOfRange.getCount());
  CacheService.instance.invalidateRowCache();
  Util.getAll(Util.cmd(cachedStore,dk).withLimit(105).build());
  assertEquals(startRowCacheHits,cachedStore.metric.rowCacheHit.getCount());
  CachedPartition cachedCf=(CachedPartition)CacheService.instance.rowCache.get(rck);
  assertEquals(cachedCf.rowCount(),100);
  int i=0;
  for (  Unfiltered unfiltered : Util.once(cachedCf.unfilteredIterator(ColumnFilter.selection(cachedCf.columns()),Slices.ALL,false))) {
    Row r=(Row)unfiltered;
    assertEquals(r.clustering().get(0),ByteBufferUtil.bytes(values[i].substring(3)));
    for (    ColumnData c : r) {
      assertEquals(((Cell)c).value(),ByteBufferUtil.bytes(values[i]));
    }
    i++;
  }
  cachedStore.truncateBlocking();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInvalidateRowCache() throws Exception {
  StorageService.instance.initServer(0);
  CacheService.instance.setRowCacheCapacityInMB(1);
  rowCacheLoad(100,Integer.MAX_VALUE,1000);
  ColumnFamilyStore store=Keyspace.open(KEYSPACE_CACHED).getColumnFamilyStore(CF_CACHED);
  assertEquals(CacheService.instance.rowCache.size(),100);
  ArrayList<Bounds<Token>> subranges=getBounds(20);
  ArrayList<Bounds<Token>> boundsToInvalidate=Lists.newArrayList(subranges.get(0),subranges.get(2),subranges.get(4));
  int invalidatedKeys=store.invalidateRowCache(boundsToInvalidate);
  assertEquals(60,invalidatedKeys);
  assertEquals(CacheService.instance.rowCache.size(),40);
  CacheService.instance.setRowCacheCapacityInMB(0);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSSTablesPerReadHistogramWhenRowCache(){
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE_CACHED);
  ColumnFamilyStore cachedStore=keyspace.getColumnFamilyStore(CF_CACHED);
  CacheService.instance.invalidateRowCache();
  CacheService.instance.setRowCacheCapacityInMB(1);
  SchemaLoader.insertData(KEYSPACE_CACHED,CF_CACHED,0,100);
  cachedStore.forceBlockingFlush();
  ((ClearableHistogram)cachedStore.metric.sstablesPerReadHistogram.cf).clear();
  for (int i=0; i < 100; i++) {
    DecoratedKey key=Util.dk("key" + i);
    Util.getAll(Util.cmd(cachedStore,key).build());
    long count_before=cachedStore.metric.sstablesPerReadHistogram.cf.getCount();
    Util.getAll(Util.cmd(cachedStore,key).build());
    long count_after=cachedStore.metric.sstablesPerReadHistogram.cf.getCount();
    double belowMedian=cachedStore.metric.sstablesPerReadHistogram.cf.getSnapshot().getValue(0.49D);
    double mean_after=cachedStore.metric.sstablesPerReadHistogram.cf.getSnapshot().getMean();
    assertEquals("SSTablePerReadHistogram should be updated even key found in row cache",count_before + 1,count_after);
    assertTrue("In half of requests we have not touched SSTables, " + "so 49 percentile (" + belowMedian + ") must be strongly less than 0.9",belowMedian < 0.9D);
    assertTrue("In half of requests we have not touched SSTables, " + "so mean value (" + mean_after + ") must be strongly less than 1, but greater than 0",mean_after < 0.999D && mean_after > 0.001D);
  }
  assertEquals("Min value of SSTablesPerRead should be zero",0,cachedStore.metric.sstablesPerReadHistogram.cf.getSnapshot().getMin());
  CacheService.instance.setRowCacheCapacityInMB(0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RowIndexEntryTest </h4><pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerializedSize() throws Throwable {
  String tableName=createTable("CREATE TABLE %s (a int, b text, c int, PRIMARY KEY(a, b))");
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(tableName);
  final RowIndexEntry simple=new RowIndexEntry(123);
  DataOutputBuffer buffer=new DataOutputBuffer();
  SerializationHeader header=new SerializationHeader(true,cfs.metadata,cfs.metadata.partitionColumns(),EncodingStats.NO_STATS);
  RowIndexEntry.Serializer serializer=new RowIndexEntry.Serializer(cfs.metadata,BigFormat.latestVersion,header);
  serializer.serialize(simple,buffer);
  assertEquals(buffer.getLength(),serializer.serializedSize(simple));
  for (int i=0; i <= DatabaseDescriptor.getColumnIndexSize() / 4; i++)   execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?)",0,"" + i,i);
  ImmutableBTreePartition partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs).build());
  File tempFile=File.createTempFile("row_index_entry_test",null);
  tempFile.deleteOnExit();
  SequentialWriter writer=SequentialWriter.open(tempFile);
  ColumnIndex columnIndex=ColumnIndex.writeAndBuildIndex(partition.unfilteredIterator(),writer,header,Collections.emptySet(),BigFormat.latestVersion);
  RowIndexEntry<IndexHelper.IndexInfo> withIndex=RowIndexEntry.create(0xdeadbeef,DeletionTime.LIVE,columnIndex);
  IndexHelper.IndexInfo.Serializer indexSerializer=new IndexHelper.IndexInfo.Serializer(cfs.metadata,BigFormat.latestVersion,header);
  assertTrue(columnIndex.columnsIndex.size() >= 3);
  buffer=new DataOutputBuffer();
  serializer.serialize(withIndex,buffer);
  assertEquals(buffer.getLength(),serializer.serializedSize(withIndex));
  ByteBuffer bb=buffer.buffer();
  DataInputBuffer input=new DataInputBuffer(bb,false);
  serializationCheck(withIndex,indexSerializer,bb,input);
  buffer=new DataOutputBuffer(){
    public boolean hasPosition(){
      return false;
    }
    public long position(){
      throw new UnsupportedOperationException();
    }
  }
;
  serializer.serialize(withIndex,buffer);
  bb=buffer.buffer();
  input=new DataInputBuffer(bb,false);
  serializationCheck(withIndex,indexSerializer,bb,input);
  bb=buffer.buffer();
  input=new DataInputBuffer(bb,false);
  RowIndexEntry.Serializer.skip(input,BigFormat.latestVersion);
  Assert.assertEquals(0,bb.remaining());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testArtificialIndexOf() throws IOException {
  CFMetaData cfMeta=CFMetaData.compile("CREATE TABLE pipe.dev_null (pk bigint, ck bigint, val text, PRIMARY KEY(pk, ck))","foo");
  DeletionTime deletionInfo=new DeletionTime(FBUtilities.timestampMicros(),FBUtilities.nowInSeconds());
  SerializationHeader header=new SerializationHeader(true,cfMeta,cfMeta.partitionColumns(),EncodingStats.NO_STATS);
  IndexHelper.IndexInfo.Serializer indexSerializer=new IndexHelper.IndexInfo.Serializer(cfMeta,BigFormat.latestVersion,header);
  DataOutputBuffer dob=new DataOutputBuffer();
  dob.writeUnsignedVInt(0);
  DeletionTime.serializer.serialize(DeletionTime.LIVE,dob);
  dob.writeUnsignedVInt(3);
  int off0=dob.getLength();
  indexSerializer.serialize(new IndexHelper.IndexInfo(cn(0L),cn(5L),0,0,deletionInfo),dob);
  int off1=dob.getLength();
  indexSerializer.serialize(new IndexHelper.IndexInfo(cn(10L),cn(15L),0,0,deletionInfo),dob);
  int off2=dob.getLength();
  indexSerializer.serialize(new IndexHelper.IndexInfo(cn(20L),cn(25L),0,0,deletionInfo),dob);
  dob.writeInt(off0);
  dob.writeInt(off1);
  dob.writeInt(off2);
  @SuppressWarnings("resource") DataOutputBuffer dobRie=new DataOutputBuffer();
  dobRie.writeUnsignedVInt(42L);
  dobRie.writeUnsignedVInt(dob.getLength());
  dobRie.write(dob.buffer());
  ByteBuffer buf=dobRie.buffer();
  RowIndexEntry<IndexHelper.IndexInfo> rie=new RowIndexEntry.Serializer(cfMeta,BigFormat.latestVersion,header).deserialize(new DataInputBuffer(buf,false));
  Assert.assertEquals(42L,rie.position);
  Assert.assertEquals(0,IndexHelper.indexFor(cn(-1L),rie.columnsIndex(),comp,false,-1));
  Assert.assertEquals(0,IndexHelper.indexFor(cn(5L),rie.columnsIndex(),comp,false,-1));
  Assert.assertEquals(1,IndexHelper.indexFor(cn(12L),rie.columnsIndex(),comp,false,-1));
  Assert.assertEquals(2,IndexHelper.indexFor(cn(17L),rie.columnsIndex(),comp,false,-1));
  Assert.assertEquals(3,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,false,-1));
  Assert.assertEquals(3,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,false,0));
  Assert.assertEquals(3,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,false,1));
  Assert.assertEquals(3,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,false,2));
  Assert.assertEquals(3,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,false,3));
  Assert.assertEquals(-1,IndexHelper.indexFor(cn(-1L),rie.columnsIndex(),comp,true,-1));
  Assert.assertEquals(0,IndexHelper.indexFor(cn(5L),rie.columnsIndex(),comp,true,3));
  Assert.assertEquals(0,IndexHelper.indexFor(cn(5L),rie.columnsIndex(),comp,true,2));
  Assert.assertEquals(1,IndexHelper.indexFor(cn(17L),rie.columnsIndex(),comp,true,3));
  Assert.assertEquals(2,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,true,3));
  Assert.assertEquals(2,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,true,4));
  Assert.assertEquals(1,IndexHelper.indexFor(cn(12L),rie.columnsIndex(),comp,true,3));
  Assert.assertEquals(1,IndexHelper.indexFor(cn(12L),rie.columnsIndex(),comp,true,2));
  Assert.assertEquals(1,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,true,1));
  Assert.assertEquals(2,IndexHelper.indexFor(cn(100L),rie.columnsIndex(),comp,true,2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RowIterationTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testRowIterationDeletion() throws Throwable {
  String tableName=createTable("CREATE TABLE %s (a int PRIMARY KEY, b int)");
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(tableName);
  execute("DELETE FROM %s USING TIMESTAMP ? WHERE a = ?",0L,0);
  cfs.forceBlockingFlush();
  assertFalse(Util.getOnlyPartitionUnfiltered(Util.cmd(cfs).build()).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRowIterationDeletionTime() throws Throwable {
  String tableName=createTable("CREATE TABLE %s (a int PRIMARY KEY, b int)");
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(tableName);
  execute("INSERT INTO %s (a, b) VALUES (?, ?) USING TIMESTAMP ?",0,0,0L);
  execute("DELETE FROM %s USING TIMESTAMP ? WHERE a = ?",0L,0);
  cfs.forceBlockingFlush();
  execute("INSERT INTO %s (a, b) VALUES (?, ?) USING TIMESTAMP ?",0,0,1L);
  execute("DELETE FROM %s USING TIMESTAMP ? WHERE a = ?",1L,0);
  int localDeletionTime=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs).build()).partitionLevelDeletion().localDeletionTime();
  cfs.forceBlockingFlush();
  DeletionTime dt=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs).build()).partitionLevelDeletion();
  assertEquals(1L,dt.markedForDeleteAt());
  assertEquals(localDeletionTime,dt.localDeletionTime());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.RowTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExpiringColumnExpiration() throws IOException {
  int ttl=1;
  ColumnDefinition def=cfm.getColumnDefinition(new ColumnIdentifier("a",true));
  Cell cell=BufferCell.expiring(def,0,ttl,nowInSeconds,((AbstractType)def.cellValueType()).decompose("a1"));
  PartitionUpdate update=PartitionUpdate.singleRowUpdate(cfm,dk,BTreeRow.singleCellRow(cfm.comparator.make("c1"),cell));
  new Mutation(update).applyUnsafe();
  Row row=Util.getOnlyRow(Util.cmd(cfs,dk).includeRow("c1").withNowInSeconds(nowInSeconds).build());
  assertEquals("a1",ByteBufferUtil.string(row.getCell(def).value()));
  Util.assertEmpty(Util.cmd(cfs,dk).includeRow("c1").withNowInSeconds(nowInSeconds + ttl + 1).build());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMergeRangeTombstones() throws InterruptedException {
  PartitionUpdate update1=new PartitionUpdate(cfm,dk,cfm.partitionColumns(),1);
  writeRangeTombstone(update1,"1","11",123,123);
  writeRangeTombstone(update1,"2","22",123,123);
  writeRangeTombstone(update1,"3","31",123,123);
  writeRangeTombstone(update1,"4","41",123,123);
  PartitionUpdate update2=new PartitionUpdate(cfm,dk,cfm.partitionColumns(),1);
  writeRangeTombstone(update2,"1","11",123,123);
  writeRangeTombstone(update2,"111","112",1230,123);
  writeRangeTombstone(update2,"2","24",123,123);
  writeRangeTombstone(update2,"3","31",1230,123);
  writeRangeTombstone(update2,"4","41",123,1230);
  writeRangeTombstone(update2,"5","51",123,1230);
  try (UnfilteredRowIterator merged=UnfilteredRowIterators.merge(ImmutableList.of(update1.unfilteredIterator(),update2.unfilteredIterator()),nowInSeconds)){
    Object[][] expected=new Object[][]{{"1","11",123l,123},{"111","112",1230l,123},{"2","24",123l,123},{"3","31",1230l,123},{"4","41",123l,1230},{"5","51",123l,1230}};
    int i=0;
    while (merged.hasNext()) {
      RangeTombstoneBoundMarker openMarker=(RangeTombstoneBoundMarker)merged.next();
      Slice.Bound openBound=openMarker.clustering();
      DeletionTime openDeletion=new DeletionTime(openMarker.deletionTime().markedForDeleteAt(),openMarker.deletionTime().localDeletionTime());
      RangeTombstoneBoundMarker closeMarker=(RangeTombstoneBoundMarker)merged.next();
      Slice.Bound closeBound=closeMarker.clustering();
      DeletionTime closeDeletion=new DeletionTime(closeMarker.deletionTime().markedForDeleteAt(),closeMarker.deletionTime().localDeletionTime());
      assertEquals(openDeletion,closeDeletion);
      assertRangeTombstoneMarkers(openBound,closeBound,openDeletion,expected[i++]);
    }
  }
 }

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolve(){
  ColumnDefinition defA=cfm.getColumnDefinition(new ColumnIdentifier("a",true));
  ColumnDefinition defB=cfm.getColumnDefinition(new ColumnIdentifier("b",true));
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSeconds);
  builder.newRow(cfm.comparator.make("c1"));
  writeSimpleCellValue(builder,cfm,defA,"a1",0);
  writeSimpleCellValue(builder,cfm,defA,"a2",1);
  writeSimpleCellValue(builder,cfm,defB,"b1",1);
  Row row=builder.build();
  PartitionUpdate update=PartitionUpdate.singleRowUpdate(cfm,dk,row);
  Unfiltered unfiltered=update.unfilteredIterator().next();
  assertTrue(unfiltered.kind() == Unfiltered.Kind.ROW);
  row=(Row)unfiltered;
  assertEquals("a2",defA.cellValueType().getString(row.getCell(defA).value()));
  assertEquals("b1",defB.cellValueType().getString(row.getCell(defB).value()));
  assertEquals(2,row.columns().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.ScrubTest </h4><pre class="type-7 type-13 type-15 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScrubCorruptedCounterRow() throws IOException, WriteTimeoutException {
  int numPartitions=1000;
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(COUNTER_CF);
  cfs.clearUnsafe();
  fillCounterCF(cfs,numPartitions);
  assertOrderedAll(cfs,numPartitions);
  assertEquals(1,cfs.getLiveSSTables().size());
  SSTableReader sstable=cfs.getLiveSSTables().iterator().next();
  overrideWithGarbage(sstable,ByteBufferUtil.bytes("0"),ByteBufferUtil.bytes("1"));
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(Arrays.asList(sstable),OperationType.SCRUB);Scrubber scrubber=new Scrubber(cfs,txn,false,false,true)){
    scrubber.scrub();
    fail("Expected a CorruptSSTableException to be thrown");
  }
 catch (  IOError err) {
  }
  Scrubber.ScrubResult scrubResult;
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(Arrays.asList(sstable),OperationType.SCRUB);Scrubber scrubber=new Scrubber(cfs,txn,true,false,true)){
    scrubResult=scrubber.scrubWithResult();
  }
   assertNotNull(scrubResult);
  boolean compression=Boolean.parseBoolean(System.getProperty("cassandra.test.compression","false"));
  if (compression) {
    assertEquals(0,scrubResult.emptyRows);
    assertEquals(numPartitions,scrubResult.badRows + scrubResult.goodRows);
    assertTrue(scrubResult.goodRows >= scrubResult.badRows * 2);
  }
 else {
    assertEquals(0,scrubResult.emptyRows);
    assertEquals(1,scrubResult.badRows);
    assertEquals(numPartitions - 1,scrubResult.goodRows);
  }
  assertEquals(1,cfs.getLiveSSTables().size());
  assertOrderedAll(cfs,scrubResult.goodRows);
}

</code></pre>

<br>
<pre class="type-7 type-15 type-4 type-19 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScrubCorruptedRowInSmallFile() throws IOException, WriteTimeoutException {
  assumeTrue(!Boolean.parseBoolean(System.getProperty("cassandra.test.compression","false")));
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(COUNTER_CF);
  cfs.clearUnsafe();
  fillCounterCF(cfs,2);
  assertOrderedAll(cfs,2);
  SSTableReader sstable=cfs.getLiveSSTables().iterator().next();
  overrideWithGarbage(sstable,ByteBufferUtil.bytes("0"),ByteBufferUtil.bytes("1"));
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(Arrays.asList(sstable),OperationType.SCRUB);Scrubber scrubber=new Scrubber(cfs,txn,false,false,true)){
    scrubber.scrub();
    fail("Expected a CorruptSSTableException to be thrown");
  }
 catch (  IOError err) {
  }
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(Arrays.asList(sstable),OperationType.SCRUB);Scrubber scrubber=new Scrubber(cfs,txn,true,false,true)){
    scrubber.scrub();
    scrubber.close();
  }
   assertEquals(1,cfs.getLiveSSTables().size());
  assertOrderedAll(cfs,1);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * For CASSANDRA-6892 too, check that for a compact table with one cluster column, we can insert whatever
 * we want as value for the clustering column, including something that would conflict with a CQL column definition.
 */
@Test public void testValidationCompactStorage() throws Exception {
  QueryProcessor.process(String.format("CREATE TABLE \"%s\".test_compact_dynamic_columns (a int, b text, c text, PRIMARY KEY (a, b)) WITH COMPACT STORAGE",KEYSPACE),ConsistencyLevel.ONE);
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore("test_compact_dynamic_columns");
  QueryProcessor.executeInternal(String.format("INSERT INTO \"%s\".test_compact_dynamic_columns (a, b, c) VALUES (0, 'a', 'foo')",KEYSPACE));
  QueryProcessor.executeInternal(String.format("INSERT INTO \"%s\".test_compact_dynamic_columns (a, b, c) VALUES (0, 'b', 'bar')",KEYSPACE));
  QueryProcessor.executeInternal(String.format("INSERT INTO \"%s\".test_compact_dynamic_columns (a, b, c) VALUES (0, 'c', 'boo')",KEYSPACE));
  cfs.forceBlockingFlush();
  CompactionManager.instance.performScrub(cfs,true,true);
  UntypedResultSet rs=QueryProcessor.executeInternal(String.format("SELECT * FROM \"%s\".test_compact_dynamic_columns",KEYSPACE));
  assertEquals(3,rs.size());
  Iterator<UntypedResultSet.Row> iter=rs.iterator();
  assertEquals("foo",iter.next().getString("c"));
  assertEquals("bar",iter.next().getString("c"));
  assertEquals("boo",iter.next().getString("c"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.SecondaryIndexTest </h4><pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIndexScan(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(WITH_COMPOSITE_INDEX);
  new RowUpdateBuilder(cfs.metadata,0,"k1").clustering("c").add("birthdate",1L).add("notbirthdate",1L).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,0,"k2").clustering("c").add("birthdate",2L).add("notbirthdate",2L).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,0,"k3").clustering("c").add("birthdate",1L).add("notbirthdate",2L).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,0,"k4").clustering("c").add("birthdate",3L).add("notbirthdate",2L).build().applyUnsafe();
  List<FilteredPartition> partitions=Util.getAll(Util.cmd(cfs).fromKeyExcl("k1").toKeyIncl("k3").columns("birthdate").build());
  assertEquals(2,partitions.size());
  Util.assertCellValue(2L,cfs,Util.row(partitions.get(0),"c"),"birthdate");
  Util.assertCellValue(1L,cfs,Util.row(partitions.get(1),"c"),"birthdate");
  partitions=Util.getAll(Util.cmd(cfs).fromKeyExcl("k1").toKeyIncl("k4aaa").build());
  assertEquals(3,partitions.size());
  Row first=Util.row(partitions.get(0),"c");
  Util.assertCellValue(2L,cfs,first,"birthdate");
  Util.assertCellValue(2L,cfs,first,"notbirthdate");
  Row second=Util.row(partitions.get(1),"c");
  Util.assertCellValue(1L,cfs,second,"birthdate");
  Util.assertCellValue(2L,cfs,second,"notbirthdate");
  Row third=Util.row(partitions.get(2),"c");
  Util.assertCellValue(3L,cfs,third,"birthdate");
  Util.assertCellValue(2L,cfs,third,"notbirthdate");
  ReadCommand rc=Util.cmd(cfs).fromKeyIncl("k1").toKeyIncl("k3").columns("birthdate").filterOn("birthdate",Operator.EQ,1L).build();
  Index.Searcher searcher=cfs.indexManager.getBestIndexFor(rc).searcherFor(rc);
  try (ReadExecutionController executionController=rc.executionController();UnfilteredPartitionIterator pi=searcher.search(executionController)){
    assertTrue(pi.hasNext());
    pi.next().close();
  }
   partitions=Util.getAll(Util.cmd(cfs).fromKeyIncl("k1").toKeyIncl("k4aaa").filterOn("birthdate",Operator.GT,1L).build());
  int rowCount=0;
  for (  FilteredPartition partition : partitions) {
    for (    Row row : partition) {
      ++rowCount;
      assert ByteBufferUtil.toLong(Util.cell(cfs,row,"birthdate").value()) > 1L;
    }
  }
  assertEquals(2,rowCount);
  Util.assertEmpty(Util.cmd(cfs).fromKeyExcl("k1").toKeyIncl("k4aaa").filterOn("notbirthdate",Operator.NEQ,2L).build());
  Util.assertEmpty(Util.cmd(cfs).fromKeyExcl("k1").toKeyIncl("k4aaa").filterOn("birthdate",Operator.EQ,1L).filterOn("notbirthdate",Operator.NEQ,2L).build());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLargeScan(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(WITH_COMPOSITE_INDEX);
  ByteBuffer bBB=ByteBufferUtil.bytes("birthdate");
  ByteBuffer nbBB=ByteBufferUtil.bytes("notbirthdate");
  for (int i=0; i < 100; i++) {
    new RowUpdateBuilder(cfs.metadata,FBUtilities.timestampMicros(),"key" + i).clustering("c").add("birthdate",34L).add("notbirthdate",ByteBufferUtil.bytes((long)(i % 2))).build().applyUnsafe();
  }
  List<FilteredPartition> partitions=Util.getAll(Util.cmd(cfs).filterOn("birthdate",Operator.EQ,34L).filterOn("notbirthdate",Operator.EQ,1L).build());
  Set<DecoratedKey> keys=new HashSet<>();
  int rowCount=0;
  for (  FilteredPartition partition : partitions) {
    keys.add(partition.partitionKey());
    rowCount+=partition.rowCount();
  }
  assertEquals(rowCount,keys.size());
  assertEquals(50,rowCount);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testIndexCreate() throws IOException, InterruptedException, ExecutionException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(COMPOSITE_INDEX_TO_BE_ADDED);
  new RowUpdateBuilder(cfs.metadata,0,"k1").clustering("c").add("birthdate",1L).build().applyUnsafe();
  String indexName="birthdate_index";
  ColumnDefinition old=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("birthdate"));
  IndexMetadata indexDef=IndexMetadata.fromIndexTargets(cfs.metadata,Collections.singletonList(new IndexTarget(old.name,IndexTarget.Type.VALUES)),indexName,IndexMetadata.Kind.COMPOSITES,Collections.EMPTY_MAP);
  cfs.metadata.indexes(cfs.metadata.getIndexes().with(indexDef));
  Future<?> future=cfs.indexManager.addIndex(indexDef);
  future.get();
  boolean flushed=false;
  ColumnFamilyStore indexCfs=cfs.indexManager.getIndex(indexDef).getBackingTable().orElseThrow(throwAssert("Index not found"));
  flushed=!indexCfs.getLiveSSTables().isEmpty();
  assertTrue(flushed);
  assertIndexedOne(cfs,ByteBufferUtil.bytes("birthdate"),1L);
  assertTrue(cfs.getBuiltIndexes().contains(indexName));
  cfs.indexManager.removeIndex(indexDef.name);
  assertFalse(cfs.getBuiltIndexes().contains(indexName));
  future=cfs.indexManager.addIndex(indexDef);
  future.get();
  assertIndexedOne(cfs,ByteBufferUtil.bytes("birthdate"),1L);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.SinglePartitionSliceCommandTest </h4><pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void staticColumnsAreFiltered() throws IOException {
  DecoratedKey key=cfm.decorateKey(ByteBufferUtil.bytes("k"));
  UntypedResultSet rows;
  QueryProcessor.executeInternal("INSERT INTO ks.tbl (k, s, i, v) VALUES ('k', 's', 0, 'v')");
  QueryProcessor.executeInternal("DELETE v FROM ks.tbl WHERE k='k' AND i=0");
  QueryProcessor.executeInternal("DELETE FROM ks.tbl WHERE k='k' AND i=0");
  rows=QueryProcessor.executeInternal("SELECT * FROM ks.tbl WHERE k='k' AND i=0");
  for (  UntypedResultSet.Row row : rows) {
    logger.debug("Current: k={}, s={}, v={}",(row.has("k") ? row.getString("k") : null),(row.has("s") ? row.getString("s") : null),(row.has("v") ? row.getString("v") : null));
  }
  assert rows.isEmpty();
  ColumnFilter columnFilter=ColumnFilter.selection(PartitionColumns.of(v));
  ByteBuffer zero=ByteBufferUtil.bytes(0);
  Slices slices=Slices.with(cfm.comparator,Slice.make(Slice.Bound.inclusiveStartOf(zero),Slice.Bound.inclusiveEndOf(zero)));
  ClusteringIndexSliceFilter sliceFilter=new ClusteringIndexSliceFilter(slices,false);
  ReadCommand cmd=new SinglePartitionReadCommand(false,MessagingService.VERSION_30,true,cfm,FBUtilities.nowInSeconds(),columnFilter,RowFilter.NONE,DataLimits.NONE,key,sliceFilter);
  DataOutputBuffer out=new DataOutputBuffer((int)ReadCommand.legacyReadCommandSerializer.serializedSize(cmd,MessagingService.VERSION_21));
  ReadCommand.legacyReadCommandSerializer.serialize(cmd,out,MessagingService.VERSION_21);
  DataInputPlus in=new DataInputBuffer(out.buffer(),true);
  cmd=ReadCommand.legacyReadCommandSerializer.deserialize(in,MessagingService.VERSION_21);
  logger.debug("ReadCommand: {}",cmd);
  UnfilteredPartitionIterator partitionIterator=cmd.executeLocally(ReadExecutionController.empty());
  ReadResponse response=ReadResponse.createDataResponse(partitionIterator,cmd);
  logger.debug("creating response: {}",response);
  partitionIterator=response.makeIterator(cmd);
  assert partitionIterator.hasNext();
  UnfilteredRowIterator partition=partitionIterator.next();
  LegacyLayout.LegacyUnfilteredPartition rowIter=LegacyLayout.fromUnfilteredRowIterator(cmd,partition);
  Assert.assertEquals(Collections.emptyList(),rowIter.cells);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.TimeSortTest </h4><pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeSort() throws Throwable {
  String tableName=createTable("CREATE TABLE %s (a int, b int, c int, PRIMARY KEY (a, b))");
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE).getColumnFamilyStore(tableName);
  for (int i=900; i < 1000; ++i)   for (int j=0; j < 8; ++j)   execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?) USING TIMESTAMP ?",i,j * 2,0,(long)j * 2);
  validateTimeSort();
  cfs.forceBlockingFlush();
  validateTimeSort();
  DecoratedKey key=Util.dk("900");
  for (int j=0; j < 4; ++j)   execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?) USING TIMESTAMP ?",900,j * 2 + 1,1,(long)j * 2 + 1);
  execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?) USING TIMESTAMP ?",900,0,2,100L);
  execute("INSERT INTO %s (a, b, c) VALUES (?, ?, ?) USING TIMESTAMP ?",900,10,2,100L);
  UntypedResultSet results=execute("SELECT * FROM %s WHERE a = ? AND b >= ? LIMIT 1000",900,0);
  assertEquals(12,results.size());
  Iterator<UntypedResultSet.Row> iter=results.iterator();
  for (int j=0; j < 8; j++) {
    UntypedResultSet.Row row=iter.next();
    assertEquals(j,row.getInt("b"));
  }
  assertRows(execute("SELECT * FROM %s WHERE a = ? AND b IN (?, ?)",900,0,10),row(900,0,2),row(900,10,2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.TransformerTest </h4><pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRowExtension(){
  for (  Filter filter : Filter.values()) {
    List<Check> checks=new ArrayList<>();
    BaseRowIterator<?> iter=extendingIterator(5,filter,checks);
    for (int i=0; i < 5; i++) {
      Unfiltered u=iter.next();
      assert u instanceof Row;
      Assert.assertEquals(i,ByteBufferUtil.toInt(u.clustering().get(0)));
    }
    iter.close();
    for (    Check check : checks)     check.check();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.commitlog.CommitLogDescriptorTest </h4><pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Shouldn't happen in the real world (should only have either compression or enabledTdeOptions), but the header
 * functionality should be correct
 */
@Test public void writeAndReadHeader_WithCompressionAndEncryption() throws IOException {
  CommitLogDescriptor descriptor=new CommitLogDescriptor(CommitLogDescriptor.current_version,1,compression,enabledEncryption);
  ByteBuffer buffer=ByteBuffer.allocate(16 * 1024);
  CommitLogDescriptor.writeHeader(buffer,descriptor);
  buffer.flip();
  FileSegmentInputStream dataInput=new FileSegmentInputStream(buffer,null,0);
  CommitLogDescriptor result=CommitLogDescriptor.readHeader(dataInput,enabledEncryption);
  Assert.assertNotNull(result);
  Assert.assertEquals(compression,result.compression);
  Assert.assertTrue(result.getEncryptionContext().isEnabled());
  Assert.assertEquals(enabledEncryption,result.getEncryptionContext());
  Assert.assertArrayEquals(iv,result.getEncryptionContext().getIV());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void writeAndReadHeader_WithEncryptionHeader_EncryptionEnabledInYaml() throws IOException {
  CommitLogDescriptor descriptor=new CommitLogDescriptor(CommitLogDescriptor.current_version,1,null,enabledEncryption);
  ByteBuffer buffer=ByteBuffer.allocate(16 * 1024);
  CommitLogDescriptor.writeHeader(buffer,descriptor);
  buffer.flip();
  FileSegmentInputStream dataInput=new FileSegmentInputStream(buffer,null,0);
  CommitLogDescriptor result=CommitLogDescriptor.readHeader(dataInput,enabledEncryption);
  Assert.assertNotNull(result);
  Assert.assertNull(result.compression);
  Assert.assertTrue(result.getEncryptionContext().isEnabled());
  Assert.assertArrayEquals(iv,result.getEncryptionContext().getIV());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check that even though enabledTdeOptions is disabled in the yaml, we can still read the commit log header as encrypted.
 */
@Test public void writeAndReadHeader_WithEncryptionHeader_EncryptionDisabledInYaml() throws IOException {
  CommitLogDescriptor descriptor=new CommitLogDescriptor(CommitLogDescriptor.current_version,1,null,enabledEncryption);
  ByteBuffer buffer=ByteBuffer.allocate(16 * 1024);
  CommitLogDescriptor.writeHeader(buffer,descriptor);
  buffer.flip();
  FileSegmentInputStream dataInput=new FileSegmentInputStream(buffer,null,0);
  CommitLogDescriptor result=CommitLogDescriptor.readHeader(dataInput,previouslyEnabledEncryption);
  Assert.assertNotNull(result);
  Assert.assertNull(result.compression);
  Assert.assertTrue(result.getEncryptionContext().isEnabled());
  Assert.assertArrayEquals(iv,result.getEncryptionContext().getIV());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.commitlog.CommitLogFailurePolicyTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testCommitFailurePolicy_ignore_beforeStartup(){
  CassandraDaemon daemon=new CassandraDaemon();
  StorageService.instance.registerDaemon(daemon);
  KillerForTests killerForTests=new KillerForTests();
  JVMStabilityInspector.Killer originalKiller=JVMStabilityInspector.replaceKiller(killerForTests);
  Config.CommitFailurePolicy oldPolicy=DatabaseDescriptor.getCommitFailurePolicy();
  try {
    DatabaseDescriptor.setCommitFailurePolicy(Config.CommitFailurePolicy.ignore);
    CommitLog.handleCommitError("Testing ignore policy",new Throwable());
    Assert.assertTrue(killerForTests.wasKilled());
    Assert.assertTrue(killerForTests.wasKilledQuietly());
  }
  finally {
    DatabaseDescriptor.setCommitFailurePolicy(oldPolicy);
    JVMStabilityInspector.replaceKiller(originalKiller);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testCommitFailurePolicy_die(){
  CassandraDaemon daemon=new CassandraDaemon();
  daemon.completeSetup();
  StorageService.instance.registerDaemon(daemon);
  KillerForTests killerForTests=new KillerForTests();
  JVMStabilityInspector.Killer originalKiller=JVMStabilityInspector.replaceKiller(killerForTests);
  Config.CommitFailurePolicy oldPolicy=DatabaseDescriptor.getCommitFailurePolicy();
  try {
    DatabaseDescriptor.setCommitFailurePolicy(Config.CommitFailurePolicy.die);
    CommitLog.handleCommitError("Testing die policy",new Throwable());
    Assert.assertTrue(killerForTests.wasKilled());
    Assert.assertFalse(killerForTests.wasKilledQuietly());
  }
  finally {
    DatabaseDescriptor.setCommitFailurePolicy(oldPolicy);
    JVMStabilityInspector.replaceKiller(originalKiller);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.commitlog.CommitLogTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testTruncateWithoutSnapshotNonDurable() throws IOException {
  CommitLog.instance.resetUnsafe(true);
  boolean originalState=DatabaseDescriptor.getAutoSnapshot();
  try {
    DatabaseDescriptor.setAutoSnapshot(false);
    Keyspace notDurableKs=Keyspace.open(KEYSPACE2);
    Assert.assertFalse(notDurableKs.getMetadata().params.durableWrites);
    ColumnFamilyStore cfs=notDurableKs.getColumnFamilyStore("Standard1");
    new RowUpdateBuilder(cfs.metadata,0,"key1").clustering("bytes").add("val",bytes("abcd")).build().applyUnsafe();
    assertTrue(Util.getOnlyRow(Util.cmd(cfs).columns("val").build()).cells().iterator().next().value().equals(bytes("abcd")));
    cfs.truncateBlocking();
    Util.assertEmpty(Util.cmd(cfs).columns("val").build());
  }
  finally {
    DatabaseDescriptor.setAutoSnapshot(originalState);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.commitlog.SegmentReaderTest </h4><pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void encryptedSegmenter() throws IOException {
  EncryptionContext context=EncryptionContextGenerator.createContext(true);
  CipherFactory cipherFactory=new CipherFactory(context.getTransparentDataEncryptionOptions());
  int plainTextLength=(1 << 13) - 137;
  ByteBuffer plainTextBuffer=ByteBuffer.allocate(plainTextLength);
  random.nextBytes(plainTextBuffer.array());
  ByteBuffer compressedBuffer=EncryptionUtils.compress(plainTextBuffer,null,true,context.getCompressor());
  Cipher cipher=cipherFactory.getEncryptor(context.getTransparentDataEncryptionOptions().cipher,context.getTransparentDataEncryptionOptions().key_alias);
  File encryptedFile=File.createTempFile("encrypted-segment-",".log");
  encryptedFile.deleteOnExit();
  FileChannel channel=new RandomAccessFile(encryptedFile,"rw").getChannel();
  channel.write(ByteBufferUtil.bytes(plainTextLength));
  EncryptionUtils.encryptAndWrite(compressedBuffer,channel,true,cipher);
  channel.close();
  try (RandomAccessReader reader=RandomAccessReader.open(encryptedFile)){
    context=EncryptionContextGenerator.createContext(cipher.getIV(),true);
    EncryptedSegmenter segmenter=new EncryptedSegmenter(reader,context);
    SyncSegment syncSegment=segmenter.nextSegment(0,(int)reader.length());
    Assert.assertEquals(plainTextLength,syncSegment.endPosition - CommitLogSegment.SYNC_MARKER_SIZE);
    ByteBuffer fileBuffer=readBytes(syncSegment.input,plainTextLength);
    plainTextBuffer.position(0);
    Assert.assertEquals(plainTextBuffer,fileBuffer);
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.AntiCompactionTest </h4><pre class="type-7 type-4 type-2 type-9 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldMutateRepairedAt() throws InterruptedException, IOException {
  ColumnFamilyStore store=prepareColumnFamilyStore();
  Collection<SSTableReader> sstables=getUnrepairedSSTables(store);
  assertEquals(store.getLiveSSTables().size(),sstables.size());
  Range<Token> range=new Range<Token>(new BytesToken("0".getBytes()),new BytesToken("9999".getBytes()));
  List<Range<Token>> ranges=Arrays.asList(range);
  try (LifecycleTransaction txn=store.getTracker().tryModify(sstables,OperationType.ANTICOMPACTION);Refs<SSTableReader> refs=Refs.ref(sstables)){
    CompactionManager.instance.performAnticompaction(store,ranges,refs,txn,1);
  }
   assertThat(store.getLiveSSTables().size(),is(1));
  assertThat(Iterables.get(store.getLiveSSTables(),0).isRepaired(),is(true));
  assertThat(Iterables.get(store.getLiveSSTables(),0).selfRef().globalCount(),is(1));
  assertThat(store.getTracker().getCompacting().size(),is(0));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-9 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldSkipAntiCompactionForNonIntersectingRange() throws InterruptedException, IOException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore(CF);
  store.disableAutoCompaction();
  for (int table=0; table < 10; table++) {
    generateSStable(store,Integer.toString(table));
  }
  Collection<SSTableReader> sstables=getUnrepairedSSTables(store);
  assertEquals(store.getLiveSSTables().size(),sstables.size());
  Range<Token> range=new Range<Token>(new BytesToken("-1".getBytes()),new BytesToken("-10".getBytes()));
  List<Range<Token>> ranges=Arrays.asList(range);
  try (LifecycleTransaction txn=store.getTracker().tryModify(sstables,OperationType.ANTICOMPACTION);Refs<SSTableReader> refs=Refs.ref(sstables)){
    CompactionManager.instance.performAnticompaction(store,ranges,refs,txn,1);
  }
   assertThat(store.getLiveSSTables().size(),is(10));
  assertThat(Iterables.get(store.getLiveSSTables(),0).isRepaired(),is(false));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void antiCompactionSizeTest() throws InterruptedException, IOException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  cfs.disableAutoCompaction();
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  long origSize=s.bytesOnDisk();
  Range<Token> range=new Range<Token>(new BytesToken(ByteBufferUtil.bytes(0)),new BytesToken(ByteBufferUtil.bytes(500)));
  Collection<SSTableReader> sstables=cfs.getLiveSSTables();
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.ANTICOMPACTION);Refs<SSTableReader> refs=Refs.ref(sstables)){
    CompactionManager.instance.performAnticompaction(cfs,Arrays.asList(range),refs,txn,12345);
  }
   long sum=0;
  long rows=0;
  for (  SSTableReader x : cfs.getLiveSSTables()) {
    sum+=x.bytesOnDisk();
    rows+=x.getTotalRows();
  }
  assertEquals(sum,cfs.metric.liveDiskSpaceUsed.getCount());
  assertEquals(rows,1000 * (1000 * 5));
  assertEquals(origSize,cfs.metric.liveDiskSpaceUsed.getCount(),16000000);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void antiCompactOne() throws Exception {
  ColumnFamilyStore store=prepareColumnFamilyStore();
  Collection<SSTableReader> sstables=getUnrepairedSSTables(store);
  assertEquals(store.getLiveSSTables().size(),sstables.size());
  Range<Token> range=new Range<Token>(new BytesToken("0".getBytes()),new BytesToken("4".getBytes()));
  List<Range<Token>> ranges=Arrays.asList(range);
  int repairedKeys=0;
  int nonRepairedKeys=0;
  try (LifecycleTransaction txn=store.getTracker().tryModify(sstables,OperationType.ANTICOMPACTION);Refs<SSTableReader> refs=Refs.ref(sstables)){
    if (txn == null)     throw new IllegalStateException();
    long repairedAt=1000;
    CompactionManager.instance.performAnticompaction(store,ranges,refs,txn,repairedAt);
  }
   assertEquals(2,store.getLiveSSTables().size());
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    try (ISSTableScanner scanner=sstable.getScanner((RateLimiter)null)){
      while (scanner.hasNext()) {
        UnfilteredRowIterator row=scanner.next();
        if (sstable.isRepaired()) {
          assertTrue(range.contains(row.partitionKey().getToken()));
          repairedKeys++;
        }
 else {
          assertFalse(range.contains(row.partitionKey().getToken()));
          nonRepairedKeys++;
        }
      }
    }
   }
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    assertFalse(sstable.isMarkedCompacted());
    assertEquals(1,sstable.selfRef().globalCount());
  }
  assertEquals(0,store.getTracker().getCompacting().size());
  assertEquals(repairedKeys,4);
  assertEquals(nonRepairedKeys,6);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.CompactionAwareWriterTest </h4><pre class="type-7 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSplittingSizeTieredCompactionWriter() throws Throwable {
  ColumnFamilyStore cfs=getColumnFamilyStore();
  cfs.disableAutoCompaction();
  int rowCount=10000;
  populate(rowCount);
  LifecycleTransaction txn=cfs.getTracker().tryModify(cfs.getLiveSSTables(),OperationType.COMPACTION);
  long beforeSize=txn.originals().iterator().next().onDiskLength();
  CompactionAwareWriter writer=new SplittingSizeTieredCompactionWriter(cfs,cfs.getDirectories(),txn,txn.originals(),0);
  int rows=compact(cfs,txn,writer);
  long expectedSize=beforeSize / 2;
  List<SSTableReader> sortedSSTables=new ArrayList<>(cfs.getLiveSSTables());
  Collections.sort(sortedSSTables,new Comparator<SSTableReader>(){
    @Override public int compare(    SSTableReader o1,    SSTableReader o2){
      return Longs.compare(o2.onDiskLength(),o1.onDiskLength());
    }
  }
);
  for (  SSTableReader sstable : sortedSSTables) {
    if (expectedSize > SplittingSizeTieredCompactionWriter.DEFAULT_SMALLEST_SSTABLE_BYTES)     assertEquals(expectedSize,sstable.onDiskLength(),expectedSize / 100);
    expectedSize/=2;
  }
  assertEquals(rowCount,rows);
  validateData(cfs,rowCount);
  cfs.truncateBlocking();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCompactionWriter() throws Throwable {
  Keyspace ks=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=ks.getColumnFamilyStore(TABLE);
  int rowCount=1000;
  cfs.disableAutoCompaction();
  populate(rowCount);
  LifecycleTransaction txn=cfs.getTracker().tryModify(cfs.getLiveSSTables(),OperationType.COMPACTION);
  long beforeSize=txn.originals().iterator().next().onDiskLength();
  CompactionAwareWriter writer=new DefaultCompactionWriter(cfs,cfs.getDirectories(),txn,txn.originals());
  int rows=compact(cfs,txn,writer);
  assertEquals(1,cfs.getLiveSSTables().size());
  assertEquals(rowCount,rows);
  assertEquals(beforeSize,cfs.getLiveSSTables().iterator().next().onDiskLength());
  validateData(cfs,rowCount);
  cfs.truncateBlocking();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxSSTableSizeWriter() throws Throwable {
  ColumnFamilyStore cfs=getColumnFamilyStore();
  cfs.disableAutoCompaction();
  int rowCount=1000;
  populate(rowCount);
  LifecycleTransaction txn=cfs.getTracker().tryModify(cfs.getLiveSSTables(),OperationType.COMPACTION);
  long beforeSize=txn.originals().iterator().next().onDiskLength();
  int sstableSize=(int)beforeSize / 10;
  CompactionAwareWriter writer=new MaxSSTableSizeWriter(cfs,cfs.getDirectories(),txn,txn.originals(),sstableSize,0);
  int rows=compact(cfs,txn,writer);
  assertEquals(10,cfs.getLiveSSTables().size());
  assertEquals(rowCount,rows);
  validateData(cfs,rowCount);
  cfs.truncateBlocking();
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMajorLeveledCompactionWriter() throws Throwable {
  ColumnFamilyStore cfs=getColumnFamilyStore();
  cfs.disableAutoCompaction();
  int rowCount=20000;
  int targetSSTableCount=50;
  populate(rowCount);
  LifecycleTransaction txn=cfs.getTracker().tryModify(cfs.getLiveSSTables(),OperationType.COMPACTION);
  long beforeSize=txn.originals().iterator().next().onDiskLength();
  int sstableSize=(int)beforeSize / targetSSTableCount;
  CompactionAwareWriter writer=new MajorLeveledCompactionWriter(cfs,cfs.getDirectories(),txn,txn.originals(),sstableSize);
  int rows=compact(cfs,txn,writer);
  assertEquals(targetSSTableCount,cfs.getLiveSSTables().size());
  int[] levelCounts=new int[5];
  assertEquals(rowCount,rows);
  for (  SSTableReader sstable : cfs.getLiveSSTables()) {
    levelCounts[sstable.getSSTableLevel()]++;
  }
  assertEquals(0,levelCounts[0]);
  assertEquals(10,levelCounts[1]);
  assertEquals(targetSSTableCount - 10,levelCounts[2]);
  for (int i=3; i < levelCounts.length; i++)   assertEquals(0,levelCounts[i]);
  validateData(cfs,rowCount);
  cfs.truncateBlocking();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.CompactionControllerTest </h4><pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetFullyExpiredSSTables(){
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF2);
  cfs.truncateBlocking();
  DecoratedKey key=Util.dk("k1");
  long timestamp1=FBUtilities.timestampMicros();
  long timestamp2=timestamp1 - 5;
  long timestamp3=timestamp2 - 5;
  applyDeleteMutation(cfs.metadata,key,timestamp2);
  cfs.forceBlockingFlush();
  Set<SSTableReader> compacting=Sets.newHashSet(cfs.getLiveSSTables());
  applyMutation(cfs.metadata,key,timestamp1);
  cfs.forceBlockingFlush();
  Set<SSTableReader> overlapping=Sets.difference(Sets.newHashSet(cfs.getLiveSSTables()),compacting);
  int gcBefore=(int)(System.currentTimeMillis() / 1000) + 5;
  Set<SSTableReader> expired=CompactionController.getFullyExpiredSSTables(cfs,compacting,overlapping,gcBefore);
  assertNotNull(expired);
  assertEquals(1,expired.size());
  assertEquals(compacting.iterator().next(),expired.iterator().next());
  applyMutation(cfs.metadata,key,timestamp3);
  expired=CompactionController.getFullyExpiredSSTables(cfs,compacting,overlapping,gcBefore);
  assertNotNull(expired);
  assertEquals(0,expired.size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxPurgeableTimestamp(){
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF1);
  cfs.truncateBlocking();
  DecoratedKey key=Util.dk("k1");
  long timestamp1=FBUtilities.timestampMicros();
  long timestamp2=timestamp1 - 5;
  long timestamp3=timestamp2 - 5;
  applyMutation(cfs.metadata,key,timestamp1);
  try (CompactionController controller=new CompactionController(cfs,null,0)){
    assertEquals(timestamp1,controller.maxPurgeableTimestamp(key));
    cfs.forceBlockingFlush();
    assertEquals(Long.MAX_VALUE,controller.maxPurgeableTimestamp(key));
  }
   Set<SSTableReader> compacting=Sets.newHashSet(cfs.getLiveSSTables());
  applyMutation(cfs.metadata,key,timestamp2);
  cfs.forceBlockingFlush();
  try (CompactionController controller=new CompactionController(cfs,compacting,0)){
    assertEquals(timestamp2,controller.maxPurgeableTimestamp(key));
    applyMutation(cfs.metadata,key,timestamp3);
    assertEquals(timestamp3,controller.maxPurgeableTimestamp(key));
  }
   cfs.forceBlockingFlush();
  try (CompactionController controller=new CompactionController(cfs,null,0)){
    applyMutation(cfs.metadata,key,timestamp1);
    applyMutation(cfs.metadata,key,timestamp2);
    applyMutation(cfs.metadata,key,timestamp3);
    assertEquals(timestamp3,controller.maxPurgeableTimestamp(key));
  }
   cfs.forceBlockingFlush();
  try (CompactionController controller=new CompactionController(cfs,null,0)){
    applyMutation(cfs.metadata,key,timestamp3);
    applyMutation(cfs.metadata,key,timestamp2);
    applyMutation(cfs.metadata,key,timestamp1);
    assertEquals(timestamp3,controller.maxPurgeableTimestamp(key));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.CompactionsPurgeTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactionPurgeTombstonedRow() throws ExecutionException, InterruptedException {
  CompactionManager.instance.disableAutoCompaction();
  String keyspaceName=KEYSPACE1;
  String cfName="Standard1";
  Keyspace keyspace=Keyspace.open(keyspaceName);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfName);
  String key="key3";
  for (int i=0; i < 10; i++) {
    RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,i,key);
    builder.clustering(String.valueOf(i)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  Mutation rm=new Mutation(KEYSPACE1,dk(key));
  rm.add(PartitionUpdate.fullPartitionDelete(cfs.metadata,dk(key),4,FBUtilities.nowInSeconds()));
  rm.applyUnsafe();
  ImmutableBTreePartition partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build());
  assertFalse(partition.partitionLevelDeletion().isLive());
  cfs.forceBlockingFlush();
  Util.compactAll(cfs,Integer.MAX_VALUE).get();
  assertFalse(Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build()).isEmpty());
  for (int i=0; i < 5; i++) {
    RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,i,key);
    builder.clustering(String.valueOf(i)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build());
  assertEquals(10,partition.rowCount());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * verify that we don't drop tombstones during a minor compaction that might still be relevant
 */
@Test public void testMinTimestampPurge(){
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE2);
  String cfName="Standard1";
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfName);
  String key3="key3";
  new RowUpdateBuilder(cfs.metadata,8,key3).clustering("c1").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,8,key3).clustering("c2").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  RowUpdateBuilder.deleteRow(cfs.metadata,10,key3,"c1").applyUnsafe();
  cfs.forceBlockingFlush();
  Collection<SSTableReader> sstablesIncomplete=cfs.getLiveSSTables();
  RowUpdateBuilder.deleteRow(cfs.metadata,9,key3,"c2").applyUnsafe();
  cfs.forceBlockingFlush();
  cfs.getCompactionStrategyManager().getUserDefinedTask(sstablesIncomplete,Integer.MAX_VALUE).execute(null);
  ImmutableBTreePartition partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key3).build());
  assertEquals(2,partition.rowCount());
  for (  Row row : partition)   assertFalse(row.hasLiveData(FBUtilities.nowInSeconds()));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMinorCompactionPurge(){
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE2);
  String cfName="Standard1";
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfName);
  for (int k=1; k <= 2; ++k) {
    String key="key" + k;
    for (int i=0; i < 10; i++) {
      RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,0,key);
      builder.clustering(String.valueOf(i)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
    }
    cfs.forceBlockingFlush();
    for (int i=0; i < 10; i++) {
      RowUpdateBuilder.deleteRow(cfs.metadata,1,key,String.valueOf(i)).applyUnsafe();
    }
    cfs.forceBlockingFlush();
  }
  DecoratedKey key1=Util.dk("key1");
  DecoratedKey key2=Util.dk("key2");
  cfs.forceBlockingFlush();
  Collection<SSTableReader> sstablesIncomplete=cfs.getLiveSSTables();
  RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,2,"key1");
  builder.clustering(String.valueOf(5)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  cfs.getCompactionStrategyManager().getUserDefinedTask(sstablesIncomplete,Integer.MAX_VALUE).execute(null);
  Util.assertEmpty(Util.cmd(cfs,key2).build());
  ImmutableBTreePartition partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key1).build());
  assertEquals(1,partition.rowCount());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRowTombstoneObservedBeforePurging(){
  String keyspace="cql_keyspace";
  String table="table1";
  ColumnFamilyStore cfs=Keyspace.open(keyspace).getColumnFamilyStore(table);
  cfs.disableAutoCompaction();
  QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (k, v1, v2) VALUES (%d, '%s', %d)",keyspace,table,1,"foo",1));
  cfs.forceBlockingFlush();
  UntypedResultSet result=QueryProcessor.executeInternal(String.format("SELECT * FROM %s.%s WHERE k = %d",keyspace,table,1));
  assertEquals(1,result.size());
  QueryProcessor.executeInternal(String.format("DELETE FROM %s.%s WHERE k = %d",keyspace,table,1));
  cfs.forceBlockingFlush();
  assertEquals(2,cfs.getLiveSSTables().size());
  result=QueryProcessor.executeInternal(String.format("SELECT * FROM %s.%s WHERE k = %d",keyspace,table,1));
  assertEquals(0,result.size());
  FBUtilities.waitOnFutures(CompactionManager.instance.submitMaximal(cfs,(int)(System.currentTimeMillis() / 1000) - 10000,false));
  assertEquals(1,cfs.getLiveSSTables().size());
  result=QueryProcessor.executeInternal(String.format("SELECT * FROM %s.%s WHERE k = %d",keyspace,table,1));
  assertEquals(0,result.size());
  QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (k, v1, v2) VALUES (%d, '%s', %d)",keyspace,table,1,"foo",1));
  cfs.forceBlockingFlush();
  assertEquals(2,cfs.getLiveSSTables().size());
  result=QueryProcessor.executeInternal(String.format("SELECT * FROM %s.%s WHERE k = %d",keyspace,table,1));
  assertEquals(1,result.size());
  QueryProcessor.executeInternal(String.format("DELETE FROM %s.%s WHERE k = %d",keyspace,table,1));
  cfs.forceBlockingFlush();
  FBUtilities.waitOnFutures(CompactionManager.instance.submitMaximal(cfs,(int)(System.currentTimeMillis() / 1000) + 10000,false));
  assertEquals(0,cfs.getLiveSSTables().size());
  result=QueryProcessor.executeInternal(String.format("SELECT * FROM %s.%s WHERE k = %d",keyspace,table,1));
  assertEquals(0,result.size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMajorCompactionPurge(){
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  String cfName="Standard1";
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfName);
  String key="key1";
  for (int i=0; i < 10; i++) {
    RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,0,key);
    builder.clustering(String.valueOf(i)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  cfs.forceBlockingFlush();
  for (int i=0; i < 10; i++) {
    RowUpdateBuilder.deleteRow(cfs.metadata,1,key,String.valueOf(i)).applyUnsafe();
  }
  cfs.forceBlockingFlush();
  RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,2,key);
  builder.clustering(String.valueOf(5)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  FBUtilities.waitOnFutures(CompactionManager.instance.submitMaximal(cfs,Integer.MAX_VALUE,false));
  cfs.invalidateCachedPartition(dk(key));
  ImmutableBTreePartition partition=Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build());
  assertEquals(1,partition.rowCount());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testCompactionPurgeCachedRow() throws ExecutionException, InterruptedException {
  CompactionManager.instance.disableAutoCompaction();
  String keyspaceName=KEYSPACE_CACHED;
  String cfName=CF_CACHED;
  Keyspace keyspace=Keyspace.open(keyspaceName);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfName);
  String key="key3";
  for (int i=0; i < 10; i++) {
    RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,0,key);
    builder.clustering(String.valueOf(i)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  Mutation rm=new Mutation(KEYSPACE_CACHED,dk(key));
  rm.add(PartitionUpdate.fullPartitionDelete(cfs.metadata,dk(key),1,FBUtilities.nowInSeconds()));
  rm.applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,0,"key4").clustering("c").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  assertFalse(Util.getOnlyPartitionUnfiltered(Util.cmd(cfs,key).build()).isEmpty());
  cfs.forceBlockingFlush();
  Util.compactAll(cfs,Integer.MAX_VALUE).get();
  Util.assertEmpty(Util.cmd(cfs,key).build());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactionPurgeOneFile() throws ExecutionException, InterruptedException {
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  String cfName="Standard2";
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfName);
  String key="key1";
  for (int i=0; i < 5; i++) {
    RowUpdateBuilder builder=new RowUpdateBuilder(cfs.metadata,0,key);
    builder.clustering(String.valueOf(i)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  for (int i=0; i < 5; i++) {
    RowUpdateBuilder.deleteRow(cfs.metadata,1,key,String.valueOf(i)).applyUnsafe();
  }
  cfs.forceBlockingFlush();
  assertEquals(String.valueOf(cfs.getLiveSSTables()),1,cfs.getLiveSSTables().size());
  Util.compactAll(cfs,Integer.MAX_VALUE).get();
  assertTrue(cfs.getLiveSSTables().isEmpty());
  Util.assertEmpty(Util.cmd(cfs,key).build());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.CompactionsTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("making ranges based on the keys, not on the tokens") public void testNeedsCleanup(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore("CF_STANDARD1");
  store.clearUnsafe();
  store.disableAutoCompaction();
  for (int i=1; i < 10; i++) {
    insertRowWithKey(i);
    insertRowWithKey(i + 100);
    insertRowWithKey(i + 200);
  }
  store.forceBlockingFlush();
  assertEquals(1,store.getLiveSSTables().size());
  SSTableReader sstable=store.getLiveSSTables().iterator().next();
  assertFalse(CompactionManager.needsCleanup(sstable,makeRanges(0,209)));
  assertFalse(CompactionManager.needsCleanup(sstable,makeRanges(0,210)));
  assertFalse(CompactionManager.needsCleanup(sstable,makeRanges(0,9,100,109,200,209)));
  assertFalse(CompactionManager.needsCleanup(sstable,makeRanges(0,109,200,210)));
  assertFalse(CompactionManager.needsCleanup(sstable,makeRanges(0,9,100,210)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(100,109,200,209)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(0,9,200,209)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(0,9,100,109)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(1,9,100,109,200,209)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(0,9,101,109,200,209)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(0,9,100,109,201,209)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(0,8,100,109,200,209)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(0,9,100,108,200,209)));
  assertTrue(CompactionManager.needsCleanup(sstable,makeRanges(0,9,100,109,200,208)));
  assertFalse(CompactionManager.needsCleanup(sstable,makeRanges(0,0,0,9,50,51,100,109,150,199,200,209,300,301)));
  assertFalse(CompactionManager.needsCleanup(sstable,makeRanges(0,0,0,9,50,51,100,103,150,199,200,209,300,301)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.DateTieredCompactionStrategyTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrepBucket(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  int numSSTables=3;
  for (int r=0; r < numSSTables; r++) {
    DecoratedKey key=Util.dk(String.valueOf(r));
    new RowUpdateBuilder(cfs.metadata,r,key.getKey()).clustering("column").add("val",value).build().applyUnsafe();
    cfs.forceBlockingFlush();
  }
  cfs.forceBlockingFlush();
  List<SSTableReader> sstrs=new ArrayList<>(cfs.getLiveSSTables());
  List<SSTableReader> newBucket=newestBucket(Collections.singletonList(sstrs.subList(0,2)),4,32,9,10,Long.MAX_VALUE,new SizeTieredCompactionStrategyOptions());
  assertTrue("incoming bucket should not be accepted when it has below the min threshold SSTables",newBucket.isEmpty());
  newBucket=newestBucket(Collections.singletonList(sstrs.subList(0,2)),4,32,10,10,Long.MAX_VALUE,new SizeTieredCompactionStrategyOptions());
  assertFalse("non-incoming bucket should be accepted when it has at least 2 SSTables",newBucket.isEmpty());
  assertEquals("an sstable with a single value should have equal min/max timestamps",sstrs.get(0).getMinTimestamp(),sstrs.get(0).getMaxTimestamp());
  assertEquals("an sstable with a single value should have equal min/max timestamps",sstrs.get(1).getMinTimestamp(),sstrs.get(1).getMaxTimestamp());
  assertEquals("an sstable with a single value should have equal min/max timestamps",sstrs.get(2).getMinTimestamp(),sstrs.get(2).getMaxTimestamp());
  cfs.truncateBlocking();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFilterOldSSTables(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  int numSSTables=3;
  for (int r=0; r < numSSTables; r++) {
    DecoratedKey key=Util.dk(String.valueOf(r));
    new RowUpdateBuilder(cfs.metadata,r,key.getKey()).clustering("column").add("val",value).build().applyUnsafe();
    cfs.forceBlockingFlush();
  }
  cfs.forceBlockingFlush();
  Iterable<SSTableReader> filtered;
  List<SSTableReader> sstrs=new ArrayList<>(cfs.getLiveSSTables());
  filtered=filterOldSSTables(sstrs,0,2);
  assertEquals("when maxSSTableAge is zero, no sstables should be filtered",sstrs.size(),Iterables.size(filtered));
  filtered=filterOldSSTables(sstrs,1,2);
  assertEquals("only the newest 2 sstables should remain",2,Iterables.size(filtered));
  filtered=filterOldSSTables(sstrs,1,3);
  assertEquals("only the newest sstable should remain",1,Iterables.size(filtered));
  filtered=filterOldSSTables(sstrs,1,4);
  assertEquals("no sstables should remain when all are too old",0,Iterables.size(filtered));
  cfs.truncateBlocking();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDropExpiredSSTables() throws InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  DecoratedKey key=Util.dk(String.valueOf("expired"));
  new RowUpdateBuilder(cfs.metadata,System.currentTimeMillis(),1,key.getKey()).clustering("column").add("val",value).build().applyUnsafe();
  cfs.forceBlockingFlush();
  SSTableReader expiredSSTable=cfs.getLiveSSTables().iterator().next();
  Thread.sleep(10);
  key=Util.dk(String.valueOf("nonexpired"));
  new RowUpdateBuilder(cfs.metadata,System.currentTimeMillis(),key.getKey()).clustering("column").add("val",value).build().applyUnsafe();
  cfs.forceBlockingFlush();
  assertEquals(cfs.getLiveSSTables().size(),2);
  Map<String,String> options=new HashMap<>();
  options.put(DateTieredCompactionStrategyOptions.BASE_TIME_KEY,"30");
  options.put(DateTieredCompactionStrategyOptions.TIMESTAMP_RESOLUTION_KEY,"MILLISECONDS");
  options.put(DateTieredCompactionStrategyOptions.MAX_SSTABLE_AGE_KEY,Double.toString((1d / (24 * 60 * 60))));
  options.put(DateTieredCompactionStrategyOptions.EXPIRED_SSTABLE_CHECK_FREQUENCY_SECONDS_KEY,"0");
  DateTieredCompactionStrategy dtcs=new DateTieredCompactionStrategy(cfs,options);
  for (  SSTableReader sstable : cfs.getLiveSSTables())   dtcs.addSSTable(sstable);
  dtcs.startup();
  assertNull(dtcs.getNextBackgroundTask((int)(System.currentTimeMillis() / 1000)));
  Thread.sleep(2000);
  AbstractCompactionTask t=dtcs.getNextBackgroundTask((int)(System.currentTimeMillis() / 1000));
  assertNotNull(t);
  assertEquals(1,Iterables.size(t.transaction.originals()));
  SSTableReader sstable=t.transaction.originals().iterator().next();
  assertEquals(sstable,expiredSSTable);
  t.transaction.abort();
  cfs.truncateBlocking();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSTCSBigWindow(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  cfs.disableAutoCompaction();
  ByteBuffer bigValue=ByteBuffer.wrap(new byte[10000]);
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  int numSSTables=40;
  long timestamp=System.currentTimeMillis();
  for (int r=0; r < numSSTables / 2; r++) {
    for (int i=0; i < 10; i++) {
      DecoratedKey key=Util.dk(String.valueOf(r));
      new RowUpdateBuilder(cfs.metadata,timestamp,key.getKey()).clustering("column").add("val",bigValue).build().applyUnsafe();
    }
    cfs.forceBlockingFlush();
  }
  for (int r=0; r < numSSTables / 2; r++) {
    DecoratedKey key=Util.dk(String.valueOf(r));
    new RowUpdateBuilder(cfs.metadata,timestamp,key.getKey()).clustering("column").add("val",value).build().applyUnsafe();
    cfs.forceBlockingFlush();
  }
  Map<String,String> options=new HashMap<>();
  options.put(SizeTieredCompactionStrategyOptions.MIN_SSTABLE_SIZE_KEY,"1");
  DateTieredCompactionStrategy dtcs=new DateTieredCompactionStrategy(cfs,options);
  for (  SSTableReader sstable : cfs.getSSTables(SSTableSet.CANONICAL))   dtcs.addSSTable(sstable);
  AbstractCompactionTask task=dtcs.getNextBackgroundTask(0);
  assertEquals(20,task.transaction.originals().size());
  task.transaction.abort();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.LeveledCompactionStrategyTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testValidationMultipleSSTablePerLevel() throws Exception {
  byte[] b=new byte[100 * 1024];
  new Random().nextBytes(b);
  ByteBuffer value=ByteBuffer.wrap(b);
  int rows=40;
  int columns=20;
  for (int r=0; r < rows; r++) {
    UpdateBuilder update=UpdateBuilder.create(cfs.metadata,String.valueOf(r));
    for (int c=0; c < columns; c++)     update.newRow("column" + c).add("val",value);
    update.applyUnsafe();
    cfs.forceBlockingFlush();
  }
  waitForLeveling(cfs);
  CompactionStrategyManager strategyManager=cfs.getCompactionStrategyManager();
  assertTrue(strategyManager.getSSTableCountPerLevel()[1] > 0);
  assertTrue(strategyManager.getSSTableCountPerLevel()[2] > 0);
  Range<Token> range=new Range<>(Util.token(""),Util.token(""));
  int gcBefore=keyspace.getColumnFamilyStore(CF_STANDARDDLEVELED).gcBefore(FBUtilities.nowInSeconds());
  UUID parentRepSession=UUID.randomUUID();
  ActiveRepairService.instance.registerParentRepairSession(parentRepSession,Arrays.asList(cfs),Arrays.asList(range),false,System.currentTimeMillis(),true);
  RepairJobDesc desc=new RepairJobDesc(parentRepSession,UUID.randomUUID(),KEYSPACE1,CF_STANDARDDLEVELED,Arrays.asList(range));
  Validator validator=new Validator(desc,FBUtilities.getBroadcastAddress(),gcBefore);
  CompactionManager.instance.submitValidation(cfs,validator).get();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testCompactionProgress() throws Exception {
  byte[] b=new byte[100 * 1024];
  new Random().nextBytes(b);
  ByteBuffer value=ByteBuffer.wrap(b);
  int rows=2;
  int columns=10;
  for (int r=0; r < rows; r++) {
    UpdateBuilder update=UpdateBuilder.create(cfs.metadata,String.valueOf(r));
    for (int c=0; c < columns; c++)     update.newRow("column" + c).add("val",value);
    update.applyUnsafe();
    cfs.forceBlockingFlush();
  }
  waitForLeveling(cfs);
  LeveledCompactionStrategy strategy=(LeveledCompactionStrategy)cfs.getCompactionStrategyManager().getStrategies().get(1).get(0);
  assert strategy.getLevelSize(1) > 0;
  Collection<SSTableReader> sstables=strategy.manifest.getLevel(1);
  List<ISSTableScanner> scanners=strategy.getScanners(sstables).scanners;
  assertEquals(1,scanners.size());
  ISSTableScanner scanner=scanners.get(0);
  while (scanner.hasNext())   scanner.next();
  assertEquals(scanner.getCurrentPosition(),SSTableReader.getTotalUncompressedBytes(sstables));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNewRepairedSSTable() throws Exception {
  byte[] b=new byte[100 * 1024];
  new Random().nextBytes(b);
  ByteBuffer value=ByteBuffer.wrap(b);
  int rows=40;
  int columns=20;
  for (int r=0; r < rows; r++) {
    UpdateBuilder update=UpdateBuilder.create(cfs.metadata,String.valueOf(r));
    for (int c=0; c < columns; c++)     update.newRow("column" + c).add("val",value);
    update.applyUnsafe();
    cfs.forceBlockingFlush();
  }
  waitForLeveling(cfs);
  cfs.disableAutoCompaction();
  while (CompactionManager.instance.isCompacting(Arrays.asList(cfs)))   Thread.sleep(100);
  CompactionStrategyManager manager=cfs.getCompactionStrategyManager();
  List<List<AbstractCompactionStrategy>> strategies=manager.getStrategies();
  LeveledCompactionStrategy repaired=(LeveledCompactionStrategy)strategies.get(0).get(0);
  LeveledCompactionStrategy unrepaired=(LeveledCompactionStrategy)strategies.get(1).get(0);
  assertEquals(0,repaired.manifest.getLevelCount());
  assertEquals(2,unrepaired.manifest.getLevelCount());
  assertTrue(manager.getSSTableCountPerLevel()[1] > 0);
  assertTrue(manager.getSSTableCountPerLevel()[2] > 0);
  for (  SSTableReader sstable : cfs.getLiveSSTables())   assertFalse(sstable.isRepaired());
  int sstableCount=0;
  for (  List<SSTableReader> level : unrepaired.manifest.generations)   sstableCount+=level.size();
  assertEquals(sstableCount,cfs.getLiveSSTables().size());
  SSTableReader sstable1=unrepaired.manifest.generations[2].get(0);
  SSTableReader sstable2=unrepaired.manifest.generations[1].get(0);
  sstable1.descriptor.getMetadataSerializer().mutateRepairedAt(sstable1.descriptor,System.currentTimeMillis());
  sstable1.reloadSSTableMetadata();
  assertTrue(sstable1.isRepaired());
  manager.handleNotification(new SSTableRepairStatusChanged(Arrays.asList(sstable1)),this);
  int repairedSSTableCount=0;
  for (  List<SSTableReader> level : repaired.manifest.generations)   repairedSSTableCount+=level.size();
  assertEquals(1,repairedSSTableCount);
  assertTrue(repaired.manifest.generations[2].contains(sstable1));
  assertFalse(unrepaired.manifest.generations[2].contains(sstable1));
  unrepaired.removeSSTable(sstable2);
  manager.handleNotification(new SSTableAddedNotification(singleton(sstable2)),this);
  assertTrue(unrepaired.manifest.getLevel(1).contains(sstable2));
  assertFalse(repaired.manifest.getLevel(1).contains(sstable2));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMutateLevel() throws Exception {
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100 * 1024]);
  int rows=40;
  int columns=20;
  for (int r=0; r < rows; r++) {
    UpdateBuilder update=UpdateBuilder.create(cfs.metadata,String.valueOf(r));
    for (int c=0; c < columns; c++)     update.newRow("column" + c).add("val",value);
    update.applyUnsafe();
    cfs.forceBlockingFlush();
  }
  cfs.forceBlockingFlush();
  LeveledCompactionStrategy strategy=(LeveledCompactionStrategy)cfs.getCompactionStrategyManager().getStrategies().get(1).get(0);
  cfs.forceMajorCompaction();
  for (  SSTableReader s : cfs.getLiveSSTables()) {
    assertTrue(s.getSSTableLevel() != 6 && s.getSSTableLevel() > 0);
    strategy.manifest.remove(s);
    s.descriptor.getMetadataSerializer().mutateLevel(s.descriptor,6);
    s.reloadSSTableMetadata();
    strategy.manifest.add(s);
  }
  for (  SSTableReader s : cfs.getLiveSSTables())   assertEquals(6,s.getSSTableLevel());
  int[] levels=strategy.manifest.getAllLevelSize();
  assertEquals(cfs.getLiveSSTables().size(),levels[6]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.LongCompactionsTest </h4><pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStandardColumnCompactions(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore("Standard1");
  cfs.clearUnsafe();
  final int ROWS_PER_SSTABLE=10;
  final int SSTABLES=cfs.metadata.params.minIndexInterval * 3 / ROWS_PER_SSTABLE;
  cfs.disableAutoCompaction();
  long maxTimestampExpected=Long.MIN_VALUE;
  Set<DecoratedKey> inserted=new HashSet<DecoratedKey>();
  for (int j=0; j < SSTABLES; j++) {
    for (int i=0; i < ROWS_PER_SSTABLE; i++) {
      DecoratedKey key=Util.dk(String.valueOf(i % 2));
      long timestamp=j * ROWS_PER_SSTABLE + i;
      maxTimestampExpected=Math.max(timestamp,maxTimestampExpected);
      UpdateBuilder.create(cfs.metadata,key).withTimestamp(timestamp).newRow(String.valueOf(i / 2)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).apply();
      inserted.add(key);
    }
    cfs.forceBlockingFlush();
    CompactionsTest.assertMaxTimestamp(cfs,maxTimestampExpected);
    assertEquals(inserted.toString(),inserted.size(),Util.getAll(Util.cmd(cfs).build()).size());
  }
  forceCompactions(cfs);
  assertEquals(inserted.toString(),inserted.size(),Util.getAll(Util.cmd(cfs).build()).size());
  CompactionsTest.assertMaxTimestamp(cfs,maxTimestampExpected);
  cfs.truncateBlocking();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.SizeTieredCompactionStrategyTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrepBucket() throws Exception {
  String ksname=KEYSPACE1;
  String cfname="Standard1";
  Keyspace keyspace=Keyspace.open(ksname);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  cfs.truncateBlocking();
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  int numSSTables=3;
  for (int r=0; r < numSSTables; r++) {
    String key=String.valueOf(r);
    new RowUpdateBuilder(cfs.metadata,0,key).clustering("column").add("val",value).build().applyUnsafe();
    cfs.forceBlockingFlush();
  }
  cfs.forceBlockingFlush();
  List<SSTableReader> sstrs=new ArrayList<>(cfs.getLiveSSTables());
  Pair<List<SSTableReader>,Double> bucket;
  List<SSTableReader> interestingBucket=mostInterestingBucket(Collections.singletonList(sstrs.subList(0,2)),4,32);
  assertTrue("nothing should be returned when all buckets are below the min threshold",interestingBucket.isEmpty());
  sstrs.get(0).overrideReadMeter(new RestorableMeter(100.0,100.0));
  sstrs.get(1).overrideReadMeter(new RestorableMeter(200.0,200.0));
  sstrs.get(2).overrideReadMeter(new RestorableMeter(300.0,300.0));
  long estimatedKeys=sstrs.get(0).estimatedKeys();
  bucket=trimToThresholdWithHotness(sstrs,2);
  assertEquals("one bucket should have been dropped",2,bucket.left.size());
  double expectedBucketHotness=(200.0 + 300.0) / estimatedKeys;
  assertEquals(String.format("bucket hotness (%f) should be close to %f",bucket.right,expectedBucketHotness),expectedBucketHotness,bucket.right,1.0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.TTLExpiryTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleExpire() throws InterruptedException {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore("Standard1");
  cfs.disableAutoCompaction();
  cfs.metadata.gcGraceSeconds(0);
  long timestamp=System.currentTimeMillis();
  String key="ttl";
  new RowUpdateBuilder(cfs.metadata,timestamp,1,key).add("col",ByteBufferUtil.EMPTY_BYTE_BUFFER).add("col7",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,timestamp,1,key).add("col2",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,timestamp,1,key).add("col3",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,timestamp,1,key).add("col311",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  Thread.sleep(2000);
  assertEquals(4,cfs.getLiveSSTables().size());
  cfs.enableAutoCompaction(true);
  assertEquals(0,cfs.getLiveSSTables().size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAggressiveFullyExpired(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore("Standard1");
  cfs.disableAutoCompaction();
  cfs.metadata.gcGraceSeconds(0);
  String key="ttl";
  new RowUpdateBuilder(cfs.metadata,1L,1,key).add("col1",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,3L,1,key).add("col2",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,2L,1,key).add("col1",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,5L,1,key).add("col2",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,4L,1,key).add("col1",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,7L,1,key).add("shadow",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,6L,3,key).add("shadow",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  new RowUpdateBuilder(cfs.metadata,8L,1,key).add("col2",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  Set<SSTableReader> sstables=Sets.newHashSet(cfs.getLiveSSTables());
  int now=(int)(System.currentTimeMillis() / 1000);
  int gcBefore=now + 2;
  Set<SSTableReader> expired=CompactionController.getFullyExpiredSSTables(cfs,sstables,Collections.EMPTY_SET,gcBefore);
  assertEquals(2,expired.size());
  cfs.clearUnsafe();
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoExpire() throws InterruptedException, IOException {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore("Standard1");
  cfs.disableAutoCompaction();
  cfs.metadata.gcGraceSeconds(0);
  long timestamp=System.currentTimeMillis();
  String key="ttl";
  new RowUpdateBuilder(cfs.metadata,timestamp,1,key).add("col",ByteBufferUtil.EMPTY_BYTE_BUFFER).add("col7",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,timestamp,1,key).add("col2",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  new RowUpdateBuilder(cfs.metadata,timestamp,1,key).add("col3",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  String noTTLKey="nottl";
  new RowUpdateBuilder(cfs.metadata,timestamp,noTTLKey).add("col311",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  Thread.sleep(2000);
  assertEquals(4,cfs.getLiveSSTables().size());
  cfs.enableAutoCompaction(true);
  assertEquals(1,cfs.getLiveSSTables().size());
  SSTableReader sstable=cfs.getLiveSSTables().iterator().next();
  ISSTableScanner scanner=sstable.getScanner(ColumnFilter.all(sstable.metadata),DataRange.allData(cfs.getPartitioner()),false);
  assertTrue(scanner.hasNext());
  while (scanner.hasNext()) {
    UnfilteredRowIterator iter=scanner.next();
    assertEquals(Util.dk(noTTLKey),iter.partitionKey());
  }
  scanner.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckForExpiredSSTableBlockers() throws InterruptedException {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore("Standard1");
  cfs.truncateBlocking();
  cfs.disableAutoCompaction();
  cfs.metadata.gcGraceSeconds(0);
  new RowUpdateBuilder(cfs.metadata,System.currentTimeMillis(),"test").noRowMarker().add("col1",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  cfs.forceBlockingFlush();
  SSTableReader blockingSSTable=cfs.getSSTables(SSTableSet.LIVE).iterator().next();
  for (int i=0; i < 10; i++) {
    new RowUpdateBuilder(cfs.metadata,System.currentTimeMillis(),"test").noRowMarker().delete("col1").build().applyUnsafe();
    cfs.forceBlockingFlush();
  }
  Multimap<SSTableReader,SSTableReader> blockers=SSTableExpiredBlockers.checkForExpiredSSTableBlockers(cfs.getSSTables(SSTableSet.LIVE),(int)(System.currentTimeMillis() / 1000) + 100);
  assertEquals(1,blockers.keySet().size());
  assertTrue(blockers.keySet().contains(blockingSSTable));
  assertEquals(10,blockers.get(blockingSSTable).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.context.CounterContextTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetGlockAndCountOf(){
  ContextState state=ContextState.allocate(3,3,3);
  state.writeGlobal(CounterId.fromInt(1),1L,1L);
  state.writeRemote(CounterId.fromInt(2),2L,2L);
  state.writeLocal(CounterId.fromInt(3),3L,3L);
  state.writeGlobal(CounterId.fromInt(4),4L,4L);
  state.writeRemote(CounterId.fromInt(5),5L,5L);
  state.writeLocal(CounterId.fromInt(6),6L,6L);
  state.writeGlobal(CounterId.fromInt(7),7L,7L);
  state.writeRemote(CounterId.fromInt(8),8L,8L);
  state.writeLocal(CounterId.fromInt(9),9L,9L);
  assertEquals(ClockAndCount.create(1L,1L),cc.getClockAndCountOf(state.context,CounterId.fromInt(1)));
  assertEquals(ClockAndCount.create(2L,2L),cc.getClockAndCountOf(state.context,CounterId.fromInt(2)));
  assertEquals(ClockAndCount.create(3L,3L),cc.getClockAndCountOf(state.context,CounterId.fromInt(3)));
  assertEquals(ClockAndCount.create(4L,4L),cc.getClockAndCountOf(state.context,CounterId.fromInt(4)));
  assertEquals(ClockAndCount.create(5L,5L),cc.getClockAndCountOf(state.context,CounterId.fromInt(5)));
  assertEquals(ClockAndCount.create(6L,6L),cc.getClockAndCountOf(state.context,CounterId.fromInt(6)));
  assertEquals(ClockAndCount.create(7L,7L),cc.getClockAndCountOf(state.context,CounterId.fromInt(7)));
  assertEquals(ClockAndCount.create(8L,8L),cc.getClockAndCountOf(state.context,CounterId.fromInt(8)));
  assertEquals(ClockAndCount.create(9L,9L),cc.getClockAndCountOf(state.context,CounterId.fromInt(9)));
  assertEquals(ClockAndCount.create(0L,0L),cc.getClockAndCountOf(state.context,CounterId.fromInt(0)));
  assertEquals(ClockAndCount.create(0L,0L),cc.getClockAndCountOf(state.context,CounterId.fromInt(10)));
  assertEquals(ClockAndCount.create(0L,0L),cc.getClockAndCountOf(state.context,CounterId.fromInt(15)));
  assertEquals(ClockAndCount.create(0L,0L),cc.getClockAndCountOf(state.context,CounterId.fromInt(20)));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMerge(){
  ContextState left=ContextState.allocate(0,1,3);
  left.writeRemote(CounterId.fromInt(1),1L,1L);
  left.writeRemote(CounterId.fromInt(2),2L,2L);
  left.writeRemote(CounterId.fromInt(4),6L,3L);
  left.writeLocal(CounterId.getLocalId(),7L,3L);
  ContextState right=ContextState.allocate(0,1,2);
  right.writeRemote(CounterId.fromInt(4),4L,4L);
  right.writeRemote(CounterId.fromInt(5),5L,5L);
  right.writeLocal(CounterId.getLocalId(),2L,9L);
  ByteBuffer merged=cc.merge(left.context,right.context);
  int hd=4;
  assertEquals(hd + 5 * stepLength,merged.remaining());
  assertTrue(Util.equalsCounterId(CounterId.getLocalId(),merged,hd + 4 * stepLength));
  assertEquals(9L,merged.getLong(merged.position() + hd + 4 * stepLength + idLength));
  assertEquals(12L,merged.getLong(merged.position() + hd + 4 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(4),merged,hd + 2 * stepLength));
  assertEquals(6L,merged.getLong(merged.position() + hd + 2 * stepLength + idLength));
  assertEquals(3L,merged.getLong(merged.position() + hd + 2 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(5),merged,hd + 3 * stepLength));
  assertEquals(5L,merged.getLong(merged.position() + hd + 3 * stepLength + idLength));
  assertEquals(5L,merged.getLong(merged.position() + hd + 3 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),merged,hd + stepLength));
  assertEquals(2L,merged.getLong(merged.position() + hd + stepLength+ idLength));
  assertEquals(2L,merged.getLong(merged.position() + hd + stepLength+ idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),merged,hd));
  assertEquals(1L,merged.getLong(merged.position() + hd + idLength));
  assertEquals(1L,merged.getLong(merged.position() + hd + idLength+ clockLength));
  left=ContextState.allocate(3,0,0);
  left.writeGlobal(CounterId.fromInt(1),1L,1L);
  left.writeGlobal(CounterId.fromInt(2),2L,2L);
  left.writeGlobal(CounterId.fromInt(3),3L,3L);
  right=ContextState.allocate(3,0,0);
  right.writeGlobal(CounterId.fromInt(3),6L,6L);
  right.writeGlobal(CounterId.fromInt(4),4L,4L);
  right.writeGlobal(CounterId.fromInt(5),5L,5L);
  merged=cc.merge(left.context,right.context);
  assertEquals(headerSizeLength + 5 * headerEltLength + 5 * stepLength,merged.remaining());
  assertEquals(18L,cc.total(merged));
  assertEquals(5,merged.getShort(merged.position()));
  int headerLength=headerSizeLength + 5 * headerEltLength;
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),merged,headerLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + idLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),merged,headerLength + stepLength));
  assertEquals(2L,merged.getLong(merged.position() + headerLength + stepLength+ idLength));
  assertEquals(2L,merged.getLong(merged.position() + headerLength + stepLength+ idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(3),merged,headerLength + 2 * stepLength));
  assertEquals(6L,merged.getLong(merged.position() + headerLength + 2 * stepLength + idLength));
  assertEquals(6L,merged.getLong(merged.position() + headerLength + 2 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(4),merged,headerLength + 3 * stepLength));
  assertEquals(4L,merged.getLong(merged.position() + headerLength + 3 * stepLength + idLength));
  assertEquals(4L,merged.getLong(merged.position() + headerLength + 3 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(5),merged,headerLength + 4 * stepLength));
  assertEquals(5L,merged.getLong(merged.position() + headerLength + 4 * stepLength + idLength));
  assertEquals(5L,merged.getLong(merged.position() + headerLength + 4 * stepLength + idLength + clockLength));
  left=ContextState.allocate(1,0,0);
  left.writeGlobal(CounterId.fromInt(1),10L,20L);
  right=ContextState.allocate(1,0,0);
  right.writeGlobal(CounterId.fromInt(1),10L,30L);
  merged=cc.merge(left.context,right.context);
  headerLength=headerSizeLength + headerEltLength;
  assertEquals(headerLength + stepLength,merged.remaining());
  assertEquals(30L,cc.total(merged));
  assertEquals(1,merged.getShort(merged.position()));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),merged,headerLength));
  assertEquals(10L,merged.getLong(merged.position() + headerLength + idLength));
  assertEquals(30L,merged.getLong(merged.position() + headerLength + idLength+ clockLength));
  left=ContextState.allocate(2,0,0);
  left.writeGlobal(CounterId.fromInt(1),1L,1L);
  left.writeGlobal(CounterId.fromInt(2),1L,1L);
  right=ContextState.allocate(0,1,1);
  right.writeLocal(CounterId.fromInt(1),100L,100L);
  right.writeRemote(CounterId.fromInt(2),100L,100L);
  merged=cc.merge(left.context,right.context);
  headerLength=headerSizeLength + 2 * headerEltLength;
  assertEquals(headerLength + 2 * stepLength,merged.remaining());
  assertEquals(2L,cc.total(merged));
  assertEquals(2,merged.getShort(merged.position()));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),merged,headerLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + idLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),merged,headerLength + stepLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + stepLength+ idLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + stepLength+ idLength+ clockLength));
}

</code></pre>

<br>
<pre class="type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testDiff(){
  ContextState left;
  ContextState right;
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.wrap(ByteBufferUtil.clone(left.context));
  assertEquals(Relationship.EQUAL,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,4);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  left.writeRemote(CounterId.fromInt(12),0L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),3L,0L);
  right.writeRemote(CounterId.fromInt(6),2L,0L);
  right.writeRemote(CounterId.fromInt(9),1L,0L);
  assertEquals(Relationship.GREATER_THAN,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,4);
  right.writeRemote(CounterId.fromInt(3),3L,0L);
  right.writeRemote(CounterId.fromInt(6),2L,0L);
  right.writeRemote(CounterId.fromInt(9),1L,0L);
  right.writeRemote(CounterId.fromInt(12),0L,0L);
  assertEquals(Relationship.LESS_THAN,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),3L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),3L,0L);
  right.writeRemote(CounterId.fromInt(6),2L,0L);
  right.writeRemote(CounterId.fromInt(9),1L,0L);
  assertEquals(Relationship.GREATER_THAN,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),3L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),3L,0L);
  right.writeRemote(CounterId.fromInt(6),9L,0L);
  right.writeRemote(CounterId.fromInt(9),3L,0L);
  assertEquals(Relationship.LESS_THAN,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),1L,0L);
  left.writeRemote(CounterId.fromInt(4),1L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),1L,0L);
  right.writeRemote(CounterId.fromInt(6),1L,0L);
  right.writeRemote(CounterId.fromInt(9),1L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),1L,0L);
  left.writeRemote(CounterId.fromInt(4),1L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(2),1L,0L);
  right.writeRemote(CounterId.fromInt(6),1L,0L);
  right.writeRemote(CounterId.fromInt(12),1L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),1L,0L);
  left.writeRemote(CounterId.fromInt(6),3L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),1L,0L);
  right.writeRemote(CounterId.fromInt(6),1L,0L);
  right.writeRemote(CounterId.fromInt(9),5L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),2L,0L);
  left.writeRemote(CounterId.fromInt(6),3L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),1L,0L);
  right.writeRemote(CounterId.fromInt(6),9L,0L);
  right.writeRemote(CounterId.fromInt(9),5L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,4);
  left.writeRemote(CounterId.fromInt(3),2L,0L);
  left.writeRemote(CounterId.fromInt(6),3L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  left.writeRemote(CounterId.fromInt(12),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),4L,0L);
  right.writeRemote(CounterId.fromInt(6),9L,0L);
  right.writeRemote(CounterId.fromInt(9),5L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),5L,0L);
  left.writeRemote(CounterId.fromInt(6),3L,0L);
  left.writeRemote(CounterId.fromInt(9),2L,0L);
  right=ContextState.allocate(0,0,4);
  right.writeRemote(CounterId.fromInt(3),4L,0L);
  right.writeRemote(CounterId.fromInt(6),3L,0L);
  right.writeRemote(CounterId.fromInt(9),2L,0L);
  right.writeRemote(CounterId.fromInt(12),1L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),5L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),2L,0L);
  right=ContextState.allocate(0,0,4);
  right.writeRemote(CounterId.fromInt(3),4L,0L);
  right.writeRemote(CounterId.fromInt(6),3L,0L);
  right.writeRemote(CounterId.fromInt(9),2L,0L);
  right.writeRemote(CounterId.fromInt(12),1L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,4);
  left.writeRemote(CounterId.fromInt(3),5L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(7),2L,0L);
  left.writeRemote(CounterId.fromInt(9),2L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),4L,0L);
  right.writeRemote(CounterId.fromInt(6),3L,0L);
  right.writeRemote(CounterId.fromInt(9),2L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-14 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClearLocal(){
  ContextState state;
  ByteBuffer marked;
  ByteBuffer cleared;
  state=ContextState.allocate(0,0,1);
  state.writeRemote(CounterId.fromInt(1),1L,1L);
  assertFalse(cc.shouldClearLocal(state.context));
  marked=cc.markLocalToBeCleared(state.context);
  assertEquals(0,marked.getShort(marked.position()));
  assertSame(state.context,marked);
  cleared=cc.clearAllLocal(marked);
  assertSame(cleared,marked);
  state=ContextState.allocate(0,1,0);
  state.writeLocal(CounterId.fromInt(1),1L,1L);
  assertFalse(cc.shouldClearLocal(state.context));
  marked=cc.markLocalToBeCleared(state.context);
  assertTrue(cc.shouldClearLocal(marked));
  assertEquals(-1,marked.getShort(marked.position()));
  assertNotSame(state.context,marked);
  cleared=cc.clearAllLocal(marked);
  assertFalse(cc.shouldClearLocal(cleared));
  assertEquals(0,cleared.getShort(cleared.position()));
  state=ContextState.allocate(2,1,0);
  state.writeLocal(CounterId.fromInt(1),1L,1L);
  state.writeGlobal(CounterId.fromInt(2),2L,2L);
  state.writeGlobal(CounterId.fromInt(3),3L,3L);
  assertFalse(cc.shouldClearLocal(state.context));
  marked=cc.markLocalToBeCleared(state.context);
  assertTrue(cc.shouldClearLocal(marked));
  assertEquals(-3,marked.getShort(marked.position()));
  assertEquals(0,marked.getShort(marked.position() + headerSizeLength));
  assertEquals(Short.MIN_VALUE + 1,marked.getShort(marked.position() + headerSizeLength + headerEltLength));
  assertEquals(Short.MIN_VALUE + 2,marked.getShort(marked.position() + headerSizeLength + 2 * headerEltLength));
  int headerLength=headerSizeLength + 3 * headerEltLength;
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),marked,headerLength));
  assertEquals(1L,marked.getLong(marked.position() + headerLength + idLength));
  assertEquals(1L,marked.getLong(marked.position() + headerLength + idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),marked,headerLength + stepLength));
  assertEquals(2L,marked.getLong(marked.position() + headerLength + stepLength+ idLength));
  assertEquals(2L,marked.getLong(marked.position() + headerLength + stepLength+ idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(3),marked,headerLength + 2 * stepLength));
  assertEquals(3L,marked.getLong(marked.position() + headerLength + 2 * stepLength + idLength));
  assertEquals(3L,marked.getLong(marked.position() + headerLength + 2 * stepLength + idLength + clockLength));
  cleared=cc.clearAllLocal(marked);
  assertFalse(cc.shouldClearLocal(cleared));
  assertEquals(2,cleared.getShort(cleared.position()));
  assertEquals(Short.MIN_VALUE + 1,cleared.getShort(marked.position() + headerEltLength));
  assertEquals(Short.MIN_VALUE + 2,cleared.getShort(marked.position() + headerSizeLength + headerEltLength));
  headerLength=headerSizeLength + 2 * headerEltLength;
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),cleared,headerLength));
  assertEquals(1L,cleared.getLong(cleared.position() + headerLength + idLength));
  assertEquals(1L,cleared.getLong(cleared.position() + headerLength + idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),cleared,headerLength + stepLength));
  assertEquals(2L,cleared.getLong(cleared.position() + headerLength + stepLength+ idLength));
  assertEquals(2L,cleared.getLong(cleared.position() + headerLength + stepLength+ idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(3),cleared,headerLength + 2 * stepLength));
  assertEquals(3L,cleared.getLong(cleared.position() + headerLength + 2 * stepLength + idLength));
  assertEquals(3L,cleared.getLong(cleared.position() + headerLength + 2 * stepLength + idLength + clockLength));
  state=ContextState.allocate(1,0,0);
  state.writeGlobal(CounterId.fromInt(1),1L,1L);
  assertFalse(cc.shouldClearLocal(state.context));
  marked=cc.markLocalToBeCleared(state.context);
  assertEquals(1,marked.getShort(marked.position()));
  assertSame(state.context,marked);
  cleared=cc.clearAllLocal(marked);
  assertSame(cleared,marked);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFindPositionOf(){
  ContextState state=ContextState.allocate(3,3,3);
  state.writeGlobal(CounterId.fromInt(1),1L,1L);
  state.writeRemote(CounterId.fromInt(2),2L,2L);
  state.writeLocal(CounterId.fromInt(3),3L,3L);
  state.writeGlobal(CounterId.fromInt(4),4L,4L);
  state.writeRemote(CounterId.fromInt(5),5L,5L);
  state.writeLocal(CounterId.fromInt(6),6L,6L);
  state.writeGlobal(CounterId.fromInt(7),7L,7L);
  state.writeRemote(CounterId.fromInt(8),8L,8L);
  state.writeLocal(CounterId.fromInt(9),9L,9L);
  int headerLength=headerSizeLength + 6 * headerEltLength;
  assertEquals(headerLength,cc.findPositionOf(state.context,CounterId.fromInt(1)));
  assertEquals(headerLength + stepLength,cc.findPositionOf(state.context,CounterId.fromInt(2)));
  assertEquals(headerLength + 2 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(3)));
  assertEquals(headerLength + 3 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(4)));
  assertEquals(headerLength + 4 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(5)));
  assertEquals(headerLength + 5 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(6)));
  assertEquals(headerLength + 6 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(7)));
  assertEquals(headerLength + 7 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(8)));
  assertEquals(headerLength + 8 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(9)));
  assertEquals(-1,cc.findPositionOf(state.context,CounterId.fromInt(0)));
  assertEquals(-1,cc.findPositionOf(state.context,CounterId.fromInt(10)));
  assertEquals(-1,cc.findPositionOf(state.context,CounterId.fromInt(15)));
  assertEquals(-1,cc.findPositionOf(state.context,CounterId.fromInt(20)));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTotal(){
  ContextState mixed=ContextState.allocate(0,1,4);
  mixed.writeRemote(CounterId.fromInt(1),1L,1L);
  mixed.writeRemote(CounterId.fromInt(2),2L,2L);
  mixed.writeRemote(CounterId.fromInt(4),4L,4L);
  mixed.writeRemote(CounterId.fromInt(5),5L,5L);
  mixed.writeLocal(CounterId.getLocalId(),12L,12L);
  assertEquals(24L,cc.total(mixed.context));
  ContextState global=ContextState.allocate(3,0,0);
  global.writeGlobal(CounterId.fromInt(1),1L,1L);
  global.writeGlobal(CounterId.fromInt(2),2L,2L);
  global.writeGlobal(CounterId.fromInt(3),3L,3L);
  assertEquals(6L,cc.total(global.context));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.lifecycle.LifecycleTransactionTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdates(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  Tracker tracker=new Tracker(null,false);
  SSTableReader[] readers=readersArray(0,3,cfs);
  SSTableReader[] readers2=readersArray(0,4,cfs);
  SSTableReader[] readers3=readersArray(0,4,cfs);
  tracker.addInitialSSTables(copyOf(readers));
  LifecycleTransaction txn=tracker.tryModify(copyOf(readers),OperationType.UNKNOWN);
  txn.update(readers2[0],true);
  txn.obsolete(readers[1]);
  Assert.assertTrue(txn.isObsolete(readers[1]));
  Assert.assertFalse(txn.isObsolete(readers[0]));
  testBadUpdate(txn,readers2[0],true);
  testBadUpdate(txn,readers2[1],true);
  testBadUpdate(txn,readers3[0],true);
  testBadUpdate(txn,readers2[2],false);
  testBadUpdate(txn,readers2[3],true);
  testBadObsolete(txn,readers[1]);
  testBadObsolete(txn,readers2[0]);
  txn.update(readers2[3],false);
  Assert.assertEquals(3,tracker.getView().compacting.size());
  txn.checkpoint();
  Assert.assertTrue(txn.isObsolete(readers[1]));
  Assert.assertFalse(txn.isObsolete(readers[0]));
  Assert.assertEquals(4,tracker.getView().compacting.size());
  Assert.assertEquals(3,tracker.getView().sstables.size());
  Assert.assertEquals(3,size(txn.current()));
  Assert.assertTrue(all(of(readers2[0],readers[2],readers2[3]),idIn(tracker.getView().sstablesMap)));
  Assert.assertTrue(all(txn.current(),idIn(tracker.getView().sstablesMap)));
  testBadObsolete(txn,readers[1]);
  testBadObsolete(txn,readers2[2]);
  testBadObsolete(txn,readers2[3]);
  testBadUpdate(txn,readers3[1],true);
  testBadUpdate(txn,readers2[0],true);
  txn.update(readers3[0],true);
  txn.checkpoint();
  Assert.assertEquals(4,tracker.getView().compacting.size());
  Assert.assertEquals(3,tracker.getView().sstables.size());
  Assert.assertEquals(3,size(txn.current()));
  Assert.assertTrue(all(of(readers3[0],readers[2],readers2[3]),idIn(tracker.getView().sstablesMap)));
  Assert.assertTrue(all(txn.current(),idIn(tracker.getView().sstablesMap)));
  testBadObsolete(txn,readers2[0]);
  txn.obsoleteOriginals();
  txn.checkpoint();
  Assert.assertEquals(1,tracker.getView().sstables.size());
  txn.obsoleteOriginals();
  txn.checkpoint();
  Assert.assertEquals(1,tracker.getView().sstables.size());
  Assert.assertEquals(4,tracker.getView().compacting.size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  Tracker tracker=new Tracker(null,false);
  List<SSTableReader> readers=readers(0,4,cfs);
  tracker.addInitialSSTables(readers);
  LifecycleTransaction txn=tracker.tryModify(readers,OperationType.UNKNOWN);
  txn.cancel(readers.get(3));
  LifecycleTransaction txn2=txn.split(readers.subList(0,1));
  Assert.assertEquals(2,txn.originals().size());
  Assert.assertTrue(all(readers.subList(1,3),in(txn.originals())));
  Assert.assertEquals(1,txn2.originals().size());
  Assert.assertTrue(all(readers.subList(0,1),in(txn2.originals())));
  txn.update(readers(1,2,cfs).get(0),true);
  boolean failed=false;
  try {
    txn.split(readers.subList(2,3));
  }
 catch (  Throwable t) {
    failed=true;
  }
  Assert.assertTrue(failed);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCancellation(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  Tracker tracker=new Tracker(null,false);
  List<SSTableReader> readers=readers(0,3,cfs);
  tracker.addInitialSSTables(readers);
  LifecycleTransaction txn=tracker.tryModify(readers,OperationType.UNKNOWN);
  SSTableReader cancel=readers.get(0);
  SSTableReader update=readers(1,2,cfs).get(0);
  SSTableReader fresh=readers(3,4,cfs).get(0);
  SSTableReader notPresent=readers(4,5,cfs).get(0);
  txn.cancel(cancel);
  txn.update(update,true);
  txn.update(fresh,false);
  testBadCancel(txn,cancel);
  testBadCancel(txn,update);
  testBadCancel(txn,fresh);
  testBadCancel(txn,notPresent);
  Assert.assertEquals(2,txn.originals().size());
  Assert.assertEquals(2,tracker.getView().compacting.size());
  Assert.assertTrue(all(readers.subList(1,3),idIn(tracker.getView().compacting)));
  txn.checkpoint();
  testBadCancel(txn,cancel);
  testBadCancel(txn,update);
  testBadCancel(txn,fresh);
  testBadCancel(txn,notPresent);
  Assert.assertEquals(2,txn.originals().size());
  Assert.assertEquals(3,tracker.getView().compacting.size());
  Assert.assertEquals(3,size(txn.current()));
  Assert.assertTrue(all(concat(readers.subList(1,3),of(fresh)),idIn(tracker.getView().compacting)));
  txn.cancel(readers.get(2));
  Assert.assertEquals(1,txn.originals().size());
  Assert.assertEquals(2,tracker.getView().compacting.size());
  Assert.assertEquals(2,size(txn.current()));
  Assert.assertTrue(all(of(readers.get(1),fresh),idIn(tracker.getView().compacting)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.lifecycle.LogTransactionTest </h4><pre class="type-7 type-4 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
"></span><br>
@Test public void testCommitSameDesc() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstableOld1=sstable(dataFolder,cfs,0,128);
  SSTableReader sstableOld2=sstable(dataFolder,cfs,0,256);
  SSTableReader sstableNew=sstable(dataFolder,cfs,1,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  log.trackNew(sstableNew);
  sstableOld1.setReplaced();
  LogTransaction.SSTableTidier tidier=log.obsoleted(sstableOld2);
  assertNotNull(tidier);
  log.finish();
  sstableOld2.markObsolete(tidier);
  sstableOld1.selfRef().release();
  sstableOld2.selfRef().release();
  assertFiles(dataFolder.getPath(),new HashSet<>(sstableNew.getAllFilePaths()));
  sstableNew.selfRef().release();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
"></span><br>
@Test public void testCommitOnlyOld() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstable=sstable(dataFolder,cfs,0,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  LogTransaction.SSTableTidier tidier=log.obsoleted(sstable);
  assertNotNull(tidier);
  log.finish();
  sstable.markObsolete(tidier);
  sstable.selfRef().release();
  assertFiles(dataFolder.getPath(),new HashSet<>());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
"></span><br>
@Test public void testAbortOnlyOld() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstable=sstable(dataFolder,cfs,0,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  LogTransaction.SSTableTidier tidier=log.obsoleted(sstable);
  assertNotNull(tidier);
  tidier.abort();
  log.abort();
  sstable.selfRef().release();
  assertFiles(dataFolder.getPath(),new HashSet<>(sstable.getAllFilePaths()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.lifecycle.TrackerTest </h4><pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMemtableReplacement(){
  boolean backups=DatabaseDescriptor.isIncrementalBackupsEnabled();
  DatabaseDescriptor.setIncrementalBackupsEnabled(false);
  ColumnFamilyStore cfs=MockSchema.newCFS();
  MockListener listener=new MockListener(false);
  Tracker tracker=cfs.getTracker();
  tracker.subscribe(listener);
  Memtable prev1=tracker.switchMemtable(true);
  OpOrder.Group write1=cfs.keyspace.writeOrder.getCurrent();
  OpOrder.Barrier barrier1=cfs.keyspace.writeOrder.newBarrier();
  prev1.setDiscarding(barrier1,new AtomicReference<ReplayPosition>());
  barrier1.issue();
  Memtable prev2=tracker.switchMemtable(false);
  OpOrder.Group write2=cfs.keyspace.writeOrder.getCurrent();
  OpOrder.Barrier barrier2=cfs.keyspace.writeOrder.newBarrier();
  prev2.setDiscarding(barrier2,new AtomicReference<ReplayPosition>());
  barrier2.issue();
  Memtable cur=tracker.getView().getCurrentMemtable();
  OpOrder.Group writecur=cfs.keyspace.writeOrder.getCurrent();
  Assert.assertEquals(prev1,tracker.getMemtableFor(write1,ReplayPosition.NONE));
  Assert.assertEquals(prev2,tracker.getMemtableFor(write2,ReplayPosition.NONE));
  Assert.assertEquals(cur,tracker.getMemtableFor(writecur,ReplayPosition.NONE));
  Assert.assertEquals(1,listener.received.size());
  Assert.assertTrue(listener.received.get(0) instanceof MemtableRenewedNotification);
  listener.received.clear();
  tracker.markFlushing(prev2);
  Assert.assertEquals(1,tracker.getView().flushingMemtables.size());
  Assert.assertTrue(tracker.getView().flushingMemtables.contains(prev2));
  tracker.markFlushing(prev1);
  Assert.assertTrue(tracker.getView().flushingMemtables.contains(prev1));
  Assert.assertEquals(2,tracker.getView().flushingMemtables.size());
  tracker.replaceFlushed(prev1,null);
  Assert.assertEquals(1,tracker.getView().flushingMemtables.size());
  Assert.assertTrue(tracker.getView().flushingMemtables.contains(prev2));
  SSTableReader reader=MockSchema.sstable(0,10,false,cfs);
  tracker.replaceFlushed(prev2,singleton(reader));
  Assert.assertEquals(1,tracker.getView().sstables.size());
  Assert.assertEquals(1,listener.received.size());
  Assert.assertEquals(singleton(reader),((SSTableAddedNotification)listener.received.get(0)).added);
  listener.received.clear();
  Assert.assertTrue(reader.isKeyCacheSetup());
  Assert.assertEquals(10,cfs.metric.liveDiskSpaceUsed.getCount());
  cfs=MockSchema.newCFS();
  tracker=cfs.getTracker();
  listener=new MockListener(false);
  tracker.subscribe(listener);
  prev1=tracker.switchMemtable(false);
  tracker.markFlushing(prev1);
  reader=MockSchema.sstable(0,10,true,cfs);
  cfs.invalidate(false);
  tracker.replaceFlushed(prev1,singleton(reader));
  Assert.assertEquals(0,tracker.getView().sstables.size());
  Assert.assertEquals(0,tracker.getView().flushingMemtables.size());
  Assert.assertEquals(0,cfs.metric.liveDiskSpaceUsed.getCount());
  Assert.assertEquals(3,listener.received.size());
  Assert.assertEquals(singleton(reader),((SSTableAddedNotification)listener.received.get(0)).added);
  Assert.assertTrue(listener.received.get(1) instanceof SSTableDeletingNotification);
  Assert.assertEquals(1,((SSTableListChangedNotification)listener.received.get(2)).removed.size());
  DatabaseDescriptor.setIncrementalBackupsEnabled(backups);
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddSSTables(){
  boolean backups=DatabaseDescriptor.isIncrementalBackupsEnabled();
  DatabaseDescriptor.setIncrementalBackupsEnabled(false);
  ColumnFamilyStore cfs=MockSchema.newCFS();
  Tracker tracker=new Tracker(cfs,false);
  MockListener listener=new MockListener(false);
  tracker.subscribe(listener);
  List<SSTableReader> readers=ImmutableList.of(MockSchema.sstable(0,17,cfs),MockSchema.sstable(1,121,cfs),MockSchema.sstable(2,9,cfs));
  tracker.addSSTables(copyOf(readers));
  Assert.assertEquals(3,tracker.view.get().sstables.size());
  for (  SSTableReader reader : readers)   Assert.assertTrue(reader.isKeyCacheSetup());
  Assert.assertEquals(17 + 121 + 9,cfs.metric.liveDiskSpaceUsed.getCount());
  Assert.assertEquals(1,listener.senders.size());
  Assert.assertEquals(tracker,listener.senders.get(0));
  Assert.assertTrue(listener.received.get(0) instanceof SSTableAddedNotification);
  DatabaseDescriptor.setIncrementalBackupsEnabled(backups);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotifications(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  SSTableReader r1=MockSchema.sstable(0,cfs), r2=MockSchema.sstable(1,cfs);
  Tracker tracker=new Tracker(null,false);
  MockListener listener=new MockListener(false);
  tracker.subscribe(listener);
  tracker.notifyAdded(singleton(r1));
  Assert.assertEquals(singleton(r1),((SSTableAddedNotification)listener.received.get(0)).added);
  listener.received.clear();
  tracker.notifyDeleting(r1);
  Assert.assertEquals(r1,((SSTableDeletingNotification)listener.received.get(0)).deleting);
  listener.received.clear();
  Assert.assertNull(tracker.notifySSTablesChanged(singleton(r1),singleton(r2),OperationType.COMPACTION,null));
  Assert.assertEquals(singleton(r1),((SSTableListChangedNotification)listener.received.get(0)).removed);
  Assert.assertEquals(singleton(r2),((SSTableListChangedNotification)listener.received.get(0)).added);
  listener.received.clear();
  tracker.notifySSTableRepairedStatusChanged(singleton(r1));
  Assert.assertEquals(singleton(r1),((SSTableRepairStatusChanged)listener.received.get(0)).sstable);
  listener.received.clear();
  Memtable memtable=MockSchema.memtable(cfs);
  tracker.notifyRenewed(memtable);
  Assert.assertEquals(memtable,((MemtableRenewedNotification)listener.received.get(0)).renewed);
  listener.received.clear();
  tracker.unsubscribe(listener);
  MockListener failListener=new MockListener(true);
  tracker.subscribe(failListener);
  tracker.subscribe(listener);
  Assert.assertNotNull(tracker.notifyAdded(singleton(r1),null));
  Assert.assertEquals(singleton(r1),((SSTableAddedNotification)listener.received.get(0)).added);
  listener.received.clear();
  Assert.assertNotNull(tracker.notifySSTablesChanged(singleton(r1),singleton(r2),OperationType.COMPACTION,null));
  Assert.assertEquals(singleton(r1),((SSTableListChangedNotification)listener.received.get(0)).removed);
  Assert.assertEquals(singleton(r2),((SSTableListChangedNotification)listener.received.get(0)).added);
  listener.received.clear();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApply(){
  final ColumnFamilyStore cfs=MockSchema.newCFS();
  final Tracker tracker=new Tracker(null,false);
  final View resultView=ViewTest.fakeView(0,0,cfs);
  final AtomicInteger count=new AtomicInteger();
  tracker.apply(new Predicate<View>(){
    public boolean apply(    View view){
      if (count.incrementAndGet() < 3)       tracker.view.set(ViewTest.fakeView(0,0,cfs));
      return true;
    }
  }
,new Function<View,View>(){
    @Nullable public View apply(    View view){
      return resultView;
    }
  }
);
  Assert.assertEquals(3,count.get());
  Assert.assertEquals(resultView,tracker.getView());
  count.set(0);
  Assert.assertNull(tracker.apply(new Predicate<View>(){
    public boolean apply(    View view){
      count.incrementAndGet();
      return false;
    }
  }
,null));
  Assert.assertEquals(1,count.get());
  Assert.assertEquals(resultView,tracker.getView());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTryModify(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  Tracker tracker=new Tracker(cfs,false);
  List<SSTableReader> readers=ImmutableList.of(MockSchema.sstable(0,true,cfs),MockSchema.sstable(1,cfs),MockSchema.sstable(2,cfs));
  tracker.addInitialSSTables(copyOf(readers));
  Assert.assertNull(tracker.tryModify(ImmutableList.of(MockSchema.sstable(0,cfs)),OperationType.COMPACTION));
  try (LifecycleTransaction txn=tracker.tryModify(readers.get(0),OperationType.COMPACTION)){
    Assert.assertNotNull(txn);
    Assert.assertNull(tracker.tryModify(readers.get(0),OperationType.COMPACTION));
    Assert.assertEquals(1,txn.originals().size());
    Assert.assertTrue(txn.originals().contains(readers.get(0)));
  }
   try (LifecycleTransaction txn=tracker.tryModify(Collections.<SSTableReader>emptyList(),OperationType.COMPACTION)){
    Assert.assertNotNull(txn);
    Assert.assertEquals(0,txn.originals().size());
  }
   readers.get(0).selfRef().release();
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddInitialSSTables(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  Tracker tracker=new Tracker(cfs,false);
  List<SSTableReader> readers=ImmutableList.of(MockSchema.sstable(0,17,cfs),MockSchema.sstable(1,121,cfs),MockSchema.sstable(2,9,cfs));
  tracker.addInitialSSTables(copyOf(readers));
  Assert.assertEquals(3,tracker.view.get().sstables.size());
  for (  SSTableReader reader : readers)   Assert.assertTrue(reader.isKeyCacheSetup());
  Assert.assertEquals(17 + 121 + 9,cfs.metric.liveDiskSpaceUsed.getCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.lifecycle.ViewTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlushing(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  View initialView=fakeView(1,0,cfs);
  View cur=initialView;
  Memtable memtable1=initialView.getCurrentMemtable();
  Memtable memtable2=MockSchema.memtable(cfs);
  cur=View.switchMemtable(memtable2).apply(cur);
  Assert.assertEquals(2,cur.liveMemtables.size());
  Assert.assertEquals(memtable1,cur.liveMemtables.get(0));
  Assert.assertEquals(memtable2,cur.getCurrentMemtable());
  Memtable memtable3=MockSchema.memtable(cfs);
  cur=View.switchMemtable(memtable3).apply(cur);
  Assert.assertEquals(3,cur.liveMemtables.size());
  Assert.assertEquals(0,cur.flushingMemtables.size());
  Assert.assertEquals(memtable1,cur.liveMemtables.get(0));
  Assert.assertEquals(memtable2,cur.liveMemtables.get(1));
  Assert.assertEquals(memtable3,cur.getCurrentMemtable());
  testFailure(View.replaceFlushed(memtable2,null),cur);
  cur=View.markFlushing(memtable2).apply(cur);
  Assert.assertTrue(cur.flushingMemtables.contains(memtable2));
  Assert.assertEquals(2,cur.liveMemtables.size());
  Assert.assertEquals(1,cur.flushingMemtables.size());
  Assert.assertEquals(memtable2,cur.flushingMemtables.get(0));
  Assert.assertEquals(memtable1,cur.liveMemtables.get(0));
  Assert.assertEquals(memtable3,cur.getCurrentMemtable());
  cur=View.markFlushing(memtable1).apply(cur);
  Assert.assertEquals(1,cur.liveMemtables.size());
  Assert.assertEquals(2,cur.flushingMemtables.size());
  Assert.assertEquals(memtable1,cur.flushingMemtables.get(0));
  Assert.assertEquals(memtable2,cur.flushingMemtables.get(1));
  Assert.assertEquals(memtable3,cur.getCurrentMemtable());
  cur=View.replaceFlushed(memtable2,null).apply(cur);
  Assert.assertEquals(1,cur.liveMemtables.size());
  Assert.assertEquals(1,cur.flushingMemtables.size());
  Assert.assertEquals(memtable1,cur.flushingMemtables.get(0));
  Assert.assertEquals(memtable3,cur.getCurrentMemtable());
  SSTableReader sstable=MockSchema.sstable(1,cfs);
  cur=View.replaceFlushed(memtable1,singleton(sstable)).apply(cur);
  Assert.assertEquals(0,cur.flushingMemtables.size());
  Assert.assertEquals(1,cur.liveMemtables.size());
  Assert.assertEquals(memtable3,cur.getCurrentMemtable());
  Assert.assertEquals(1,cur.sstables.size());
  Assert.assertEquals(sstable,cur.sstablesMap.get(sstable));
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testSSTablesInBounds(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  View initialView=fakeView(0,5,cfs);
  for (int i=0; i < 5; i++) {
    for (int j=i; j < 5; j++) {
      PartitionPosition min=MockSchema.readerBounds(i);
      PartitionPosition max=MockSchema.readerBounds(j);
      for (      boolean minInc : new boolean[]{true}) {
        for (        boolean maxInc : new boolean[]{true}) {
          if (i == j && !(minInc && maxInc))           continue;
          AbstractBounds<PartitionPosition> bounds=AbstractBounds.bounds(min,minInc,max,maxInc);
          List<SSTableReader> r=ImmutableList.copyOf(initialView.sstablesInBounds(SSTableSet.LIVE,bounds.left,bounds.right));
          Assert.assertEquals(String.format("%d(%s) %d(%s)",i,minInc,j,maxInc),j - i + (minInc ? 0 : -1) + (maxInc ? 1 : 0),r.size());
        }
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-14 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompaction(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  View initialView=fakeView(0,5,cfs);
  View cur=initialView;
  List<SSTableReader> readers=ImmutableList.copyOf(initialView.sstables);
  Assert.assertTrue(View.permitCompacting(readers).apply(cur));
  Assert.assertTrue(View.permitCompacting(ImmutableList.copyOf(concat(readers,readers))).apply(cur));
  testFailure(View.updateCompacting(emptySet(),concat(readers.subList(0,1),readers.subList(0,1))),cur);
  cur=View.updateCompacting(emptySet(),readers.subList(0,2)).apply(cur);
  Assert.assertTrue(View.permitCompacting(readers.subList(2,5)).apply(cur));
  Assert.assertFalse(View.permitCompacting(readers.subList(0,2)).apply(cur));
  Assert.assertFalse(View.permitCompacting(readers.subList(0,1)).apply(cur));
  Assert.assertFalse(View.permitCompacting(readers.subList(1,2)).apply(cur));
  Assert.assertTrue(readers.subList(2,5).containsAll(copyOf(cur.getUncompacting(readers))));
  Assert.assertEquals(3,copyOf(cur.getUncompacting(readers)).size());
  Assert.assertTrue(ImmutableSet.copyOf(cur.sstables(SSTableSet.NONCOMPACTING)).containsAll(readers.subList(2,5)));
  Assert.assertEquals(3,ImmutableSet.copyOf(cur.sstables(SSTableSet.NONCOMPACTING)).size());
  testFailure(View.updateCompacting(emptySet(),readers.subList(0,1)),cur);
  testFailure(View.updateCompacting(emptySet(),readers.subList(1,2)),cur);
  testFailure(View.updateCompacting(copyOf(readers.subList(0,1)),readers.subList(1,2)),cur);
  SSTableReader r0=MockSchema.sstable(0,cfs), r1=MockSchema.sstable(1,cfs), r2=MockSchema.sstable(2,cfs);
  testFailure(View.updateCompacting(emptySet(),of(r2)),cur);
  cur=View.updateLiveSet(copyOf(readers.subList(1,3)),of(r1,r2)).apply(cur);
  Assert.assertSame(readers.get(0),cur.sstablesMap.get(r0));
  Assert.assertSame(r1,cur.sstablesMap.get(r1));
  Assert.assertSame(r2,cur.sstablesMap.get(r2));
  testFailure(View.updateCompacting(emptySet(),readers.subList(2,3)),cur);
  Assert.assertSame(readers.get(1),Iterables.getFirst(Iterables.filter(cur.compacting,Predicates.equalTo(r1)),null));
  cur=View.updateCompacting(copyOf(readers.subList(0,1)),emptySet()).apply(cur);
  Assert.assertTrue(View.permitCompacting(concat(readers.subList(0,1),of(r2),readers.subList(3,5))).apply(cur));
  Assert.assertFalse(View.permitCompacting(readers.subList(1,2)).apply(cur));
  testFailure(View.updateCompacting(emptySet(),readers.subList(1,2)),cur);
  testFailure(View.updateCompacting(copyOf(readers.subList(0,2)),emptySet()),cur);
  Assert.assertTrue(copyOf(concat(readers.subList(0,1),readers.subList(2,5))).containsAll(copyOf(cur.getUncompacting(readers))));
  Assert.assertEquals(4,copyOf(cur.getUncompacting(readers)).size());
  Set<SSTableReader> nonCompacting=ImmutableSet.copyOf(cur.sstables(SSTableSet.NONCOMPACTING));
  Assert.assertTrue(nonCompacting.containsAll(readers.subList(2,5)));
  Assert.assertTrue(nonCompacting.containsAll(readers.subList(0,1)));
  Assert.assertEquals(4,nonCompacting.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.marshal.CollectionTypeTest </h4><pre class="type-6 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testListComparison(){
  ListType<String> lt=ListType.getInstance(UTF8Type.instance,true);
  ByteBuffer[] lists=new ByteBuffer[]{ByteBufferUtil.EMPTY_BYTE_BUFFER,lt.decompose(ImmutableList.<String>of()),lt.decompose(ImmutableList.of("aa")),lt.decompose(ImmutableList.of("bb")),lt.decompose(ImmutableList.of("bb","cc")),lt.decompose(ImmutableList.of("bb","dd"))};
  for (int i=0; i < lists.length; i++)   assertEquals(lt.compare(lists[i],lists[i]),0);
  for (int i=0; i < lists.length - 1; i++) {
    for (int j=i + 1; j < lists.length; j++) {
      assertEquals(String.format("compare(lists[%d], lists[%d])",i,j),-1,lt.compare(lists[i],lists[j]));
      assertEquals(String.format("compare(lists[%d], lists[%d])",j,i),1,lt.compare(lists[j],lists[i]));
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setMapDerTest(){
  MapSerializer<String,String> sms=MapType.getInstance(UTF8Type.instance,UTF8Type.instance,true).getSerializer();
  MapSerializer<Integer,Integer> ims=MapType.getInstance(Int32Type.instance,Int32Type.instance,true).getSerializer();
  Map<String,String> sm=new HashMap(){
{
      put("Foo","xxx");
      put("Bar","yyy");
    }
  }
;
  Map<Integer,Integer> im=new HashMap(){
{
      put(3,0);
      put(1,8);
      put(5,2);
    }
  }
;
  ByteBuffer sb=sms.serialize(sm);
  ByteBuffer ib=ims.serialize(im);
  assertEquals(sms.deserialize(sb),sm);
  assertEquals(ims.deserialize(ib),im);
  sms.validate(sb);
  ims.validate(ib);
  assertInvalid(ims,sb);
  assertInvalid(sms,UTF8Type.instance.getSerializer().serialize("foo"));
  MapSerializer<Integer,String> sims=MapType.getInstance(Int32Type.instance,UTF8Type.instance,true).getSerializer();
  MapSerializer<String,Integer> isms=MapType.getInstance(UTF8Type.instance,Int32Type.instance,true).getSerializer();
  assertInvalid(isms,sb);
  assertInvalid(sims,sb);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetComparison(){
  SetType<String> st=SetType.getInstance(UTF8Type.instance,true);
  ByteBuffer[] sets=new ByteBuffer[]{ByteBufferUtil.EMPTY_BYTE_BUFFER,st.decompose(ImmutableSet.<String>of()),st.decompose(ImmutableSet.of("aa")),st.decompose(ImmutableSet.of("bb")),st.decompose(ImmutableSet.of("bb","cc")),st.decompose(ImmutableSet.of("bb","dd"))};
  for (int i=0; i < sets.length; i++)   assertEquals(st.compare(sets[i],sets[i]),0);
  for (int i=0; i < sets.length - 1; i++) {
    for (int j=i + 1; j < sets.length; j++) {
      assertEquals(String.format("compare(sets[%d], sets[%d])",i,j),-1,st.compare(sets[i],sets[j]));
      assertEquals(String.format("compare(sets[%d], sets[%d])",j,i),1,st.compare(sets[j],sets[i]));
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapComparison(){
  MapType<String,String> mt=MapType.getInstance(UTF8Type.instance,UTF8Type.instance,true);
  ByteBuffer[] maps=new ByteBuffer[]{ByteBufferUtil.EMPTY_BYTE_BUFFER,mt.decompose(ImmutableMap.<String,String>of()),mt.decompose(ImmutableMap.of("aa","val1")),mt.decompose(ImmutableMap.of("aa","val2")),mt.decompose(ImmutableMap.of("bb","val1")),mt.decompose(ImmutableMap.of("bb","val1","cc","val3")),mt.decompose(ImmutableMap.of("bb","val1","dd","val3")),mt.decompose(ImmutableMap.of("bb","val1","dd","val4"))};
  for (int i=0; i < maps.length; i++)   assertEquals(mt.compare(maps[i],maps[i]),0);
  for (int i=0; i < maps.length - 1; i++) {
    for (int j=i + 1; j < maps.length; j++) {
      assertEquals(String.format("compare(maps[%d], maps[%d])",i,j),mt.compare(maps[i],maps[j]),-1);
      assertEquals(String.format("compare(maps[%d], maps[%d])",j,i),mt.compare(maps[j],maps[i]),1);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void listSerDerTest(){
  ListSerializer<String> sls=ListType.getInstance(UTF8Type.instance,true).getSerializer();
  ListSerializer<Integer> ils=ListType.getInstance(Int32Type.instance,true).getSerializer();
  List<String> sl=Arrays.asList("Foo","Bar");
  List<Integer> il=Arrays.asList(3,1,5);
  ByteBuffer sb=sls.serialize(sl);
  ByteBuffer ib=ils.serialize(il);
  assertEquals(sls.deserialize(sb),sl);
  assertEquals(ils.deserialize(ib),il);
  sls.validate(sb);
  ils.validate(ib);
  assertInvalid(ils,sb);
  assertInvalid(sls,UTF8Type.instance.getSerializer().serialize("foo"));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setSerDerTest(){
  SetSerializer<String> sss=SetType.getInstance(UTF8Type.instance,true).getSerializer();
  SetSerializer<Integer> iss=SetType.getInstance(Int32Type.instance,true).getSerializer();
  Set<String> ss=new HashSet(){
{
      add("Foo");
      add("Bar");
    }
  }
;
  Set<Integer> is=new HashSet(){
{
      add(3);
      add(1);
      add(5);
    }
  }
;
  ByteBuffer sb=sss.serialize(ss);
  ByteBuffer ib=iss.serialize(is);
  assertEquals(sss.deserialize(sb),ss);
  assertEquals(iss.deserialize(ib),is);
  sss.validate(sb);
  iss.validate(ib);
  assertInvalid(iss,sb);
  assertInvalid(sss,UTF8Type.instance.getSerializer().serialize("foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.marshal.CompositeTypeTest </h4><pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEscapeUnescape(){
  List<AbstractType<?>> subComparators=new ArrayList<AbstractType<?>>(){
{
      ;
      add(UTF8Type.instance);
      add(UTF8Type.instance);
    }
  }
;
  CompositeType comp=CompositeType.getInstance(subComparators);
  String[][] inputs=new String[][]{new String[]{"foo","bar"},new String[]{"",""},new String[]{"foo\\","bar"},new String[]{"foo\\:","bar"},new String[]{"foo:","bar"},new String[]{"foo","b:ar"},new String[]{"foo!","b:ar"}};
  for (  String[] input : inputs) {
    CompositeType.Builder builder=new CompositeType.Builder(comp);
    for (    String part : input)     builder.add(UTF8Type.instance.fromString(part));
    ByteBuffer value=comp.fromString(comp.getString(builder.build()));
    ByteBuffer[] splitted=comp.split(value);
    for (int i=0; i < splitted.length; i++)     assertEquals(input[i],UTF8Type.instance.getString(splitted[i]));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.marshal.IntegerTypeTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTrimming(){
  ByteBuffer n1, n2;
  n1=ByteBuffer.wrap(new byte[]{0});
  n2=ByteBuffer.wrap(new byte[]{0,0,0,0});
  assertEquals(0,comparator.compare(n1,n2));
  n1=ByteBuffer.wrap(new byte[]{1,0,0,1});
  n2=ByteBuffer.wrap(new byte[]{0,0,0,1,0,0,1});
  assertEquals(0,comparator.compare(n1,n2));
  n1=ByteBuffer.wrap(new byte[]{-1,0,0,-1});
  n2=ByteBuffer.wrap(new byte[]{-1,-1,-1,-1,0,0,-1});
  assertEquals(0,comparator.compare(n1,n2));
  n1=ByteBuffer.wrap(new byte[]{-1,0});
  n2=ByteBuffer.wrap(new byte[]{0,-1,0});
  assertSignum("",-1,comparator.compare(n1,n2));
  n1=ByteBuffer.wrap(new byte[]{1,0});
  n2=ByteBuffer.wrap(new byte[]{0,-1,0});
  assertSignum("",-1,comparator.compare(n1,n2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.marshal.TimeUUIDTypeTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquality(){
  UUID a=UUIDGen.getTimeUUID();
  UUID b=new UUID(a.getMostSignificantBits(),a.getLeastSignificantBits());
  timeUUIDType.validate(ByteBuffer.wrap(UUIDGen.decompose(a)));
  timeUUIDType.validate(ByteBuffer.wrap(UUIDGen.decompose(b)));
  assertEquals(0,timeUUIDType.compare(ByteBuffer.wrap(UUIDGen.decompose(a)),ByteBuffer.wrap(UUIDGen.decompose(b))));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.marshal.TypeParserTest </h4><pre class="type-4 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testParsePartitionerOrder() throws ConfigurationException, SyntaxException {
  for (  IPartitioner partitioner : new IPartitioner[]{Murmur3Partitioner.instance,ByteOrderedPartitioner.instance,RandomPartitioner.instance,OrderPreservingPartitioner.instance}) {
    AbstractType<?> type=partitioner.partitionOrdering();
    assertSame(type,TypeParser.parse(type.toString()));
  }
  assertSame(DatabaseDescriptor.getPartitioner().partitionOrdering(),TypeParser.parse("PartitionerDefinedOrder"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.monitoring.MonitoringTaskTest </h4><pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRealScheduling() throws InterruptedException {
  MonitoringTask.instance=MonitoringTask.make(10,-1);
  try {
    Monitorable operation=new TestMonitor("Test report",new ConstructionTime(System.currentTimeMillis()),timeout);
    waitForOperationsToComplete(operation);
    assertTrue(operation.isAborted());
    assertFalse(operation.isCompleted());
    Thread.sleep(ApproximateTime.precision() + 500);
    assertEquals(0,MonitoringTask.instance.getFailedOperations().size());
  }
  finally {
    MonitoringTask.instance=MonitoringTask.make(REPORT_INTERVAL_MS,MAX_TIMEDOUT_OPERATIONS);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReport() throws InterruptedException {
  Monitorable operation=new TestMonitor("Test report",new ConstructionTime(System.currentTimeMillis()),timeout);
  waitForOperationsToComplete(operation);
  assertTrue(operation.isAborted());
  assertFalse(operation.isCompleted());
  MonitoringTask.instance.logFailedOperations(ApproximateTime.currentTimeMillis());
  assertEquals(0,MonitoringTask.instance.getFailedOperations().size());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbortIdemPotent() throws InterruptedException {
  Monitorable operation=new TestMonitor("Test abort",new ConstructionTime(System.currentTimeMillis()),timeout);
  waitForOperationsToComplete(operation);
  assertTrue(operation.abort());
  assertTrue(operation.isAborted());
  assertFalse(operation.isCompleted());
  assertEquals(1,MonitoringTask.instance.getFailedOperations().size());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbortCrossNode() throws InterruptedException {
  Monitorable operation=new TestMonitor("Test for cross node",new ConstructionTime(System.currentTimeMillis(),true),timeout);
  waitForOperationsToComplete(operation);
  assertTrue(operation.isAborted());
  assertFalse(operation.isCompleted());
  assertEquals(1,MonitoringTask.instance.getFailedOperations().size());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbort() throws InterruptedException {
  Monitorable operation=new TestMonitor("Test abort",new ConstructionTime(System.currentTimeMillis()),timeout);
  waitForOperationsToComplete(operation);
  assertTrue(operation.isAborted());
  assertFalse(operation.isCompleted());
  assertEquals(1,MonitoringTask.instance.getFailedOperations().size());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComplete() throws InterruptedException {
  Monitorable operation=new TestMonitor("Test complete",new ConstructionTime(System.currentTimeMillis()),timeout);
  operation.complete();
  waitForOperationsToComplete(operation);
  assertFalse(operation.isAborted());
  assertTrue(operation.isCompleted());
  assertEquals(0,MonitoringTask.instance.getFailedOperations().size());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompleteIdemPotent() throws InterruptedException {
  Monitorable operation=new TestMonitor("Test complete",new ConstructionTime(System.currentTimeMillis()),timeout);
  operation.complete();
  waitForOperationsToComplete(operation);
  assertTrue(operation.complete());
  assertFalse(operation.isAborted());
  assertTrue(operation.isCompleted());
  assertEquals(0,MonitoringTask.instance.getFailedOperations().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.rows.RowAndDeletionMergeIteratorTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testWithAtMostRangeTombstone(){
  Iterator<Row> rowIterator=createRowIterator();
  int delTime=nowInSeconds + 1;
  long timestamp=toMillis(delTime);
  Iterator<RangeTombstone> rangeTombstoneIterator=createRangeTombstoneIterator(atMost(0,timestamp,delTime));
  UnfilteredRowIterator iterator=createMergeIterator(rowIterator,rangeTombstoneIterator,false);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.BOTTOM);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.INCL_END_BOUND,0);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),1);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),2);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),3);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),4);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testNonShadowingTombstone(){
  Iterator<Row> rowIterator=createRowIterator();
  Iterator<RangeTombstone> rangeTombstoneIterator=createRangeTombstoneIterator(atMost(0,-1L,0));
  UnfilteredRowIterator iterator=createMergeIterator(rowIterator,rangeTombstoneIterator,false);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.BOTTOM);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),0);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.INCL_END_BOUND,0);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),1);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),2);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),3);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),4);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testWithExcludingEndIncludingStartMarker(){
  Iterator<Row> rowIterator=createRowIterator();
  int delTime=nowInSeconds + 1;
  long timestamp=toMillis(delTime);
  Iterator<RangeTombstone> rangeTombstoneIterator=createRangeTombstoneIterator(lessThan(2,timestamp,delTime),atLeast(2,timestamp,delTime));
  UnfilteredRowIterator iterator=createMergeIterator(rowIterator,rangeTombstoneIterator,false);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.BOTTOM);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.EXCL_END_INCL_START_BOUNDARY,2);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.TOP);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testWithAtMostAndGreaterThanRangeTombstone(){
  Iterator<Row> rowIterator=createRowIterator();
  int delTime=nowInSeconds + 1;
  long timestamp=toMillis(delTime);
  Iterator<RangeTombstone> rangeTombstoneIterator=createRangeTombstoneIterator(atMost(0,timestamp,delTime),greaterThan(2,timestamp,delTime));
  UnfilteredRowIterator iterator=createMergeIterator(rowIterator,rangeTombstoneIterator,false);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.BOTTOM);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.INCL_END_BOUND,0);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),1);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),2);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.EXCL_START_BOUND,2);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.TOP);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testWithNoRangeTombstones(){
  Iterator<Row> rowIterator=createRowIterator();
  UnfilteredRowIterator iterator=createMergeIterator(rowIterator,Collections.emptyIterator(),false);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),0);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),1);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),2);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),3);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),4);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testWithIncludingEndExcludingStartMarker(){
  Iterator<Row> rowIterator=createRowIterator();
  int delTime=nowInSeconds + 1;
  long timestamp=toMillis(delTime);
  Iterator<RangeTombstone> rangeTombstoneIterator=createRangeTombstoneIterator(atMost(2,timestamp,delTime),greaterThan(2,timestamp,delTime));
  UnfilteredRowIterator iterator=createMergeIterator(rowIterator,rangeTombstoneIterator,false);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.BOTTOM);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.INCL_END_EXCL_START_BOUNDARY,2);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.TOP);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testWithOnlyRangeTombstones(){
  int delTime=nowInSeconds + 1;
  long timestamp=toMillis(delTime);
  Iterator<RangeTombstone> rangeTombstoneIterator=createRangeTombstoneIterator(rt(1,false,3,false,timestamp,delTime),atLeast(4,timestamp,delTime));
  UnfilteredRowIterator iterator=createMergeIterator(Collections.emptyIterator(),rangeTombstoneIterator,false);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.EXCL_START_BOUND,1);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.EXCL_END_BOUND,3);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.INCL_START_BOUND,4);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.TOP);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testWithGreaterThanRangeTombstone(){
  Iterator<Row> rowIterator=createRowIterator();
  int delTime=nowInSeconds + 1;
  long timestamp=toMillis(delTime);
  Iterator<RangeTombstone> rangeTombstoneIterator=createRangeTombstoneIterator(greaterThan(2,timestamp,delTime));
  UnfilteredRowIterator iterator=createMergeIterator(rowIterator,rangeTombstoneIterator,false);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),0);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),1);
  assertTrue(iterator.hasNext());
  assertRow(iterator.next(),2);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),ClusteringPrefix.Kind.EXCL_START_BOUND,2);
  assertTrue(iterator.hasNext());
  assertRtMarker(iterator.next(),Bound.TOP);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.rows.RowsTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void merge(){
  int now1=FBUtilities.nowInSeconds();
  Row.Builder existingBuilder=createBuilder(c1,now1,BB1,BB1,BB1);
  int now2=now1 + 1;
  long ts2=secondToTs(now2);
  Cell expectedVCell=BufferCell.live(kcvm,v,ts2,BB2);
  Cell expectedMCell=BufferCell.live(kcvm,m,ts2,BB2,CellPath.create(BB1));
  DeletionTime expectedComplexDeletionTime=new DeletionTime(ts2 - 1,now2);
  Row.Builder updateBuilder=createBuilder(c1,now2,null,null,null);
  updateBuilder.addCell(expectedVCell);
  updateBuilder.addComplexDeletion(m,expectedComplexDeletionTime);
  updateBuilder.addCell(expectedMCell);
  RowBuilder builder=new RowBuilder();
  long td=Rows.merge(existingBuilder.build(),updateBuilder.build(),builder,now2 + 1);
  Assert.assertEquals(c1,builder.clustering);
  Assert.assertEquals(LivenessInfo.create(kcvm,ts2,now2),builder.livenessInfo);
  Assert.assertEquals(Lists.newArrayList(Pair.create(m,new DeletionTime(ts2 - 1,now2))),builder.complexDeletions);
  Assert.assertEquals(2,builder.cells.size());
  Assert.assertEquals(Lists.newArrayList(expectedVCell,expectedMCell),Lists.newArrayList(builder.cells));
  Assert.assertEquals(ts2 - secondToTs(now1),td);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.dht.RangeTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testBoundariesORCC(){
  List<Range<Token>> ranges=asList(r(Long.MIN_VALUE,Long.MIN_VALUE + 1),r(Long.MAX_VALUE - 1,Long.MAX_VALUE));
  Range.OrderedRangeContainmentChecker checker=new Range.OrderedRangeContainmentChecker(ranges);
  assertFalse(checker.contains(t(Long.MIN_VALUE)));
  assertTrue(checker.contains(t(Long.MIN_VALUE + 1)));
  assertFalse(checker.contains(t(0)));
  assertFalse(checker.contains(t(Long.MAX_VALUE - 1)));
  assertTrue(checker.contains(t(Long.MAX_VALUE)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.dht.StreamStateStoreTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testUpdateAndQueryAvailableRanges(){
  IPartitioner p=new Murmur3Partitioner();
  Token.TokenFactory factory=p.getTokenFactory();
  Range<Token> range=new Range<>(factory.fromString("0"),factory.fromString("100"));
  InetAddress local=FBUtilities.getBroadcastAddress();
  StreamSession session=new StreamSession(local,local,new DefaultConnectionFactory(),0,true,false);
  session.addStreamRequest("keyspace1",Collections.singleton(range),Collections.singleton("cf"),0);
  StreamStateStore store=new StreamStateStore();
  store.handleStreamEvent(new StreamEvent.SessionCompleteEvent(session));
  assertFalse(store.isDataAvailable("keyspace1",factory.fromString("50")));
  session.state(StreamSession.State.COMPLETE);
  store.handleStreamEvent(new StreamEvent.SessionCompleteEvent(session));
  assertTrue(store.isDataAvailable("keyspace1",factory.fromString("50")));
  assertFalse(store.isDataAvailable("keyspace1",factory.fromString("0")));
  assertFalse(store.isDataAvailable("keyspace1",factory.fromString("101")));
  assertFalse(store.isDataAvailable("keyspace2",factory.fromString("50")));
  Range<Token> range2=new Range<>(factory.fromString("100"),factory.fromString("200"));
  session=new StreamSession(local,local,new DefaultConnectionFactory(),0,true,false);
  session.addStreamRequest("keyspace1",Collections.singleton(range2),Collections.singleton("cf"),0);
  session.state(StreamSession.State.COMPLETE);
  store.handleStreamEvent(new StreamEvent.SessionCompleteEvent(session));
  assertTrue(store.isDataAvailable("keyspace1",factory.fromString("101")));
  assertTrue(store.isDataAvailable("keyspace1",factory.fromString("50")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.gms.ArrayBackedBoundedStatsTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test(){
  int size=4;
  ArrayBackedBoundedStats bsd=new ArrayBackedBoundedStats(size);
  assertEquals(0,bsd.mean(),0.001d);
  bsd.add(1L);
  bsd.add(2L);
  bsd.add(3L);
  bsd.add(4L);
  bsd.add(5L);
  long[] expected=new long[]{2,3,4,5};
  assertArrivalIntervals(bsd,expected);
  assertEquals(3.5,bsd.mean(),0.001d);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.gms.ArrivalWindowTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithNanoTime(){
  final ArrivalWindow windowWithNano=new ArrivalWindow(4);
  final long toNano=1000000L;
  InetAddress ep;
  try {
    ep=InetAddress.getLocalHost();
  }
 catch (  UnknownHostException e) {
    throw new RuntimeException(e);
  }
  windowWithNano.add(111 * toNano,ep);
  windowWithNano.add(222 * toNano,ep);
  windowWithNano.add(333 * toNano,ep);
  windowWithNano.add(444 * toNano,ep);
  windowWithNano.add(555 * toNano,ep);
  assertEquals(1.0,windowWithNano.phi(666 * toNano),0.01);
  assertEquals(22.03,windowWithNano.phi(3000 * toNano),0.01);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.gms.GossipDigestTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws IOException {
  InetAddress endpoint=InetAddress.getByName("127.0.0.1");
  int generation=0;
  int maxVersion=123;
  GossipDigest expected=new GossipDigest(endpoint,generation,maxVersion);
  assertEquals(endpoint,expected.getEndpoint());
  assertEquals(generation,expected.getGeneration());
  assertEquals(maxVersion,expected.getMaxVersion());
  DataOutputBuffer output=new DataOutputBuffer();
  GossipDigest.serializer.serialize(expected,output,MessagingService.current_version);
  DataInputPlus input=new DataInputBuffer(output.getData());
  GossipDigest actual=GossipDigest.serializer.deserialize(input,MessagingService.current_version);
  assertEquals(0,expected.compareTo(actual));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.gms.GossiperTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLargeGenerationJump() throws UnknownHostException, InterruptedException {
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,2);
  InetAddress remoteHostAddress=hosts.get(1);
  EndpointState initialRemoteState=Gossiper.instance.getEndpointStateForEndpoint(remoteHostAddress);
  HeartBeatState initialRemoteHeartBeat=initialRemoteState.getHeartBeatState();
  assertEquals(initialRemoteHeartBeat.getGeneration(),1);
  HeartBeatState proposedRemoteHeartBeat=new HeartBeatState(initialRemoteHeartBeat.getGeneration() + Gossiper.MAX_GENERATION_DIFFERENCE + 1);
  EndpointState proposedRemoteState=new EndpointState(proposedRemoteHeartBeat);
  Gossiper.instance.applyStateLocally(ImmutableMap.of(remoteHostAddress,proposedRemoteState));
  HeartBeatState actualRemoteHeartBeat=Gossiper.instance.getEndpointStateForEndpoint(remoteHostAddress).getHeartBeatState();
  assertEquals(proposedRemoteHeartBeat.getGeneration(),actualRemoteHeartBeat.getGeneration());
  HeartBeatState badProposedRemoteHeartBeat=new HeartBeatState((int)(System.currentTimeMillis() / 1000) + Gossiper.MAX_GENERATION_DIFFERENCE * 10);
  EndpointState badProposedRemoteState=new EndpointState(badProposedRemoteHeartBeat);
  Gossiper.instance.applyStateLocally(ImmutableMap.of(remoteHostAddress,badProposedRemoteState));
  actualRemoteHeartBeat=Gossiper.instance.getEndpointStateForEndpoint(remoteHostAddress).getHeartBeatState();
  assertEquals(proposedRemoteHeartBeat.getGeneration(),actualRemoteHeartBeat.getGeneration());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.hints.ChecksummedDataInputTest </h4><pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadMethods() throws IOException {
  byte[] b=new byte[RandomAccessReader.DEFAULT_BUFFER_SIZE * 2];
  for (int i=0; i < b.length; i++)   b[i]=(byte)i;
  ByteBuffer buffer;
  try (DataOutputBuffer out=new DataOutputBuffer()){
    out.write(127);
    out.write(b);
    out.writeBoolean(false);
    out.writeByte(10);
    out.writeChar('t');
    out.writeDouble(3.3);
    out.writeFloat(2.2f);
    out.writeInt(42);
    out.writeLong(Long.MAX_VALUE);
    out.writeShort(Short.MIN_VALUE);
    out.writeUTF("utf");
    out.writeVInt(67L);
    out.writeUnsignedVInt(88L);
    out.writeBytes("abcdefghi");
    buffer=out.buffer();
  }
   CRC32 crc=new CRC32();
  FBUtilities.updateChecksum(crc,buffer);
  File file=File.createTempFile("testReadMethods","1");
  file.deleteOnExit();
  try (SequentialWriter writer=SequentialWriter.open(file)){
    writer.write(buffer);
    writer.writeInt((int)crc.getValue());
    writer.finish();
  }
   assertTrue(file.exists());
  assertEquals(buffer.remaining() + 4,file.length());
  try (ChecksummedDataInput reader=ChecksummedDataInput.open(file)){
    reader.limit(buffer.remaining() + 4);
    assertEquals(127,reader.read());
    byte[] bytes=new byte[b.length];
    reader.readFully(bytes);
    assertTrue(Arrays.equals(bytes,b));
    assertEquals(false,reader.readBoolean());
    assertEquals(10,reader.readByte());
    assertEquals('t',reader.readChar());
    assertEquals(3.3,reader.readDouble());
    assertEquals(2.2f,reader.readFloat());
    assertEquals(42,reader.readInt());
    assertEquals(Long.MAX_VALUE,reader.readLong());
    assertEquals(Short.MIN_VALUE,reader.readShort());
    assertEquals("utf",reader.readUTF());
    assertEquals(67L,reader.readVInt());
    assertEquals(88L,reader.readUnsignedVInt());
    assertEquals("abcdefghi",new String(ByteBufferUtil.read(reader,9).array(),StandardCharsets.UTF_8));
    assertTrue(reader.checkCrc());
    assertEquals(0,reader.bytesRemaining());
    reader.checkLimit(0);
  }
 }

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailedCrc() throws IOException {
  CRC32 crc=new CRC32();
  ByteBuffer buffer;
  try (DataOutputBuffer out=new DataOutputBuffer()){
    out.write(127);
    out.writeBoolean(false);
    out.writeByte(10);
    out.writeChar('t');
    buffer=out.buffer();
    FBUtilities.updateChecksum(crc,buffer);
    FBUtilities.updateChecksum(crc,buffer);
    out.writeInt((int)crc.getValue());
    buffer=out.buffer();
  }
   File file=File.createTempFile("testFailedCrc","1");
  file.deleteOnExit();
  try (SequentialWriter writer=SequentialWriter.open(file)){
    writer.write(buffer);
    writer.finish();
  }
   assertTrue(file.exists());
  assertEquals(buffer.remaining(),file.length());
  try (ChecksummedDataInput reader=ChecksummedDataInput.open(file)){
    reader.limit(buffer.remaining());
    assertEquals(127,reader.read());
    assertEquals(false,reader.readBoolean());
    assertEquals(10,reader.readByte());
    assertEquals('t',reader.readChar());
    assertFalse(reader.checkCrc());
    assertEquals(0,reader.bytesRemaining());
  }
 }

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResetCrc() throws IOException {
  CRC32 crc=new CRC32();
  ByteBuffer buffer;
  try (DataOutputBuffer out=new DataOutputBuffer()){
    out.write(127);
    out.writeBoolean(false);
    out.writeByte(10);
    out.writeChar('t');
    buffer=out.buffer();
    FBUtilities.updateChecksum(crc,buffer);
    out.writeInt((int)crc.getValue());
    int bufferPos=out.getLength();
    out.writeDouble(3.3);
    out.writeFloat(2.2f);
    out.writeInt(42);
    buffer=out.buffer();
    buffer.position(bufferPos);
    crc.reset();
    FBUtilities.updateChecksum(crc,buffer);
    out.writeInt((int)crc.getValue());
    buffer=out.buffer();
  }
   File file=File.createTempFile("testResetCrc","1");
  file.deleteOnExit();
  try (SequentialWriter writer=SequentialWriter.open(file)){
    writer.write(buffer);
    writer.finish();
  }
   assertTrue(file.exists());
  assertEquals(buffer.remaining(),file.length());
  try (ChecksummedDataInput reader=ChecksummedDataInput.open(file)){
    reader.limit(buffer.remaining());
    assertEquals(127,reader.read());
    assertEquals(false,reader.readBoolean());
    assertEquals(10,reader.readByte());
    assertEquals('t',reader.readChar());
    assertTrue(reader.checkCrc());
    reader.resetCrc();
    assertEquals(3.3,reader.readDouble());
    assertEquals(2.2f,reader.readFloat());
    assertEquals(42,reader.readInt());
    assertTrue(reader.checkCrc());
    assertEquals(0,reader.bytesRemaining());
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.hints.HintMessageTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerializer() throws IOException {
  SchemaLoader.prepareServer();
  SchemaLoader.createKeyspace(KEYSPACE,KeyspaceParams.simple(1),SchemaLoader.standardCFMD(KEYSPACE,TABLE));
  UUID hostId=UUID.randomUUID();
  long now=FBUtilities.timestampMicros();
  CFMetaData table=Schema.instance.getCFMetaData(KEYSPACE,TABLE);
  Mutation mutation=new RowUpdateBuilder(table,now,bytes("key")).clustering("column").add("val","val" + 1234).build();
  Hint hint=Hint.create(mutation,now / 1000);
  HintMessage message=new HintMessage(hostId,hint);
  int serializedSize=(int)HintMessage.serializer.serializedSize(message,MessagingService.current_version);
  DataOutputBuffer dob=new DataOutputBuffer();
  HintMessage.serializer.serialize(message,dob,MessagingService.current_version);
  assertEquals(serializedSize,dob.getLength());
  DataInputPlus di=new DataInputBuffer(dob.buffer(),true);
  HintMessage deserializedMessage=HintMessage.serializer.deserialize(di,MessagingService.current_version);
  assertEquals(hostId,deserializedMessage.hostId);
  assertHintsEqual(message.hint,deserializedMessage.hint);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.hints.HintsBufferTest </h4><pre class="type-15 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("resource") public void testOverlyLargeAllocation(){
  HintsBuffer buffer=HintsBuffer.create(128);
  try {
    buffer.allocate(65 - HintsBuffer.ENTRY_OVERHEAD_SIZE);
    fail("Allocation of the buffer should have failed but hasn't");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(String.format("Hint of %s bytes is too large - the maximum size is 64",65 - HintsBuffer.ENTRY_OVERHEAD_SIZE),e.getMessage());
  }
  try (HintsBuffer.Allocation allocation=buffer.allocate(64 - HintsBuffer.ENTRY_OVERHEAD_SIZE)){
    assertNotNull(allocation);
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.hints.HintsDescriptorTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test @SuppressWarnings("EmptyTryBlock") public void testReadFromFile() throws IOException {
  UUID hostId=UUID.randomUUID();
  int version=HintsDescriptor.CURRENT_VERSION;
  long timestamp=System.currentTimeMillis();
  ImmutableMap<String,Object> parameters=ImmutableMap.of();
  HintsDescriptor expected=new HintsDescriptor(hostId,version,timestamp,parameters);
  File directory=Files.createTempDir();
  try {
    try (HintsWriter ignored=HintsWriter.create(directory,expected)){
    }
     HintsDescriptor actual=HintsDescriptor.readFromFile(new File(directory,expected.fileName()).toPath());
    assertEquals(expected,actual);
  }
  finally {
    directory.deleteOnExit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.CustomIndexTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexSelectionPrefersMostSelectiveIndex() throws Throwable {
  createTable("CREATE TABLE %s(a int, b int, c int, PRIMARY KEY (a))");
  createIndex(String.format("CREATE CUSTOM INDEX more_selective ON %%s(b) USING '%s'",SettableSelectivityIndex.class.getName()));
  createIndex(String.format("CREATE CUSTOM INDEX less_selective ON %%s(c) USING '%s'",SettableSelectivityIndex.class.getName()));
  SettableSelectivityIndex moreSelective=(SettableSelectivityIndex)getCurrentColumnFamilyStore().indexManager.getIndexByName("more_selective");
  SettableSelectivityIndex lessSelective=(SettableSelectivityIndex)getCurrentColumnFamilyStore().indexManager.getIndexByName("less_selective");
  assertEquals(0,moreSelective.searchersProvided);
  assertEquals(0,lessSelective.searchersProvided);
  moreSelective.setEstimatedResultRows(1);
  lessSelective.setEstimatedResultRows(1000);
  execute("SELECT * FROM %s WHERE b=0 AND c=0 ALLOW FILTERING");
  assertEquals(1,moreSelective.searchersProvided);
  assertEquals(0,lessSelective.searchersProvided);
  moreSelective.setEstimatedResultRows(10000);
  execute("SELECT * FROM %s WHERE b=0 AND c=0 ALLOW FILTERING");
  assertEquals(1,moreSelective.searchersProvided);
  assertEquals(1,lessSelective.searchersProvided);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void customExpressionForcesIndexSelection() throws Throwable {
  createTable("CREATE TABLE %s(a int, b int, c int, PRIMARY KEY (a))");
  createIndex(String.format("CREATE CUSTOM INDEX more_selective ON %%s(b) USING '%s'",SettableSelectivityIndex.class.getName()));
  createIndex(String.format("CREATE CUSTOM INDEX less_selective ON %%s(c) USING '%s'",SettableSelectivityIndex.class.getName()));
  SettableSelectivityIndex moreSelective=(SettableSelectivityIndex)getCurrentColumnFamilyStore().indexManager.getIndexByName("more_selective");
  SettableSelectivityIndex lessSelective=(SettableSelectivityIndex)getCurrentColumnFamilyStore().indexManager.getIndexByName("less_selective");
  assertEquals(0,moreSelective.searchersProvided);
  assertEquals(0,lessSelective.searchersProvided);
  moreSelective.setEstimatedResultRows(1);
  lessSelective.setEstimatedResultRows(1000);
  execute("SELECT * FROM %s WHERE b=0 AND c=0 ALLOW FILTERING");
  assertEquals(1,moreSelective.searchersProvided);
  assertEquals(0,lessSelective.searchersProvided);
  execute("SELECT * FROM %s WHERE b=0 AND expr(less_selective, 'expression') ALLOW FILTERING");
  assertEquals(1,moreSelective.searchersProvided);
  assertEquals(1,lessSelective.searchersProvided);
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexControlsIfIncludedInBuildOnNewSSTables() throws Throwable {
  createTable("CREATE TABLE %s (a int, b int, PRIMARY KEY (a))");
  String toInclude="include";
  String toExclude="exclude";
  createIndex(String.format("CREATE CUSTOM INDEX %s ON %%s(b) USING '%s'",toInclude,IndexIncludedInBuild.class.getName()));
  createIndex(String.format("CREATE CUSTOM INDEX %s ON %%s(b) USING '%s'",toExclude,IndexExcludedFromBuild.class.getName()));
  execute("INSERT INTO %s (a, b) VALUES (?, ?)",0,0);
  execute("INSERT INTO %s (a, b) VALUES (?, ?)",1,1);
  execute("INSERT INTO %s (a, b) VALUES (?, ?)",2,2);
  flush();
  SecondaryIndexManager indexManager=getCurrentColumnFamilyStore().indexManager;
  IndexIncludedInBuild included=(IndexIncludedInBuild)indexManager.getIndexByName(toInclude);
  included.reset();
  assertTrue(included.rowsInserted.isEmpty());
  IndexExcludedFromBuild excluded=(IndexExcludedFromBuild)indexManager.getIndexByName(toExclude);
  excluded.reset();
  assertTrue(excluded.rowsInserted.isEmpty());
  indexManager.buildAllIndexesBlocking(getCurrentColumnFamilyStore().getLiveSSTables());
  assertEquals(3,included.rowsInserted.size());
  assertTrue(excluded.rowsInserted.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void notifyIndexersOfPartitionAndRowRemovalDuringCleanup() throws Throwable {
  createTable("CREATE TABLE %s (k int, c int, v int, PRIMARY KEY (k,c))");
  createIndex(String.format("CREATE CUSTOM INDEX cleanup_index ON %%s() USING '%s'",StubIndex.class.getName()));
  ColumnFamilyStore cfs=getCurrentColumnFamilyStore();
  StubIndex index=(StubIndex)cfs.indexManager.getIndexByName("cleanup_index");
  execute("INSERT INTO %s (k, c, v) VALUES (?, ?, ?)",0,0,0);
  execute("INSERT INTO %s (k, c, v) VALUES (?, ?, ?)",0,1,1);
  execute("INSERT INTO %s (k, c, v) VALUES (?, ?, ?)",0,2,2);
  execute("INSERT INTO %s (k, c, v) VALUES (?, ?, ?)",3,3,3);
  assertEquals(4,index.rowsInserted.size());
  assertEquals(0,index.partitionDeletions.size());
  ReadCommand cmd=Util.cmd(cfs,0).build();
  try (ReadExecutionController executionController=cmd.executionController();UnfilteredPartitionIterator iterator=cmd.executeLocally(executionController)){
    assertTrue(iterator.hasNext());
    cfs.indexManager.deletePartition(iterator.next(),FBUtilities.nowInSeconds());
  }
   assertEquals(1,index.partitionDeletions.size());
  assertEquals(3,index.rowsDeleted.size());
  for (int i=0; i < 3; i++)   assertEquals(index.rowsDeleted.get(i).clustering(),index.rowsInserted.get(i).clustering());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createMultiColumnIndexIncludingUserTypeColumn() throws Throwable {
  String myType=KEYSPACE + '.' + createType("CREATE TYPE %s (a int, b int)");
  createTable("CREATE TABLE %s (k int PRIMARY KEY, v1 int, v2 frozen<" + myType + ">)");
  testCreateIndex("udt_idx","v1","v2");
  Indexes indexes=getCurrentColumnFamilyStore().metadata.getIndexes();
  IndexMetadata expected=IndexMetadata.fromIndexTargets(getCurrentColumnFamilyStore().metadata,ImmutableList.of(indexTarget("v1",IndexTarget.Type.VALUES),indexTarget("v2",IndexTarget.Type.VALUES)),"udt_idx",IndexMetadata.Kind.CUSTOM,ImmutableMap.of(CUSTOM_INDEX_OPTION_NAME,StubIndex.class.getName()));
  IndexMetadata actual=indexes.get("udt_idx").orElseThrow(throwAssert("Index udt_idx not found"));
  assertEquals(expected,actual);
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexReceivesWriteTimeDeletionsCorrectly() throws Throwable {
  createTable("CREATE TABLE %s (a int, b int, c int, d int, PRIMARY KEY (a, b, c))");
  String indexName="test_index";
  createIndex(String.format("CREATE CUSTOM INDEX %s ON %%s(d) USING '%s'",indexName,StubIndex.class.getName()));
  execute("INSERT INTO %s (a, b, c, d) VALUES (?, ?, ?, ?)",0,0,0,0);
  execute("INSERT INTO %s (a, b, c, d) VALUES (?, ?, ?, ?)",0,0,1,1);
  execute("INSERT INTO %s (a, b, c, d) VALUES (?, ?, ?, ?)",0,0,2,2);
  execute("INSERT INTO %s (a, b, c, d) VALUES (?, ?, ?, ?)",0,1,3,3);
  SecondaryIndexManager indexManager=getCurrentColumnFamilyStore().indexManager;
  StubIndex index=(StubIndex)indexManager.getIndexByName(indexName);
  assertEquals(4,index.rowsInserted.size());
  assertTrue(index.partitionDeletions.isEmpty());
  assertTrue(index.rangeTombstones.isEmpty());
  execute("DELETE FROM %s WHERE a=0 AND b=0");
  assertTrue(index.partitionDeletions.isEmpty());
  assertEquals(1,index.rangeTombstones.size());
  execute("DELETE FROM %s WHERE a=0");
  assertEquals(1,index.partitionDeletions.size());
  assertEquals(1,index.rangeTombstones.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.SASIIndexTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testPrefixSSTableLookup(){
  ColumnFamilyStore store=Keyspace.open(KS_NAME).getColumnFamilyStore(CF_NAME);
  final ByteBuffer name=UTF8Type.instance.decompose("first_name_prefix");
  Mutation rm;
  rm=new Mutation(KS_NAME,decoratedKey("key1"));
  update(rm,name,UTF8Type.instance.decompose("Pavel"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key2"));
  update(rm,name,UTF8Type.instance.decompose("Jordan"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key3"));
  update(rm,name,UTF8Type.instance.decompose("Mikhail"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key4"));
  update(rm,name,UTF8Type.instance.decompose("Michael"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key5"));
  update(rm,name,UTF8Type.instance.decompose("Johnny"),System.currentTimeMillis());
  rm.apply();
  store.forceBlockingFlush();
  rm=new Mutation(KS_NAME,decoratedKey("key6"));
  update(rm,name,UTF8Type.instance.decompose("Jason"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key7"));
  update(rm,name,UTF8Type.instance.decompose("Vijay"),System.currentTimeMillis());
  rm.apply();
  store.forceBlockingFlush();
  Set<String> rows;
  rows=getIndexed(store,10,buildExpression(name,Operator.EQ,UTF8Type.instance.decompose("J")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2","key5","key6"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(name,Operator.EQ,UTF8Type.instance.decompose("j")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2","key5","key6"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(name,Operator.EQ,UTF8Type.instance.decompose("m")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key3","key4"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(name,Operator.EQ,UTF8Type.instance.decompose("v")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key7"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(name,Operator.EQ,UTF8Type.instance.decompose("p")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(name,Operator.EQ,UTF8Type.instance.decompose("j")),buildExpression(name,Operator.NEQ,UTF8Type.instance.decompose("joh")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2","key6"},rows.toArray(new String[rows.size()])));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testUnicodeSupport(){
  ColumnFamilyStore store=Keyspace.open(KS_NAME).getColumnFamilyStore(CF_NAME);
  final ByteBuffer comment=UTF8Type.instance.decompose("comment");
  Mutation rm=new Mutation(KS_NAME,decoratedKey("key1"));
  update(rm,comment,UTF8Type.instance.decompose("ⓈⓅⒺⒸⒾⒶⓁ ⒞⒣⒜⒭⒮ and normal ones"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key2"));
  update(rm,comment,UTF8Type.instance.decompose("龍馭鬱"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key3"));
  update(rm,comment,UTF8Type.instance.decompose("インディアナ"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key4"));
  update(rm,comment,UTF8Type.instance.decompose("レストラン"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key5"));
  update(rm,comment,UTF8Type.instance.decompose("ベンジャミン ウエスト"),System.currentTimeMillis());
  rm.apply();
  Set<String> rows;
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ⓈⓅⒺⒸⒾ")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("normal")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("龍")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("馭鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("龍馭鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ベンジャミン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key5"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("レストラ")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key4"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("インディ")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key3"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ベンジャミ")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key5"},rows.toArray(new String[rows.size()])));
  store.forceBlockingFlush();
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ⓈⓅⒺⒸⒾ")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("normal")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("龍")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("馭鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("龍馭鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ベンジャミン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key5"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("レストラ")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key4"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("インディ")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key3"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ベンジャミ")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key5"},rows.toArray(new String[rows.size()])));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInsertingIncorrectValuesIntoAgeIndex(){
  ColumnFamilyStore store=Keyspace.open(KS_NAME).getColumnFamilyStore(CF_NAME);
  final ByteBuffer firstName=UTF8Type.instance.decompose("first_name");
  final ByteBuffer age=UTF8Type.instance.decompose("age");
  Mutation rm=new Mutation(KS_NAME,decoratedKey(AsciiType.instance.decompose("key1")));
  update(rm,new ArrayList<Cell>(){
{
      add(buildCell(firstName,AsciiType.instance.decompose("pavel"),System.currentTimeMillis()));
      add(buildCell(age,LongType.instance.decompose(26L),System.currentTimeMillis()));
    }
  }
);
  rm.apply();
  store.forceBlockingFlush();
  Set<String> rows=getIndexed(store,10,buildExpression(firstName,Operator.EQ,UTF8Type.instance.decompose("a")),buildExpression(age,Operator.GTE,Int32Type.instance.decompose(26)));
  Assert.assertEquals(0,rows.size());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testUnicodeSuffixMode(){
  ColumnFamilyStore store=Keyspace.open(KS_NAME).getColumnFamilyStore(CF_NAME);
  final ByteBuffer comment=UTF8Type.instance.decompose("comment_suffix_split");
  Mutation rm=new Mutation(KS_NAME,decoratedKey("key1"));
  update(rm,comment,UTF8Type.instance.decompose("龍馭鬱"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key2"));
  update(rm,comment,UTF8Type.instance.decompose("インディアナ"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key3"));
  update(rm,comment,UTF8Type.instance.decompose("レストラン"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key4"));
  update(rm,comment,UTF8Type.instance.decompose("ベンジャミン ウエスト"),System.currentTimeMillis());
  rm.apply();
  Set<String> rows;
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("龍")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("馭鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("龍馭鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ベンジャミン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key4"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("トラン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key3"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ディア")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ジャミン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key4"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2","key3","key4"},rows.toArray(new String[rows.size()])));
  store.forceBlockingFlush();
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("龍")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("馭鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("龍馭鬱")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ベンジャミン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key4"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("トラン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key3"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ディア")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ジャミン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key4"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,UTF8Type.instance.decompose("ン")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key2","key3","key4"},rows.toArray(new String[rows.size()])));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSettingIsLiteralOption(){
  AbstractType<?> stringType=new AbstractType<String>(AbstractType.ComparisonType.CUSTOM){
    public ByteBuffer fromString(    String source) throws MarshalException {
      return UTF8Type.instance.fromString(source);
    }
    public Term fromJSONObject(    Object parsed) throws MarshalException {
      throw new UnsupportedOperationException();
    }
    public TypeSerializer<String> getSerializer(){
      return UTF8Type.instance.getSerializer();
    }
    public int compareCustom(    ByteBuffer a,    ByteBuffer b){
      return UTF8Type.instance.compare(a,b);
    }
  }
;
  ColumnDefinition columnA=ColumnDefinition.regularDef(KS_NAME,CF_NAME,"special-A",stringType);
  ColumnIndex indexA=new ColumnIndex(UTF8Type.instance,columnA,IndexMetadata.fromSchemaMetadata("special-index-A",IndexMetadata.Kind.CUSTOM,new HashMap<String,String>(){
{
      put(IndexTarget.CUSTOM_INDEX_OPTION_NAME,SASIIndex.class.getName());
    }
  }
));
  Assert.assertEquals(true,indexA.isIndexed());
  Assert.assertEquals(false,indexA.isLiteral());
  ColumnDefinition columnB=ColumnDefinition.regularDef(KS_NAME,CF_NAME,"special-B",stringType);
  ColumnIndex indexB=new ColumnIndex(UTF8Type.instance,columnB,IndexMetadata.fromSchemaMetadata("special-index-B",IndexMetadata.Kind.CUSTOM,new HashMap<String,String>(){
{
      put(IndexTarget.CUSTOM_INDEX_OPTION_NAME,SASIIndex.class.getName());
      put("is_literal","true");
    }
  }
));
  Assert.assertEquals(true,indexB.isIndexed());
  Assert.assertEquals(true,indexB.isLiteral());
  ColumnDefinition columnC=ColumnDefinition.regularDef(KS_NAME,CF_NAME,"special-C",UTF8Type.instance);
  ColumnIndex indexC=new ColumnIndex(UTF8Type.instance,columnC,IndexMetadata.fromSchemaMetadata("special-index-C",IndexMetadata.Kind.CUSTOM,new HashMap<String,String>(){
{
      put(IndexTarget.CUSTOM_INDEX_OPTION_NAME,SASIIndex.class.getName());
    }
  }
));
  Assert.assertEquals(true,indexC.isIndexed());
  Assert.assertEquals(true,indexC.isLiteral());
  ColumnDefinition columnD=ColumnDefinition.regularDef(KS_NAME,CF_NAME,"special-D",AsciiType.instance);
  ColumnIndex indexD=new ColumnIndex(UTF8Type.instance,columnD,IndexMetadata.fromSchemaMetadata("special-index-D",IndexMetadata.Kind.CUSTOM,new HashMap<String,String>(){
{
      put(IndexTarget.CUSTOM_INDEX_OPTION_NAME,SASIIndex.class.getName());
    }
  }
));
  Assert.assertEquals(true,indexD.isIndexed());
  Assert.assertEquals(true,indexD.isLiteral());
  ColumnDefinition columnE=ColumnDefinition.regularDef(KS_NAME,CF_NAME,"special-E",UTF8Type.instance);
  ColumnIndex indexE=new ColumnIndex(UTF8Type.instance,columnE,IndexMetadata.fromSchemaMetadata("special-index-E",IndexMetadata.Kind.CUSTOM,new HashMap<String,String>(){
{
      put(IndexTarget.CUSTOM_INDEX_OPTION_NAME,SASIIndex.class.getName());
      put("is_literal","false");
    }
  }
));
  Assert.assertEquals(true,indexE.isIndexed());
  Assert.assertEquals(false,indexE.isLiteral());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testThatTooBigValueIsRejected(){
  ColumnFamilyStore store=Keyspace.open(KS_NAME).getColumnFamilyStore(CF_NAME);
  final ByteBuffer comment=UTF8Type.instance.decompose("comment_suffix_split");
  for (int i=0; i < 10; i++) {
    byte[] randomBytes=new byte[ThreadLocalRandom.current().nextInt(OnDiskIndexBuilder.MAX_TERM_SIZE,5 * OnDiskIndexBuilder.MAX_TERM_SIZE)];
    ThreadLocalRandom.current().nextBytes(randomBytes);
    final ByteBuffer bigValue=UTF8Type.instance.decompose(new String(randomBytes));
    Mutation rm=new Mutation(KS_NAME,decoratedKey("key1"));
    update(rm,comment,bigValue,System.currentTimeMillis());
    rm.apply();
    Set<String> rows;
    rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,bigValue.duplicate()));
    Assert.assertEquals(0,rows.size());
    store.forceBlockingFlush();
    rows=getIndexed(store,10,buildExpression(comment,Operator.EQ,bigValue.duplicate()));
    Assert.assertEquals(0,rows.size());
  }
}

</code></pre>

<br>
<pre class="type-7 type-15 type-4 type-5 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSearchTimeouts() throws Exception {
  final ByteBuffer firstName=UTF8Type.instance.decompose("first_name");
  Map<String,Pair<String,Integer>> data1=new HashMap<String,Pair<String,Integer>>(){
{
      put("key1",Pair.create("Pavel",14));
      put("key2",Pair.create("Pavel",26));
      put("key3",Pair.create("Pavel",27));
      put("key4",Pair.create("Jason",27));
    }
  }
;
  ColumnFamilyStore store=loadData(data1,true);
  RowFilter filter=RowFilter.create();
  filter.add(store.metadata.getColumnDefinition(firstName),Operator.EQ,AsciiType.instance.fromString("a"));
  ReadCommand command=new PartitionRangeReadCommand(store.metadata,FBUtilities.nowInSeconds(),ColumnFilter.all(store.metadata),filter,DataLimits.NONE,DataRange.allData(store.metadata.partitioner),Optional.empty());
  try {
    new QueryPlan(store,command,0).execute(ReadExecutionController.empty());
    Assert.fail();
  }
 catch (  TimeQuotaExceededException e) {
  }
catch (  Exception e) {
    Assert.fail();
    e.printStackTrace();
  }
  Set<String> rows=getKeys(new QueryPlan(store,command,DatabaseDescriptor.getRangeRpcTimeout()).execute(ReadExecutionController.empty()));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1","key2","key3","key4"},rows.toArray(new String[rows.size()])));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testChinesePrefixSearch(){
  ColumnFamilyStore store=Keyspace.open(KS_NAME).getColumnFamilyStore(CF_NAME);
  final ByteBuffer fullName=UTF8Type.instance.decompose("/output/full-name/");
  Mutation rm=new Mutation(KS_NAME,decoratedKey("key1"));
  update(rm,fullName,UTF8Type.instance.decompose("美加 八田"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key2"));
  update(rm,fullName,UTF8Type.instance.decompose("仁美 瀧澤"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key3"));
  update(rm,fullName,UTF8Type.instance.decompose("晃宏 高須"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key4"));
  update(rm,fullName,UTF8Type.instance.decompose("弘孝 大竹"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key5"));
  update(rm,fullName,UTF8Type.instance.decompose("満枝 榎本"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key6"));
  update(rm,fullName,UTF8Type.instance.decompose("飛鳥 上原"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key7"));
  update(rm,fullName,UTF8Type.instance.decompose("大輝 鎌田"),System.currentTimeMillis());
  rm.apply();
  rm=new Mutation(KS_NAME,decoratedKey("key8"));
  update(rm,fullName,UTF8Type.instance.decompose("利久 寺地"),System.currentTimeMillis());
  rm.apply();
  store.forceBlockingFlush();
  Set<String> rows;
  rows=getIndexed(store,10,buildExpression(fullName,Operator.EQ,UTF8Type.instance.decompose("美加 八田")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(fullName,Operator.EQ,UTF8Type.instance.decompose("美加")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key1"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(fullName,Operator.EQ,UTF8Type.instance.decompose("晃宏 高須")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key3"},rows.toArray(new String[rows.size()])));
  rows=getIndexed(store,10,buildExpression(fullName,Operator.EQ,UTF8Type.instance.decompose("大輝")));
  Assert.assertTrue(rows.toString(),Arrays.equals(new String[]{"key7"},rows.toArray(new String[rows.size()])));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.analyzer.NonTokenizingAnalyzerTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void ensureIncompatibleInputSkipped() throws Exception {
  NonTokenizingAnalyzer analyzer=new NonTokenizingAnalyzer();
  NonTokenizingOptions options=NonTokenizingOptions.getDefaultOptions();
  analyzer.init(options,Int32Type.instance);
  ByteBuffer toAnalyze=ByteBufferUtil.bytes(1);
  analyzer.reset(toAnalyze);
  Assert.assertTrue(!analyzer.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void caseInsensitiveAnalizer() throws Exception {
  NonTokenizingAnalyzer analyzer=new NonTokenizingAnalyzer();
  NonTokenizingOptions options=NonTokenizingOptions.getDefaultOptions();
  options.setCaseSensitive(false);
  analyzer.init(options,UTF8Type.instance);
  String testString="Nip it in the bud";
  ByteBuffer toAnalyze=ByteBuffer.wrap(testString.getBytes());
  analyzer.reset(toAnalyze);
  ByteBuffer analyzed=null;
  while (analyzer.hasNext())   analyzed=analyzer.next();
  Assert.assertTrue(testString.toLowerCase().equals(ByteBufferUtil.string(analyzed)));
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void caseSensitiveAnalizer() throws Exception {
  NonTokenizingAnalyzer analyzer=new NonTokenizingAnalyzer();
  NonTokenizingOptions options=NonTokenizingOptions.getDefaultOptions();
  analyzer.init(options,UTF8Type.instance);
  String testString="Nip it in the bud";
  ByteBuffer toAnalyze=ByteBuffer.wrap(testString.getBytes());
  analyzer.reset(toAnalyze);
  ByteBuffer analyzed=null;
  while (analyzer.hasNext())   analyzed=analyzer.next();
  Assert.assertFalse(testString.toLowerCase().equals(ByteBufferUtil.string(analyzed)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.disk.OnDiskIndexTest </h4><pre class="type-6 type-7 type-13 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testSuperBlocks() throws Exception {
  Map<ByteBuffer,TokenTreeBuilder> terms=new HashMap<>();
  terms.put(UTF8Type.instance.decompose("1234"),keyBuilder(1L,2L));
  terms.put(UTF8Type.instance.decompose("2345"),keyBuilder(3L,4L));
  terms.put(UTF8Type.instance.decompose("3456"),keyBuilder(5L,6L));
  terms.put(UTF8Type.instance.decompose("4567"),keyBuilder(7L,8L));
  terms.put(UTF8Type.instance.decompose("5678"),keyBuilder(9L,10L));
  OnDiskIndexBuilder builder=new OnDiskIndexBuilder(UTF8Type.instance,Int32Type.instance,OnDiskIndexBuilder.Mode.SPARSE);
  for (  Map.Entry<ByteBuffer,TokenTreeBuilder> entry : terms.entrySet())   addAll(builder,entry.getKey(),entry.getValue());
  File index=File.createTempFile("on-disk-sa-try-superblocks",".db");
  index.deleteOnExit();
  builder.finish(index);
  OnDiskIndex onDisk=new OnDiskIndex(index,Int32Type.instance,new KeyConverter());
  OnDiskIndex.OnDiskSuperBlock superBlock=onDisk.dataLevel.getSuperBlock(0);
  Iterator<Token> iter=superBlock.iterator();
  Long lastToken=null;
  while (iter.hasNext()) {
    Token token=iter.next();
    if (lastToken != null)     Assert.assertTrue(lastToken.compareTo(token.get()) < 0);
    lastToken=token.get();
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDescriptor() throws Exception {
  final Map<ByteBuffer,Pair<DecoratedKey,Long>> data=new HashMap<ByteBuffer,Pair<DecoratedKey,Long>>(){
{
      put(Int32Type.instance.decompose(5),Pair.create(keyAt(1L),1L));
    }
  }
;
  OnDiskIndexBuilder builder1=new OnDiskIndexBuilder(UTF8Type.instance,Int32Type.instance,OnDiskIndexBuilder.Mode.PREFIX);
  OnDiskIndexBuilder builder2=new OnDiskIndexBuilder(UTF8Type.instance,Int32Type.instance,OnDiskIndexBuilder.Mode.PREFIX);
  for (  Map.Entry<ByteBuffer,Pair<DecoratedKey,Long>> e : data.entrySet()) {
    DecoratedKey key=e.getValue().left;
    Long position=e.getValue().right;
    builder1.add(e.getKey(),key,position);
    builder2.add(e.getKey(),key,position);
  }
  File index1=File.createTempFile("on-disk-sa-int","db");
  File index2=File.createTempFile("on-disk-sa-int2","db");
  index1.deleteOnExit();
  index2.deleteOnExit();
  builder1.finish(index1);
  builder2.finish(new Descriptor(Descriptor.VERSION_AA),index2);
  OnDiskIndex onDisk1=new OnDiskIndex(index1,Int32Type.instance,new KeyConverter());
  OnDiskIndex onDisk2=new OnDiskIndex(index2,Int32Type.instance,new KeyConverter());
  ByteBuffer number=Int32Type.instance.decompose(5);
  Assert.assertEquals(Collections.singleton(data.get(number).left),convert(onDisk1.search(expressionFor(Int32Type.instance,number))));
  Assert.assertEquals(Collections.singleton(data.get(number).left),convert(onDisk2.search(expressionFor(Int32Type.instance,number))));
  Assert.assertEquals(onDisk1.descriptor.version.version,Descriptor.CURRENT_VERSION);
  Assert.assertEquals(onDisk2.descriptor.version.version,Descriptor.VERSION_AA);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRangeQueryWithExclusions() throws Exception {
  final long lower=0;
  final long upper=100000;
  OnDiskIndexBuilder builder=new OnDiskIndexBuilder(UTF8Type.instance,LongType.instance,OnDiskIndexBuilder.Mode.SPARSE);
  for (long i=lower; i <= upper; i++)   builder.add(LongType.instance.decompose(i),keyAt(i),i);
  File index=File.createTempFile("on-disk-sa-except-long-ranges","db");
  index.deleteOnExit();
  builder.finish(index);
  OnDiskIndex onDisk=new OnDiskIndex(index,LongType.instance,new KeyConverter());
  ThreadLocalRandom random=ThreadLocalRandom.current();
  validateExclusions(onDisk,lower,50,Sets.newHashSet(42L));
  validateExclusions(onDisk,lower,upper,Sets.newHashSet(31337L));
  validateExclusions(onDisk,lower,random.nextInt(400,800),Sets.newHashSet(42L,154L));
  validateExclusions(onDisk,lower,upper,Sets.newHashSet(31337L,54631L));
  validateExclusions(onDisk,lower,random.nextInt(400,800),Sets.newHashSet(42L,154L));
  validateExclusions(onDisk,lower,upper,Sets.newHashSet(31337L,54631L));
  validateExclusions(onDisk,lower,random.nextLong(400,upper),Sets.newHashSet(42L,55L));
  validateExclusions(onDisk,lower,random.nextLong(400,upper),Sets.newHashSet(42L,55L,93L));
  validateExclusions(onDisk,lower,random.nextLong(400,upper),Sets.newHashSet(42L,55L,93L,205L));
  Set<Long> exclusions=Sets.newHashSet(3L,12L,13L,14L,27L,54L,81L,125L,384L,771L,1054L,2048L,78834L);
  Assert.assertEquals(392,validateExclusions(onDisk,lower,400,exclusions,false));
  Assert.assertEquals(101,validateExclusions(onDisk,lower,100,Sets.newHashSet(-10L,-5L,-1L),false));
  validateExclusions(onDisk,lower,upper,exclusions);
  Assert.assertEquals(100000,convert(onDisk.search(new Expression("",LongType.instance).add(Operator.NEQ,LongType.instance.decompose(100L)))).size());
  Assert.assertEquals(49,convert(onDisk.search(new Expression("",LongType.instance).add(Operator.LT,LongType.instance.decompose(50L)).add(Operator.NEQ,LongType.instance.decompose(10L)))).size());
  Assert.assertEquals(99998,convert(onDisk.search(new Expression("",LongType.instance).add(Operator.GT,LongType.instance.decompose(1L)).add(Operator.NEQ,LongType.instance.decompose(20L)))).size());
  onDisk.close();
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSparseMode() throws Exception {
  OnDiskIndexBuilder builder=new OnDiskIndexBuilder(UTF8Type.instance,LongType.instance,OnDiskIndexBuilder.Mode.SPARSE);
  final long start=System.currentTimeMillis();
  final int numIterations=100000;
  for (long i=0; i < numIterations; i++)   builder.add(LongType.instance.decompose(start + i),keyAt(i),i);
  File index=File.createTempFile("on-disk-sa-sparse","db");
  index.deleteOnExit();
  builder.finish(index);
  OnDiskIndex onDisk=new OnDiskIndex(index,LongType.instance,new KeyConverter());
  ThreadLocalRandom random=ThreadLocalRandom.current();
  for (long step=start; step < (start + numIterations); step+=1000) {
    boolean lowerInclusive=random.nextBoolean();
    boolean upperInclusive=random.nextBoolean();
    long limit=random.nextLong(step,start + numIterations);
    RangeIterator<Long,Token> rows=onDisk.search(expressionFor(step,lowerInclusive,limit,upperInclusive));
    long lowerKey=step - start;
    long upperKey=lowerKey + (limit - step);
    if (!lowerInclusive)     lowerKey+=1;
    if (upperInclusive)     upperKey+=1;
    Set<DecoratedKey> actual=convert(rows);
    for (long key=lowerKey; key < upperKey; key++)     Assert.assertTrue("key" + key + " wasn't found",actual.contains(keyAt(key)));
    Assert.assertEquals((upperKey - lowerKey),actual.size());
  }
  RangeIterator<Long,Token> rows=onDisk.search(expressionFor(start,true,start + numIterations,true));
  Set<DecoratedKey> actual=convert(rows);
  Assert.assertEquals(numIterations,actual.size());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringSAConstruction() throws Exception {
  Map<ByteBuffer,TokenTreeBuilder> data=new HashMap<ByteBuffer,TokenTreeBuilder>(){
{
      put(UTF8Type.instance.decompose("scat"),keyBuilder(1L));
      put(UTF8Type.instance.decompose("mat"),keyBuilder(2L));
      put(UTF8Type.instance.decompose("fat"),keyBuilder(3L));
      put(UTF8Type.instance.decompose("cat"),keyBuilder(1L,4L));
      put(UTF8Type.instance.decompose("till"),keyBuilder(2L,6L));
      put(UTF8Type.instance.decompose("bill"),keyBuilder(5L));
      put(UTF8Type.instance.decompose("foo"),keyBuilder(7L));
      put(UTF8Type.instance.decompose("bar"),keyBuilder(9L,10L));
      put(UTF8Type.instance.decompose("michael"),keyBuilder(11L,12L,1L));
    }
  }
;
  OnDiskIndexBuilder builder=new OnDiskIndexBuilder(UTF8Type.instance,UTF8Type.instance,OnDiskIndexBuilder.Mode.CONTAINS);
  for (  Map.Entry<ByteBuffer,TokenTreeBuilder> e : data.entrySet())   addAll(builder,e.getKey(),e.getValue());
  File index=File.createTempFile("on-disk-sa-string","db");
  index.deleteOnExit();
  builder.finish(index);
  OnDiskIndex onDisk=new OnDiskIndex(index,UTF8Type.instance,new KeyConverter());
  for (  Map.Entry<ByteBuffer,TokenTreeBuilder> e : data.entrySet()) {
    if (UTF8Type.instance.getString(e.getKey()).equals("cat"))     continue;
    Assert.assertEquals("Key was: " + UTF8Type.instance.compose(e.getKey()),convert(e.getValue()),convert(onDisk.search(expressionFor(UTF8Type.instance,e.getKey()))));
  }
  Assert.assertEquals(convert(1,4),convert(onDisk.search(expressionFor("cat"))));
  Assert.assertEquals(convert(9,10),convert(onDisk.search(expressionFor("ar"))));
  Assert.assertEquals(convert(1,2,3,4),convert(onDisk.search(expressionFor("at"))));
  Assert.assertEquals(convert(1,11,12),convert(onDisk.search(expressionFor("mic"))));
  Assert.assertEquals(convert(1,11,12),convert(onDisk.search(expressionFor("ae"))));
  Assert.assertEquals(convert(2,5,6),convert(onDisk.search(expressionFor("ll"))));
  Assert.assertEquals(convert(1,2,5,6,11,12),convert(onDisk.search(expressionFor("l"))));
  Assert.assertEquals(convert(7),convert(onDisk.search(expressionFor("oo"))));
  Assert.assertEquals(convert(7),convert(onDisk.search(expressionFor("o"))));
  Assert.assertEquals(convert(1,2,3,4,6),convert(onDisk.search(expressionFor("t"))));
  Assert.assertEquals(Collections.<DecoratedKey>emptySet(),convert(onDisk.search(expressionFor("hello"))));
  onDisk.close();
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNotEqualsQueryForStrings() throws Exception {
  Map<ByteBuffer,TokenTreeBuilder> data=new HashMap<ByteBuffer,TokenTreeBuilder>(){
{
      put(UTF8Type.instance.decompose("Pavel"),keyBuilder(1L,2L));
      put(UTF8Type.instance.decompose("Jason"),keyBuilder(3L));
      put(UTF8Type.instance.decompose("Jordan"),keyBuilder(4L));
      put(UTF8Type.instance.decompose("Michael"),keyBuilder(5L,6L));
      put(UTF8Type.instance.decompose("Vijay"),keyBuilder(7L));
      put(UTF8Type.instance.decompose("Travis"),keyBuilder(8L));
      put(UTF8Type.instance.decompose("Aleksey"),keyBuilder(9L,10L));
    }
  }
;
  OnDiskIndexBuilder builder=new OnDiskIndexBuilder(UTF8Type.instance,UTF8Type.instance,OnDiskIndexBuilder.Mode.PREFIX);
  for (  Map.Entry<ByteBuffer,TokenTreeBuilder> e : data.entrySet())   addAll(builder,e.getKey(),e.getValue());
  File index=File.createTempFile("on-disk-sa-except-test","db");
  index.deleteOnExit();
  builder.finish(index);
  OnDiskIndex onDisk=new OnDiskIndex(index,UTF8Type.instance,new KeyConverter());
  Assert.assertEquals(convert(3,4,5,6,7,8,9,10),convert(onDisk.search(expressionForNot("Aleksey","Vijay","Pavel"))));
  Assert.assertEquals(convert(3,4,7,8,9,10),convert(onDisk.search(expressionForNot("Aleksey","Vijay","Pavel","Michael"))));
  Assert.assertEquals(convert(3,4,7,9,10),convert(onDisk.search(expressionForNot("Aleksey","Vijay","Pavel","Michael","Travis"))));
  Assert.assertEquals(convert(3,4,5,6,7,8,9,10),convert(onDisk.search(expressionForNot("Aleksey","Vijay","Pav"))));
  Assert.assertEquals(convert(3,4,7,8,9,10),convert(onDisk.search(expressionForNot("Aleksey","Vijay","Pavel","Mic"))));
  Assert.assertEquals(convert(3,4,7,9,10),convert(onDisk.search(expressionForNot("Aleksey","Vijay","Pavel","Micha","Tr"))));
  onDisk.close();
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiSuffixMatches() throws Exception {
  OnDiskIndexBuilder builder=new OnDiskIndexBuilder(UTF8Type.instance,UTF8Type.instance,OnDiskIndexBuilder.Mode.CONTAINS){
{
      addAll(this,UTF8Type.instance.decompose("Eliza"),keyBuilder(1L,2L));
      addAll(this,UTF8Type.instance.decompose("Elizabeth"),keyBuilder(3L,4L));
      addAll(this,UTF8Type.instance.decompose("Aliza"),keyBuilder(5L,6L));
      addAll(this,UTF8Type.instance.decompose("Taylor"),keyBuilder(7L,8L));
      addAll(this,UTF8Type.instance.decompose("Pavel"),keyBuilder(9L,10L));
    }
  }
;
  File index=File.createTempFile("on-disk-sa-multi-suffix-match",".db");
  index.deleteOnExit();
  builder.finish(index);
  OnDiskIndex onDisk=new OnDiskIndex(index,UTF8Type.instance,new KeyConverter());
  Assert.assertEquals(convert(1,2,3,4,5,6),convert(onDisk.search(expressionFor("liz"))));
  Assert.assertEquals(convert(1,2,3,4,5,6,7,8,9,10),convert(onDisk.search(expressionFor("a"))));
  Assert.assertEquals(convert(5,6),convert(onDisk.search(expressionFor("A"))));
  Assert.assertEquals(convert(1,2,3,4),convert(onDisk.search(expressionFor("E"))));
  Assert.assertEquals(convert(1,2,3,4,5,6,7,8,9,10),convert(onDisk.search(expressionFor("l"))));
  Assert.assertEquals(convert(3,4),convert(onDisk.search(expressionFor("bet"))));
  Assert.assertEquals(convert(3,4,9,10),convert(onDisk.search(expressionFor("e"))));
  Assert.assertEquals(convert(7,8),convert(onDisk.search(expressionFor("yl"))));
  Assert.assertEquals(convert(7,8),convert(onDisk.search(expressionFor("T"))));
  Assert.assertEquals(convert(1,2,3,4,5,6),convert(onDisk.search(expressionFor("za"))));
  Assert.assertEquals(convert(3,4),convert(onDisk.search(expressionFor("ab"))));
  Assert.assertEquals(Collections.<DecoratedKey>emptySet(),convert(onDisk.search(expressionFor("Pi"))));
  Assert.assertEquals(Collections.<DecoratedKey>emptySet(),convert(onDisk.search(expressionFor("ethz"))));
  Assert.assertEquals(Collections.<DecoratedKey>emptySet(),convert(onDisk.search(expressionFor("liw"))));
  Assert.assertEquals(Collections.<DecoratedKey>emptySet(),convert(onDisk.search(expressionFor("Taw"))));
  Assert.assertEquals(Collections.<DecoratedKey>emptySet(),convert(onDisk.search(expressionFor("Av"))));
  onDisk.close();
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNotEqualsQueryForNumbers() throws Exception {
  final Map<ByteBuffer,TokenTreeBuilder> data=new HashMap<ByteBuffer,TokenTreeBuilder>(){
{
      put(Int32Type.instance.decompose(5),keyBuilder(1L));
      put(Int32Type.instance.decompose(7),keyBuilder(2L));
      put(Int32Type.instance.decompose(1),keyBuilder(3L));
      put(Int32Type.instance.decompose(3),keyBuilder(1L,4L));
      put(Int32Type.instance.decompose(8),keyBuilder(8L,6L));
      put(Int32Type.instance.decompose(10),keyBuilder(5L));
      put(Int32Type.instance.decompose(6),keyBuilder(7L));
      put(Int32Type.instance.decompose(4),keyBuilder(9L,10L));
      put(Int32Type.instance.decompose(0),keyBuilder(11L,12L,1L));
    }
  }
;
  OnDiskIndexBuilder builder=new OnDiskIndexBuilder(UTF8Type.instance,Int32Type.instance,OnDiskIndexBuilder.Mode.PREFIX);
  for (  Map.Entry<ByteBuffer,TokenTreeBuilder> e : data.entrySet())   addAll(builder,e.getKey(),e.getValue());
  File index=File.createTempFile("on-disk-sa-except-int-test","db");
  index.deleteOnExit();
  builder.finish(index);
  OnDiskIndex onDisk=new OnDiskIndex(index,Int32Type.instance,new KeyConverter());
  Assert.assertEquals(convert(1,2,4,5,6,7,8,9,10,11,12),convert(onDisk.search(expressionForNot(0,10,1))));
  Assert.assertEquals(convert(1,2,4,5,7,9,10,11,12),convert(onDisk.search(expressionForNot(0,10,1,8))));
  Assert.assertEquals(convert(1,2,4,5,7,11,12),convert(onDisk.search(expressionForNot(0,10,1,8,4))));
  onDisk.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.disk.TokenTreeTest </h4><pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void buildWithMultipleMapsAndIterate() throws Exception {
  final SortedMap<Long,LongSet> merged=new TreeMap<>();
  final TokenTreeBuilder builder=new TokenTreeBuilder(simpleTokenMap).finish();
  builder.add(collidingTokensMap);
  merged.putAll(collidingTokensMap);
  for (  Map.Entry<Long,LongSet> entry : simpleTokenMap.entrySet()) {
    if (merged.containsKey(entry.getKey())) {
      LongSet mergingOffsets=entry.getValue();
      LongSet existingOffsets=merged.get(entry.getKey());
      if (mergingOffsets.equals(existingOffsets))       continue;
      Set<Long> mergeSet=new HashSet<>();
      for (      LongCursor merging : mergingOffsets)       mergeSet.add(merging.value);
      for (      LongCursor existing : existingOffsets)       mergeSet.add(existing.value);
      LongSet mergedResults=new LongOpenHashSet();
      for (      Long result : mergeSet)       mergedResults.add(result);
      merged.put(entry.getKey(),mergedResults);
    }
 else {
      merged.put(entry.getKey(),entry.getValue());
    }
  }
  final Iterator<Pair<Long,LongSet>> tokenIterator=builder.iterator();
  final Iterator<Map.Entry<Long,LongSet>> listIterator=merged.entrySet().iterator();
  while (tokenIterator.hasNext() && listIterator.hasNext()) {
    Pair<Long,LongSet> tokenNext=tokenIterator.next();
    Map.Entry<Long,LongSet> listNext=listIterator.next();
    Assert.assertEquals(listNext.getKey(),tokenNext.left);
    Assert.assertEquals(listNext.getValue(),tokenNext.right);
  }
  Assert.assertFalse("token iterator not finished",tokenIterator.hasNext());
  Assert.assertFalse("list iterator not finished",listIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void buildSerializeAndIterate() throws Exception {
  final TokenTreeBuilder builder=new TokenTreeBuilder(simpleTokenMap).finish();
  final File treeFile=File.createTempFile("token-tree-iterate-test1","tt");
  treeFile.deleteOnExit();
  try (SequentialWriter writer=new SequentialWriter(treeFile,4096,BufferType.ON_HEAP)){
    builder.write(writer);
    writer.sync();
  }
   final RandomAccessReader reader=RandomAccessReader.open(treeFile);
  final TokenTree tokenTree=new TokenTree(new MappedBuffer(reader));
  final Iterator<Token> tokenIterator=tokenTree.iterator(KEY_CONVERTER);
  final Iterator<Map.Entry<Long,LongSet>> listIterator=simpleTokenMap.entrySet().iterator();
  while (tokenIterator.hasNext() && listIterator.hasNext()) {
    Token treeNext=tokenIterator.next();
    Map.Entry<Long,LongSet> listNext=listIterator.next();
    Assert.assertEquals(listNext.getKey(),treeNext.get());
    Assert.assertEquals(convert(listNext.getValue()),convert(treeNext));
  }
  Assert.assertFalse("token iterator not finished",tokenIterator.hasNext());
  Assert.assertFalse("list iterator not finished",listIterator.hasNext());
  reader.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerializedSize() throws Exception {
  final TokenTreeBuilder builder=new TokenTreeBuilder(tokens).finish();
  final File treeFile=File.createTempFile("token-tree-size-test","tt");
  treeFile.deleteOnExit();
  try (SequentialWriter writer=new SequentialWriter(treeFile,4096,BufferType.ON_HEAP)){
    builder.write(writer);
    writer.sync();
  }
   final RandomAccessReader reader=RandomAccessReader.open(treeFile);
  Assert.assertEquals((int)reader.bytesRemaining(),builder.serializedSize());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void buildAndIterate() throws Exception {
  final TokenTreeBuilder builder=new TokenTreeBuilder(tokens).finish();
  final Iterator<Pair<Long,LongSet>> tokenIterator=builder.iterator();
  final Iterator<Map.Entry<Long,LongSet>> listIterator=tokens.entrySet().iterator();
  while (tokenIterator.hasNext() && listIterator.hasNext()) {
    Pair<Long,LongSet> tokenNext=tokenIterator.next();
    Map.Entry<Long,LongSet> listNext=listIterator.next();
    Assert.assertEquals(listNext.getKey(),tokenNext.left);
    Assert.assertEquals(listNext.getValue(),tokenNext.right);
  }
  Assert.assertFalse("token iterator not finished",tokenIterator.hasNext());
  Assert.assertFalse("list iterator not finished",listIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void buildSerializeIterateAndSkip() throws Exception {
  final TokenTreeBuilder builder=new TokenTreeBuilder(tokens).finish();
  final File treeFile=File.createTempFile("token-tree-iterate-test2","tt");
  treeFile.deleteOnExit();
  try (SequentialWriter writer=new SequentialWriter(treeFile,4096,BufferType.ON_HEAP)){
    builder.write(writer);
    writer.sync();
  }
   final RandomAccessReader reader=RandomAccessReader.open(treeFile);
  final TokenTree tokenTree=new TokenTree(new MappedBuffer(reader));
  final RangeIterator<Long,Token> treeIterator=tokenTree.iterator(KEY_CONVERTER);
  final RangeIterator<Long,TokenWithOffsets> listIterator=new EntrySetSkippableIterator(tokens);
  long lastToken=0L;
  while (treeIterator.hasNext() && lastToken < 12) {
    Token treeNext=treeIterator.next();
    TokenWithOffsets listNext=listIterator.next();
    Assert.assertEquals(listNext.token,(lastToken=treeNext.get()));
    Assert.assertEquals(convert(listNext.offsets),convert(treeNext));
  }
  treeIterator.skipTo(100548L);
  listIterator.skipTo(100548L);
  while (treeIterator.hasNext() && listIterator.hasNext()) {
    Token treeNext=treeIterator.next();
    TokenWithOffsets listNext=listIterator.next();
    Assert.assertEquals(listNext.token,(long)treeNext.get());
    Assert.assertEquals(convert(listNext.offsets),convert(treeNext));
  }
  Assert.assertFalse("Tree iterator not completed",treeIterator.hasNext());
  Assert.assertFalse("List iterator not completed",listIterator.hasNext());
  reader.close();
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void buildSerializeAndGet() throws Exception {
  final long tokMin=0;
  final long tokMax=1000;
  final TokenTree tokenTree=generateTree(tokMin,tokMax);
  for (long i=0; i <= tokMax; i++) {
    TokenTree.OnDiskToken result=tokenTree.get(i,KEY_CONVERTER);
    Assert.assertNotNull("failed to find object for token " + i,result);
    Set<Long> found=result.getOffsets();
    Assert.assertEquals(1,found.size());
    Assert.assertEquals(i,found.toArray()[0]);
  }
  Assert.assertNull("found missing object",tokenTree.get(tokMax + 10,KEY_CONVERTER));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.plan.OperationTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSatisfiedByWithMultipleTerms(){
  final ColumnDefinition comment=getColumn(UTF8Type.instance.decompose("comment"));
  Unfiltered row=buildRow(buildCell(comment,UTF8Type.instance.decompose("software engineer is working on a project"),System.currentTimeMillis()));
  Operation.Builder builder=new Operation.Builder(OperationType.AND,controller,new SimpleExpression(comment,Operator.EQ,UTF8Type.instance.decompose("eng is a work")));
  Operation op=builder.complete();
  Assert.assertTrue(op.satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller,new SimpleExpression(comment,Operator.EQ,UTF8Type.instance.decompose("soft works fine")));
  op=builder.complete();
  Assert.assertTrue(op.satisfiedBy(row,false));
}

</code></pre>

<br>
<pre class="type-6 type-7 type-15 type-4 type-5 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSatisfiedBy() throws Exception {
  final ColumnDefinition timestamp=getColumn(UTF8Type.instance.decompose("timestamp"));
  final ColumnDefinition age=getColumn(UTF8Type.instance.decompose("age"));
  Operation.Builder builder=new Operation.Builder(OperationType.AND,controller,new SimpleExpression(age,Operator.NEQ,Int32Type.instance.decompose(5)));
  Operation op=builder.complete();
  Unfiltered row=buildRow(buildCell(age,Int32Type.instance.decompose(6),System.currentTimeMillis()));
  Assert.assertTrue(op.satisfiedBy(row,false));
  row=buildRow(buildCell(age,Int32Type.instance.decompose(5),System.currentTimeMillis()));
  Assert.assertFalse(op.satisfiedBy(row,false));
  row=buildRow(buildCell(age,Int32Type.instance.decompose(6),System.currentTimeMillis()));
  Assert.assertTrue(op.satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller,new SimpleExpression(age,Operator.NEQ,Int32Type.instance.decompose(5)),new SimpleExpression(age,Operator.GT,Int32Type.instance.decompose(1)),new SimpleExpression(age,Operator.NEQ,Int32Type.instance.decompose(6)),new SimpleExpression(age,Operator.LTE,Int32Type.instance.decompose(10)));
  op=builder.complete();
  Set<Integer> exclusions=Sets.newHashSet(0,1,5,6,11);
  for (int i=0; i <= 11; i++) {
    row=buildRow(buildCell(age,Int32Type.instance.decompose(i),System.currentTimeMillis()));
    boolean result=op.satisfiedBy(row,false);
    Assert.assertTrue(exclusions.contains(i) != result);
  }
  builder=new Operation.Builder(OperationType.OR,controller,new SimpleExpression(age,Operator.EQ,Int32Type.instance.decompose(5)),new SimpleExpression(age,Operator.EQ,Int32Type.instance.decompose(6)));
  op=builder.complete();
  exclusions=Sets.newHashSet(0,1,2,3,4,7,8,9,10);
  for (int i=0; i <= 10; i++) {
    row=buildRow(buildCell(age,Int32Type.instance.decompose(i),System.currentTimeMillis()));
    boolean result=op.satisfiedBy(row,false);
    Assert.assertTrue(exclusions.contains(i) != result);
  }
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(age,Operator.GTE,Int32Type.instance.decompose(0)));
  builder.add(new SimpleExpression(age,Operator.LT,Int32Type.instance.decompose(10)));
  builder.add(new SimpleExpression(age,Operator.NEQ,Int32Type.instance.decompose(7)));
  op=builder.complete();
  exclusions=Sets.newHashSet(7);
  for (int i=0; i < 10; i++) {
    row=buildRow(buildCell(age,Int32Type.instance.decompose(i),System.currentTimeMillis()));
    boolean result=op.satisfiedBy(row,false);
    Assert.assertTrue(exclusions.contains(i) != result);
  }
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(timestamp,Operator.GTE,LongType.instance.decompose(10L)));
  builder.add(new SimpleExpression(age,Operator.EQ,Int32Type.instance.decompose(5)));
  op=builder.complete();
  row=buildRow(buildCell(age,Int32Type.instance.decompose(6),System.currentTimeMillis()),buildCell(timestamp,LongType.instance.decompose(11L),System.currentTimeMillis()));
  Assert.assertFalse(op.satisfiedBy(row,false));
  row=buildRow(buildCell(age,Int32Type.instance.decompose(5),System.currentTimeMillis()),buildCell(timestamp,LongType.instance.decompose(22L),System.currentTimeMillis()));
  Assert.assertTrue(op.satisfiedBy(row,false));
  row=buildRow(buildCell(age,Int32Type.instance.decompose(5),System.currentTimeMillis()),buildCell(timestamp,LongType.instance.decompose(9L),System.currentTimeMillis()));
  Assert.assertFalse(op.satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.OR,controller,new SimpleExpression(timestamp,Operator.GT,LongType.instance.decompose(10L)));
  builder.setRight(new Operation.Builder(OperationType.AND,controller,new SimpleExpression(age,Operator.GT,Int32Type.instance.decompose(0)),new SimpleExpression(age,Operator.LT,Int32Type.instance.decompose(10))));
  op=builder.complete();
  row=buildRow(buildCell(age,Int32Type.instance.decompose(5),System.currentTimeMillis()),buildCell(timestamp,LongType.instance.decompose(9L),System.currentTimeMillis()));
  Assert.assertTrue(op.satisfiedBy(row,false));
  row=buildRow(buildCell(age,Int32Type.instance.decompose(20),System.currentTimeMillis()),buildCell(timestamp,LongType.instance.decompose(11L),System.currentTimeMillis()));
  Assert.assertTrue(op.satisfiedBy(row,false));
  row=buildRow(buildCell(age,Int32Type.instance.decompose(0),System.currentTimeMillis()),buildCell(timestamp,LongType.instance.decompose(9L),System.currentTimeMillis()));
  Assert.assertFalse(op.satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(age,Operator.EQ,Int32Type.instance.decompose(30)));
  op=builder.complete();
  Assert.assertFalse(op.satisfiedBy(null,false));
  Assert.assertFalse(op.satisfiedBy(row,false));
  long now=System.currentTimeMillis();
  row=OperationTest.buildRow(Row.Deletion.regular(new DeletionTime(now - 10,(int)(now / 1000))),buildCell(age,Int32Type.instance.decompose(6),System.currentTimeMillis()));
  Assert.assertFalse(op.satisfiedBy(row,false));
  row=buildRow(deletedCell(age,System.currentTimeMillis(),FBUtilities.nowInSeconds()));
  Assert.assertFalse(op.satisfiedBy(row,true));
  try {
    Assert.assertFalse(op.satisfiedBy(buildRow(),false));
  }
 catch (  IllegalStateException e) {
  }
  try {
    Assert.assertFalse(op.satisfiedBy(buildRow(),true));
  }
 catch (  IllegalStateException e) {
    Assert.fail("IllegalStateException should not be thrown when missing column and allowMissingColumns=true");
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSatisfiedByWithClustering(){
  ColumnDefinition location=getColumn(CLUSTERING_BACKEND,UTF8Type.instance.decompose("location"));
  ColumnDefinition age=getColumn(CLUSTERING_BACKEND,UTF8Type.instance.decompose("age"));
  ColumnDefinition height=getColumn(CLUSTERING_BACKEND,UTF8Type.instance.decompose("height"));
  ColumnDefinition score=getColumn(CLUSTERING_BACKEND,UTF8Type.instance.decompose("score"));
  Unfiltered row=buildRow(Clustering.make(UTF8Type.instance.fromString("US"),Int32Type.instance.decompose(27)),buildCell(height,Int32Type.instance.decompose(182),System.currentTimeMillis()),buildCell(score,DoubleType.instance.decompose(1.0d),System.currentTimeMillis()));
  Operation.Builder builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(age,Operator.EQ,Int32Type.instance.decompose(27)));
  builder.add(new SimpleExpression(height,Operator.EQ,Int32Type.instance.decompose(182)));
  Assert.assertTrue(builder.complete().satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(age,Operator.EQ,Int32Type.instance.decompose(28)));
  builder.add(new SimpleExpression(height,Operator.EQ,Int32Type.instance.decompose(182)));
  Assert.assertFalse(builder.complete().satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(location,Operator.EQ,UTF8Type.instance.decompose("US")));
  builder.add(new SimpleExpression(age,Operator.GTE,Int32Type.instance.decompose(27)));
  Assert.assertTrue(builder.complete().satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(location,Operator.EQ,UTF8Type.instance.decompose("BY")));
  builder.add(new SimpleExpression(age,Operator.GTE,Int32Type.instance.decompose(28)));
  Assert.assertFalse(builder.complete().satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(location,Operator.EQ,UTF8Type.instance.decompose("US")));
  builder.add(new SimpleExpression(age,Operator.LTE,Int32Type.instance.decompose(27)));
  builder.add(new SimpleExpression(height,Operator.GTE,Int32Type.instance.decompose(182)));
  Assert.assertTrue(builder.complete().satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(location,Operator.EQ,UTF8Type.instance.decompose("US")));
  builder.add(new SimpleExpression(height,Operator.GTE,Int32Type.instance.decompose(182)));
  builder.add(new SimpleExpression(score,Operator.EQ,DoubleType.instance.decompose(1.0d)));
  Assert.assertTrue(builder.complete().satisfiedBy(row,false));
  builder=new Operation.Builder(OperationType.AND,controller);
  builder.add(new SimpleExpression(height,Operator.GTE,Int32Type.instance.decompose(182)));
  builder.add(new SimpleExpression(score,Operator.EQ,DoubleType.instance.decompose(1.0d)));
  Assert.assertTrue(builder.complete().satisfiedBy(row,false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.utils.MappedBufferTest </h4><pre class="type-6 type-7 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSequentialIterationWithPadding() throws Exception {
  long numValues=1000;
  int maxPageBits=6;
  int[] paddings=new int[]{0,3,5,7,9,11,13};
  for (int numPageBits=3; numPageBits <= maxPageBits; numPageBits++) {
    for (int typeSize=2; typeSize <= 8; typeSize*=2) {
      for (      int padding : paddings) {
        try (MappedBuffer buffer=createTestFile(numValues,typeSize,numPageBits,padding)){
          long offset=0;
          for (long j=0; j < numValues; j++) {
switch (typeSize) {
case 2:
              Assert.assertEquals(j,buffer.getShort(offset));
            break;
case 4:
          Assert.assertEquals(j,buffer.getInt(offset));
        break;
case 8:
      Assert.assertEquals(j,buffer.getLong(offset));
    break;
default :
  throw new AssertionError();
}
offset+=typeSize + padding;
}
}
 }
}
}
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSequentialIteration() throws IOException {
  long numValues=1000;
  for (int typeSize=2; typeSize <= 8; typeSize*=2) {
    try (MappedBuffer buffer=createTestFile(numValues,typeSize,16,0)){
      for (int j=0; j < numValues; j++) {
        Assert.assertEquals(j * typeSize,buffer.position());
switch (typeSize) {
case 2:
          Assert.assertEquals(j,buffer.getShort());
        break;
case 4:
      Assert.assertEquals(j,buffer.getInt());
    break;
case 8:
  Assert.assertEquals(j,buffer.getLong());
break;
default :
throw new AssertionError();
}
}
}
 }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDuplicate() throws Exception {
  long numLongs=10;
  final MappedBuffer buffer1=createTestFile(numLongs);
  Assert.assertEquals(0,buffer1.getLong());
  Assert.assertEquals(1,buffer1.getLong());
  final MappedBuffer buffer2=buffer1.duplicate();
  Assert.assertEquals(2,buffer1.getLong());
  Assert.assertEquals(2,buffer2.getLong());
  buffer2.position(0);
  Assert.assertEquals(3,buffer1.getLong());
  Assert.assertEquals(0,buffer2.getLong());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPageRegion() throws Exception {
  ThreadLocalRandom random=ThreadLocalRandom.current();
  int numLongs=1000;
  int byteSize=8;
  int capacity=numLongs * byteSize;
  try (MappedBuffer buffer=createTestFile(numLongs)){
    for (int i=0; i < 1000; i++) {
      int offset=random.nextInt(0,1000 * byteSize - byteSize) & ~(byteSize - 1);
      int length=Math.min(capacity,random.nextInt(byteSize,capacity - offset) & ~(byteSize - 1));
      ByteBuffer region=buffer.getPageRegion(offset,length);
      for (int j=offset; j < (offset + length); j+=8)       Assert.assertEquals(j / 8,region.getLong(j));
    }
  }
 }

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBasicWriteThenRead() throws Exception {
  long numLongs=10000;
  final MappedBuffer buffer=createTestFile(numLongs);
  Assert.assertEquals(0,buffer.position());
  for (long i=0; i < numLongs; i++) {
    Assert.assertEquals(i * 8,buffer.position());
    Assert.assertEquals(i,buffer.getLong());
  }
  buffer.position(0);
  for (long i=0; i < numLongs; i++) {
    Assert.assertEquals(i,buffer.getLong(i * 8));
    Assert.assertEquals(0,buffer.position());
  }
  for (long i=0; i < Math.min(Integer.MAX_VALUE,numLongs); i++)   Assert.assertEquals(i,buffer.getInt((i * 8) + 4));
  for (long i=0; i < Math.min(Short.MAX_VALUE,numLongs); i++) {
    Assert.assertEquals(i,buffer.getShort((i * 8) + 6));
  }
  for (long i=0; i < 128; i++)   Assert.assertEquals(i,buffer.get((i * 8) + 7));
  buffer.close();
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOpenWithoutPageBits() throws IOException {
  File tmp=File.createTempFile("mapped-buffer","tmp");
  tmp.deleteOnExit();
  RandomAccessFile file=new RandomAccessFile(tmp,"rw");
  long numValues=1000;
  for (long i=0; i < numValues; i++)   file.writeLong(i);
  file.getFD().sync();
  try (MappedBuffer buffer=new MappedBuffer(new ChannelProxy(tmp.getAbsolutePath(),file.getChannel()))){
    Assert.assertEquals(numValues * 8,buffer.limit());
    Assert.assertEquals(numValues * 8,buffer.capacity());
    for (long i=0; i < numValues; i++) {
      Assert.assertEquals(i * 8,buffer.position());
      Assert.assertEquals(i,buffer.getLong());
    }
  }
  finally {
    FileUtils.closeQuietly(file);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.utils.RangeIntersectionIteratorTest </h4><pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIteratorPeeking(){
  RangeIterator.Builder<Long,Token> builder=RangeIntersectionIterator.builder();
  builder.add(new LongIterator(new long[]{10L}));
  long[] tokens=new long[150];
  for (int i=0; i < tokens.length; i++)   tokens[i]=i;
  builder.add(new LongIterator(tokens));
  RangeIterator<Long,Token> intersection=builder.build();
  Assert.assertNotNull(intersection);
  Assert.assertEquals(LookupIntersectionIterator.class,intersection.getClass());
  Assert.assertTrue(intersection.hasNext());
  Assert.assertEquals(convert(10L),convert(intersection));
  builder=RangeIntersectionIterator.builder();
  builder.add(new LongIterator(new long[]{1L,3L,5L,7L,9L}));
  builder.add(new LongIterator(new long[]{1L,2L,5L,6L}));
  intersection=builder.build();
  Assert.assertNotNull(intersection);
  Assert.assertEquals(BounceIntersectionIterator.class,intersection.getClass());
  Assert.assertTrue(intersection.hasNext());
  Assert.assertEquals(convert(1L,5L),convert(intersection));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.utils.RangeUnionIteratorTest </h4><pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSkipTo(){
  RangeUnionIterator.Builder<Long,Token> builder=RangeUnionIterator.builder();
  builder.add(new LongIterator(new long[]{1L,2L,3L}));
  builder.add(new LongIterator(new long[]{4L,5L,6L}));
  builder.add(new LongIterator(new long[]{7L,8L,9L}));
  RangeIterator<Long,Token> tokens=builder.build();
  Assert.assertNotNull(tokens);
  tokens.skipTo(5L);
  Assert.assertTrue(tokens.hasNext());
  Assert.assertEquals(5L,(long)tokens.next().get());
  tokens.skipTo(7L);
  Assert.assertTrue(tokens.hasNext());
  Assert.assertEquals(7L,(long)tokens.next().get());
  tokens.skipTo(10L);
  Assert.assertFalse(tokens.hasNext());
  Assert.assertEquals(1L,(long)tokens.getMinimum());
  Assert.assertEquals(9L,(long)tokens.getMaximum());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRangeIterator(){
  LongIterator tokens=new LongIterator(new long[]{0L,1L,2L,3L});
  Assert.assertEquals(0L,(long)tokens.getMinimum());
  Assert.assertEquals(3L,(long)tokens.getMaximum());
  for (int i=0; i <= 3; i++) {
    Assert.assertTrue(tokens.hasNext());
    Assert.assertEquals(i,(long)tokens.getCurrent());
    Assert.assertEquals(i,(long)tokens.next().get());
  }
  tokens=new LongIterator(new long[]{0L,1L,3L,5L});
  Assert.assertEquals(3L,(long)tokens.skipTo(2L).get());
  Assert.assertTrue(tokens.hasNext());
  Assert.assertEquals(3L,(long)tokens.getCurrent());
  Assert.assertEquals(3L,(long)tokens.next().get());
  Assert.assertEquals(5L,(long)tokens.skipTo(5L).get());
  Assert.assertTrue(tokens.hasNext());
  Assert.assertEquals(5L,(long)tokens.getCurrent());
  Assert.assertEquals(5L,(long)tokens.next().get());
  LongIterator empty=new LongIterator(new long[0]);
  Assert.assertNull(empty.skipTo(3L));
  Assert.assertFalse(empty.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomSequences(){
  ThreadLocalRandom random=ThreadLocalRandom.current();
  long[][] values=new long[random.nextInt(1,20)][];
  int numTests=random.nextInt(10,20);
  for (int tests=0; tests < numTests; tests++) {
    RangeUnionIterator.Builder<Long,Token> builder=RangeUnionIterator.builder();
    int totalCount=0;
    for (int i=0; i < values.length; i++) {
      long[] part=new long[random.nextInt(1,500)];
      for (int j=0; j < part.length; j++)       part[j]=random.nextLong();
      Arrays.sort(part);
      values[i]=part;
      builder.add(new LongIterator(part));
      totalCount+=part.length;
    }
    long[] totalOrdering=new long[totalCount];
    int index=0;
    for (    long[] part : values) {
      for (      long value : part)       totalOrdering[index++]=value;
    }
    Arrays.sort(totalOrdering);
    int count=0;
    RangeIterator<Long,Token> tokens=builder.build();
    Assert.assertNotNull(tokens);
    while (tokens.hasNext())     Assert.assertEquals(totalOrdering[count++],(long)tokens.next().get());
    Assert.assertEquals(totalCount,count);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMinMaxAndCount(){
  RangeUnionIterator.Builder<Long,Token> builder=RangeUnionIterator.builder();
  builder.add(new LongIterator(new long[]{1L,2L,3L}));
  builder.add(new LongIterator(new long[]{4L,5L,6L}));
  builder.add(new LongIterator(new long[]{7L,8L,9L}));
  Assert.assertEquals(9L,(long)builder.getMaximum());
  Assert.assertEquals(9L,builder.getTokenCount());
  RangeIterator<Long,Token> tokens=builder.build();
  Assert.assertNotNull(tokens);
  Assert.assertEquals(1L,(long)tokens.getMinimum());
  Assert.assertEquals(9L,(long)tokens.getMaximum());
  Assert.assertEquals(9L,tokens.getCount());
  for (long i=1; i < 10; i++) {
    Assert.assertTrue(tokens.hasNext());
    Assert.assertEquals(i,(long)tokens.next().get());
  }
  Assert.assertFalse(tokens.hasNext());
  Assert.assertEquals(1L,(long)tokens.getMinimum());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.BloomFilterTrackerTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddingToOneLeavesTheOtherAlone(){
  BloomFilterTracker bft=new BloomFilterTracker();
  bft.addFalsePositive();
  assertEquals(0L,bft.getTruePositiveCount());
  assertEquals(0L,bft.getRecentTruePositiveCount());
  bft.addTruePositive();
  assertEquals(1L,bft.getFalsePositiveCount());
  assertEquals(1L,bft.getRecentFalsePositiveCount());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddingFalsePositives(){
  BloomFilterTracker bft=new BloomFilterTracker();
  assertEquals(0L,bft.getFalsePositiveCount());
  assertEquals(0L,bft.getRecentFalsePositiveCount());
  bft.addFalsePositive();
  bft.addFalsePositive();
  assertEquals(2L,bft.getFalsePositiveCount());
  assertEquals(2L,bft.getRecentFalsePositiveCount());
  assertEquals(0L,bft.getRecentFalsePositiveCount());
  assertEquals(2L,bft.getFalsePositiveCount());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddingTruePositives(){
  BloomFilterTracker bft=new BloomFilterTracker();
  assertEquals(0L,bft.getTruePositiveCount());
  assertEquals(0L,bft.getRecentTruePositiveCount());
  bft.addTruePositive();
  bft.addTruePositive();
  assertEquals(2L,bft.getTruePositiveCount());
  assertEquals(2L,bft.getRecentTruePositiveCount());
  assertEquals(0L,bft.getRecentTruePositiveCount());
  assertEquals(2L,bft.getTruePositiveCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.compress.CompressedRandomAccessReaderTest </h4><pre class="type-7 type-13 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test6791() throws IOException, ConfigurationException {
  File f=File.createTempFile("compressed6791_","3");
  String filename=f.getAbsolutePath();
  try (ChannelProxy channel=new ChannelProxy(f)){
    MetadataCollector sstableMetadataCollector=new MetadataCollector(new ClusteringComparator(BytesType.instance));
    try (CompressedSequentialWriter writer=new CompressedSequentialWriter(f,filename + ".metadata",CompressionParams.snappy(32),sstableMetadataCollector)){
      for (int i=0; i < 20; i++)       writer.write("x".getBytes());
      FileMark mark=writer.mark();
      for (int i=0; i < 40; ++i)       writer.write("y".getBytes());
      writer.resetAndTruncate(mark);
      for (int i=0; i < 20; i++)       writer.write("x".getBytes());
      writer.finish();
    }
     try (RandomAccessReader reader=new CompressedRandomAccessReader.Builder(channel,new CompressionMetadata(filename + ".metadata",f.length(),ChecksumType.CRC32)).build()){
      String res=reader.readLine();
      assertEquals(res,"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
      assertEquals(40,res.length());
    }
   }
  finally {
    if (f.exists())     assertTrue(f.delete());
    File metadata=new File(filename + ".metadata");
    if (metadata.exists())     metadata.delete();
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-14 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDataCorruptionDetection() throws IOException {
  String CONTENT="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam vitae.";
  File file=new File("testDataCorruptionDetection");
  file.deleteOnExit();
  File metadata=new File(file.getPath() + ".meta");
  metadata.deleteOnExit();
  assertTrue(file.createNewFile());
  assertTrue(metadata.createNewFile());
  MetadataCollector sstableMetadataCollector=new MetadataCollector(new ClusteringComparator(BytesType.instance)).replayPosition(null);
  try (SequentialWriter writer=new CompressedSequentialWriter(file,metadata.getPath(),CompressionParams.snappy(),sstableMetadataCollector)){
    writer.write(CONTENT.getBytes());
    writer.finish();
  }
   try (ChannelProxy channel=new ChannelProxy(file)){
    CompressionMetadata meta=new CompressionMetadata(metadata.getPath(),file.length(),ChecksumType.CRC32);
    CompressionMetadata.Chunk chunk=meta.chunkFor(0);
    try (RandomAccessReader reader=new CompressedRandomAccessReader.Builder(channel,meta).build()){
      assertEquals(CONTENT,reader.readLine());
      Random random=new Random();
      RandomAccessFile checksumModifier=null;
      try {
        checksumModifier=new RandomAccessFile(file,"rw");
        byte[] checksum=new byte[4];
        checksumModifier.seek(chunk.length);
        checksumModifier.read(checksum);
        checksumModifier.seek(chunk.length);
        for (int i=0; i < checksum.length; i++) {
          checksumModifier.write(random.nextInt());
          SyncUtil.sync(checksumModifier);
          try (final RandomAccessReader r=new CompressedRandomAccessReader.Builder(channel,meta).build()){
            Throwable exception=null;
            try {
              r.readLine();
            }
 catch (            Throwable t) {
              exception=t;
            }
            assertNotNull(exception);
            assertSame(exception.getClass(),CorruptSSTableException.class);
            assertSame(exception.getCause().getClass(),CorruptBlockException.class);
          }
         }
        updateChecksum(checksumModifier,chunk.length,checksum);
        try (RandomAccessReader cr=new CompressedRandomAccessReader.Builder(channel,meta).build()){
          assertEquals(CONTENT,cr.readLine());
        }
       }
  finally {
        if (checksumModifier != null)         checksumModifier.close();
      }
    }
   }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.CQLSSTableWriterTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnsortedWriter() throws Exception {
  try (AutoCloseable switcher=Util.switchPartitioner(ByteOrderedPartitioner.instance)){
    String KS="cql_keyspace";
    String TABLE="table1";
    File tempdir=Files.createTempDir();
    File dataDir=new File(tempdir.getAbsolutePath() + File.separator + KS+ File.separator+ TABLE);
    assert dataDir.mkdirs();
    String schema="CREATE TABLE cql_keyspace.table1 (" + "  k int PRIMARY KEY," + "  v1 text,"+ "  v2 int"+ ")";
    String insert="INSERT INTO cql_keyspace.table1 (k, v1, v2) VALUES (?, ?, ?)";
    CQLSSTableWriter writer=CQLSSTableWriter.builder().inDirectory(dataDir).forTable(schema).using(insert).build();
    writer.addRow(0,"test1",24);
    writer.addRow(1,"test2",44);
    writer.addRow(2,"test3",42);
    writer.addRow(ImmutableMap.<String,Object>of("k",3,"v2",12));
    writer.close();
    SSTableLoader loader=new SSTableLoader(dataDir,new SSTableLoader.Client(){
      private String keyspace;
      public void init(      String keyspace){
        this.keyspace=keyspace;
        for (        Range<Token> range : StorageService.instance.getLocalRanges("cql_keyspace"))         addRangeForEndpoint(range,FBUtilities.getBroadcastAddress());
      }
      public CFMetaData getTableMetadata(      String cfName){
        return Schema.instance.getCFMetaData(keyspace,cfName);
      }
    }
,new OutputHandler.SystemOutput(false,false));
    loader.stream().get();
    UntypedResultSet rs=QueryProcessor.executeInternal("SELECT * FROM cql_keyspace.table1;");
    assertEquals(4,rs.size());
    Iterator<UntypedResultSet.Row> iter=rs.iterator();
    UntypedResultSet.Row row;
    row=iter.next();
    assertEquals(0,row.getInt("k"));
    assertEquals("test1",row.getString("v1"));
    assertEquals(24,row.getInt("v2"));
    row=iter.next();
    assertEquals(1,row.getInt("k"));
    assertEquals("test2",row.getString("v1"));
    assertEquals(44,row.getInt("v2"));
    row=iter.next();
    assertEquals(2,row.getInt("k"));
    assertEquals("test3",row.getString("v1"));
    assertEquals(42,row.getInt("v2"));
    row=iter.next();
    assertEquals(3,row.getInt("k"));
    assertEquals(null,row.getBytes("v1"));
    assertEquals(12,row.getInt("v2"));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.IndexSummaryManagerTest </h4><pre class="type-7 type-13 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testRedistributeSummaries() throws IOException {
  String ksname=KEYSPACE1;
  String cfname=CF_STANDARDLOWiINTERVAL;
  Keyspace keyspace=Keyspace.open(ksname);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  int numSSTables=4;
  int numRows=256;
  createSSTables(ksname,cfname,numSSTables,numRows);
  int minSamplingLevel=(BASE_SAMPLING_LEVEL * cfs.metadata.params.minIndexInterval) / cfs.metadata.params.maxIndexInterval;
  List<SSTableReader> sstables=new ArrayList<>(cfs.getLiveSSTables());
  for (  SSTableReader sstable : sstables)   sstable.overrideReadMeter(new RestorableMeter(100.0,100.0));
  long singleSummaryOffHeapSpace=sstables.get(0).getIndexSummaryOffHeapSize();
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(singleSummaryOffHeapSpace * numSSTables));
  }
   for (  SSTableReader sstable : sstables)   assertEquals(BASE_SAMPLING_LEVEL,sstable.getIndexSummarySamplingLevel());
  assertEquals(singleSummaryOffHeapSpace * numSSTables,totalOffHeapSize(sstables));
  validateData(cfs,numRows);
  assert sstables.size() == 4;
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(singleSummaryOffHeapSpace * (numSSTables / 2)));
  }
   for (  SSTableReader sstable : sstables)   assertEquals(BASE_SAMPLING_LEVEL / 2,sstable.getIndexSummarySamplingLevel());
  validateData(cfs,numRows);
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(singleSummaryOffHeapSpace * (numSSTables / 4)));
  }
   for (  SSTableReader sstable : sstables)   assertEquals(BASE_SAMPLING_LEVEL / 4,sstable.getIndexSummarySamplingLevel());
  validateData(cfs,numRows);
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(singleSummaryOffHeapSpace * (numSSTables / 2) + 4));
  }
   assert sstables.size() == 4;
  for (  SSTableReader sstable : sstables)   assertEquals(BASE_SAMPLING_LEVEL / 2,sstable.getIndexSummarySamplingLevel());
  validateData(cfs,numRows);
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(singleSummaryOffHeapSpace * numSSTables));
  }
   for (  SSTableReader sstable : sstables)   assertEquals(BASE_SAMPLING_LEVEL,sstable.getIndexSummarySamplingLevel());
  validateData(cfs,numRows);
  sstables.get(0).overrideReadMeter(new RestorableMeter(50.0,50.0));
  sstables.get(1).overrideReadMeter(new RestorableMeter(50.0,50.0));
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(singleSummaryOffHeapSpace * 3));
  }
   Collections.sort(sstables,hotnessComparator);
  assertEquals(BASE_SAMPLING_LEVEL / 2,sstables.get(0).getIndexSummarySamplingLevel());
  assertEquals(BASE_SAMPLING_LEVEL / 2,sstables.get(1).getIndexSummarySamplingLevel());
  assertEquals(BASE_SAMPLING_LEVEL,sstables.get(2).getIndexSummarySamplingLevel());
  assertEquals(BASE_SAMPLING_LEVEL,sstables.get(3).getIndexSummarySamplingLevel());
  validateData(cfs,numRows);
  double lowerRate=50.0 * (DOWNSAMPLE_THESHOLD + (DOWNSAMPLE_THESHOLD * 0.10));
  double higherRate=50.0 * (UPSAMPLE_THRESHOLD - (UPSAMPLE_THRESHOLD * 0.10));
  sstables.get(0).overrideReadMeter(new RestorableMeter(lowerRate,lowerRate));
  sstables.get(1).overrideReadMeter(new RestorableMeter(higherRate,higherRate));
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(singleSummaryOffHeapSpace * 3));
  }
   Collections.sort(sstables,hotnessComparator);
  assertEquals(BASE_SAMPLING_LEVEL / 2,sstables.get(0).getIndexSummarySamplingLevel());
  assertEquals(BASE_SAMPLING_LEVEL / 2,sstables.get(1).getIndexSummarySamplingLevel());
  assertEquals(BASE_SAMPLING_LEVEL,sstables.get(2).getIndexSummarySamplingLevel());
  assertEquals(BASE_SAMPLING_LEVEL,sstables.get(3).getIndexSummarySamplingLevel());
  validateData(cfs,numRows);
  sstables=resetSummaries(cfs,sstables,singleSummaryOffHeapSpace);
  sstables.get(0).overrideReadMeter(new RestorableMeter(1.0,1.0));
  sstables.get(1).overrideReadMeter(new RestorableMeter(2.0,2.0));
  sstables.get(2).overrideReadMeter(new RestorableMeter(1000.0,1000.0));
  sstables.get(3).overrideReadMeter(new RestorableMeter(1000.0,1000.0));
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(singleSummaryOffHeapSpace * 3) + 50);
  }
   Collections.sort(sstables,hotnessComparator);
  if (sstables.get(0).getIndexSummarySamplingLevel() == minSamplingLevel)   assertEquals(BASE_SAMPLING_LEVEL,sstables.get(1).getIndexSummarySamplingLevel());
 else   assertEquals(BASE_SAMPLING_LEVEL,sstables.get(0).getIndexSummarySamplingLevel());
  assertEquals(BASE_SAMPLING_LEVEL,sstables.get(2).getIndexSummarySamplingLevel());
  assertEquals(BASE_SAMPLING_LEVEL,sstables.get(3).getIndexSummarySamplingLevel());
  validateData(cfs,numRows);
  sstables.get(0).overrideReadMeter(new RestorableMeter(0.0,0.0));
  sstables.get(1).overrideReadMeter(new RestorableMeter(0.0,0.0));
  sstables.get(2).overrideReadMeter(new RestorableMeter(92,92));
  sstables.get(3).overrideReadMeter(new RestorableMeter(128.0,128.0));
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(long)(singleSummaryOffHeapSpace + (singleSummaryOffHeapSpace * (92.0 / BASE_SAMPLING_LEVEL))));
  }
   Collections.sort(sstables,hotnessComparator);
  assertEquals(1,sstables.get(0).getIndexSummarySize());
  assertEquals(1,sstables.get(0).getIndexSummarySize());
  assertTrue(sstables.get(2).getIndexSummarySamplingLevel() > minSamplingLevel);
  assertTrue(sstables.get(2).getIndexSummarySamplingLevel() < BASE_SAMPLING_LEVEL);
  assertEquals(BASE_SAMPLING_LEVEL,sstables.get(3).getIndexSummarySamplingLevel());
  validateData(cfs,numRows);
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    sstables=redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),10);
  }
   for (  SSTableReader sstable : sstables)   assertEquals(1,sstable.getIndexSummarySize());
  validateData(cfs,numRows);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testJMXFunctions() throws IOException {
  IndexSummaryManager manager=IndexSummaryManager.instance;
  manager.setResizeIntervalInMinutes(-1);
  assertNull(manager.getTimeToNextResize(TimeUnit.MINUTES));
  manager.setResizeIntervalInMinutes(10);
  assertEquals(10,manager.getResizeIntervalInMinutes());
  assertEquals(10,manager.getTimeToNextResize(TimeUnit.MINUTES),1);
  manager.setResizeIntervalInMinutes(15);
  assertEquals(15,manager.getResizeIntervalInMinutes());
  assertEquals(15,manager.getTimeToNextResize(TimeUnit.MINUTES),2);
  assertTrue(manager.getMemoryPoolCapacityInMB() >= 0);
  manager.setMemoryPoolCapacityInMB(10);
  assertEquals(10,manager.getMemoryPoolCapacityInMB());
  String ksname=KEYSPACE1;
  String cfname=CF_STANDARDLOWiINTERVAL;
  Keyspace keyspace=Keyspace.open(ksname);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  cfs.truncateBlocking();
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  int numSSTables=2;
  int numRows=10;
  for (int sstable=0; sstable < numSSTables; sstable++) {
    for (int row=0; row < numRows; row++) {
      String key=String.format("%3d",row);
      new RowUpdateBuilder(cfs.metadata,0,key).clustering("column").add("val",value).build().applyUnsafe();
    }
    cfs.forceBlockingFlush();
  }
  assertTrue(manager.getAverageIndexInterval() >= cfs.metadata.params.minIndexInterval);
  Map<String,Integer> intervals=manager.getIndexIntervals();
  for (  Map.Entry<String,Integer> entry : intervals.entrySet())   if (entry.getKey().contains(CF_STANDARDLOWiINTERVAL))   assertEquals(cfs.metadata.params.minIndexInterval,entry.getValue(),0.001);
  manager.setMemoryPoolCapacityInMB(0);
  manager.redistributeSummaries();
  assertTrue(manager.getAverageIndexInterval() > cfs.metadata.params.minIndexInterval);
  intervals=manager.getIndexIntervals();
  for (  Map.Entry<String,Integer> entry : intervals.entrySet()) {
    if (entry.getKey().contains(CF_STANDARDLOWiINTERVAL))     assertTrue(entry.getValue() >= cfs.metadata.params.minIndexInterval);
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChangeMaxIndexInterval() throws IOException {
  String ksname=KEYSPACE1;
  String cfname=CF_STANDARDLOWiINTERVAL;
  Keyspace keyspace=Keyspace.open(ksname);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  int numSSTables=1;
  int numRows=256;
  createSSTables(ksname,cfname,numSSTables,numRows);
  List<SSTableReader> sstables=new ArrayList<>(cfs.getLiveSSTables());
  for (  SSTableReader sstable : sstables)   sstable.overrideReadMeter(new RestorableMeter(100.0,100.0));
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),10);
  }
   sstables=new ArrayList<>(cfs.getLiveSSTables());
  for (  SSTableReader sstable : sstables)   assertEquals(cfs.metadata.params.maxIndexInterval,sstable.getEffectiveIndexInterval(),0.01);
  cfs.metadata.maxIndexInterval(cfs.metadata.params.maxIndexInterval / 2);
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),1);
  }
   sstables=new ArrayList<>(cfs.getLiveSSTables());
  for (  SSTableReader sstable : sstables) {
    assertEquals(cfs.metadata.params.maxIndexInterval,sstable.getEffectiveIndexInterval(),0.01);
    assertEquals(numRows / cfs.metadata.params.maxIndexInterval,sstable.getIndexSummarySize());
  }
  cfs.metadata.maxIndexInterval(cfs.metadata.params.maxIndexInterval * 2);
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
    redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),1);
  }
   for (  SSTableReader sstable : cfs.getLiveSSTables()) {
    assertEquals(cfs.metadata.params.maxIndexInterval,sstable.getEffectiveIndexInterval(),0.01);
    assertEquals(numRows / cfs.metadata.params.maxIndexInterval,sstable.getIndexSummarySize());
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testRebuildAtSamplingLevel() throws IOException {
  String ksname=KEYSPACE1;
  String cfname=CF_STANDARDLOWiINTERVAL;
  Keyspace keyspace=Keyspace.open(ksname);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  cfs.truncateBlocking();
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  int numRows=256;
  for (int row=0; row < numRows; row++) {
    String key=String.format("%3d",row);
    new RowUpdateBuilder(cfs.metadata,0,key).clustering("column").add("val",value).build().applyUnsafe();
  }
  cfs.forceBlockingFlush();
  List<SSTableReader> sstables=new ArrayList<>(cfs.getLiveSSTables());
  assertEquals(1,sstables.size());
  SSTableReader original=sstables.get(0);
  SSTableReader sstable=original;
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(asList(sstable),OperationType.UNKNOWN)){
    for (int samplingLevel=1; samplingLevel < BASE_SAMPLING_LEVEL; samplingLevel++) {
      sstable=sstable.cloneWithNewSummarySamplingLevel(cfs,samplingLevel);
      assertEquals(samplingLevel,sstable.getIndexSummarySamplingLevel());
      int expectedSize=(numRows * samplingLevel) / (sstable.metadata.params.minIndexInterval * BASE_SAMPLING_LEVEL);
      assertEquals(expectedSize,sstable.getIndexSummarySize(),1);
      txn.update(sstable,true);
      txn.checkpoint();
    }
    txn.finish();
  }
 }

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCancelIndex() throws Exception {
  String ksname=KEYSPACE1;
  String cfname=CF_STANDARDLOWiINTERVAL;
  Keyspace keyspace=Keyspace.open(ksname);
  final ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  final int numSSTables=4;
  int numRows=256;
  createSSTables(ksname,cfname,numSSTables,numRows);
  final List<SSTableReader> sstables=new ArrayList<>(cfs.getLiveSSTables());
  for (  SSTableReader sstable : sstables)   sstable.overrideReadMeter(new RestorableMeter(100.0,100.0));
  final long singleSummaryOffHeapSpace=sstables.get(0).getIndexSummaryOffHeapSize();
  final AtomicReference<CompactionInterruptedException> exception=new AtomicReference<>();
  Thread t=new Thread(new Runnable(){
    public void run(){
      try {
        try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
          redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),singleSummaryOffHeapSpace);
        }
       }
 catch (      CompactionInterruptedException ex) {
        exception.set(ex);
      }
catch (      IOException ignored) {
      }
    }
  }
);
  t.start();
  while (CompactionManager.instance.getActiveCompactions() == 0 && t.isAlive())   Thread.sleep(1);
  CompactionManager.instance.stopCompaction("INDEX_SUMMARY");
  t.join();
  assertNotNull("Expected compaction interrupted exception",exception.get());
  assertTrue("Expected no active compactions",CompactionMetrics.getCompactions().isEmpty());
  Set<SSTableReader> beforeRedistributionSSTables=new HashSet<>(sstables);
  Set<SSTableReader> afterCancelSSTables=new HashSet<>(cfs.getLiveSSTables());
  Set<SSTableReader> disjoint=Sets.symmetricDifference(beforeRedistributionSSTables,afterCancelSSTables);
  assertTrue(String.format("Mismatched files before and after cancelling redistribution: %s",Joiner.on(",").join(disjoint)),disjoint.isEmpty());
  validateData(cfs,numRows);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChangeMinIndexInterval() throws IOException {
  String ksname=KEYSPACE1;
  String cfname=CF_STANDARDLOWiINTERVAL;
  Keyspace keyspace=Keyspace.open(ksname);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  int numSSTables=1;
  int numRows=256;
  createSSTables(ksname,cfname,numSSTables,numRows);
  List<SSTableReader> sstables=new ArrayList<>(cfs.getLiveSSTables());
  for (  SSTableReader sstable : sstables)   sstable.overrideReadMeter(new RestorableMeter(100.0,100.0));
  for (  SSTableReader sstable : sstables)   assertEquals(cfs.metadata.params.minIndexInterval,sstable.getEffectiveIndexInterval(),0.001);
  cfs.metadata.minIndexInterval(originalMinIndexInterval * 2);
  IndexSummaryManager.instance.redistributeSummaries();
  for (  SSTableReader sstable : cfs.getLiveSSTables()) {
    assertEquals(cfs.metadata.params.minIndexInterval,sstable.getEffectiveIndexInterval(),0.001);
    assertEquals(numRows / cfs.metadata.params.minIndexInterval,sstable.getIndexSummarySize());
  }
  cfs.metadata.minIndexInterval(originalMinIndexInterval);
  IndexSummaryManager.instance.redistributeSummaries();
  for (  SSTableReader sstable : cfs.getLiveSSTables()) {
    assertEquals(cfs.metadata.params.minIndexInterval,sstable.getEffectiveIndexInterval(),0.001);
    assertEquals(numRows / cfs.metadata.params.minIndexInterval,sstable.getIndexSummarySize());
  }
  cfs.metadata.minIndexInterval(originalMinIndexInterval / 2);
  SSTableReader sstable=cfs.getLiveSSTables().iterator().next();
  long summarySpace=sstable.getIndexSummaryOffHeapSize();
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(asList(sstable),OperationType.UNKNOWN)){
    redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),summarySpace);
  }
   sstable=cfs.getLiveSSTables().iterator().next();
  assertEquals(originalMinIndexInterval,sstable.getEffectiveIndexInterval(),0.001);
  assertEquals(numRows / originalMinIndexInterval,sstable.getIndexSummarySize());
  double previousInterval=sstable.getEffectiveIndexInterval();
  int previousSize=sstable.getIndexSummarySize();
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(asList(sstable),OperationType.UNKNOWN)){
    redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(long)Math.ceil(summarySpace * 1.5));
  }
   sstable=cfs.getLiveSSTables().iterator().next();
  assertEquals(previousSize * 1.5,(double)sstable.getIndexSummarySize(),1);
  assertEquals(previousInterval * (1.0 / 1.5),sstable.getEffectiveIndexInterval(),0.001);
  cfs.metadata.minIndexInterval(originalMinIndexInterval);
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(asList(sstable),OperationType.UNKNOWN)){
    redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),(long)Math.ceil(summarySpace / 2.0));
  }
   sstable=cfs.getLiveSSTables().iterator().next();
  assertEquals(originalMinIndexInterval * 2,sstable.getEffectiveIndexInterval(),0.001);
  assertEquals(numRows / (originalMinIndexInterval * 2),sstable.getIndexSummarySize());
  cfs.metadata.minIndexInterval(originalMinIndexInterval * 4);
  cfs.metadata.maxIndexInterval(originalMinIndexInterval * 4);
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(asList(sstable),OperationType.UNKNOWN)){
    redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),10);
  }
   sstable=cfs.getLiveSSTables().iterator().next();
  assertEquals(cfs.metadata.params.minIndexInterval,sstable.getEffectiveIndexInterval(),0.001);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.IndexSummaryTest </h4><pre class="type-6 type-7 type-13 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testDownsample(){
  final int NUM_KEYS=4096;
  final int INDEX_INTERVAL=128;
  final int ORIGINAL_NUM_ENTRIES=NUM_KEYS / INDEX_INTERVAL;
  Pair<List<DecoratedKey>,IndexSummary> random=generateRandomIndex(NUM_KEYS,INDEX_INTERVAL);
  List<DecoratedKey> keys=random.left;
  IndexSummary original=random.right;
  for (int i=0; i < ORIGINAL_NUM_ENTRIES; i++)   assertEquals(keys.get(i * INDEX_INTERVAL).getKey(),ByteBuffer.wrap(original.getKey(i)));
  List<Integer> samplePattern=Downsampling.getSamplingPattern(BASE_SAMPLING_LEVEL);
  int downsamplingRound=1;
  for (int samplingLevel=BASE_SAMPLING_LEVEL - 1; samplingLevel >= 1; samplingLevel--) {
    try (IndexSummary downsampled=downsample(original,samplingLevel,128,partitioner)){
      assertEquals(entriesAtSamplingLevel(samplingLevel,original.getMaxNumberOfEntries()),downsampled.size());
      int sampledCount=0;
      List<Integer> skipStartPoints=samplePattern.subList(0,downsamplingRound);
      for (int i=0; i < ORIGINAL_NUM_ENTRIES; i++) {
        if (!shouldSkip(i,skipStartPoints)) {
          assertEquals(keys.get(i * INDEX_INTERVAL).getKey(),ByteBuffer.wrap(downsampled.getKey(sampledCount)));
          sampledCount++;
        }
      }
      testPosition(original,downsampled,keys);
      downsamplingRound++;
    }
   }
  IndexSummary previous=original;
  downsamplingRound=1;
  for (int downsampleLevel=BASE_SAMPLING_LEVEL - 1; downsampleLevel >= 1; downsampleLevel--) {
    IndexSummary downsampled=downsample(previous,downsampleLevel,128,partitioner);
    if (previous != original)     previous.close();
    assertEquals(entriesAtSamplingLevel(downsampleLevel,original.getMaxNumberOfEntries()),downsampled.size());
    int sampledCount=0;
    List<Integer> skipStartPoints=samplePattern.subList(0,downsamplingRound);
    for (int i=0; i < ORIGINAL_NUM_ENTRIES; i++) {
      if (!shouldSkip(i,skipStartPoints)) {
        assertEquals(keys.get(i * INDEX_INTERVAL).getKey(),ByteBuffer.wrap(downsampled.getKey(sampledCount)));
        sampledCount++;
      }
    }
    testPosition(original,downsampled,keys);
    previous=downsampled;
    downsamplingRound++;
  }
  previous.close();
  original.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddEmptyKey() throws Exception {
  IPartitioner p=new RandomPartitioner();
  try (IndexSummaryBuilder builder=new IndexSummaryBuilder(1,1,BASE_SAMPLING_LEVEL)){
    builder.maybeAddEntry(p.decorateKey(ByteBufferUtil.EMPTY_BYTE_BUFFER),0);
    IndexSummary summary=builder.build(p);
    assertEquals(1,summary.size());
    assertEquals(0,summary.getPosition(0));
    assertArrayEquals(new byte[0],summary.getKey(0));
    DataOutputBuffer dos=new DataOutputBuffer();
    IndexSummary.serializer.serialize(summary,dos,false);
    DataInputStream dis=new DataInputStream(new ByteArrayInputStream(dos.toByteArray()));
    IndexSummary loaded=IndexSummary.serializer.deserialize(dis,p,false,1,1);
    assertEquals(1,loaded.size());
    assertEquals(summary.getPosition(0),loaded.getPosition(0));
    assertArrayEquals(summary.getKey(0),summary.getKey(0));
    summary.close();
    loaded.close();
  }
 }

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization() throws IOException {
  Pair<List<DecoratedKey>,IndexSummary> random=generateRandomIndex(100,1);
  DataOutputBuffer dos=new DataOutputBuffer();
  IndexSummary.serializer.serialize(random.right,dos,false);
  dos.writeUTF("JUNK");
  dos.writeUTF("JUNK");
  FileUtils.closeQuietly(dos);
  DataInputStream dis=new DataInputStream(new ByteArrayInputStream(dos.toByteArray()));
  IndexSummary is=IndexSummary.serializer.deserialize(dis,partitioner,false,1,1);
  for (int i=0; i < 100; i++)   assertEquals(i,is.binarySearch(random.left.get(i)));
  assertEquals(dis.readUTF(),"JUNK");
  assertEquals(dis.readUTF(),"JUNK");
  is.close();
  FileUtils.closeQuietly(dis);
  random.right.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.SSTableLoaderTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoadingIncompleteSSTable() throws Exception {
  File dataDir=new File(tmpdir.getAbsolutePath() + File.separator + KEYSPACE1+ File.separator+ CF_STANDARD2);
  assert dataDir.mkdirs();
  assertTrue(dataDir.listFiles().length == 0);
  String schema="CREATE TABLE %s.%s (key ascii, name ascii, val ascii, val1 ascii, PRIMARY KEY (key, name))";
  String query="INSERT INTO %s.%s (key, name, val) VALUES (?, ?, ?)";
  CQLSSTableWriter writer=CQLSSTableWriter.builder().inDirectory(dataDir).forTable(String.format(schema,KEYSPACE1,CF_STANDARD2)).using(String.format(query,KEYSPACE1,CF_STANDARD2)).withBufferSizeInMB(1).build();
  int NB_PARTITIONS=5000;
  for (int i=0; i < NB_PARTITIONS; i++) {
    for (int j=0; j < 100; j++)     writer.addRow(String.format("key%d",i),String.format("col%d",j),"100");
  }
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD2);
  cfs.forceBlockingFlush();
  assertTrue(dataDir.listFiles().length > 0);
  final CountDownLatch latch=new CountDownLatch(2);
  SSTableLoader loader=new SSTableLoader(dataDir,new TestClient(),new OutputHandler.SystemOutput(false,false));
  loader.stream(Collections.emptySet(),completionStreamListener(latch)).get();
  List<FilteredPartition> partitions=Util.getAll(Util.cmd(cfs).build());
  assertTrue(partitions.size() > 0 && partitions.size() < NB_PARTITIONS);
  writer.close();
  loader=new SSTableLoader(dataDir,new TestClient(),new OutputHandler.SystemOutput(false,false));
  loader.stream(Collections.emptySet(),completionStreamListener(latch)).get();
  partitions=Util.getAll(Util.cmd(Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD2)).build());
  assertEquals(NB_PARTITIONS,partitions.size());
  latch.await();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLoadingSSTable() throws Exception {
  File dataDir=new File(tmpdir.getAbsolutePath() + File.separator + KEYSPACE1+ File.separator+ CF_STANDARD1);
  assert dataDir.mkdirs();
  CFMetaData cfmeta=Schema.instance.getCFMetaData(KEYSPACE1,CF_STANDARD1);
  String schema="CREATE TABLE %s.%s (key ascii, name ascii, val ascii, val1 ascii, PRIMARY KEY (key, name))";
  String query="INSERT INTO %s.%s (key, name, val) VALUES (?, ?, ?)";
  try (CQLSSTableWriter writer=CQLSSTableWriter.builder().inDirectory(dataDir).forTable(String.format(schema,KEYSPACE1,CF_STANDARD1)).using(String.format(query,KEYSPACE1,CF_STANDARD1)).build()){
    writer.addRow("key1","col1","100");
  }
   ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD1);
  cfs.forceBlockingFlush();
  final CountDownLatch latch=new CountDownLatch(1);
  SSTableLoader loader=new SSTableLoader(dataDir,new TestClient(),new OutputHandler.SystemOutput(false,false));
  loader.stream(Collections.emptySet(),completionStreamListener(latch)).get();
  List<FilteredPartition> partitions=Util.getAll(Util.cmd(cfs).build());
  assertEquals(1,partitions.size());
  assertEquals("key1",AsciiType.instance.getString(partitions.get(0).partitionKey().getKey()));
  assertEquals(ByteBufferUtil.bytes("100"),partitions.get(0).getRow(Clustering.make(ByteBufferUtil.bytes("col1"))).getCell(cfmeta.getColumnDefinition(ByteBufferUtil.bytes("val"))).value());
  latch.await();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.SSTableMetadataTest </h4><pre class="type-7 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTrackMaxDeletionTime(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore("Standard1");
  long timestamp=System.currentTimeMillis();
  for (int i=0; i < 10; i++) {
    DecoratedKey key=Util.dk(Integer.toString(i));
    for (int j=0; j < 10; j++)     new RowUpdateBuilder(store.metadata,timestamp,10 + j,Integer.toString(i)).clustering(Integer.toString(j)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  new RowUpdateBuilder(store.metadata,timestamp,10000,"longttl").clustering("col").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  store.forceBlockingFlush();
  assertEquals(1,store.getLiveSSTables().size());
  int ttltimestamp=(int)(System.currentTimeMillis() / 1000);
  int firstDelTime=0;
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    firstDelTime=sstable.getSSTableMetadata().maxLocalDeletionTime;
    assertEquals(ttltimestamp + 10000,firstDelTime,10);
  }
  new RowUpdateBuilder(store.metadata,timestamp,20000,"longttl2").clustering("col").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  ttltimestamp=(int)(System.currentTimeMillis() / 1000);
  store.forceBlockingFlush();
  assertEquals(2,store.getLiveSSTables().size());
  List<SSTableReader> sstables=new ArrayList<>(store.getLiveSSTables());
  if (sstables.get(0).getSSTableMetadata().maxLocalDeletionTime < sstables.get(1).getSSTableMetadata().maxLocalDeletionTime) {
    assertEquals(sstables.get(0).getSSTableMetadata().maxLocalDeletionTime,firstDelTime);
    assertEquals(sstables.get(1).getSSTableMetadata().maxLocalDeletionTime,ttltimestamp + 20000,10);
  }
 else {
    assertEquals(sstables.get(1).getSSTableMetadata().maxLocalDeletionTime,firstDelTime);
    assertEquals(sstables.get(0).getSSTableMetadata().maxLocalDeletionTime,ttltimestamp + 20000,10);
  }
  Util.compact(store,store.getLiveSSTables());
  assertEquals(1,store.getLiveSSTables().size());
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    assertEquals(sstable.getSSTableMetadata().maxLocalDeletionTime,ttltimestamp + 20000,10);
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void trackMaxMinColNames() throws CharacterCodingException, ExecutionException, InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore("Standard3");
  for (int j=0; j < 8; j++) {
    String key="row" + j;
    for (int i=100; i < 150; i++) {
      new RowUpdateBuilder(store.metadata,System.currentTimeMillis(),key).clustering(j + "col" + i).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
    }
  }
  store.forceBlockingFlush();
  assertEquals(1,store.getLiveSSTables().size());
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    assertEquals(ByteBufferUtil.string(sstable.getSSTableMetadata().minClusteringValues.get(0)),"0col100");
    assertEquals(ByteBufferUtil.string(sstable.getSSTableMetadata().maxClusteringValues.get(0)),"7col149");
  }
  String key="row2";
  for (int i=101; i < 299; i++) {
    new RowUpdateBuilder(store.metadata,System.currentTimeMillis(),key).clustering(9 + "col" + i).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  store.forceBlockingFlush();
  store.forceMajorCompaction();
  assertEquals(1,store.getLiveSSTables().size());
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    assertEquals(ByteBufferUtil.string(sstable.getSSTableMetadata().minClusteringValues.get(0)),"0col100");
    assertEquals(ByteBufferUtil.string(sstable.getSSTableMetadata().maxClusteringValues.get(0)),"9col298");
  }
}

</code></pre>

<br>
<pre class="type-7 type-13 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * 1. create a row with columns with ttls, 5x100 and 1x1000
 * 2. flush, verify (maxLocalDeletionTime = time+1000)
 * 3. delete column with ttl=1000
 * 4. flush, verify the new sstable (maxLocalDeletionTime = ~now)
 * 5. compact
 * 6. verify resulting sstable has maxLocalDeletionTime = time + 100.
 * @throws ExecutionException
 * @throws InterruptedException
 */
@Test public void testWithDeletes() throws ExecutionException, InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore("Standard2");
  long timestamp=System.currentTimeMillis();
  DecoratedKey key=Util.dk("deletetest");
  for (int i=0; i < 5; i++)   new RowUpdateBuilder(store.metadata,timestamp,100,"deletetest").clustering("deletecolumn" + i).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  new RowUpdateBuilder(store.metadata,timestamp,1000,"deletetest").clustering("todelete").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  store.forceBlockingFlush();
  assertEquals(1,store.getLiveSSTables().size());
  int ttltimestamp=(int)(System.currentTimeMillis() / 1000);
  int firstMaxDelTime=0;
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    firstMaxDelTime=sstable.getSSTableMetadata().maxLocalDeletionTime;
    assertEquals(ttltimestamp + 1000,firstMaxDelTime,10);
  }
  RowUpdateBuilder.deleteRow(store.metadata,timestamp + 1,"deletetest","todelete").applyUnsafe();
  store.forceBlockingFlush();
  assertEquals(2,store.getLiveSSTables().size());
  boolean foundDelete=false;
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    if (sstable.getSSTableMetadata().maxLocalDeletionTime != firstMaxDelTime) {
      assertEquals(sstable.getSSTableMetadata().maxLocalDeletionTime,ttltimestamp,10);
      foundDelete=true;
    }
  }
  assertTrue(foundDelete);
  Util.compact(store,store.getLiveSSTables());
  assertEquals(1,store.getLiveSSTables().size());
  for (  SSTableReader sstable : store.getLiveSSTables()) {
    assertEquals(ttltimestamp + 100,sstable.getSSTableMetadata().maxLocalDeletionTime,10);
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxMinComposites() throws CharacterCodingException, ExecutionException, InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore("StandardComposite2");
  for (int i=0; i < 10; i++) {
    new RowUpdateBuilder(cfs.metadata,0,"k").clustering("a" + (9 - i),getBytes(i)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  cfs.forceBlockingFlush();
  for (int i=0; i < 10; i++) {
    new RowUpdateBuilder(cfs.metadata,0,"k2").clustering("b" + (9 - i),getBytes(i)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  cfs.forceBlockingFlush();
  cfs.forceMajorCompaction();
  assertEquals(cfs.getLiveSSTables().size(),1);
  for (  SSTableReader sstable : cfs.getLiveSSTables()) {
    assertEquals("b9",ByteBufferUtil.string(sstable.getSSTableMetadata().maxClusteringValues.get(0)));
    assertEquals(9,ByteBufferUtil.toInt(sstable.getSSTableMetadata().maxClusteringValues.get(1)));
    assertEquals("a0",ByteBufferUtil.string(sstable.getSSTableMetadata().minClusteringValues.get(0)));
    assertEquals(0,ByteBufferUtil.toInt(sstable.getSSTableMetadata().minClusteringValues.get(1)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.SSTableReaderTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIndexSummaryReplacement() throws IOException, ExecutionException, InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  final ColumnFamilyStore store=keyspace.getColumnFamilyStore("StandardLowIndexInterval");
  CompactionManager.instance.disableAutoCompaction();
  final int NUM_PARTITIONS=512;
  for (int j=0; j < NUM_PARTITIONS; j++) {
    new RowUpdateBuilder(store.metadata,j,String.format("%3d",j)).clustering("0").add("val",String.format("%3d",j)).build().applyUnsafe();
  }
  store.forceBlockingFlush();
  CompactionManager.instance.performMaximal(store,false);
  Collection<SSTableReader> sstables=store.getLiveSSTables();
  assert sstables.size() == 1;
  final SSTableReader sstable=sstables.iterator().next();
  ThreadPoolExecutor executor=new ScheduledThreadPoolExecutor(5);
  List<Future> futures=new ArrayList<>(NUM_PARTITIONS * 2);
  for (int i=0; i < NUM_PARTITIONS; i++) {
    final ByteBuffer key=ByteBufferUtil.bytes(String.format("%3d",i));
    final int index=i;
    futures.add(executor.submit(new Runnable(){
      public void run(){
        Row row=Util.getOnlyRowUnfiltered(Util.cmd(store,key).build());
        assertEquals(0,ByteBufferUtil.compare(String.format("%3d",index).getBytes(),row.cells().iterator().next().value()));
      }
    }
));
    futures.add(executor.submit(new Runnable(){
      public void run(){
        Iterable<DecoratedKey> results=store.keySamples(new Range<>(sstable.getPartitioner().getMinimumToken(),sstable.getPartitioner().getToken(key)));
        assertTrue(results.iterator().hasNext());
      }
    }
));
  }
  SSTableReader replacement;
  try (LifecycleTransaction txn=store.getTracker().tryModify(Arrays.asList(sstable),OperationType.UNKNOWN)){
    replacement=sstable.cloneWithNewSummarySamplingLevel(store,1);
    txn.update(replacement,true);
    txn.finish();
  }
   for (  Future future : futures)   future.get();
  assertEquals(sstable.estimatedKeys(),replacement.estimatedKeys(),1);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadRateTracking(){
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore("Standard1");
  partitioner=store.getPartitioner();
  for (int j=0; j < 10; j++) {
    new RowUpdateBuilder(store.metadata,j,String.valueOf(j)).clustering("0").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  store.forceBlockingFlush();
  SSTableReader sstable=store.getLiveSSTables().iterator().next();
  assertEquals(0,sstable.getReadMeter().count());
  DecoratedKey key=sstable.decorateKey(ByteBufferUtil.bytes("4"));
  Util.getAll(Util.cmd(store,key).build());
  assertEquals(1,sstable.getReadMeter().count());
  Util.getAll(Util.cmd(store,key).includeRow("0").build());
  assertEquals(2,sstable.getReadMeter().count());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testOpeningSSTable() throws Exception {
  String ks=KEYSPACE1;
  String cf="Standard1";
  Keyspace keyspace=Keyspace.open(ks);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore(cf);
  store.clearUnsafe();
  store.disableAutoCompaction();
  DecoratedKey firstKey=null, lastKey=null;
  long timestamp=System.currentTimeMillis();
  for (int i=0; i < store.metadata.params.minIndexInterval; i++) {
    DecoratedKey key=Util.dk(String.valueOf(i));
    if (firstKey == null)     firstKey=key;
    if (lastKey == null)     lastKey=key;
    if (store.metadata.getKeyValidator().compare(lastKey.getKey(),key.getKey()) < 0)     lastKey=key;
    new RowUpdateBuilder(store.metadata,timestamp,key.getKey()).clustering("col").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().applyUnsafe();
  }
  store.forceBlockingFlush();
  SSTableReader sstable=store.getLiveSSTables().iterator().next();
  Descriptor desc=sstable.descriptor;
  SSTableReader target=SSTableReader.open(desc);
  Assert.assertEquals(target.getIndexSummarySize(),1);
  Assert.assertArrayEquals(ByteBufferUtil.getArray(firstKey.getKey()),target.getIndexSummaryKey(0));
  assert target.first.equals(firstKey);
  assert target.last.equals(lastKey);
  target.selfRef().release();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.SSTableRewriterTest </h4><pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * emulates anticompaction - writing from one source sstable to two new sstables
 * @throws IOException
 */
@Test public void testTwoWriters() throws IOException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  Set<SSTableReader> sstables=Sets.newHashSet(s);
  assertEquals(1,sstables.size());
  int nowInSec=FBUtilities.nowInSeconds();
  try (AbstractCompactionStrategy.ScannerList scanners=cfs.getCompactionStrategyManager().getScanners(sstables);LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN);SSTableRewriter writer=new SSTableRewriter(txn,1000,false,false);SSTableRewriter writer2=new SSTableRewriter(txn,1000,false,false);CompactionController controller=new CompactionController(cfs,sstables,cfs.gcBefore(nowInSec));CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,scanners.scanners,controller,nowInSec,UUIDGen.getTimeUUID())){
    writer.switchWriter(getWriter(cfs,sstables.iterator().next().descriptor.directory,txn));
    writer2.switchWriter(getWriter(cfs,sstables.iterator().next().descriptor.directory,txn));
    while (ci.hasNext()) {
      if (writer.currentWriter().getFilePointer() < 15000000)       writer.append(ci.next());
 else       writer2.append(ci.next());
    }
    for (int i=0; i < 5000; i++)     assertFalse(Util.getOnlyPartition(Util.cmd(cfs,ByteBufferUtil.bytes(i)).build()).isEmpty());
  }
   truncateCF();
  validateCFS(cfs);
}

</code></pre>

<br>
<pre class="type-6 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNumberOfFiles_truncate() throws Exception {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  cfs.disableAutoCompaction();
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  Set<SSTableReader> compacting=Sets.newHashSet(s);
  List<SSTableReader> sstables;
  int files=1;
  try (ISSTableScanner scanner=s.getScanner();CompactionController controller=new CompactionController(cfs,compacting,0);LifecycleTransaction txn=cfs.getTracker().tryModify(compacting,OperationType.UNKNOWN);SSTableRewriter rewriter=new SSTableRewriter(txn,1000,false,10000000,false);CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,Collections.singletonList(scanner),controller,FBUtilities.nowInSeconds(),UUIDGen.getTimeUUID())){
    rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
    while (ci.hasNext()) {
      rewriter.append(ci.next());
      if (rewriter.currentWriter().getOnDiskFilePointer() > 25000000) {
        rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
        files++;
        assertEquals(cfs.getLiveSSTables().size(),files);
      }
    }
    sstables=rewriter.finish();
  }
   LifecycleTransaction.waitForDeletions();
  assertFileCounts(s.descriptor.directory.list());
  validateCFS(cfs);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNumberOfFilesAndSizes() throws Exception {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  long startStorageMetricsLoad=StorageMetrics.load.getCount();
  long sBytesOnDisk=s.bytesOnDisk();
  Set<SSTableReader> compacting=Sets.newHashSet(s);
  List<SSTableReader> sstables;
  int files=1;
  try (ISSTableScanner scanner=s.getScanner();CompactionController controller=new CompactionController(cfs,compacting,0);LifecycleTransaction txn=cfs.getTracker().tryModify(compacting,OperationType.UNKNOWN);SSTableRewriter rewriter=new SSTableRewriter(txn,1000,false,10000000,false);CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,Collections.singletonList(scanner),controller,FBUtilities.nowInSeconds(),UUIDGen.getTimeUUID())){
    rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
    while (ci.hasNext()) {
      rewriter.append(ci.next());
      if (rewriter.currentWriter().getOnDiskFilePointer() > 25000000) {
        rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
        files++;
        assertEquals(cfs.getLiveSSTables().size(),files);
        assertEquals(s.bytesOnDisk(),cfs.metric.liveDiskSpaceUsed.getCount());
        assertEquals(s.bytesOnDisk(),cfs.metric.totalDiskSpaceUsed.getCount());
      }
    }
    sstables=rewriter.finish();
  }
   LifecycleTransaction.waitForDeletions();
  long sum=0;
  for (  SSTableReader x : cfs.getLiveSSTables())   sum+=x.bytesOnDisk();
  assertEquals(sum,cfs.metric.liveDiskSpaceUsed.getCount());
  assertEquals(startStorageMetricsLoad - sBytesOnDisk + sum,StorageMetrics.load.getCount());
  assertEquals(files,sstables.size());
  assertEquals(files,cfs.getLiveSSTables().size());
  LifecycleTransaction.waitForDeletions();
  assertEquals(sum,cfs.metric.totalDiskSpaceUsed.getCount());
  assertFileCounts(s.descriptor.directory.list());
  validateCFS(cfs);
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllKeysReadable() throws Exception {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  for (int i=0; i < 100; i++) {
    String key=Integer.toString(i);
    for (int j=0; j < 10; j++)     new RowUpdateBuilder(cfs.metadata,100,key).clustering(Integer.toString(j)).add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().apply();
  }
  cfs.forceBlockingFlush();
  cfs.forceMajorCompaction();
  validateKeys(keyspace);
  assertEquals(1,cfs.getLiveSSTables().size());
  SSTableReader s=cfs.getLiveSSTables().iterator().next();
  Set<SSTableReader> compacting=new HashSet<>();
  compacting.add(s);
  int keyCount=0;
  try (ISSTableScanner scanner=compacting.iterator().next().getScanner();CompactionController controller=new CompactionController(cfs,compacting,0);LifecycleTransaction txn=cfs.getTracker().tryModify(compacting,OperationType.UNKNOWN);SSTableRewriter rewriter=new SSTableRewriter(txn,1000,false,1,false);CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,Collections.singletonList(scanner),controller,FBUtilities.nowInSeconds(),UUIDGen.getTimeUUID())){
    rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
    while (ci.hasNext()) {
      rewriter.append(ci.next());
      if (keyCount % 10 == 0) {
        rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
      }
      keyCount++;
      validateKeys(keyspace);
    }
    rewriter.finish();
  }
   validateKeys(keyspace);
  LifecycleTransaction.waitForDeletions();
  validateCFS(cfs);
  truncate(cfs);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void basicTest() throws InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  for (int j=0; j < 100; j++) {
    new RowUpdateBuilder(cfs.metadata,j,String.valueOf(j)).clustering("0").add("val",ByteBufferUtil.EMPTY_BYTE_BUFFER).build().apply();
  }
  cfs.forceBlockingFlush();
  Set<SSTableReader> sstables=new HashSet<>(cfs.getLiveSSTables());
  assertEquals(1,sstables.size());
  assertEquals(sstables.iterator().next().bytesOnDisk(),cfs.metric.liveDiskSpaceUsed.getCount());
  int nowInSec=FBUtilities.nowInSeconds();
  try (AbstractCompactionStrategy.ScannerList scanners=cfs.getCompactionStrategyManager().getScanners(sstables);LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN);SSTableRewriter writer=new SSTableRewriter(txn,1000,false);CompactionController controller=new CompactionController(cfs,sstables,cfs.gcBefore(nowInSec));CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,scanners.scanners,controller,nowInSec,UUIDGen.getTimeUUID())){
    writer.switchWriter(getWriter(cfs,sstables.iterator().next().descriptor.directory,txn));
    while (ci.hasNext()) {
      writer.append(ci.next());
    }
    writer.finish();
  }
   LifecycleTransaction.waitForDeletions();
  validateCFS(cfs);
  int filecounts=assertFileCounts(sstables.iterator().next().descriptor.directory.list());
  assertEquals(1,filecounts);
  truncate(cfs);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void basicTest2() throws InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  Set<SSTableReader> sstables=new HashSet<>(cfs.getLiveSSTables());
  assertEquals(1,sstables.size());
  int nowInSec=FBUtilities.nowInSeconds();
  try (AbstractCompactionStrategy.ScannerList scanners=cfs.getCompactionStrategyManager().getScanners(sstables);LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN);SSTableRewriter writer=new SSTableRewriter(txn,1000,false,10000000,false);CompactionController controller=new CompactionController(cfs,sstables,cfs.gcBefore(nowInSec));CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,scanners.scanners,controller,nowInSec,UUIDGen.getTimeUUID())){
    writer.switchWriter(getWriter(cfs,sstables.iterator().next().descriptor.directory,txn));
    while (ci.hasNext()) {
      writer.append(ci.next());
    }
    writer.finish();
  }
   LifecycleTransaction.waitForDeletions();
  validateCFS(cfs);
  int filecounts=assertFileCounts(sstables.iterator().next().descriptor.directory.list());
  assertEquals(1,filecounts);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPositionsTest() throws InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  Set<SSTableReader> sstables=new HashSet<>(cfs.getLiveSSTables());
  assertEquals(1,sstables.size());
  int nowInSec=FBUtilities.nowInSeconds();
  boolean checked=false;
  try (AbstractCompactionStrategy.ScannerList scanners=cfs.getCompactionStrategyManager().getScanners(sstables);LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN);SSTableRewriter writer=new SSTableRewriter(txn,1000,false,10000000,false);CompactionController controller=new CompactionController(cfs,sstables,cfs.gcBefore(nowInSec));CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,scanners.scanners,controller,nowInSec,UUIDGen.getTimeUUID())){
    writer.switchWriter(getWriter(cfs,sstables.iterator().next().descriptor.directory,txn));
    while (ci.hasNext()) {
      UnfilteredRowIterator row=ci.next();
      writer.append(row);
      if (!checked && writer.currentWriter().getFilePointer() > 1500000) {
        checked=true;
        for (        SSTableReader sstable : cfs.getLiveSSTables()) {
          if (sstable.openReason == SSTableReader.OpenReason.EARLY) {
            SSTableReader c=txn.current(sstables.iterator().next());
            Collection<Range<Token>> r=Arrays.asList(new Range<>(cfs.getPartitioner().getMinimumToken(),cfs.getPartitioner().getMinimumToken()));
            List<Pair<Long,Long>> tmplinkPositions=sstable.getPositionsForRanges(r);
            List<Pair<Long,Long>> compactingPositions=c.getPositionsForRanges(r);
            assertEquals(1,tmplinkPositions.size());
            assertEquals(1,compactingPositions.size());
            assertEquals(0,tmplinkPositions.get(0).left.longValue());
            assertEquals(tmplinkPositions.get(0).right.longValue(),compactingPositions.get(0).left.longValue());
            assertEquals(c.uncompressedLength(),compactingPositions.get(0).right.longValue());
          }
        }
      }
    }
    assertTrue(checked);
    writer.finish();
  }
   LifecycleTransaction.waitForDeletions();
  validateCFS(cfs);
  int filecounts=assertFileCounts(sstables.iterator().next().descriptor.directory.list());
  assertEquals(1,filecounts);
  truncate(cfs);
}

</code></pre>

<br>
<pre class="type-6 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNumberOfFiles_finish_empty_new_writer() throws Exception {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  Set<SSTableReader> compacting=Sets.newHashSet(s);
  int files=1;
  try (ISSTableScanner scanner=s.getScanner();CompactionController controller=new CompactionController(cfs,compacting,0);LifecycleTransaction txn=cfs.getTracker().tryModify(compacting,OperationType.UNKNOWN);SSTableRewriter rewriter=new SSTableRewriter(txn,1000,false,10000000,false);CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,Collections.singletonList(scanner),controller,FBUtilities.nowInSeconds(),UUIDGen.getTimeUUID())){
    rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
    while (ci.hasNext()) {
      rewriter.append(ci.next());
      if (rewriter.currentWriter().getFilePointer() > 2500000) {
        rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
        files++;
        assertEquals(cfs.getLiveSSTables().size(),files);
      }
      if (files == 3) {
        rewriter.finish();
        break;
      }
    }
  }
   LifecycleTransaction.waitForDeletions();
  assertEquals(files - 1,cfs.getLiveSSTables().size());
  assertFileCounts(s.descriptor.directory.list());
  validateCFS(cfs);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNumberOfFiles_dont_clean_readers() throws Exception {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  Set<SSTableReader> compacting=Sets.newHashSet(s);
  List<SSTableReader> sstables;
  int files=1;
  try (ISSTableScanner scanner=s.getScanner();CompactionController controller=new CompactionController(cfs,compacting,0);LifecycleTransaction txn=cfs.getTracker().tryModify(compacting,OperationType.UNKNOWN);SSTableRewriter rewriter=new SSTableRewriter(txn,1000,false,10000000,false);CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,Collections.singletonList(scanner),controller,FBUtilities.nowInSeconds(),UUIDGen.getTimeUUID())){
    rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
    while (ci.hasNext()) {
      rewriter.append(ci.next());
      if (rewriter.currentWriter().getOnDiskFilePointer() > 25000000) {
        rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
        files++;
        assertEquals(cfs.getLiveSSTables().size(),files);
      }
    }
    sstables=rewriter.finish();
  }
   assertEquals(files,sstables.size());
  assertEquals(files,cfs.getLiveSSTables().size());
  LifecycleTransaction.waitForDeletions();
  assertFileCounts(s.descriptor.directory.list());
  validateCFS(cfs);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanonicalView() throws Exception {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  SSTableReader s=writeFile(cfs,1000);
  cfs.addSSTable(s);
  Set<SSTableReader> sstables=Sets.newHashSet(s);
  assertEquals(1,sstables.size());
  boolean checked=false;
  try (ISSTableScanner scanner=sstables.iterator().next().getScanner();CompactionController controller=new CompactionController(cfs,sstables,0);LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN);SSTableRewriter writer=new SSTableRewriter(txn,1000,false,10000000,false);CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,Collections.singletonList(scanner),controller,FBUtilities.nowInSeconds(),UUIDGen.getTimeUUID())){
    writer.switchWriter(getWriter(cfs,sstables.iterator().next().descriptor.directory,txn));
    while (ci.hasNext()) {
      writer.append(ci.next());
      if (!checked && writer.currentWriter().getFilePointer() > 15000000) {
        checked=true;
        ColumnFamilyStore.ViewFragment viewFragment=cfs.select(View.select(SSTableSet.CANONICAL));
        assertEquals(1,viewFragment.sstables.size());
        SSTableReader sstable=viewFragment.sstables.get(0);
        assertEquals(s.descriptor,sstable.descriptor);
        assertTrue("Found early opened SSTable in canonical view: " + sstable.getFilename(),sstable.openReason != SSTableReader.OpenReason.EARLY);
      }
    }
  }
   truncateCF();
  validateCFS(cfs);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSmallFiles() throws Exception {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  cfs.disableAutoCompaction();
  SSTableReader s=writeFile(cfs,400);
  cfs.addSSTable(s);
  Set<SSTableReader> compacting=Sets.newHashSet(s);
  List<SSTableReader> sstables;
  int files=1;
  try (ISSTableScanner scanner=s.getScanner();CompactionController controller=new CompactionController(cfs,compacting,0);LifecycleTransaction txn=cfs.getTracker().tryModify(compacting,OperationType.UNKNOWN);SSTableRewriter rewriter=new SSTableRewriter(txn,1000,false,1000000,false);CompactionIterator ci=new CompactionIterator(OperationType.COMPACTION,Collections.singletonList(scanner),controller,FBUtilities.nowInSeconds(),UUIDGen.getTimeUUID())){
    rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
    while (ci.hasNext()) {
      rewriter.append(ci.next());
      if (rewriter.currentWriter().getOnDiskFilePointer() > 2500000) {
        assertEquals(files,cfs.getLiveSSTables().size());
        rewriter.switchWriter(getWriter(cfs,s.descriptor.directory,txn));
        files++;
      }
    }
    sstables=rewriter.finish();
  }
   assertEquals(files,sstables.size());
  assertEquals(files,cfs.getLiveSSTables().size());
  LifecycleTransaction.waitForDeletions();
  assertFileCounts(s.descriptor.directory.list());
  validateCFS(cfs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.SSTableScannerTest </h4><pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleDataRange() throws IOException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore(TABLE);
  store.clearUnsafe();
  store.disableAutoCompaction();
  for (int i=2; i < 10; i++)   insertRowWithKey(store.metadata,i);
  store.forceBlockingFlush();
  assertEquals(1,store.getLiveSSTables().size());
  SSTableReader sstable=store.getLiveSSTables().iterator().next();
  ISSTableScanner scanner=sstable.getScanner(null);
  for (int i=2; i < 10; i++)   assertEquals(toKey(i),new String(scanner.next().partitionKey().getKey().array()));
  scanner.close();
  assertScanMatches(sstable,3,6,3,6);
  assertScanMatches(sstable,1,9,2,9);
  assertScanMatches(sstable,2,9,2,9);
  assertScanMatches(sstable,3,9,3,9);
  assertScanMatches(sstable,1,8,2,8);
  assertScanMatches(sstable,1,9,2,9);
  assertScanMatches(sstable,1,9,2,9);
  assertScanMatches(sstable,2,2,2,2);
  assertScanMatches(sstable,5,5,5,5);
  assertScanMatches(sstable,9,9,9,9);
  assertScanEmpty(sstable,0,1);
  assertScanEmpty(sstable,10,11);
  assertScanMatches(sstable,5,3,2,3,5,9);
  assertScanMatches(sstable,5,2,2,2,5,9);
  assertScanMatches(sstable,5,1,5,9);
  assertScanMatches(sstable,5,Integer.MIN_VALUE,5,9);
  assertScanMatches(sstable,9,8,2,8,9,9);
  assertScanMatches(sstable,9,3,2,3,9,9);
  assertScanMatches(sstable,9,2,2,2,9,9);
  assertScanMatches(sstable,9,1,9,9);
  assertScanMatches(sstable,9,Integer.MIN_VALUE,9,9);
  assertScanMatches(sstable,8,3,2,3,8,9);
  assertScanMatches(sstable,8,2,2,2,8,9);
  assertScanMatches(sstable,8,1,8,9);
  assertScanMatches(sstable,8,Integer.MIN_VALUE,8,9);
  assertScanMatches(sstable,10,9,2,9);
  assertScanMatches(sstable,10,5,2,5);
  assertScanMatches(sstable,10,2,2,2);
  assertScanEmpty(sstable,10,1);
  assertScanEmpty(sstable,10,Integer.MIN_VALUE);
  assertScanMatches(sstable,11,10,2,9);
  assertScanMatches(sstable,11,9,2,9);
  assertScanMatches(sstable,11,5,2,5);
  assertScanMatches(sstable,11,2,2,2);
  assertScanEmpty(sstable,11,1);
  assertScanEmpty(sstable,11,Integer.MIN_VALUE);
  assertScanMatches(sstable,3,1,3,9);
  assertScanMatches(sstable,3,Integer.MIN_VALUE,3,9);
  assertScanMatches(sstable,2,1,2,9);
  assertScanMatches(sstable,2,Integer.MIN_VALUE,2,9);
  assertScanMatches(sstable,1,0,2,9);
  assertScanMatches(sstable,1,Integer.MIN_VALUE,2,9);
  assertScanMatches(sstable,1,-1,2,9);
  assertScanMatches(sstable,1,Integer.MIN_VALUE,2,9);
  assertScanMatches(sstable,1,0,2,9);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleKeyMultipleRanges() throws IOException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore(TABLE);
  store.clearUnsafe();
  store.disableAutoCompaction();
  insertRowWithKey(store.metadata,205);
  store.forceBlockingFlush();
  assertEquals(1,store.getLiveSSTables().size());
  SSTableReader sstable=store.getLiveSSTables().iterator().next();
  ISSTableScanner fullScanner=sstable.getScanner(null);
  assertScanContainsRanges(fullScanner,205,205);
  ISSTableScanner scanner=sstable.getScanner(makeRanges(101,109,201,209),null);
  assertScanContainsRanges(scanner,205,205);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleRanges() throws IOException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore store=keyspace.getColumnFamilyStore(TABLE);
  store.clearUnsafe();
  store.disableAutoCompaction();
  for (int i=0; i < 3; i++)   for (int j=2; j < 10; j++)   insertRowWithKey(store.metadata,i * 100 + j);
  store.forceBlockingFlush();
  assertEquals(1,store.getLiveSSTables().size());
  SSTableReader sstable=store.getLiveSSTables().iterator().next();
  ISSTableScanner fullScanner=sstable.getScanner(null);
  assertScanContainsRanges(fullScanner,2,9,102,109,202,209);
  ISSTableScanner scanner=sstable.getScanner(makeRanges(1,9,101,109,201,209),null);
  assertScanContainsRanges(scanner,2,9,102,109,202,209);
  scanner=sstable.getScanner(makeRanges(101,109,201,209),null);
  assertScanContainsRanges(scanner,102,109,202,209);
  scanner=sstable.getScanner(makeRanges(1,9,201,209),null);
  assertScanContainsRanges(scanner,2,9,202,209);
  scanner=sstable.getScanner(makeRanges(1,9,101,109),null);
  assertScanContainsRanges(scanner,2,9,102,109);
  scanner=sstable.getScanner(makeRanges(1,5,101,109,201,209),null);
  assertScanContainsRanges(scanner,2,5,102,109,202,209);
  scanner=sstable.getScanner(makeRanges(1,20,101,109,201,209),null);
  assertScanContainsRanges(scanner,2,9,102,109,202,209);
  scanner=sstable.getScanner(makeRanges(1,5,6,205,206,209),null);
  assertScanContainsRanges(scanner,2,5,7,9,102,109,202,205,207,209);
  scanner=sstable.getScanner(makeRanges(0,1,2,20,101,109,150,159,201,209,1000,1001),null);
  assertScanContainsRanges(scanner,3,9,102,109,202,209);
  scanner=sstable.getScanner(makeRanges(201,209,1,20,201,209,101,109,1000,1001,150,159),null);
  assertScanContainsRanges(scanner,2,9,102,109,202,209);
  scanner=sstable.getScanner(makeRanges(0,1,150,159,250,259),null);
  assertFalse(scanner.hasNext());
  scanner=sstable.getScanner(new ArrayList<Range<Token>>(),null);
  assertFalse(scanner.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.SSTableWriterTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAbortTxnWithClosedWriterShouldRemoveSSTable() throws InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  File dir=cfs.getDirectories().getDirectoryForNewSSTables();
  LifecycleTransaction txn=LifecycleTransaction.offline(OperationType.STREAM);
  try (SSTableWriter writer=getWriter(cfs,dir,txn)){
    for (int i=0; i < 10000; i++) {
      UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,random(i,10)).withTimestamp(1);
      for (int j=0; j < 100; j++)       builder.newRow("" + j).add("val",ByteBuffer.allocate(1000));
      writer.append(builder.build().unfilteredIterator());
    }
    assertFileCounts(dir.list());
    for (int i=10000; i < 20000; i++) {
      UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,random(i,10)).withTimestamp(1);
      for (int j=0; j < 100; j++)       builder.newRow("" + j).add("val",ByteBuffer.allocate(1000));
      writer.append(builder.build().unfilteredIterator());
    }
    SSTableReader sstable=writer.finish(true);
    int datafiles=assertFileCounts(dir.list());
    assertEquals(datafiles,1);
    sstable.selfRef().release();
    if (!FBUtilities.isWindows()) {
      LifecycleTransaction.waitForDeletions();
      assertFileCounts(dir.list());
    }
    txn.abort();
    LifecycleTransaction.waitForDeletions();
    datafiles=assertFileCounts(dir.list());
    assertEquals(datafiles,0);
    validateCFS(cfs);
  }
 }

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbortTxnWithOpenEarlyShouldRemoveSSTable() throws InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  File dir=cfs.getDirectories().getDirectoryForNewSSTables();
  LifecycleTransaction txn=LifecycleTransaction.offline(OperationType.WRITE);
  try (SSTableWriter writer=getWriter(cfs,dir,txn)){
    for (int i=0; i < 10000; i++) {
      UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,random(i,10)).withTimestamp(1);
      for (int j=0; j < 100; j++)       builder.newRow("" + j).add("val",ByteBuffer.allocate(1000));
      writer.append(builder.build().unfilteredIterator());
    }
    SSTableReader s=writer.setMaxDataAge(1000).openEarly();
    assert s != null;
    assertFileCounts(dir.list());
    for (int i=10000; i < 20000; i++) {
      UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,random(i,10)).withTimestamp(1);
      for (int j=0; j < 100; j++)       builder.newRow("" + j).add("val",ByteBuffer.allocate(1000));
      writer.append(builder.build().unfilteredIterator());
    }
    SSTableReader s2=writer.setMaxDataAge(1000).openEarly();
    assertTrue(s.last.compareTo(s2.last) < 0);
    assertFileCounts(dir.list());
    s.selfRef().release();
    s2.selfRef().release();
    int datafiles=assertFileCounts(dir.list());
    assertEquals(datafiles,1);
    if (!FBUtilities.isWindows()) {
      LifecycleTransaction.waitForDeletions();
      assertFileCounts(dir.list());
    }
    writer.abort();
    txn.abort();
    LifecycleTransaction.waitForDeletions();
    datafiles=assertFileCounts(dir.list());
    assertEquals(datafiles,0);
    validateCFS(cfs);
  }
 }

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAbortTxnWithClosedAndOpenWriterShouldRemoveAllSSTables() throws InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF);
  truncate(cfs);
  File dir=cfs.getDirectories().getDirectoryForNewSSTables();
  LifecycleTransaction txn=LifecycleTransaction.offline(OperationType.STREAM);
  SSTableWriter writer1=getWriter(cfs,dir,txn);
  SSTableWriter writer2=getWriter(cfs,dir,txn);
  try {
    for (int i=0; i < 10000; i++) {
      UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,random(i,10)).withTimestamp(1);
      for (int j=0; j < 100; j++)       builder.newRow("" + j).add("val",ByteBuffer.allocate(1000));
      writer1.append(builder.build().unfilteredIterator());
    }
    assertFileCounts(dir.list());
    for (int i=10000; i < 20000; i++) {
      UpdateBuilder builder=UpdateBuilder.create(cfs.metadata,random(i,10)).withTimestamp(1);
      for (int j=0; j < 100; j++)       builder.newRow("" + j).add("val",ByteBuffer.allocate(1000));
      writer2.append(builder.build().unfilteredIterator());
    }
    SSTableReader sstable=writer1.finish(true);
    txn.update(sstable,false);
    assertFileCounts(dir.list());
    int datafiles=assertFileCounts(dir.list());
    assertEquals(datafiles,2);
    if (!FBUtilities.isWindows()) {
      LifecycleTransaction.waitForDeletions();
      assertFileCounts(dir.list());
    }
    txn.abort();
    LifecycleTransaction.waitForDeletions();
    datafiles=assertFileCounts(dir.list());
    assertEquals(datafiles,0);
    validateCFS(cfs);
  }
  finally {
    writer1.close();
    writer2.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.format.SSTableFlushObserverTest </h4><pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlushObserver(){
  CFMetaData cfm=CFMetaData.Builder.create(KS_NAME,CF_NAME).addPartitionKey("id",UTF8Type.instance).addRegularColumn("first_name",UTF8Type.instance).addRegularColumn("age",Int32Type.instance).addRegularColumn("height",LongType.instance).build();
  LifecycleTransaction transaction=LifecycleTransaction.offline(OperationType.COMPACTION);
  FlushObserver observer=new FlushObserver();
  String sstableDirectory=DatabaseDescriptor.getAllDataFileLocations()[0];
  File directory=new File(sstableDirectory + File.pathSeparator + KS_NAME+ File.pathSeparator+ CF_NAME);
  directory.deleteOnExit();
  if (!directory.exists() && !directory.mkdirs())   throw new FSWriteError(new IOException("failed to create tmp directory"),directory.getAbsolutePath());
  SSTableFormat.Type sstableFormat=DatabaseDescriptor.getSSTableFormat();
  BigTableWriter writer=new BigTableWriter(new Descriptor(sstableFormat.info.getLatestVersion().version,directory,KS_NAME,CF_NAME,0,sstableFormat),10L,0L,cfm,new MetadataCollector(cfm.comparator).sstableLevel(0),new SerializationHeader(true,cfm,cfm.partitionColumns(),EncodingStats.NO_STATS),Collections.singletonList(observer),transaction);
  SSTableReader reader=null;
  Multimap<ByteBuffer,Cell> expected=ArrayListMultimap.create();
  try {
    final long now=System.currentTimeMillis();
    ByteBuffer key=UTF8Type.instance.fromString("key1");
    expected.putAll(key,Arrays.asList(BufferCell.live(cfm,getColumn(cfm,"first_name"),now,UTF8Type.instance.fromString("jack")),BufferCell.live(cfm,getColumn(cfm,"age"),now,Int32Type.instance.decompose(27)),BufferCell.live(cfm,getColumn(cfm,"height"),now,LongType.instance.decompose(183L))));
    writer.append(new RowIterator(cfm,key.duplicate(),Collections.singletonList(buildRow(expected.get(key)))));
    key=UTF8Type.instance.fromString("key2");
    expected.putAll(key,Arrays.asList(BufferCell.live(cfm,getColumn(cfm,"first_name"),now,UTF8Type.instance.fromString("jim")),BufferCell.live(cfm,getColumn(cfm,"age"),now,Int32Type.instance.decompose(30)),BufferCell.live(cfm,getColumn(cfm,"height"),now,LongType.instance.decompose(180L))));
    writer.append(new RowIterator(cfm,key,Collections.singletonList(buildRow(expected.get(key)))));
    key=UTF8Type.instance.fromString("key3");
    expected.putAll(key,Arrays.asList(BufferCell.live(cfm,getColumn(cfm,"first_name"),now,UTF8Type.instance.fromString("ken")),BufferCell.live(cfm,getColumn(cfm,"age"),now,Int32Type.instance.decompose(30)),BufferCell.live(cfm,getColumn(cfm,"height"),now,LongType.instance.decompose(178L))));
    writer.append(new RowIterator(cfm,key,Collections.singletonList(buildRow(expected.get(key)))));
    reader=writer.finish(true);
  }
  finally {
    FileUtils.closeQuietly(writer);
  }
  Assert.assertTrue(observer.isComplete);
  Assert.assertEquals(expected.size(),observer.rows.size());
  for (  Pair<ByteBuffer,Long> e : observer.rows.keySet()) {
    ByteBuffer key=e.left;
    Long indexPosition=e.right;
    try (FileDataInput index=reader.ifile.createReader(indexPosition)){
      ByteBuffer indexKey=ByteBufferUtil.readWithShortLength(index);
      Assert.assertEquals(0,UTF8Type.instance.compare(key,indexKey));
    }
 catch (    IOException ex) {
      throw new FSReadError(ex,reader.getIndexFilename());
    }
    Assert.assertEquals(expected.get(key),observer.rows.get(e));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.metadata.MetadataSerializerTest </h4><pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testSerialization() throws IOException {
  CFMetaData cfm=SchemaLoader.standardCFMD("ks1","cf1");
  ReplayPosition rp=new ReplayPosition(11L,12);
  MetadataCollector collector=new MetadataCollector(cfm.comparator).replayPosition(rp);
  String partitioner=RandomPartitioner.class.getCanonicalName();
  double bfFpChance=0.1;
  Map<MetadataType,MetadataComponent> originalMetadata=collector.finalizeMetadata(partitioner,bfFpChance,0,SerializationHeader.make(cfm,Collections.EMPTY_LIST));
  MetadataSerializer serializer=new MetadataSerializer();
  File statsFile=File.createTempFile(Component.STATS.name,null);
  try (DataOutputStreamPlus out=new BufferedDataOutputStreamPlus(new FileOutputStream(statsFile))){
    serializer.serialize(originalMetadata,out,BigFormat.latestVersion);
  }
   Descriptor desc=new Descriptor(statsFile.getParentFile(),"","",0);
  try (RandomAccessReader in=RandomAccessReader.open(statsFile)){
    Map<MetadataType,MetadataComponent> deserialized=serializer.deserialize(desc,in,EnumSet.allOf(MetadataType.class));
    for (    MetadataType type : MetadataType.values()) {
      assertEquals(originalMetadata.get(type),deserialized.get(type));
    }
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.BufferedDataOutputStreamTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWriteSlowByteOrder() throws Exception {
  try (DataOutputBuffer dob=new DataOutputBuffer(4)){
    dob.order(ByteOrder.LITTLE_ENDIAN);
    dob.writeLong(42);
    assertEquals(42,ByteBuffer.wrap(dob.toByteArray()).order(ByteOrder.LITTLE_ENDIAN).getLong());
  }
 }

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWriteExcessSlow() throws Exception {
  try (DataOutputBuffer dob=new DataOutputBuffer(4)){
    dob.strictFlushing=true;
    ByteBuffer buf=ByteBuffer.allocateDirect(8);
    buf.putLong(0,42);
    dob.write(buf);
    assertEquals(42,ByteBuffer.wrap(dob.toByteArray()).getLong());
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.BufferedRandomAccessFileTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetFilePointer() throws IOException {
  final SequentialWriter w=createTempFile("brafGetFilePointer");
  assertEquals(w.position(),0);
  w.write(generateByteArray(20));
  assertEquals(w.position(),20);
  w.sync();
  ChannelProxy channel=new ChannelProxy(w.getPath());
  RandomAccessReader r=RandomAccessReader.open(channel);
  r.seek(0);
  r.skipBytes(15);
  assertEquals(r.getFilePointer(),15);
  r.read();
  assertEquals(r.getFilePointer(),16);
  r.read(new byte[4]);
  assertEquals(r.getFilePointer(),20);
  w.finish();
  r.close();
  channel.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadAndWrite() throws Exception {
  SequentialWriter w=createTempFile("braf");
  ChannelProxy channel=new ChannelProxy(w.getPath());
  byte[] data="Hello".getBytes();
  w.write(data);
  assertEquals(data.length,w.length());
  assertEquals(data.length,w.position());
  w.sync();
  RandomAccessReader r=RandomAccessReader.open(channel);
  byte[] buffer=new byte[data.length];
  assertEquals(data.length,r.read(buffer));
  assertTrue(Arrays.equals(buffer,data));
  assertEquals(r.read(),-1);
  assert r.bytesRemaining() == 0 && r.isEOF();
  r.close();
  byte[] bigData=new byte[RandomAccessReader.DEFAULT_BUFFER_SIZE + 10];
  for (int i=0; i < bigData.length; i++)   bigData[i]='d';
  long initialPosition=w.position();
  w.write(bigData);
  assertEquals(w.position(),initialPosition + bigData.length);
  assertEquals(w.length(),initialPosition + bigData.length);
  w.sync();
  r=RandomAccessReader.open(channel);
  r.seek(initialPosition);
  data=new byte[bigData.length];
  long sizeRead=0;
  for (int i=0; i < data.length; i++) {
    data[i]=(byte)r.read();
    sizeRead++;
  }
  assertEquals(sizeRead,data.length);
  assertEquals(r.getFilePointer(),initialPosition + data.length);
  assertEquals(r.length(),initialPosition + bigData.length);
  assertTrue(Arrays.equals(bigData,data));
  assertTrue(r.bytesRemaining() == 0 && r.isEOF());
  r.seek(0);
  ByteBuffer fileContent=ByteBufferUtil.read(r,(int)w.length());
  assertEquals(fileContent.limit(),w.length());
  assert ByteBufferUtil.string(fileContent).equals("Hello" + new String(bigData));
  data=new byte[bigData.length];
  r.seek(initialPosition);
  r.readFully(data);
  assert r.bytesRemaining() == 0 && r.isEOF();
  assertTrue(Arrays.equals(bigData,data));
  data=new byte[10];
  assertEquals(r.read(),-1);
  assertEquals(r.read(data),-1);
  assertEquals(r.read(data,0,data.length),-1);
  r.seek(0);
  data=new byte[20];
  assertEquals(15,r.read(data,0,15));
  assertTrue(new String(data).contains("Hellodddddddddd"));
  for (int i=16; i < data.length; i++) {
    assert data[i] == 0;
  }
  w.finish();
  r.close();
  channel.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMarkAndReset() throws IOException {
  SequentialWriter w=createTempFile("brafTestMark");
  w.write(new byte[30]);
  w.finish();
  ChannelProxy channel=new ChannelProxy(w.getPath());
  RandomAccessReader file=RandomAccessReader.open(channel);
  file.seek(10);
  FileMark mark=file.mark();
  file.seek(file.length());
  assertTrue(file.isEOF());
  file.reset();
  assertEquals(file.bytesRemaining(),20);
  file.seek(file.length());
  assertTrue(file.isEOF());
  file.reset(mark);
  assertEquals(file.bytesRemaining(),20);
  file.seek(file.length());
  assertEquals(file.bytesPastMark(),20);
  assertEquals(file.bytesPastMark(mark),20);
  file.reset(mark);
  assertEquals(file.bytesPastMark(),0);
  file.close();
  channel.close();
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBytesRemaining() throws IOException {
  SequentialWriter w=createTempFile("brafBytesRemaining");
  int toWrite=RandomAccessReader.DEFAULT_BUFFER_SIZE + 10;
  w.write(generateByteArray(toWrite));
  w.sync();
  ChannelProxy channel=new ChannelProxy(w.getPath());
  RandomAccessReader r=RandomAccessReader.open(channel);
  assertEquals(r.bytesRemaining(),toWrite);
  for (int i=1; i <= r.length(); i++) {
    r.read();
    assertEquals(r.bytesRemaining(),r.length() - i);
  }
  r.seek(0);
  r.skipBytes(10);
  assertEquals(r.bytesRemaining(),r.length() - 10);
  w.finish();
  r.close();
  channel.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSkipBytes() throws IOException {
  SequentialWriter w=createTempFile("brafSkipBytes");
  w.write(generateByteArray(RandomAccessReader.DEFAULT_BUFFER_SIZE * 2));
  w.finish();
  ChannelProxy channel=new ChannelProxy(w.getPath());
  RandomAccessReader file=RandomAccessReader.open(channel);
  file.seek(0);
  assertEquals(file.skipBytes(10),10);
  assertEquals(file.bytesRemaining(),file.length() - 10);
  int initialPosition=(int)file.getFilePointer();
  assertEquals(file.skipBytes((int)file.length() + 10),file.length() - initialPosition);
  assertEquals(file.getFilePointer(),file.length());
  assert file.bytesRemaining() == 0 && file.isEOF();
  file.seek(0);
  assertEquals(file.skipBytes(-1000),0);
  assertEquals(file.getFilePointer(),0);
  assertEquals(file.bytesRemaining(),file.length());
  file.close();
  channel.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLength() throws IOException {
  File tmpFile=File.createTempFile("lengthtest","bin");
  SequentialWriter w=SequentialWriter.open(tmpFile);
  assertEquals(0,w.length());
  byte[] lessThenBuffer=generateByteArray(RandomAccessReader.DEFAULT_BUFFER_SIZE / 2);
  w.write(lessThenBuffer);
  assertEquals(lessThenBuffer.length,w.length());
  w.sync();
  assertEquals(lessThenBuffer.length,w.length());
  byte[] biggerThenBuffer=generateByteArray(RandomAccessReader.DEFAULT_BUFFER_SIZE * 2);
  w.write(biggerThenBuffer);
  assertEquals(biggerThenBuffer.length + lessThenBuffer.length,w.length());
  w.finish();
  try (ChannelProxy channel=new ChannelProxy(tmpFile);RandomAccessReader r=RandomAccessReader.open(channel)){
    assertEquals(lessThenBuffer.length + biggerThenBuffer.length,r.length());
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.ChecksummedRandomAccessReaderTest </h4><pre class="type-4 type-5 type-2 type-16 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ChecksummedRandomAccessReader.CorruptFileException.class) public void corruptionDetection() throws IOException {
  final File data=File.createTempFile("corruptionDetection","data");
  final File crc=File.createTempFile("corruptionDetection","crc");
  final byte[] expected=new byte[5 * 1024];
  Arrays.fill(expected,(byte)0);
  SequentialWriter writer=ChecksummedSequentialWriter.open(data,crc);
  writer.write(expected);
  writer.finish();
  assert data.exists();
  try (RandomAccessFile dataFile=new RandomAccessFile(data,"rw")){
    dataFile.seek(1024);
    dataFile.write((byte)5);
  }
   RandomAccessReader reader=new ChecksummedRandomAccessReader.Builder(data,crc).build();
  byte[] b=new byte[expected.length];
  reader.readFully(b);
  assertArrayEquals(expected,b);
  assertTrue(reader.isEOF());
  reader.close();
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readFully() throws IOException {
  final File data=File.createTempFile("testReadFully","data");
  final File crc=File.createTempFile("testReadFully","crc");
  final byte[] expected=new byte[70 * 1024];
  ThreadLocalRandom.current().nextBytes(expected);
  SequentialWriter writer=ChecksummedSequentialWriter.open(data,crc);
  writer.write(expected);
  writer.finish();
  assert data.exists();
  RandomAccessReader reader=new ChecksummedRandomAccessReader.Builder(data,crc).build();
  byte[] b=new byte[expected.length];
  reader.readFully(b);
  assertArrayEquals(expected,b);
  assertTrue(reader.isEOF());
  reader.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void seek() throws IOException {
  final File data=File.createTempFile("testSeek","data");
  final File crc=File.createTempFile("testSeek","crc");
  final byte[] dataBytes=new byte[70 * 1024];
  ThreadLocalRandom.current().nextBytes(dataBytes);
  SequentialWriter writer=ChecksummedSequentialWriter.open(data,crc);
  writer.write(dataBytes);
  writer.finish();
  assert data.exists();
  RandomAccessReader reader=new ChecksummedRandomAccessReader.Builder(data,crc).build();
  final int seekPosition=66000;
  reader.seek(seekPosition);
  byte[] b=new byte[dataBytes.length - seekPosition];
  reader.readFully(b);
  byte[] expected=Arrays.copyOfRange(dataBytes,seekPosition,dataBytes.length);
  assertArrayEquals(expected,b);
  assertTrue(reader.isEOF());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.DataOutputTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDataOutputBufferBigReallocation() throws Exception {
  Assert.assertEquals(DataOutputBuffer.MAX_ARRAY_SIZE,DataOutputBuffer.saturatedArraySizeCast(DataOutputBuffer.MAX_ARRAY_SIZE + 1L));
  Assert.assertEquals(DataOutputBuffer.MAX_ARRAY_SIZE,DataOutputBuffer.saturatedArraySizeCast(DataOutputBuffer.MAX_ARRAY_SIZE));
  Assert.assertEquals(DataOutputBuffer.MAX_ARRAY_SIZE - 1,DataOutputBuffer.saturatedArraySizeCast(DataOutputBuffer.MAX_ARRAY_SIZE - 1));
  Assert.assertEquals(0,DataOutputBuffer.saturatedArraySizeCast(0));
  Assert.assertEquals(1,DataOutputBuffer.saturatedArraySizeCast(1));
  checkThrowsIAE(saturatedArraySizeCastCallable(-1));
  checkThrowsIAE(checkedArraySizeCastCallable(DataOutputBuffer.MAX_ARRAY_SIZE + 1L));
  Assert.assertEquals(DataOutputBuffer.MAX_ARRAY_SIZE,DataOutputBuffer.checkedArraySizeCast(DataOutputBuffer.MAX_ARRAY_SIZE));
  Assert.assertEquals(DataOutputBuffer.MAX_ARRAY_SIZE - 1,DataOutputBuffer.checkedArraySizeCast(DataOutputBuffer.MAX_ARRAY_SIZE - 1));
  Assert.assertEquals(0,DataOutputBuffer.checkedArraySizeCast(0));
  Assert.assertEquals(1,DataOutputBuffer.checkedArraySizeCast(1));
  checkThrowsIAE(checkedArraySizeCastCallable(-1));
  try (DataOutputBuffer write=new DataOutputBuffer()){
    Assert.assertEquals(DataOutputBuffer.MAX_ARRAY_SIZE,write.validateReallocation(DataOutputBuffer.MAX_ARRAY_SIZE + 1L));
    Assert.assertEquals(DataOutputBuffer.MAX_ARRAY_SIZE,write.validateReallocation(DataOutputBuffer.MAX_ARRAY_SIZE));
    Assert.assertEquals(DataOutputBuffer.MAX_ARRAY_SIZE - 1,write.validateReallocation(DataOutputBuffer.MAX_ARRAY_SIZE - 1));
    checkThrowsRuntimeException(validateReallocationCallable(write,0));
    checkThrowsRuntimeException(validateReallocationCallable(write,1));
    checkThrowsIAE(validateReallocationCallable(write,-1));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.FileSegmentInputStreamTest </h4><pre class="type-4 type-5 type-2 type-16 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=UnsupportedOperationException.class) public void testMarkNotSupported() throws Exception {
  FileSegmentInputStream reader=new FileSegmentInputStream(allocateBuffer(1024),"",0);
  assertFalse(reader.markSupported());
  assertEquals(0,reader.bytesPastMark(null));
  reader.mark();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.MemoryTest </h4><pre class="type-15 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInputStream() throws IOException {
  byte[] bytes=new byte[4096];
  ThreadLocalRandom.current().nextBytes(bytes);
  final Memory memory=Memory.allocate(bytes.length);
  memory.setBytes(0,bytes,0,bytes.length);
  try (MemoryInputStream stream=new MemoryInputStream(memory,1024)){
    byte[] bb=new byte[bytes.length];
    assertEquals(bytes.length,stream.available());
    stream.readFully(bb);
    assertEquals(0,stream.available());
    assertTrue(Arrays.equals(bytes,bb));
    try {
      stream.readInt();
      fail("Expected EOF exception");
    }
 catch (    EOFException e) {
    }
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.MmappedRegionsTest </h4><pre class="type-7 type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test(expected=AssertionError.class) public void testCopyCannotExtend() throws Exception {
  ByteBuffer buffer=allocateBuffer(128 * 1024);
  MmappedRegions snapshot;
  ChannelProxy channelCopy;
  try (ChannelProxy channel=new ChannelProxy(writeFile("testSnapshotCannotExtend",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(buffer.capacity() / 2);
    snapshot=regions.sharedCopy();
    channelCopy=channel.sharedCopy();
  }
   try {
    snapshot.extend(buffer.capacity());
  }
  finally {
    assertNull(snapshot.close(null));
    assertNull(channelCopy.close(null));
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopy() throws Exception {
  ByteBuffer buffer=allocateBuffer(128 * 1024);
  MmappedRegions snapshot;
  ChannelProxy channelCopy;
  try (ChannelProxy channel=new ChannelProxy(writeFile("testSnapshot",buffer));MmappedRegions regions=MmappedRegions.map(channel,buffer.capacity() / 4)){
    regions.extend(buffer.capacity() / 2);
    regions.extend(3 * buffer.capacity() / 4);
    regions.extend(buffer.capacity());
    snapshot=regions.sharedCopy();
    channelCopy=channel.sharedCopy();
  }
   assertFalse(snapshot.isCleanedUp());
  final int SIZE=buffer.capacity() / 4;
  for (int i=0; i < buffer.capacity(); i++) {
    MmappedRegions.Region region=snapshot.floor(i);
    assertNotNull(region);
    assertEquals(SIZE * (i / SIZE),region.bottom());
    assertEquals(SIZE + (SIZE * (i / SIZE)),region.top());
    assertNotNull(region.buffer.duplicate().getInt());
  }
  assertNull(snapshot.close(null));
  assertNull(channelCopy.close(null));
  assertTrue(snapshot.isCleanedUp());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSmallSegmentSize() throws Exception {
  int OLD_MAX_SEGMENT_SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
  MmappedRegions.MAX_SEGMENT_SIZE=1024;
  ByteBuffer buffer=allocateBuffer(4096);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testSmallSegmentSize",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(1024);
    regions.extend(2048);
    regions.extend(4096);
    final int SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
    for (int i=0; i < buffer.capacity(); i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      assertEquals(SIZE * (i / SIZE),region.bottom());
      assertEquals(SIZE + (SIZE * (i / SIZE)),region.top());
    }
  }
  finally {
    MmappedRegions.MAX_SEGMENT_SIZE=OLD_MAX_SEGMENT_SIZE;
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAllocRegions() throws Exception {
  int OLD_MAX_SEGMENT_SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
  MmappedRegions.MAX_SEGMENT_SIZE=1024;
  ByteBuffer buffer=allocateBuffer(MmappedRegions.MAX_SEGMENT_SIZE * MmappedRegions.REGION_ALLOC_SIZE * 3);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testAllocRegions",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(buffer.capacity());
    final int SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
    for (int i=0; i < buffer.capacity(); i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      assertEquals(SIZE * (i / SIZE),region.bottom());
      assertEquals(SIZE + (SIZE * (i / SIZE)),region.top());
    }
  }
  finally {
    MmappedRegions.MAX_SEGMENT_SIZE=OLD_MAX_SEGMENT_SIZE;
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testEmpty() throws Exception {
  ByteBuffer buffer=allocateBuffer(1024);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testEmpty",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    assertTrue(regions.isEmpty());
    assertTrue(regions.isValid(channel));
  }
 }

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapForCompressionMetadata() throws Exception {
  int OLD_MAX_SEGMENT_SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
  MmappedRegions.MAX_SEGMENT_SIZE=1024;
  ByteBuffer buffer=allocateBuffer(128 * 1024);
  File f=File.createTempFile("testMapForCompressionMetadata","1");
  f.deleteOnExit();
  File cf=File.createTempFile(f.getName() + ".metadata","1");
  cf.deleteOnExit();
  MetadataCollector sstableMetadataCollector=new MetadataCollector(new ClusteringComparator(BytesType.instance)).replayPosition(null);
  try (SequentialWriter writer=new CompressedSequentialWriter(f,cf.getAbsolutePath(),CompressionParams.snappy(),sstableMetadataCollector)){
    writer.write(buffer);
    writer.finish();
  }
   CompressionMetadata metadata=new CompressionMetadata(cf.getAbsolutePath(),f.length(),ChecksumType.CRC32);
  try (ChannelProxy channel=new ChannelProxy(f);MmappedRegions regions=MmappedRegions.map(channel,metadata)){
    assertFalse(regions.isEmpty());
    int i=0;
    while (i < buffer.capacity()) {
      CompressionMetadata.Chunk chunk=metadata.chunkFor(i);
      MmappedRegions.Region region=regions.floor(chunk.offset);
      assertNotNull(region);
      ByteBuffer compressedChunk=region.buffer.duplicate();
      assertNotNull(compressedChunk);
      assertEquals(chunk.length + 4,compressedChunk.capacity());
      assertEquals(chunk.offset,region.bottom());
      assertEquals(chunk.offset + chunk.length + 4,region.top());
      i+=metadata.chunkLength();
    }
  }
  finally {
    MmappedRegions.MAX_SEGMENT_SIZE=OLD_MAX_SEGMENT_SIZE;
    metadata.close();
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExtendOutOfOrder() throws Exception {
  ByteBuffer buffer=allocateBuffer(4096);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testExtendOutOfOrder",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(4096);
    regions.extend(1024);
    regions.extend(2048);
    for (int i=0; i < buffer.capacity(); i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      assertEquals(0,region.bottom());
      assertEquals(4096,region.top());
    }
  }
 }

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoSegments() throws Exception {
  ByteBuffer buffer=allocateBuffer(2048);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testTwoSegments",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(1024);
    for (int i=0; i < 1024; i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      assertEquals(0,region.bottom());
      assertEquals(1024,region.top());
    }
    regions.extend(2048);
    for (int i=0; i < 2048; i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      if (i < 1024) {
        assertEquals(0,region.bottom());
        assertEquals(1024,region.top());
      }
 else {
        assertEquals(1024,region.bottom());
        assertEquals(2048,region.top());
      }
    }
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.NIODataInputStreamTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("resource") @Test public void testReadUTF() throws Exception {
  final ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream daos=new DataOutputStream(baos);
  String simple="foobar42";
  assertEquals(2,BufferedDataOutputStreamTest.twoByte.getBytes(Charsets.UTF_8).length);
  assertEquals(3,BufferedDataOutputStreamTest.threeByte.getBytes(Charsets.UTF_8).length);
  assertEquals(4,BufferedDataOutputStreamTest.fourByte.getBytes(Charsets.UTF_8).length);
  daos.writeUTF(simple);
  daos.writeUTF(BufferedDataOutputStreamTest.twoByte);
  daos.writeUTF(BufferedDataOutputStreamTest.threeByte);
  daos.writeUTF(BufferedDataOutputStreamTest.fourByte);
  NIODataInputStream is=new NIODataInputStream(wrap(baos.toByteArray()),4096);
  assertEquals(simple,is.readUTF());
  assertEquals(BufferedDataOutputStreamTest.twoByte,is.readUTF());
  assertEquals(BufferedDataOutputStreamTest.threeByte,is.readUTF());
  assertEquals(BufferedDataOutputStreamTest.fourByte,is.readUTF());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("resource") @Test public void testAvailable() throws Exception {
  init();
  DummyChannel dc=new DummyChannel();
  dc.slices.clear();
  dc.slices.offer(ByteBuffer.allocate(8190));
  NIODataInputStream is=new NIODataInputStream(dc,4096);
  assertEquals(0,is.available());
  is.read();
  assertEquals(4095,is.available());
  is.read(new byte[4095]);
  assertEquals(0,is.available());
  is.read(new byte[10]);
  assertEquals(8190 - 10 - 4096,is.available());
  File f=File.createTempFile("foo","bar");
  RandomAccessFile fos=new RandomAccessFile(f,"rw");
  fos.write(new byte[10]);
  fos.seek(0);
  is=new NIODataInputStream(fos.getChannel(),9);
  int remaining=10;
  assertEquals(10,is.available());
  while (remaining > 0) {
    is.read();
    remaining--;
    assertEquals(remaining,is.available());
  }
  assertEquals(0,is.available());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.RandomAccessReaderTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBytes() throws IOException {
  File f=File.createTempFile("testReadBytes","1");
  final String expected="The quick brown fox jumps over the lazy dog";
  try (SequentialWriter writer=SequentialWriter.open(f)){
    writer.write(expected.getBytes());
    writer.finish();
  }
   assert f.exists();
  try (ChannelProxy channel=new ChannelProxy(f);RandomAccessReader reader=new RandomAccessReader.Builder(channel).build()){
    assertEquals(f.getAbsolutePath(),reader.getPath());
    assertEquals(expected.length(),reader.length());
    ByteBuffer b=ByteBufferUtil.read(reader,expected.length());
    assertEquals(expected,new String(b.array(),Charset.forName("UTF-8")));
    assertTrue(reader.isEOF());
    assertEquals(0,reader.bytesRemaining());
  }
 }

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReset() throws IOException {
  File f=File.createTempFile("testMark","1");
  final String expected="The quick brown fox jumps over the lazy dog";
  final int numIterations=10;
  try (SequentialWriter writer=SequentialWriter.open(f)){
    for (int i=0; i < numIterations; i++)     writer.write(expected.getBytes());
    writer.finish();
  }
   assert f.exists();
  try (ChannelProxy channel=new ChannelProxy(f);RandomAccessReader reader=new RandomAccessReader.Builder(channel).build()){
    assertEquals(expected.length() * numIterations,reader.length());
    ByteBuffer b=ByteBufferUtil.read(reader,expected.length());
    assertEquals(expected,new String(b.array(),Charset.forName("UTF-8")));
    assertFalse(reader.isEOF());
    assertEquals((numIterations - 1) * expected.length(),reader.bytesRemaining());
    FileMark mark=reader.mark();
    assertEquals(0,reader.bytesPastMark());
    assertEquals(0,reader.bytesPastMark(mark));
    for (int i=0; i < (numIterations - 1); i++) {
      b=ByteBufferUtil.read(reader,expected.length());
      assertEquals(expected,new String(b.array(),Charset.forName("UTF-8")));
    }
    assertTrue(reader.isEOF());
    assertEquals(expected.length() * (numIterations - 1),reader.bytesPastMark());
    assertEquals(expected.length() * (numIterations - 1),reader.bytesPastMark(mark));
    reader.reset(mark);
    assertEquals(0,reader.bytesPastMark());
    assertEquals(0,reader.bytesPastMark(mark));
    assertFalse(reader.isEOF());
    for (int i=0; i < (numIterations - 1); i++) {
      b=ByteBufferUtil.read(reader,expected.length());
      assertEquals(expected,new String(b.array(),Charset.forName("UTF-8")));
    }
    reader.reset();
    assertEquals(0,reader.bytesPastMark());
    assertEquals(0,reader.bytesPastMark(mark));
    assertFalse(reader.isEOF());
    for (int i=0; i < (numIterations - 1); i++) {
      b=ByteBufferUtil.read(reader,expected.length());
      assertEquals(expected,new String(b.array(),Charset.forName("UTF-8")));
    }
    assertTrue(reader.isEOF());
  }
 }

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVeryLarge() throws IOException {
  final long SIZE=1L << 32;
  Parameters params=new Parameters(SIZE,1 << 20);
  try (ChannelProxy channel=new ChannelProxy("abc",new FakeFileChannel(SIZE))){
    RandomAccessReader.Builder builder=new RandomAccessReader.Builder(channel).bufferType(params.bufferType).bufferSize(params.bufferSize);
    try (RandomAccessReader reader=builder.build()){
      assertEquals(channel.size(),reader.length());
      assertEquals(channel.size(),reader.bytesRemaining());
      assertEquals(Integer.MAX_VALUE,reader.available());
      assertEquals(channel.size(),reader.skip(channel.size()));
      assertTrue(reader.isEOF());
      assertEquals(0,reader.bytesRemaining());
    }
   }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.CloudstackSnitchTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNewRegions() throws IOException, ConfigurationException {
  az="ch-gva-1";
  CloudstackSnitch snitch=new TestCloudstackSnitch();
  InetAddress local=InetAddress.getByName("127.0.0.1");
  assertEquals("ch-gva",snitch.getDatacenter(local));
  assertEquals("1",snitch.getRack(local));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRacks() throws IOException, ConfigurationException {
  az="ch-gva-1";
  CloudstackSnitch snitch=new TestCloudstackSnitch();
  InetAddress local=InetAddress.getByName("127.0.0.1");
  InetAddress nonlocal=InetAddress.getByName("127.0.0.7");
  Gossiper.instance.addSavedEndpoint(nonlocal);
  Map<ApplicationState,VersionedValue> stateMap=new EnumMap<>(ApplicationState.class);
  stateMap.put(ApplicationState.DC,StorageService.instance.valueFactory.datacenter("ch-zrh"));
  stateMap.put(ApplicationState.RACK,StorageService.instance.valueFactory.rack("2"));
  Gossiper.instance.getEndpointStateForEndpoint(nonlocal).addApplicationStates(stateMap);
  assertEquals("ch-zrh",snitch.getDatacenter(nonlocal));
  assertEquals("2",snitch.getRack(nonlocal));
  assertEquals("ch-gva",snitch.getDatacenter(local));
  assertEquals("1",snitch.getRack(local));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.DynamicEndpointSnitchTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSnitch() throws InterruptedException, IOException, ConfigurationException {
  StorageService.instance.unsafeInitialize();
  SimpleSnitch ss=new SimpleSnitch();
  DynamicEndpointSnitch dsnitch=new DynamicEndpointSnitch(ss,String.valueOf(ss.hashCode()));
  InetAddress self=FBUtilities.getBroadcastAddress();
  InetAddress host1=InetAddress.getByName("127.0.0.2");
  InetAddress host2=InetAddress.getByName("127.0.0.3");
  InetAddress host3=InetAddress.getByName("127.0.0.4");
  List<InetAddress> hosts=Arrays.asList(host1,host2,host3);
  setScores(dsnitch,1,hosts,10,10,10);
  List<InetAddress> order=Arrays.asList(host1,host2,host3);
  assertEquals(order,dsnitch.getSortedListByProximity(self,Arrays.asList(host1,host2,host3)));
  setScores(dsnitch,1,hosts,20,10,10);
  order=Arrays.asList(host2,host3,host1);
  assertEquals(order,dsnitch.getSortedListByProximity(self,Arrays.asList(host1,host2,host3)));
  setScores(dsnitch,2,hosts,15,20,10);
  order=Arrays.asList(host3,host1,host2);
  assertEquals(order,dsnitch.getSortedListByProximity(self,Arrays.asList(host1,host2,host3)));
  setScores(dsnitch,3,hosts,10,10,30);
  order=Arrays.asList(host1,host2,host3);
  assertEquals(order,dsnitch.getSortedListByProximity(self,Arrays.asList(host1,host2,host3)));
  setScores(dsnitch,5,hosts,10,10,10);
  order=Arrays.asList(host1,host2,host3);
  assertEquals(order,dsnitch.getSortedListByProximity(self,Arrays.asList(host1,host2,host3)));
  setScores(dsnitch,20,hosts,10,70,20);
  order=Arrays.asList(host1,host3,host2);
  assertEquals(order,dsnitch.getSortedListByProximity(self,Arrays.asList(host1,host2,host3)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.EC2SnitchTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRac() throws IOException, ConfigurationException {
  az="us-east-1d";
  Ec2Snitch snitch=new TestEC2Snitch();
  InetAddress local=InetAddress.getByName("127.0.0.1");
  InetAddress nonlocal=InetAddress.getByName("127.0.0.7");
  Gossiper.instance.addSavedEndpoint(nonlocal);
  Map<ApplicationState,VersionedValue> stateMap=new EnumMap<>(ApplicationState.class);
  stateMap.put(ApplicationState.DC,StorageService.instance.valueFactory.datacenter("us-west"));
  stateMap.put(ApplicationState.RACK,StorageService.instance.valueFactory.datacenter("1a"));
  Gossiper.instance.getEndpointStateForEndpoint(nonlocal).addApplicationStates(stateMap);
  assertEquals("us-west",snitch.getDatacenter(nonlocal));
  assertEquals("1a",snitch.getRack(nonlocal));
  assertEquals("us-east",snitch.getDatacenter(local));
  assertEquals("1d",snitch.getRack(local));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNewRegions() throws IOException, ConfigurationException {
  az="us-east-2d";
  Ec2Snitch snitch=new TestEC2Snitch();
  InetAddress local=InetAddress.getByName("127.0.0.1");
  assertEquals("us-east-2",snitch.getDatacenter(local));
  assertEquals("2d",snitch.getRack(local));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEc2MRSnitch() throws UnknownHostException {
  InetAddress me=InetAddress.getByName("127.0.0.2");
  InetAddress com_ip=InetAddress.getByName("127.0.0.3");
  OutboundTcpConnectionPool pool=MessagingService.instance().getConnectionPool(me);
  Assert.assertEquals(me,pool.endPoint());
  pool.reset(com_ip);
  Assert.assertEquals(com_ip,pool.endPoint());
  MessagingService.instance().destroyConnectionPool(me);
  pool=MessagingService.instance().getConnectionPool(me);
  Assert.assertEquals(com_ip,pool.endPoint());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.GoogleCloudSnitchTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNewRegions() throws IOException, ConfigurationException {
  az="asia-east1-a";
  GoogleCloudSnitch snitch=new TestGoogleCloudSnitch();
  InetAddress local=InetAddress.getByName("127.0.0.1");
  assertEquals("asia-east1",snitch.getDatacenter(local));
  assertEquals("a",snitch.getRack(local));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRac() throws IOException, ConfigurationException {
  az="us-central1-a";
  GoogleCloudSnitch snitch=new TestGoogleCloudSnitch();
  InetAddress local=InetAddress.getByName("127.0.0.1");
  InetAddress nonlocal=InetAddress.getByName("127.0.0.7");
  Gossiper.instance.addSavedEndpoint(nonlocal);
  Map<ApplicationState,VersionedValue> stateMap=new EnumMap<>(ApplicationState.class);
  stateMap.put(ApplicationState.DC,StorageService.instance.valueFactory.datacenter("europe-west1"));
  stateMap.put(ApplicationState.RACK,StorageService.instance.valueFactory.datacenter("a"));
  Gossiper.instance.getEndpointStateForEndpoint(nonlocal).addApplicationStates(stateMap);
  assertEquals("europe-west1",snitch.getDatacenter(nonlocal));
  assertEquals("a",snitch.getRack(nonlocal));
  assertEquals("us-central1",snitch.getDatacenter(local));
  assertEquals("a",snitch.getRack(local));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.NetworkTopologyStrategyTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLargeCluster() throws UnknownHostException, ConfigurationException {
  int[] dcRacks=new int[]{2,4,8};
  int[] dcEndpoints=new int[]{128,256,512};
  int[] dcReplication=new int[]{2,6,6};
  IEndpointSnitch snitch=new RackInferringSnitch();
  DatabaseDescriptor.setEndpointSnitch(snitch);
  TokenMetadata metadata=new TokenMetadata();
  Map<String,String> configOptions=new HashMap<String,String>();
  Multimap<InetAddress,Token> tokens=HashMultimap.create();
  int totalRF=0;
  for (int dc=0; dc < dcRacks.length; ++dc) {
    totalRF+=dcReplication[dc];
    configOptions.put(Integer.toString(dc),Integer.toString(dcReplication[dc]));
    for (int rack=0; rack < dcRacks[dc]; ++rack) {
      for (int ep=1; ep <= dcEndpoints[dc] / dcRacks[dc]; ++ep) {
        byte[] ipBytes=new byte[]{10,(byte)dc,(byte)rack,(byte)ep};
        InetAddress address=InetAddress.getByAddress(ipBytes);
        StringToken token=new StringToken(String.format("%02x%02x%02x",ep,rack,dc));
        logger.debug("adding node {} at {}",address,token);
        tokens.put(address,token);
      }
    }
  }
  metadata.updateNormalTokens(tokens);
  NetworkTopologyStrategy strategy=new NetworkTopologyStrategy(keyspaceName,metadata,snitch,configOptions);
  for (  String testToken : new String[]{"123456","200000","000402","ffffff","400200"}) {
    List<InetAddress> endpoints=strategy.calculateNaturalEndpoints(new StringToken(testToken),metadata);
    Set<InetAddress> epSet=new HashSet<InetAddress>(endpoints);
    Assert.assertEquals(totalRF,endpoints.size());
    Assert.assertEquals(totalRF,epSet.size());
    logger.debug("{}: {}",testToken,endpoints);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.PendingRangeMapsTest </h4><pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWrapAroundRanges() throws UnknownHostException {
  PendingRangeMaps pendingRangeMaps=new PendingRangeMaps();
  pendingRangeMaps.addPendingRange(genRange("5","15"),InetAddress.getByName("127.0.0.1"));
  pendingRangeMaps.addPendingRange(genRange("15","25"),InetAddress.getByName("127.0.0.2"));
  pendingRangeMaps.addPendingRange(genRange("25","35"),InetAddress.getByName("127.0.0.3"));
  pendingRangeMaps.addPendingRange(genRange("35","45"),InetAddress.getByName("127.0.0.4"));
  pendingRangeMaps.addPendingRange(genRange("45","55"),InetAddress.getByName("127.0.0.5"));
  pendingRangeMaps.addPendingRange(genRange("45","65"),InetAddress.getByName("127.0.0.6"));
  pendingRangeMaps.addPendingRange(genRange("65","7"),InetAddress.getByName("127.0.0.7"));
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("0")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("5")).size());
  assertEquals(2,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("7")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("10")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("15")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("20")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("25")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("35")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("45")).size());
  assertEquals(2,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("55")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("65")).size());
  Collection<InetAddress> endpoints=pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("6"));
  assertTrue(endpoints.contains(InetAddress.getByName("127.0.0.1")));
  assertTrue(endpoints.contains(InetAddress.getByName("127.0.0.7")));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPendingEndpoints() throws UnknownHostException {
  PendingRangeMaps pendingRangeMaps=new PendingRangeMaps();
  pendingRangeMaps.addPendingRange(genRange("5","15"),InetAddress.getByName("127.0.0.1"));
  pendingRangeMaps.addPendingRange(genRange("15","25"),InetAddress.getByName("127.0.0.2"));
  pendingRangeMaps.addPendingRange(genRange("25","35"),InetAddress.getByName("127.0.0.3"));
  pendingRangeMaps.addPendingRange(genRange("35","45"),InetAddress.getByName("127.0.0.4"));
  pendingRangeMaps.addPendingRange(genRange("45","55"),InetAddress.getByName("127.0.0.5"));
  pendingRangeMaps.addPendingRange(genRange("45","65"),InetAddress.getByName("127.0.0.6"));
  assertEquals(0,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("0")).size());
  assertEquals(0,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("5")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("10")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("15")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("20")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("25")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("35")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("45")).size());
  assertEquals(2,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("55")).size());
  assertEquals(1,pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("65")).size());
  Collection<InetAddress> endpoints=pendingRangeMaps.pendingEndpointsFor(new BigIntegerToken("15"));
  assertTrue(endpoints.contains(InetAddress.getByName("127.0.0.1")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.SimpleStrategyTest </h4><pre class="type-6 type-7 type-13 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testGetEndpointsDuringBootstrap() throws UnknownHostException {
  final int RING_SIZE=10;
  TokenMetadata tmd=new TokenMetadata();
  TokenMetadata oldTmd=StorageServiceAccessor.setTokenMetadata(tmd);
  Token[] endpointTokens=new Token[RING_SIZE];
  Token[] keyTokens=new Token[RING_SIZE];
  for (int i=0; i < RING_SIZE; i++) {
    endpointTokens[i]=new BigIntegerToken(String.valueOf(RING_SIZE * 2 * i));
    keyTokens[i]=new BigIntegerToken(String.valueOf(RING_SIZE * 2 * i + RING_SIZE));
  }
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  for (int i=0; i < endpointTokens.length; i++) {
    InetAddress ep=InetAddress.getByName("127.0.0." + String.valueOf(i + 1));
    tmd.updateNormalToken(endpointTokens[i],ep);
    hosts.add(ep);
  }
  Token bsToken=new BigIntegerToken(String.valueOf(210));
  InetAddress bootstrapEndpoint=InetAddress.getByName("127.0.0.11");
  tmd.addBootstrapToken(bsToken,bootstrapEndpoint);
  AbstractReplicationStrategy strategy=null;
  for (  String keyspaceName : Schema.instance.getNonSystemKeyspaces()) {
    strategy=getStrategy(keyspaceName,tmd);
    PendingRangeCalculatorService.calculatePendingRanges(strategy,keyspaceName);
    int replicationFactor=strategy.getReplicationFactor();
    for (int i=0; i < keyTokens.length; i++) {
      Collection<InetAddress> endpoints=tmd.getWriteEndpoints(keyTokens[i],keyspaceName,strategy.getNaturalEndpoints(keyTokens[i]));
      assertTrue(endpoints.size() >= replicationFactor);
      for (int j=0; j < replicationFactor; j++) {
        assertTrue(endpoints.contains(hosts.get((i + j + 1) % hosts.size())));
      }
      if (i < RING_SIZE - replicationFactor)       assertFalse(endpoints.contains(bootstrapEndpoint));
 else       assertTrue(endpoints.contains(bootstrapEndpoint));
    }
  }
  StorageServiceAccessor.setTokenMetadata(oldTmd);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.TokenMetadataTest </h4><pre class="type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopologyUpdate_RackConsolidation() throws UnknownHostException {
  final InetAddress first=InetAddress.getByName("127.0.0.1");
  final InetAddress second=InetAddress.getByName("127.0.0.6");
  final String DATA_CENTER="datacenter1";
  final String RACK1="rack1";
  final String RACK2="rack2";
  DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch(){
    @Override public String getRack(    InetAddress endpoint){
      return endpoint.equals(first) ? RACK1 : RACK2;
    }
    @Override public String getDatacenter(    InetAddress endpoint){
      return DATA_CENTER;
    }
    @Override public int compareEndpoints(    InetAddress target,    InetAddress a1,    InetAddress a2){
      return 0;
    }
  }
);
  tmd.updateNormalToken(token(ONE),first);
  tmd.updateNormalToken(token(SIX),second);
  TokenMetadata tokenMetadata=tmd.cloneOnlyTokenMap();
  assertNotNull(tokenMetadata);
  TokenMetadata.Topology topology=tokenMetadata.getTopology();
  assertNotNull(topology);
  Multimap<String,InetAddress> allEndpoints=topology.getDatacenterEndpoints();
  assertNotNull(allEndpoints);
  assertTrue(allEndpoints.size() == 2);
  assertTrue(allEndpoints.containsKey(DATA_CENTER));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(first));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(second));
  Map<String,Multimap<String,InetAddress>> racks=topology.getDatacenterRacks();
  assertNotNull(racks);
  assertTrue(racks.size() == 1);
  assertTrue(racks.containsKey(DATA_CENTER));
  assertTrue(racks.get(DATA_CENTER).size() == 2);
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK1));
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK2));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(first));
  assertTrue(racks.get(DATA_CENTER).get(RACK2).contains(second));
  DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch(){
    @Override public String getRack(    InetAddress endpoint){
      return RACK1;
    }
    @Override public String getDatacenter(    InetAddress endpoint){
      return DATA_CENTER;
    }
    @Override public int compareEndpoints(    InetAddress target,    InetAddress a1,    InetAddress a2){
      return 0;
    }
  }
);
  tokenMetadata.updateTopology(first);
  tokenMetadata.updateTopology(second);
  allEndpoints=topology.getDatacenterEndpoints();
  assertNotNull(allEndpoints);
  assertTrue(allEndpoints.size() == 2);
  assertTrue(allEndpoints.containsKey(DATA_CENTER));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(first));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(second));
  racks=topology.getDatacenterRacks();
  assertNotNull(racks);
  assertTrue(racks.size() == 1);
  assertTrue(racks.containsKey(DATA_CENTER));
  assertTrue(racks.get(DATA_CENTER).size() == 2);
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK1));
  assertFalse(racks.get(DATA_CENTER).containsKey(RACK2));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(first));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(second));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopologyUpdate_RackExpansion() throws UnknownHostException {
  final InetAddress first=InetAddress.getByName("127.0.0.1");
  final InetAddress second=InetAddress.getByName("127.0.0.6");
  final String DATA_CENTER="datacenter1";
  final String RACK1="rack1";
  final String RACK2="rack2";
  DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch(){
    @Override public String getRack(    InetAddress endpoint){
      return RACK1;
    }
    @Override public String getDatacenter(    InetAddress endpoint){
      return DATA_CENTER;
    }
    @Override public int compareEndpoints(    InetAddress target,    InetAddress a1,    InetAddress a2){
      return 0;
    }
  }
);
  tmd.updateNormalToken(token(ONE),first);
  tmd.updateNormalToken(token(SIX),second);
  TokenMetadata tokenMetadata=tmd.cloneOnlyTokenMap();
  assertNotNull(tokenMetadata);
  TokenMetadata.Topology topology=tokenMetadata.getTopology();
  assertNotNull(topology);
  Multimap<String,InetAddress> allEndpoints=topology.getDatacenterEndpoints();
  assertNotNull(allEndpoints);
  assertTrue(allEndpoints.size() == 2);
  assertTrue(allEndpoints.containsKey(DATA_CENTER));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(first));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(second));
  Map<String,Multimap<String,InetAddress>> racks=topology.getDatacenterRacks();
  assertNotNull(racks);
  assertTrue(racks.size() == 1);
  assertTrue(racks.containsKey(DATA_CENTER));
  assertTrue(racks.get(DATA_CENTER).size() == 2);
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK1));
  assertFalse(racks.get(DATA_CENTER).containsKey(RACK2));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(first));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(second));
  DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch(){
    @Override public String getRack(    InetAddress endpoint){
      return endpoint.equals(first) ? RACK1 : RACK2;
    }
    @Override public String getDatacenter(    InetAddress endpoint){
      return DATA_CENTER;
    }
    @Override public int compareEndpoints(    InetAddress target,    InetAddress a1,    InetAddress a2){
      return 0;
    }
  }
);
  tokenMetadata.updateTopology();
  allEndpoints=topology.getDatacenterEndpoints();
  assertNotNull(allEndpoints);
  assertTrue(allEndpoints.size() == 2);
  assertTrue(allEndpoints.containsKey(DATA_CENTER));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(first));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(second));
  racks=topology.getDatacenterRacks();
  assertNotNull(racks);
  assertTrue(racks.size() == 1);
  assertTrue(racks.containsKey(DATA_CENTER));
  assertTrue(racks.get(DATA_CENTER).size() == 2);
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK1));
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK2));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(first));
  assertTrue(racks.get(DATA_CENTER).get(RACK2).contains(second));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.metrics.HintedHandOffMetricsTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHintsMetrics() throws Exception {
  DatabaseDescriptor.getHintsDirectory().mkdirs();
  for (int i=0; i < 99; i++)   HintsService.instance.metrics.incrPastWindow(InetAddress.getLocalHost());
  HintsService.instance.metrics.log();
  UntypedResultSet rows=executeInternal("SELECT hints_dropped FROM system." + SystemKeyspace.PEER_EVENTS);
  Map<UUID,Integer> returned=rows.one().getMap("hints_dropped",UUIDType.instance,Int32Type.instance);
  assertEquals(Iterators.getLast(returned.values().iterator()).intValue(),99);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.metrics.LatencyMetricsTest </h4><pre class="type-6 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
/** 
 * Test bitsets in a "real-world" environment, i.e., bloom filters
 */
@Test public void testGetRecentLatency(){
  final LatencyMetrics l=new LatencyMetrics("test","test");
  Runnable r=new Runnable(){
    public void run(){
      for (int i=0; i < 10000; i++) {
        l.addNano(1000);
      }
    }
  }
;
  new Thread(r).start();
  for (int i=0; i < 10000; i++) {
    Double recent=l.latency.getOneMinuteRate();
    assertFalse(recent.equals(Double.POSITIVE_INFINITY));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.net.MessagingServiceTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDroppedMessages(){
  MessagingService.Verb verb=MessagingService.Verb.READ;
  for (int i=1; i <= 5000; i++)   messagingService.incrementDroppedMessages(verb,i,i % 2 == 0);
  List<String> logs=messagingService.getDroppedMessagesLogs();
  assertEquals(1,logs.size());
  assertEquals("READ messages were dropped in last 5000 ms: 2500 for internal timeout and 2500 for cross node timeout. Mean internal dropped latency: 2730 ms and Mean cross-node dropped latency: 2731 ms",logs.get(0));
  assertEquals(5000,(int)messagingService.getDroppedMessages().get(verb.toString()));
  logs=messagingService.getDroppedMessagesLogs();
  assertEquals(0,logs.size());
  for (int i=0; i < 2500; i++)   messagingService.incrementDroppedMessages(verb,i,i % 2 == 0);
  logs=messagingService.getDroppedMessagesLogs();
  assertEquals("READ messages were dropped in last 5000 ms: 1250 for internal timeout and 1250 for cross node timeout. Mean internal dropped latency: 2277 ms and Mean cross-node dropped latency: 2278 ms",logs.get(0));
  assertEquals(7500,(int)messagingService.getDroppedMessages().get(verb.toString()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.repair.LocalSyncTaskTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDifference() throws Throwable {
  Range<Token> range=new Range<>(partirioner.getMinimumToken(),partirioner.getRandomToken());
  UUID parentRepairSession=UUID.randomUUID();
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore("Standard1");
  ActiveRepairService.instance.registerParentRepairSession(parentRepairSession,Arrays.asList(cfs),Arrays.asList(range),false,System.currentTimeMillis(),false);
  RepairJobDesc desc=new RepairJobDesc(parentRepairSession,UUID.randomUUID(),KEYSPACE1,"Standard1",Arrays.asList(range));
  MerkleTrees tree1=createInitialTree(desc);
  MerkleTrees tree2=createInitialTree(desc);
  Token token=partirioner.midpoint(range.left,range.right);
  tree1.invalidate(token);
  MerkleTree.TreeRange changed=tree1.get(token);
  changed.hash("non-empty hash!".getBytes());
  Set<Range<Token>> interesting=new HashSet<>();
  interesting.add(changed);
  TreeResponse r1=new TreeResponse(InetAddress.getByName("127.0.0.1"),tree1);
  TreeResponse r2=new TreeResponse(InetAddress.getByName("127.0.0.2"),tree2);
  LocalSyncTask task=new LocalSyncTask(desc,r1,r2,ActiveRepairService.UNREPAIRED_SSTABLE);
  task.run();
  assertEquals("Wrong differing ranges",interesting.size(),task.getCurrentStat().numberOfDifferences);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * When there is no difference between two, LocalSyncTask should return stats with 0 difference.
 */
@Test public void testNoDifference() throws Throwable {
  final InetAddress ep1=InetAddress.getByName("127.0.0.1");
  final InetAddress ep2=InetAddress.getByName("127.0.0.1");
  Range<Token> range=new Range<>(partirioner.getMinimumToken(),partirioner.getRandomToken());
  RepairJobDesc desc=new RepairJobDesc(UUID.randomUUID(),UUID.randomUUID(),KEYSPACE1,"Standard1",Arrays.asList(range));
  MerkleTrees tree1=createInitialTree(desc);
  MerkleTrees tree2=createInitialTree(desc);
  TreeResponse r1=new TreeResponse(ep1,tree1);
  TreeResponse r2=new TreeResponse(ep2,tree2);
  LocalSyncTask task=new LocalSyncTask(desc,r1,r2,ActiveRepairService.UNREPAIRED_SSTABLE);
  task.run();
  assertEquals(0,task.get().numberOfDifferences);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.repair.ValidatorTest </h4><pre class="type-7 type-13 type-15 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidatorFailed() throws Throwable {
  Range<Token> range=new Range<>(partitioner.getMinimumToken(),partitioner.getRandomToken());
  final RepairJobDesc desc=new RepairJobDesc(UUID.randomUUID(),UUID.randomUUID(),keyspace,columnFamily,Arrays.asList(range));
  final SimpleCondition lock=new SimpleCondition();
  MessagingService.instance().addMessageSink(new IMessageSink(){
    public boolean allowOutgoingMessage(    MessageOut message,    int id,    InetAddress to){
      try {
        if (message.verb == MessagingService.Verb.REPAIR_MESSAGE) {
          RepairMessage m=(RepairMessage)message.payload;
          assertEquals(RepairMessage.Type.VALIDATION_COMPLETE,m.messageType);
          assertEquals(desc,m.desc);
          assertFalse(((ValidationComplete)m).success());
          assertNull(((ValidationComplete)m).trees);
        }
      }
  finally {
        lock.signalAll();
      }
      return false;
    }
    public boolean allowIncomingMessage(    MessageIn message,    int id){
      return false;
    }
  }
);
  InetAddress remote=InetAddress.getByName("127.0.0.2");
  Validator validator=new Validator(desc,remote,0);
  validator.fail();
  if (!lock.isSignaled())   lock.await();
}

</code></pre>

<br>
<pre class="type-7 type-13 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidatorComplete() throws Throwable {
  Range<Token> range=new Range<>(partitioner.getMinimumToken(),partitioner.getRandomToken());
  final RepairJobDesc desc=new RepairJobDesc(UUID.randomUUID(),UUID.randomUUID(),keyspace,columnFamily,Arrays.asList(range));
  final SimpleCondition lock=new SimpleCondition();
  MessagingService.instance().addMessageSink(new IMessageSink(){
    public boolean allowOutgoingMessage(    MessageOut message,    int id,    InetAddress to){
      try {
        if (message.verb == MessagingService.Verb.REPAIR_MESSAGE) {
          RepairMessage m=(RepairMessage)message.payload;
          assertEquals(RepairMessage.Type.VALIDATION_COMPLETE,m.messageType);
          assertEquals(desc,m.desc);
          assertTrue(((ValidationComplete)m).success());
          assertNotNull(((ValidationComplete)m).trees);
        }
      }
  finally {
        lock.signalAll();
      }
      return false;
    }
    public boolean allowIncomingMessage(    MessageIn message,    int id){
      return false;
    }
  }
);
  InetAddress remote=InetAddress.getByName("127.0.0.2");
  ColumnFamilyStore cfs=Keyspace.open(keyspace).getColumnFamilyStore(columnFamily);
  Validator validator=new Validator(desc,remote,0);
  MerkleTrees tree=new MerkleTrees(partitioner);
  tree.addMerkleTrees((int)Math.pow(2,15),validator.desc.ranges);
  validator.prepare(cfs,tree);
  assertTrue(tree.size() > 1);
  Token mid=partitioner.midpoint(range.left,range.right);
  validator.add(EmptyIterators.unfilteredRow(cfs.metadata,new BufferDecoratedKey(mid,ByteBufferUtil.bytes("inconceivable!")),false));
  validator.complete();
  Token min=tree.partitioner().getMinimumToken();
  assertNotNull(tree.hash(new Range<>(min,min)));
  if (!lock.isSignaled())   lock.await();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.repair.messages.RepairOptionTest </h4><pre class="type-7 type-13 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseOptions(){
  IPartitioner partitioner=Murmur3Partitioner.instance;
  Token.TokenFactory tokenFactory=partitioner.getTokenFactory();
  RepairOption option=RepairOption.parse(new HashMap<String,String>(),partitioner);
  if (FBUtilities.isWindows() && (DatabaseDescriptor.getDiskAccessMode() != Config.DiskAccessMode.standard || DatabaseDescriptor.getIndexAccessMode() != Config.DiskAccessMode.standard))   assertTrue(option.getParallelism() == RepairParallelism.PARALLEL);
 else   assertTrue(option.getParallelism() == RepairParallelism.SEQUENTIAL);
  assertFalse(option.isPrimaryRange());
  assertFalse(option.isIncremental());
  Map<String,String> options=new HashMap<>();
  options.put(RepairOption.PARALLELISM_KEY,"parallel");
  options.put(RepairOption.PRIMARY_RANGE_KEY,"false");
  options.put(RepairOption.INCREMENTAL_KEY,"false");
  options.put(RepairOption.RANGES_KEY,"0:10,11:20,21:30");
  options.put(RepairOption.COLUMNFAMILIES_KEY,"cf1,cf2,cf3");
  options.put(RepairOption.DATACENTERS_KEY,"dc1,dc2,dc3");
  options.put(RepairOption.HOSTS_KEY,"127.0.0.1,127.0.0.2,127.0.0.3");
  option=RepairOption.parse(options,partitioner);
  assertTrue(option.getParallelism() == RepairParallelism.PARALLEL);
  assertFalse(option.isPrimaryRange());
  assertFalse(option.isIncremental());
  Set<Range<Token>> expectedRanges=new HashSet<>(3);
  expectedRanges.add(new Range<>(tokenFactory.fromString("0"),tokenFactory.fromString("10")));
  expectedRanges.add(new Range<>(tokenFactory.fromString("11"),tokenFactory.fromString("20")));
  expectedRanges.add(new Range<>(tokenFactory.fromString("21"),tokenFactory.fromString("30")));
  assertEquals(expectedRanges,option.getRanges());
  Set<String> expectedCFs=new HashSet<>(3);
  expectedCFs.add("cf1");
  expectedCFs.add("cf2");
  expectedCFs.add("cf3");
  assertEquals(expectedCFs,option.getColumnFamilies());
  Set<String> expectedDCs=new HashSet<>(3);
  expectedDCs.add("dc1");
  expectedDCs.add("dc2");
  expectedDCs.add("dc3");
  assertEquals(expectedDCs,option.getDataCenters());
  Set<String> expectedHosts=new HashSet<>(3);
  expectedHosts.add("127.0.0.1");
  expectedHosts.add("127.0.0.2");
  expectedHosts.add("127.0.0.3");
  assertEquals(expectedHosts,option.getHosts());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.schema.DefsTest </h4><pre class="type-7 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testDropIndex() throws ConfigurationException {
  SchemaKeyspace.makeCreateKeyspaceMutation(Schema.instance.getKSMetaData(KEYSPACE6),FBUtilities.timestampMicros()).applyUnsafe();
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE6).getColumnFamilyStore(TABLE1i);
  String indexName="birthdate_key_index";
  QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (key, c1, birthdate, notbirthdate) VALUES (?, ?, ?, ?)",KEYSPACE6,TABLE1i),"key0","col0",1L,1L);
  cfs.forceBlockingFlush();
  ColumnFamilyStore indexCfs=cfs.indexManager.getIndexByName(indexName).getBackingTable().orElseThrow(throwAssert("Cannot access index cfs"));
  Descriptor desc=indexCfs.getLiveSSTables().iterator().next().descriptor;
  CFMetaData meta=cfs.metadata.copy();
  IndexMetadata existing=cfs.metadata.getIndexes().get(indexName).orElseThrow(throwAssert("Index not found"));
  meta.indexes(meta.getIndexes().without(existing.name));
  MigrationManager.announceColumnFamilyUpdate(meta,false);
  assertTrue(cfs.indexManager.listIndexes().isEmpty());
  LifecycleTransaction.waitForDeletions();
  assertFalse(new File(desc.filenameFor(Component.DATA)).exists());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dropKS() throws ConfigurationException {
  final KeyspaceMetadata ks=Schema.instance.getKSMetaData(KEYSPACE1);
  assertNotNull(ks);
  final CFMetaData cfm=ks.tables.getNullable(TABLE2);
  assertNotNull(cfm);
  for (int i=0; i < 100; i++)   QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (key, name, val) VALUES (?, ?, ?)",KEYSPACE1,TABLE2),"dropKs","col" + i,"anyvalue");
  ColumnFamilyStore cfs=Keyspace.open(cfm.ksName).getColumnFamilyStore(cfm.cfName);
  assertNotNull(cfs);
  cfs.forceBlockingFlush();
  assertTrue(!cfs.getDirectories().sstableLister(Directories.OnTxnErr.THROW).list().isEmpty());
  MigrationManager.announceKeyspaceDrop(ks.name);
  assertNull(Schema.instance.getKSMetaData(ks.name));
  boolean success=true;
  try {
    QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (key, name, val) VALUES (?, ?, ?)",KEYSPACE1,TABLE2),"dropKs","col0","anyvalue");
  }
 catch (  Throwable th) {
    success=false;
  }
  assertFalse("This mutation should have failed since the KS no longer exists.",success);
  boolean threw=false;
  try {
    Keyspace.open(ks.name);
  }
 catch (  Throwable th) {
    threw=true;
  }
  assertTrue(threw);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCFMetaDataApply() throws ConfigurationException {
  CFMetaData cfm=CFMetaData.Builder.create(KEYSPACE1,"TestApplyCFM_CF").addPartitionKey("keys",BytesType.instance).addClusteringColumn("col",BytesType.instance).build();
  for (int i=0; i < 5; i++) {
    ByteBuffer name=ByteBuffer.wrap(new byte[]{(byte)i});
    cfm.addColumnDefinition(ColumnDefinition.regularDef(cfm,name,BytesType.instance));
  }
  cfm.comment("No comment").readRepairChance(0.5).gcGraceSeconds(100000).compaction(CompactionParams.scts(ImmutableMap.of("min_threshold","500","max_threshold","500")));
  assertNull(cfm.getColumnDefinition(ByteBuffer.wrap(new byte[]{5})));
  CFMetaData cfNew=cfm.copy();
  ColumnDefinition addIndexDef=ColumnDefinition.regularDef(cfm,ByteBuffer.wrap(new byte[]{5}),BytesType.instance);
  cfNew.addColumnDefinition(addIndexDef);
  ColumnDefinition removeIndexDef=ColumnDefinition.regularDef(cfm,ByteBuffer.wrap(new byte[]{0}),BytesType.instance);
  assertTrue(cfNew.removeColumnDefinition(removeIndexDef));
  cfm.apply(cfNew);
  for (int i=1; i < cfm.allColumns().size(); i++)   assertNotNull(cfm.getColumnDefinition(ByteBuffer.wrap(new byte[]{1})));
  assertNull(cfm.getColumnDefinition(ByteBuffer.wrap(new byte[]{0})));
  assertNotNull(cfm.getColumnDefinition(ByteBuffer.wrap(new byte[]{5})));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.security.CipherFactoryTest </h4><pre class="type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void buildCipher_DifferentIVs() throws Exception {
  Cipher c1=cipherFactory.buildCipher(encryptionOptions.cipher,encryptionOptions.key_alias,nextIV(),Cipher.ENCRYPT_MODE);
  Cipher c2=cipherFactory.buildCipher(encryptionOptions.cipher,encryptionOptions.key_alias,nextIV(),Cipher.DECRYPT_MODE);
  Assert.assertFalse(c1 == c2);
}

</code></pre>

<br>
<pre class="type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void buildCipher_SameParams() throws Exception {
  byte[] iv=nextIV();
  Cipher c1=cipherFactory.buildCipher(encryptionOptions.cipher,encryptionOptions.key_alias,iv,Cipher.ENCRYPT_MODE);
  Cipher c2=cipherFactory.buildCipher(encryptionOptions.cipher,encryptionOptions.key_alias,iv,Cipher.ENCRYPT_MODE);
  Assert.assertTrue(c1 == c2);
}

</code></pre>

<br>
<pre class="type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void buildCipher_DifferentAliases() throws Exception {
  Cipher c1=cipherFactory.buildCipher(encryptionOptions.cipher,encryptionOptions.key_alias,nextIV(),Cipher.ENCRYPT_MODE);
  Cipher c2=cipherFactory.buildCipher(encryptionOptions.cipher,EncryptionContextGenerator.KEY_ALIAS_2,nextIV(),Cipher.DECRYPT_MODE);
  Assert.assertFalse(c1 == c2);
}

</code></pre>

<br>
<pre class="type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void buildCipher_DifferentModes() throws Exception {
  byte[] iv=nextIV();
  Cipher c1=cipherFactory.buildCipher(encryptionOptions.cipher,encryptionOptions.key_alias,iv,Cipher.ENCRYPT_MODE);
  Cipher c2=cipherFactory.buildCipher(encryptionOptions.cipher,encryptionOptions.key_alias,iv,Cipher.DECRYPT_MODE);
  Assert.assertFalse(c1 == c2);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void roundTrip() throws IOException, BadPaddingException, IllegalBlockSizeException {
  Cipher encryptor=cipherFactory.getEncryptor(encryptionOptions.cipher,encryptionOptions.key_alias);
  byte[] original=ULYSSEUS.getBytes(Charsets.UTF_8);
  byte[] encrypted=encryptor.doFinal(original);
  Cipher decryptor=cipherFactory.getDecryptor(encryptionOptions.cipher,encryptionOptions.key_alias,encryptor.getIV());
  byte[] decrypted=decryptor.doFinal(encrypted);
  Assert.assertEquals(ULYSSEUS,new String(decrypted,Charsets.UTF_8));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.security.EncryptionUtilsTest </h4><pre class="type-7 type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void fullRoundTrip() throws IOException, BadPaddingException, ShortBufferException, IllegalBlockSizeException {
  byte[] buf=new byte[(1 << 12) - 7];
  random.nextBytes(buf);
  ByteBuffer compressedBuffer=EncryptionUtils.compress(ByteBuffer.wrap(buf),ByteBuffer.allocate(0),true,compressor);
  CipherFactory cipherFactory=new CipherFactory(tdeOptions);
  Cipher encryptor=cipherFactory.getEncryptor(tdeOptions.cipher,tdeOptions.key_alias);
  File f=File.createTempFile("commitlog-enc-utils-",".tmp");
  f.deleteOnExit();
  FileChannel channel=new RandomAccessFile(f,"rw").getChannel();
  EncryptionUtils.encryptAndWrite(compressedBuffer,channel,true,encryptor);
  Cipher decryptor=cipherFactory.getDecryptor(tdeOptions.cipher,tdeOptions.key_alias,encryptor.getIV());
  ByteBuffer decryptedBuffer=EncryptionUtils.decrypt(RandomAccessReader.open(f),ByteBuffer.allocate(0),true,decryptor);
  ByteBuffer uncompressedBuffer=EncryptionUtils.uncompress(decryptedBuffer,ByteBuffer.allocate(0),true,compressor);
  Assert.assertArrayEquals(buf,uncompressedBuffer.array());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.security.JKSKeyProviderTest </h4><pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void getSecretKey_WithoutKeyPassword() throws IOException {
  tdeOptions.remove("key_password");
  Assert.assertNotNull(jksKeyProvider.getSecretKey(tdeOptions.key_alias));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.ActiveRepairServiceTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetNeighborsTimesTwoInLocalDC() throws Throwable {
  TokenMetadata tmd=StorageService.instance.getTokenMetadata();
  addTokens(2 * Keyspace.open(KEYSPACE5).getReplicationStrategy().getReplicationFactor());
  AbstractReplicationStrategy ars=Keyspace.open(KEYSPACE5).getReplicationStrategy();
  Set<InetAddress> expected=new HashSet<>();
  for (  Range<Token> replicaRange : ars.getAddressRanges().get(FBUtilities.getBroadcastAddress())) {
    expected.addAll(ars.getRangeAddresses(tmd.cloneOnlyTokenMap()).get(replicaRange));
  }
  expected.remove(FBUtilities.getBroadcastAddress());
  TokenMetadata.Topology topology=tmd.cloneOnlyTokenMap().getTopology();
  HashSet<InetAddress> localEndpoints=Sets.newHashSet(topology.getDatacenterEndpoints().get(DatabaseDescriptor.getLocalDataCenter()));
  expected=Sets.intersection(expected,localEndpoints);
  Collection<Range<Token>> ranges=StorageService.instance.getLocalRanges(KEYSPACE5);
  Set<InetAddress> neighbors=new HashSet<>();
  for (  Range<Token> range : ranges) {
    neighbors.addAll(ActiveRepairService.getNeighbors(KEYSPACE5,range,Arrays.asList(DatabaseDescriptor.getLocalDataCenter()),null));
  }
  assertEquals(expected,neighbors);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetNeighborsPlusOneInLocalDC() throws Throwable {
  TokenMetadata tmd=StorageService.instance.getTokenMetadata();
  Set<InetAddress> expected=addTokens(1 + Keyspace.open(KEYSPACE5).getReplicationStrategy().getReplicationFactor());
  expected.remove(FBUtilities.getBroadcastAddress());
  TokenMetadata.Topology topology=tmd.cloneOnlyTokenMap().getTopology();
  HashSet<InetAddress> localEndpoints=Sets.newHashSet(topology.getDatacenterEndpoints().get(DatabaseDescriptor.getLocalDataCenter()));
  expected=Sets.intersection(expected,localEndpoints);
  Collection<Range<Token>> ranges=StorageService.instance.getLocalRanges(KEYSPACE5);
  Set<InetAddress> neighbors=new HashSet<>();
  for (  Range<Token> range : ranges) {
    neighbors.addAll(ActiveRepairService.getNeighbors(KEYSPACE5,range,Arrays.asList(DatabaseDescriptor.getLocalDataCenter()),null));
  }
  assertEquals(expected,neighbors);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.ClientWarningsTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLargeBatchWithProtoV4() throws Exception {
  createTable("CREATE TABLE %s (pk int PRIMARY KEY, v text)");
  try (SimpleClient client=new SimpleClient(nativeAddr.getHostAddress(),nativePort,Server.VERSION_4)){
    client.connect(false);
    QueryMessage query=new QueryMessage(createBatchStatement(DatabaseDescriptor.getBatchSizeWarnThreshold()),QueryOptions.DEFAULT);
    Message.Response resp=client.execute(query);
    assertEquals(1,resp.getWarnings().size());
  }
 }

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTombstoneWarning() throws Exception {
  final int iterations=10000;
  createTable("CREATE TABLE %s (pk int, ck int, v int, PRIMARY KEY (pk, ck))");
  try (SimpleClient client=new SimpleClient(nativeAddr.getHostAddress(),nativePort,Server.VERSION_4)){
    client.connect(false);
    for (int i=0; i < iterations; i++) {
      QueryMessage query=new QueryMessage(String.format("INSERT INTO %s.%s (pk, ck, v) VALUES (1, %s, 1)",KEYSPACE,currentTable(),i),QueryOptions.DEFAULT);
      client.execute(query);
    }
    ColumnFamilyStore store=Keyspace.open(KEYSPACE).getColumnFamilyStore(currentTable());
    store.forceBlockingFlush();
    for (int i=0; i < iterations; i++) {
      QueryMessage query=new QueryMessage(String.format("DELETE v FROM %s.%s WHERE pk = 1 AND ck = %s",KEYSPACE,currentTable(),i),QueryOptions.DEFAULT);
      client.execute(query);
    }
    store.forceBlockingFlush();
{
      QueryMessage query=new QueryMessage(String.format("SELECT * FROM %s.%s WHERE pk = 1",KEYSPACE,currentTable()),QueryOptions.DEFAULT);
      Message.Response resp=client.execute(query);
      assertEquals(1,resp.getWarnings().size());
    }
  }
 }

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testLargeBatchWithProtoV2() throws Exception {
  createTable("CREATE TABLE %s (pk int PRIMARY KEY, v text)");
  try (SimpleClient client=new SimpleClient(nativeAddr.getHostAddress(),nativePort,Server.VERSION_3)){
    client.connect(false);
    QueryMessage query=new QueryMessage(createBatchStatement(DatabaseDescriptor.getBatchSizeWarnThreshold()),QueryOptions.DEFAULT);
    Message.Response resp=client.execute(query);
    assertNull(resp.getWarnings());
  }
 }

</code></pre>

<br>
<pre class="type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnloggedBatchWithProtoV4() throws Exception {
  createTable("CREATE TABLE %s (pk int PRIMARY KEY, v text)");
  try (SimpleClient client=new SimpleClient(nativeAddr.getHostAddress(),nativePort,Server.VERSION_4)){
    client.connect(false);
    QueryMessage query=new QueryMessage(createBatchStatement2(1),QueryOptions.DEFAULT);
    Message.Response resp=client.execute(query);
    assertNull(resp.getWarnings());
    query=new QueryMessage(createBatchStatement2(DatabaseDescriptor.getBatchSizeWarnThreshold()),QueryOptions.DEFAULT);
    resp=client.execute(query);
    assertEquals(1,resp.getWarnings().size());
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.DataResolverTest </h4><pre class="type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveDeletedCollection(){
  ReadCommand cmd=Util.cmd(cfs2,dk).withNowInSeconds(nowInSec).build();
  DataResolver resolver=new DataResolver(ks,cmd,ConsistencyLevel.ALL,2);
  long[] ts={100,200};
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSec);
  builder.newRow(Clustering.EMPTY);
  builder.addComplexDeletion(m,new DeletionTime(ts[0] - 1,nowInSec));
  builder.addCell(mapCell(0,0,ts[0]));
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  builder.newRow(Clustering.EMPTY);
  DeletionTime expectedCmplxDelete=new DeletionTime(ts[1] - 1,nowInSec);
  builder.addComplexDeletion(m,expectedCmplxDelete);
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  try (PartitionIterator data=resolver.resolve()){
    assertFalse(data.hasNext());
  }
   MessageOut<Mutation> msg;
  msg=getSentMessage(peer1);
  Iterator<Row> rowIter=msg.payload.getPartitionUpdate(cfm2.cfId).iterator();
  assertTrue(rowIter.hasNext());
  Row row=rowIter.next();
  assertFalse(rowIter.hasNext());
  ComplexColumnData cd=row.getComplexColumnData(m);
  assertEquals(Collections.emptySet(),Sets.newHashSet(cd));
  assertEquals(expectedCmplxDelete,cd.complexDeletion());
  Assert.assertNull(messageRecorder.sent.get(peer2));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveDeleted(){
  DataResolver resolver=new DataResolver(ks,command,ConsistencyLevel.ALL,2);
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(new RowUpdateBuilder(cfm,nowInSec,0L,dk).clustering("1").add("one","A").buildUpdate())));
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,fullPartitionDelete(cfm,dk,1,nowInSec)));
  try (PartitionIterator data=resolver.resolve()){
    assertFalse(data.hasNext());
  }
   assertEquals(1,messageRecorder.sent.size());
  MessageOut msg=getSentMessage(peer1);
  assertRepairMetadata(msg);
  assertRepairContainsDeletions(msg,new DeletionTime(1,nowInSec));
  assertRepairContainsNoColumns(msg);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testResolveWithBothEmpty(){
  DataResolver resolver=new DataResolver(ks,command,ConsistencyLevel.ALL,2);
  resolver.preprocess(readResponseMessage(peer(),EmptyIterators.unfilteredPartition(cfm,false)));
  resolver.preprocess(readResponseMessage(peer(),EmptyIterators.unfilteredPartition(cfm,false)));
  try (PartitionIterator data=resolver.resolve()){
    assertFalse(data.hasNext());
  }
   assertTrue(messageRecorder.sent.isEmpty());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveDisjointMultipleRowsWithRangeTombstones(){
  DataResolver resolver=new DataResolver(ks,command,ConsistencyLevel.ALL,4);
  RangeTombstone tombstone1=tombstone("1","11",1,nowInSec);
  RangeTombstone tombstone2=tombstone("3","31",1,nowInSec);
  PartitionUpdate update=new RowUpdateBuilder(cfm,nowInSec,1L,dk).addRangeTombstone(tombstone1).addRangeTombstone(tombstone2).buildUpdate();
  InetAddress peer1=peer();
  UnfilteredPartitionIterator iter1=iter(new RowUpdateBuilder(cfm,nowInSec,1L,dk).addRangeTombstone(tombstone1).addRangeTombstone(tombstone2).buildUpdate());
  resolver.preprocess(readResponseMessage(peer1,iter1));
  InetAddress peer2=peer();
  UnfilteredPartitionIterator iter2=iter(new RowUpdateBuilder(cfm,nowInSec,0L,dk).clustering("0").add("c1","v0").buildUpdate());
  resolver.preprocess(readResponseMessage(peer2,iter2));
  InetAddress peer3=peer();
  UnfilteredPartitionIterator iter3=iter(new RowUpdateBuilder(cfm,nowInSec,0L,dk).clustering("10").add("c2","v1").buildUpdate());
  resolver.preprocess(readResponseMessage(peer3,iter3));
  InetAddress peer4=peer();
  UnfilteredPartitionIterator iter4=iter(new RowUpdateBuilder(cfm,nowInSec,2L,dk).clustering("3").add("one","A").buildUpdate());
  resolver.preprocess(readResponseMessage(peer4,iter4));
  try (PartitionIterator data=resolver.resolve()){
    try (RowIterator rows=data.next()){
      Row row=rows.next();
      assertClustering(cfm,row,"0");
      assertColumns(row,"c1");
      assertColumn(cfm,row,"c1","v0",0);
      row=rows.next();
      assertClustering(cfm,row,"3");
      assertColumns(row,"one");
      assertColumn(cfm,row,"one","A",2);
      assertFalse(rows.hasNext());
    }
   }
   assertEquals(4,messageRecorder.sent.size());
  MessageOut msg=getSentMessage(peer1);
  assertRepairMetadata(msg);
  assertRepairContainsNoDeletions(msg);
  assertRepairContainsColumn(msg,"0","c1","v0",0);
  assertRepairContainsColumn(msg,"3","one","A",2);
  msg=getSentMessage(peer2);
  assertRepairMetadata(msg);
  assertRepairContainsDeletions(msg,null,tombstone1,tombstone2);
  assertRepairContainsColumn(msg,"3","one","A",2);
  msg=getSentMessage(peer3);
  assertRepairMetadata(msg);
  assertRepairContainsDeletions(msg,null,tombstone1,tombstone2);
  assertRepairContainsColumn(msg,"0","c1","v0",0);
  assertRepairContainsColumn(msg,"3","one","A",2);
  msg=getSentMessage(peer4);
  assertRepairMetadata(msg);
  assertRepairContainsDeletions(msg,null,tombstone1,tombstone2);
  assertRepairContainsColumn(msg,"0","c1","v0",0);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveNewCollectionOverwritingDeleted(){
  ReadCommand cmd=Util.cmd(cfs2,dk).withNowInSeconds(nowInSec).build();
  DataResolver resolver=new DataResolver(ks,cmd,ConsistencyLevel.ALL,2);
  long[] ts={100,200};
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSec);
  builder.newRow(Clustering.EMPTY);
  builder.addComplexDeletion(m,new DeletionTime(ts[0] - 1,nowInSec));
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  builder.newRow(Clustering.EMPTY);
  DeletionTime expectedCmplxDelete=new DeletionTime(ts[1] - 1,nowInSec);
  builder.addComplexDeletion(m,expectedCmplxDelete);
  Cell expectedCell=mapCell(1,1,ts[1]);
  builder.addCell(expectedCell);
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  try (PartitionIterator data=resolver.resolve();RowIterator rows=Iterators.getOnlyElement(data)){
    Row row=Iterators.getOnlyElement(rows);
    assertColumns(row,"m");
    ComplexColumnData cd=row.getComplexColumnData(m);
    assertEquals(Collections.singleton(expectedCell),Sets.newHashSet(cd));
  }
   MessageOut<Mutation> msg;
  msg=getSentMessage(peer1);
  Row row=Iterators.getOnlyElement(msg.payload.getPartitionUpdate(cfm2.cfId).iterator());
  ComplexColumnData cd=row.getComplexColumnData(m);
  assertEquals(Collections.singleton(expectedCell),Sets.newHashSet(cd));
  assertEquals(expectedCmplxDelete,cd.complexDeletion());
  Assert.assertNull(messageRecorder.sent.get(peer2));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveDisjointMultipleRows() throws UnknownHostException {
  DataResolver resolver=new DataResolver(ks,command,ConsistencyLevel.ALL,2);
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(new RowUpdateBuilder(cfm,nowInSec,0L,dk).clustering("1").add("c1","v1").buildUpdate())));
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(new RowUpdateBuilder(cfm,nowInSec,1L,dk).clustering("2").add("c2","v2").buildUpdate())));
  try (PartitionIterator data=resolver.resolve()){
    try (RowIterator rows=data.next()){
      Row row=rows.next();
      assertClustering(cfm,row,"1");
      assertColumns(row,"c1");
      assertColumn(cfm,row,"c1","v1",0);
      row=rows.next();
      assertClustering(cfm,row,"2");
      assertColumns(row,"c2");
      assertColumn(cfm,row,"c2","v2",1);
      assertFalse(rows.hasNext());
      assertFalse(data.hasNext());
    }
   }
   assertEquals(2,messageRecorder.sent.size());
  MessageOut msg=getSentMessage(peer1);
  assertRepairMetadata(msg);
  assertRepairContainsNoDeletions(msg);
  assertRepairContainsColumn(msg,"2","c2","v2",1);
  msg=getSentMessage(peer2);
  assertRepairMetadata(msg);
  assertRepairContainsNoDeletions(msg);
  assertRepairContainsColumn(msg,"1","c1","v1",0);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveNewCollection(){
  ReadCommand cmd=Util.cmd(cfs2,dk).withNowInSeconds(nowInSec).build();
  DataResolver resolver=new DataResolver(ks,cmd,ConsistencyLevel.ALL,2);
  long[] ts={100,200};
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSec);
  builder.newRow(Clustering.EMPTY);
  DeletionTime expectedCmplxDelete=new DeletionTime(ts[0] - 1,nowInSec);
  builder.addComplexDeletion(m,expectedCmplxDelete);
  Cell expectedCell=mapCell(0,0,ts[0]);
  builder.addCell(expectedCell);
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(PartitionUpdate.emptyUpdate(cfm2,dk))));
  try (PartitionIterator data=resolver.resolve();RowIterator rows=Iterators.getOnlyElement(data)){
    Row row=Iterators.getOnlyElement(rows);
    assertColumns(row,"m");
    ComplexColumnData cd=row.getComplexColumnData(m);
    assertEquals(Collections.singleton(expectedCell),Sets.newHashSet(cd));
  }
   Assert.assertNull(messageRecorder.sent.get(peer1));
  MessageOut<Mutation> msg;
  msg=getSentMessage(peer2);
  Iterator<Row> rowIter=msg.payload.getPartitionUpdate(cfm2.cfId).iterator();
  assertTrue(rowIter.hasNext());
  Row row=rowIter.next();
  assertFalse(rowIter.hasNext());
  ComplexColumnData cd=row.getComplexColumnData(m);
  assertEquals(Sets.newHashSet(expectedCell),Sets.newHashSet(cd));
  assertEquals(expectedCmplxDelete,cd.complexDeletion());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveComplexDelete(){
  ReadCommand cmd=Util.cmd(cfs2,dk).withNowInSeconds(nowInSec).build();
  DataResolver resolver=new DataResolver(ks,cmd,ConsistencyLevel.ALL,2);
  long[] ts={100,200};
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSec);
  builder.newRow(Clustering.EMPTY);
  builder.addComplexDeletion(m,new DeletionTime(ts[0] - 1,nowInSec));
  builder.addCell(mapCell(0,0,ts[0]));
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  builder.newRow(Clustering.EMPTY);
  DeletionTime expectedCmplxDelete=new DeletionTime(ts[1] - 1,nowInSec);
  builder.addComplexDeletion(m,expectedCmplxDelete);
  Cell expectedCell=mapCell(1,1,ts[1]);
  builder.addCell(expectedCell);
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  try (PartitionIterator data=resolver.resolve();RowIterator rows=Iterators.getOnlyElement(data)){
    Row row=Iterators.getOnlyElement(rows);
    assertColumns(row,"m");
    Assert.assertNull(row.getCell(m,CellPath.create(bb(0))));
    Assert.assertNotNull(row.getCell(m,CellPath.create(bb(1))));
  }
   MessageOut<Mutation> msg;
  msg=getSentMessage(peer1);
  Iterator<Row> rowIter=msg.payload.getPartitionUpdate(cfm2.cfId).iterator();
  assertTrue(rowIter.hasNext());
  Row row=rowIter.next();
  assertFalse(rowIter.hasNext());
  ComplexColumnData cd=row.getComplexColumnData(m);
  assertEquals(Collections.singleton(expectedCell),Sets.newHashSet(cd));
  assertEquals(expectedCmplxDelete,cd.complexDeletion());
  Assert.assertNull(messageRecorder.sent.get(peer2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.EmbeddedCassandraServiceTest </h4><pre class="type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmbeddedCassandraService() throws AuthenticationException, AuthorizationException, InvalidRequestException, UnavailableException, TimedOutException, TException, NotFoundException, CharacterCodingException {
  Cassandra.Client client=getClient();
  client.set_keyspace(KEYSPACE1);
  ByteBuffer key_user_id=ByteBufferUtil.bytes("1");
  long timestamp=System.currentTimeMillis();
  ColumnPath cp=new ColumnPath("Standard1");
  ColumnParent par=new ColumnParent("Standard1");
  cp.column=ByteBufferUtil.bytes("name");
  client.insert(key_user_id,par,new Column(ByteBufferUtil.bytes("name")).setValue(ByteBufferUtil.bytes("Ran")).setTimestamp(timestamp),ConsistencyLevel.ONE);
  ColumnOrSuperColumn got=client.get(key_user_id,cp,ConsistencyLevel.ONE);
  assertNotNull("Got a null ColumnOrSuperColumn",got);
  assertEquals("Ran",ByteBufferUtil.string(got.getColumn().value));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.LeaveAndBootstrapTest </h4><pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStateJumpToNormal() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  TokenMetadata tmd=ss.getTokenMetadata();
  tmd.clearUnsafe();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,6);
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(endpointTokens.get(2))));
  assertTrue(tmd.isLeaving(hosts.get(2)));
  assertEquals(endpointTokens.get(2),tmd.getToken(hosts.get(2)));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(2))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(keyTokens.get(2))));
  assertTrue(tmd.getLeavingEndpoints().isEmpty());
  assertEquals(keyTokens.get(2),tmd.getToken(hosts.get(2)));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(keyTokens.get(2))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.left(Collections.singleton(keyTokens.get(2)),Gossiper.computeExpireTime()));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(4))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(keyTokens.get(4))));
  assertTrue(tmd.getBootstrapTokens().isEmpty());
  assertTrue(tmd.getLeavingEndpoints().isEmpty());
  assertEquals(keyTokens.get(4),tmd.getToken(hosts.get(2)));
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test pending ranges and write endpoints when multiple nodes are on the move
 * simultaneously
 */
@Test public void testSimultaneousMove() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  final int RING_SIZE=10;
  TokenMetadata tmd=ss.getTokenMetadata();
  tmd.clearUnsafe();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,RING_SIZE);
  final int[] LEAVING=new int[]{6,8,9};
  for (  int leaving : LEAVING)   ss.onChange(hosts.get(leaving),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(endpointTokens.get(leaving))));
  InetAddress boot1=InetAddress.getByName("127.0.1.1");
  Gossiper.instance.initializeNodeUnsafe(boot1,UUID.randomUUID(),1);
  Gossiper.instance.injectApplicationState(boot1,ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(5))));
  ss.onChange(boot1,ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(5))));
  InetAddress boot2=InetAddress.getByName("127.0.1.2");
  Gossiper.instance.initializeNodeUnsafe(boot2,UUID.randomUUID(),1);
  Gossiper.instance.injectApplicationState(boot2,ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(7))));
  ss.onChange(boot2,ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(7))));
  Collection<InetAddress> endpoints=null;
  Map<String,AbstractReplicationStrategy> keyspaceStrategyMap=new HashMap<String,AbstractReplicationStrategy>();
  for (int i=1; i <= 4; i++) {
    keyspaceStrategyMap.put("LeaveAndBootstrapTestKeyspace" + i,getStrategy("LeaveAndBootstrapTestKeyspace" + i,tmd));
  }
  Map<String,Multimap<Token,InetAddress>> expectedEndpoints=new HashMap<String,Multimap<Token,InetAddress>>();
  expectedEndpoints.put(KEYSPACE1,HashMultimap.<Token,InetAddress>create());
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("5"),makeAddrs("127.0.0.2"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("15"),makeAddrs("127.0.0.3"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("25"),makeAddrs("127.0.0.4"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("35"),makeAddrs("127.0.0.5"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("45"),makeAddrs("127.0.0.6"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("55"),makeAddrs("127.0.0.7","127.0.0.8","127.0.1.1"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("65"),makeAddrs("127.0.0.8"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("75"),makeAddrs("127.0.0.9","127.0.1.2","127.0.0.1"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("85"),makeAddrs("127.0.0.10","127.0.0.1"));
  expectedEndpoints.get(KEYSPACE1).putAll(new BigIntegerToken("95"),makeAddrs("127.0.0.1"));
  expectedEndpoints.put(KEYSPACE2,HashMultimap.<Token,InetAddress>create());
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("5"),makeAddrs("127.0.0.2"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("15"),makeAddrs("127.0.0.3"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("25"),makeAddrs("127.0.0.4"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("35"),makeAddrs("127.0.0.5"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("45"),makeAddrs("127.0.0.6"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("55"),makeAddrs("127.0.0.7","127.0.0.8","127.0.1.1"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("65"),makeAddrs("127.0.0.8"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("75"),makeAddrs("127.0.0.9","127.0.1.2","127.0.0.1"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("85"),makeAddrs("127.0.0.10","127.0.0.1"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("95"),makeAddrs("127.0.0.1"));
  expectedEndpoints.put(KEYSPACE3,HashMultimap.<Token,InetAddress>create());
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("5"),makeAddrs("127.0.0.2","127.0.0.3","127.0.0.4","127.0.0.5","127.0.0.6"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("15"),makeAddrs("127.0.0.3","127.0.0.4","127.0.0.5","127.0.0.6","127.0.0.7","127.0.1.1","127.0.0.8"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("25"),makeAddrs("127.0.0.4","127.0.0.5","127.0.0.6","127.0.0.7","127.0.0.8","127.0.1.2","127.0.0.1","127.0.1.1"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("35"),makeAddrs("127.0.0.5","127.0.0.6","127.0.0.7","127.0.0.8","127.0.0.9","127.0.1.2","127.0.0.1","127.0.0.2","127.0.1.1"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("45"),makeAddrs("127.0.0.6","127.0.0.7","127.0.0.8","127.0.0.9","127.0.0.10","127.0.1.2","127.0.0.1","127.0.0.2","127.0.1.1","127.0.0.3"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("55"),makeAddrs("127.0.0.7","127.0.0.8","127.0.0.9","127.0.0.10","127.0.0.1","127.0.0.2","127.0.0.3","127.0.0.4","127.0.1.1","127.0.1.2"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("65"),makeAddrs("127.0.0.8","127.0.0.9","127.0.0.10","127.0.0.1","127.0.0.2","127.0.1.2","127.0.0.3","127.0.0.4"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("75"),makeAddrs("127.0.0.9","127.0.0.10","127.0.0.1","127.0.0.2","127.0.0.3","127.0.1.2","127.0.0.4","127.0.0.5"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("85"),makeAddrs("127.0.0.10","127.0.0.1","127.0.0.2","127.0.0.3","127.0.0.4","127.0.0.5"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("95"),makeAddrs("127.0.0.1","127.0.0.2","127.0.0.3","127.0.0.4","127.0.0.5"));
  expectedEndpoints.put(KEYSPACE4,HashMultimap.<Token,InetAddress>create());
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("5"),makeAddrs("127.0.0.2","127.0.0.3","127.0.0.4"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("15"),makeAddrs("127.0.0.3","127.0.0.4","127.0.0.5"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("25"),makeAddrs("127.0.0.4","127.0.0.5","127.0.0.6"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("35"),makeAddrs("127.0.0.5","127.0.0.6","127.0.0.7","127.0.1.1","127.0.0.8"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("45"),makeAddrs("127.0.0.6","127.0.0.7","127.0.0.8","127.0.1.2","127.0.0.1","127.0.1.1"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("55"),makeAddrs("127.0.0.7","127.0.0.8","127.0.0.9","127.0.0.1","127.0.0.2","127.0.1.1","127.0.1.2"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("65"),makeAddrs("127.0.0.8","127.0.0.9","127.0.0.10","127.0.1.2","127.0.0.1","127.0.0.2"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("75"),makeAddrs("127.0.0.9","127.0.0.10","127.0.0.1","127.0.1.2","127.0.0.2","127.0.0.3"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("85"),makeAddrs("127.0.0.10","127.0.0.1","127.0.0.2","127.0.0.3"));
  expectedEndpoints.get(KEYSPACE4).putAll(new BigIntegerToken("95"),makeAddrs("127.0.0.1","127.0.0.2","127.0.0.3"));
  PendingRangeCalculatorService.instance.blockUntilFinished();
  for (  Map.Entry<String,AbstractReplicationStrategy> keyspaceStrategy : keyspaceStrategyMap.entrySet()) {
    String keyspaceName=keyspaceStrategy.getKey();
    AbstractReplicationStrategy strategy=keyspaceStrategy.getValue();
    for (int i=0; i < keyTokens.size(); i++) {
      endpoints=tmd.getWriteEndpoints(keyTokens.get(i),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(i)));
      assertEquals(expectedEndpoints.get(keyspaceName).get(keyTokens.get(i)).size(),endpoints.size());
      assertTrue(expectedEndpoints.get(keyspaceName).get(keyTokens.get(i)).containsAll(endpoints));
    }
    if (strategy.getReplicationFactor() != 3)     continue;
    for (int i=0; i < 3; ++i) {
      endpoints=tmd.getWriteEndpoints(keyTokens.get(i),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(i)));
      assertEquals(3,endpoints.size());
      assertTrue(endpoints.contains(hosts.get(i + 1)));
      assertTrue(endpoints.contains(hosts.get(i + 2)));
      assertTrue(endpoints.contains(hosts.get(i + 3)));
    }
    endpoints=tmd.getWriteEndpoints(keyTokens.get(3),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(3)));
    assertEquals(5,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(4)));
    assertTrue(endpoints.contains(hosts.get(5)));
    assertTrue(endpoints.contains(hosts.get(6)));
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(boot1));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(4),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(4)));
    assertEquals(6,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(5)));
    assertTrue(endpoints.contains(hosts.get(6)));
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(boot1));
    assertTrue(endpoints.contains(boot2));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(5),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(5)));
    assertEquals(7,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(6)));
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    assertTrue(endpoints.contains(boot1));
    assertTrue(endpoints.contains(boot2));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(6),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(6)));
    assertEquals(6,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(hosts.get(9)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    assertTrue(endpoints.contains(boot2));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(7),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(7)));
    assertEquals(6,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(hosts.get(9)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    assertTrue(endpoints.contains(hosts.get(2)));
    assertTrue(endpoints.contains(boot2));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(8),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(8)));
    assertEquals(4,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(9)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    assertTrue(endpoints.contains(hosts.get(2)));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(9),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(9)));
    assertEquals(3,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    assertTrue(endpoints.contains(hosts.get(2)));
  }
  ss.onChange(hosts.get(LEAVING[0]),ApplicationState.STATUS,valueFactory.left(Collections.singleton(endpointTokens.get(LEAVING[0])),Gossiper.computeExpireTime()));
  ss.onChange(hosts.get(LEAVING[2]),ApplicationState.STATUS,valueFactory.left(Collections.singleton(endpointTokens.get(LEAVING[2])),Gossiper.computeExpireTime()));
  ss.onChange(boot1,ApplicationState.STATUS,valueFactory.normal(Collections.singleton(keyTokens.get(5))));
  expectedEndpoints.get(KEYSPACE1).get(new BigIntegerToken("55")).removeAll(makeAddrs("127.0.0.7","127.0.0.8"));
  expectedEndpoints.get(KEYSPACE1).get(new BigIntegerToken("85")).removeAll(makeAddrs("127.0.0.10"));
  expectedEndpoints.get(KEYSPACE2).get(new BigIntegerToken("55")).removeAll(makeAddrs("127.0.0.7","127.0.0.8"));
  expectedEndpoints.get(KEYSPACE2).get(new BigIntegerToken("85")).removeAll(makeAddrs("127.0.0.10"));
  expectedEndpoints.get(KEYSPACE3).get(new BigIntegerToken("15")).removeAll(makeAddrs("127.0.0.7","127.0.0.8"));
  expectedEndpoints.get(KEYSPACE3).get(new BigIntegerToken("25")).removeAll(makeAddrs("127.0.0.7","127.0.1.2","127.0.0.1"));
  expectedEndpoints.get(KEYSPACE3).get(new BigIntegerToken("35")).removeAll(makeAddrs("127.0.0.7","127.0.0.2"));
  expectedEndpoints.get(KEYSPACE3).get(new BigIntegerToken("45")).removeAll(makeAddrs("127.0.0.7","127.0.0.10","127.0.0.3"));
  expectedEndpoints.get(KEYSPACE3).get(new BigIntegerToken("55")).removeAll(makeAddrs("127.0.0.7","127.0.0.10","127.0.0.4"));
  expectedEndpoints.get(KEYSPACE3).get(new BigIntegerToken("65")).removeAll(makeAddrs("127.0.0.10"));
  expectedEndpoints.get(KEYSPACE3).get(new BigIntegerToken("75")).removeAll(makeAddrs("127.0.0.10"));
  expectedEndpoints.get(KEYSPACE3).get(new BigIntegerToken("85")).removeAll(makeAddrs("127.0.0.10"));
  expectedEndpoints.get(KEYSPACE4).get(new BigIntegerToken("35")).removeAll(makeAddrs("127.0.0.7","127.0.0.8"));
  expectedEndpoints.get(KEYSPACE4).get(new BigIntegerToken("45")).removeAll(makeAddrs("127.0.0.7","127.0.1.2","127.0.0.1"));
  expectedEndpoints.get(KEYSPACE4).get(new BigIntegerToken("55")).removeAll(makeAddrs("127.0.0.2","127.0.0.7"));
  expectedEndpoints.get(KEYSPACE4).get(new BigIntegerToken("65")).removeAll(makeAddrs("127.0.0.10"));
  expectedEndpoints.get(KEYSPACE4).get(new BigIntegerToken("75")).removeAll(makeAddrs("127.0.0.10"));
  expectedEndpoints.get(KEYSPACE4).get(new BigIntegerToken("85")).removeAll(makeAddrs("127.0.0.10"));
  PendingRangeCalculatorService.instance.blockUntilFinished();
  for (  Map.Entry<String,AbstractReplicationStrategy> keyspaceStrategy : keyspaceStrategyMap.entrySet()) {
    String keyspaceName=keyspaceStrategy.getKey();
    AbstractReplicationStrategy strategy=keyspaceStrategy.getValue();
    for (int i=0; i < keyTokens.size(); i++) {
      endpoints=tmd.getWriteEndpoints(keyTokens.get(i),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(i)));
      assertEquals(expectedEndpoints.get(keyspaceName).get(keyTokens.get(i)).size(),endpoints.size());
      assertTrue(expectedEndpoints.get(keyspaceName).get(keyTokens.get(i)).containsAll(endpoints));
    }
    if (strategy.getReplicationFactor() != 3)     continue;
    for (int i=0; i < 3; ++i) {
      endpoints=tmd.getWriteEndpoints(keyTokens.get(i),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(i)));
      assertEquals(3,endpoints.size());
      assertTrue(endpoints.contains(hosts.get(i + 1)));
      assertTrue(endpoints.contains(hosts.get(i + 2)));
      assertTrue(endpoints.contains(hosts.get(i + 3)));
    }
    endpoints=tmd.getWriteEndpoints(keyTokens.get(3),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(3)));
    assertEquals(3,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(4)));
    assertTrue(endpoints.contains(hosts.get(5)));
    assertTrue(endpoints.contains(boot1));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(4),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(4)));
    assertEquals(3,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(5)));
    assertTrue(endpoints.contains(boot1));
    assertTrue(endpoints.contains(hosts.get(7)));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(5),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(5)));
    assertEquals(5,endpoints.size());
    assertTrue(endpoints.contains(boot1));
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(boot2));
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(hosts.get(0)));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(6),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(6)));
    assertEquals(5,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(boot2));
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(7),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(7)));
    assertEquals(5,endpoints.size());
    assertTrue(endpoints.contains(boot2));
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    assertTrue(endpoints.contains(hosts.get(2)));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(8),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(8)));
    assertEquals(3,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    assertTrue(endpoints.contains(hosts.get(2)));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(9),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(9)));
    assertEquals(3,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
    assertTrue(endpoints.contains(hosts.get(2)));
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStateJumpToLeft() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  TokenMetadata tmd=ss.getTokenMetadata();
  tmd.clearUnsafe();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,7);
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.left(Collections.singleton(endpointTokens.get(2)),Gossiper.computeExpireTime()));
  assertFalse(tmd.isMember(hosts.get(2)));
  Gossiper.instance.injectApplicationState(hosts.get(3),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(1))));
  ss.onChange(hosts.get(3),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(1))));
  assertFalse(tmd.isMember(hosts.get(3)));
  assertEquals(1,tmd.getBootstrapTokens().size());
  assertEquals(hosts.get(3),tmd.getBootstrapTokens().get(keyTokens.get(1)));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(1))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.left(Collections.singleton(keyTokens.get(1)),Gossiper.computeExpireTime()));
  assertTrue(tmd.getBootstrapTokens().size() == 0);
  assertFalse(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test whether write endpoints is correct when the node is leaving. Uses
 * StorageService.onChange and does not manipulate token metadata directly.
 */
@Test public void newTestWriteEndpointsDuringLeave() throws Exception {
  StorageService ss=StorageService.instance;
  final int RING_SIZE=6;
  final int LEAVING_NODE=3;
  TokenMetadata tmd=ss.getTokenMetadata();
  tmd.clearUnsafe();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,RING_SIZE);
  Map<Token,List<InetAddress>> expectedEndpoints=new HashMap<Token,List<InetAddress>>();
  for (  String keyspaceName : Schema.instance.getNonSystemKeyspaces()) {
    for (    Token token : keyTokens) {
      List<InetAddress> endpoints=new ArrayList<InetAddress>();
      Iterator<Token> tokenIter=TokenMetadata.ringIterator(tmd.sortedTokens(),token,false);
      while (tokenIter.hasNext()) {
        endpoints.add(tmd.getEndpoint(tokenIter.next()));
      }
      expectedEndpoints.put(token,endpoints);
    }
  }
  ss.onChange(hosts.get(LEAVING_NODE),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(endpointTokens.get(LEAVING_NODE))));
  assertTrue(tmd.isLeaving(hosts.get(LEAVING_NODE)));
  Thread.sleep(100);
  PendingRangeCalculatorService.instance.blockUntilFinished();
  AbstractReplicationStrategy strategy;
  for (  String keyspaceName : Schema.instance.getNonSystemKeyspaces()) {
    strategy=getStrategy(keyspaceName,tmd);
    for (    Token token : keyTokens) {
      int replicationFactor=strategy.getReplicationFactor();
      HashSet<InetAddress> actual=new HashSet<InetAddress>(tmd.getWriteEndpoints(token,keyspaceName,strategy.calculateNaturalEndpoints(token,tmd.cloneOnlyTokenMap())));
      HashSet<InetAddress> expected=new HashSet<InetAddress>();
      for (int i=0; i < replicationFactor; i++) {
        expected.add(expectedEndpoints.get(token).get(i));
      }
      if (expected.contains(hosts.get(LEAVING_NODE)))       expected.add(expectedEndpoints.get(token).get(replicationFactor));
      assertEquals("mismatched endpoint sets",expected,actual);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStateJumpToBootstrap() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  TokenMetadata tmd=ss.getTokenMetadata();
  tmd.clearUnsafe();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,7);
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(endpointTokens.get(2))));
  assertTrue(tmd.isMember(hosts.get(2)));
  assertTrue(tmd.isLeaving(hosts.get(2)));
  assertTrue(tmd.getBootstrapTokens().isEmpty());
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(4))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(4))));
  assertFalse(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
  assertEquals(hosts.get(2),tmd.getBootstrapTokens().get(keyTokens.get(4)));
  Gossiper.instance.injectApplicationState(hosts.get(3),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(1))));
  ss.onChange(hosts.get(3),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(1))));
  assertFalse(tmd.isMember(hosts.get(3)));
  assertFalse(tmd.isLeaving(hosts.get(3)));
  assertEquals(hosts.get(2),tmd.getBootstrapTokens().get(keyTokens.get(4)));
  assertEquals(hosts.get(3),tmd.getBootstrapTokens().get(keyTokens.get(1)));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(3))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(3))));
  assertFalse(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
  assertEquals(hosts.get(2),tmd.getBootstrapTokens().get(keyTokens.get(3)));
  assertNull(tmd.getBootstrapTokens().get(keyTokens.get(4)));
  assertEquals(hosts.get(3),tmd.getBootstrapTokens().get(keyTokens.get(1)));
  Gossiper.instance.injectApplicationState(hosts.get(3),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(2))));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(3))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(keyTokens.get(3))));
  ss.onChange(hosts.get(3),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(keyTokens.get(2))));
  assertTrue(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
  assertEquals(keyTokens.get(3),tmd.getToken(hosts.get(2)));
  assertTrue(tmd.isMember(hosts.get(3)));
  assertFalse(tmd.isLeaving(hosts.get(3)));
  assertEquals(keyTokens.get(2),tmd.getToken(hosts.get(3)));
  assertTrue(tmd.getBootstrapTokens().isEmpty());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStateJumpToLeaving() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  TokenMetadata tmd=ss.getTokenMetadata();
  tmd.clearUnsafe();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,6);
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(0))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(keyTokens.get(0))));
  assertEquals(keyTokens.get(0),tmd.getToken(hosts.get(2)));
  assertTrue(tmd.isLeaving(hosts.get(2)));
  assertNull(tmd.getEndpoint(endpointTokens.get(2)));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(1))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(1))));
  assertFalse(tmd.isLeaving(hosts.get(2)));
  assertEquals(1,tmd.getBootstrapTokens().size());
  assertEquals(hosts.get(2),tmd.getBootstrapTokens().get(keyTokens.get(1)));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(keyTokens.get(1))));
  assertEquals(hosts.get(2),tmd.getEndpoint(keyTokens.get(1)));
  assertTrue(tmd.isLeaving(hosts.get(2)));
  assertTrue(tmd.getBootstrapTokens().isEmpty());
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.left(Collections.singleton(keyTokens.get(1)),Gossiper.computeExpireTime()));
  assertFalse(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.MoveTest </h4><pre class="type-7 type-13 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void newTestWriteEndpointsDuringMove() throws Exception {
  StorageService ss=StorageService.instance;
  final int RING_SIZE=10;
  final int MOVING_NODE=3;
  TokenMetadata tmd=ss.getTokenMetadata();
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,RING_SIZE);
  Map<Token,List<InetAddress>> expectedEndpoints=new HashMap<Token,List<InetAddress>>();
  for (  Token token : keyTokens) {
    List<InetAddress> endpoints=new ArrayList<InetAddress>();
    Iterator<Token> tokenIter=TokenMetadata.ringIterator(tmd.sortedTokens(),token,false);
    while (tokenIter.hasNext()) {
      endpoints.add(tmd.getEndpoint(tokenIter.next()));
    }
    expectedEndpoints.put(token,endpoints);
  }
  Token newToken=positionToken(MOVING_NODE);
  ss.onChange(hosts.get(MOVING_NODE),ApplicationState.STATUS,valueFactory.moving(newToken));
  PendingRangeCalculatorService.instance.blockUntilFinished();
  assertTrue(tmd.isMoving(hosts.get(MOVING_NODE)));
  AbstractReplicationStrategy strategy;
  for (  String keyspaceName : Schema.instance.getNonSystemKeyspaces()) {
    strategy=getStrategy(keyspaceName,tmd);
    if (strategy instanceof NetworkTopologyStrategy)     continue;
    int numMoved=0;
    for (    Token token : keyTokens) {
      int replicationFactor=strategy.getReplicationFactor();
      HashSet<InetAddress> actual=new HashSet<InetAddress>(tmd.getWriteEndpoints(token,keyspaceName,strategy.calculateNaturalEndpoints(token,tmd.cloneOnlyTokenMap())));
      HashSet<InetAddress> expected=new HashSet<InetAddress>();
      for (int i=0; i < replicationFactor; i++) {
        expected.add(expectedEndpoints.get(token).get(i));
      }
      if (expected.size() == actual.size()) {
        assertEquals("mismatched endpoint sets",expected,actual);
      }
 else {
        expected.add(hosts.get(MOVING_NODE));
        assertEquals("mismatched endpoint sets",expected,actual);
        numMoved++;
      }
    }
    assertEquals("mismatched number of moved token",1,numMoved);
  }
  ss.onChange(hosts.get(MOVING_NODE),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(newToken)));
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimultaneousMove() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  final int RING_SIZE=10;
  TokenMetadata tmd=ss.getTokenMetadata();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,RING_SIZE);
  final int[] MOVING=new int[]{6,8,9};
  Map<Integer,Token> newTokens=new HashMap<Integer,Token>();
  for (  int movingIndex : MOVING) {
    Token newToken=positionToken(movingIndex);
    ss.onChange(hosts.get(movingIndex),ApplicationState.STATUS,valueFactory.moving(newToken));
    newTokens.put(movingIndex,newToken);
  }
  Collection<InetAddress> endpoints;
  tmd=tmd.cloneAfterAllSettled();
  ss.setTokenMetadataUnsafe(tmd);
  InetAddress boot1=InetAddress.getByName("127.0.1.1");
  Gossiper.instance.initializeNodeUnsafe(boot1,UUID.randomUUID(),1);
  Gossiper.instance.injectApplicationState(boot1,ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(5))));
  ss.onChange(boot1,ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(5))));
  PendingRangeCalculatorService.instance.blockUntilFinished();
  InetAddress boot2=InetAddress.getByName("127.0.1.2");
  Gossiper.instance.initializeNodeUnsafe(boot2,UUID.randomUUID(),1);
  Gossiper.instance.injectApplicationState(boot2,ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(7))));
  ss.onChange(boot2,ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(7))));
  PendingRangeCalculatorService.instance.blockUntilFinished();
  Map<String,AbstractReplicationStrategy> keyspaceStrategyMap=new HashMap<String,AbstractReplicationStrategy>();
  for (int i=1; i <= 4; i++) {
    keyspaceStrategyMap.put("MoveTestKeyspace" + i,getStrategy("MoveTestKeyspace" + i,tmd));
  }
  Multimap<InetAddress,Range<Token>> keyspace1ranges=keyspaceStrategyMap.get(Simple_RF1_KeyspaceName).getAddressRanges();
  Collection<Range<Token>> ranges1=keyspace1ranges.get(InetAddress.getByName("127.0.0.1"));
  assertEquals(1,collectionSize(ranges1));
  assertEquals(generateRange(97,0),ranges1.iterator().next());
  Collection<Range<Token>> ranges2=keyspace1ranges.get(InetAddress.getByName("127.0.0.2"));
  assertEquals(1,collectionSize(ranges2));
  assertEquals(generateRange(0,10),ranges2.iterator().next());
  Collection<Range<Token>> ranges3=keyspace1ranges.get(InetAddress.getByName("127.0.0.3"));
  assertEquals(1,collectionSize(ranges3));
  assertEquals(generateRange(10,20),ranges3.iterator().next());
  Collection<Range<Token>> ranges4=keyspace1ranges.get(InetAddress.getByName("127.0.0.4"));
  assertEquals(1,collectionSize(ranges4));
  assertEquals(generateRange(20,30),ranges4.iterator().next());
  Collection<Range<Token>> ranges5=keyspace1ranges.get(InetAddress.getByName("127.0.0.5"));
  assertEquals(1,collectionSize(ranges5));
  assertEquals(generateRange(30,40),ranges5.iterator().next());
  Collection<Range<Token>> ranges6=keyspace1ranges.get(InetAddress.getByName("127.0.0.6"));
  assertEquals(1,collectionSize(ranges6));
  assertEquals(generateRange(40,50),ranges6.iterator().next());
  Collection<Range<Token>> ranges7=keyspace1ranges.get(InetAddress.getByName("127.0.0.7"));
  assertEquals(1,collectionSize(ranges7));
  assertEquals(generateRange(50,67),ranges7.iterator().next());
  Collection<Range<Token>> ranges8=keyspace1ranges.get(InetAddress.getByName("127.0.0.8"));
  assertEquals(1,collectionSize(ranges8));
  assertEquals(generateRange(67,70),ranges8.iterator().next());
  Collection<Range<Token>> ranges9=keyspace1ranges.get(InetAddress.getByName("127.0.0.9"));
  assertEquals(1,collectionSize(ranges9));
  assertEquals(generateRange(70,87),ranges9.iterator().next());
  Collection<Range<Token>> ranges10=keyspace1ranges.get(InetAddress.getByName("127.0.0.10"));
  assertEquals(1,collectionSize(ranges10));
  assertEquals(generateRange(87,97),ranges10.iterator().next());
  Multimap<InetAddress,Range<Token>> keyspace3ranges=keyspaceStrategyMap.get(KEYSPACE3).getAddressRanges();
  ranges1=keyspace3ranges.get(InetAddress.getByName("127.0.0.1"));
  assertEquals(collectionSize(ranges1),5);
  assertTrue(ranges1.equals(generateRanges(97,0,70,87,50,67,87,97,67,70)));
  ranges2=keyspace3ranges.get(InetAddress.getByName("127.0.0.2"));
  assertEquals(collectionSize(ranges2),5);
  assertTrue(ranges2.equals(generateRanges(97,0,70,87,87,97,0,10,67,70)));
  ranges3=keyspace3ranges.get(InetAddress.getByName("127.0.0.3"));
  assertEquals(collectionSize(ranges3),5);
  assertTrue(ranges3.equals(generateRanges(97,0,70,87,87,97,0,10,10,20)));
  ranges4=keyspace3ranges.get(InetAddress.getByName("127.0.0.4"));
  assertEquals(collectionSize(ranges4),5);
  assertTrue(ranges4.equals(generateRanges(97,0,20,30,87,97,0,10,10,20)));
  ranges5=keyspace3ranges.get(InetAddress.getByName("127.0.0.5"));
  assertEquals(collectionSize(ranges5),5);
  assertTrue(ranges5.equals(generateRanges(97,0,30,40,20,30,0,10,10,20)));
  ranges6=keyspace3ranges.get(InetAddress.getByName("127.0.0.6"));
  assertEquals(collectionSize(ranges6),5);
  assertTrue(ranges6.equals(generateRanges(40,50,30,40,20,30,0,10,10,20)));
  ranges7=keyspace3ranges.get(InetAddress.getByName("127.0.0.7"));
  assertEquals(collectionSize(ranges7),5);
  assertTrue(ranges7.equals(generateRanges(40,50,30,40,50,67,20,30,10,20)));
  ranges8=keyspace3ranges.get(InetAddress.getByName("127.0.0.8"));
  assertEquals(collectionSize(ranges8),5);
  assertTrue(ranges8.equals(generateRanges(40,50,30,40,50,67,20,30,67,70)));
  ranges9=keyspace3ranges.get(InetAddress.getByName("127.0.0.9"));
  assertEquals(collectionSize(ranges9),5);
  assertTrue(ranges9.equals(generateRanges(40,50,70,87,30,40,50,67,67,70)));
  ranges10=keyspace3ranges.get(InetAddress.getByName("127.0.0.10"));
  assertEquals(collectionSize(ranges10),5);
  assertTrue(ranges10.equals(generateRanges(40,50,70,87,50,67,87,97,67,70)));
  Multimap<InetAddress,Range<Token>> keyspace4ranges=keyspaceStrategyMap.get(Simple_RF3_KeyspaceName).getAddressRanges();
  ranges1=keyspace4ranges.get(InetAddress.getByName("127.0.0.1"));
  assertEquals(collectionSize(ranges1),3);
  assertTrue(ranges1.equals(generateRanges(97,0,70,87,87,97)));
  ranges2=keyspace4ranges.get(InetAddress.getByName("127.0.0.2"));
  assertEquals(collectionSize(ranges2),3);
  assertTrue(ranges2.equals(generateRanges(97,0,87,97,0,10)));
  ranges3=keyspace4ranges.get(InetAddress.getByName("127.0.0.3"));
  assertEquals(collectionSize(ranges3),3);
  assertTrue(ranges3.equals(generateRanges(97,0,0,10,10,20)));
  ranges4=keyspace4ranges.get(InetAddress.getByName("127.0.0.4"));
  assertEquals(collectionSize(ranges4),3);
  assertTrue(ranges4.equals(generateRanges(20,30,0,10,10,20)));
  ranges5=keyspace4ranges.get(InetAddress.getByName("127.0.0.5"));
  assertEquals(collectionSize(ranges5),3);
  assertTrue(ranges5.equals(generateRanges(30,40,20,30,10,20)));
  ranges6=keyspace4ranges.get(InetAddress.getByName("127.0.0.6"));
  assertEquals(collectionSize(ranges6),3);
  assertTrue(ranges6.equals(generateRanges(40,50,30,40,20,30)));
  ranges7=keyspace4ranges.get(InetAddress.getByName("127.0.0.7"));
  assertEquals(collectionSize(ranges7),3);
  assertTrue(ranges7.equals(generateRanges(40,50,30,40,50,67)));
  ranges8=keyspace4ranges.get(InetAddress.getByName("127.0.0.8"));
  assertEquals(collectionSize(ranges8),3);
  assertTrue(ranges8.equals(generateRanges(40,50,50,67,67,70)));
  ranges9=keyspace4ranges.get(InetAddress.getByName("127.0.0.9"));
  assertEquals(collectionSize(ranges9),3);
  assertTrue(ranges9.equals(generateRanges(70,87,50,67,67,70)));
  ranges10=keyspace4ranges.get(InetAddress.getByName("127.0.0.10"));
  assertEquals(collectionSize(ranges10),3);
  assertTrue(ranges10.equals(generateRanges(70,87,87,97,67,70)));
  Map<String,Multimap<Token,InetAddress>> expectedEndpoints=new HashMap<String,Multimap<Token,InetAddress>>();
  expectedEndpoints.put(Simple_RF1_KeyspaceName,HashMultimap.<Token,InetAddress>create());
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("5"),makeAddrs("127.0.0.2"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("15"),makeAddrs("127.0.0.3"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("25"),makeAddrs("127.0.0.4"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("35"),makeAddrs("127.0.0.5"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("45"),makeAddrs("127.0.0.6"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("55"),makeAddrs("127.0.0.7","127.0.1.1"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("65"),makeAddrs("127.0.0.7"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("75"),makeAddrs("127.0.0.9","127.0.1.2"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("85"),makeAddrs("127.0.0.9"));
  expectedEndpoints.get(Simple_RF1_KeyspaceName).putAll(new BigIntegerToken("95"),makeAddrs("127.0.0.10"));
  expectedEndpoints.put(KEYSPACE2,HashMultimap.<Token,InetAddress>create());
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("5"),makeAddrs("127.0.0.2"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("15"),makeAddrs("127.0.0.3"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("25"),makeAddrs("127.0.0.4"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("35"),makeAddrs("127.0.0.5"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("45"),makeAddrs("127.0.0.6"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("55"),makeAddrs("127.0.0.7","127.0.1.1"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("65"),makeAddrs("127.0.0.7"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("75"),makeAddrs("127.0.0.9","127.0.1.2"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("85"),makeAddrs("127.0.0.9"));
  expectedEndpoints.get(KEYSPACE2).putAll(new BigIntegerToken("95"),makeAddrs("127.0.0.10"));
  expectedEndpoints.put(KEYSPACE3,HashMultimap.<Token,InetAddress>create());
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("5"),makeAddrs("127.0.0.2","127.0.0.3","127.0.0.4","127.0.0.5","127.0.0.6"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("15"),makeAddrs("127.0.0.3","127.0.0.4","127.0.0.5","127.0.0.6","127.0.0.7","127.0.1.1"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("25"),makeAddrs("127.0.0.4","127.0.0.5","127.0.0.6","127.0.0.7","127.0.0.8","127.0.1.1"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("35"),makeAddrs("127.0.0.5","127.0.0.6","127.0.0.7","127.0.0.8","127.0.0.9","127.0.1.1","127.0.1.2"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("45"),makeAddrs("127.0.0.6","127.0.0.7","127.0.0.8","127.0.0.9","127.0.0.10","127.0.1.1","127.0.1.2"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("55"),makeAddrs("127.0.0.7","127.0.0.8","127.0.0.9","127.0.0.10","127.0.0.1","127.0.1.1","127.0.1.2"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("65"),makeAddrs("127.0.0.7","127.0.0.8","127.0.0.9","127.0.0.10","127.0.0.1","127.0.1.2"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("75"),makeAddrs("127.0.0.9","127.0.0.10","127.0.0.1","127.0.0.2","127.0.0.3","127.0.1.2"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("85"),makeAddrs("127.0.0.9","127.0.0.10","127.0.0.1","127.0.0.2","127.0.0.3"));
  expectedEndpoints.get(KEYSPACE3).putAll(new BigIntegerToken("95"),makeAddrs("127.0.0.10","127.0.0.1","127.0.0.2","127.0.0.3","127.0.0.4"));
  expectedEndpoints.put(Simple_RF3_KeyspaceName,HashMultimap.<Token,InetAddress>create());
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("5"),makeAddrs("127.0.0.2","127.0.0.3","127.0.0.4"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("15"),makeAddrs("127.0.0.3","127.0.0.4","127.0.0.5"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("25"),makeAddrs("127.0.0.4","127.0.0.5","127.0.0.6"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("35"),makeAddrs("127.0.0.5","127.0.0.6","127.0.0.7","127.0.1.1"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("45"),makeAddrs("127.0.0.6","127.0.0.7","127.0.0.8","127.0.1.1"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("55"),makeAddrs("127.0.0.7","127.0.0.8","127.0.0.9","127.0.1.1","127.0.1.2"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("65"),makeAddrs("127.0.0.7","127.0.0.8","127.0.0.9","127.0.1.2"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("75"),makeAddrs("127.0.0.9","127.0.0.10","127.0.0.1","127.0.1.2"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("85"),makeAddrs("127.0.0.9","127.0.0.10","127.0.0.1"));
  expectedEndpoints.get(Simple_RF3_KeyspaceName).putAll(new BigIntegerToken("95"),makeAddrs("127.0.0.10","127.0.0.1","127.0.0.2"));
  for (  Map.Entry<String,AbstractReplicationStrategy> keyspaceStrategy : keyspaceStrategyMap.entrySet()) {
    String keyspaceName=keyspaceStrategy.getKey();
    AbstractReplicationStrategy strategy=keyspaceStrategy.getValue();
    for (    Token token : keyTokens) {
      endpoints=tmd.getWriteEndpoints(token,keyspaceName,strategy.getNaturalEndpoints(token));
      assertEquals(expectedEndpoints.get(keyspaceName).get(token).size(),endpoints.size());
      assertTrue(expectedEndpoints.get(keyspaceName).get(token).containsAll(endpoints));
    }
    if (strategy.getReplicationFactor() != 3)     continue;
    for (int i=0; i < 3; i++) {
      endpoints=tmd.getWriteEndpoints(keyTokens.get(i),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(i)));
      assertEquals(3,endpoints.size());
      assertTrue(endpoints.contains(hosts.get(i + 1)));
      assertTrue(endpoints.contains(hosts.get(i + 2)));
      assertTrue(endpoints.contains(hosts.get(i + 3)));
    }
    endpoints=tmd.getWriteEndpoints(keyTokens.get(3),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(3)));
    assertEquals(4,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(4)));
    assertTrue(endpoints.contains(hosts.get(5)));
    assertTrue(endpoints.contains(hosts.get(6)));
    assertTrue(endpoints.contains(boot1));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(4),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(4)));
    assertEquals(4,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(5)));
    assertTrue(endpoints.contains(hosts.get(6)));
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(boot1));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(5),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(5)));
    assertEquals(5,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(6)));
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(boot1));
    assertTrue(endpoints.contains(boot2));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(6),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(6)));
    assertEquals(4,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(6)));
    assertTrue(endpoints.contains(hosts.get(7)));
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(boot2));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(7),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(7)));
    assertEquals(4,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(hosts.get(9)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(boot2));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(8),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(8)));
    assertEquals(3,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(8)));
    assertTrue(endpoints.contains(hosts.get(9)));
    assertTrue(endpoints.contains(hosts.get(0)));
    endpoints=tmd.getWriteEndpoints(keyTokens.get(9),keyspaceName,strategy.getNaturalEndpoints(keyTokens.get(9)));
    assertEquals(3,endpoints.size());
    assertTrue(endpoints.contains(hosts.get(9)));
    assertTrue(endpoints.contains(hosts.get(0)));
    assertTrue(endpoints.contains(hosts.get(1)));
  }
  for (  Integer movingIndex : MOVING) {
    ss.onChange(hosts.get(movingIndex),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(newTokens.get(movingIndex))));
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStateJumpToNormal() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  TokenMetadata tmd=ss.getTokenMetadata();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,6);
  Token newToken=positionToken(7);
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.moving(newToken));
  assertTrue(tmd.isMoving(hosts.get(2)));
  assertEquals(endpointTokens.get(2),tmd.getToken(hosts.get(2)));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(newToken)));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(newToken)));
  assertTrue(tmd.getMovingEndpoints().isEmpty());
  assertEquals(newToken,tmd.getToken(hosts.get(2)));
  newToken=positionToken(8);
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.moving(newToken));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(newToken)));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(newToken)));
  assertTrue(tmd.getBootstrapTokens().isEmpty());
  assertTrue(tmd.getMovingEndpoints().isEmpty());
  assertEquals(newToken,tmd.getToken(hosts.get(2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.QueryPagerTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void namesQueryTest() throws Exception {
  QueryPager pager=namesQuery("k0","c1","c5","c7","c8").getPager(null,Server.CURRENT_VERSION);
  assertFalse(pager.isExhausted());
  List<FilteredPartition> partition=query(pager,5,4);
  assertRow(partition.get(0),"k0","c1","c5","c7","c8");
  assertTrue(pager.isExhausted());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.RemoveTest </h4><pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveHostId() throws InterruptedException {
  final AtomicBoolean success=new AtomicBoolean(false);
  Thread remover=new Thread(){
    public void run(){
      try {
        ss.removeNode(removalId.toString());
      }
 catch (      Exception e) {
        System.err.println(e);
        e.printStackTrace();
        return;
      }
      success.set(true);
    }
  }
;
  remover.start();
  Thread.sleep(1000);
  assertTrue(tmd.isLeaving(removalhost));
  assertEquals(1,tmd.getLeavingEndpoints().size());
  for (  InetAddress host : hosts) {
    MessageOut msg=new MessageOut(host,MessagingService.Verb.REPLICATION_FINISHED,null,null,Collections.<String,byte[]>emptyMap());
    MessagingService.instance().sendRR(msg,FBUtilities.getBroadcastAddress());
  }
  remover.join();
  assertTrue(success.get());
  assertTrue(tmd.getLeavingEndpoints().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.pager.PagingStateTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerializeDeserializeV4(){
  PagingState state=makeSomePagingState(Server.VERSION_4);
  ByteBuffer serialized=state.serialize(Server.VERSION_4);
  assertEquals(serialized.remaining(),state.serializedSize(Server.VERSION_4));
  assertEquals(state,PagingState.deserialize(serialized,Server.VERSION_4));
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSerializationBackwardCompatibility(){
  PagingState state=makeSomePagingState(Server.VERSION_3);
  String serializedState=ByteBufferUtil.bytesToHex(state.serialize(Server.VERSION_3));
  assertTrue(serializedState.startsWith("0007736f6d654b65790014000263310000040000002a0000056d79636f6c000000000a"));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerializeDeserializeV3(){
  PagingState state=makeSomePagingState(Server.VERSION_3);
  ByteBuffer serialized=state.serialize(Server.VERSION_3);
  assertEquals(serialized.remaining(),state.serializedSize(Server.VERSION_3));
  assertEquals(state,PagingState.deserialize(serialized,Server.VERSION_3));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.streaming.StreamTransferTaskTest </h4><pre class="type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScheduleTimeout() throws Exception {
  String ks=KEYSPACE1;
  String cf="Standard1";
  InetAddress peer=FBUtilities.getBroadcastAddress();
  StreamSession session=new StreamSession(peer,peer,null,0,true,false);
  ColumnFamilyStore cfs=Keyspace.open(ks).getColumnFamilyStore(cf);
  for (int i=0; i < 2; i++) {
    SchemaLoader.insertData(ks,cf,i,1);
    cfs.forceBlockingFlush();
  }
  StreamTransferTask task=new StreamTransferTask(session,cfs.metadata.cfId);
  for (  SSTableReader sstable : cfs.getLiveSSTables()) {
    List<Range<Token>> ranges=new ArrayList<>();
    ranges.add(new Range<>(sstable.first.getToken(),sstable.last.getToken()));
    task.addTransferFile(sstable.selfRef(),1,sstable.getPositionsForRanges(ranges),0);
  }
  assertEquals(2,task.getTotalNumberOfFiles());
  Future f=task.scheduleTimeout(0,0,TimeUnit.NANOSECONDS);
  f.get();
  f=task.scheduleTimeout(1,10,TimeUnit.MILLISECONDS);
  task.complete(1);
  try {
    f.get();
    Assert.assertTrue(false);
  }
 catch (  CancellationException ex) {
  }
  assertEquals(StreamSession.State.WAIT_COMPLETE,session.state());
  assertNull(task.scheduleTimeout(1,1,TimeUnit.SECONDS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.streaming.StreamingTransferTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test to make sure RangeTombstones at column index boundary transferred correctly.
 */
@Test public void testTransferRangeTombstones() throws Exception {
  String ks=KEYSPACE1;
  String cfname="StandardInteger1";
  Keyspace keyspace=Keyspace.open(ks);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  ClusteringComparator comparator=cfs.getComparator();
  String key="key1";
  RowUpdateBuilder updates=new RowUpdateBuilder(cfs.metadata,FBUtilities.timestampMicros(),key);
  updates.clustering(1).add("val",ByteBuffer.wrap(new byte[DatabaseDescriptor.getColumnIndexSize() - 64])).build().apply();
  updates=new RowUpdateBuilder(cfs.metadata,FBUtilities.timestampMicros(),key);
  updates.clustering(6).add("val",ByteBuffer.wrap(new byte[DatabaseDescriptor.getColumnIndexSize()])).build().apply();
  updates=new RowUpdateBuilder(cfs.metadata,FBUtilities.timestampMicros() + 1,key);
  updates.addRangeTombstone(Slice.make(comparator.make(5),comparator.make(7))).build().apply();
  cfs.forceBlockingFlush();
  SSTableReader sstable=cfs.getLiveSSTables().iterator().next();
  cfs.clearUnsafe();
  transferSSTables(sstable);
  assertEquals(1,cfs.getLiveSSTables().size());
  Row r=Util.getOnlyRow(Util.cmd(cfs).build());
  Assert.assertFalse(r.isEmpty());
  Assert.assertTrue(1 == Int32Type.instance.compose(r.clustering().get(0)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.transport.ProtocolErrorTest </h4><pre class="type-15 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBodyLengthOverLimit() throws Exception {
  Frame.Decoder dec=new Frame.Decoder(null);
  List results=new ArrayList<>();
  byte[] frame=new byte[]{(byte)REQUEST.addToVersion(Server.CURRENT_VERSION),0x00,0x00,0x01,0x09,0x10,(byte)0x00,(byte)0x00,(byte)0x00};
  byte[] body=new byte[0x10000000];
  ByteBuf buf=Unpooled.wrappedBuffer(frame,body);
  try {
    dec.decode(null,buf,results);
    Assert.fail("Expected protocol error");
  }
 catch (  ErrorMessage.WrappedException e) {
    Assert.assertEquals(1,e.getStreamId());
    Assert.assertTrue(e.getMessage().contains("Request is too big"));
  }
}

</code></pre>

<br>
<pre class="type-15 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidDirection() throws Exception {
  Frame.Decoder dec=new Frame.Decoder(null);
  List results=new ArrayList<>();
  byte[] frame=new byte[]{(byte)RESPONSE.addToVersion(Server.CURRENT_VERSION),0x00,0x00,0x01,0x09,0x00,0x00,0x00,0x21,0x00,0x00,0x00,0x1b,0x00,0x1b,0x53,0x45,0x4c,0x45,0x43,0x54,0x20,0x2a,0x20,0x46,0x52,0x4f,0x4d,0x20,0x73,0x79,0x73,0x74,0x65,0x6d,0x2e,0x6c,0x6f,0x63,0x61,0x6c,0x3b};
  ByteBuf buf=Unpooled.wrappedBuffer(frame);
  try {
    dec.decode(null,buf,results);
    Assert.fail("Expected protocol error");
  }
 catch (  ErrorMessage.WrappedException e) {
    Assert.assertEquals(1,e.getStreamId());
    Assert.assertTrue(e.getMessage().contains("Wrong protocol direction"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.triggers.TriggerExecutorTest </h4><pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sameKeySameCfPartialRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",SameKeySameCfPartialTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","k1v1",null);
  PartitionUpdate cf2=makeCf(metadata,"k2","k2v1",null);
  Mutation rm1=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  Mutation rm2=new Mutation("ks1",cf2.partitionKey()).add(cf2);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm1,rm2)));
  assertEquals(2,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  Row row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k1v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k2v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sameKeySameCfColumnFamilies() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",SameKeySameCfTrigger.class.getName()));
  PartitionUpdate mutated=TriggerExecutor.instance.execute(makeCf(metadata,"k1","v1",null));
  RowIterator rowIterator=UnfilteredRowIterators.filter(mutated.unfilteredIterator(),FBUtilities.nowInSeconds());
  Iterator<Cell> cells=rowIterator.next().cells().iterator();
  assertEquals(bytes("trigger"),cells.next().value());
  assertTrue(!rowIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sameKeyDifferentKsRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",SameKeyDifferentKsTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","k1v1",null);
  PartitionUpdate cf2=makeCf(metadata,"k2","k2v1",null);
  Mutation rm1=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  Mutation rm2=new Mutation("ks1",cf2.partitionKey()).add(cf2);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm1,rm2)));
  assertEquals(4,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  Row row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k1v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k2v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
  mutatedCFs=new ArrayList<>(tmutations.get(2).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
  mutatedCFs=new ArrayList<>(tmutations.get(3).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sameKeySameCfRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",SameKeySameCfTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","k1v1",null);
  PartitionUpdate cf2=makeCf(metadata,"k2","k2v1",null);
  Mutation rm1=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  Mutation rm2=new Mutation("ks1",cf2.partitionKey()).add(cf2);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm1,rm2)));
  assertEquals(2,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  Row row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k1v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k2v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
}

</code></pre>

<br>
<pre class="type-7 type-13 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sameKeyDifferentCfRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",SameKeyDifferentCfTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","k1v1",null);
  PartitionUpdate cf2=makeCf(metadata,"k2","k2v1",null);
  Mutation rm1=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  Mutation rm2=new Mutation("ks1",cf2.partitionKey()).add(cf2);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm1,rm2)));
  assertEquals(2,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(2,mutatedCFs.size());
  for (  PartitionUpdate update : mutatedCFs) {
    if (update.metadata().cfName.equals("cf1")) {
      Row row=update.iterator().next();
      assertEquals(bytes("k1v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
      assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
    }
 else {
      Row row=update.iterator().next();
      assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
      assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
    }
  }
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(2,mutatedCFs.size());
  for (  PartitionUpdate update : mutatedCFs) {
    if (update.metadata().cfName.equals("cf1")) {
      Row row=update.iterator().next();
      assertEquals(bytes("k2v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
      assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
    }
 else {
      Row row=update.iterator().next();
      assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
      assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void differentKeyRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",DifferentKeyTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","v1",null);
  Mutation rm=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm)));
  assertEquals(2,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  assertEquals(bytes("k1"),tmutations.get(0).key().getKey());
  assertEquals(bytes("otherKey"),tmutations.get(1).key().getKey());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  Row row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.triggers.TriggersSchemaTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addTriggerToCf() throws Exception {
  CFMetaData cfm1=CFMetaData.compile(String.format("CREATE TABLE %s (k int PRIMARY KEY, v int)",cfName),ksName);
  KeyspaceMetadata ksm=KeyspaceMetadata.create(ksName,KeyspaceParams.simple(1),Tables.of(cfm1));
  MigrationManager.announceNewKeyspace(ksm);
  CFMetaData cfm2=Schema.instance.getCFMetaData(ksName,cfName).copy();
  TriggerMetadata td=TriggerMetadata.create(triggerName,triggerClass);
  cfm2.triggers(cfm2.getTriggers().with(td));
  MigrationManager.announceColumnFamilyUpdate(cfm2,false);
  CFMetaData cfm3=Schema.instance.getCFMetaData(ksName,cfName);
  assertFalse(cfm3.getTriggers().isEmpty());
  assertEquals(1,cfm3.getTriggers().size());
  assertEquals(td,cfm3.getTriggers().get(triggerName).get());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNewCfWithTriggerToKs() throws Exception {
  KeyspaceMetadata ksm=KeyspaceMetadata.create(ksName,KeyspaceParams.simple(1));
  MigrationManager.announceNewKeyspace(ksm);
  CFMetaData cfm1=CFMetaData.compile(String.format("CREATE TABLE %s (k int PRIMARY KEY, v int)",cfName),ksName);
  TriggerMetadata td=TriggerMetadata.create(triggerName,triggerClass);
  cfm1.triggers(cfm1.getTriggers().with(td));
  MigrationManager.announceNewColumnFamily(cfm1);
  CFMetaData cfm2=Schema.instance.getCFMetaData(ksName,cfName);
  assertFalse(cfm2.getTriggers().isEmpty());
  assertEquals(1,cfm2.getTriggers().size());
  assertEquals(td,cfm2.getTriggers().get(triggerName).get());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void newKsContainsCfWithTrigger() throws Exception {
  TriggerMetadata td=TriggerMetadata.create(triggerName,triggerClass);
  CFMetaData cfm1=CFMetaData.compile(String.format("CREATE TABLE %s (k int PRIMARY KEY, v int)",cfName),ksName);
  cfm1.triggers(cfm1.getTriggers().with(td));
  KeyspaceMetadata ksm=KeyspaceMetadata.create(ksName,KeyspaceParams.simple(1),Tables.of(cfm1));
  MigrationManager.announceNewKeyspace(ksm);
  CFMetaData cfm2=Schema.instance.getCFMetaData(ksName,cfName);
  assertFalse(cfm2.getTriggers().isEmpty());
  assertEquals(1,cfm2.getTriggers().size());
  assertEquals(td,cfm2.getTriggers().get(triggerName).get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.BTreeTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests that the apply method of the <code>UpdateFunction</code> is only called once with each key update.
 * (see CASSANDRA-8018).
 */
@Test public void testUpdate_UpdateFunctionCallBack(){
  Object[] btree=new Object[1];
  CallsMonitor monitor=new CallsMonitor();
  btree=BTree.update(btree,CMP,Arrays.asList(1),monitor);
  assertArrayEquals(new Object[]{1},btree);
  assertEquals(1,monitor.getNumberOfCalls(1));
  monitor.clear();
  btree=BTree.update(btree,CMP,Arrays.asList(2),monitor);
  assertArrayEquals(new Object[]{1,2,null},btree);
  assertEquals(1,monitor.getNumberOfCalls(2));
  monitor.clear();
  btree=BTree.update(btree,CMP,Arrays.asList(1),monitor);
  assertArrayEquals(new Object[]{1,2,null},btree);
  assertEquals(1,monitor.getNumberOfCalls(1));
  monitor.clear();
  btree=BTree.update(btree,CMP,Arrays.asList(3,4),monitor);
  assertArrayEquals(new Object[]{1,2,3,4,null},btree);
  assertEquals(1,monitor.getNumberOfCalls(3));
  assertEquals(1,monitor.getNumberOfCalls(4));
  monitor.clear();
  btree=BTree.update(btree,CMP,Arrays.asList(2,5),monitor);
  assertArrayEquals(new Object[]{3,new Object[]{1,2,null},new Object[]{4,5,null},new int[]{2,5}},btree);
  assertEquals(1,monitor.getNumberOfCalls(2));
  assertEquals(1,monitor.getNumberOfCalls(5));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests that the apply method of the <code>UpdateFunction</code> is only called once per value with each build call.
 */
@Test public void testBuilding_UpdateFunctionCallBack(){
  CallsMonitor monitor=new CallsMonitor();
  Object[] btree=BTree.build(Arrays.asList(1),monitor);
  assertArrayEquals(new Object[]{1},btree);
  assertEquals(1,monitor.getNumberOfCalls(1));
  monitor.clear();
  btree=BTree.build(Arrays.asList(1,2),monitor);
  assertArrayEquals(new Object[]{1,2,null},btree);
  assertEquals(1,monitor.getNumberOfCalls(1));
  assertEquals(1,monitor.getNumberOfCalls(2));
  monitor.clear();
  btree=BTree.build(Arrays.asList(1,2,3),monitor);
  assertArrayEquals(new Object[]{1,2,3},btree);
  assertEquals(1,monitor.getNumberOfCalls(1));
  assertEquals(1,monitor.getNumberOfCalls(2));
  assertEquals(1,monitor.getNumberOfCalls(3));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.BitSetTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBitClear(){
  int size=Integer.MAX_VALUE / 4000;
  try (OffHeapBitSet bitset=new OffHeapBitSet(size)){
    List<Integer> randomBits=Lists.newArrayList();
    for (int i=0; i < 10; i++)     randomBits.add(random.nextInt(size));
    for (    long randomBit : randomBits)     bitset.set(randomBit);
    for (    long randomBit : randomBits)     Assert.assertEquals(true,bitset.get(randomBit));
    for (    long randomBit : randomBits)     bitset.clear(randomBit);
    for (    long randomBit : randomBits)     Assert.assertEquals(false,bitset.get(randomBit));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.BytesReadTrackerTest </h4><pre class="type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBytesRead() throws Exception {
  byte[] testData;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  try {
    out.writeBoolean(true);
    out.writeByte(0x1);
    out.writeChar('a');
    out.writeShort(1);
    out.writeInt(1);
    out.writeLong(1L);
    out.writeFloat(1.0f);
    out.writeDouble(1.0d);
    out.writeUTF("abc");
    testData=baos.toByteArray();
  }
  finally {
    out.close();
  }
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(testData));
  BytesReadTracker tracker=new BytesReadTracker(in);
  try {
    boolean bool=tracker.readBoolean();
    assertTrue(bool);
    assertEquals(1,tracker.getBytesRead());
    byte b=tracker.readByte();
    assertEquals(b,0x1);
    assertEquals(2,tracker.getBytesRead());
    char c=tracker.readChar();
    assertEquals('a',c);
    assertEquals(4,tracker.getBytesRead());
    short s=tracker.readShort();
    assertEquals(1,s);
    assertEquals((short)6,tracker.getBytesRead());
    int i=tracker.readInt();
    assertEquals(1,i);
    assertEquals(10,tracker.getBytesRead());
    long l=tracker.readLong();
    assertEquals(1L,l);
    assertEquals(18,tracker.getBytesRead());
    float f=tracker.readFloat();
    assertEquals(1.0f,f,0);
    assertEquals(22,tracker.getBytesRead());
    double d=tracker.readDouble();
    assertEquals(1.0d,d,0);
    assertEquals(30,tracker.getBytesRead());
    String str=tracker.readUTF();
    assertEquals("abc",str);
    assertEquals(35,tracker.getBytesRead());
    assertEquals(testData.length,tracker.getBytesRead());
  }
  finally {
    in.close();
  }
  tracker.reset(0);
  assertEquals(0,tracker.getBytesRead());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSkipBytesAndReadFully() throws Exception {
  String testStr="1234567890";
  byte[] testData=testStr.getBytes();
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(testData));
  BytesReadTracker tracker=new BytesReadTracker(in);
  try {
    byte[] out=new byte[5];
    tracker.readFully(out,0,5);
    assertEquals("12345",new String(out));
    assertEquals(5,tracker.getBytesRead());
    tracker.skipBytes(2);
    assertEquals(7,tracker.getBytesRead());
    out=new byte[3];
    tracker.readFully(out);
    assertEquals("890",new String(out));
    assertEquals(10,tracker.getBytesRead());
    assertEquals(testData.length,tracker.getBytesRead());
  }
  finally {
    in.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnsignedRead() throws Exception {
  byte[] testData;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  try {
    out.writeByte(0x1);
    out.writeShort(1);
    testData=baos.toByteArray();
  }
  finally {
    out.close();
  }
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(testData));
  BytesReadTracker tracker=new BytesReadTracker(in);
  try {
    int b=tracker.readUnsignedByte();
    assertEquals(b,1);
    assertEquals(1,tracker.getBytesRead());
    int s=tracker.readUnsignedShort();
    assertEquals(1,s);
    assertEquals(3,tracker.getBytesRead());
    assertEquals(testData.length,tracker.getBytesRead());
  }
  finally {
    in.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.CassandraVersionTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testComparison(){
  CassandraVersion v1, v2;
  v1=new CassandraVersion("1.2.3");
  v2=new CassandraVersion("1.2.4");
  assertTrue(v1.compareTo(v2) == -1);
  v1=new CassandraVersion("1.2.3");
  v2=new CassandraVersion("1.2.3");
  assertTrue(v1.compareTo(v2) == 0);
  v1=new CassandraVersion("1.2.3");
  v2=new CassandraVersion("2.0.0");
  assertTrue(v1.compareTo(v2) == -1);
  assertTrue(v2.compareTo(v1) == 1);
  v1=new CassandraVersion("1.2.3");
  v2=new CassandraVersion("1.2.3-alpha");
  assertTrue(v1.compareTo(v2) == 1);
  v1=new CassandraVersion("1.2.3");
  v2=new CassandraVersion("1.2.3+foo");
  assertTrue(v1.compareTo(v2) == -1);
  v1=new CassandraVersion("1.2.3");
  v2=new CassandraVersion("1.2.3-alpha+foo");
  assertTrue(v1.compareTo(v2) == 1);
  v1=new CassandraVersion("1.2.3-alpha+1");
  v2=new CassandraVersion("1.2.3-alpha+2");
  assertTrue(v1.compareTo(v2) == -1);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsSupportedBy(){
  CassandraVersion v1, v2;
  v1=new CassandraVersion("3.0.2");
  assertTrue(v1.isSupportedBy(v1));
  v1=new CassandraVersion("1.2.3");
  v2=new CassandraVersion("1.2.4");
  assertTrue(v1.isSupportedBy(v2));
  assertTrue(!v2.isSupportedBy(v1));
  v1=new CassandraVersion("1.2.3");
  v2=new CassandraVersion("1.3.3");
  assertTrue(v1.isSupportedBy(v2));
  assertTrue(!v2.isSupportedBy(v1));
  v1=new CassandraVersion("2.2.3");
  v2=new CassandraVersion("1.3.3");
  assertTrue(!v1.isSupportedBy(v2));
  assertTrue(!v2.isSupportedBy(v1));
  v1=new CassandraVersion("3.1.0");
  v2=new CassandraVersion("3.0.1");
  assertTrue(!v1.isSupportedBy(v2));
  assertTrue(v2.isSupportedBy(v1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.EstimatedHistogramTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMean(){
{
    EstimatedHistogram histogram=new EstimatedHistogram();
    for (int i=0; i < 40; i++)     histogram.add(0);
    for (int i=0; i < 20; i++)     histogram.add(1);
    for (int i=0; i < 10; i++)     histogram.add(2);
    assertEquals(70,histogram.count());
    assertEquals(2,histogram.mean());
  }
{
    EstimatedHistogram histogram=new EstimatedHistogram(90,true);
    for (int i=0; i < 40; i++)     histogram.add(0);
    for (int i=0; i < 20; i++)     histogram.add(1);
    for (int i=0; i < 10; i++)     histogram.add(2);
    assertEquals(70,histogram.count());
    assertEquals(1,histogram.mean());
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimple(){
{
    EstimatedHistogram histogram=new EstimatedHistogram();
    histogram.add(0);
    assertEquals(1,histogram.get(0));
    histogram.add(1);
    assertEquals(2,histogram.get(0));
  }
{
    EstimatedHistogram histogram=new EstimatedHistogram(90,true);
    histogram.add(0);
    assertEquals(1,histogram.get(0));
    histogram.add(1);
    assertEquals(1,histogram.get(0));
    assertEquals(1,histogram.get(1));
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFindingCorrectBuckets(){
  EstimatedHistogram histogram=new EstimatedHistogram();
  histogram.add(23282687);
  assert !histogram.isOverflowed();
  assertEquals(1,histogram.getBuckets(false)[histogram.buckets.length() - 2]);
  histogram.add(9);
  assertEquals(1,histogram.getBuckets(false)[8]);
  histogram.add(20);
  histogram.add(21);
  histogram.add(22);
  assertEquals(2,histogram.getBuckets(false)[13]);
  assertEquals(5021848,histogram.mean());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMinMax(){
  EstimatedHistogram histogram=new EstimatedHistogram();
  histogram.add(16);
  assertEquals(15,histogram.min());
  assertEquals(17,histogram.max());
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPercentile(){
{
    EstimatedHistogram histogram=new EstimatedHistogram();
    assertEquals(0,histogram.percentile(0.99));
    histogram.add(1);
    assertEquals(1,histogram.percentile(0.99));
    histogram.add(10);
    assertEquals(10,histogram.percentile(0.99));
  }
{
    EstimatedHistogram histogram=new EstimatedHistogram();
    histogram.add(1);
    histogram.add(2);
    histogram.add(3);
    histogram.add(4);
    histogram.add(5);
    assertEquals(0,histogram.percentile(0.00));
    assertEquals(3,histogram.percentile(0.50));
    assertEquals(3,histogram.percentile(0.60));
    assertEquals(5,histogram.percentile(1.00));
  }
{
    EstimatedHistogram histogram=new EstimatedHistogram();
    for (int i=11; i <= 20; i++)     histogram.add(i);
    assertEquals(12,histogram.percentile(0.01));
    assertEquals(14,histogram.percentile(0.30));
    assertEquals(17,histogram.percentile(0.50));
    assertEquals(17,histogram.percentile(0.60));
    assertEquals(20,histogram.percentile(0.80));
  }
{
    EstimatedHistogram histogram=new EstimatedHistogram(90,true);
    histogram.add(0);
    histogram.add(0);
    histogram.add(1);
    assertEquals(0,histogram.percentile(0.5));
    assertEquals(1,histogram.percentile(0.99));
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOverflow(){
  EstimatedHistogram histogram=new EstimatedHistogram(1);
  histogram.add(100);
  assert histogram.isOverflowed();
  assertEquals(Long.MAX_VALUE,histogram.max());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.HistogramBuilderTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdevEmpty(){
  EstimatedHistogram hist=new HistogramBuilder().buildWithStdevRangesAroundMean();
  assertArrayEquals(new long[]{},hist.getBucketOffsets());
  assertArrayEquals(new long[]{0},toArray(hist.buckets));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdevLargeNumbers(){
  long[] vals;
  EstimatedHistogram hist;
  vals=new long[100000];
  for (int i=0; i < vals.length; i++) {
    if (i < vals.length * 0.6f)     vals[i]=60;
 else     if (i < vals.length * 0.8f)     vals[i]=120;
 else     if (i < vals.length * 0.9f)     vals[i]=180;
 else     if (i < vals.length * 0.95f)     vals[i]=240;
 else     if (i < vals.length * 0.98f)     vals[i]=320;
 else     vals[i]=1000;
  }
  hist=new HistogramBuilder(vals).buildWithStdevRangesAroundMean(2);
  assertArrayEquals(new long[]{59,120,260,400,1000},hist.getBucketOffsets());
  assertArrayEquals(new long[]{0,80000,15000,3000,2000,0},toArray(hist.buckets));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdevSingletonRanges(){
  EstimatedHistogram hist;
  hist=new HistogramBuilder(new long[]{5,5,5,5,5}).buildWithStdevRangesAroundMean();
  assertArrayEquals(new long[]{4,5},hist.getBucketOffsets());
  assertArrayEquals(new long[]{0,5,0},toArray(hist.buckets));
  hist=new HistogramBuilder(new long[]{-1}).buildWithStdevRangesAroundMean();
  assertArrayEquals(new long[]{-2,-1},hist.getBucketOffsets());
  assertArrayEquals(new long[]{0,1,0},toArray(hist.buckets));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdev(){
  long[] vals;
  EstimatedHistogram hist;
  vals=new long[]{-10,-3,-2,-2,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,2,2,3,10};
  hist=new HistogramBuilder(vals).buildWithStdevRangesAroundMean(2);
  assertArrayEquals(new long[]{-11,-6,-3,0,3,6,10},hist.getBucketOffsets());
  assertArrayEquals(new long[]{0,1,1,10,10,0,1,0},toArray(hist.buckets));
}

</code></pre>

<br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdevNearZeroStdev(){
  EstimatedHistogram hist;
  long[] vals=new long[100000];
  vals[0]=99;
  vals[1]=101;
  for (int i=2; i < vals.length; i++)   vals[i]=100;
  hist=new HistogramBuilder(vals).buildWithStdevRangesAroundMean();
  assertArrayEquals(new long[]{98,99,100,101},hist.getBucketOffsets());
  assertArrayEquals(new long[]{0,1,vals.length - 2,1,0},toArray(hist.buckets));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.IntervalTreeTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSearch() throws Exception {
  List<Interval<Integer,Void>> intervals=new ArrayList<Interval<Integer,Void>>();
  intervals.add(Interval.<Integer,Void>create(-300,-200));
  intervals.add(Interval.<Integer,Void>create(-3,-2));
  intervals.add(Interval.<Integer,Void>create(1,2));
  intervals.add(Interval.<Integer,Void>create(3,6));
  intervals.add(Interval.<Integer,Void>create(2,4));
  intervals.add(Interval.<Integer,Void>create(5,7));
  intervals.add(Interval.<Integer,Void>create(1,3));
  intervals.add(Interval.<Integer,Void>create(4,6));
  intervals.add(Interval.<Integer,Void>create(8,9));
  intervals.add(Interval.<Integer,Void>create(15,20));
  intervals.add(Interval.<Integer,Void>create(40,50));
  intervals.add(Interval.<Integer,Void>create(49,60));
  IntervalTree<Integer,Void,Interval<Integer,Void>> it=IntervalTree.build(intervals);
  assertEquals(3,it.search(Interval.<Integer,Void>create(4,4)).size());
  assertEquals(4,it.search(Interval.<Integer,Void>create(4,5)).size());
  assertEquals(7,it.search(Interval.<Integer,Void>create(-1,10)).size());
  assertEquals(0,it.search(Interval.<Integer,Void>create(-1,-1)).size());
  assertEquals(5,it.search(Interval.<Integer,Void>create(1,4)).size());
  assertEquals(2,it.search(Interval.<Integer,Void>create(0,1)).size());
  assertEquals(0,it.search(Interval.<Integer,Void>create(10,12)).size());
  List<Interval<Integer,Void>> intervals2=new ArrayList<Interval<Integer,Void>>();
  intervals2.add(Interval.<Integer,Void>create(1880,1971));
  intervals2.add(Interval.<Integer,Void>create(1874,1951));
  intervals2.add(Interval.<Integer,Void>create(1843,1907));
  intervals2.add(Interval.<Integer,Void>create(1779,1828));
  intervals2.add(Interval.<Integer,Void>create(1756,1828));
  intervals2.add(Interval.<Integer,Void>create(1585,1672));
  IntervalTree<Integer,Void,Interval<Integer,Void>> it2=IntervalTree.build(intervals2);
  assertEquals(0,it2.search(Interval.<Integer,Void>create(1829,1842)).size());
  List<Void> intersection1=it2.search(Interval.<Integer,Void>create(1907,1907));
  assertEquals(3,intersection1.size());
  intersection1=it2.search(Interval.<Integer,Void>create(1780,1790));
  assertEquals(2,intersection1.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.JVMStabilityInspectorTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void fileHandleTest(){
  KillerForTests killerForTests=new KillerForTests();
  JVMStabilityInspector.Killer originalKiller=JVMStabilityInspector.replaceKiller(killerForTests);
  try {
    killerForTests.reset();
    JVMStabilityInspector.inspectThrowable(new SocketException("Should not fail"));
    assertFalse(killerForTests.wasKilled());
    killerForTests.reset();
    JVMStabilityInspector.inspectThrowable(new FileNotFoundException("Also should not fail"));
    assertFalse(killerForTests.wasKilled());
    killerForTests.reset();
    JVMStabilityInspector.inspectThrowable(new SocketException("Too many open files"));
    assertTrue(killerForTests.wasKilled());
    killerForTests.reset();
    JVMStabilityInspector.inspectCommitLogThrowable(new FileNotFoundException("Too many open files"));
    assertTrue(killerForTests.wasKilled());
  }
  finally {
    JVMStabilityInspector.replaceKiller(originalKiller);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testKill() throws Exception {
  KillerForTests killerForTests=new KillerForTests();
  JVMStabilityInspector.Killer originalKiller=JVMStabilityInspector.replaceKiller(killerForTests);
  Config.DiskFailurePolicy oldPolicy=DatabaseDescriptor.getDiskFailurePolicy();
  Config.CommitFailurePolicy oldCommitPolicy=DatabaseDescriptor.getCommitFailurePolicy();
  try {
    killerForTests.reset();
    JVMStabilityInspector.inspectThrowable(new IOException());
    assertFalse(killerForTests.wasKilled());
    killerForTests.reset();
    JVMStabilityInspector.inspectThrowable(new OutOfMemoryError());
    assertTrue(killerForTests.wasKilled());
    DatabaseDescriptor.setDiskFailurePolicy(Config.DiskFailurePolicy.die);
    killerForTests.reset();
    JVMStabilityInspector.inspectThrowable(new FSReadError(new IOException(),"blah"));
    assertTrue(killerForTests.wasKilled());
    DatabaseDescriptor.setCommitFailurePolicy(Config.CommitFailurePolicy.die);
    killerForTests.reset();
    JVMStabilityInspector.inspectCommitLogThrowable(new Throwable());
    assertTrue(killerForTests.wasKilled());
    killerForTests.reset();
    JVMStabilityInspector.inspectThrowable(new Exception(new IOException()));
    assertFalse(killerForTests.wasKilled());
    killerForTests.reset();
    JVMStabilityInspector.inspectThrowable(new Exception(new OutOfMemoryError()));
    assertTrue(killerForTests.wasKilled());
  }
  finally {
    JVMStabilityInspector.replaceKiller(originalKiller);
    DatabaseDescriptor.setDiskFailurePolicy(oldPolicy);
    DatabaseDescriptor.setCommitFailurePolicy(oldCommitPolicy);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.MerkleTreeTest </h4><pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashInner(){
  byte[] val=DUMMY;
  byte[] lchildval=hashed(val,3,3,2);
  byte[] rchildval=hashed(val,2,2);
  byte[] fullval=hashed(val,3,3,2,2,2);
  Range<Token> full=new Range<>(tok(-1),tok(-1));
  Range<Token> lchild=new Range<>(tok(-1),tok(4));
  Range<Token> rchild=new Range<>(tok(4),tok(-1));
  Range<Token> invalid=new Range<>(tok(1),tok(-1));
  mt.split(tok(4));
  mt.split(tok(2));
  mt.split(tok(6));
  mt.split(tok(1));
  assertNull(mt.hash(full));
  assertNull(mt.hash(lchild));
  assertNull(mt.hash(rchild));
  assertNull(mt.hash(invalid));
  mt.get(tok(1)).hash(val);
  mt.get(tok(2)).hash(val);
  mt.get(tok(4)).hash(val);
  mt.get(tok(6)).hash(val);
  mt.get(tok(-1)).hash(val);
  assertHashEquals(fullval,mt.hash(full));
  assertHashEquals(lchildval,mt.hash(lchild));
  assertHashEquals(rchildval,mt.hash(rchild));
  assertNull(mt.hash(invalid));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDifference(){
  int maxsize=16;
  mt.maxsize(maxsize);
  MerkleTree mt2=new MerkleTree(partitioner,fullRange(),RECOMMENDED_DEPTH,maxsize);
  mt.init();
  mt2.init();
  for (  TreeRange range : mt.invalids())   range.addAll(new HIterator(range.right));
  for (  TreeRange range : mt2.invalids())   range.addAll(new HIterator(range.right));
  TreeRange leftmost=null;
  TreeRange middle=null;
  mt.maxsize(maxsize + 2);
  Iterator<TreeRange> ranges=mt.invalids();
  leftmost=ranges.next();
  mt.split(leftmost.right);
  middle=mt.get(leftmost.right);
  middle.hash("arbitrary!".getBytes());
  mt.get(partitioner.midpoint(leftmost.left,leftmost.right)).hash("even more arbitrary!".getBytes());
  List<TreeRange> diffs=MerkleTree.difference(mt,mt2);
  assertEquals(diffs + " contains wrong number of differences:",1,diffs.size());
  assertTrue(diffs.contains(new Range<>(leftmost.left,middle.right)));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitLimitDepth(){
  mt=new MerkleTree(partitioner,fullRange(),(byte)2,Integer.MAX_VALUE);
  assertTrue(mt.split(tok(4)));
  assertTrue(mt.split(tok(2)));
  assertEquals(3,mt.size());
  assertFalse(mt.split(tok(1)));
  assertEquals(3,mt.size());
  assertEquals(new Range<>(tok(4),tok(-1)),mt.get(tok(-1)));
  assertEquals(new Range<>(tok(-1),tok(2)),mt.get(tok(2)));
  assertEquals(new Range<>(tok(2),tok(4)),mt.get(tok(4)));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitLimitSize(){
  mt=new MerkleTree(partitioner,fullRange(),RECOMMENDED_DEPTH,2);
  assertTrue(mt.split(tok(4)));
  assertEquals(2,mt.size());
  assertFalse(mt.split(tok(2)));
  assertEquals(2,mt.size());
  assertEquals(new Range<>(tok(4),tok(-1)),mt.get(tok(-1)));
  assertEquals(new Range<>(tok(-1),tok(4)),mt.get(tok(4)));
}

</code></pre>

<br>
<pre class="type-15 type-4 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit(){
  mt.split(tok(4));
  mt.split(tok(6));
  mt.split(tok(7));
  assertEquals(4,mt.size());
  assertEquals(new Range<>(tok(7),tok(-1)),mt.get(tok(-1)));
  assertEquals(new Range<>(tok(-1),tok(4)),mt.get(tok(3)));
  assertEquals(new Range<>(tok(-1),tok(4)),mt.get(tok(4)));
  assertEquals(new Range<>(tok(4),tok(6)),mt.get(tok(6)));
  assertEquals(new Range<>(tok(6),tok(7)),mt.get(tok(7)));
  assertEquals((byte)1,mt.get(tok(4)).depth);
  assertEquals((byte)2,mt.get(tok(6)).depth);
  assertEquals((byte)3,mt.get(tok(7)).depth);
  assertEquals((byte)3,mt.get(tok(-1)).depth);
  try {
    mt.split(tok(-1));
    fail("Shouldn't be able to split outside the initial range.");
  }
 catch (  AssertionError e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashPartial(){
  byte[] val=DUMMY;
  byte[] leftval=hashed(val,1,1);
  byte[] partialval=hashed(val,1);
  Range<Token> left=new Range<>(tok(-1),tok(4));
  Range<Token> partial=new Range<>(tok(2),tok(4));
  Range<Token> right=new Range<>(tok(4),tok(-1));
  Range<Token> linvalid=new Range<>(tok(1),tok(4));
  Range<Token> rinvalid=new Range<>(tok(4),tok(6));
  mt.split(tok(4));
  mt.split(tok(2));
  assertNull(mt.hash(left));
  assertNull(mt.hash(partial));
  assertNull(mt.hash(right));
  assertNull(mt.hash(linvalid));
  assertNull(mt.hash(rinvalid));
  mt.get(tok(2)).hash(val);
  mt.get(tok(4)).hash(val);
  mt.get(tok(-1)).hash(val);
  assertHashEquals(leftval,mt.hash(left));
  assertHashEquals(partialval,mt.hash(partial));
  assertHashEquals(val,mt.hash(right));
  assertNull(mt.hash(linvalid));
  assertNull(mt.hash(rinvalid));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalids(){
  Iterator<TreeRange> ranges;
  ranges=mt.invalids();
  assertEquals(new Range<>(tok(-1),tok(-1)),ranges.next());
  assertFalse(ranges.hasNext());
  mt.split(tok(4));
  mt.split(tok(2));
  mt.split(tok(6));
  mt.split(tok(3));
  mt.split(tok(5));
  ranges=mt.invalids();
  assertEquals(new Range<>(tok(6),tok(-1)),ranges.next());
  assertEquals(new Range<>(tok(-1),tok(2)),ranges.next());
  assertEquals(new Range<>(tok(2),tok(3)),ranges.next());
  assertEquals(new Range<>(tok(3),tok(4)),ranges.next());
  assertEquals(new Range<>(tok(4),tok(5)),ranges.next());
  assertEquals(new Range<>(tok(5),tok(6)),ranges.next());
  assertEquals(new Range<>(tok(6),tok(-1)),ranges.next());
  assertFalse(ranges.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashDegenerate(){
  TOKEN_SCALE=new BigInteger("32");
  byte[] val=DUMMY;
  byte[] childfullval=hashed(val,5,5,4);
  byte[] fullval=hashed(val,5,5,4,3,2,1);
  Range<Token> childfull=new Range<>(tok(-1),tok(4));
  Range<Token> full=new Range<>(tok(-1),tok(-1));
  Range<Token> invalid=new Range<>(tok(4),tok(-1));
  mt=new MerkleTree(partitioner,fullRange(),RECOMMENDED_DEPTH,Integer.MAX_VALUE);
  mt.split(tok(16));
  mt.split(tok(8));
  mt.split(tok(4));
  mt.split(tok(2));
  mt.split(tok(1));
  assertNull(mt.hash(full));
  assertNull(mt.hash(childfull));
  assertNull(mt.hash(invalid));
  mt.get(tok(1)).hash(val);
  mt.get(tok(2)).hash(val);
  mt.get(tok(4)).hash(val);
  mt.get(tok(8)).hash(val);
  mt.get(tok(16)).hash(val);
  mt.get(tok(-1)).hash(val);
  assertHashEquals(fullval,mt.hash(full));
  assertHashEquals(childfullval,mt.hash(childfull));
  assertNull(mt.hash(invalid));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.MerkleTreesTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization() throws Exception {
  Range<Token> first=new Range<>(tok(3),tok(4));
  Collection<Range<Token>> ranges=new ArrayList<>();
  ranges.add(first);
  ranges.add(new Range<Token>(tok(5),tok(2)));
  mts=new MerkleTrees(partitioner);
  mts.addMerkleTrees(256,ranges);
  mts.init();
  for (  TreeRange range : mts.invalids())   range.addAll(new HIterator(range.right));
  byte[] initialhash=mts.hash(first);
  long serializedSize=MerkleTrees.serializer.serializedSize(mts,MessagingService.current_version);
  DataOutputBuffer out=new DataOutputBuffer();
  MerkleTrees.serializer.serialize(mts,out,MessagingService.current_version);
  byte[] serialized=out.toByteArray();
  assertEquals(serializedSize,serialized.length);
  DataInputBuffer in=new DataInputBuffer(serialized);
  MerkleTrees restored=MerkleTrees.serializer.deserialize(in,MessagingService.current_version);
  assertHashEquals(initialhash,restored.hash(first));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalids(){
  Iterator<TreeRange> ranges;
  ranges=mts.invalids();
  assertEquals(new Range<>(tok(-1),tok(-1)),ranges.next());
  assertFalse(ranges.hasNext());
  mts.split(tok(4));
  mts.split(tok(2));
  mts.split(tok(6));
  mts.split(tok(3));
  mts.split(tok(5));
  ranges=mts.invalids();
  assertEquals(new Range<>(tok(6),tok(-1)),ranges.next());
  assertEquals(new Range<>(tok(-1),tok(2)),ranges.next());
  assertEquals(new Range<>(tok(2),tok(3)),ranges.next());
  assertEquals(new Range<>(tok(3),tok(4)),ranges.next());
  assertEquals(new Range<>(tok(4),tok(5)),ranges.next());
  assertEquals(new Range<>(tok(5),tok(6)),ranges.next());
  assertEquals(new Range<>(tok(6),tok(-1)),ranges.next());
  assertFalse(ranges.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDifference(){
  int maxsize=16;
  mts=new MerkleTrees(partitioner);
  mts.addMerkleTree(32,fullRange());
  MerkleTrees mts2=new MerkleTrees(partitioner);
  mts2.addMerkleTree(32,fullRange());
  mts.init();
  mts2.init();
  for (  TreeRange range : mts.invalids())   range.addAll(new HIterator(range.right));
  for (  TreeRange range : mts2.invalids())   range.addAll(new HIterator(range.right));
  TreeRange leftmost=null;
  TreeRange middle=null;
  mts.maxsize(fullRange(),maxsize + 2);
  Iterator<TreeRange> ranges=mts.invalids();
  leftmost=ranges.next();
  mts.split(leftmost.right);
  middle=mts.get(leftmost.right);
  middle.hash("arbitrary!".getBytes());
  mts.get(partitioner.midpoint(leftmost.left,leftmost.right)).hash("even more arbitrary!".getBytes());
  List<Range<Token>> diffs=MerkleTrees.difference(mts,mts2);
  assertEquals(diffs + " contains wrong number of differences:",1,diffs.size());
  assertTrue(diffs.contains(new Range<>(leftmost.left,middle.right)));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitLimitDepth(){
  mts=new MerkleTrees(partitioner);
  mts.addMerkleTree(Integer.MAX_VALUE,(byte)2,fullRange());
  assertTrue(mts.split(tok(4)));
  assertTrue(mts.split(tok(2)));
  assertEquals(3,mts.size());
  assertFalse(mts.split(tok(1)));
  assertEquals(3,mts.size());
  assertEquals(new Range<>(tok(4),tok(-1)),mts.get(tok(-1)));
  assertEquals(new Range<>(tok(-1),tok(2)),mts.get(tok(2)));
  assertEquals(new Range<>(tok(2),tok(4)),mts.get(tok(4)));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitLimitSize(){
  mts=new MerkleTrees(partitioner);
  mts.addMerkleTree(2,fullRange());
  assertTrue(mts.split(tok(4)));
  assertEquals(2,mts.size());
  assertFalse(mts.split(tok(2)));
  assertEquals(2,mts.size());
  assertEquals(new Range<>(tok(4),tok(-1)),mts.get(tok(-1)));
  assertEquals(new Range<>(tok(-1),tok(4)),mts.get(tok(4)));
}

</code></pre>

<br>
<pre class="type-15 type-4 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit(){
  mts.split(tok(4));
  mts.split(tok(6));
  mts.split(tok(7));
  assertEquals(4,mts.size());
  assertEquals(new Range<>(tok(7),tok(-1)),mts.get(tok(-1)));
  assertEquals(new Range<>(tok(-1),tok(4)),mts.get(tok(3)));
  assertEquals(new Range<>(tok(-1),tok(4)),mts.get(tok(4)));
  assertEquals(new Range<>(tok(4),tok(6)),mts.get(tok(6)));
  assertEquals(new Range<>(tok(6),tok(7)),mts.get(tok(7)));
  assertEquals((byte)1,mts.get(tok(4)).depth);
  assertEquals((byte)2,mts.get(tok(6)).depth);
  assertEquals((byte)3,mts.get(tok(7)).depth);
  assertEquals((byte)3,mts.get(tok(-1)).depth);
  try {
    mts.split(tok(-1));
    fail("Shouldn't be able to split outside the initial range.");
  }
 catch (  AssertionError e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashInner(){
  byte[] val=DUMMY;
  byte[] lchildval=hashed(val,3,3,2);
  byte[] rchildval=hashed(val,2,2);
  byte[] fullval=hashed(val,3,3,2,2,2);
  Range<Token> full=new Range<>(tok(-1),tok(-1));
  Range<Token> lchild=new Range<>(tok(-1),tok(4));
  Range<Token> rchild=new Range<>(tok(4),tok(-1));
  Range<Token> invalid=new Range<>(tok(1),tok(-1));
  mts.split(tok(4));
  mts.split(tok(2));
  mts.split(tok(6));
  mts.split(tok(1));
  assertNull(mts.hash(full));
  assertNull(mts.hash(lchild));
  assertNull(mts.hash(rchild));
  assertNull(mts.hash(invalid));
  mts.get(tok(1)).hash(val);
  mts.get(tok(2)).hash(val);
  mts.get(tok(4)).hash(val);
  mts.get(tok(6)).hash(val);
  mts.get(tok(-1)).hash(val);
  assertHashEquals(fullval,mts.hash(full));
  assertHashEquals(lchildval,mts.hash(lchild));
  assertHashEquals(rchildval,mts.hash(rchild));
  assertNull(mts.hash(invalid));
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashPartial(){
  byte[] val=DUMMY;
  byte[] leftval=hashed(val,1,1);
  byte[] partialval=hashed(val,1);
  Range<Token> left=new Range<>(tok(-1),tok(4));
  Range<Token> partial=new Range<>(tok(2),tok(4));
  Range<Token> right=new Range<>(tok(4),tok(-1));
  Range<Token> linvalid=new Range<>(tok(1),tok(4));
  Range<Token> rinvalid=new Range<>(tok(4),tok(6));
  mts.split(tok(4));
  mts.split(tok(2));
  assertNull(mts.hash(left));
  assertNull(mts.hash(partial));
  assertNull(mts.hash(right));
  assertNull(mts.hash(linvalid));
  assertNull(mts.hash(rinvalid));
  mts.get(tok(2)).hash(val);
  mts.get(tok(4)).hash(val);
  mts.get(tok(-1)).hash(val);
  assertHashEquals(leftval,mts.hash(left));
  assertHashEquals(partialval,mts.hash(partial));
  assertHashEquals(val,mts.hash(right));
  assertNull(mts.hash(linvalid));
  assertNull(mts.hash(rinvalid));
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashDegenerate(){
  TOKEN_SCALE=new BigInteger("32");
  byte[] val=DUMMY;
  byte[] childfullval=hashed(val,5,5,4);
  byte[] fullval=hashed(val,5,5,4,3,2,1);
  Range<Token> childfull=new Range<>(tok(-1),tok(4));
  Range<Token> full=new Range<>(tok(-1),tok(-1));
  Range<Token> invalid=new Range<>(tok(4),tok(-1));
  mts.split(tok(16));
  mts.split(tok(8));
  mts.split(tok(4));
  mts.split(tok(2));
  mts.split(tok(1));
  assertNull(mts.hash(full));
  assertNull(mts.hash(childfull));
  assertNull(mts.hash(invalid));
  mts.get(tok(1)).hash(val);
  mts.get(tok(2)).hash(val);
  mts.get(tok(4)).hash(val);
  mts.get(tok(8)).hash(val);
  mts.get(tok(16)).hash(val);
  mts.get(tok(-1)).hash(val);
  assertHashEquals(fullval,mts.hash(full));
  assertHashEquals(childfullval,mts.hash(childfull));
  assertNull(mts.hash(invalid));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.NoSpamLoggerTest </h4><pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testLoggedResult() throws Exception {
  now=5;
  assertTrue(NoSpamLogger.log(mock,Level.INFO,5,TimeUnit.NANOSECONDS,statement,param));
  checkMock(Level.INFO);
  now=10;
  assertTrue(NoSpamLogger.log(mock,Level.WARN,5,TimeUnit.NANOSECONDS,statement,param));
  checkMock(Level.WARN);
  now=15;
  assertTrue(NoSpamLogger.log(mock,Level.ERROR,5,TimeUnit.NANOSECONDS,statement,param));
  checkMock(Level.ERROR);
  now=20;
  NoSpamLogger logger=NoSpamLogger.getLogger(mock,5,TimeUnit.NANOSECONDS);
  assertTrue(logger.info(statement,param));
  checkMock(Level.INFO);
  now=25;
  assertTrue(logger.warn(statement,param));
  checkMock(Level.WARN);
  now=30;
  assertTrue(logger.error(statement,param));
  checkMock(Level.ERROR);
  NoSpamLogger.NoSpamLogStatement nospamStatement=logger.getStatement(statement);
  now=35;
  assertTrue(nospamStatement.info(param));
  checkMock(Level.INFO);
  now=40;
  assertTrue(nospamStatement.warn(param));
  checkMock(Level.WARN);
  now=45;
  assertTrue(nospamStatement.error(param));
  checkMock(Level.ERROR);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testNoSpamLoggerDirect() throws Exception {
  now=5;
  NoSpamLogger logger=NoSpamLogger.getLogger(mock,5,TimeUnit.NANOSECONDS);
  assertTrue(logger.info(statement,param));
  assertFalse(logger.info(statement,param));
  assertFalse(logger.warn(statement,param));
  assertFalse(logger.error(statement,param));
  assertLoggedSizes(1,0,0);
  NoSpamLogStatement statement=logger.getStatement("swizzle2{}",10,TimeUnit.NANOSECONDS);
  assertFalse(statement.warn(param));
  assertLoggedSizes(1,0,0);
  now=10;
  assertTrue(statement.warn(param));
  assertLoggedSizes(1,1,0);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testNoSpamLoggerStatementDirect() throws Exception {
  NoSpamLogger.NoSpamLogStatement nospam=NoSpamLogger.getStatement(mock,statement,5,TimeUnit.NANOSECONDS);
  now=5;
  assertTrue(nospam.info(statement,param));
  assertFalse(nospam.info(statement,param));
  assertFalse(nospam.warn(statement,param));
  assertFalse(nospam.error(statement,param));
  assertLoggedSizes(1,0,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.SerializationsTest </h4><pre class="type-6 type-7 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBloomFilterRead1000() throws IOException {
  if (EXECUTE_WRITES) {
    testBloomFilterWrite1000(true,false);
    testBloomFilterWrite1000(true,true);
  }
  try (DataInputStream in=getInput("3.0","utils.BloomFilter1000.bin");IFilter filter=FilterFactory.deserialize(in,true,false)){
    boolean present;
    for (int i=0; i < 1000; i++) {
      present=filter.isPresent(Util.dk(Int32Type.instance.decompose(i)));
      Assert.assertTrue(present);
    }
    for (int i=1000; i < 2000; i++) {
      present=filter.isPresent(Util.dk(Int32Type.instance.decompose(i)));
      Assert.assertFalse(present);
    }
  }
   try (DataInputStream in=getInput("2.1","utils.BloomFilter1000.bin");IFilter filter=FilterFactory.deserialize(in,true,true)){
    boolean present;
    for (int i=0; i < 1000; i++) {
      present=filter.isPresent(Util.dk(Int32Type.instance.decompose(i)));
      Assert.assertTrue(present);
    }
    for (int i=1000; i < 2000; i++) {
      present=filter.isPresent(Util.dk(Int32Type.instance.decompose(i)));
      Assert.assertFalse(present);
    }
  }
   int falsePositive=0;
  int falseNegative=0;
  try (DataInputStream in=getInput("2.1","utils.BloomFilter1000.bin");IFilter filter=FilterFactory.deserialize(in,true,false)){
    boolean present;
    for (int i=0; i < 1000; i++) {
      present=filter.isPresent(Util.dk(Int32Type.instance.decompose(i)));
      if (!present)       falseNegative++;
    }
    for (int i=1000; i < 2000; i++) {
      present=filter.isPresent(Util.dk(Int32Type.instance.decompose(i)));
      if (present)       falsePositive++;
    }
  }
   Assert.assertEquals(1000,falseNegative);
  Assert.assertEquals(0,falsePositive);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.StreamingHistogramTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFunction() throws Exception {
  StreamingHistogram hist=new StreamingHistogram(5);
  long[] samples=new long[]{23,19,10,16,36,2,9,32,30,45};
  for (int i=0; i < 7; i++) {
    hist.update(samples[i]);
  }
  Map<Double,Long> expected1=new LinkedHashMap<Double,Long>(5);
  expected1.put(2.0,1L);
  expected1.put(9.5,2L);
  expected1.put(17.5,2L);
  expected1.put(23.0,1L);
  expected1.put(36.0,1L);
  Iterator<Map.Entry<Double,Long>> expectedItr=expected1.entrySet().iterator();
  for (  Map.Entry<Double,Long> actual : hist.getAsMap().entrySet()) {
    Map.Entry<Double,Long> entry=expectedItr.next();
    assertEquals(entry.getKey(),actual.getKey(),0.01);
    assertEquals(entry.getValue(),actual.getValue());
  }
  StreamingHistogram hist2=new StreamingHistogram(3);
  for (int i=7; i < samples.length; i++) {
    hist2.update(samples[i]);
  }
  hist.merge(hist2);
  Map<Double,Long> expected2=new LinkedHashMap<Double,Long>(5);
  expected2.put(2.0,1L);
  expected2.put(9.5,2L);
  expected2.put(19.33,3L);
  expected2.put(32.67,3L);
  expected2.put(45.0,1L);
  expectedItr=expected2.entrySet().iterator();
  for (  Map.Entry<Double,Long> actual : hist.getAsMap().entrySet()) {
    Map.Entry<Double,Long> entry=expectedItr.next();
    assertEquals(entry.getKey(),actual.getKey(),0.01);
    assertEquals(entry.getValue(),actual.getValue());
  }
  assertEquals(3.28,hist.sum(15),0.01);
  assertEquals(10.0,hist.sum(50),0.01);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.TopKSamplerTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSamplerSingleInsertionsEqualMulti() throws TimeoutException {
  TopKSampler<String> sampler=new TopKSampler<String>();
  sampler.beginSampling(10);
  insert(sampler);
  waitForEmpty(1000);
  SamplerResult single=sampler.finishSampling(10);
  TopKSampler<String> sampler2=new TopKSampler<String>();
  sampler2.beginSampling(10);
  for (int i=1; i <= 10; i++) {
    String key="item" + i;
    sampler2.addSample(key,MurmurHash.hash64(key),i);
  }
  waitForEmpty(1000);
  Assert.assertEquals(countMap(single.topK),countMap(sampler2.finishSampling(10).topK));
  Assert.assertEquals(sampler2.hll.cardinality(),10);
  Assert.assertEquals(sampler.hll.cardinality(),sampler2.hll.cardinality());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.concurrent.AbstractTransactionalTest </h4><pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testPrepare() throws Exception {
  TestableTransaction txn;
  txn=newTest();
  txn.assertInProgress();
  txn.testing.prepareToCommit();
  txn.assertPrepared();
  txn.testing.close();
  txn.assertAborted();
  txn=newTest();
  txn.assertInProgress();
  txn.testing.prepareToCommit();
  txn.assertPrepared();
  Assert.assertNull(txn.testing.abort(null));
  txn.assertAborted();
}

</code></pre>

<br>
<pre class="type-13 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThrowableReturn() throws Exception {
  TestableTransaction txn;
  txn=newTest();
  Throwable t=new RuntimeException();
  txn.testing.prepareToCommit();
  if (txn.commitCanThrow()) {
    try {
      txn.testing.commit(t);
    }
 catch (    Throwable tt) {
      Assert.assertEquals(t,tt);
    }
    Assert.assertEquals(t,txn.testing.abort(t));
    Assert.assertEquals(0,t.getSuppressed().length);
  }
 else {
    Assert.assertEquals(t,txn.testing.commit(t));
    Assert.assertEquals(t,txn.testing.abort(t));
    Assert.assertTrue(t.getSuppressed()[0] instanceof IllegalStateException);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadCommit() throws Exception {
  TestableTransaction txn;
  txn=newTest();
  try {
    txn.testing.commit(null);
    Assert.assertTrue(false);
  }
 catch (  IllegalStateException t) {
  }
  txn.assertInProgress();
  Assert.assertNull(txn.testing.abort(null));
  txn.assertAborted();
  try {
    txn.testing.commit(null);
    Assert.assertTrue(false);
  }
 catch (  IllegalStateException t) {
  }
  txn.assertAborted();
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNoPrepare() throws Exception {
  TestableTransaction txn;
  txn=newTest();
  txn.assertInProgress();
  txn.testing.close();
  txn.assertAborted();
  txn=newTest();
  txn.assertInProgress();
  Assert.assertNull(txn.testing.abort(null));
  txn.assertAborted();
}

</code></pre>

<br>
<pre class="type-4 type-5 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws Exception {
  TestableTransaction txn=newTest();
  txn.assertInProgress();
  txn.testing.prepareToCommit();
  txn.assertPrepared();
  Assert.assertNull(txn.testing.commit(null));
  txn.assertCommitted();
  txn.testing.close();
  txn.assertCommitted();
  Throwable t=txn.testing.abort(null);
  Assert.assertTrue(t instanceof IllegalStateException);
  txn.assertCommitted();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.concurrent.AccumulatorTest </h4><pre class="type-15 type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAndIterator(){
  Accumulator<String> accu=new Accumulator(4);
  accu.add("3");
  accu.add("2");
  accu.add("4");
  assertEquals("3",accu.get(0));
  assertEquals("2",accu.get(1));
  assertEquals("4",accu.get(2));
  try {
    assertEquals(null,accu.get(3));
    fail();
  }
 catch (  IndexOutOfBoundsException e) {
  }
  accu.add("0");
  assertEquals("0",accu.get(3));
  Iterator<String> iter=accu.iterator();
  assertEquals("3",iter.next());
  assertEquals("2",iter.next());
  assertEquals("4",iter.next());
  assertEquals("0",iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsEmptyAndSize(){
  Accumulator<Integer> accu=new Accumulator(4);
  assertTrue(accu.isEmpty());
  assertEquals(0,accu.size());
  accu.add(1);
  accu.add(2);
  assertTrue(!accu.isEmpty());
  assertEquals(2,accu.size());
  accu.add(3);
  accu.add(4);
  assertTrue(!accu.isEmpty());
  assertEquals(4,accu.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.concurrent.RefCountedTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testLinkedList(){
  final List iterable=new LinkedList();
  Pair<Object,Object> p=Pair.create(iterable,iterable);
  RefCounted.Tidy tidier=new RefCounted.Tidy(){
    Object ref=iterable;
    @Override public void tidy() throws Exception {
    }
    @Override public String name(){
      return "42";
    }
  }
;
  Ref ref=new Ref(new AtomicReference<List>(iterable),tidier);
  for (int i=0; i < entryCount; i++) {
    iterable.add(p);
  }
  Visitor visitor=new Visitor();
  visitor.run();
  ref.close();
  System.out.println("LinkedList visited " + visitor.lastVisitedCount + " iterations "+ visitor.iterations);
  Assert.assertTrue(visitor.lastVisitedCount > entryCount && visitor.lastVisitedCount < entryCount + fudgeFactor);
  Assert.assertTrue(visitor.iterations > (entryCount * 3) && visitor.iterations < (entryCount * 3) + fudgeFactor);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testBlockingQueue(){
  final BlockingQueue iterable=new LinkedBlockingQueue();
  Pair<Object,Object> p=Pair.create(iterable,iterable);
  RefCounted.Tidy tidier=new RefCounted.Tidy(){
    Object ref=iterable;
    @Override public void tidy() throws Exception {
    }
    @Override public String name(){
      return "42";
    }
  }
;
  Ref ref=new Ref(new AtomicReference<BlockingQueue>(iterable),tidier);
  for (int i=0; i < entryCount; i++) {
    iterable.add(p);
  }
  Visitor visitor=new Visitor();
  visitor.run();
  ref.close();
  System.out.println("BlockingQueue visited " + visitor.lastVisitedCount + " iterations "+ visitor.iterations);
  Assert.assertTrue(visitor.lastVisitedCount < 10);
  Assert.assertTrue(visitor.iterations > entryCount && visitor.iterations < entryCount + fudgeFactor);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testArray() throws Exception {
  final Object objects[]=new Object[entryCount];
  for (int i=0; i < entryCount; i+=2)   objects[i]=new Object();
  File f=File.createTempFile("foo","bar");
  RefCounted.Tidy tidier=new RefCounted.Tidy(){
    Object ref=objects;
    File fileRef=f;
    @Override public void tidy() throws Exception {
    }
    @Override public String name(){
      return "42";
    }
  }
;
  Ref ref=new Ref(new AtomicReference<Object[]>(objects),tidier);
  Visitor visitor=new Visitor();
  visitor.run();
  ref.close();
  System.out.println("Array visited " + visitor.lastVisitedCount + " iterations "+ visitor.iterations);
  Assert.assertTrue(visitor.lastVisitedCount > (entryCount / 2) && visitor.lastVisitedCount < (entryCount / 2) + fudgeFactor);
  Assert.assertTrue(visitor.iterations > (entryCount / 2) && visitor.iterations < (entryCount / 2) + fudgeFactor);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testHashMap(){
  final Map<Object,Object> map=new HashMap<Object,Object>();
  RefCounted.Tidy tidier=new RefCounted.Tidy(){
    Object ref=map;
    @Override public void tidy() throws Exception {
    }
    @Override public String name(){
      return "42";
    }
  }
;
  Ref ref=new Ref(new AtomicReference<Map<Object,Object>>(map),tidier);
  Object o=new Object();
  for (int i=0; i < entryCount; i++) {
    map.put(new Object(),o);
  }
  Visitor visitor=new Visitor();
  visitor.run();
  ref.close();
  System.out.println("HashMap visited " + visitor.lastVisitedCount + " iterations "+ visitor.iterations);
  Assert.assertTrue(visitor.lastVisitedCount > (entryCount * 2) && visitor.lastVisitedCount < (entryCount * 2) + fudgeFactor);
  Assert.assertTrue(visitor.iterations > (entryCount * 3) && visitor.iterations < (entryCount * 3) + fudgeFactor);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testConcurrentMap(){
  final Map<Object,Object> map=new ConcurrentHashMap<Object,Object>();
  RefCounted.Tidy tidier=new RefCounted.Tidy(){
    Object ref=map;
    @Override public void tidy() throws Exception {
    }
    @Override public String name(){
      return "42";
    }
  }
;
  Ref ref=new Ref(new AtomicReference<Map<Object,Object>>(map),tidier);
  Object o=new Object();
  for (int i=0; i < entryCount; i++) {
    map.put(new Object(),o);
  }
  Visitor visitor=new Visitor();
  visitor.run();
  ref.close();
  System.out.println("ConcurrentHashMap visited " + visitor.lastVisitedCount + " iterations "+ visitor.iterations);
  Assert.assertTrue(visitor.lastVisitedCount > entryCount && visitor.lastVisitedCount < entryCount + fudgeFactor);
  Assert.assertTrue(visitor.iterations > entryCount * 2 && visitor.iterations < entryCount * 2 + fudgeFactor);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.memory.NativeAllocatorTest </h4><pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBookKeeping() throws ExecutionException, InterruptedException {
{
    final ScheduledExecutorService exec=Executors.newScheduledThreadPool(2);
    final OpOrder order=new OpOrder();
    final OpOrder.Group group=order.start();
    final CountDownLatch canClean=new CountDownLatch(1);
    final CountDownLatch isClean=new CountDownLatch(1);
    final AtomicReference<NativeAllocator> allocatorRef=new AtomicReference<>();
    final AtomicReference<OpOrder.Barrier> barrier=new AtomicReference<>();
    final NativeAllocator allocator=new NativeAllocator(new NativePool(1,100,0.75f,new Runnable(){
      public void run(){
        try {
          canClean.await();
        }
 catch (        InterruptedException e) {
          throw new AssertionError();
        }
        if (isClean.getCount() > 0) {
          allocatorRef.get().offHeap().released(80);
          isClean.countDown();
        }
      }
    }
));
    allocatorRef.set(allocator);
    final Runnable markBlocking=new Runnable(){
      public void run(){
        barrier.set(order.newBarrier());
        barrier.get().issue();
        barrier.get().markBlocking();
      }
    }
;
    final Runnable run=new Runnable(){
      public void run(){
        allocator.allocate(10,group);
        Assert.assertEquals(10,allocator.offHeap().owns());
        allocator.offHeap().adjust(-10,group);
        Assert.assertEquals(0,allocator.offHeap().owns());
        allocator.offHeap().adjust(10,group);
        Assert.assertEquals(10,allocator.offHeap().owns());
        boolean success=false;
        try {
          allocator.offHeap().allocate(-10,group);
        }
 catch (        AssertionError e) {
          success=true;
        }
        Assert.assertTrue(success);
        Uninterruptibles.sleepUninterruptibly(10L,TimeUnit.MILLISECONDS);
        Assert.assertEquals(1,isClean.getCount());
        allocator.allocate(70,group);
        Assert.assertEquals(80,allocator.offHeap().owns());
        canClean.countDown();
        try {
          isClean.await(10L,TimeUnit.MILLISECONDS);
        }
 catch (        InterruptedException e) {
          throw new AssertionError();
        }
        Assert.assertEquals(0,isClean.getCount());
        Assert.assertEquals(0,allocator.offHeap().owns());
        exec.schedule(markBlocking,10L,TimeUnit.MILLISECONDS);
        allocator.allocate(110,group);
        Assert.assertNotNull(barrier.get());
        Assert.assertEquals(110,allocator.offHeap().owns());
      }
    }
;
    exec.submit(run).get();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.vint.VIntCodingTest </h4><pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneByteCapacity() throws Exception {
  int biggestOneByte=127;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  VIntCoding.writeUnsignedVInt(biggestOneByte,dos);
  dos.flush();
  Assert.assertEquals(1,baos.toByteArray().length);
  DataOutputBuffer dob=new DataOutputBuffer();
  dob.writeUnsignedVInt(biggestOneByte);
  Assert.assertEquals(1,dob.buffer().remaining());
  dob.close();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
