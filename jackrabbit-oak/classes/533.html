<h3 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.ACLTest (41 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(24)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(18)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(14)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(13)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(3)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDifferentPrivilegeImplementation() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,readPriv,false);
  assertFalse(acl.addEntry(new PrincipalImpl(testPrincipal.getName()),readPriv,false));
  assertFalse(acl.addEntry(new Principal(){
    public String getName(){
      return testPrincipal.getName();
    }
  }
,readPriv,false));
}

</code></pre>

<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllowWriteDenyRemoveGroupEntries() throws Exception {
  Principal everyone=principalManager.getEveryone();
  Privilege[] grPriv=privilegesFromNames(REP_WRITE);
  Privilege[] dePriv=privilegesFromNames(JCR_REMOVE_CHILD_NODES);
  acl.addEntry(everyone,grPriv,true,Collections.<String,Value>emptyMap());
  acl.addEntry(everyone,dePriv,false,Collections.<String,Value>emptyMap());
  Set<Privilege> allows=new HashSet<Privilege>();
  Set<Privilege> denies=new HashSet<Privilege>();
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  for (  AccessControlEntry en : entries) {
    if (everyone.equals(en.getPrincipal()) && en instanceof JackrabbitAccessControlEntry) {
      JackrabbitAccessControlEntry ace=(JackrabbitAccessControlEntry)en;
      Privilege[] privs=ace.getPrivileges();
      if (ace.isAllow()) {
        allows.addAll(Arrays.asList(privs));
      }
 else {
        denies.addAll(Arrays.asList(privs));
      }
    }
  }
  Privilege[] expected=privilegesFromNames(JCR_ADD_CHILD_NODES,JCR_REMOVE_NODE,JCR_MODIFY_PROPERTIES,JCR_NODE_TYPE_MANAGEMENT);
  assertEquals(expected.length,allows.size());
  assertEquals(ImmutableSet.copyOf(expected),allows);
  assertEquals(1,denies.size());
  assertArrayEquals(privilegesFromNames(JCR_REMOVE_CHILD_NODES),denies.toArray(new Privilege[denies.size()]));
}

</code></pre>

<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReorder() throws Exception {
  Privilege[] read=privilegesFromNames(JCR_READ,JCR_READ_ACCESS_CONTROL);
  Privilege[] write=privilegesFromNames(JCR_WRITE);
  AbstractAccessControlList acl=createEmptyACL();
  acl.addAccessControlEntry(testPrincipal,read);
  acl.addEntry(testPrincipal,write,false);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),write);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  AccessControlEntry first=entries[0];
  AccessControlEntry second=entries[1];
  AccessControlEntry third=entries[2];
  acl.orderBefore(second,first);
  assertEquals(second,acl.getEntries().get(0));
  assertEquals(first,acl.getEntries().get(1));
  assertEquals(third,acl.getEntries().get(2));
  acl.orderBefore(third,first);
  assertEquals(second,acl.getEntries().get(0));
  assertEquals(third,acl.getEntries().get(1));
  assertEquals(first,acl.getEntries().get(2));
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleEntries() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,privileges,true);
  privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  assertTrue(acl.addEntry(testPrincipal,privileges,true));
  assertTrue(acl.size() == 1);
  assertACE(acl.getEntries().get(0),true,privileges);
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntryTwice() throws Exception {
  acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap());
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap()));
}

</code></pre>

<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplementaryEntry3() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  acl.addAccessControlEntry(testPrincipal,privilegesFromNames(JCR_WRITE));
  acl.addEntry(testPrincipal,readPriv,false);
  acl.addAccessControlEntry(testPrincipal,readPriv);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertEquals(1,entries.size());
}

</code></pre>

<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplementaryGroupEntry() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Principal everyone=principalManager.getEveryone();
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(everyone,readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  acl.addEntry(everyone,writePriv,true);
  acl.addEntry(testPrincipal,readPriv,false);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(2,entries.length);
  JackrabbitAccessControlEntry first=(JackrabbitAccessControlEntry)entries[0];
  assertEquals(everyone,first.getPrincipal());
  JackrabbitAccessControlEntry second=(JackrabbitAccessControlEntry)entries[1];
  assertEquals(testPrincipal,second.getPrincipal());
  assertACE(second,false,privilegesFromNames(JCR_READ,JCR_WRITE));
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntry() throws Exception {
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true));
  assertFalse(acl.isEmpty());
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void before() throws Exception {
  super.before();
  privilegeManager=getPrivilegeManager(root);
  principalManager=getPrincipalManager(root);
  acl=createEmptyACL();
  testPrincipal=getTestPrincipal();
  testPrivileges=privilegesFromNames(JCR_ADD_CHILD_NODES,JCR_LOCK_MANAGEMENT);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInsertionOrder() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Privilege[] addNodePriv=privilegesFromNames(JCR_ADD_CHILD_NODES);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,getValueFactory().createValue("/.*"));
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  acl.addEntry(testPrincipal,addNodePriv,true,restrictions);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertACE(entries.get(0),true,readPriv);
  assertACE(entries.get(1),false,writePriv);
  assertACE(entries.get(2),true,addNodePriv);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInvalidRestrictionType() throws Exception {
  RestrictionProvider rp=new TestRestrictionProvider("restr",Type.NAME,false);
  JackrabbitAccessControlList acl=createACL(getTestPath(),new ArrayList(),namePathMapper,rp);
  try {
    acl.addEntry(testPrincipal,testPrivileges,false,Collections.<String,Value>singletonMap("restr",getValueFactory().createValue(true)));
    fail("Invalid restriction type.");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddAccessControlEntry() throws Exception {
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  assertFalse(acl.isEmpty());
}

</code></pre>

<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetEntryForGroupPrincipal() throws Exception {
  Privilege[] privs=privilegesFromNames(JCR_READ);
  Group grPrincipal=(Group)principalManager.getEveryone();
  assertTrue(acl.addAccessControlEntry(grPrincipal,privs));
  assertTrue(acl.addEntry(grPrincipal,privs,false));
  assertEquals(1,acl.size());
  assertFalse(acl.getEntries().get(0).isAllow());
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testComplementaryEntry2() throws Exception {
  Privilege[] repwrite=privilegesFromNames(REP_WRITE);
  acl.addAccessControlEntry(testPrincipal,repwrite);
  Privilege[] modProperties=privilegesFromNames(JCR_MODIFY_PROPERTIES);
  assertTrue(acl.addEntry(testPrincipal,modProperties,false));
  assertTrue(acl.size() == 2);
  Privilege[] expected=privilegesFromNames(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_NODE_TYPE_MANAGEMENT);
  assertACE(acl.getEntries().get(0),true,expected);
  assertACE(acl.getEntries().get(1),false,modProperties);
}

</code></pre>

<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddEntriesWithCustomPrincipal() throws Exception {
  Principal oakPrincipal=new PrincipalImpl("anonymous");
  Principal principal=new Principal(){
    @Override public String getName(){
      return "anonymous";
    }
  }
;
  assertTrue(acl.addAccessControlEntry(oakPrincipal,privilegesFromNames(JCR_READ)));
  assertTrue(acl.addAccessControlEntry(principal,privilegesFromNames(JCR_READ_ACCESS_CONTROL)));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(principal,privilegesFromNames(JCR_READ),false));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertArrayEquals(privilegesFromNames(JCR_READ_ACCESS_CONTROL),acl.getAccessControlEntries()[0].getPrivileges());
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleEntries2() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  acl.addEntry(testPrincipal,privileges,true);
  Privilege[] achPrivs=privilegesFromNames(JCR_ADD_CHILD_NODES);
  assertFalse(acl.addEntry(testPrincipal,achPrivs,true));
  assertTrue(acl.size() == 1);
  assertACE(acl.getEntries().get(0),true,privileges);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInternalPrincipal() throws RepositoryException {
  Principal internal=new PrincipalImpl("unknown");
  acl.addAccessControlEntry(internal,privilegesFromNames(JCR_READ));
}

</code></pre>

<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUpdateGroupEntry() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Principal everyone=principalManager.getEveryone();
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(everyone,readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  acl.addEntry(everyone,writePriv,true);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  JackrabbitAccessControlEntry princ2AllowEntry=(JackrabbitAccessControlEntry)entries[1];
  assertEquals(everyone,princ2AllowEntry.getPrincipal());
  assertACE(princ2AllowEntry,true,privilegesFromNames(JCR_READ,JCR_WRITE));
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testUnsupportedRestrictions2() throws Exception {
  RestrictionProvider rp=new TestRestrictionProvider("restr",Type.NAME,false);
  JackrabbitAccessControlList acl=createACL(getTestPath(),new ArrayList(),namePathMapper,rp);
  try {
    acl.addEntry(testPrincipal,testPrivileges,false,Collections.<String,Value>singletonMap("unsupported",getValueFactory().createValue("value")));
    fail("Unsupported restriction must be detected.");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testComplementaryEntry1() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  acl.addEntry(testPrincipal,privileges,true);
  privileges=privilegesFromNames(JCR_READ);
  assertTrue(acl.addEntry(testPrincipal,privileges,false));
  assertTrue(acl.size() == 2);
  assertACE(acl.getEntries().get(0),true,privilegesFromNames(JCR_ADD_CHILD_NODES));
  assertACE(acl.getEntries().get(1),false,privilegesFromNames(JCR_READ));
}

</code></pre>

<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiplePrincipals() throws Exception {
  Principal everyone=principalManager.getEveryone();
  Privilege[] privs=privilegesFromNames(JCR_READ);
  acl.addAccessControlEntry(testPrincipal,privs);
  assertFalse(acl.addAccessControlEntry(testPrincipal,privs));
  assertTrue(acl.addAccessControlEntry(everyone,privs));
  assertTrue(acl.getAccessControlEntries().length == 2);
  assertEquals(everyone,acl.getAccessControlEntries()[1].getPrincipal());
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInsertionOrder2() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Privilege[] addNodePriv=privilegesFromNames(JCR_ADD_CHILD_NODES);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,getValueFactory().createValue("/.*"));
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(testPrincipal,addNodePriv,true,restrictions);
  acl.addEntry(testPrincipal,writePriv,false);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertACE(entries.get(0),true,readPriv);
  assertACE(entries.get(1),true,addNodePriv);
  assertACE(entries.get(2),false,writePriv);
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntry2() throws Exception {
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap()));
  assertFalse(acl.isEmpty());
}

</code></pre>

<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMvRestrictions() throws Exception {
  ValueFactory vf=getValueFactory();
  Value[] vs=new Value[]{vf.createValue(JcrConstants.NT_FILE,PropertyType.NAME),vf.createValue(JcrConstants.NT_FOLDER,PropertyType.NAME)};
  Map<String,Value[]> mvRestrictions=Collections.singletonMap(REP_NT_NAMES,vs);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,vf.createValue("/.*"));
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,false,restrictions,mvRestrictions));
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,false,restrictions,mvRestrictions));
  assertEquals(1,acl.getAccessControlEntries().length);
  JackrabbitAccessControlEntry ace=(JackrabbitAccessControlEntry)acl.getAccessControlEntries()[0];
  try {
    ace.getRestriction(REP_NT_NAMES);
    fail();
  }
 catch (  ValueFormatException e) {
  }
  Value[] vvs=ace.getRestrictions(REP_NT_NAMES);
  assertArrayEquals(vs,vvs);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testUnknownPrincipal() throws Exception {
  Principal unknownPrincipal=new InvalidTestPrincipal("unknown");
  try {
    acl.addAccessControlEntry(unknownPrincipal,privilegesFromNames(JCR_READ));
    fail("Adding an ACE with an unknown principal should fail");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComplementaryEntry() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,privileges,true);
  assertTrue(acl.addEntry(testPrincipal,privileges,false));
  assertEquals(1,acl.size());
  assertACE(acl.getEntries().get(0),false,privileges);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testRemoveNonExisting() throws Exception {
  try {
    acl.removeAccessControlEntry(createEntry(testPrincipal,testPrivileges,true));
    fail("Removing a non-existing ACE should fail.");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testAddEntryWithInvalidPrivilege() throws Exception {
  try {
    acl.addAccessControlEntry(testPrincipal,new Privilege[]{new InvalidPrivilege()});
    fail("Adding an ACE with invalid privileges should fail.");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNewEntriesAppendedAtEnd() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(principalManager.getEveryone(),readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  JackrabbitAccessControlEntry last=(JackrabbitAccessControlEntry)entries[2];
  assertEquals(testPrincipal,last.getPrincipal());
  assertACE(last,false,writePriv);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMandatoryRestrictions() throws Exception {
  RestrictionProvider rp=new TestRestrictionProvider("mandatory",Type.NAME,true);
  JackrabbitAccessControlList acl=createACL(getTestPath(),new ArrayList(),namePathMapper,rp);
  try {
    acl.addEntry(testPrincipal,testPrivileges,false,Collections.<String,Value>emptyMap());
    fail("Mandatory restriction must be enforced.");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveEntry() throws Exception {
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  acl.removeAccessControlEntry(acl.getAccessControlEntries()[0]);
  assertTrue(acl.isEmpty());
}

</code></pre>

<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReorderToTheEnd() throws Exception {
  Privilege[] read=privilegesFromNames(JCR_READ,JCR_READ_ACCESS_CONTROL);
  Privilege[] write=privilegesFromNames(JCR_WRITE);
  AbstractAccessControlList acl=createEmptyACL();
  acl.addAccessControlEntry(testPrincipal,read);
  acl.addEntry(testPrincipal,write,false);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),write);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertEquals(3,entries.size());
  AccessControlEntry first=entries.get(0);
  acl.orderBefore(first,null);
  List<? extends JackrabbitAccessControlEntry> entriesAfter=acl.getEntries();
  assertEquals(first,entriesAfter.get(2));
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testRemoveInvalidEntry() throws Exception {
  try {
    acl.removeAccessControlEntry(new JackrabbitAccessControlEntry(){
      public boolean isAllow(){
        return false;
      }
      public String[] getRestrictionNames(){
        return new String[0];
      }
      public Value getRestriction(      String restrictionName){
        return null;
      }
      public Value[] getRestrictions(      String restrictionName){
        return null;
      }
      public Principal getPrincipal(){
        return testPrincipal;
      }
      public Privilege[] getPrivileges(){
        return testPrivileges;
      }
    }
);
    fail("Passing an unknown ACE should fail");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testAddEntryWithoutPrivilege() throws Exception {
  try {
    acl.addAccessControlEntry(testPrincipal,new Privilege[0]);
    fail("Adding an ACE with empty privilege array should fail.");
  }
 catch (  AccessControlException e) {
  }
  try {
    acl.addAccessControlEntry(testPrincipal,null);
    fail("Adding an ACE with null privileges should fail.");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNullPrincipal() throws Exception {
  try {
    acl.addAccessControlEntry(null,privilegesFromNames(JCR_READ));
    fail("Adding an ACE with null principal should fail");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testEmptyPrincipal() throws Exception {
  try {
    acl.addAccessControlEntry(new PrincipalImpl(""),privilegesFromNames(JCR_READ));
    fail("Adding an ACE with empty-named principal should fail");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateAndComplementary() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Privilege[] acReadPriv=privilegesFromNames(JCR_READ_ACCESS_CONTROL);
  assertTrue(acl.addEntry(testPrincipal,readPriv,true));
  assertTrue(acl.addEntry(testPrincipal,writePriv,true));
  assertTrue(acl.addEntry(testPrincipal,acReadPriv,true));
  assertEquals(1,acl.size());
  assertTrue(acl.addEntry(testPrincipal,readPriv,false));
  assertEquals(2,acl.size());
  assertACE(acl.getEntries().get(0),true,privilegesFromNames(JCR_WRITE,JCR_READ_ACCESS_CONTROL));
  assertACE(acl.getEntries().get(1),false,readPriv);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testUnsupportedRestrictions() throws Exception {
  Map<String,Value> restrictions=Collections.singletonMap("unknownRestriction",getValueFactory().createValue("value"));
  try {
    acl.addEntry(testPrincipal,testPrivileges,false,restrictions);
    fail("Invalid restrictions -> AccessControlException expected");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testReorderInvalidEntries() throws Exception {
  Privilege[] read=privilegesFromNames(JCR_READ,JCR_READ_ACCESS_CONTROL);
  Privilege[] write=privilegesFromNames(JCR_WRITE);
  acl.addAccessControlEntry(testPrincipal,read);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),write);
  AccessControlEntry invalid=createEntry(testPrincipal,false,null,JCR_WRITE);
  try {
    acl.orderBefore(invalid,acl.getEntries().get(0));
    fail("src entry not contained in list -> reorder should fail.");
  }
 catch (  AccessControlException e) {
  }
  try {
    acl.orderBefore(acl.getEntries().get(0),invalid);
    fail("dest entry not contained in list -> reorder should fail.");
  }
 catch (  AccessControlException e) {
  }
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveEntries() throws Exception {
  JackrabbitAccessControlList acl=createACL(getTestPath(),createTestEntries(),namePathMapper);
  for (  AccessControlEntry ace : acl.getAccessControlEntries()) {
    acl.removeAccessControlEntry(ace);
  }
  assertTrue(acl.isEmpty());
}

</code></pre>

<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestrictions() throws Exception {
  String[] names=acl.getRestrictionNames();
  assertNotNull(names);
  assertEquals(4,names.length);
  assertArrayEquals(new String[]{REP_GLOB,REP_NT_NAMES,REP_PREFIXES,REP_ITEM_NAMES},names);
  assertEquals(PropertyType.STRING,acl.getRestrictionType(names[0]));
  assertEquals(PropertyType.NAME,acl.getRestrictionType(names[1]));
  assertEquals(PropertyType.STRING,acl.getRestrictionType(names[2]));
  assertEquals(PropertyType.NAME,acl.getRestrictionType(names[3]));
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  assertTrue(acl.addAccessControlEntry(testPrincipal,writePriv));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertFalse(acl.addAccessControlEntry(testPrincipal,writePriv));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertFalse(acl.addEntry(testPrincipal,writePriv,true));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(testPrincipal,writePriv,false));
  assertEquals(1,acl.getAccessControlEntries().length);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,getValueFactory().createValue("/.*"));
  assertTrue(acl.addEntry(testPrincipal,writePriv,false,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertFalse(acl.addEntry(testPrincipal,writePriv,false,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(testPrincipal,writePriv,true,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
