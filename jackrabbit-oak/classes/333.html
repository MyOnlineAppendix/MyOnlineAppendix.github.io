<h3 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.AggregateTest (19 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(18)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(18)</kbd></button>&nbsp;<button id="15"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('15')" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements"><kbd id="tag-15"class="label-info"style="display: inline-block;font-size:7pt" >ConditionMatcher&nbsp;(16)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(16)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(2)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propOneLevelNamed() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  child(rules,"nt:folder/properties/p1").setProperty(LuceneIndexConstants.PROP_NAME,"a/p1");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate ag=defn.getApplicableIndexingRule("nt:folder").getAggregate();
  NodeBuilder nb=newNode("nt:folder");
  nb.child("a").setProperty("p1","foo");
  nb.child("a").setProperty("p2","foo");
  nb.child("b").setProperty("p2","foo");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getPropPaths().size());
  assertThat(col.getPropPaths(),hasItems("a/p1"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oneLevelNamed() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("a")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a");
  nb.child("b");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRelativeNodeInclude() throws Exception {
  Aggregate agContent=new Aggregate("app:Page",of(ni(null,"jcr:content",true)));
  mapper.add("app:Page",agContent);
  NodeBuilder nb=newNode("app:Page");
  nb.child("jcr:content").setProperty("foo","bar");
  agContent.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("jcr:content"));
  assertEquals(2,col.nodeResults.get("jcr:content").size());
  assertEquals(1,col.getRelativeNodeResults("jcr:content","jcr:content").size());
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void recursionEnabledWithLimitCheck() throws Exception {
  int limit=5;
  Aggregate agFile=new Aggregate("nt:file",of(ni("*")),limit);
  mapper.add("nt:file",agFile);
  List<String> expectedPaths=Lists.newArrayList();
  NodeBuilder nb=newNode("nt:file");
  nb.child("a").child("c");
  String path="";
  NodeBuilder fb=nb;
  for (int i=0; i < limit + 2; i++) {
    String name="f " + i;
    path=PathUtils.concat(path,name);
    fb=fb.child(name);
    fb.setProperty(JCR_PRIMARYTYPE,"nt:file");
    if (i < limit) {
      expectedPaths.add(path);
    }
  }
  expectedPaths.add("a");
  agFile.collectAggregates(nb.getNodeState(),col);
  assertEquals(expectedPaths.size(),col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems(toArray(expectedPaths,String.class)));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiLevelAll() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("*"),ni("*/*")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  nb.child("d").child("e").child("f");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(5,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","b","d","a/c","d/e"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiLevelNamed() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("a"),ni("d/e")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  nb.child("d").child("e").child("f");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(2,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","d/e"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiLevelNamedSubAll() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("a"),ni("d/*/*")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  nb.child("d").child("e").child("f");
  nb.child("d").child("e").child("f2");
  nb.child("d").child("e2").child("f3");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(4,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","d/e/f","d/e/f2","d/e2/f3"));
}

</code></pre>

<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleAggregateConfig() throws Exception {
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate agg=defn.getAggregate("nt:folder");
  assertNotNull(agg);
  assertEquals(1,agg.getIncludes().size());
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiAggregateMapping() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("*")));
  Aggregate agFile=new Aggregate("nt:file",of(ni("*"),ni("*/*")));
  mapper.add("nt:file",agFile);
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b").setProperty(JCR_PRIMARYTYPE,"nt:file");
  nb.child("b").child("b1").child("b2");
  nb.child("c");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(5,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","b","c","b/b1","b/b1/b2"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void recursionEnabled() throws Exception {
  Aggregate agFile=new Aggregate("nt:file",of(ni("*")),5);
  mapper.add("nt:file",agFile);
  NodeBuilder nb=newNode("nt:file");
  nb.child("a").child("c");
  nb.child("b").setProperty(JCR_PRIMARYTYPE,"nt:file");
  nb.child("b").child("b1").child("b2");
  nb.child("c");
  agFile.collectAggregates(nb.getNodeState(),col);
  assertEquals(4,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","b","c","b/b1"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oneLevelAll() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("*")));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(2,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","b"));
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void includeMatches() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni(null,"*",true),ni(null,"*/*",true)));
  assertTrue(ag.hasRelativeNodeInclude("foo"));
  assertTrue(ag.hasRelativeNodeInclude("foo/bar"));
  assertFalse(ag.hasRelativeNodeInclude("foo/bar/baz"));
  Aggregate ag2=new Aggregate("nt:base",of(ni(null,"foo",true),ni(null,"foo/*",true)));
  assertTrue(ag2.hasRelativeNodeInclude("foo"));
  assertFalse(ag2.hasRelativeNodeInclude("bar"));
  assertTrue(ag2.hasRelativeNodeInclude("foo/bar"));
  assertFalse(ag2.hasRelativeNodeInclude("foo/bar/baz"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReaggregateMixin() throws Exception {
  Aggregate agFolder=new Aggregate("nt:folder",of(ni("mix:title","*",true)));
  Aggregate agFile=new Aggregate("mix:title",of(ni(null,"jcr:content",true)));
  mapper.add("mix:title",agFile);
  mapper.add("nt:folder",agFolder);
  NodeBuilder nb=newNode("nt:folder");
  nb.child("a").child("c");
  createFileMixin(nb,"b","hello world");
  createFileMixin(nb,"c","hello world");
  agFolder.collectAggregates(nb.getNodeState(),col);
  assertEquals(4,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("b","c","b/jcr:content","c/jcr:content"));
  assertEquals(2,col.nodeResults.get("b/jcr:content").size());
  assertEquals(1,col.getRelativeNodeResults("b/jcr:content","b").size());
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propOneLevelRegex() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  child(rules,"nt:folder/properties/p1").setProperty(LuceneIndexConstants.PROP_NAME,"a/foo.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate ag=defn.getApplicableIndexingRule("nt:folder").getAggregate();
  NodeBuilder nb=newNode("nt:folder");
  nb.child("a").setProperty("foo1","foo");
  nb.child("a").setProperty("foo2","foo");
  nb.child("a").setProperty("bar1","foo");
  nb.child("b").setProperty("p2","foo");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(2,col.getPropPaths().size());
  assertThat(col.getPropPaths(),hasItems("a/foo1","a/foo2"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReaggregate() throws Exception {
  Aggregate agFolder=new Aggregate("nt:folder",of(ni("nt:file","*",true)));
  Aggregate agFile=new Aggregate("nt:file",of(ni(null,"jcr:content",true)));
  mapper.add("nt:file",agFile);
  mapper.add("nt:folder",agFolder);
  NodeBuilder nb=newNode("nt:folder");
  nb.child("a").child("c");
  createFile(nb,"b","hello world");
  createFile(nb,"c","hello world");
  agFolder.collectAggregates(nb.getNodeState(),col);
  assertEquals(4,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("b","c","b/jcr:content","c/jcr:content"));
  assertEquals(2,col.nodeResults.get("b/jcr:content").size());
  assertEquals(1,col.getRelativeNodeResults("b/jcr:content","b").size());
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiLevelTyped() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("a"),ni("nt:resource","d/*/*",false)));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").child("c");
  nb.child("b");
  nb.child("d").child("e").child("f").setProperty(JCR_PRIMARYTYPE,"nt:resource");
  nb.child("d").child("e").child("f2");
  nb.child("d").child("e2").child("f3").setProperty(JCR_PRIMARYTYPE,"nt:resource");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(3,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a","d/e/f","d/e2/f3"));
}

</code></pre>

<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void aggregateConfig2() throws Exception {
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.setProperty(LuceneIndexConstants.AGG_RECURSIVE_LIMIT,42);
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PRIMARY_TYPE,"nt:file");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_RELATIVE_NODE,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate agg=defn.getAggregate("nt:folder");
  assertNotNull(agg);
  assertEquals(42,agg.reAggregationLimit);
  assertEquals(1,agg.getIncludes().size());
  assertEquals("nt:file",((NodeInclude)agg.getIncludes().get(0)).primaryType);
  assertTrue(((NodeInclude)agg.getIncludes().get(0)).relativeNode);
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oneLevelTypedMixin() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("mix:title","*",false)));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").setProperty(JcrConstants.JCR_MIXINTYPES,Collections.singleton("mix:title"),Type.NAMES);
  nb.child("b");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a"));
}

</code></pre>

<pre class="type-9 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oneLevelTyped() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni("nt:resource","*",false)));
  NodeBuilder nb=newNode("nt:base");
  nb.child("a").setProperty(JCR_PRIMARYTYPE,"nt:resource");
  nb.child("b");
  ag.collectAggregates(nb.getNodeState(),col);
  assertEquals(1,col.getNodePaths().size());
  assertThat(col.getNodePaths(),hasItems("a"));
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
