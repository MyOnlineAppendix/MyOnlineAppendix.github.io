<h3><span class=" glyphicon glyphicon-tag"/>&nbspInternalCallVerifier</h3><kbd>Verifies values of objects/variables related to AUT calls</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.jackrabbit.oak.OakTest </h4><pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithDefaultWorkspaceName() throws Exception {
  ContentRepository repo=new Oak().with("test").with(new OpenSecurityProvider()).createContentRepository();
  String[] valid=new String[]{null,"test"};
  for (  String wspName : valid) {
    ContentSession cs=null;
    try {
      cs=repo.login(null,wspName);
      assertEquals("test",cs.getWorkspaceName());
    }
  finally {
      if (cs != null) {
        cs.close();
      }
    }
  }
  String[] invalid=new String[]{"","another",Oak.DEFAULT_WORKSPACE_NAME};
  for (  String wspName : invalid) {
    ContentSession cs=null;
    try {
      cs=repo.login(null,wspName);
      fail("invalid workspace nam");
    }
 catch (    NoSuchWorkspaceException e) {
    }
 finally {
      if (cs != null) {
        cs.close();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testContentRepositoryReuse() throws Exception {
  Oak oak=new Oak().with(new OpenSecurityProvider());
  ContentRepository r0=null;
  ContentRepository r1=null;
  try {
    r0=oak.createContentRepository();
    r1=oak.createContentRepository();
    assertEquals(r0,r1);
  }
  finally {
    if (r0 != null) {
      ((Closeable)r0).close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.TreeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void orderBefore() throws Exception {
  ContentSession s=repository.login(null,null);
  try {
    Root r=s.getLatestRoot();
    Tree t=r.getTree("/");
    t.addChild("node1");
    t.addChild("node2");
    t.addChild("node3");
    r.commit();
    t.getChild("node1").orderBefore("node2");
    t.getChild("node3").orderBefore(null);
    assertSequence(t.getChildren(),"node1","node2","node3");
    r.commit();
    assertSequence(t.getChildren(),"node1","node2","node3");
    t.getChild("node3").orderBefore("node2");
    assertSequence(t.getChildren(),"node1","node3","node2");
    r.commit();
    assertSequence(t.getChildren(),"node1","node3","node2");
    t.getChild("node1").orderBefore(null);
    assertSequence(t.getChildren(),"node3","node2","node1");
    r.commit();
    assertSequence(t.getChildren(),"node3","node2","node1");
    assertTrue(t.getProperty(":childOrder") == null);
    assertEquals("must not have any properties",0,t.getPropertyCount());
  }
  finally {
    s.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeWithConcurrentOrderBefore() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/").addChild("c");
    t1.addChild("node1").orderBefore(null);
    t1.addChild("node2");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/c");
      t1=r1.getTree("/c");
      t1.getChild("node2").orderBefore("node1");
      r1.commit();
      assertSequence(t1.getChildren(),"node2","node1");
      t2.remove();
      r2.commit();
      assertFalse(r2.getTree("/").hasChild("c"));
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.cache.CacheTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLimitHot(){
  CacheLIRS<Integer,Integer> test=createCache(100);
  for (int i=0; i < 300; i++) {
    test.put(i,10 * i);
  }
  assertEquals(100,test.size());
  assertEquals(99,test.sizeNonResident());
  assertEquals(93,test.sizeHot());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void evictionCallback() throws ExecutionException {
  final Set<String> evictedKeys=newHashSet();
  final Set<Integer> evictedValues=newHashSet();
  CacheLIRS<String,Integer> cache=CacheLIRS.<String,Integer>newBuilder().maximumSize(100).evictionCallback(new EvictionCallback<String,Integer>(){
    @Override public void evicted(    String key,    Integer value){
      evictedKeys.add(key);
      if (value != null) {
        assertEquals(key,valueOf(value));
        evictedValues.add(value);
      }
    }
  }
).build();
  for (int k=0; k < 200; k++) {
    cache.put(valueOf(k),k);
  }
  assertTrue(evictedKeys.size() <= evictedValues.size());
  for (  String key : evictedKeys) {
    assertFalse(cache.containsKey(key));
  }
  cache.invalidateAll();
  assertEquals(200,evictedKeys.size());
  assertEquals(200,evictedValues.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPutPeekRemove(){
  CacheLIRS<Integer,Integer> test=createCache(4);
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  assertNull(test.peek(4));
  assertNull(test.getIfPresent(4));
  test.put(4,40);
  verify(test,"mem: 4 stack: 4 3 2 1 cold: non-resident:");
  assertEquals(30,test.getUnchecked(3).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(20,test.peek(2).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(10,test.peek(1).intValue());
  assertEquals(10,test.getUnchecked(1).intValue());
  verify(test,"mem: 4 stack: 1 2 3 4 cold: non-resident:");
  test.put(3,30);
  verify(test,"mem: 4 stack: 3 1 2 4 cold: non-resident:");
  test.put(5,50);
  verify(test,"mem: 4 stack: 5 3 1 2 cold: 5 non-resident: 4");
  assertEquals(1,test.getMemory(1));
  assertEquals(1,test.getMemory(5));
  assertEquals(0,test.getMemory(4));
  assertEquals(0,test.getMemory(100));
  assertNull(test.peek(4));
  assertNull(test.getIfPresent(4));
  assertEquals(10,test.getUnchecked(1).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(30,test.getUnchecked(3).intValue());
  verify(test,"mem: 4 stack: 3 2 1 cold: 5 non-resident: 4");
  assertEquals(50,test.getUnchecked(5).intValue());
  verify(test,"mem: 4 stack: 5 3 2 1 cold: 5 non-resident: 4");
  assertEquals(50,test.getUnchecked(5).intValue());
  verify(test,"mem: 4 stack: 5 3 2 cold: 1 non-resident: 4");
  assertEquals(50,test.remove(5).intValue());
  assertNull(test.remove(5));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident: 4");
  assertNull(test.remove(4));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident:");
  assertNull(test.remove(4));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident:");
  test.put(4,40);
  test.put(5,50);
  verify(test,"mem: 4 stack: 5 4 3 2 cold: 5 non-resident: 1");
  test.getUnchecked(5);
  test.getUnchecked(2);
  test.getUnchecked(3);
  test.getUnchecked(4);
  verify(test,"mem: 4 stack: 4 3 2 5 cold: 2 non-resident: 1");
  assertEquals(50,test.remove(5).intValue());
  verify(test,"mem: 3 stack: 4 3 2 cold: non-resident: 1");
  assertEquals(20,test.remove(2).intValue());
  assertFalse(test.containsKey(1));
  assertNull(test.remove(1));
  assertFalse(test.containsKey(1));
  verify(test,"mem: 2 stack: 4 3 cold: non-resident:");
  test.put(1,10);
  test.put(2,20);
  verify(test,"mem: 4 stack: 2 1 4 3 cold: non-resident:");
  test.getUnchecked(1);
  test.getUnchecked(3);
  test.getUnchecked(4);
  verify(test,"mem: 4 stack: 4 3 1 2 cold: non-resident:");
  assertEquals(10,test.remove(1).intValue());
  verify(test,"mem: 3 stack: 4 3 2 cold: non-resident:");
  test.remove(2);
  test.remove(3);
  test.remove(4);
  test.clear();
  verify(test,"mem: 0 stack: cold: non-resident:");
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  test.put(4,40);
  test.put(5,50);
  assertTrue(test.containsValue(50));
  verify(test,"mem: 4 stack: 5 4 3 2 cold: 5 non-resident: 1");
  test.put(1,10);
  verify(test,"mem: 4 stack: 1 5 4 3 2 cold: 1 non-resident: 5");
  assertFalse(test.containsValue(50));
  test.remove(2);
  test.remove(3);
  test.remove(4);
  verify(test,"mem: 1 stack: 1 cold: non-resident: 5");
  assertTrue(test.containsKey(1));
  test.remove(1);
  assertFalse(test.containsKey(1));
  verify(test,"mem: 0 stack: cold: non-resident: 5");
  assertFalse(test.containsKey(5));
  assertTrue(test.isEmpty());
  test.clear();
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  test.put(4,40);
  test.put(5,50);
  test.getUnchecked(4);
  test.getUnchecked(3);
  verify(test,"mem: 4 stack: 3 4 5 2 cold: 5 non-resident: 1");
  test.put(6,60);
  verify(test,"mem: 4 stack: 6 3 4 5 2 cold: 6 non-resident: 5 1");
  test.getUnchecked(6);
  verify(test,"mem: 4 stack: 6 3 4 cold: 2 non-resident: 5 1");
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefresh() throws ExecutionException {
  CacheLIRS<Integer,String> cache=new CacheLIRS.Builder<Integer,String>().maximumWeight(100).weigher(new Weigher<Integer,String>(){
    @Override public int weigh(    Integer key,    String value){
      return key + value.length();
    }
  }
).build(new CacheLoader<Integer,String>(){
    @Override public String load(    Integer key) throws Exception {
      if (key < 0 || key >= 100) {
        throw new Exception("Out of range");
      }
      return "n" + key;
    }
    @Override public ListenableFuture<String> reload(    Integer key,    String oldValue){
      assertTrue(oldValue != null);
      SettableFuture<String> f=SettableFuture.create();
      f.set(oldValue);
      return f;
    }
  }
);
  assertEquals("n1",cache.get(1));
  cache.refresh(1);
  cache.refresh(2);
  try {
    cache.get(-1);
    fail();
  }
 catch (  Exception e) {
  }
  cache.refresh(-1);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomOperations(){
  boolean log=false;
  int size=10;
  Random r=new Random(1);
  for (int j=0; j < 100; j++) {
    CacheLIRS<Integer,Integer> test=createCache(size / 2);
    HashMap<Integer,Integer> good=new HashMap<Integer,Integer>();
    for (int i=0; i < 10000; i++) {
      int key=r.nextInt(size);
      int value=r.nextInt();
switch (r.nextInt(3)) {
case 0:
        if (log) {
          System.out.println(i + " put " + key+ " "+ value);
        }
      good.put(key,value);
    test.put(key,value);
  break;
case 1:
if (log) {
  System.out.println(i + " get " + key);
}
Integer a=good.get(key);
Integer b=test.getIfPresent(key);
if (a == null) {
assertNull(b);
}
 else if (b != null) {
assertEquals(a,b);
}
break;
case 2:
if (log) {
System.out.println(i + " remove " + key);
}
good.remove(key);
test.remove(key);
break;
}
if (log) {
System.out.println(" -> " + toString(test));
}
}
verify(test,null);
}
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClear(){
  CacheLIRS<Integer,Integer> test=createCache(40,10);
  for (int i=0; i < 5; i++) {
    test.put(i,10 * i,9);
  }
  verify(test,"mem: 36 stack: 4 3 2 1 cold: 4 non-resident: 0");
  for (  Entry<Integer,Integer> e : test.entrySet()) {
    assertTrue(e.getKey() >= 1 && e.getKey() <= 4);
    assertTrue(e.getValue() >= 10 && e.getValue() <= 40);
  }
  for (  int x : test.asMap().values()) {
    assertTrue(x >= 10 && x <= 40);
  }
  for (  int x : test.keySet()) {
    assertTrue(x >= 1 && x <= 4);
  }
  assertEquals(40,test.getMaxMemory());
  assertEquals(10,test.getAverageMemory());
  assertEquals(36,test.getUsedMemory());
  assertEquals(4,test.size());
  assertEquals(3,test.sizeHot());
  assertEquals(1,test.sizeNonResident());
  assertFalse(test.isEmpty());
  test.setMaxMemory(10);
  assertEquals(10,test.getMaxMemory());
  test.setMaxMemory(40);
  test.setAverageMemory(1);
  assertEquals(1,test.getAverageMemory());
  test.setAverageMemory(10);
  verify(test,"mem: 36 stack: 4 3 2 1 cold: 4 non-resident: 0");
  test.asMap().putAll(test.asMap());
  verify(test,"mem: 40 stack: 4 3 2 1 cold: non-resident: 0");
  test.clear();
  verify(test,"mem: 0 stack: cold: non-resident:");
  assertEquals(40,test.getMaxMemory());
  assertEquals(10,test.getAverageMemory());
  assertEquals(0,test.getUsedMemory());
  assertEquals(0,test.size());
  assertEquals(0,test.sizeHot());
  assertEquals(0,test.sizeNonResident());
  assertTrue(test.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testZeroSizeCache(){
  CacheLIRS<Integer,String> cache=createCache(0,100);
  cache.put(1,"Hello",100);
  cache.put(2,"World",100);
  cache.put(3,"!",100);
  assertFalse(cache.containsKey(1));
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEdgeCases(){
  CacheLIRS<Integer,Integer> test=createCache(1);
  test.put(1,10,100);
  assertEquals(10,test.getUnchecked(1).intValue());
  try {
    test.put(null,10,100);
    fail();
  }
 catch (  NullPointerException e) {
  }
  try {
    test.put(1,null,100);
    fail();
  }
 catch (  NullPointerException e) {
  }
  try {
    test.setMaxMemory(-1);
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    test.setAverageMemory(0);
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsMap(){
  CacheLIRS<Integer,String> cache=createCache(10,1);
  ConcurrentMap<Integer,String> map=cache.asMap();
  assertNull(map.putIfAbsent(1,"Hello"));
  assertEquals(1,map.size());
  assertEquals("Hello",cache.getIfPresent(1));
  assertEquals("Hello",map.putIfAbsent(1,"Hallo"));
  assertEquals("Hello",cache.getIfPresent(1));
  assertEquals("Hello",map.replace(1,"Hallo"));
  assertEquals("Hallo",cache.getIfPresent(1));
  assertFalse(map.replace(1,"x","y"));
  assertTrue(map.replace(1,"Hallo","Hi!"));
  assertFalse(map.remove(1,"Hello"));
  assertTrue(map.remove(1,"Hi!"));
  assertEquals(0,map.size());
  map.put(1,"Hello");
  assertEquals("[1]",map.keySet().toString());
  assertEquals("[1=Hello]",cache.entrySet().toString());
  assertEquals("Hello",map.get(1));
  assertTrue(map.containsKey(1));
  assertFalse(map.containsKey(2));
  assertTrue(map.containsValue("Hello"));
  assertFalse(map.containsValue("Hallo"));
  assertFalse(map.isEmpty());
  map.remove(1);
  assertTrue(map.isEmpty());
  map.put(1,"Hello");
  map.clear();
  assertTrue(map.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadHashMethod(){
  final int size=4;
  /** 
 * A class with a bad hashCode implementation.
 */
class BadHash {
    int x;
    BadHash(    int x){
      this.x=x;
    }
    @Override public int hashCode(){
      return (x & 1) * size * 2;
    }
    @Override public boolean equals(    Object o){
      return ((BadHash)o).x == x;
    }
    @Override public String toString(){
      return "" + x;
    }
  }
  CacheLIRS<BadHash,Integer> test=createCache(size * 2);
  for (int i=0; i < size; i++) {
    test.put(new BadHash(i),i);
  }
  for (int i=0; i < size; i++) {
    if (i % 3 == 0) {
      assertEquals(i,test.remove(new BadHash(i)).intValue());
      assertNull(test.remove(new BadHash(i)));
    }
  }
  for (int i=0; i < size; i++) {
    if (i % 3 == 0) {
      assertNull(test.getIfPresent(new BadHash(i)));
    }
 else {
      assertEquals(i,test.getIfPresent(new BadHash(i)).intValue());
    }
  }
  for (int i=0; i < size; i++) {
    test.put(new BadHash(i),i);
  }
  for (int i=0; i < size; i++) {
    if (i % 3 == 0) {
      assertEquals(i,test.remove(new BadHash(i)).intValue());
      assertNull(test.remove(new BadHash(i)));
    }
  }
  for (int i=0; i < size; i++) {
    if (i % 3 == 0) {
      assertNull(test.getIfPresent(new BadHash(i)));
    }
 else {
      assertEquals(i,test.getIfPresent(new BadHash(i)).intValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanResistance(){
  boolean log=false;
  int size=20;
  CacheLIRS<Integer,Integer> test=createCache(size / 2 + 1);
  for (int i=0; i < size; i++) {
    test.put(-i,-i * 10);
  }
  verify(test,null);
  for (int i=0; i < size / 2; i++) {
    test.put(i,i * 10);
    test.getUnchecked(i);
    if (log) {
      System.out.println("get " + i + " -> "+ test);
    }
  }
  verify(test,null);
  for (int i=0; i < size; i++) {
    Integer x=test.getIfPresent(i);
    Integer y=test.peek(i);
    if (i < size / 2) {
      assertTrue("i: " + i,x != null);
      assertTrue("i: " + i,y != null);
      assertEquals(i * 10,x.intValue());
      assertEquals(i * 10,y.intValue());
    }
 else {
      assertNull(x);
      assertNull(y);
      test.put(i,i * 10);
      assertEquals(i * 10,test.peek(i).intValue());
    }
    if (log) {
      System.out.println("get " + i + " -> "+ test);
    }
    verify(test,null);
  }
  for (int i=0; i < size; i++) {
    Integer x=test.getIfPresent(i);
    if (i < size / 2 || i == size - 1) {
      assertTrue("i: " + i,x != null);
      assertEquals(i * 10,x.intValue());
    }
 else {
      assertNull(x);
    }
    verify(test,null);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSize(){
  verifyMapSize(7,16);
  verifyMapSize(13,32);
  verifyMapSize(25,64);
  verifyMapSize(49,128);
  verifyMapSize(97,256);
  verifyMapSize(193,512);
  verifyMapSize(385,1024);
  verifyMapSize(769,2048);
  CacheLIRS<Integer,Integer> test;
  test=createCache(3,10);
  test.put(0,0,9);
  test.put(1,10,9);
  test.put(2,20,9);
  test.put(3,30,9);
  test.put(4,40,9);
  test=createCache(1,1);
  test.put(1,10);
  test.put(0,0);
  test.getUnchecked(0);
  test=createCache(1000);
  for (int j=0; j < 2000; j++) {
    test.put(j,j);
  }
  assertEquals(62,test.size() - test.sizeHot());
  assertEquals(968,test.sizeNonResident());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void evictionCallbackRandomized() throws ExecutionException {
  final HashMap<Integer,Integer> evictedMap=new HashMap<Integer,Integer>();
  final HashSet<Integer> evictedNonResidentSet=new HashSet<Integer>();
  CacheLIRS<Integer,Integer> cache=CacheLIRS.<Integer,Integer>newBuilder().maximumSize(10).evictionCallback(new EvictionCallback<Integer,Integer>(){
    @Override public void evicted(    Integer key,    Integer value){
      if (value == null) {
        assertTrue(evictedNonResidentSet.add(key));
      }
 else {
        assertEquals(null,evictedMap.put(key,value));
      }
    }
  }
).build();
  Random r=new Random(1);
  for (int k=0; k < 10000; k++) {
    if (r.nextInt(20) == 0) {
      evictedMap.clear();
      evictedNonResidentSet.clear();
      long size=cache.size();
      long sizeNonResident=cache.sizeNonResident();
      cache.invalidateAll();
      assertEquals(evictedMap.size(),size);
      assertEquals(evictedNonResidentSet.size(),sizeNonResident);
    }
    evictedMap.clear();
    evictedNonResidentSet.clear();
    int key=r.nextInt(20);
    if (r.nextBoolean()) {
      cache.put(key,k);
    }
 else {
      cache.get(key);
    }
    for (    Entry<Integer,Integer> ev : evictedMap.entrySet()) {
      int ek=ev.getKey();
      if (ek == key) {
      }
 else {
        assertFalse(cache.containsKey(ek));
      }
    }
    for (    Entry<Integer,Integer> ev : evictedMap.entrySet()) {
      int ek=ev.getKey();
      Integer v=ev.getValue();
      assertTrue(v < k);
      if (ek == key) {
      }
 else {
        assertFalse(cache.containsKey(ek));
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.PropertiesUtilTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPopulate(){
  Map<String,Object> props=new HashMap<String,Object>();
  props.put("string","foo");
  props.put("bool","true");
  props.put("integer","7");
  props.put("aLong","11");
  TestBeanA bean=new TestBeanA();
  PropertiesUtil.populate(bean,props,false);
  assertEquals("foo",bean.getString());
  assertTrue(bean.getBool());
  assertEquals(7,bean.getInteger());
  assertEquals(11,bean.getaLong());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.cache.ConcurrentCacheTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Concurrent.run("cache",new Concurrent.Task(){
    @Override public void call() throws Exception {
      int k=value++ % 10;
      Data v=cache.get(k);
      Assert.assertEquals(k,v.value);
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.io.LazyInputStreamTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws IOException {
  createFile();
  LazyInputStream in=new LazyInputStream(asByteSource(file));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(0,in.read());
  assertEquals(-1,in.read());
  assertEquals(-1,in.read());
  assertEquals(-1,in.read());
  in.close();
  in.close();
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertFalse(in.markSupported());
  in.mark(1);
  assertEquals(0,in.read());
  try {
    in.reset();
    fail();
  }
 catch (  IOException e) {
  }
  assertEquals(-1,in.read());
  in.close();
  in=new LazyInputStream(asByteSource(file));
  byte[] test=new byte[2];
  assertEquals(1,in.read(test));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(1,in.read(test,0,2));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(2,in.skip(2));
  assertEquals(-1,in.read(test));
  in.close();
  createFile();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(0,in.read());
  assertEquals(-1,in.read());
  in.close();
  file.delete();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.junit.LogCustomizerTest </h4><pre class="type-7 type-6 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogs1(){
  LogCustomizer custom=LogCustomizer.forLogger("org.apache.jackrabbit.oak.commons.junit.LogCustomizerTest").enable(Level.DEBUG).create();
  try {
    custom.starting();
    LOG.debug("test message");
    List<String> logs=custom.getLogs();
    assertTrue(logs.size() == 1);
    assertThat("logs were recorded by custom logger",logs.toString(),containsString("test message"));
  }
  finally {
    custom.finished();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLogs2(){
  LogCustomizer custom=LogCustomizer.forLogger("org.apache.jackrabbit.oak.commons.junit.LogCustomizerTest").enable(Level.DEBUG).filter(Level.INFO).create();
  try {
    custom.starting();
    LOG.debug("test message");
    List<String> logs=custom.getLogs();
    assertTrue(logs.isEmpty());
  }
  finally {
    custom.finished();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.DefaultConflictHandlerOursTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingProperties() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("p",THEIR_VALUE);
  theirRoot.getTree("/").setProperty("q",THEIR_VALUE);
  ourRoot.getTree("/").setProperty("p",OUR_VALUE);
  ourRoot.getTree("/").setProperty("q",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("p");
  assertNotNull(p);
  assertEquals(OUR_VALUE,p.getValue(STRING));
  PropertyState q=ourRoot.getTree("/").getProperty("q");
  assertNotNull(q);
  assertEquals(OUR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingNode() throws CommitFailedException {
  theirRoot.getTree("/").addChild("n").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/").addChild("n").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/n");
  assertTrue(n.exists());
  assertEquals(OUR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeDeletedProperty() throws CommitFailedException {
  theirRoot.getTree("/").removeProperty("a");
  ourRoot.getTree("/").setProperty("a",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNotNull(p);
  assertEquals(OUR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeChangedProperty() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("a",THEIR_VALUE);
  ourRoot.getTree("/").setProperty("a",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNotNull(p);
  assertEquals(OUR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testDeleteChangedProperty() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("a",THEIR_VALUE);
  ourRoot.getTree("/").removeProperty("a");
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNull(p);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeleteChangedNode() throws CommitFailedException {
  theirRoot.getTree("/x").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/x").remove();
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertFalse(n.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeDeletedNode() throws CommitFailedException {
  theirRoot.getTree("/x").remove();
  ourRoot.getTree("/x").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertTrue(n.exists());
  assertEquals(OUR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.DefaultConflictHandlerTheirsTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingNode() throws CommitFailedException {
  theirRoot.getTree("/").addChild("n").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/").addChild("n").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/n");
  assertNotNull(n);
  assertEquals(THEIR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testChangeDeletedProperty() throws CommitFailedException {
  theirRoot.getTree("/").removeProperty("a");
  ourRoot.getTree("/").setProperty("a",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNull(p);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteChangedNode() throws CommitFailedException {
  theirRoot.getTree("/x").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/x").remove();
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertTrue(n.exists());
  assertEquals(THEIR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingProperties() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("p",THEIR_VALUE);
  theirRoot.getTree("/").setProperty("q",THEIR_VALUE);
  ourRoot.getTree("/").setProperty("p",OUR_VALUE);
  ourRoot.getTree("/").setProperty("q",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("p");
  assertNotNull(p);
  assertEquals(THEIR_VALUE,p.getValue(STRING));
  PropertyState q=ourRoot.getTree("/").getProperty("q");
  assertNotNull(q);
  assertEquals(THEIR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeChangedProperty() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("a",THEIR_VALUE);
  ourRoot.getTree("/").setProperty("a",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNotNull(p);
  assertEquals(THEIR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangeDeletedNode() throws CommitFailedException {
  theirRoot.getTree("/x").remove();
  ourRoot.getTree("/x").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertFalse(n.exists());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteChangedProperty() throws CommitFailedException {
  theirRoot.getTree("/").setProperty("a",THEIR_VALUE);
  ourRoot.getTree("/").removeProperty("a");
  theirRoot.commit();
  ourRoot.commit();
  PropertyState p=ourRoot.getTree("/").getProperty("a");
  assertNotNull(p);
  assertEquals(THEIR_VALUE,p.getValue(STRING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.MutableTreeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getChild(){
  Tree tree=root.getTree("/");
  Tree child=tree.getChild("any");
  assertFalse(child.exists());
  child=tree.getChild("x");
  assertTrue(child.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBlob() throws CommitFailedException, IOException {
  Blob expected=new StringBasedBlob("test blob");
  root.getTree("/x").setProperty("blob",expected);
  root.commit();
  Blob actual=root.getTree("/x").getProperty("blob").getValue(Type.BINARY);
  assertEquals(expected,actual);
  assertTrue(expected.getNewStream().available() >= 0);
  assertTrue(actual.getNewStream().available() >= 0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setProperty() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasProperty("new"));
  tree.setProperty("new","value");
  PropertyState property=tree.getProperty("new");
  assertNotNull(property);
  assertEquals("new",property.getName());
  assertEquals("value",property.getValue(STRING));
  root.commit();
  property=tree.getProperty("new");
  assertNotNull(property);
  assertEquals("new",property.getName());
  assertEquals("value",property.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getPropertyCount(){
  Tree tree=root.getTree("/");
  assertEquals(3,tree.getPropertyCount());
  tree.setProperty("a","foo");
  assertEquals(3,tree.getPropertyCount());
  tree.removeProperty("a");
  assertEquals(2,tree.getPropertyCount());
  tree.setProperty("x","foo");
  assertEquals(3,tree.getPropertyCount());
  tree.setProperty("a","foo");
  assertEquals(4,tree.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void modifiedAfterRebase() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("new");
  assertEquals(Status.MODIFIED,tree.getStatus());
  root.rebase();
  assertEquals(Status.MODIFIED,tree.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeStatus() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("new");
  assertEquals(Tree.Status.NEW,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  Tree added=tree.getChild("new");
  added.addChild("another");
  assertEquals(Tree.Status.MODIFIED,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  tree.getChild("new").getChild("another").remove();
  assertEquals(Tree.Status.MODIFIED,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  assertFalse(tree.getChild("new").getChild("another").exists());
  Tree x=root.getTree("/x");
  Tree y=x.addChild("y");
  x.remove();
  assertFalse(x.exists());
  assertFalse(y.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisconnectAfterRefresh(){
  Tree x=root.getTree("/x");
  x.setProperty("p","any");
  Tree xx=x.addChild("xx");
  xx.setProperty("q","any");
  assertEquals(Status.MODIFIED,x.getStatus());
  assertEquals(Status.NEW,x.getPropertyStatus("p"));
  assertEquals(Status.NEW,xx.getStatus());
  assertEquals(Status.NEW,xx.getPropertyStatus("q"));
  root.refresh();
  assertEquals(Status.UNCHANGED,x.getStatus());
  assertNull(x.getPropertyStatus("p"));
  assertFalse(xx.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperty(){
  Tree tree=root.getTree("/");
  PropertyState propertyState=tree.getProperty("any");
  assertNull(propertyState);
  propertyState=tree.getProperty("a");
  assertNotNull(propertyState);
  assertFalse(propertyState.isArray());
  assertEquals(LONG,propertyState.getType());
  assertEquals(1,(long)propertyState.getValue(LONG));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeNew(){
  Tree tree=root.getTree("/");
  Tree t=tree.addChild("new");
  tree.getChild("new").remove();
  assertFalse(t.exists());
  assertFalse(tree.getChild("new").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisconnectAfterRemove(){
  Tree x=root.getTree("/x");
  x.setProperty("p","any");
  Tree xx=x.addChild("xx");
  xx.setProperty("q","any");
  assertEquals(Status.MODIFIED,x.getStatus());
  assertEquals(Status.NEW,x.getPropertyStatus("p"));
  assertEquals(Status.NEW,xx.getStatus());
  assertEquals(Status.NEW,xx.getPropertyStatus("q"));
  root.getTree("/x").remove();
  assertFalse(x.exists());
  assertFalse(xx.exists());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getChildrenCount(){
  Tree tree=root.getTree("/");
  assertEquals(3,tree.getChildrenCount(4));
  tree.getChild("x").remove();
  assertEquals(2,tree.getChildrenCount(3));
  tree.addChild("a");
  assertEquals(3,tree.getChildrenCount(3));
  tree.addChild("x");
  assertEquals(4,tree.getChildrenCount(5));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void isNew() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("c");
  root.commit();
  tree.getChild("c").remove();
  Tree c=tree.addChild("c");
  assertEquals(Status.NEW,c.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeChild() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertTrue(tree.hasChild("x"));
  tree.getChild("x").remove();
  assertFalse(tree.hasChild("x"));
  root.commit();
  assertFalse(tree.hasChild("x"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getChildren(){
  Tree tree=root.getTree("/");
  Iterable<Tree> children=tree.getChildren();
  Set<String> expectedPaths=new HashSet<String>();
  Collections.addAll(expectedPaths,"/x","/y","/z");
  for (  Tree child : children) {
    assertTrue(expectedPaths.remove(child.getPath()));
  }
  assertTrue(expectedPaths.isEmpty());
  assertEquals(3,tree.getChildrenCount(4));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noTransitiveModifiedStatus() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("one").addChild("two");
  root.commit();
  tree.getChild("one").getChild("two").addChild("three");
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("one").getStatus());
  assertEquals(Tree.Status.MODIFIED,tree.getChild("one").getChild("two").getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addChild() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasChild("new"));
  Tree added=tree.addChild("new");
  assertTrue(added.exists());
  assertEquals("new",added.getName());
  assertTrue(tree.hasChild("new"));
  root.commit();
  assertTrue(tree.hasChild("new"));
  tree.getChild("new").addChild("more");
  assertTrue(tree.getChild("new").hasChild("more"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperties(){
  Tree tree=root.getTree("/");
  Set<PropertyState> expectedProperties=Sets.newHashSet(LongPropertyState.createLongProperty("a",1L),LongPropertyState.createLongProperty("b",2L),LongPropertyState.createLongProperty("c",3L));
  Iterable<? extends PropertyState> properties=tree.getProperties();
  for (  PropertyState property : properties) {
    assertTrue(expectedProperties.remove(property));
  }
  assertTrue(expectedProperties.isEmpty());
  assertEquals(3,tree.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSetOrderableChildrenSetsProperty() throws Exception {
  Tree tree=root.getTree("/").addChild("test");
  tree.setOrderableChildren(true);
  assertTrue(((MutableTree)tree).getNodeState().hasProperty(TreeConstants.OAK_CHILD_ORDER));
  tree.setOrderableChildren(false);
  assertFalse(((MutableTree)tree).getNodeState().hasProperty(TreeConstants.OAK_CHILD_ORDER));
  tree.setOrderableChildren(true);
  root.commit();
  assertTrue(((MutableTree)tree).getNodeState().hasProperty(TreeConstants.OAK_CHILD_ORDER));
  tree.setOrderableChildren(false);
  root.commit();
  assertFalse(((MutableTree)tree).getNodeState().hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeProperty() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertTrue(tree.hasProperty("a"));
  tree.removeProperty("a");
  assertFalse(tree.hasProperty("a"));
  root.commit();
  assertFalse(tree.hasProperty("a"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addAndRemoveProperty() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.setProperty("P0","V1");
  root.commit();
  assertTrue(tree.hasProperty("P0"));
  tree.removeProperty("P0");
  root.commit();
  assertFalse(tree.hasProperty("P0"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyStatus() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.setProperty("new","value1");
  assertEquals(Tree.Status.NEW,tree.getPropertyStatus("new"));
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getPropertyStatus("new"));
  tree.setProperty("new","value2");
  assertEquals(Tree.Status.MODIFIED,tree.getPropertyStatus("new"));
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getPropertyStatus("new"));
  tree.removeProperty("new");
  assertNull(tree.getPropertyStatus("new"));
  root.commit();
  assertNull(tree.getPropertyStatus("new"));
  Tree x=root.getTree("/x");
  x.setProperty("y","value1");
  x.remove();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingChild() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasChild("new"));
  tree.addChild("new");
  root.commit();
  assertTrue(tree.hasChild("new"));
  Tree added=tree.addChild("new");
  assertTrue(added.exists());
  assertEquals("new",added.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.RootTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToSelf() throws CommitFailedException {
  Root root=session.getLatestRoot();
  root.getTree("/").addChild("s");
  root.commit();
  assertTrue(root.move("/s","/s"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToDescendant() throws CommitFailedException {
  Root root=session.getLatestRoot();
  root.getTree("/").addChild("s");
  root.commit();
  assertFalse(root.move("/s","/s/t"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveNew(){
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree t=tree.addChild("new");
  root.move("/new","/y/new");
  assertEquals("/y/new",t.getPath());
  assertFalse(tree.getChild("new").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getTree(){
  Root root=session.getLatestRoot();
  List<String> validPaths=new ArrayList<String>();
  validPaths.add("/");
  validPaths.add("/x");
  validPaths.add("/x/xx");
  validPaths.add("/y");
  validPaths.add("/z");
  for (  String treePath : validPaths) {
    Tree tree=root.getTree(treePath);
    assertTrue(tree.exists());
    assertEquals(treePath,tree.getPath());
  }
  List<String> invalidPaths=new ArrayList<String>();
  invalidPaths.add("/any");
  invalidPaths.add("/x/any");
  for (  String treePath : invalidPaths) {
    assertFalse(root.getTree(treePath).exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveRemoveAdd(){
  Root root=session.getLatestRoot();
  Tree x=root.getTree("/x");
  Tree z=root.getTree("/z");
  z.setProperty("p","1");
  root.move("/z","/x/z");
  root.getTree("/x/z").remove();
  assertFalse(z.exists());
  x.addChild("z");
  assertEquals(Status.NEW,z.getStatus());
  x.getChild("z").setProperty("p","2");
  PropertyState p=z.getProperty("p");
  assertNotNull(p);
  assertEquals("2",p.getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rebasePreservesStatus() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  Tree x=root1.getTree("/x");
  Tree added=x.addChild("added");
  assertEquals(NEW,added.getStatus());
  root2.getTree("/x").addChild("bar");
  root2.commit();
  root1.rebase();
  assertTrue(x.hasChild("added"));
  assertEquals(NEW,x.getChild("added").getStatus());
  assertTrue(x.hasChild("bar"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveExistingParent() throws CommitFailedException {
  Root root=session.getLatestRoot();
  root.getTree("/").addChild("parent").addChild("new");
  root.commit();
  Tree parent=root.getTree("/parent");
  Tree n=root.getTree("/parent/new");
  root.move("/parent","/moved");
  assertEquals(Status.NEW,parent.getStatus());
  assertEquals(Status.NEW,n.getStatus());
  assertEquals("/moved",parent.getPath());
  assertEquals("/moved/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rename() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree x=tree.getChild("x");
  assertTrue(x.exists());
  root.move("/x","/xx");
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("xx"));
  assertEquals("/xx",x.getPath());
  root.commit();
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("xx"));
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void purgePreservesStatus() throws CommitFailedException {
  Tree x=session.getLatestRoot().getTree("/x");
  Tree added=x.addChild("added");
  for (int k=0; k < 10000; k++) {
    assertEquals("k=" + k,NEW,x.getChild("added").getStatus());
    x.addChild("k" + k);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void move() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree y=tree.getChild("y");
  Tree x=tree.getChild("x");
  assertTrue(x.exists());
  assertFalse(root.hasPendingChanges());
  root.move("/x","/y/xx");
  assertTrue(root.hasPendingChanges());
  assertFalse(tree.hasChild("x"));
  assertTrue(y.hasChild("xx"));
  assertEquals("/y/xx",x.getPath());
  root.commit();
  assertFalse(root.hasPendingChanges());
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("y"));
  assertTrue(tree.getChild("y").hasChild("xx"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Regression test for OAK-208
 */
@Test public void removeMoved() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree r=root.getTree("/");
  r.addChild("a");
  r.addChild("b");
  root.move("/a","/b/c");
  assertFalse(r.hasChild("a"));
  assertTrue(r.hasChild("b"));
  r.getChild("b").remove();
  assertFalse(r.hasChild("a"));
  assertFalse(r.hasChild("b"));
  root.commit();
  assertFalse(r.hasChild("a"));
  assertFalse(r.hasChild("b"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AtomicCounterClusterIT </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void increments() throws Exception {
  setUpCluster(this.getClass(),mks,repos,NOT_PROVIDED);
  assertEquals("repositories and executors should match",repos.size(),executors.size());
  final String counterPath;
  final Random rnd=new Random(14);
  final AtomicLong expected=new AtomicLong(0);
  final Map<String,Exception> exceptions=Collections.synchronizedMap(new HashMap<String,Exception>());
  Repository repo=repos.get(0);
  Session session=repo.login(ADMIN);
  Node counter;
  try {
    counter=session.getRootNode().addNode("counter");
    counter.addMixin(MIX_ATOMIC_COUNTER);
    session.save();
    counterPath=counter.getPath();
  }
  finally {
    session.logout();
  }
  alignCluster(mks);
  assertFalse("Path to the counter node should be set",Strings.isNullOrEmpty(counterPath));
  for (  Repository r : repos) {
    try {
      session=r.login(ADMIN);
      counter=session.getNode(counterPath);
      assertEquals("Nothing should have touched the `expected`",0,expected.get());
      assertEquals("Wrong initial counter",expected.get(),counter.getProperty(PROP_COUNTER).getLong());
    }
  finally {
      session.logout();
    }
  }
  final int numIncrements=Integer.getInteger("oak.test.it.atomiccounter.threads",100);
  LOG.debug("pushing {} increments per each of the {} cluster nodes for a total of {} concurrent updates",numIncrements,repos.size(),numIncrements * repos.size());
  long start=LOG_PERF.start("Firing the threads");
  List<ListenableFutureTask<Void>> tasks=Lists.newArrayList();
  for (  Repository rep : repos) {
    final Repository r=rep;
    for (int i=0; i < numIncrements; i++) {
      ListenableFutureTask<Void> task=ListenableFutureTask.create(new Callable<Void>(){
        @Override public Void call() throws Exception {
          Session s=r.login(ADMIN);
          try {
            try {
              Node n=s.getNode(counterPath);
              int increment=rnd.nextInt(10) + 1;
              n.setProperty(PROP_INCREMENT,increment);
              expected.addAndGet(increment);
              s.save();
            }
  finally {
              s.logout();
            }
          }
 catch (          Exception e) {
            exceptions.put(Thread.currentThread().getName(),e);
          }
          return null;
        }
      }
);
      new Thread(task).start();
      tasks.add(task);
    }
  }
  LOG_PERF.end(start,-1,"Firing threads completed","");
  Futures.allAsList(tasks).get();
  LOG_PERF.end(start,-1,"Futures completed","");
  waitForTaskCompletion();
  LOG_PERF.end(start,-1,"All tasks completed","");
  Thread.sleep(5000);
  raiseExceptions(exceptions,LOG);
  for (int i=0; i < repos.size(); i++) {
    Repository r=repos.get(i);
    try {
      session=r.login(ADMIN);
      counter=session.getNode(counterPath);
      LOG.debug("Cluster node: {}, actual counter: {}, expected counter: {}",i + 1,expected.get(),counter.getProperty(PROP_COUNTER).getLong());
      assertEquals("Wrong counter on node " + (i + 1),expected.get(),counter.getProperty(PROP_COUNTER).getLong());
    }
  finally {
      session.logout();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AtomicCounterIT </h4><pre class="type-6 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrentSegmentIncrements() throws RepositoryException, InterruptedException, ExecutionException {
  assumeTrue(NodeStoreFixtures.SEGMENT_MK.equals(fixture));
  Session session=getAdminSession();
  try {
    Node counter=session.getRootNode().addNode("counter");
    counter.addMixin(MIX_ATOMIC_COUNTER);
    session.save();
    final AtomicLong expected=new AtomicLong(0);
    final String counterPath=counter.getPath();
    final Random rnd=new Random(11);
    assertEquals(expected.get(),counter.getProperty(PROP_COUNTER).getLong());
    List<ListenableFutureTask<Void>> tasks=Lists.newArrayList();
    for (int t=0; t < 100; t++) {
      tasks.add(updateCounter(counterPath,rnd.nextInt(10) + 1,expected));
    }
    Futures.allAsList(tasks).get();
    session.refresh(false);
    assertEquals(expected.get(),session.getNode(counterPath).getProperty(PROP_COUNTER).getLong());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AtomicCounterTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void incrementRootNode() throws RepositoryException {
  Session session=getAdminSession();
  try {
    Node root=session.getRootNode();
    Node node=root.addNode("normal node");
    session.save();
    node.setProperty(PROP_INCREMENT,1L);
    session.save();
    assertTrue("for normal nodes we expect the increment property to be treated as normal",node.hasProperty(PROP_INCREMENT));
    node=root.addNode("counterNode");
    node.addMixin(MIX_ATOMIC_COUNTER);
    session.save();
    assertCounter(node,0);
    node.setProperty(PROP_INCREMENT,1L);
    session.save();
    assertCounter(node,1);
    node.setProperty(PROP_INCREMENT,1L);
    session.save();
    assertCounter(node,2);
    node.setProperty(PROP_INCREMENT,-2L);
    session.save();
    assertCounter(node,0);
    node.setProperty(PROP_INCREMENT,5L);
    session.save();
    assertCounter(node,5);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AutoCreatedItemsTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void autoCreatedItems() throws Exception {
  Session s=getAdminSession();
  new TestContentLoader().loadTestContent(s);
  Node test=s.getRootNode().addNode("test","test:autoCreate");
  assertTrue(test.hasProperty("test:property"));
  assertEquals("default value",test.getProperty("test:property").getString());
  assertTrue(test.hasProperty("test:propertyMulti"));
  assertArrayEquals(new Value[]{s.getValueFactory().createValue("value1"),s.getValueFactory().createValue("value2")},test.getProperty("test:propertyMulti").getValues());
  assertTrue(test.hasNode("test:folder"));
  Node folder=test.getNode("test:folder");
  assertEquals("nt:folder",folder.getPrimaryNodeType().getName());
  assertTrue(folder.hasProperty("jcr:created"));
  assertTrue(folder.hasProperty("jcr:createdBy"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CRUDTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2488">OAK-2488</a>
 */
@Test public void testMixins() throws Exception {
  Session session=getAdminSession();
  String nodename="mixintest";
  Node mixinTest=session.getRootNode().addNode(nodename,"nt:folder");
  NodeType[] types;
  types=mixinTest.getMixinNodeTypes();
  assertEquals(Arrays.toString(types),0,types.length);
  mixinTest.addMixin("mix:versionable");
  types=mixinTest.getMixinNodeTypes();
  assertEquals(Arrays.toString(types),1,types.length);
  session.save();
  mixinTest=session.getRootNode().getNode(nodename);
  mixinTest.remove();
  mixinTest=session.getRootNode().addNode(nodename,"nt:folder");
  types=mixinTest.getMixinNodeTypes();
  assertEquals(Arrays.toString(types),0,types.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCRUD() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("world","hello world");
  session.save();
  assertEquals("hello world",session.getProperty("/hello/world").getString());
  session.getNode("/hello").setProperty("world","Hello, World!");
  session.save();
  assertEquals("Hello, World!",session.getProperty("/hello/world").getString());
  session.getNode("/hello").remove();
  session.save();
  assertTrue(!session.propertyExists("/hello/world"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetPropertyDateWithTimeZone() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  final Calendar cal=Calendar.getInstance();
  cal.setTimeZone(TimeZone.getTimeZone("America/Chicago"));
  cal.setTimeInMillis(1239902100000L);
  root.setProperty("start",cal);
  session.save();
  assertEquals(12,root.getProperty("start").getDate().get(Calendar.HOUR_OF_DAY));
  root.getProperty("start").remove();
  session.save();
}

</code></pre>

<br>
<pre class="type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMissingMVProperty() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Property p=root.setProperty("missing",(String[])null);
  assertNotNull(p);
  try {
    p.getValues();
    fail("must throw InvalidItemStateException");
  }
 catch (  InvalidItemStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMissingProperty() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Property p=root.setProperty("missing",(String)null);
  assertNotNull(p);
  try {
    p.getValue();
    fail("must throw InvalidItemStateException");
  }
 catch (  InvalidItemStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRemoveBySetProperty() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  try {
    root.setProperty("test","abc");
    assertNotNull(root.setProperty("test",(String)null));
  }
 catch (  PathNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRemoveBySetMVProperty() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  try {
    root.setProperty("test",new String[]{"abc","def"});
    assertNotNull(root.setProperty("test",(String[])null));
  }
 catch (  PathNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void checkPathInInvalidItemStateException() throws Exception {
  Session s1=getAdminSession();
  Node root=s1.getRootNode();
  Node a=root.addNode("a");
  String path=a.getPath();
  s1.save();
  Session s2=getAdminSession();
  s2.getRootNode().getNode("a").remove();
  s2.save();
  s1.refresh(false);
  try {
    a.getPath();
  }
 catch (  InvalidItemStateException e) {
    assertThat(e.getMessage(),containsString(path));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CompatibilityIssuesTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBinaryCoercion() throws RepositoryException, IOException {
  Session session=getAdminSession();
  String ntName="binaryCoercionTest";
  NodeTypeManager ntm=session.getWorkspace().getNodeTypeManager();
  NodeTypeTemplate ntt=ntm.createNodeTypeTemplate();
  ntt.setName(ntName);
  PropertyDefinitionTemplate propertyWithType=ntm.createPropertyDefinitionTemplate();
  propertyWithType.setName("javaObject");
  propertyWithType.setRequiredType(PropertyType.STRING);
  PropertyDefinitionTemplate unnamed=ntm.createPropertyDefinitionTemplate();
  unnamed.setName("*");
  unnamed.setRequiredType(PropertyType.UNDEFINED);
  List<PropertyDefinition> properties=ntt.getPropertyDefinitionTemplates();
  properties.add(propertyWithType);
  properties.add(unnamed);
  ntm.registerNodeType(ntt,false);
  Node node=session.getRootNode().addNode("testNodeForBinary",ntName);
  ByteArrayOutputStream bos=serializeObject("testValue");
  node.setProperty("javaObject",session.getValueFactory().createBinary(new ByteArrayInputStream(bos.toByteArray())));
  Assert.assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(bos.toByteArray()),node.getProperty("javaObject").getStream()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSearchDescendentUsingXPath() throws Exception {
  Session adminSession=getAdminSession();
  String testNodePath="/home/users/geometrixx-outdoors/emily.andrews@mailinator.com/social/relationships/following/aaron.mcdonald@mailinator.com";
  Node testNode=JcrUtils.getOrCreateByPath(testNodePath,null,adminSession);
  testNode.setProperty("id","aaron.mcdonald@mailinator.com");
  AccessControlManager acMgr=adminSession.getAccessControlManager();
  JackrabbitAccessControlList tmpl=AccessControlUtils.getAccessControlList(acMgr,"/home/users/geometrixx-outdoors");
  ValueFactory vf=adminSession.getValueFactory();
  Map<String,Value> restrictions=new HashMap<String,Value>();
  restrictions.put("rep:glob",vf.createValue("*/social/relationships/following/*"));
  tmpl.addEntry(EveryonePrincipal.getInstance(),new Privilege[]{acMgr.privilegeFromName(Privilege.JCR_READ)},true,restrictions);
  acMgr.setPolicy(tmpl.getPath(),tmpl);
  adminSession.save();
  Session anonymousSession=getRepository().login(new GuestCredentials());
  QueryManager qm=anonymousSession.getWorkspace().getQueryManager();
  Query q=qm.createQuery("/jcr:root/home//social/relationships/following//*[@id='aaron.mcdonald@mailinator.com']",Query.XPATH);
  QueryResult r=q.execute();
  RowIterator it=r.getRows();
  Assert.assertTrue(it.hasNext());
  anonymousSession.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentAddIT </h4><pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void addNodesSameParent() throws Exception {
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  Node test=getAdminSession().getRootNode().addNode("test","nt:unstructured");
  List<Thread> worker=new ArrayList<Thread>();
  for (int i=0; i < NUM_WORKERS; i++) {
    worker.add(new Thread(new Worker(createAdminSession(),test.getPath(),exceptions)));
  }
  getAdminSession().save();
  for (  Thread t : worker) {
    t.start();
  }
  for (  Thread t : worker) {
    t.join();
  }
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  getAdminSession().refresh(false);
  assertEquals(NODES_PER_WORKER * NUM_WORKERS,Iterators.size(test.getNodes()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentAddNodesClusterIT </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void rebaseVisibility() throws Exception {
  for (int i=0; i < 2; i++) {
    DocumentMK mk=new DocumentMK.Builder().setMongoDB(createConnection().getDB()).setAsyncDelay(0).setClusterId(i + 1).open();
    mks.add(mk);
  }
  final DocumentMK mk1=mks.get(0);
  final DocumentMK mk2=mks.get(1);
  Repository r1=new Jcr(mk1.getNodeStore()).createRepository();
  repos.add(r1);
  Repository r2=new Jcr(mk2.getNodeStore()).createRepository();
  repos.add(r2);
  Session s1=r1.login(new SimpleCredentials("admin","admin".toCharArray()));
  Session s2=r2.login(new SimpleCredentials("admin","admin".toCharArray()));
  Node root1=s1.getRootNode().addNode("session-1");
  s1.save();
  Node root2=s2.getRootNode().addNode("session-2");
  s2.save();
  runBackgroundOps(mk1);
  runBackgroundOps(mk2);
  runBackgroundOps(mk1);
  createNodes(root1,"nodes");
  createNodes(root2,"nodes");
  s2.save();
  runBackgroundOps(mk2);
  runBackgroundOps(mk1);
  assertFalse(s1.getRootNode().hasNode("session-2/nodes"));
  s1.refresh(true);
  assertTrue(s1.getRootNode().hasNode("session-2/nodes"));
  s1.logout();
  s2.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentFileOperationsTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void interleavingOperations2() throws Exception {
  Node folder1=testRootNode.addNode("folder1","nt:unstructured");
  Node folder2=testRootNode.addNode("folder2","nt:unstructured");
  addFile(testRootNode,"dummy");
  session.save();
  Session s1=createAdminSession();
  Session s2=createAdminSession();
  try {
    Node file1=addFile(s1.getNode(folder1.getPath()),"file1.tmp");
    Node file2=addFile(s2.getNode(folder2.getPath()),"file2.tmp");
    s1.save();
    s2.save();
    rename(file1,"file1.bin");
    rename(file2,"file2.bin");
    s1.save();
    s2.save();
  }
  finally {
    s1.logout();
    s2.logout();
  }
  session.refresh(false);
  assertTrue(session.nodeExists(folder1.getPath() + "/file1.bin"));
  assertFalse(session.nodeExists(folder1.getPath() + "/file1.tmp"));
  assertTrue(session.nodeExists(folder2.getPath() + "/file2.bin"));
  assertFalse(session.nodeExists(folder2.getPath() + "/file2.tmp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConflictResolutionTest </h4><pre class="type-7 type-6 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteChangedNode() throws RepositoryException {
  deleteChangedNodeOps("node0");
  Set<String> mnsdLogs;
  Set<String> cvLogs;
  try {
    logMergingNodeStateDiff.starting();
    logConflictValidator.starting();
    deleteChangedNodeOps("node1");
  }
  finally {
    mnsdLogs=Sets.newHashSet(logMergingNodeStateDiff.getLogs());
    cvLogs=Sets.newHashSet(logConflictValidator.getLogs());
    logMergingNodeStateDiff.finished();
    logConflictValidator.finished();
  }
  assertTrue(mnsdLogs.size() == 1);
  assertThat("MergingNodeStateDiff log message must contain a reference to the handler",mnsdLogs.toString(),containsString("NodeConflictHandler<DELETE_CHANGED_NODE>"));
  assertThat("MergingNodeStateDiff log message must contain a reference to the resolution",mnsdLogs.toString(),containsString("DELETE_CHANGED_NODE with resolution THEIRS"));
  assertThat("MergingNodeStateDiff log message must contain a reference to the modified property",mnsdLogs.toString(),containsString("^\"/metadata/updated\":\"myself\"]"));
  assertTrue(cvLogs.size() == 1);
  assertThat("ConflictValidator log message must contain a reference to the path",cvLogs.toString(),containsString("/node1 = {deleteChangedNode = {jcr:content}}"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CopyTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopyVersionableNodeCreatesJcrCopiedFrom() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_VERSIONABLE);
  session.save();
  Version baseV=toCopy.getBaseVersion();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  Node copy=testNode.getNode("target/copied");
  VersionHistory copiedVh=copy.getVersionHistory();
  assertTrue(copiedVh.hasProperty(VersionConstants.JCR_COPIED_FROM));
  Property prop=copiedVh.getProperty(VersionConstants.JCR_COPIED_FROM);
  assertEquals(PropertyType.WEAKREFERENCE,prop.getType());
  Node copiedFrom=prop.getNode();
  assertTrue(baseV.isSame(copiedFrom));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyReferenceableChildNode() throws Exception {
  Session session=getAdminSession();
  session.getNode(TEST_PATH + "/source/node").addNode("child").addMixin(JcrConstants.MIX_REFERENCEABLE);
  session.save();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
  Node childCopy=testNode.getNode("target/copied/child");
  assertTrue(childCopy.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  assertFalse(childCopy.getUUID().equals(testNode.getNode("source/node/child").getUUID()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyReferenceableNode() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_REFERENCEABLE);
  session.save();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
  Node copy=testNode.getNode("target/copied");
  assertTrue(copy.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  assertFalse(copy.getUUID().equals(testNode.getNode("source/node").getUUID()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyVersionableNode() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_VERSIONABLE);
  session.save();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
  Node copy=testNode.getNode("target/copied");
  assertTrue(copy.isNodeType(JcrConstants.MIX_VERSIONABLE));
  assertFalse(copy.getVersionHistory().isSame(toCopy.getVersionHistory()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyLockedNode() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_LOCKABLE);
  session.save();
  session.getWorkspace().getLockManager().lock(toCopy.getPath(),true,true,Long.MAX_VALUE,"my");
  assertTrue(toCopy.isLocked());
  assertTrue(toCopy.hasProperty(JcrConstants.JCR_LOCKISDEEP));
  assertTrue(toCopy.hasProperty(JcrConstants.JCR_LOCKOWNER));
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
  Node copy=testNode.getNode("target/copied");
  assertTrue(copy.isNodeType(JcrConstants.MIX_LOCKABLE));
  assertFalse(copy.isLocked());
  assertFalse(copy.hasProperty(JcrConstants.JCR_LOCKISDEEP));
  assertFalse(copy.hasProperty(JcrConstants.JCR_LOCKOWNER));
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopyVersionableNodeClearsVersions() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_VERSIONABLE);
  session.save();
  Version v1=toCopy.checkin();
  toCopy.checkout();
  Version v2=toCopy.checkin();
  toCopy.checkout();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  Node copy=testNode.getNode("target/copied");
  VersionHistory vh=copy.getVersionHistory();
  Version rootV=vh.getRootVersion();
  assertEquals(0,rootV.getSuccessors().length);
  VersionIterator vItr=vh.getAllVersions();
  while (vItr.hasNext()) {
    if (!rootV.isSame(vItr.nextVersion())) {
      fail("Unexpected version in version history of copied node.");
    }
  }
  try {
    vh.getVersion(v1.getName());
    fail("Unexpected version in version history of copied node.");
  }
 catch (  VersionException e) {
  }
  try {
    vh.getVersion(v2.getName());
    fail("Unexpected version in version history of copied node.");
  }
 catch (  VersionException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.LongPathTest </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLongPath() throws Exception {
  Session s=getAdminSession();
  StringBuilder buff=new StringBuilder();
  for (int i=0; i < 10; i++) {
    buff.append("0123456789");
  }
  String longName="n" + buff.toString();
  Node n=s.getRootNode();
  ArrayList<String> paths=new ArrayList<String>();
  for (int i=0; i < 30; i++) {
    n=n.addNode(longName + "_" + i);
    paths.add(n.getPath());
  }
  s.save();
  Session s2=createAdminSession();
  Node n2=s2.getRootNode();
  for (int i=0; i < 30; i++) {
    n2=n2.getNode(longName + "_" + i);
    assertEquals(paths.get(i),n2.getPath());
  }
  s2.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ManyChildrenIT </h4><pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sizeTest() throws Exception {
  Session session=getAdminSession();
  int count=5000;
  String nodeType="nt:folder";
  Node many=session.getRootNode().addNode("many",nodeType);
  for (int i=0; i < count; i++) {
    many.addNode("test" + i,nodeType);
  }
  session.save();
  Session session2=getAdminSession();
  many=session2.getRootNode().getNode("many");
  NodeIterator it=many.getNodes();
  long size=it.getSize();
  assertTrue("size: " + size,size == -1 || size == count);
  for (int i=0; i < count; i++) {
    assertTrue(it.hasNext());
    it.next();
  }
  assertFalse(it.hasNext());
  session2.logout();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addRemoveNodes() throws Exception {
  int numNodes=101;
  Session writer=getAdminSession();
  Node test=writer.getRootNode().addNode("test","nt:unstructured");
  for (int i=0; i < numNodes; i++) {
    test.addNode("node-" + i,"nt:unstructured");
  }
  writer.save();
  for (int i=0; i < numNodes; i++) {
    if (i % 2 == 0) {
      test.getNode("node-" + i).remove();
    }
  }
  writer.save();
  test.addNode("node-x");
  writer.save();
  assertTrue(test.hasNode("node-x"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.MoveRemoveTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveExistingNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  session.save();
  Node n=session.getNode("/new");
  session.move("/new","/moved");
  assertEquals("/moved",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveExistingNodeRefresh() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  session.save();
  Session session2=createAdminSession();
  Node n2=session2.getNode("/new");
  Node n=session.getNode("/new");
  session.move("/new","/moved");
  session.save();
  session2.refresh(false);
  try {
    n2.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("new");
  session.save();
  session2.refresh(false);
  assertEquals("/new",n2.getPath());
  session2.logout();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveExistingParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  Node p=session.getNode("/parent");
  Node n=session.getNode("/parent/new");
  session.move("/parent","/moved");
  assertEquals("/moved",p.getPath());
  assertEquals("/moved/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveExistingNodeRefreshParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  Session session2=createAdminSession();
  Node n2=session2.getNode("/parent/new");
  Node n=session.getNode("/parent/new");
  session.move("/parent","/moved");
  session.save();
  session2.refresh(false);
  try {
    n2.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  session2.refresh(false);
  assertEquals("/parent/new",n2.getPath());
  session2.logout();
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeExistingNodeParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  Node n=session.getNode("/parent/new");
  n.getParent().remove();
  try {
    n.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("parent").addNode("new");
  assertEquals("/parent/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeExistingNodeRefreshParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  Session session2=createAdminSession();
  Node n2=session2.getNode("/parent/new");
  Node n=session.getNode("/parent/new");
  n.getParent().remove();
  session.save();
  session2.refresh(false);
  try {
    n2.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("parent").addNode("new");
  session.save();
  session2.refresh(false);
  assertEquals("/parent/new",n2.getPath());
  session2.logout();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveNewNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  Node n=session.getNode("/new");
  session.move("/new","/moved");
  assertEquals("/moved",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeNewNodeParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  Node n=session.getNode("/parent/new");
  n.getParent().remove();
  try {
    n.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("parent").addNode("new");
  assertEquals("/parent/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void moveNewNodeParent() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("parent").addNode("new");
  Node n=session.getNode("/parent/new");
  session.move("/parent","/moved");
  assertEquals("/moved/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeExistingNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  session.save();
  Node n=session.getNode("/new");
  n.remove();
  try {
    n.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("new");
  assertEquals("/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeNewNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  Node n=session.getNode("/new");
  n.remove();
  try {
    n.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("new");
  assertEquals("/new",n.getPath());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeExistingNodeRefresh() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("new");
  session.save();
  Session session2=createAdminSession();
  Node n2=session2.getNode("/new");
  Node n=session.getNode("/new");
  n.remove();
  session.save();
  session2.refresh(false);
  try {
    n2.getPath();
    fail();
  }
 catch (  InvalidItemStateException e) {
  }
  session.getRootNode().addNode("new");
  session.save();
  session2.refresh(false);
  assertEquals("/new",n2.getPath());
  session2.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.MoveTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMoveReferenceable() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  node1.addMixin(JcrConstants.MIX_REFERENCEABLE);
  Node node2=testRootNode.addNode(nodeName2);
  superuser.save();
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,true);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMoveNewReferenceable() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  node1.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node1.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  Node node2=testRootNode.addNode(nodeName2);
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,false);
  assertEquals(destPath,node1.getPath());
  superuser.save();
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMove() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  Node node2=testRootNode.addNode(nodeName2);
  superuser.save();
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,true);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRename() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  superuser.save();
  String destPath=testRoot + '/' + nodeName2;
  move(node1.getPath(),destPath,true);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Simulate a 'rename' call using 3 sessions:
 * - 1st create a node that has a '.tmp' extension 
 * - 2nd remove the '.tmp' by issuing a Session#move call on a new session
 * - 3rd verify the move by issuing a #getNode call on the destination path using a new session
 */
@Test public void testOak898() throws Exception {
  String name="testMove";
  Node node=testRootNode.addNode(name + ".tmp");
  superuser.save();
  String destPath=testRootNode.getPath() + '/' + name;
  Session session2=getHelper().getSuperuserSession();
  try {
    assertFalse(session2.hasPendingChanges());
    session2.move(node.getPath(),destPath);
    assertTrue(session2.hasPendingChanges());
    session2.save();
  }
  finally {
    session2.logout();
  }
  Session session3=getHelper().getSuperuserSession();
  try {
    assertNotNull(session3.getNode(destPath));
  }
  finally {
    session3.logout();
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRenameNewNode() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  String destPath=testRoot + '/' + nodeName2;
  move(node1.getPath(),destPath,false);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMoveNewNode() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  Node node2=testRootNode.addNode(nodeName2);
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,false);
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.OrderableNodesTest </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setPrimaryType() throws Exception {
  new TestContentLoader().loadTestContent(getAdminSession());
  Session session=getAdminSession();
  Node root=session.getRootNode().addNode("test","nt:folder");
  List<String> names=new ArrayList<String>();
  for (int i=0; i < 100; i++) {
    String name="node-" + i;
    root.addNode(name,"nt:folder");
    names.add(name);
  }
  root.setPrimaryType("test:orderableFolder");
  List<String> expected=getChildNames(root);
  while (!expected.isEmpty()) {
    String name=expected.remove((int)Math.floor(Math.random() * expected.size()));
    root.getNode(name).remove();
    assertEquals(expected,getChildNames(root));
  }
  for (  String name : names) {
    root.addNode(name,"nt:folder");
    expected.add(name);
    assertEquals(expected,getChildNames(root));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-612
 */
@Test public void testAddNode() throws Exception {
  new TestContentLoader().loadTestContent(getAdminSession());
  Session session=getAdminSession();
  Node test=session.getRootNode().addNode("test","test:orderableFolder");
  assertTrue(test.getPrimaryNodeType().hasOrderableChildNodes());
  test.addNode("a");
  test.addNode("b");
  session.save();
  NodeIterator it=test.getNodes();
  assertEquals("a",it.nextNode().getName());
  assertEquals("b",it.nextNode().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ReferenceBinaryIT </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Taken from org.apache.jackrabbit.core.value.ReferenceBinaryTest
 * @throws Exception
 */
@Test public void testReferenceBinaryExchangeWithSharedRepository() throws Exception {
  Session firstSession=createAdminSession();
  Binary b=firstSession.getValueFactory().createBinary(new RandomInputStream(1,STREAM_LENGTH));
  ReferenceBinary referenceBinary=null;
  if (b instanceof ReferenceBinary) {
    referenceBinary=(ReferenceBinary)b;
  }
  assertNotNull(referenceBinary);
  assertNotNull(referenceBinary.getReference());
  String newNode="sample_" + System.nanoTime();
  firstSession.getRootNode().addNode(newNode).setProperty("reference",referenceBinary.getReference());
  firstSession.save();
  Session secondSession=repository.login(new SimpleCredentials("admin","admin".toCharArray()));
  String reference=secondSession.getRootNode().getNode(newNode).getProperty("reference").getString();
  ReferenceBinary ref=new SimpleReferenceBinary(reference);
  assertEquals(b,secondSession.getValueFactory().createValue(ref).getBinary());
  safeLogout(firstSession);
  safeLogout(secondSession);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.RefreshOnGCTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void compactionCausesRefresh() throws RepositoryException, InterruptedException, ExecutionException, IOException {
  Session session=repository.login(new SimpleCredentials("admin","admin".toCharArray()));
  try {
    Node root=session.getRootNode();
    root.addNode("one");
    session.save();
    addNode(repository,"two");
    fileStore.compact();
    assertTrue(root.hasNode("one"));
    assertTrue("Node two must be visible as compaction should cause the session to refresh",root.hasNode("two"));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.RepositoryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDouble() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(42.1d);
  values[1]=getAdminSession().getValueFactory().createValue(99.0d);
  parentNode.setProperty("multi double",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi double");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DOUBLE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void largeMultiValueProperty() throws Exception {
  final List<String> logMessages=Lists.newArrayList();
  Appender<ILoggingEvent> a=new AppenderBase<ILoggingEvent>(){
    @Override protected void append(    ILoggingEvent e){
      if (Level.WARN.isGreaterOrEqual(e.getLevel())) {
        logMessages.add(e.getFormattedMessage());
      }
    }
  }
;
  a.start();
  rootLogger().addAppender(a);
  Session session=getAdminSession();
  Node node=session.getRootNode().addNode("largeMultiValueProperty","nt:unstructured");
  String[] largeArray=new String[1000 + 1];
  Arrays.fill(largeArray,"x");
  Property p=node.setProperty("fooProp",largeArray);
  Property p2=node.setProperty("barProp",new String[]{"x"});
  p2.setValue(largeArray);
  session.save();
  rootLogger().detachAppender(a);
  a.stop();
  assertTrue(logMessages.size() >= 2);
  assertThat("Warn log message must contains a reference to the large array property path",logMessages.toString(),containsString(p.getPath()));
  assertThat("Warn log message must contains a reference to the large array property path",logMessages.toString(),containsString(p2.getPath()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeFromNode() throws RepositoryException {
  Node root=getNode("/");
  Node node=root.getNode("foo");
  assertNotNull(node);
  assertEquals("foo",node.getName());
  assertEquals("/foo",node.getPath());
  Node nodeAgain=getNode("/foo");
  assertTrue(node.isSame(nodeAgain));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDecimal() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(BigDecimal.valueOf(42));
  values[1]=getAdminSession().getValueFactory().createValue(BigDecimal.valueOf(99));
  parentNode.setProperty("multi decimal",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi decimal");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DECIMAL,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void move() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  Node source=node.addNode("source").addNode("node");
  node.addNode("target");
  session.save();
  session.refresh(true);
  session.move(TEST_PATH + "/source/node",TEST_PATH + "/target/moved");
  assertEquals(TEST_PATH + "/target/moved",source.getPath());
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
  session.save();
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void workspaceCopyWithReferences() throws RepositoryException {
  Session session=getAdminSession();
  ValueFactory vf=session.getValueFactory();
  Node root=session.getRootNode();
  Node other=root.addNode("other");
  other.addMixin("mix:referenceable");
  Node src=root.addNode("src");
  Node test=src.addNode("test");
  test.addMixin("mix:referenceable");
  src.setProperty("test",test);
  src.setProperty("other",other);
  src.setProperty("multi",new Value[]{vf.createValue(test),vf.createValue(other)});
  session.save();
  session.getWorkspace().copy("/src","/dest");
  Node dest=root.getNode("dest");
  assertEquals("/dest/test",dest.getProperty("test").getNode().getPath());
  assertEquals("/other",dest.getProperty("other").getNode().getPath());
  Value[] refs=dest.getProperty("multi").getValues();
  assertEquals(2,refs.length);
  Set<String> paths=new HashSet<String>();
  for (  Value v : refs) {
    paths.add(session.getNodeByIdentifier(v.getString()).getPath());
  }
  assertTrue(paths.contains("/other"));
  assertTrue(paths.contains("/dest/test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void importNodeType() throws RepositoryException, IOException, ParseException {
  Session session=getAdminSession();
  NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
  if (!manager.hasNodeType("myNodeType")) {
    StringBuilder defs=new StringBuilder();
    defs.append("[\"myNodeType\"]\n");
    defs.append("  - prop1\n");
    defs.append("  + * (nt:base) = nt:unstructured \n");
    Reader cndReader=new InputStreamReader(new ByteArrayInputStream(defs.toString().getBytes()));
    CndImporter.registerNodeTypes(cndReader,session);
  }
  NodeType myNodeType=manager.getNodeType("myNodeType");
  assertTrue(myNodeType.isNodeType("nt:base"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNamedWeakReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  Value value=session.getValueFactory().createValue(referee,true);
  getNode(TEST_PATH).setProperty("weak-reference1",value);
  getNode("/bar").setProperty("weak-reference2",value);
  session.save();
  PropertyIterator refs=referee.getWeakReferences("weak-reference1");
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("weak-reference1",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedBinary() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  InputStream is=new ByteArrayInputStream("foo".getBytes());
  Binary bin=getAdminSession().getValueFactory().createBinary(is);
  values[0]=getAdminSession().getValueFactory().createValue(bin);
  is=new ByteArrayInputStream("bar".getBytes());
  bin=getAdminSession().getValueFactory().createBinary(is);
  values[1]=getAdminSession().getValueFactory().createValue(bin);
  parentNode.setProperty("multi binary",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi binary");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BINARY,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getRootFromPath() throws RepositoryException {
  Node root=getNode("/");
  assertEquals("",root.getName());
  assertEquals("/",root.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionRemappedNamespace() throws RepositoryException {
  NamespaceRegistry nsReg=getAdminSession().getWorkspace().getNamespaceRegistry();
  nsReg.registerNamespace("foo","file:///foo");
  getAdminSession().getRootNode().addNode("foo:test");
  getAdminSession().save();
  Session s=createAdminSession();
  s.setNamespacePrefix("bar","file:///foo");
  assertTrue(s.getRootNode().hasNode("bar:test"));
  Node n=s.getRootNode().getNode("bar:test");
  assertEquals("bar:test",n.getName());
  s.logout();
  getAdminSession().getRootNode().getNode("foo:test").remove();
  getAdminSession().save();
  nsReg.unregisterNamespace("foo");
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeDot() throws RepositoryException {
  Node node=getNode("/foo");
  Node same=node.getNode(".");
  assertNotNull(same);
  assertEquals("foo",same.getName());
  assertTrue(same.isSame(node));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNode() throws RepositoryException {
  Node node=getNode("/foo");
  assertNotNull(node);
  assertEquals("foo",node.getName());
  assertEquals("/foo",node.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void expandedName() throws RepositoryException {
  Session session=getAdminSession();
  session.setNamespacePrefix("foo","http://example.com/");
  session.getRootNode().addNode("{0} test");
  session.save();
  assertTrue(session.nodeExists("/{0} test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsNew() throws RepositoryException, InterruptedException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node node1=root.addNode("node1");
  session.save();
  node1.remove();
  Node node2=root.addNode("node2");
  assertTrue("The Node is just added",node2.isNew());
  Node node1Again=root.addNode("node1");
  assertTrue("The Node is just added but has a remove in same commit",node1Again.isNew());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedStringWithNull() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[3];
  values[0]=getAdminSession().getValueFactory().createValue(true);
  values[2]=getAdminSession().getValueFactory().createValue(false);
  parentNode.setProperty("multi with null",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi with null");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BOOLEAN,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length - 1,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveReferenceable() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  node.addNode("source").addNode("node").addMixin("mix:referenceable");
  node.addNode("target");
  session.save();
  session.refresh(true);
  session.move(TEST_PATH + "/source/node",TEST_PATH + "/target/moved");
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
  session.save();
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNamespaceRegistry() throws RepositoryException {
  NamespaceRegistry nsReg=getAdminSession().getWorkspace().getNamespaceRegistry();
  assertFalse(asList(nsReg.getPrefixes()).contains("foo"));
  assertFalse(asList(nsReg.getURIs()).contains("file:///foo"));
  nsReg.registerNamespace("foo","file:///foo");
  assertTrue(asList(nsReg.getPrefixes()).contains("foo"));
  assertTrue(asList(nsReg.getURIs()).contains("file:///foo"));
  nsReg.unregisterNamespace("foo");
  assertFalse(asList(nsReg.getPrefixes()).contains("foo"));
  assertFalse(asList(nsReg.getURIs()).contains("file:///foo"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addNode() throws RepositoryException {
  Session session=getAdminSession();
  String newNode=TEST_PATH + "/new";
  assertFalse(session.nodeExists(newNode));
  Node node=getNode(TEST_PATH);
  Node added=node.addNode("new");
  assertFalse(node.isNew());
  assertTrue(node.isModified());
  assertTrue(added.isNew());
  assertFalse(added.isModified());
  session.save();
  Session session2=createAnonymousSession();
  try {
    assertTrue(session2.nodeExists(newNode));
    added=session2.getNode(newNode);
    assertFalse(added.isNew());
    assertFalse(added.isModified());
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addNodeToRootNode() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  String newNode="newNodeBelowRoot";
  assertFalse(root.hasNode(newNode));
  root.addNode(newNode);
  session.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValueName() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi name",values,PropertyType.NAME);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi name");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.NAME,property.getType());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedURI() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("http://www.day.com",PropertyType.URI);
  values[1]=getAdminSession().getValueFactory().createValue("file://var/dam",PropertyType.URI);
  parentNode.setProperty("multi uri",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi uri");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.URI,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getNodeByIdentifier() throws RepositoryException {
  Node node=getNode("/foo");
  String id=node.getIdentifier();
  Node node2=getAdminSession().getNodeByIdentifier(id);
  assertTrue(node.isSame(node2));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveRefreshConflict() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getRootNode().addNode("node").setProperty("p","v1");
    session2.getRootNode().addNode("node").setProperty("p","v2");
    assertTrue(session1.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().hasNode("node"));
    session1.save();
    assertTrue(session1.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().hasNode("node"));
    session2.refresh(true);
    assertTrue(session1.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().hasNode("node"));
    try {
      session2.save();
      fail("Expected InvalidItemStateException");
    }
 catch (    InvalidItemStateException expected) {
    }
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renameNonOrderable() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node parent=root.addNode("parent",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  parent.addNode("fo");
  Node foo=parent.addNode("foo");
  session.save();
  ((JackrabbitNode)foo).rename("renamed");
  assertEquals("renamed",foo.getName());
  assertFalse(session.nodeExists("/parent/foo"));
  assertTrue(session.nodeExists("/parent/renamed"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void setDoubleNaNProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"NaN",getAdminSession().getValueFactory().createValue(Double.NaN));
  Session session2=createAnonymousSession();
  try {
    Property property2=session2.getProperty(TEST_PATH + "/NaN");
    assertTrue(Double.isNaN(property2.getDouble()));
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedLong() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(42L);
  values[1]=getAdminSession().getValueFactory().createValue(84L);
  parentNode.setProperty("multi long",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi long");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.LONG,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedString() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("one");
  values[1]=getAdminSession().getValueFactory().createValue("two");
  parentNode.setProperty("multi string",values);
  parentNode.getSession().save();
  Session session2=createAdminSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi string");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.STRING,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sessionRefreshTrue() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    Node foo=session1.getNode("/foo");
    Node added=foo.addNode("added");
    assertTrue(added.isNew());
    session2.getNode("/foo").addNode("bar");
    session2.save();
    session1.refresh(true);
    assertTrue(foo.hasNode("added"));
    assertTrue(foo.getNode("added").isNew());
    assertTrue(foo.hasNode("bar"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValue() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi value",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi value");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.STRING,property.getType());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setPrimaryType() throws RepositoryException {
  Node testNode=getNode(TEST_PATH);
  assertEquals("nt:unstructured",testNode.getPrimaryNodeType().getName());
  assertEquals("nt:unstructured",testNode.getProperty("jcr:primaryType").getString());
  testNode.setPrimaryType("nt:folder");
  getAdminSession().save();
  Session session2=createAnonymousSession();
  try {
    testNode=session2.getNode(TEST_PATH);
    assertEquals("nt:folder",testNode.getPrimaryNodeType().getName());
    assertEquals("nt:folder",testNode.getProperty("jcr:primaryType").getString());
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-118") @Test public void createDeleteWorkspace() throws RepositoryException {
  getAdminSession().getWorkspace().createWorkspace("new");
  Session session2=createAdminSession();
  try {
    String[] workspaces=session2.getWorkspace().getAccessibleWorkspaceNames();
    assertTrue(asList(workspaces).contains("new"));
    Session session3=getRepository().login("new");
    assertEquals("new",session3.getWorkspace().getName());
    session3.logout();
    session2.getWorkspace().deleteWorkspace("new");
  }
  finally {
    session2.logout();
  }
  Session session4=createAdminSession();
  try {
    String[] workspaces=session4.getWorkspace().getAccessibleWorkspaceNames();
    assertFalse(asList(workspaces).contains("new"));
  }
  finally {
    session4.logout();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeNode() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  parentNode.addNode("newNode");
  parentNode.getSession().save();
  Session session2=createAdminSession();
  try {
    Node removeNode=session2.getNode(TEST_PATH + "/newNode");
    removeNode.remove();
    try {
      removeNode.getParent();
      fail("Cannot retrieve the parent from a transiently removed item.");
    }
 catch (    InvalidItemStateException expected) {
    }
    assertTrue(session2.getNode(TEST_PATH).isModified());
    session2.save();
  }
  finally {
    session2.logout();
  }
  Session session3=createAnonymousSession();
  try {
    assertFalse(session3.nodeExists(TEST_PATH + "/newNode"));
    assertFalse(session3.getNode(TEST_PATH).isModified());
  }
  finally {
    session3.logout();
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void invalidItemStateExceptionOnRemovedNode() throws Exception {
  Session session=getAdminSession();
  for (  String parentPath : new String[]{"/",TEST_PATH}) {
    Node parent=session.getNode(parentPath);
    Node child=parent.addNode("child");
    String childPath=child.getPath();
    child.remove();
    try {
      child.getPath();
      fail();
    }
 catch (    InvalidItemStateException expected) {
    }
    session.save();
    try {
      child.getPath();
      fail();
    }
 catch (    InvalidItemStateException expected) {
    }
    parent.addNode("child");
    assertEquals(childPath,child.getPath());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setMultiValuedProperty() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("one");
  values[1]=getAdminSession().getValueFactory().createValue("two");
  parentNode.setProperty("multi string2",values);
  parentNode.getSession().save();
  values[0]=getAdminSession().getValueFactory().createValue("eins");
  values[1]=getAdminSession().getValueFactory().createValue("zwei");
  parentNode.setProperty("multi string2",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi string2");
    assertTrue(property.isMultiple());
    Value[] values2=property.getValues();
    assertEquals(2,values.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionRefresh() throws RepositoryException {
  Session session=getAdminSession();
  session.getNode("/").addNode("node1");
  session.getNode("/node1").addNode("node2");
  session.getNode("/").addNode("node1/node3");
  Node node1=session.getNode("/node1");
  assertEquals("/node1",node1.getPath());
  Node node2=session.getNode("/node1/node2");
  assertEquals("/node1/node2",node2.getPath());
  Node node3=session.getNode("/node1/node3");
  assertEquals("/node1/node3",node3.getPath());
  node3.setProperty("property1","value1");
  Item property1=session.getProperty("/node1/node3/property1");
  assertFalse(property1.isNode());
  assertEquals("value1",((Property)property1).getString());
  session.refresh(true);
  assertTrue(session.itemExists("/node1"));
  assertTrue(session.itemExists("/node1/node2"));
  assertTrue(session.itemExists("/node1/node3"));
  assertTrue(session.itemExists("/node1/node3/property1"));
  session.refresh(false);
  assertFalse(session.itemExists("/node1"));
  assertFalse(session.itemExists("/node1/node2"));
  assertFalse(session.itemExists("/node1/node3"));
  assertFalse(session.itemExists("/node1/node3/property1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void liveNodes() throws RepositoryException {
  Session session=getAdminSession();
  Node n1=(Node)session.getItem(TEST_PATH);
  Node n2=(Node)session.getItem(TEST_PATH);
  Node c1=n1.addNode("c1");
  Node c2=n2.addNode("c2");
  assertTrue(n1.hasNode("c1"));
  assertTrue(n1.hasNode("c2"));
  assertTrue(n2.hasNode("c1"));
  assertTrue(n2.hasNode("c2"));
  c1.remove();
  assertFalse(n1.hasNode("c1"));
  assertTrue(n1.hasNode("c2"));
  assertFalse(n2.hasNode("c1"));
  assertTrue(n2.hasNode("c2"));
  c2.remove();
  assertFalse(n1.hasNode("c1"));
  assertFalse(n1.hasNode("c2"));
  assertFalse(n2.hasNode("c1"));
  assertFalse(n2.hasNode("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedBoolean() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(true);
  values[1]=getAdminSession().getValueFactory().createValue(false);
  parentNode.setProperty("multi boolean",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi boolean");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BOOLEAN,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  getNode(TEST_PATH).setProperty("reference",session.getValueFactory().createValue(referee));
  session.save();
  PropertyIterator refs=referee.getReferences();
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("reference",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mixin() throws RepositoryException {
  NodeTypeManager ntMgr=getAdminSession().getWorkspace().getNodeTypeManager();
  NodeTypeTemplate mixTest=ntMgr.createNodeTypeTemplate();
  mixTest.setName("mix:test");
  mixTest.setMixin(true);
  ntMgr.registerNodeType(mixTest,false);
  Node testNode=getNode(TEST_PATH);
  NodeType[] mix=testNode.getMixinNodeTypes();
  assertEquals(0,mix.length);
  testNode.addMixin("mix:test");
  testNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    mix=session2.getNode(TEST_PATH).getMixinNodeTypes();
    assertEquals(1,mix.length);
    assertEquals("mix:test",mix[0].getName());
  }
  finally {
    session2.logout();
  }
  testNode.removeMixin("mix:test");
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNamedReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  Value value=session.getValueFactory().createValue(referee);
  getNode(TEST_PATH).setProperty("reference1",value);
  getNode("/bar").setProperty("reference2",value);
  session.save();
  PropertyIterator refs=referee.getReferences("reference1");
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("reference1",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void importWithRegisteredType() throws Exception {
  Session session=getAdminSession();
  NodeTypeManager ntMgr=getAdminSession().getWorkspace().getNodeTypeManager();
  NodeTypeTemplate ntd=ntMgr.createNodeTypeTemplate();
  ntd.setName("fooType");
  PropertyDefinitionTemplate propDefTemplate=ntMgr.createPropertyDefinitionTemplate();
  propDefTemplate.setName("fooProp");
  propDefTemplate.setRequiredType(PropertyType.STRING);
  ntd.getPropertyDefinitionTemplates().add(propDefTemplate);
  ntMgr.registerNodeType(ntd,false);
  Node node=session.getRootNode().addNode("node","fooType");
  node.setProperty("fooProp","fooValue");
  session.save();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  session.exportDocumentView("/node",out,true,false);
  node.remove();
  session.save();
  session.getWorkspace().importXML("/",new ByteArrayInputStream(out.toByteArray()),IMPORT_UUID_CREATE_NEW);
  session.save();
  assertEquals("fooValue",session.getProperty("/node/fooProp").getString());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValuedProperty() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi empty",values,PropertyType.BOOLEAN);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi empty");
    assertTrue(property.isMultiple());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeByUUID() throws RepositoryException {
  Node node=getNode("/foo").addNode("boo");
  node.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String uuid=node.getUUID();
  assertNotNull(uuid);
  assertEquals(uuid,node.getIdentifier());
  Node nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
  Node childNode=node.addNode("boohoo");
  childNode.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(childNode.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String childUuid=childNode.getUUID();
  assertNotNull(childUuid);
  assertEquals(childUuid,childNode.getIdentifier());
  nAgain=childNode.getSession().getNodeByUUID(childUuid);
  assertTrue(nAgain.isSame(childNode));
  assertTrue(nAgain.isSame(childNode.getSession().getNodeByIdentifier(childUuid)));
  node.getSession().move("/foo/boo","/foo/boohoo");
  node=getNode("/foo/boohoo");
  nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void liveNode() throws RepositoryException {
  Session session=getAdminSession();
  Node n1=session.getNode(TEST_PATH);
  Node n2=session.getNode(TEST_PATH);
  assertTrue(n1.isSame(n2));
  Node c1=n1.addNode("c1");
  n1.setProperty("p1","v1");
  c1.setProperty("pc1","vc1");
  Node c2=n2.addNode("c2");
  n2.setProperty("p2","v2");
  c2.setProperty("pc2","vc2");
  assertTrue(c1.isSame(n2.getNode("c1")));
  assertTrue(c2.isSame(n1.getNode("c2")));
  assertTrue(n1.hasNode("c1"));
  assertTrue(n1.hasNode("c2"));
  assertTrue(n1.hasProperty("p1"));
  assertTrue(n1.hasProperty("p2"));
  assertTrue(c1.hasProperty("pc1"));
  assertFalse(c1.hasProperty("pc2"));
  assertTrue(n2.hasNode("c1"));
  assertTrue(n2.hasNode("c2"));
  assertTrue(n2.hasProperty("p1"));
  assertTrue(n2.hasProperty("p2"));
  assertFalse(c2.hasProperty("pc1"));
  assertTrue(c2.hasProperty("pc2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedName() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("jcr:foo",PropertyType.NAME);
  values[1]=getAdminSession().getValueFactory().createValue("bar",PropertyType.NAME);
  parentNode.setProperty("multi name",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi name");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.NAME,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperties() throws RepositoryException {
  Set<String> propertyNames=new HashSet<String>(){
{
      add("intProp");
      add("mvProp");
      add("added");
    }
  }
;
  Set<String> values=new HashSet<String>(){
{
      add("added");
      add("1");
      add("2");
      add("3");
      add("42");
    }
  }
;
  Node node=getNode("/foo");
  node.setProperty("added","added");
  node.getProperty("stringProp").remove();
  node.getProperty("intProp").remove();
  node.setProperty("intProp",42);
  PropertyIterator properties=node.getProperties();
  assertEquals(4,properties.getSize());
  while (properties.hasNext()) {
    Property p=properties.nextProperty();
    if (JcrConstants.JCR_PRIMARYTYPE.equals(p.getName())) {
      continue;
    }
    assertTrue(propertyNames.remove(p.getName()));
    if (p.isMultiple()) {
      for (      Value v : p.getValues()) {
        assertTrue(values.remove(v.getString()));
      }
    }
 else {
      assertTrue(values.remove(p.getString()));
    }
  }
  assertTrue(propertyNames.isEmpty());
  assertTrue(values.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperty() throws RepositoryException {
  Property property=getProperty("/foo/stringProp");
  assertNotNull(property);
  assertEquals("stringProp",property.getName());
  assertEquals("/foo/stringProp",property.getPath());
  Value value=property.getValue();
  assertNotNull(value);
  assertEquals(PropertyType.STRING,value.getType());
  assertEquals("stringVal",value.getString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRootChildByUUID() throws RepositoryException {
  Node node=getNode("/").addNode("boo");
  node.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String uuid=node.getUUID();
  assertNotNull(uuid);
  assertEquals(uuid,node.getIdentifier());
  Node nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
  Node childNode=node.addNode("boohoo");
  childNode.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(childNode.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String childUuid=childNode.getUUID();
  assertNotNull(childUuid);
  assertEquals(childUuid,childNode.getIdentifier());
  nAgain=childNode.getSession().getNodeByUUID(childUuid);
  assertTrue(nAgain.isSame(childNode));
  assertTrue(nAgain.isSame(childNode.getSession().getNodeByIdentifier(childUuid)));
  node.getSession().move("/boo","/boohoo");
  node=getNode("/boohoo");
  nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetItemReturnsNodeBeforeProperty() throws RepositoryException {
  String snnpSupported=getRepository().getDescriptor(OPTION_NODE_AND_PROPERTY_WITH_SAME_NAME_SUPPORTED);
  assumeTrue(Boolean.valueOf(snnpSupported));
  String newNodeName="getItemTest";
  String nodeAndPropertyName="subnode";
  Session session=getAdminSession();
  Node root=session.getRootNode();
  assertFalse(root.hasNode(newNodeName));
  Node newNode=root.addNode(newNodeName,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  newNode.setProperty(nodeAndPropertyName,"prop value");
  newNode.addNode(nodeAndPropertyName);
  session.save();
  Item item=session.getItem("/" + newNodeName + "/"+ nodeAndPropertyName);
  assertTrue("should retrieve Node before property",item.isNode());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getWeakReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  getNode(TEST_PATH).setProperty("weak-reference",session.getValueFactory().createValue(referee,true));
  session.save();
  PropertyIterator refs=referee.getWeakReferences();
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("weak-reference",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sessionIsolation() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getRootNode().addNode("node1");
    session2.getRootNode().addNode("node2");
    assertTrue(session1.getRootNode().hasNode("node1"));
    assertTrue(session2.getRootNode().hasNode("node2"));
    assertFalse(session1.getRootNode().hasNode("node2"));
    assertFalse(session2.getRootNode().hasNode("node1"));
    session1.save();
    session2.save();
    assertTrue(session1.getRootNode().hasNode("node1"));
    assertTrue(session1.getRootNode().hasNode("node2"));
    assertTrue(session2.getRootNode().hasNode("node1"));
    assertTrue(session2.getRootNode().hasNode("node2"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeDotDot() throws RepositoryException {
  Node node=getNode("/foo");
  Node root=node.getNode("..");
  assertNotNull(root);
  assertEquals("",root.getName());
  assertTrue(root.isSame(node.getParent()));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodes() throws RepositoryException {
  Node test=getNode(TEST_PATH);
  test.addNode("foo");
  test.addNode("bar");
  test.addNode("baz");
  getAdminSession().save();
  Set<String> nodeNames=new HashSet<String>(){
{
      add("bar");
      add("added");
      add("baz");
    }
  }
;
  test=getNode(TEST_PATH);
  test.addNode("added");
  test.getNode("foo").remove();
  test.getNode("bar").remove();
  test.addNode("bar");
  NodeIterator nodes=test.getNodes();
  assertEquals(3,nodes.getSize());
  while (nodes.hasNext()) {
    String name=nodes.nextNode().getName();
    assertTrue(nodeNames.remove(name));
  }
  assertTrue(nodeNames.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddNodeWithExpandedName() throws RepositoryException {
  Session session=getAdminSession();
  session.getWorkspace().getNamespaceRegistry().registerNamespace("foo","http://foo");
  Node node=getNode(TEST_PATH);
  Node added=node.addNode("{http://foo}new");
  assertEquals("foo:new",added.getName());
  session.save();
  added=session.getNode(TEST_PATH + "/{http://foo}new");
  assertEquals("foo:new",added.getName());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPropertyFromNode() throws RepositoryException {
  Node node=getNode("/foo");
  Property property=node.getProperty("stringProp");
  assertNotNull(property);
  assertEquals("stringProp",property.getName());
  assertEquals("/foo/stringProp",property.getPath());
  Value value=property.getValue();
  assertNotNull(value);
  assertEquals(PropertyType.STRING,value.getType());
  assertEquals("stringVal",value.getString());
  Property propertyAgain=getProperty("/foo/stringProp");
  assertTrue(property.isSame(propertyAgain));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void loginWithCredentialsAttribute() throws RepositoryException {
  SimpleCredentials sc=getAdminCredentials();
  sc.setAttribute("attr","val");
  Session session=null;
  try {
    session=getRepository().login(sc,null);
    String[] attributeNames=session.getAttributeNames();
    assertEquals(1,attributeNames.length);
    assertEquals("attr",attributeNames[0]);
    assertEquals("val",session.getAttribute("attr"));
  }
  finally {
    if (session != null) {
      session.logout();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void transientChanges() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Node node=parentNode.addNode("test");
  assertFalse(node.hasProperty("p"));
  node.setProperty("p","pv");
  assertTrue(node.hasProperty("p"));
  assertFalse(node.hasNode("n"));
  node.addNode("n");
  assertTrue(node.hasNode("n"));
  assertTrue(node.hasProperties());
  assertTrue(node.hasNodes());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sessionRefreshFalse() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    Node foo=session1.getNode("/foo");
    foo.addNode("added");
    session2.getNode("/foo").addNode("bar");
    session2.save();
    session1.refresh(false);
    assertFalse(foo.hasNode("added"));
    assertTrue(foo.hasNode("bar"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setStringProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"string",getAdminSession().getValueFactory().createValue("string \" value"));
  Property property=parentNode.getProperty("string");
  property.setValue("new value");
  assertTrue(parentNode.isModified());
  assertTrue(property.isModified());
  assertFalse(property.isNew());
  property.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property2=session2.getProperty(TEST_PATH + "/string");
    assertEquals("new value",property2.getString());
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setPropertyWithConversion() throws RepositoryException {
  Node n=getNode(TEST_PATH);
  Node file=n.addNode("file","nt:file");
  Node content=file.addNode("jcr:content","nt:resource");
  long value=System.currentTimeMillis();
  Property property=content.setProperty("jcr:lastModified",value);
  assertEquals(value,property.getDate().getTimeInMillis());
  content.setProperty("jcr:data",new ByteArrayInputStream("foo".getBytes()));
  content.setProperty("jcr:mimeType","text/plain");
  n.getSession().save();
}

</code></pre>

<br>
<pre class="type-6 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReferenceBinary() throws RepositoryException {
  ValueFactory valueFactory=getAdminSession().getValueFactory();
  Binary binary=valueFactory.createBinary(new RandomInputStream(1,256 * 1024));
  String reference=binary instanceof ReferenceBinary ? ((ReferenceBinary)binary).getReference() : null;
  assumeTrue(reference != null);
  Session session=createAdminSession();
  try {
    valueFactory=session.getValueFactory();
    assertEquals(binary,valueFactory.createValue(new SimpleReferenceBinary(reference)).getBinary());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveConflict() throws RepositoryException {
  getAdminSession().getRootNode().addNode("node");
  getAdminSession().save();
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getNode("/node").remove();
    session2.getNode("/node").addNode("2");
    assertFalse(session1.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().getNode("node").hasNode("2"));
    session1.save();
    assertFalse(session1.getRootNode().hasNode("node"));
    assertFalse(session2.getRootNode().hasNode("node"));
    try {
      session2.save();
      fail("Expected InvalidItemStateException");
    }
 catch (    InvalidItemStateException expected) {
    }
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedPath() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("/nt:foo/jcr:bar",PropertyType.PATH);
  values[1]=getAdminSession().getValueFactory().createValue("/",PropertyType.PATH);
  parentNode.setProperty("multi path",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi path");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.PATH,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void workspaceMove() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  node.addNode("source").addNode("node");
  node.addNode("target");
  session.save();
  session.getWorkspace().move(TEST_PATH + "/source/node",TEST_PATH + "/target/moved");
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRoot() throws RepositoryException {
  Node root=getAdminSession().getRootNode();
  assertNotNull(root);
  assertEquals("",root.getName());
  assertEquals("/",root.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setPropertyAgain() throws RepositoryException {
  Session session=getAdminSession();
  Property p1=session.getProperty("/foo/stringProp");
  Property p2=p1.getParent().setProperty("stringProp","newValue");
  Property p3=session.getProperty("/foo/stringProp");
  assertEquals("newValue",p1.getString());
  assertEquals("newValue",p2.getString());
  assertEquals("newValue",p3.getString());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test SNS 1-based indexed path.
 * JCR 2.0, Chapter 22.2:
 * <em>
 * A name in a content repository path that does not explicitly specify an index implies an index of 1.
 * For example, /a/b/c is equivalent to /a[1]/b[1]/c[1].
 * </em>
 * @throws RepositoryException
 */
@Test public void getNodeSNS() throws RepositoryException {
  Node node=getNode("/foo[1]");
  assertNotNull(node);
  assertEquals("foo",node.getName());
  assertEquals("/foo",node.getPath());
  node.addNode("bar");
  Node bar=getNode("/foo[1]/bar[1]");
  assertEquals("/foo/bar",bar.getPath());
  try {
    getNode("/foo[1]/bar[2]");
    fail("retrieving wrong SNS index should throw PathNotFoundException");
  }
 catch (  PathNotFoundException e) {
  }
  try {
    getProperty("/foo[1]/bar[2]/jcr:primaryType");
    fail("retrieving wrong SNS index should throw PathNotFoundException");
  }
 catch (  PathNotFoundException e) {
  }
  assertTrue(getAdminSession().nodeExists("/foo[1]/bar[1]"));
  assertTrue(node.hasNode("bar[1]"));
  assertTrue(node.hasProperty("bar[1]/jcr:primaryType"));
  assertTrue(getAdminSession().propertyExists("/foo[1]/bar[1]/jcr:primaryType"));
  assertFalse(getAdminSession().nodeExists("/foo[1]/bar[2]"));
  assertFalse(node.hasNode("bar[2]"));
  assertFalse(node.hasProperty("bar[2]/jcr:primaryType"));
  assertFalse(getAdminSession().propertyExists("/foo[1]/bar[2]/jcr:primaryType"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void loginWithAttribute() throws RepositoryException {
  Session session=((JackrabbitRepository)getRepository()).login(new GuestCredentials(),null,Collections.<String,Object>singletonMap(RepositoryImpl.REFRESH_INTERVAL,42));
  String[] attributeNames=session.getAttributeNames();
  assertEquals(1,attributeNames.length);
  assertEquals(RepositoryImpl.REFRESH_INTERVAL,attributeNames[0]);
  assertEquals(42L,session.getAttribute(RepositoryImpl.REFRESH_INTERVAL));
  session.logout();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nodeTypeRegistry() throws RepositoryException {
  NodeTypeManager ntMgr=getAdminSession().getWorkspace().getNodeTypeManager();
  assertFalse(ntMgr.hasNodeType("foo"));
  NodeTypeTemplate ntd=ntMgr.createNodeTypeTemplate();
  ntd.setName("foo");
  ntMgr.registerNodeType(ntd,false);
  assertTrue(ntMgr.hasNodeType("foo"));
  ntMgr.unregisterNodeType("foo");
  assertFalse(ntMgr.hasNodeType("foo"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void importUUIDCreateNew() throws Exception {
  Session session=getAdminSession();
  Node node=session.getRootNode().addNode("node");
  node.addMixin("mix:referenceable");
  session.save();
  String uuid=node.getIdentifier();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  session.exportSystemView("/node",out,true,false);
  node.remove();
  session.save();
  session.importXML("/",new ByteArrayInputStream(out.toByteArray()),IMPORT_UUID_CREATE_NEW);
  session.save();
  node=session.getNode("/node");
  assertFalse(uuid.equals(node.getIdentifier()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedReference() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Node referee=getAdminSession().getNode("/foo");
  referee.addMixin("mix:referenceable");
  getAdminSession().save();
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(referee);
  values[1]=getAdminSession().getValueFactory().createValue(referee);
  parentNode.setProperty("multi reference",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi reference");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.REFERENCE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedWeakReference() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Node referee=getAdminSession().getNode("/foo");
  referee.addMixin("mix:referenceable");
  getAdminSession().save();
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(referee,true);
  values[1]=getAdminSession().getValueFactory().createValue(referee,true);
  parentNode.setProperty("multi weak reference",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi weak reference");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.WEAKREFERENCE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionSave() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getNode("/").addNode("node1");
    session1.getNode("/node1").addNode("node2");
    session1.getNode("/").addNode("node1/node3");
    Node node1=session1.getNode("/node1");
    assertEquals("/node1",node1.getPath());
    Node node2=session1.getNode("/node1/node2");
    assertEquals("/node1/node2",node2.getPath());
    Node node3=session1.getNode("/node1/node3");
    assertEquals("/node1/node3",node3.getPath());
    node3.setProperty("property1","value1");
    Item property1=session1.getProperty("/node1/node3/property1");
    assertFalse(property1.isNode());
    assertEquals("value1",((Property)property1).getString());
    assertFalse(session2.itemExists("/node1"));
    assertFalse(session2.itemExists("/node1/node2"));
    assertFalse(session2.itemExists("/node1/node3"));
    assertFalse(session2.itemExists("/node1/node3/property1"));
    session1.save();
    assertTrue(session2.itemExists("/node1"));
    assertTrue(session2.itemExists("/node1/node2"));
    assertTrue(session2.itemExists("/node1/node3"));
    assertTrue(session2.itemExists("/node1/node3/property1"));
    session2.refresh(false);
    assertTrue(session2.itemExists("/node1"));
    assertTrue(session2.itemExists("/node1/node2"));
    assertTrue(session2.itemExists("/node1/node3"));
    assertTrue(session2.itemExists("/node1/node3/property1"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDate() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  Calendar calendar=Calendar.getInstance();
  values[0]=getAdminSession().getValueFactory().createValue(calendar);
  calendar.add(Calendar.DAY_OF_MONTH,1);
  values[1]=getAdminSession().getValueFactory().createValue(calendar);
  parentNode.setProperty("multi date",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi date");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DATE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.SameNamePropertyNodeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSessionGetNode() throws Exception {
  Node nn=superuser.getNode(n.getPath());
  assertTrue(n.isSame(nn));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetNode() throws Exception {
  assertTrue(n.isSame(testRootNode.getNode(sameName)));
  assertFalse(n.isSame(p));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsSame() throws Exception {
  assertFalse(n.isSame(p));
  assertFalse(p.isSame(n));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetProperty() throws Exception {
  assertTrue(p.isSame(testRootNode.getProperty(sameName)));
  assertFalse(p.isSame(n));
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetItem() throws Exception {
  Item item=superuser.getItem(n.getPath());
  if (item.isNode()) {
    assertTrue(n.isSame(item));
  }
 else {
    assertTrue(p.isSame(item));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSessionGetProperty() throws Exception {
  Property pp=superuser.getProperty(p.getPath());
  assertTrue(p.isSame(pp));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.SameNameSiblingTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void modifySiblings() throws RepositoryException {
  for (  String name : SIBLINGS) {
    Node sib=sns.getNode(name);
    sib.addNode("node");
    sib.setProperty("prop",42);
  }
  session.save();
  for (  String name : asList(SIBLING,SIBLINGS)) {
    Node sib=sns.getNode(name);
    assertTrue(sib.hasNode("node"));
    assertEquals(42L,sib.getProperty("prop").getLong());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveSiblings() throws RepositoryException {
  Node target=session.getRootNode().addNode("target");
  session.save();
  for (  String name : SIBLINGS) {
    session.move(sns.getPath() + '/' + name,target.getPath() + '/' + rename(name));
  }
  session.save();
  for (  String name : SIBLINGS) {
    assertFalse(sns.hasNode(name));
    assertTrue(target.hasNode(rename(name)));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void iterateSiblings() throws RepositoryException {
  Set<String> expected=newHashSet(SIBLINGS);
  expected.add(SIBLING);
  expected.remove(SIBLINGS[0]);
  NodeIterator siblings=sns.getNodes();
  while (siblings.hasNext()) {
    Node sib=siblings.nextNode();
    assertTrue("Unexpected node: " + sib.getPath(),expected.remove(sib.getName()));
  }
  assertTrue("Missing nodes: " + expected,expected.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void renameSiblings() throws RepositoryException {
  for (  String name : SIBLINGS) {
    JackrabbitNode sib=(JackrabbitNode)sns.getNode(name);
    sib.rename(rename(name));
  }
  session.save();
  for (  String name : SIBLINGS) {
    assertFalse(sns.hasNode(name));
    assertTrue(sns.hasNode(rename(name)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.cluster.ManyChildrenTest </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void manyChildrenWithoutIndex() throws Exception {
  if (session == null) {
    return;
  }
  Node index=session.getRootNode().getNode("oak:index");
  if (index.hasNode("nodetype")) {
    index.getNode("nodetype").remove();
    session.save();
  }
  long start=System.currentTimeMillis(), last=start;
  int count=10;
  Profiler prof=null;
  String nodeType=NodeTypeConstants.NT_OAK_UNSTRUCTURED;
  if (session.getRootNode().hasNode("many")) {
    session.getRootNode().getNode("many").remove();
    session.save();
  }
  Node many=session.getRootNode().addNode("many",nodeType);
  for (int i=0; i < count; i++) {
    Node n=many.addNode("test" + i,nodeType);
    n.setProperty("prop",i);
    if (i % 100 == 0) {
      session.save();
    }
    long now=System.currentTimeMillis();
    if (now - last > 5000) {
      int opsPerSecond=(int)(i * 1000 / (now - start));
      System.out.println(i + " ops; " + opsPerSecond+ " op/s");
      last=now;
      if (prof != null) {
        System.out.println(prof.getTop(5));
      }
      if (opsPerSecond < 1000 && i % 100 == 0) {
        prof=new Profiler();
        prof.startCollecting();
      }
    }
  }
  start=System.currentTimeMillis();
  last=start;
  for (int i=0; i < count; i++) {
    Node n=many.getNode("test" + i);
    long x=n.getProperty("prop").getValue().getLong();
    assertEquals(i,x);
    long now=System.currentTimeMillis();
    if (now - last > 5000) {
      int opsPerSecond=(int)(i * 1000 / (now - start));
      System.out.println(i + " read ops; " + opsPerSecond+ " op/s");
      last=now;
      if (prof != null) {
        System.out.println(prof.getTop(5));
      }
      if (opsPerSecond < 1000 && i % 100 == 0) {
        prof=new Profiler();
        prof.startCollecting();
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.observation.ObservationRefreshTest </h4><pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void observation() throws RepositoryException, InterruptedException, ExecutionException {
  final MyListener listener=new MyListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getAdminSession().getNode(TEST_PATH);
    for (int i=0; i < 1000; i++) {
      n.addNode("n" + i);
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numAdded == 1000;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("added nodes",1000,listener.numAdded);
    for (int i=0; i < 1000; i++) {
      n.getNode("n" + i).remove();
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numRemoved == 1000;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("removed nodes",1000,listener.numRemoved);
    for (int i=0; i < 100; i++) {
      n.setProperty("test" + i,"foo");
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsAdded == 1100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties added",1100,listener.numPropsAdded);
    for (int i=0; i < 100; i++) {
      n.setProperty("test" + i,i);
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsModified == 100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties modified",100,listener.numPropsModified);
    for (int i=0; i < 10; i++) {
      n.setProperty("test100","foo");
      n.getSession().save();
      assertTrue("Gave up waiting for events",listener.waitFor(CONDITION_TIMEOUT,new Condition(){
        @Override public boolean evaluate(){
          return listener.test100Exists;
        }
      }
));
      n.getProperty("test100").remove();
      n.getSession().save();
      assertTrue("Gave up waiting for events",listener.waitFor(CONDITION_TIMEOUT,new Condition(){
        @Override public boolean evaluate(){
          return !listener.test100Exists;
        }
      }
));
    }
    assertEquals("",listener.error);
    for (int i=0; i < 100; i++) {
      n.getProperty("test" + i).remove();
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsRemoved == 1100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties removed",1100,listener.numPropsRemoved);
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.observation.ObservationTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeSubtree() throws RepositoryException, ExecutionException, InterruptedException {
  Node n=getNode(TEST_PATH);
  n.addNode("a").addNode("b").addNode("c");
  getAdminSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  listener.expectRemove(n.getNode("a")).remove();
  getAdminSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void observation() throws RepositoryException, ExecutionException, InterruptedException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getNode(TEST_PATH);
    listener.expectAdd(n.setProperty("p0","v0"));
    Node n1=listener.expectAdd(n.addNode("n1"));
    listener.expectAdd(n1.setProperty("p1","v1"));
    listener.expectAdd(n1.setProperty("p2","v2"));
    listener.expectAdd(n.addNode("n2"));
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    listener.expectAdd(n.setProperty("property",42));
    Node n3=listener.expectAdd(n.addNode("n3"));
    listener.expectAdd(n3.setProperty("p3","v3"));
    listener.expectChange(n1.setProperty("p1","v1.1"));
    listener.expectRemove(n1.getProperty("p2")).remove();
    listener.expectRemove(n.getNode("n2")).remove();
    listener.expectAdd(n.addNode("{4}"));
    getAdminSession().save();
    missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void typeFilter() throws RepositoryException, InterruptedException, ExecutionException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,new String[]{TEST_TYPE},false);
  try {
    Node n=getNode(TEST_PATH);
    Property p=n.setProperty("p","v");
    listener.expectAdd(p);
    Node n1=n.addNode("n1");
    listener.expect(n1.getPath(),NODE_ADDED);
    n1.addNode("n2");
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    listener.expectChange(p).setValue("v2");
    getAdminSession().save();
    missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    listener.expectRemove(p).remove();
    getAdminSession().save();
    missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void pathFilterWithTrailingSlash() throws Exception {
  final String path="/events/only/here";
  ExpectationListener listener=new ExpectationListener();
  listener.expect(new Expectation(path){
    @Override public boolean onEvent(    Event event) throws Exception {
      return PathUtils.isAncestor(path,event.getPath());
    }
  }
);
  observationManager.addEventListener(listener,NODE_ADDED,path + '/',true,null,null,false);
  try {
    Node root=getNode("/");
    root.addNode("events").addNode("only").addNode("here").addNode("at");
    root.getSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addSubtreeFilter() throws RepositoryException, ExecutionException, InterruptedException {
  assumeTrue(observationManager instanceof ObservationManagerImpl);
  ObservationManagerImpl oManager=(ObservationManagerImpl)observationManager;
  ExpectationListener listener=new ExpectationListener();
  FilterBuilder builder=new FilterBuilder();
  builder.condition(builder.addSubtree());
  oManager.addEventListener(listener,builder.build());
  Node testNode=getNode(TEST_PATH);
  Node a=listener.expectAdd(testNode.addNode("a"));
  a.addNode("c");
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeSubtreeFilter() throws RepositoryException, ExecutionException, InterruptedException {
  assumeTrue(observationManager instanceof ObservationManagerImpl);
  Node testNode=getNode(TEST_PATH);
  testNode.addNode("a").addNode("c");
  testNode.getSession().save();
  ObservationManagerImpl oManager=(ObservationManagerImpl)observationManager;
  ExpectationListener listener=new ExpectationListener();
  FilterBuilder builder=new FilterBuilder();
  builder.condition(builder.deleteSubtree());
  oManager.addEventListener(listener,builder.build());
  listener.expectRemove(testNode.getNode("a")).remove();
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyValues() throws RepositoryException, ExecutionException, InterruptedException {
  Node n=getNode(TEST_PATH);
  n.setProperty("toChange",new String[]{"one","two"},PropertyType.STRING);
  n.setProperty("toDelete",new String[]{"three","four"},PropertyType.STRING);
  getAdminSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    n.setProperty("added",new String[]{"five","six"},PropertyType.STRING);
    listener.expectValues(null,n.getProperty("added").getValues());
    Value[] before=n.getProperty("toChange").getValues();
    n.getProperty("toChange").setValue(new String[]{"1","2"});
    listener.expectValues(before,n.getProperty("toChange").getValues());
    before=n.getProperty("toDelete").getValues();
    n.getProperty("toDelete").remove();
    listener.expectValues(before,null);
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMove() throws RepositoryException, ExecutionException, InterruptedException {
  Node testNode=getNode(TEST_PATH);
  Session session=testNode.getSession();
  Node nodeA=testNode.addNode("a");
  Node nodeAA=nodeA.addNode("aa");
  Node nodeT=testNode.addNode("t");
  Node nodeS=testNode.addNode("s");
  session.save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,NODE_MOVED,"/",true,null,null,false);
  String src1=nodeA.getPath();
  String dst1=nodeT.getPath() + "/b";
  session.move(src1,dst1);
  listener.expectMove(src1,dst1);
  String src2=nodeT.getPath() + "/b/aa";
  String dst2=nodeS.getPath() + "/bb";
  session.move(src2,dst2);
  listener.expectMove(src1 + "/aa",dst2);
  session.save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRename() throws RepositoryException, ExecutionException, InterruptedException {
  Node testNode=getNode(TEST_PATH);
  Session session=testNode.getSession();
  Node nodeA=testNode.addNode("a");
  String parentPath=testNode.getPath();
  session.save();
  assumeTrue(nodeA instanceof JackrabbitNode);
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,NODE_MOVED,"/",true,null,null,false);
  ((JackrabbitNode)nodeA).rename("b");
  listener.expectMove(parentPath + "/a",parentPath + "/b");
  session.save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void identifier() throws RepositoryException, InterruptedException, ExecutionException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,NODE_ADDED,TEST_PATH,true,null,null,false);
  try {
    Node n=getNode(TEST_PATH);
    listener.expect(new Expectation("Has correct id"){
      @Override public boolean onEvent(      Event event) throws Exception {
        return (TEST_PATH + "/newNode").equals(event.getIdentifier());
      }
    }
);
    n.addNode("newNode");
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addSubtree() throws RepositoryException, ExecutionException, InterruptedException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  Node n=getNode(TEST_PATH);
  Node a=listener.expectAdd(n.addNode("a"));
  Node b=listener.expectAdd(a.addNode("b"));
  listener.expectAdd(b.addNode("c"));
  getAdminSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void infoMap() throws RepositoryException, ExecutionException, InterruptedException {
  Node n=getNode(TEST_PATH);
  Node n3=n.addNode("n3");
  n3.setProperty("p1","q1");
  n3.setProperty("p2","q2");
  getAdminSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    n.addNode("n1","oak:Unstructured");
    n.addNode("n2");
    n.getNode("n2").addMixin(TEST_TYPE);
    n3.setProperty("p1","changed");
    n3.setProperty("p2",(String)null);
    listener.expect(new Expectation("infoMap for n1"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == NODE_ADDED && event.getPath().endsWith("n1")) {
          Map<?,?> info=event.getInfo();
          return info != null && "oak:Unstructured".equals(info.get(JCR_PRIMARYTYPE));
        }
 else {
          return false;
        }
      }
    }
);
    listener.expect(new Expectation("infoMap for n1/jcr:primaryType"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == PROPERTY_ADDED && event.getPath().endsWith("n1/jcr:primaryType")) {
          Map<?,?> info=event.getInfo();
          return info != null && "oak:Unstructured".equals(info.get(JCR_PRIMARYTYPE));
        }
 else {
          return false;
        }
      }
    }
);
    listener.expect(new Expectation("infoMap for n2"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == NODE_ADDED && event.getPath().endsWith("n2")) {
          Map<?,?> info=event.getInfo();
          if (info == null) {
            return false;
          }
          Object mixinTypes=info.get(JCR_MIXINTYPES);
          if (!(mixinTypes instanceof String[])) {
            return false;
          }
          Object primaryType=info.get(JCR_PRIMARYTYPE);
          String[] mixins=(String[])mixinTypes;
          return NT_UNSTRUCTURED.equals(primaryType) && mixins.length == 1 && TEST_TYPE.equals(mixins[0]);
        }
 else {
          return false;
        }
      }
    }
);
    listener.expect(new Expectation("n2/jcr:primaryType"){
      @Override public boolean onEvent(      Event event) throws Exception {
        return event.getType() == PROPERTY_ADDED && event.getPath().endsWith("n2/jcr:primaryType");
      }
    }
);
    listener.expect(new Expectation("n2/jcr:mixinTypes"){
      @Override public boolean onEvent(      Event event) throws Exception {
        return event.getType() == PROPERTY_ADDED && event.getPath().endsWith("n2/jcr:mixinTypes");
      }
    }
);
    listener.expect(new Expectation("infoMap for n3/p1"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == PROPERTY_CHANGED && event.getPath().endsWith("n3/p1")) {
          Map<?,?> info=event.getInfo();
          return info != null && NT_UNSTRUCTURED.equals(info.get(JCR_PRIMARYTYPE));
        }
 else {
          return false;
        }
      }
    }
);
    listener.expect(new Expectation("infoMap for n3/p2"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == PROPERTY_REMOVED && event.getPath().endsWith("n3/p2")) {
          Map<?,?> info=event.getInfo();
          return info != null && NT_UNSTRUCTURED.equals(info.get(JCR_PRIMARYTYPE));
        }
 else {
          return false;
        }
      }
    }
);
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReorder() throws RepositoryException, InterruptedException, ExecutionException {
  Node testNode=getNode(TEST_PATH);
  Node nodeA=testNode.addNode("a","nt:unstructured");
  Node nodeB=testNode.addNode("b","nt:unstructured");
  testNode.getSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,NODE_MOVED,"/",true,null,null,false);
  listener.expect(new Expectation("orderBefore"){
    @Override public boolean onEvent(    Event event) throws Exception {
      if (event.getType() != NODE_MOVED || event.getInfo() == null) {
        return false;
      }
      Map<?,?> info=event.getInfo();
      if (PathUtils.concat(TEST_PATH,"a").equals(event.getPath())) {
        return "a".equals(info.get("srcChildRelPath")) && "b".equals(info.get("destChildRelPath"));
      }
 else       if (PathUtils.concat(TEST_PATH,"b").equals(event.getPath())) {
        return "b".equals(info.get("srcChildRelPath")) && "a".equals(info.get("destChildRelPath"));
      }
 else {
        return false;
      }
    }
  }
);
  testNode.orderBefore(nodeA.getName(),null);
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void pathExclude() throws ExecutionException, InterruptedException, RepositoryException {
  assumeTrue(observationManager instanceof JackrabbitObservationManager);
  JackrabbitObservationManager oManager=(JackrabbitObservationManager)observationManager;
  ExpectationListener listener=new ExpectationListener();
  JackrabbitEventFilter filter=new JackrabbitEventFilter().setAbsPath(TEST_PATH).setIsDeep(true).setExcludedPaths(TEST_PATH + "/c",TEST_PATH + "/d","/x/y").setEventTypes(ALL_EVENTS);
  oManager.addEventListener(listener,filter);
  Node n=getNode(TEST_PATH);
  listener.expectAdd(listener.expectAdd(listener.expectAdd(n.addNode("a")).addNode("a1")).setProperty("p","q"));
  listener.expectAdd(listener.expectAdd(n.addNode("b")).setProperty("p","q"));
  n.addNode("c").addNode("c1").setProperty("p","q");
  n.addNode("d").setProperty("p","q");
  getAdminSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void observation2() throws RepositoryException, InterruptedException, ExecutionException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getNode(TEST_PATH);
    listener.expectAdd(n.addNode("n1"));
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    listener.expectAdd(n.addNode("n2"));
    listener.expectRemove(n.getNode("n1")).remove();
    getAdminSession().save();
    missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void observationDispose() throws RepositoryException, InterruptedException, ExecutionException, TimeoutException {
  final ExpectationListener listener=new ExpectationListener();
  Expectation hasEvents=listener.expect(new Expectation("has events after registering"));
  final Expectation noEvents=listener.expect(new Expectation("has no more events after unregistering",false));
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  final Session s=getAdminSession();
  ScheduledExecutorService service=newSingleThreadScheduledExecutor();
  service.scheduleWithFixedDelay(new Runnable(){
    private int c;
    @Override public void run(){
      try {
        s.getNode(TEST_PATH).addNode("c" + c++).getSession().save();
      }
 catch (      RepositoryException e) {
        throw new RuntimeException(e);
      }
    }
  }
,10,10,TimeUnit.MILLISECONDS);
  assertNotNull(hasEvents.get(TIME_OUT,TimeUnit.SECONDS));
  Executors.newSingleThreadExecutor().submit(new Callable<Void>(){
    @Override public Void call() throws Exception {
      observationManager.removeEventListener(listener);
      noEvents.enable(true);
      return null;
    }
  }
).get(10,TimeUnit.SECONDS);
  assertFalse(noEvents.wait(4,TimeUnit.SECONDS));
  service.shutdown();
  service.awaitTermination(10,TimeUnit.SECONDS);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void observationOnRootNode() throws Exception {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,PROPERTY_ADDED,"/",true,null,null,false);
  try {
    Node root=getNode("/");
    listener.expectAdd(root.setProperty("prop","value"));
    root.getSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyValue() throws RepositoryException, ExecutionException, InterruptedException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getNode(TEST_PATH);
    n.setProperty("added",42);
    listener.expectValue(null,n.getProperty("added").getValue());
    Value before=n.getProperty("test_property1").getValue();
    n.getProperty("test_property1").setValue(43);
    listener.expectValue(before,n.getProperty("test_property1").getValue());
    before=n.getProperty("test_property2").getValue();
    n.getProperty("test_property2").remove();
    listener.expectValue(before,null);
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void observationDisposeFromListener() throws RepositoryException, InterruptedException, ExecutionException, TimeoutException {
  final ExpectationListener listener=new ExpectationListener();
  Expectation unregistered=listener.expect(new Expectation("Unregistering listener from event handler should not block"){
    @Override public boolean onEvent(    Event event) throws Exception {
      observationManager.removeEventListener(listener);
      return true;
    }
  }
);
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  assertTrue(observationManager.getRegisteredEventListeners().hasNext());
  Node n=getNode(TEST_PATH);
  n.addNode("c");
  n.getSession().save();
  assertNotNull(unregistered.get(TIME_OUT,TimeUnit.SECONDS));
  assertFalse(observationManager.getRegisteredEventListeners().hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.osgi.RepositoryManagerTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void executorSetup() throws Exception {
  context.registerService(SecurityProvider.class,new OpenSecurityProvider());
  context.registerService(NodeStore.class,new MemoryNodeStore());
  context.registerInjectActivateService(new RepositoryManager());
  Executor executor=context.getService(Executor.class);
  assertNotNull("Repository initialization should have registered an Executor",executor);
  final AtomicBoolean invoked=new AtomicBoolean();
  final CountDownLatch latch=new CountDownLatch(1);
  executor.execute(new Runnable(){
    @Override public void run(){
      invoked.set(true);
      latch.countDown();
    }
  }
);
  latch.await(5,TimeUnit.SECONDS);
  assertTrue(invoked.get());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void repositoryShutdown() throws Exception {
  context.registerService(SecurityProvider.class,new OpenSecurityProvider());
  context.registerService(NodeStore.class,new MemoryNodeStore());
  RepositoryManager mgr=context.registerInjectActivateService(new RepositoryManager());
  assertNotNull("MBean should be registered",context.getService(RepositoryManagementMBean.class));
  mgr.deactivate();
  assertNull("MBean should have been removed upon repository shutdown",context.getService(RepositoryManagementMBean.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.PrefetchIteratorTest </h4><pre class="type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test(){
  for (  int size : seq(0,100)) {
    for (    int readBefore : seq(0,30)) {
      final long testTimeout=size % 3 == 0 ? 100 : 0;
      Iterable<Integer> s=seq(0,size);
      PrefetchIterator<Integer> it=new PrefetchIterator<Integer>(s.iterator(),new PrefetchOptions(){
{
          min=20;
          timeout=testTimeout;
          max=30;
          size=-1;
        }
      }
);
      for (      int x : seq(0,readBefore)) {
        boolean hasNext=it.hasNext();
        if (!hasNext) {
          assertEquals(x,size);
          break;
        }
        String m="s:" + size + " b:"+ readBefore+ " x:"+ x;
        assertTrue(m,hasNext);
        assertEquals(m,x,it.next().intValue());
      }
      String m="s:" + size + " b:"+ readBefore;
      int max=testTimeout <= 0 ? 20 : 30;
      if (size > max && readBefore <= size) {
        assertEquals(m,-1,it.size());
        assertEquals(m,-1,it.size());
      }
 else {
        assertEquals(m,size,it.size());
        assertEquals(m,size,it.size());
      }
      for (      int x : seq(readBefore,size)) {
        m="s:" + size + " b:"+ readBefore+ " x:"+ x;
        assertTrue(m,it.hasNext());
        assertEquals(m,x,it.next().intValue());
      }
      assertFalse(it.hasNext());
      try {
        it.next();
        fail();
      }
 catch (      NoSuchElementException e) {
      }
      try {
        it.remove();
        fail();
      }
 catch (      UnsupportedOperationException e) {
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryFulltextTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fulltextOrWithinText() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n1=testRootNode.addNode("node1");
  n1.setProperty("text","hello");
  Node n2=testRootNode.addNode("node2");
  n2.setProperty("text","hallo");
  Node n3=testRootNode.addNode("node3");
  n3.setProperty("text","hello hallo");
  session.save();
  String sql2="select [jcr:path] as [path] from [nt:base] " + "where contains([text], 'hello OR hallo') order by [jcr:path]";
  Query q;
  q=qm.createQuery("explain " + sql2,Query.JCR_SQL2);
  assertEquals("[nt:base] as [nt:base] /* traverse \"*\" " + "where contains([nt:base].[text], 'hello OR hallo') */",getResult(q.execute(),"plan"));
  q=qm.createQuery(sql2,Query.JCR_SQL2);
  assertEquals("/testroot/node1, /testroot/node2, /testroot/node3",getResult(q.execute(),"path"));
  sql2="select [jcr:path] as [path] from [nt:base] " + "where contains([text], 'hello or hallo') order by [jcr:path]";
  q=qm.createQuery(sql2,Query.JCR_SQL2);
  assertEquals("",getResult(q.execute(),"path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void excerpt() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n1=testRootNode.addNode("node1");
  n1.setProperty("text","hello world");
  n1.setProperty("desc","description");
  Node n2=testRootNode.addNode("node2");
  n2.setProperty("text","Hello World");
  n2.setProperty("desc","Description");
  session.save();
  Query q;
  RowIterator it;
  Row row;
  String s;
  String xpath="//*[jcr:contains(., 'hello')]/rep:excerpt(.) order by @jcr:path";
  q=qm.createQuery(xpath,"xpath");
  it=q.execute().getRows();
  row=it.nextRow();
  String path=row.getPath();
  s=row.getValue("rep:excerpt(.)").getString();
  assertTrue(path + ":" + s+ " (1)",s.indexOf("<strong>hello</strong> world") >= 0);
  assertTrue(path + ":" + s+ " (2)",s.indexOf("description") >= 0);
  row=it.nextRow();
  path=row.getPath();
  s=row.getValue("rep:excerpt(.)").getString();
  assertTrue(path + ":" + s+ " (3)",s.indexOf("Hello World") >= 0);
  assertTrue(path + ":" + s+ " (4)",s.indexOf("Description") >= 0);
  xpath="//*[jcr:contains(., 'hello')]/rep:excerpt(.) order by @jcr:path";
  q=qm.createQuery(xpath,"xpath");
  it=q.execute().getRows();
  row=it.nextRow();
  path=row.getPath();
  s=row.getValue("rep:excerpt(text)").getString();
  assertTrue(path + ":" + s+ " (5)",s.indexOf("<strong>hello</strong> world") >= 0);
  assertTrue(path + ":" + s+ " (6)",s.indexOf("description") < 0);
  row=it.nextRow();
  path=row.getPath();
  s=row.getValue("rep:excerpt(text)").getString();
  assertTrue(path + ":" + s+ " (7)",s.indexOf("Hello World") >= 0);
  assertTrue(path + ":" + s+ " (8)",s.indexOf("Description") < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryPlanTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void uuidIndex() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n=testRootNode.addNode("node");
  n.addMixin("mix:referenceable");
  session.save();
  String xpath="/jcr:root/testroot/node[@jcr:uuid]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* traverse \"/testroot/node\" where " + "([a].[jcr:uuid] is not null) " + "and (issamenode([a], [/testroot/node])) */",plan);
  q=qm.createQuery(xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getPath();
  assertEquals("/testroot/node",path);
  assertFalse(it.hasNext());
  xpath="/jcr:root/testroot/*[@jcr:uuid]";
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property uuid IS NOT NULL " + "where ([a].[jcr:uuid] is not null) " + "and (ischildnode([a], [/testroot])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-1372") public void pathAndPropertyRestrictions() throws Exception {
  ;
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node b=testRootNode.addNode("b");
  Node c=b.addNode("c");
  Node d=c.addNode("d");
  Node e1=d.addNode("e1");
  e1.setProperty("type","1");
  Node e2=d.addNode("e2");
  e2.setProperty("type","2");
  Node e3=d.addNode("e3");
  e3.setProperty("type","3");
  session.save();
  String xpath="/jcr:root/testroot//b/c/d/*[@jcr:uuid='1' or @jcr:uuid='2'] ";
  String sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as a inner join [nt:base] as b on ischildnode(b, a) " + "inner join [nt:base] as c on ischildnode(c, b) "+ "inner join [nt:base] as d on ischildnode(d, c) "+ "where name(a) = 'b' "+ "and isdescendantnode(a, '/testroot') "+ "and name(b) = 'c' "+ "and name(c) = 'd' "+ "and (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as d " + "where (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as d " + "inner join [nt:base] as c on ischildnode(d, c) "+ "inner join [nt:base] as b on ischildnode(c, b) "+ "inner join [nt:base] as a on ischildnode(b, a) "+ "where name(a) = 'b' "+ "and isdescendantnode(a, '/testroot') "+ "and name(b) = 'c' "+ "and name(c) = 'd' "+ "and (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("",plan);
  q=qm.createQuery(xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/b/c/d/e1",path);
  path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/b/c/d/e2",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyEqualsVersusPropertyNotNull() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  createPropertyIndex(session,"notNull");
  createPropertyIndex(session,"equals");
  for (int i=0; i < 100; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    if (i % 2 == 0) {
      n.setProperty("notNull",i);
    }
    n.setProperty("equals",1);
  }
  session.save();
  String xpath="/jcr:root//*[@notNull and @equals=1]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property notNull IS NOT NULL " + "where ([a].[notNull] is not null) " + "and ([a].[equals] = 1) "+ "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void correctPropertyIndexUsage() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  createPropertyIndex(session,"fiftyPercent");
  createPropertyIndex(session,"tenPercent");
  createPropertyIndex(session,"hundredPercent");
  for (int i=0; i < 300; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    if (i % 10 == 0) {
      n.setProperty("tenPercent",i);
    }
    if (i % 2 == 0) {
      n.setProperty("fiftyPercent",i);
    }
    n.setProperty("hundredPercent",i);
  }
  session.save();
  String xpath="/jcr:root//*[@tenPercent and @fiftyPercent and @hundredPercent]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property tenPercent IS NOT NULL " + "where ([a].[tenPercent] is not null) " + "and ([a].[fiftyPercent] is not null) "+ "and ([a].[hundredPercent] is not null) "+ "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeType() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node nodetype=session.getRootNode().getNode("oak:index").getNode("nodetype");
  nodetype.setProperty("entryCount",100000);
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n1=testRootNode.addNode("node1");
  Node n2=n1.addNode("node2");
  n2.addNode("node3");
  session.save();
  String sql2="select [jcr:path] as [path] from [nt:base] " + "where [node2/node3/jcr:primaryType] is not null " + "and isdescendantnode('/testroot')";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [nt:base] /* traverse \"/testroot//*\" " + "where ([nt:base].[node2/node3/jcr:primaryType] is not null) " + "and (isdescendantnode([nt:base], [/testroot])) "+ "*/",plan);
  q=qm.createQuery(sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/node1",path);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void traversalVersusPropertyIndex() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n=testRootNode;
  for (int i=0; i < 20; i++) {
    n.setProperty("depth",i + 2);
    n=n.addNode("n","oak:Unstructured");
    n.addMixin("mix:referenceable");
  }
  session.save();
  String xpath="/jcr:root/testroot/n/n/n/n/n/n/n//*[jcr:uuid]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property uuid IS NOT NULL " + "where ([a].[jcr:uuid] is not null) and " + "(isdescendantnode([a], [/testroot/n/n/n/n/n/n/n])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyIndexVersusNodeTypeIndex() throws Exception {
  Session session=getAdminSession();
  Node nt=session.getRootNode().getNode("oak:index").getNode("nodetype");
  nt.setProperty("entryCount",200);
  Node uuid=session.getRootNode().getNode("oak:index").getNode("uuid");
  uuid.setProperty("entryCount",100);
  QueryManager qm=session.getWorkspace().getQueryManager();
  if (session.getRootNode().hasNode("testroot")) {
    session.getRootNode().getNode("testroot").remove();
    session.save();
  }
  Node testRootNode=session.getRootNode().addNode("testroot");
  for (int i=0; i < 100; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    n.addMixin("mix:referenceable");
  }
  session.save();
  Query q;
  QueryResult result;
  RowIterator it;
  String xpath="/jcr:root//element(*, oak:Unstructured)";
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[oak:Unstructured] as [a] " + "/* nodeType Filter(query=explain select [jcr:path], [jcr:score], * " + "from [oak:Unstructured] as a "+ "where isdescendantnode(a, '/') "+ "/* xpath: /jcr:root//element(*, oak:Unstructured) */"+ ", path=//*) where isdescendantnode([a], [/]) */",plan);
  String xpath2="/jcr:root//element(*, oak:Unstructured)[@jcr:uuid]";
  q=qm.createQuery("explain " + xpath2 + "","xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  plan=it.nextRow().getValue("plan").getString();
  assertEquals("[oak:Unstructured] as [a] " + "/* property uuid IS NOT NULL where ([a].[jcr:uuid] is not null) " + "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void twoSelectors() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node test=root.addNode("test");
  test.addNode("testNode","oak:Unstructured");
  session.save();
  assertEquals("/test/testNode",getNodeList(session,"select b.[jcr:path] as [jcr:path], b.[jcr:score] as [jcr:score], b.* " + "from [nt:base] as a " + "inner join [nt:base] as b "+ "on ischildnode(b, a) "+ "where issamenode(a, '/test')",Query.JCR_SQL2));
  assertEquals("/test/testNode",getNodeList(session,"select b.[jcr:path] as [jcr:path], b.[jcr:score] as [jcr:score], b.* " + "from [nt:base] as b " + "inner join [nt:base] as a "+ "on ischildnode(b, a) "+ "where issamenode(b, '/test/testNode')",Query.JCR_SQL2));
  assertEquals("/test",getNodeList(session,"select a.[jcr:path] as [jcr:path], a.[jcr:score] as [jcr:score], a.* " + "from [nt:base] as a " + "inner join [nt:base] as b "+ "on ischildnode(b, a) "+ "where issamenode(a, '/test')",Query.JCR_SQL2));
  assertEquals("/test",getNodeList(session,"select a.[jcr:path] as [jcr:path], a.[jcr:score] as [jcr:score], a.* " + "from [nt:base] as b " + "inner join [nt:base] as a "+ "on ischildnode(b, a) "+ "where issamenode(b, '/test/testNode')",Query.JCR_SQL2));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOak1354() throws Exception {
  Session session=createAdminSession();
  NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
  if (!manager.hasNodeType("mymixinOak1354")) {
    StringBuilder defs=new StringBuilder();
    defs.append("[mymixinOak1354]\n");
    defs.append("  mixin");
    Reader cndReader=new InputStreamReader(new ByteArrayInputStream(defs.toString().getBytes()));
    CndImporter.registerNodeTypes(cndReader,session);
  }
  Node p=session.getRootNode().addNode("one");
  p.addMixin("mymixinOak1354");
  session.save();
  Query q=session.getWorkspace().getQueryManager().createQuery("SELECT * FROM [mymixinOak1354]",Query.JCR_SQL2);
  QueryResult qr=q.execute();
  NodeIterator ni=qr.getNodes();
  assertTrue(ni.hasNext());
  Node n=ni.nextNode();
  assertEquals("/one",n.getPath());
  assertFalse(ni.hasNext());
  session.logout();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void unicode() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  String[][] list={{"three","\u00e4\u00f6\u00fc"},{"two","123456789"},{"one","\u3360\u3361\u3362\u3363\u3364\u3365\u3366\u3367\u3368\u3369"}};
  for (  String[] pair : list) {
    content.addNode(pair[0]).setProperty("prop","propValue testSearch " + pair[1] + " data");
  }
  session.save();
  for (  String[] pair : list) {
    String query="//*[jcr:contains(., '" + pair[1] + "')]";
    QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
    NodeIterator it=r.getNodes();
    assertTrue(it.hasNext());
    String path=it.nextNode().getPath();
    assertEquals("/test/" + pair[0],path);
    assertFalse(it.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void skip() throws RepositoryException {
  Session session=getAdminSession();
  Node hello1=session.getRootNode().addNode("hello1");
  hello1.setProperty("id","1");
  hello1.setProperty("data","x");
  session.save();
  Node hello3=hello1.addNode("hello3");
  hello3.setProperty("id","3");
  hello3.setProperty("data","z");
  session.save();
  Node hello2=hello3.addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("data","y");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select id from [nt:base] where data >= $data order by id",Query.JCR_SQL2);
  q.bindValue("data",vf.createValue("x"));
  for (int i=-1; i < 5; i++) {
    QueryResult r=q.execute();
    RowIterator it=r.getRows();
    assertEquals(3,r.getRows().getSize());
    assertEquals(3,r.getNodes().getSize());
    Row row;
    try {
      it.skip(i);
      assertTrue(i >= 0 && i <= 3);
    }
 catch (    IllegalArgumentException e) {
      assertEquals(-1,i);
    }
catch (    NoSuchElementException e) {
      assertTrue(i >= 2);
    }
    if (i <= 0) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("1",row.getValue("id").getString());
    }
    if (i <= 1) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("2",row.getValue("id").getString());
    }
    if (i <= 2) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("3",row.getValue("id").getString());
    }
    assertFalse(it.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void propertyIndexWithDeclaringNodeTypeAndRelativQuery() throws RepositoryException {
  Session session=getAdminSession();
  RowIterator rit;
  QueryResult r;
  String query;
  query="//element(*, rep:Authorizable)[@rep:principalName = 'admin']";
  r=session.getWorkspace().getQueryManager().createQuery("explain " + query,"xpath").execute();
  rit=r.getRows();
  assertEquals("[rep:Authorizable] as [a] /* property principalName = admin " + "where [a].[rep:principalName] = 'admin' */",rit.nextRow().getValue("plan").getString());
  query="//element(*, rep:Authorizable)[admin/@rep:principalName = 'admin']";
  r=session.getWorkspace().getQueryManager().createQuery("explain " + query,"xpath").execute();
  rit=r.getRows();
  assertEquals("[rep:Authorizable] as [a] /* nodeType " + "Filter(query=explain select [jcr:path], [jcr:score], * " + "from [rep:Authorizable] as a "+ "where [admin/rep:principalName] = 'admin' "+ "/* xpath: //element(*, rep:Authorizable)["+ "admin/@rep:principalName = 'admin'] */, path=*, "+ "property=[admin/rep:principalName=[admin]]) "+ "where [a].[admin/rep:principalName] = 'admin' */",rit.nextRow().getValue("plan").getString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noDeclaringNodeTypesIndex() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node nodeTypeIndex=root.getNode("oak:index").getNode("nodetype");
  nodeTypeIndex.setProperty("declaringNodeTypes",new String[]{},PropertyType.NAME);
  session.save();
  Node test=root.addNode("test");
  test.addNode("testNode","oak:Unstructured");
  session.save();
  String query="/jcr:root/test//*[@jcr:primaryType='oak:Unstructured']";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  assertEquals("/test/testNode",it.nextNode().getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void typeConversion() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node test=root.addNode("test");
  test.addNode("a","oak:Unstructured").setProperty("time","2001-01-01T00:00:00.000Z",PropertyType.DATE);
  test.addNode("b","oak:Unstructured").setProperty("time","2010-01-01T00:00:00.000Z",PropertyType.DATE);
  test.addNode("c","oak:Unstructured").setProperty("time","2020-01-01T00:00:00.000Z",PropertyType.DATE);
  session.save();
  assertEquals("/test/c",getNodeList(session,"select [jcr:path] " + "from [nt:base] " + "where [time] > '2011-01-01T00:00:00.000z'",Query.JCR_SQL2));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void relativeNotExistsProperty() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  content.addNode("one").addNode("child").setProperty("prop","hello");
  content.addNode("two").addNode("child");
  session.save();
  String query="//*[not(child/@prop)]";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  String path=it.nextNode().getPath();
  assertEquals("/test/two",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void join() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node a=root.addNode("a");
  a.addMixin("mix:referenceable");
  Node b=root.addNode("b");
  b.setProperty("join",a.getProperty("jcr:uuid").getString(),PropertyType.REFERENCE);
  session.save();
  assertEquals("/a",getNodeList(session,"select [a].* from [nt:unstructured] as [a] " + "inner join [nt:unstructured] as [b] " + "on [a].[jcr:uuid] = [b].[join] where issamenode([a], '/a')",Query.JCR_SQL2));
  assertEquals("/a",getNodeList(session,"select [a].* from [nt:unstructured] as [a] " + "inner join [nt:unstructured] as [b] " + "on [b].[join] = [a].[jcr:uuid] where issamenode([a], '/a')",Query.JCR_SQL2));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nodeType() throws Exception {
  Session session=createAdminSession();
  String xpath="/jcr:root//element(*,rep:User)[xyz/@jcr:primaryType]";
  assertTrue(getPlan(session,xpath).startsWith("[rep:User] as [a] /* nodeType"));
  session.getNode("/oak:index/nodetype").setProperty("declaringNodeTypes",new String[]{"oak:Unstructured"},PropertyType.NAME);
  session.save();
  assertTrue(getPlan(session,xpath).startsWith("[rep:User] as [a] /* traverse "));
  xpath="/jcr:root//element(*,oak:Unstructured)[xyz/@jcr:primaryType]";
  assertTrue(getPlan(session,xpath).startsWith("[oak:Unstructured] as [a] /* nodeType "));
  session.logout();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOak1128() throws RepositoryException {
  Session session=createAdminSession();
  Node p=session.getRootNode().addNode("etc");
  p.addNode("p1");
  Node r=p.addNode("p2").addNode("r","nt:unstructured");
  r.setProperty("nt:resourceType","test");
  session.save();
  Query q=session.getWorkspace().getQueryManager().createQuery("/jcr:root/etc//*[" + "(@jcr:primaryType = 'nt:file'  or @jcr:primaryType = 'nt:folder') " + "or @nt:resourceType = 'test']","xpath");
  QueryResult qr=q.execute();
  NodeIterator ni=qr.getNodes();
  Node n=ni.nextNode();
  assertEquals("/etc/p2/r",n.getPath());
  session.logout();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOak1171() throws RepositoryException {
  Session session=createAdminSession();
  Node p=session.getRootNode().addNode("etc");
  p.addNode("p1").setProperty("title","test");
  p.addNode("p2").setProperty("title",1);
  session.save();
  Query q=session.getWorkspace().getQueryManager().createQuery("//*[@title = 'test']","xpath");
  QueryResult qr=q.execute();
  NodeIterator ni=qr.getNodes();
  assertTrue(ni.hasNext());
  Node n=ni.nextNode();
  assertEquals("/etc/p1",n.getPath());
  assertFalse(ni.hasNext());
  session.logout();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void xpathEscapeTest() throws RepositoryException {
  Session writer=createAdminSession();
  Session reader=createAdminSession();
  UserManager uMgr=((JackrabbitSession)writer).getUserManager();
  String uid="testUser";
  try {
    User user=uMgr.createUser("testUser","pw");
    writer.getNode(user.getPath()).addNode(".tokens","rep:Unstructured");
    writer.save();
    QueryManager qm=reader.getWorkspace().getQueryManager();
    Query q=qm.createQuery("/jcr:root//*[_x002e_tokens/@jcr:primaryType]",Query.XPATH);
    NodeIterator res=q.execute().getNodes();
    assertEquals(1,res.getSize());
  }
  finally {
    Authorizable a=uMgr.getAuthorizable(uid);
    if (a != null) {
      a.remove();
      writer.save();
    }
    if (reader != null) {
      reader.logout();
    }
    if (writer != null) {
      writer.logout();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-1215") public void anyChildNodeProperty() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  content.addNode("one").addNode("child").setProperty("prop","hello");
  content.addNode("two").addNode("child").setProperty("prop","hi");
  session.save();
  String query="//*[*/@prop = 'hello']";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  String path=it.nextNode().getPath();
  assertEquals("/test/one",path);
  assertFalse(it.hasNext());
  query="//*[*/*/@prop = 'hello']";
  r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  it=r.getNodes();
  assertTrue(it.hasNext());
  path=it.nextNode().getPath();
  assertEquals("/test",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void encodedPath() throws RepositoryException {
  Session session=getAdminSession();
  session.getRootNode().addNode("hello").addNode("world");
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q;
  q=qm.createQuery("/jcr:root/hel_x006c_o/*",Query.XPATH);
  assertEquals("/hello/world",getPaths(q));
  q=qm.createQuery("//hel_x006c_o",Query.XPATH);
  assertEquals("/hello",getPaths(q));
  q=qm.createQuery("//element(hel_x006c_o, nt:base)",Query.XPATH);
  assertEquals("/hello",getPaths(q));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void simple() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("id","1");
  hello.setProperty("text","hello_world");
  session.save();
  Node hello2=session.getRootNode().addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("text","hello world");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select text from [nt:base] where id = $id",Query.JCR_SQL2);
  q.bindValue("id",vf.createValue("1"));
  QueryResult r=q.execute();
  RowIterator it=r.getRows();
  assertTrue(it.hasNext());
  Row row=it.nextRow();
  assertEquals("hello_world",row.getValue("text").getString());
  String[] columns=r.getColumnNames();
  assertEquals(1,columns.length);
  assertEquals("text",columns[0]);
  assertFalse(it.hasNext());
  r=q.execute();
  NodeIterator nodeIt=r.getNodes();
  assertTrue(nodeIt.hasNext());
  Node n=nodeIt.nextNode();
  assertEquals("hello_world",n.getProperty("text").getString());
  assertFalse(it.hasNext());
  q=qm.createQuery("select text from [nt:base] where text like 'hello\\_world' escape '\\'",Query.SQL);
  r=q.execute();
  columns=r.getColumnNames();
  assertEquals(3,columns.length);
  assertEquals("text",columns[0]);
  assertEquals("jcr:path",columns[1]);
  assertEquals("jcr:score",columns[2]);
  nodeIt=r.getNodes();
  assertTrue(nodeIt.hasNext());
  n=nodeIt.nextNode();
  assertEquals("hello_world",n.getProperty("text").getString());
  assertFalse(nodeIt.hasNext());
  q=qm.createQuery("//*[@id=1]",Query.XPATH);
  r=q.execute();
  assertEquals(newHashSet("jcr:path","jcr:score","jcr:primaryType"),newHashSet(r.getColumnNames()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-1093
 */
@Test public void getValuesOnMvp() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("id","1");
  hello.setProperty("properties",new String[]{"p1","p2"});
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select properties from [nt:base] where id = 1",Query.JCR_SQL2);
  QueryResult r=q.execute();
  RowIterator it=r.getRows();
  assertTrue(it.hasNext());
  Row row=it.nextRow();
  assertEquals("p1 p2",row.getValues()[0].getString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void approxCount() throws Exception {
  Session session=createAdminSession();
  double c=getCost(session,"//*[@x=1]");
  assertTrue("cost: " + c,c > 0 && c < 100000);
  session.getNode("/oak:index/counter").remove();
  session.save();
  double c2=getCost(session,"//*[@x=1]");
  assertTrue("cost: " + c2,c2 > 1000000);
  session.logout();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void date() throws Exception {
  Session session=getAdminSession();
  Node t1=session.getRootNode().addNode("t1");
  t1.setProperty("x","22.06.07");
  Node t2=session.getRootNode().addNode("t2");
  t2.setProperty("x","2007-06-22T01:02:03.000Z",PropertyType.DATE);
  session.save();
  String query="//*[x='a' or x='b']";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void limit() throws RepositoryException {
  Session session=getAdminSession();
  Node hello1=session.getRootNode().addNode("hello1");
  hello1.setProperty("id","1");
  hello1.setProperty("data","x");
  session.save();
  Node hello3=session.getRootNode().addNode("hello3");
  hello3.setProperty("id","3");
  hello3.setProperty("data","z");
  session.save();
  Node hello2=session.getRootNode().addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("data","y");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select id from [nt:base] where data >= $data order by id",Query.JCR_SQL2);
  q.bindValue("data",vf.createValue("x"));
  for (int limit=0; limit < 5; limit++) {
    q.setLimit(limit);
    for (int offset=0; offset < 3; offset++) {
      q.setOffset(offset);
      QueryResult r=q.execute();
      RowIterator it=r.getRows();
      int l=Math.min(Math.max(0,3 - offset),limit);
      assertEquals(l,r.getRows().getSize());
      assertEquals(l,r.getNodes().getSize());
      Row row;
      for (int x=offset + 1, i=0; i < limit && x < 4; i++, x++) {
        assertTrue(it.hasNext());
        row=it.nextRow();
        assertEquals("" + x,row.getValue("id").getString());
      }
      assertFalse(it.hasNext());
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void doubleQuote() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("x",1);
  Node world=hello.addNode("world");
  world.setProperty("x",2);
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q;
  q=qm.createQuery("SELECT * FROM [nt:base] AS s WHERE ISDESCENDANTNODE(s,[/hello])",Query.JCR_SQL2);
  assertEquals("/hello/world",getPaths(q));
  q=qm.createQuery("SELECT * FROM [nt:base] AS s WHERE ISDESCENDANTNODE(s,\"/hello\")",Query.JCR_SQL2);
  assertEquals("/hello/world",getPaths(q));
  try {
    q=qm.createQuery("SELECT * FROM [nt:base] AS s WHERE ISDESCENDANTNODE(s,[\"/hello\"])",Query.JCR_SQL2);
    getPaths(q);
    fail();
  }
 catch (  InvalidQueryException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void fnNameEncoding() throws Exception {
  Session session=getAdminSession();
  session.getRootNode().addNode("123456_test_name");
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q;
  q=qm.createQuery("//*[jcr:like(fn:name(), '%123456%')]",Query.XPATH);
  assertEquals("/123456_test_name",getPaths(q));
  q=qm.createQuery("//*[fn:name() = '123456_test_name']",Query.XPATH);
  assertEquals("",getPaths(q));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOak1096() throws RepositoryException {
  Session writer=createAdminSession();
  Session reader=createAdminSession();
  try {
    Node rootNode=writer.getRootNode();
    Node node=rootNode.addNode("test","nt:unstructured");
    node.setProperty("text","find me");
    writer.save();
    QueryManager qm=reader.getWorkspace().getQueryManager();
    Query q=qm.createQuery("select * from 'nt:base' where contains(*, 'find me')",Query.JCR_SQL2);
    NodeIterator res=q.execute().getNodes();
    assertEquals("False amount of hits",1,res.getSize());
  }
  finally {
    if (reader != null) {
      reader.logout();
    }
    if (writer != null) {
      writer.logout();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void or() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("x",1);
  Node world=hello.addNode("world");
  world.setProperty("x",2);
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q;
  q=qm.createQuery("select a.[jcr:path] from [nt:base] as a " + "inner join [nt:base] as b " + "on ischildnode(a, b) "+ "where a.x = 1 or a.x = 2 or b.x = 3 or b.x = 4",Query.JCR_SQL2);
  assertEquals("/hello",getPaths(q));
  q=qm.createQuery("//hello[@x=1]/*[@x=2]",Query.XPATH);
  assertEquals("/hello/world",getPaths(q));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.qom.QomTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void and() throws RepositoryException {
  Constraint c0=f.propertyExistence("x","c0");
  Constraint c1=f.propertyExistence("x","c1");
  And and=f.and(c0,c1);
  assertEquals(and.getConstraint1(),c0);
  assertEquals(and.getConstraint2(),c1);
  assertEquals("([x].[c0] IS NOT NULL) AND ([x].[c1] IS NOT NULL)",and.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void not() throws RepositoryException {
  Constraint c=f.propertyExistence("x","c0");
  Not n=f.not(c);
  assertEquals(c,n.getConstraint());
  assertEquals("[x].[c0] IS NOT NULL",c.toString());
  assertEquals("* IS NOT NULL",f.propertyExistence(null,null).toString());
  assertEquals("[s].* IS NOT NULL",f.propertyExistence("s",null).toString());
  assertEquals("[p] IS NOT NULL",f.propertyExistence(null,"p").toString());
  assertEquals("[s].[p] IS NOT NULL",f.propertyExistence("s","p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void propertyExistence() throws RepositoryException {
  PropertyExistence pe=f.propertyExistence("selectorName","propertyName");
  assertEquals("selectorName",pe.getSelectorName());
  assertEquals("propertyName",pe.getPropertyName());
  assertEquals("[selectorName].[propertyName] IS NOT NULL",pe.toString());
  assertEquals("* IS NOT NULL",f.propertyExistence(null,null).toString());
  assertEquals("[s].* IS NOT NULL",f.propertyExistence("s",null).toString());
  assertEquals("[p] IS NOT NULL",f.propertyExistence(null,"p").toString());
  assertEquals("[s].[p] IS NOT NULL",f.propertyExistence("s","p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fullTextSearch() throws RepositoryException {
  Literal l=f.literal(vf.createValue(1));
  FullTextSearch x=f.fullTextSearch("selectorName","propertyName",l);
  assertEquals("selectorName",x.getSelectorName());
  assertEquals("propertyName",x.getPropertyName());
  assertEquals(l,x.getFullTextSearchExpression());
  assertEquals("CONTAINS([selectorName].[propertyName], 1)",x.toString());
  assertEquals("CONTAINS([p], null)",f.fullTextSearch(null,"p",null).toString());
  assertEquals("CONTAINS([s].[p], null)",f.fullTextSearch("s","p",null).toString());
  assertEquals("CONTAINS([s].*, null)",f.fullTextSearch("s",null,null).toString());
  assertEquals("CONTAINS(*, null)",f.fullTextSearch(null,null,null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void selector() throws RepositoryException {
  Selector s=f.selector("nodeTypeName","selectorName");
  assertEquals("nodeTypeName",s.getNodeTypeName());
  assertEquals("selectorName",s.getSelectorName());
  assertEquals("[nodeTypeName] AS [selectorName]",s.toString());
  assertEquals("[n]",f.selector("n",null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void descendantNode() throws RepositoryException {
  DescendantNode d=f.descendantNode("selectorName","path");
  assertEquals("selectorName",d.getSelectorName());
  assertEquals("path",d.getAncestorPath());
  assertEquals("ISDESCENDANTNODE([selectorName], [path])",d.toString());
  assertEquals("ISDESCENDANTNODE([p])",f.descendantNode(null,"p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void descendantNodeJoinCondition() throws RepositoryException {
  DescendantNodeJoinCondition d=f.descendantNodeJoinCondition("descendantSelectorName","ancestorSelectorName");
  assertEquals("descendantSelectorName",d.getDescendantSelectorName());
  assertEquals("ancestorSelectorName",d.getAncestorSelectorName());
  assertEquals("ISDESCENDANTNODE([descendantSelectorName], [ancestorSelectorName])",d.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void comparison() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Literal l=f.literal(vf.createValue(1));
  Comparison c=f.comparison(p,QueryObjectModelConstants.JCR_OPERATOR_EQUAL_TO,l);
  assertEquals(p,c.getOperand1());
  assertEquals(QueryObjectModelConstants.JCR_OPERATOR_EQUAL_TO,c.getOperator());
  assertEquals(l,c.getOperand2());
  assertEquals("[selectorName].[propertyName] = 1",c.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void length() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Length l=f.length(p);
  assertEquals(p,l.getPropertyValue());
  assertEquals("LENGTH([selectorName].[propertyName])",l.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeName() throws RepositoryException {
  NodeName n=f.nodeName("selectorName");
  assertEquals("selectorName",n.getSelectorName());
  assertEquals("NAME([selectorName])",n.toString());
  assertEquals("NAME()",f.nodeName(null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void upperCase() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Length length=f.length(p);
  UpperCase u=f.upperCase(length);
  assertEquals(length,u.getOperand());
  assertEquals("UPPER(LENGTH([selectorName].[propertyName]))",u.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void childNodeJoinCondition() throws RepositoryException {
  ChildNodeJoinCondition c=f.childNodeJoinCondition("childSelectorName","parentSelectorName");
  assertEquals("childSelectorName",c.getChildSelectorName());
  assertEquals("parentSelectorName",c.getParentSelectorName());
  assertEquals("ISCHILDNODE([childSelectorName], [parentSelectorName])",c.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void or() throws RepositoryException {
  Constraint c0=f.propertyExistence("x","c0");
  Constraint c1=f.propertyExistence("x","c1");
  Or or=f.or(c0,c1);
  assertEquals(or.getConstraint1(),c0);
  assertEquals(or.getConstraint2(),c1);
  assertEquals("([x].[c0] IS NOT NULL) OR ([x].[c1] IS NOT NULL)",or.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void literal() throws RepositoryException {
  Value v=vf.createValue(1);
  Literal l=f.literal(v);
  assertEquals(v,l.getLiteralValue());
  assertEquals("1",l.toString());
  assertEquals("'Joe''s'",f.literal(vf.createValue("Joe's")).toString());
  assertEquals("' - \" - '",f.literal(vf.createValue(" - \" - ")).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void childNode() throws RepositoryException {
  ChildNode cn=f.childNode("selectorName","parentPath");
  assertEquals("selectorName",cn.getSelectorName());
  assertEquals("parentPath",cn.getParentPath());
  assertEquals("ISCHILDNODE([selectorName], [parentPath])",cn.toString());
  assertEquals("ISCHILDNODE([p])",f.childNode(null,"p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void descending() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Ordering o=f.descending(p);
  assertEquals(p,o.getOperand());
  assertEquals(QueryObjectModelConstants.JCR_ORDER_DESCENDING,o.getOrder());
  assertEquals("[selectorName].[propertyName] DESC",o.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void join() throws RepositoryException {
  Source left=f.selector("nodeTypeName","selectorName");
  Source right=f.selector("nodeTypeName2","selectorName2");
  ChildNodeJoinCondition jc=f.childNodeJoinCondition("childSelectorName","parentSelectorName");
  Join j=f.join(left,right,QueryObjectModelConstants.JCR_JOIN_TYPE_INNER,jc);
  assertEquals(left,j.getLeft());
  assertEquals(right,j.getRight());
  assertEquals(QueryObjectModelConstants.JCR_JOIN_TYPE_INNER,j.getJoinType());
  assertEquals(jc,j.getJoinCondition());
  assertEquals("ISCHILDNODE([childSelectorName], [parentSelectorName])",jc.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeLocalName() throws RepositoryException {
  NodeLocalName n=f.nodeLocalName("selectorName");
  assertEquals("selectorName",n.getSelectorName());
  assertEquals("LOCALNAME([selectorName])",n.toString());
  assertEquals("LOCALNAME()",f.nodeLocalName(null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void bindVariable() throws RepositoryException {
  BindVariableValue b=f.bindVariable("bindVariableName");
  assertEquals("bindVariableName",b.getBindVariableName());
  assertEquals("$bindVariableName",b.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sameNodeJoinCondition() throws RepositoryException {
  SameNodeJoinCondition s=f.sameNodeJoinCondition("selector1Name","selector2Name","selector2Path");
  assertEquals("selector1Name",s.getSelector1Name());
  assertEquals("selector2Name",s.getSelector2Name());
  assertEquals("selector2Path",s.getSelector2Path());
  assertEquals("ISSAMENODE([selector1Name], [selector2Name], [selector2Path])",s.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createQuery() throws RepositoryException {
  Selector s=f.selector("nt:file","x");
  BindVariableValue b=f.bindVariable("var");
  Constraint c=f.propertyExistence("x","c");
  PropertyValue p=f.propertyValue("x","propertyName");
  c=f.and(f.comparison(p,QueryObjectModelConstants.JCR_OPERATOR_EQUAL_TO,b),c);
  Ordering o=f.ascending(p);
  Column col=f.column("x","propertyName","columnName");
  Ordering[] ords=new Ordering[]{o};
  Column[] cols=new Column[]{col};
  QueryObjectModel q=f.createQuery(s,c,ords,cols);
  assertEquals(Query.JCR_JQOM,q.getLanguage());
  String[] bv=q.getBindVariableNames();
  assertEquals(1,bv.length);
  assertEquals("var",bv[0]);
  assertEquals(s,q.getSource());
  assertEquals(c,q.getConstraint());
  assertEquals(o,q.getOrderings()[0]);
  assertEquals(col,q.getColumns()[0]);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sameNode() throws RepositoryException {
  SameNode s=f.sameNode("selectorName","path");
  assertEquals("selectorName",s.getSelectorName());
  assertEquals("path",s.getPath());
  assertEquals("ISSAMENODE([selectorName], [path])",s.toString());
  assertEquals("ISSAMENODE([path])",f.sameNode(null,"path").toString());
  assertEquals("ISSAMENODE([s], [path])",f.sameNode("s","path").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void lowerCase() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Length length=f.length(p);
  LowerCase l=f.lowerCase(length);
  assertEquals(length,l.getOperand());
  assertEquals("LOWER(LENGTH([selectorName].[propertyName]))",l.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void equiJoinCondition() throws RepositoryException {
  EquiJoinCondition e=f.equiJoinCondition("selector1Name","property1Name","selector2Name","property2Name");
  assertEquals("selector1Name",e.getSelector1Name());
  assertEquals("property1Name",e.getProperty1Name());
  assertEquals("selector2Name",e.getSelector2Name());
  assertEquals("property2Name",e.getProperty2Name());
  assertEquals("[selector1Name].[property1Name] = [selector2Name].[property2Name]",e.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void column() throws RepositoryException {
  Column c=f.column("selectorName","propertyName","columnName");
  assertEquals("selectorName",c.getSelectorName());
  assertEquals("propertyName",c.getPropertyName());
  assertEquals("columnName",c.getColumnName());
  assertEquals("[selectorName].[propertyName] AS [columnName]",c.toString());
  assertEquals("[p]",f.column(null,"p",null).toString());
  assertEquals("[p] AS [c]",f.column(null,"p","c").toString());
  assertEquals("[s].[p]",f.column("s","p",null).toString());
  assertEquals("[s].[p] AS [c]",f.column("s","p","c").toString());
  assertEquals("[s].* AS [c]",f.column("s",null,"c").toString());
  assertEquals("* AS [c]",f.column(null,null,"c").toString());
  assertEquals("*",f.column(null,null,null).toString());
  assertEquals("[s].*",f.column("s",null,null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ascending() throws RepositoryException {
  PropertyValue p=f.propertyValue("selectorName","propertyName");
  Ordering o=f.ascending(p);
  assertEquals(p,o.getOperand());
  assertEquals(QueryObjectModelConstants.JCR_ORDER_ASCENDING,o.getOrder());
  assertEquals("[selectorName].[propertyName]",p.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void escapedName() throws RepositoryException {
  assertEquals("[[n]]]",f.selector("[n]",null).toString());
  assertEquals("[[s]]].[[p]]]",f.propertyValue("[s]","[p]").toString());
  assertEquals("ISSAMENODE([[s1]]], [[s2]]], [[p]]])",f.sameNodeJoinCondition("[s1]","[s2]","[p]").toString());
  assertEquals("ISSAMENODE([[s]]], [[p]]])",f.sameNode("[s]","[p]").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fullTextSearchScore() throws RepositoryException {
  FullTextSearchScore x=f.fullTextSearchScore("selectorName");
  assertEquals("selectorName",x.getSelectorName());
  assertEquals("SCORE([selectorName])",x.toString());
  assertEquals("SCORE()",f.fullTextSearchScore(null).toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void propertyValue() throws RepositoryException {
  PropertyValue pv=f.propertyValue("selectorName","propertyName");
  assertEquals("selectorName",pv.getSelectorName());
  assertEquals("propertyName",pv.getPropertyName());
  assertEquals("[selectorName].[propertyName]",pv.toString());
  assertEquals("*",f.propertyValue(null,null).toString());
  assertEquals("[s].*",f.propertyValue("s",null).toString());
  assertEquals("[p]",f.propertyValue(null,"p").toString());
  assertEquals("[s].[p]",f.propertyValue("s","p").toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void jcrNameConversion() throws RepositoryException {
  assertEquals("[nt:base]",f.column(null,NodeType.NT_BASE,null).toString());
  assertEquals("[s1].[nt:base] = [s2].[nt:base]",f.equiJoinCondition("s1",NodeType.NT_BASE,"s2",NodeType.NT_BASE).toString());
  assertEquals("CONTAINS([nt:base], null)",f.fullTextSearch(null,NodeType.NT_BASE,null).toString());
  assertEquals("CAST('nt:base' AS NAME)",f.literal(vf.createValue(NodeType.NT_BASE,PropertyType.NAME)).toString());
  assertEquals("[nt:base] IS NOT NULL",f.propertyExistence(null,NodeType.NT_BASE).toString());
  assertEquals("[nt:base]",f.propertyValue(null,NodeType.NT_BASE).toString());
  assertEquals("[nt:base]",f.selector(NodeType.NT_BASE,null).toString());
  Source source1=f.selector(NodeType.NT_BASE,"selector");
  Column[] columns=new Column[]{f.column("selector",null,null)};
  Constraint constraint2=f.childNode("selector","/");
  QueryObjectModel qom=f.createQuery(source1,constraint2,null,columns);
  assertEquals("select [selector].* from " + "[nt:base] AS [selector] " + "where ISCHILDNODE([selector], [/])",qom.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.AccessControlManagementTest </h4><pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlModificationWithoutPrivilege() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_MODIFY_PROPERTIES});
  JackrabbitAccessControlList tmpl=allow(path,privileges);
  String policyPath=tmpl.getPath() + "/rep:policy";
  assertTrue(superuser.itemExists(policyPath));
  try {
    testAcMgr.setPolicy(tmpl.getPath(),tmpl);
    fail("test user must not have MODIFY_AC privilege.");
  }
 catch (  AccessDeniedException e) {
  }
  try {
    testAcMgr.removePolicy(tmpl.getPath(),tmpl);
    fail("test user must not have MODIFY_AC privilege.");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveMixin() throws Exception {
  Node n=superuser.getNode(path);
  deny(path,readPrivileges);
  assertTrue(n.hasNode("rep:policy"));
  assertTrue(n.isNodeType("rep:AccessControllable"));
  n.removeMixin("rep:AccessControllable");
  superuser.save();
  assertFalse(n.hasNode("rep:policy"));
  assertFalse(n.isNodeType("rep:AccessControllable"));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetrievePrivilegesOnAcNodes() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL);
  allow(path,privileges);
  assertTrue(testAcMgr.hasPrivileges(path,privileges));
  AccessControlPolicy[] policies=testAcMgr.getPolicies(path);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof JackrabbitAccessControlList);
  String aclNodePath=null;
  Node n=superuser.getNode(path);
  for (NodeIterator itr=n.getNodes(); itr.hasNext(); ) {
    Node child=itr.nextNode();
    if (child.isNodeType("rep:Policy")) {
      aclNodePath=child.getPath();
    }
  }
  if (aclNodePath == null) {
    fail("Expected node at " + path + " to have an ACL child node.");
  }
  assertTrue(testAcMgr.hasPrivileges(aclNodePath,privileges));
  assertTrue(testSession.hasPermission(aclNodePath,Session.ACTION_READ));
  for (NodeIterator aceNodes=superuser.getNode(aclNodePath).getNodes(); aceNodes.hasNext(); ) {
    String aceNodePath=aceNodes.nextNode().getPath();
    assertTrue(testAcMgr.hasPrivileges(aceNodePath,privileges));
    assertTrue(testSession.hasPermission(aceNodePath,Session.ACTION_READ));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadAccessControlWithoutPrivilege() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ);
  JackrabbitAccessControlList tmpl=allow(path,privileges);
  String policyPath=tmpl.getPath() + "/rep:policy";
  assertTrue(superuser.itemExists(policyPath));
  assertFalse(testAcMgr.hasPrivileges(path,privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL)));
  assertFalse(testSession.itemExists(policyPath));
  assertFalse(testSession.nodeExists(policyPath));
  try {
    testSession.getNode(policyPath);
    fail("Accessing the rep:policy node must throw PathNotFoundException.");
  }
 catch (  PathNotFoundException e) {
  }
  try {
    testAcMgr.getPolicies(tmpl.getPath());
    fail("test user must not have READ_AC privilege.");
  }
 catch (  AccessDeniedException e) {
  }
  try {
    testAcMgr.getEffectivePolicies(tmpl.getPath());
    fail("test user must not have READ_AC privilege.");
  }
 catch (  AccessDeniedException e) {
  }
  for (NodeIterator aceNodes=superuser.getNode(policyPath).getNodes(); aceNodes.hasNext(); ) {
    Node aceNode=aceNodes.nextNode();
    String aceNodePath=aceNode.getPath();
    assertFalse(testSession.nodeExists(aceNodePath));
    for (PropertyIterator it=aceNode.getProperties(); it.hasNext(); ) {
      assertFalse(testSession.propertyExists(it.nextProperty().getPath()));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.CopyTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyInvisibleSubTree() throws Exception {
  deny(childNPath,privilegesFromName(Privilege.JCR_READ));
  allow(targetPath,privilegesFromName(Privilege.JCR_ALL));
  assertFalse(testSession.nodeExists(childNPath));
  testSession.getWorkspace().copy(path,destPath);
  Node copiedNode=testSession.getNode(destPath);
  String childName=Text.getName(childNPath);
  assertFalse(copiedNode.hasNode(childName));
  assertTrue(copiedNode.hasNode(Text.getName(childNPath2)));
  superuser.refresh(false);
  assertFalse(superuser.nodeExists(destPath + '/' + childName));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyInvisibleProperty() throws Exception {
  deny(childNPath,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  allow(targetPath,privilegesFromName(Privilege.JCR_ALL));
  testSession.getWorkspace().copy(path,destPath);
  Node copiedNode=testSession.getNode(destPath);
  String childName=Text.getName(childNPath);
  assertTrue(copiedNode.hasNode(childName));
  assertFalse(copiedNode.hasProperty(childName + '/' + propertyName1));
  superuser.refresh(false);
  assertFalse(superuser.nodeExists(destPath + '/' + childName+ '/'+ propertyName1));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2810">OAK-2810</a>
 */
@Test public void testCopyToProtectedParentDestination() throws Exception {
  allow(targetPath,privilegesFromName(Privilege.JCR_ALL));
  Node destParent=null;
  NodeIterator nodeIterator=superuser.getNode(targetPath).getNode(AccessControlConstants.REP_POLICY).getNodes();
  while (nodeIterator.hasNext()) {
    Node n=nodeIterator.nextNode();
    if (n.getDefinition().isProtected()) {
      destParent=n;
      break;
    }
  }
  if (destParent == null) {
    throw new NotExecutableException("No protected parent found");
  }
  try {
    superuser.getWorkspace().copy(childNPath,destParent.getPath() + "/copy");
    fail("Copy must fail with constraint-violation if the destination parent is a protected node.");
  }
 catch (  ConstraintViolationException e) {
    assertEquals("Node " + destParent.getPath() + " is protected.",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyInvisibleAcContent() throws Exception {
  deny(childNPath,privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL));
  allow(targetPath,privilegesFromName(PrivilegeConstants.JCR_ALL));
  testSession.getWorkspace().copy(path,destPath);
  Node copiedNode=testSession.getNode(destPath);
  String childName=Text.getName(childNPath);
  assertTrue(copiedNode.hasNode(childName));
  Node child=copiedNode.getNode(childName);
  assertFalse(child.hasNode(AccessControlConstants.REP_POLICY));
  superuser.refresh(false);
  assertFalse(superuser.nodeExists(targetPath + '/' + childName+ "/rep:policy"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ImportBesteffortTest </h4><pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUnknownPrincipal() throws Exception {
  runImport();
  AccessControlManager acMgr=adminSession.getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(target.getPath());
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof JackrabbitAccessControlList);
  AccessControlEntry[] entries=((JackrabbitAccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,entries.length);
  AccessControlEntry entry=entries[0];
  assertEquals("unknownprincipal",entry.getPrincipal().getName());
  assertEquals(1,entry.getPrivileges().length);
  assertEquals(acMgr.privilegeFromName(Privilege.JCR_WRITE),entry.getPrivileges()[0]);
  if (entry instanceof JackrabbitAccessControlEntry) {
    assertTrue(((JackrabbitAccessControlEntry)entry).isAllow());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ImportIgnoreTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testImportUnknownPrincipal() throws Exception {
  try {
    runImport();
    AccessControlManager acMgr=adminSession.getAccessControlManager();
    AccessControlPolicy[] policies=acMgr.getPolicies(target.getPath());
    assertEquals(1,policies.length);
    assertEquals(0,((AccessControlList)policies[0]).getAccessControlEntries().length);
  }
  finally {
    adminSession.refresh(false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.InheritanceTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritance() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_REMOVE_NODE,Privilege.JCR_MODIFY_PROPERTIES});
  allow(path,privileges);
  privileges=privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_CHILD_NODES});
  allow(childNPath,privileges);
  Privilege[] expectedPrivileges=privilegesFromNames(new String[]{Privilege.JCR_READ,Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_REMOVE_NODE,Privilege.JCR_MODIFY_PROPERTIES});
  assertTrue(testAcMgr.hasPrivileges(childNPath,expectedPrivileges));
  String aActions=javax.jcr.Session.ACTION_SET_PROPERTY + ',' + javax.jcr.Session.ACTION_READ;
  assertTrue(testSession.hasPermission(childNPath,aActions));
  String dActions=javax.jcr.Session.ACTION_REMOVE + ',' + javax.jcr.Session.ACTION_ADD_NODE;
  assertFalse(testSession.hasPermission(childNPath,dActions));
  String nonExistingItemPath=childNPath + "/anyItem";
  assertTrue(testSession.hasPermission(nonExistingItemPath,aActions + ',' + dActions));
  Node childN=testSession.getNode(childNPath);
  String testPath=childN.addNode(nodeName2).getPath();
  assertTrue(testAcMgr.hasPrivileges(testPath,expectedPrivileges));
  testSession.save();
  assertTrue(testAcMgr.hasPrivileges(testPath,expectedPrivileges));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritance2() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_WRITE});
  allow(path,privileges);
  deny(childNPath,privileges);
  assertFalse(testAcMgr.hasPrivileges(childNPath,privileges));
  String actions=getActions(Session.ACTION_SET_PROPERTY,Session.ACTION_REMOVE,Session.ACTION_ADD_NODE);
  String nonExistingItemPath=childNPath + "/anyItem";
  assertFalse(testSession.hasPermission(nonExistingItemPath,actions));
  Node grandChild=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  testSession.refresh(false);
  String gcPath=grandChild.getPath();
  allow(gcPath,privileges);
  assertTrue(testAcMgr.hasPrivileges(gcPath,privileges));
  assertTrue(testSession.hasPermission(gcPath + "/anyProp",Session.ACTION_SET_PROPERTY));
  assertFalse(testSession.hasPermission(gcPath,Session.ACTION_REMOVE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ItemModifiedTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testModified3() throws Exception {
  Node child=superuser.getNode(path).addNode("child",JcrConstants.NT_UNSTRUCTURED);
  child.addNode("a");
  child.addNode("b");
  superuser.save();
  Node n=testSession.getNode(child.getPath());
  assertFalse(n.isModified());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.JackrabbitAccessControlListTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetRestrictionType() throws RepositoryException {
  String[] names=acl.getRestrictionNames();
  for (  String name : names) {
    int type=acl.getRestrictionType(name);
    assertTrue(type > PropertyType.UNDEFINED);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-1026">OAK-1026</a>
 */
@Test public void testEntryWithAggregatePrivileges() throws Exception {
  Privilege write=acMgr.privilegeFromName(Privilege.JCR_WRITE);
  acl.addEntry(testPrincipal,write.getAggregatePrivileges(),true);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(1,entries.length);
  assertArrayEquals(new Privilege[]{write},entries[0].getPrivileges());
  acMgr.setPolicy(acl.getPath(),acl);
  AccessControlPolicy policy=AccessControlUtils.getAccessControlList(acMgr,acl.getPath());
  assertNotNull(policy);
  entries=acl.getAccessControlEntries();
  assertEquals(1,entries.length);
  assertArrayEquals(new Privilege[]{write},entries[0].getPrivileges());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSize() throws RepositoryException {
  if (acl.addAccessControlEntry(testPrincipal,testPrivileges)) {
    assertTrue(acl.size() > 0);
  }
 else {
    assertEquals(0,acl.size());
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsEmpty() throws RepositoryException {
  if (acl.addAccessControlEntry(testPrincipal,testPrivileges)) {
    assertFalse(acl.isEmpty());
  }
 else {
    assertTrue(acl.isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApplicablePolicyIsEmpty(){
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveEntry() throws NotExecutableException, RepositoryException {
  Principal princ=getValidPrincipal();
  Privilege[] grPriv=privilegesFromName("rep:write");
  acl.addEntry(princ,grPriv,true,Collections.<String,Value>emptyMap());
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  int length=entries.length;
  assertTrue("Grant was both successful -> at least 1 entry.",length > 0);
  for (  AccessControlEntry entry : entries) {
    acl.removeAccessControlEntry(entry);
    length=length - 1;
    assertEquals(length,acl.size());
    assertEquals(length,acl.getAccessControlEntries().length);
  }
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
  assertEquals(0,acl.getAccessControlEntries().length);
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddEntry() throws NotExecutableException, RepositoryException {
  List<AccessControlEntry> entriesBefore=Arrays.asList(acl.getAccessControlEntries());
  if (acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap())) {
    AccessControlEntry[] entries=acl.getAccessControlEntries();
    AccessControlEntry ace=null;
    for (    AccessControlEntry entry : entries) {
      if (testPrincipal.equals(entry.getPrincipal())) {
        ace=entry;
      }
    }
    assertNotNull("addEntry was successful -> expected entry for tesPrincipal.",ace);
    assertTrue("addEntry was successful -> at least 1 entry.",entries.length > 0);
  }
 else {
    AccessControlEntry[] entries=acl.getAccessControlEntries();
    assertEquals("Grant ALL not successful -> entries must not have changed.",entriesBefore,Arrays.asList(entries));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.NodeTypeManagementTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCanAddMixin() throws Exception {
  assertFalse(childNode.canAddMixin(mixinName));
  modify(childNode.getPath(),Privilege.JCR_NODE_TYPE_MANAGEMENT,true);
  assertTrue(childNode.canAddMixin(mixinName));
  modify(childNode.getPath(),Privilege.JCR_NODE_TYPE_MANAGEMENT,false);
  assertFalse(childNode.canAddMixin(mixinName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadPropertyTest </h4><pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDenySingleProperty() throws Exception {
  allow(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  deny(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES),createGlobRestriction("*/" + propertyName1));
  assertTrue(testSession.nodeExists(path));
  assertTrue(testSession.itemExists(path));
  assertTrue(testSession.nodeExists(childNPath));
  List<String> allowed=new ArrayList<String>();
  allowed.add(path + "/jcr:primaryType");
  allowed.add(childNPath + "/jcr:primaryType");
  for (  String pPath : allowed) {
    assertTrue(testSession.itemExists(pPath));
    assertTrue(testSession.propertyExists(pPath));
  }
  List<String> denied=new ArrayList<String>();
  denied.add(childPPath);
  denied.add(childchildPPath);
  for (  String pPath : denied) {
    assertFalse(testSession.itemExists(pPath));
    assertFalse(testSession.propertyExists(pPath));
  }
  Node target=testSession.getNode(path);
  PropertyIterator pit=target.getProperties();
  while (pit.hasNext()) {
    assertFalse(propertyName1.equals(pit.nextProperty().getName()));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetStatus() throws Exception {
  deny(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  allow(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  List<String> propertyPaths=new ArrayList<String>();
  propertyPaths.add(childPPath);
  propertyPaths.add(childchildPPath);
  propertyPaths.add(path + "/jcr:primaryType");
  for (  String pPath : propertyPaths) {
    Property p=testSession.getProperty(pPath);
    assertFalse(p.isModified());
    assertFalse(p.isNew());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction() throws Exception {
  Node grandchild=superuser.getNode(childNPath).addNode("child");
  String ccPath=grandchild.getPath();
  superuser.save();
  deny(path,readPrivileges);
  assertFalse(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  allow(childNPath,readPrivileges,createGlobRestriction(""));
  assertFalse(canReadNode(testSession,path));
  assertTrue(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  assertFalse(testSession.propertyExists(childNPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
  allow(ccPath,readPrivileges);
  assertTrue(canReadNode(testSession,ccPath));
  assertTrue(testSession.propertyExists(ccPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChildNodes() throws Exception {
  Node n=superuser.getNode(path);
  for (int i=0; i < 5; i++) {
    n=n.addNode(nodeName4,testNodeType);
  }
  superuser.save();
  testSession.refresh(false);
  String childPath=n.getPath();
  assertArrayEquals(readPrivileges,testAcMgr.getPrivileges(childPath));
  testSession.checkPermission(childPath,Session.ACTION_READ);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGlobRestriction5() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,readPrivileges);
  deny(path,readPrivileges,createGlobRestriction("*/anotherpath"));
  allow(a.getPath(),repWritePrivileges);
  String aPath=a.getPath();
  assertTrue(testSession.nodeExists(aPath));
  Node n=testSession.getNode(aPath);
  Node test=testSession.getNode(path);
  assertTrue(test.hasNode("a"));
  Node n2=test.getNode("a");
  assertTrue(n.isSame(n2));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction2() throws Exception {
  Node grandchild=superuser.getNode(childNPath).addNode("child");
  String ccPath=grandchild.getPath();
  superuser.save();
  deny(path,readPrivileges);
  assertFalse(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  allow(path,readPrivileges,createGlobRestriction(""));
  assertTrue(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  assertFalse(testSession.propertyExists(childNPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGlobRestriction4() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,readPrivileges);
  deny(path,readPrivileges,createGlobRestriction("*/anotherpath"));
  String aPath=a.getPath();
  assertTrue(testSession.nodeExists(aPath));
  Node n=testSession.getNode(aPath);
  Node test=testSession.getNode(path);
  assertTrue(test.hasNode("a"));
  Node n2=test.getNode("a");
  assertTrue(n.isSame(n2));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction3() throws Exception {
  Group group1=getTestGroup();
  Group group2=getUserManager(superuser).createGroup(generateId("group2_"));
  group2.addMember(testUser);
  Group group3=getUserManager(superuser).createGroup(generateId("group3_"));
  superuser.save();
  try {
    assertTrue(group1.isDeclaredMember(testUser));
    assertTrue(group2.isDeclaredMember(testUser));
    assertFalse(group3.isDeclaredMember(testUser));
    deny(path,group1.getPrincipal(),readPrivileges);
    modify(path,group1.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    deny(childNPath,group2.getPrincipal(),readPrivileges);
    modify(childNPath,group2.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    deny(childNPath2,group3.getPrincipal(),readPrivileges);
    modify(childNPath2,group3.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    Session userSession=getHelper().getRepository().login(creds);
    assertTrue(canReadNode(userSession,path));
    assertTrue(canReadNode(userSession,childNPath));
    assertFalse(canReadNode(userSession,childNPath2));
  }
  finally {
    group2.remove();
    group3.remove();
    superuser.save();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadVersionContentTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetVersion() throws Exception {
  Node testNode=testSession.getNode(versionablePath);
  VersionHistory vh=testNode.getVersionHistory();
  Version version=vh.getVersion(v.getName());
  assertTrue(v.isSame(version));
  assertTrue(vh.isSame(version.getContainingHistory()));
  version=vh.getVersion(v2.getName());
  assertTrue(v2.isSame(version));
  assertTrue(vh.isSame(version.getContainingHistory()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetVersionHistoryNode() throws Exception {
  Node testNode=testSession.getNode(versionablePath);
  String vhPath=vh.getPath();
  String vhUUID=vh.getIdentifier();
  assertTrue(vh.isSame(testNode.getSession().getNode(vhPath)));
  assertTrue(vh.isSame(testNode.getSession().getNodeByIdentifier(vhUUID)));
  assertTrue(vh.isSame(testNode.getSession().getNodeByUUID(vhUUID)));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetVersionHistoryParentNode() throws Exception {
  String vhParentPath=Text.getRelativeParent(vh.getPath(),1);
  assertFalse(testSession.nodeExists(vhParentPath));
  try {
    testSession.getNode(vhParentPath);
    fail("version storage intermediate node must not be accessible");
  }
 catch (  PathNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testAccessVersionHistoryVersionableNodeRemoved() throws Exception {
  superuser.getNode(versionablePath).remove();
  superuser.save();
  testSession.refresh(false);
  assertTrue(testSession.nodeExists(path));
  assertFalse(testSession.nodeExists(versionablePath));
  VersionHistory history=(VersionHistory)testSession.getNode(vh.getPath());
  history=(VersionHistory)testSession.getNodeByIdentifier(vh.getIdentifier());
  history=(VersionHistory)testSession.getNodeByUUID(vh.getUUID());
  modify(path,Privilege.JCR_READ,false);
  assertFalse(testSession.nodeExists(vh.getPath()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadWithGlobRestrictionTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction2() throws Exception {
  Node grandchild=superuser.getNode(childNPath).addNode("child");
  String ccPath=grandchild.getPath();
  superuser.save();
  deny(path,readPrivileges);
  assertFalse(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  allow(path,readPrivileges,createGlobRestriction(""));
  assertTrue(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  assertFalse(testSession.propertyExists(childNPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction() throws Exception {
  Node grandchild=superuser.getNode(childNPath).addNode("child");
  String ccPath=grandchild.getPath();
  superuser.save();
  deny(path,readPrivileges);
  assertFalse(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  allow(childNPath,readPrivileges,createGlobRestriction(""));
  assertFalse(canReadNode(testSession,path));
  assertTrue(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  assertFalse(testSession.propertyExists(childNPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
  allow(ccPath,readPrivileges);
  assertTrue(canReadNode(testSession,ccPath));
  assertTrue(testSession.propertyExists(ccPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction3() throws Exception {
  Group group1=getTestGroup();
  Group group2=getUserManager(superuser).createGroup(generateId("group2_"));
  group2.addMember(testUser);
  Group group3=getUserManager(superuser).createGroup(generateId("group3_"));
  superuser.save();
  try {
    assertTrue(group1.isDeclaredMember(testUser));
    assertTrue(group2.isDeclaredMember(testUser));
    assertFalse(group3.isDeclaredMember(testUser));
    deny(path,group1.getPrincipal(),readPrivileges);
    modify(path,group1.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    deny(childNPath,group2.getPrincipal(),readPrivileges);
    modify(childNPath,group2.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    deny(childNPath2,group3.getPrincipal(),readPrivileges);
    modify(childNPath2,group3.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    Session userSession=getHelper().getRepository().login(creds);
    assertTrue(canReadNode(userSession,path));
    assertTrue(canReadNode(userSession,childNPath));
    assertFalse(canReadNode(userSession,childNPath2));
  }
  finally {
    group2.remove();
    group3.remove();
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGlobRestriction5() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,readPrivileges);
  deny(path,readPrivileges,createGlobRestriction("*/anotherpath"));
  allow(a.getPath(),repWritePrivileges);
  String aPath=a.getPath();
  assertTrue(testSession.nodeExists(aPath));
  Node n=testSession.getNode(aPath);
  Node test=testSession.getNode(path);
  assertTrue(test.hasNode("a"));
  Node n2=test.getNode("a");
  assertTrue(n.isSame(n2));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTwoWildCards() throws Exception {
  Node n=superuser.getNode(childNPath);
  Node n100=n.addNode("100");
  Node n110=n100.addNode("110");
  Node n120=n100.addNode("120");
  Node n111=n110.addNode("111");
  Node n112=n110.addNode("112");
  Node n121=n120.addNode("121");
  Node n122=n120.addNode("122");
  deny(childNPath,privilegesFromName(Privilege.JCR_ALL),createGlobRestriction("/*/110/*"));
  superuser.save();
  assertTrue(canReadNode(testSession,n100.getPath()));
  assertTrue(canReadNode(testSession,n110.getPath()));
  assertFalse(canReadNode(testSession,n111.getPath()));
  assertFalse(canReadNode(testSession,n112.getPath()));
  assertTrue(canReadNode(testSession,n120.getPath()));
  assertTrue(canReadNode(testSession,n121.getPath()));
  assertTrue(canReadNode(testSession,n122.getPath()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGlobRestriction4() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,readPrivileges);
  deny(path,readPrivileges,createGlobRestriction("*/anotherpath"));
  String aPath=a.getPath();
  assertTrue(testSession.nodeExists(aPath));
  Node n=testSession.getNode(aPath);
  Node test=testSession.getNode(path);
  assertTrue(test.hasNode("a"));
  Node n2=test.getNode("a");
  assertTrue(n.isSame(n2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.UserManagementTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/JCR-3412">JCR-3412 :
     *      UserManager.findAuthorizables() does not work, if session does not have
     *      read access to common root of all user and groups. </a>
 */
@Test public void testFindAuthorizables() throws Exception {
  String home=Text.getRelativeParent(UserConstants.DEFAULT_USER_PATH,1);
  deny(home,privilegesFromName(PrivilegeConstants.JCR_READ));
  allow(getUserManager(superuser).getAuthorizable(testSession.getUserID()).getPath(),privilegesFromName(PrivilegeConstants.JCR_ALL));
  UserManager testUserMgr=getUserManager(testSession);
  Iterator<Authorizable> result=testUserMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
  Set<String> ids=new HashSet<String>();
  while (result.hasNext()) {
    ids.add(result.next().getID());
  }
  assertFalse(ids.isEmpty());
  NodeIterator nodeIterator=testSession.getWorkspace().getQueryManager().createQuery("/jcr:root//element(*,rep:User)",Query.XPATH).execute().getNodes();
  assertTrue(nodeIterator.hasNext());
  while (nodeIterator.hasNext()) {
    String userId=nodeIterator.nextNode().getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString();
    if (!ids.remove(userId)) {
      fail("UserId " + userId + " missing in result set.");
    }
  }
  assertTrue("Result mismatch",ids.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.VersionManagementTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionablePath() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  VersionHistory vh=n.getVersionHistory();
  Property versionablePath=vh.getProperty(superuser.getWorkspace().getName());
  assertEquals(n.getPath(),versionablePath.getString());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak (DIFF: jr required jcr:versionManagement privilege on the version store)
 */
@Test public void testRemoveVersion3() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  Version v=n.checkin();
  n.checkout();
  n.checkin();
  testSession.refresh(false);
  assertFalse(testAcMgr.hasPrivileges(n.getPath(),versionPrivileges));
  AccessControlList acl=allow(SYSTEM,versionPrivileges);
  try {
    Node testNode=testSession.getNode(n.getPath());
    testNode.getVersionHistory().removeVersion(v.getName());
    fail("Missing jcr:versionManagement privilege -> remove a version must fail.");
  }
 catch (  AccessDeniedException e) {
  }
 finally {
    for (    AccessControlEntry entry : acl.getAccessControlEntries()) {
      if (entry.getPrincipal().equals(testUser.getPrincipal())) {
        acl.removeAccessControlEntry(entry);
      }
    }
    acMgr.setPolicy(SYSTEM,acl);
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddMixVersionable() throws Exception {
  modify(path,REP_WRITE,true);
  modify(path,Privilege.JCR_VERSION_MANAGEMENT,false);
  Node testNode=testSession.getNode(path);
  try {
    createVersionableNode(testNode);
    fail("Test session does not have permission to add mixins -> no version content should be created.");
  }
 catch (  AccessDeniedException e) {
    assertFalse(testNode.isNodeType(mixVersionable));
    assertFalse(testNode.hasProperty("jcr:isCheckedOut"));
    assertFalse(testNode.hasProperty(jcrVersionHistory));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionableChildNode2() throws Exception {
  Node testNode=superuser.getNode(path).addNode("n1").addNode("n2").addNode("n3").addNode("jcr:content");
  testNode.addMixin("mix:versionable");
  superuser.save();
  testNode.remove();
  testNode=superuser.getNode(path).getNode("n1").getNode("n2").getNode("n3").addNode("jcr:content");
  testNode.addMixin("mix:versionable");
  superuser.save();
  assertTrue(testNode.isNodeType("mix:versionable"));
  VersionHistory vh=testNode.getVersionHistory();
  Property versionablePath=vh.getProperty(superuser.getWorkspace().getName());
  assertEquals(testNode.getPath(),versionablePath.getString());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionableChildNode() throws Exception {
  Node testNode=superuser.getNode(path).addNode("n1").addNode("n2").addNode("n3").addNode("jcr:content");
  superuser.save();
  testNode.addMixin("mix:versionable");
  superuser.save();
  assertTrue(testNode.isNodeType("mix:versionable"));
  VersionHistory vh=testNode.getVersionHistory();
  Property versionablePath=vh.getProperty(superuser.getWorkspace().getName());
  assertEquals(testNode.getPath(),versionablePath.getString());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testAccessVersionHistoryVersionableNodeRemoved() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  allow(n.getPath(),versionPrivileges);
  n.checkin();
  n.checkout();
  String versionablePath=n.getPath();
  VersionHistory vh=n.getVersionHistory();
  String vhPath=vh.getPath();
  String vhUUID=vh.getIdentifier();
  n.remove();
  superuser.save();
  testSession.refresh(false);
  assertTrue(testSession.nodeExists(path));
  assertFalse(testSession.nodeExists(versionablePath));
  VersionHistory history=(VersionHistory)testSession.getNode(vhPath);
  history=(VersionHistory)testSession.getNodeByIdentifier(vhUUID);
  history=(VersionHistory)testSession.getNodeByUUID(vhUUID);
  modify(path,Privilege.JCR_READ,false);
  assertFalse(testSession.nodeExists(vhPath));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak (DIFF: jr required jcr:versionManagement privilege on the version store)
 */
@Test public void testAccessVersionHistory() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  allow(n.getPath(),versionPrivileges);
  Node testNode=testSession.getNode(n.getPath());
  testNode.checkin();
  testNode.checkout();
  VersionHistory vh=testNode.getVersionHistory();
  String vhPath=vh.getPath();
  String vhUUID=vh.getIdentifier();
  assertTrue(vh.isSame(testNode.getSession().getNode(vhPath)));
  assertTrue(vh.isSame(testNode.getSession().getNodeByIdentifier(vhUUID)));
  assertTrue(vh.isSame(testNode.getSession().getNodeByUUID(vhUUID)));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak (DIFF: jr required jcr:versionManagement privilege on the version store)
 */
@Test public void testAccessVersionHistoryVersionableNodeNotAccessible() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  allow(n.getPath(),versionPrivileges);
  Node testNode=testSession.getNode(n.getPath());
  testNode.checkin();
  testNode.checkout();
  VersionHistory vh=testNode.getVersionHistory();
  String vhPath=vh.getPath();
  String vhUUID=vh.getIdentifier();
  modify(n.getPath(),Privilege.JCR_READ,false);
  assertFalse(testSession.nodeExists(n.getPath()));
  try {
    VersionHistory history=(VersionHistory)testSession.getNode(vhPath);
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  PathNotFoundException e) {
  }
  try {
    VersionHistory history=(VersionHistory)testSession.getNodeByIdentifier(vhUUID);
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  ItemNotFoundException e) {
  }
  try {
    VersionHistory history=(VersionHistory)testSession.getNodeByUUID(vhUUID);
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  ItemNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckInCheckout() throws Exception {
  modify(path,REP_WRITE,true);
  modify(path,Privilege.JCR_VERSION_MANAGEMENT,false);
  Node n=createVersionableNode(superuser.getNode(path));
  try {
    testSession.refresh(false);
    Node testNode=testSession.getNode(n.getPath());
    testNode.checkin();
    fail("Missing jcr:versionManagement privilege -> checkin/checkout must fail.");
  }
 catch (  AccessDeniedException e) {
    Property p=n.getProperty("jcr:isCheckedOut");
    assertFalse(p.isModified());
    assertTrue(n.getProperty("jcr:isCheckedOut").getValue().getBoolean());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.VersionTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNodeIsCheckedOut() throws RepositoryException {
  Session s=repository.login(new GuestCredentials());
  sessions.add(s);
  assertFalse(s.nodeExists("/"));
  assertTrue(s.nodeExists("/testNode"));
  assertTrue(s.getWorkspace().getVersionManager().isCheckedOut("/testNode"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.WriteTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since OAK 1.0 : removal of node doesn't require remove permission on
 * all child items (diff to jackrabbit core)
 */
@Test public void testRemoveNodeWithNonRemovableProperty() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  subtree.setProperty("property","visibleButNotRemovable");
  superuser.save();
  String subtreePath=subtree.getPath();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(subtreePath,testUser.getPrincipal(),privilegesFromName(PrivilegeConstants.REP_REMOVE_PROPERTIES));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testSession.nodeExists(subtreePath));
  assertTrue(testSession.propertyExists(subtreePath + "/property"));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/JCR-2420">JCR-2420</a>
 */
@Test public void testRemovalJCR242() throws Exception {
  Privilege[] allPriv=privilegesFromNames(new String[]{Privilege.JCR_ALL});
  allow(path,testUser.getPrincipal(),allPriv);
  allow(childNPath,testUser.getPrincipal(),allPriv);
  AccessControlManager acMgr=testSession.getAccessControlManager();
  assertTrue(acMgr.hasPrivileges(path,allPriv));
  assertTrue(acMgr.hasPrivileges(childNPath,allPriv));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  Node child=testSession.getNode(childNPath);
  child.remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove51() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  allow(childNPath,rmNode);
  String subtreePath=subtree.getPath();
  assertFalse(testSession.hasPermission(subtreePath,Session.ACTION_REMOVE));
  try {
    testSession.getNode(subtreePath).remove();
    testSession.save();
    fail("Removal must fail");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove61() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  Privilege[] privs=privilegesFromNames(new String[]{Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_REMOVE_NODE});
  allow(path,privs);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  deny(childNPath,rmNode);
  String subtreePath=subtree.getPath();
  assertFalse(testSession.hasPermission(subtreePath,Session.ACTION_REMOVE));
  assertTrue(testAcMgr.hasPrivileges(subtreePath,privilegesFromNames(new String[]{Privilege.JCR_READ,Privilege.JCR_REMOVE_CHILD_NODES})));
  assertFalse(testAcMgr.hasPrivileges(subtreePath,privilegesFromName(Privilege.JCR_REMOVE_NODE)));
  try {
    testSession.getNode(subtreePath).remove();
    testSession.save();
    fail("Removal must fail");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveNodeWithInvisibleProperty() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  subtree.setProperty("invisible",14);
  superuser.save();
  String subtreePath=subtree.getPath();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(subtreePath,testUser.getPrincipal(),privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testSession.nodeExists(subtreePath));
  assertFalse(testSession.propertyExists(subtreePath + "/invisible"));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since OAK 1.0 : removal of node doesn't require remove permission on
 * all child items (diff to jackrabbit core)
 */
@Test public void testRemoveNodeWithInvisibleNonRemovableProperty() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  subtree.setProperty("invisible",14);
  superuser.save();
  String subtreePath=subtree.getPath();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(subtreePath,testUser.getPrincipal(),privilegesFromNames(new String[]{PrivilegeConstants.REP_READ_PROPERTIES,PrivilegeConstants.REP_REMOVE_PROPERTIES}));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testSession.nodeExists(subtreePath));
  assertFalse(testSession.propertyExists(subtreePath + "/invisible"));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemove71() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  Privilege[] rmChildNodes=privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  deny(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES));
  allow(childNPath,rmNode);
  String subtreePath=subtree.getPath();
  assertFalse(testSession.hasPermission(subtreePath,Session.ACTION_REMOVE));
  allow(childNPath,rmChildNodes);
  assertTrue(testSession.hasPermission(subtreePath,javax.jcr.Session.ACTION_REMOVE));
  assertTrue(testAcMgr.hasPrivileges(subtreePath,new Privilege[]{rmChildNodes[0],rmNode[0]}));
  testSession.getNode(subtreePath).remove();
  superuser.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.principal.PrincipalManagerTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetEveryone(){
  Principal principal=principalMgr.getEveryone();
  assertTrue(principal != null);
  assertTrue(isGroup(principal));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrincipalGetName(){
  for (  Principal pcpl : adminPrincipals) {
    Principal pp=principalMgr.getPrincipal(pcpl.getName());
    assertEquals("PrincipalManager.getPrincipal returned Principal with different Name",pcpl.getName(),pp.getName());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindPrincipal(){
  for (  Principal pcpl : adminPrincipals) {
    if (pcpl.equals(everyone)) {
      continue;
    }
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
    PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName());
    assertTrue("findPrincipals does not find principal with filter '" + pcpl.getName() + '\'',it.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetGroupPrincipals(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    assertTrue(isGroup(p));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindPrincipalByTypeAll(){
  for (  Principal pcpl : adminPrincipals) {
    if (pcpl.equals(everyone)) {
      continue;
    }
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
    PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName(),PrincipalManager.SEARCH_TYPE_ALL);
    PrincipalIterator it2=principalMgr.findPrincipals(pcpl.getName());
    assertTrue("Principal " + pcpl.getName() + " not found",it.hasNext());
    assertTrue("Principal " + pcpl.getName() + " not found",it2.hasNext());
    assertTrue(it.getSize() == it2.getSize());
    Set<Principal> s1=new HashSet<Principal>();
    Set<Principal> s2=new HashSet<Principal>();
    while (it.hasNext() && it2.hasNext()) {
      s1.add(it.nextPrincipal());
      s2.add(it2.nextPrincipal());
    }
    assertEquals(s1,s2);
    assertFalse(it.hasNext() && it2.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembers(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.equals(principalMgr.getEveryone())) {
      continue;
    }
    if (isGroup(p)) {
      Enumeration<? extends Principal> en=((java.security.acl.Group)p).members();
      while (en.hasMoreElements()) {
        Principal memb=en.nextElement();
        assertTrue(principalMgr.hasPrincipal(memb.getName()));
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindPrincipalByType(){
  for (  Principal pcpl : adminPrincipals) {
    if (pcpl.equals(everyone)) {
      continue;
    }
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
    if (isGroup(pcpl)) {
      PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName(),PrincipalManager.SEARCH_TYPE_GROUP);
      assertTrue("findPrincipals does not find principal with filter " + pcpl.getName(),it.hasNext());
    }
 else {
      PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName(),PrincipalManager.SEARCH_TYPE_NOT_GROUP);
      assertTrue("findPrincipals does not find principal with filter '" + pcpl.getName() + "' and type "+ PrincipalManager.SEARCH_TYPE_NOT_GROUP,it.hasNext());
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEveryoneGroupMembership(){
  Principal everyone=EveryonePrincipal.getInstance();
  for (PrincipalIterator membership=principalMgr.getGroupMembership(everyone); membership.hasNext(); ) {
    Principal gr=membership.nextPrincipal();
    assertTrue(isGroup(gr));
    if (gr.equals(everyone)) {
      fail("Everyone must never be a member of the EveryOne group.");
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrincipals(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_NOT_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    assertFalse(isGroup(p));
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAllPrincipals(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    assertTrue(principalMgr.hasPrincipal(p.getName()));
    assertEquals(principalMgr.getPrincipal(p.getName()),p);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindEveryone(){
  Principal everyone=principalMgr.getEveryone();
  assertTrue(principalMgr.hasPrincipal(everyone.getName()));
  boolean containedInResult=false;
  PrincipalIterator it=principalMgr.findPrincipals(everyone.getName());
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.getName().equals(everyone.getName())) {
      containedInResult=true;
    }
  }
  assertTrue(containedInResult);
  containedInResult=false;
  it=principalMgr.findPrincipals(everyone.getName(),PrincipalManager.SEARCH_TYPE_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.getName().equals(everyone.getName())) {
      containedInResult=true;
    }
  }
  assertTrue(containedInResult);
  containedInResult=false;
  it=principalMgr.findPrincipals(everyone.getName(),PrincipalManager.SEARCH_TYPE_NOT_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.getName().equals(everyone.getName())) {
      containedInResult=true;
    }
  }
  assertFalse(containedInResult);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMembersConsistentWithMembership(){
  Principal everyone=principalMgr.getEveryone();
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.equals(everyone)) {
      continue;
    }
    assertTrue(isGroup(p));
    Enumeration<? extends Principal> members=((java.security.acl.Group)p).members();
    while (members.hasMoreElements()) {
      Principal memb=members.nextElement();
      Principal group=null;
      PrincipalIterator mship=principalMgr.getGroupMembership(memb);
      while (mship.hasNext() && group == null) {
        Principal gr=mship.nextPrincipal();
        if (p.equals(gr)) {
          group=gr;
        }
      }
      assertNotNull("Group member " + memb.getName() + "does not reveal group upon getGroupMembership",p.getName());
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembers2() throws Exception {
  Authorizable gr=null;
  try {
    gr=((JackrabbitSession)superuser).getUserManager().createGroup(getClass().getName());
    superuser.save();
    PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
    while (it.hasNext()) {
      Principal p=it.nextPrincipal();
      if (p.equals(principalMgr.getEveryone())) {
        continue;
      }
      if (isGroup(p)) {
        Enumeration<? extends Principal> en=((java.security.acl.Group)p).members();
        while (en.hasMoreElements()) {
          Principal memb=en.nextElement();
          assertTrue(principalMgr.hasPrincipal(memb.getName()));
        }
      }
    }
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrincipal(){
  Principal p=principalMgr.getPrincipal(everyone.getName());
  assertEquals(everyone,p);
  for (  Principal pcpl : adminPrincipals) {
    Principal pp=principalMgr.getPrincipal(pcpl.getName());
    assertEquals("PrincipalManager.getPrincipal returned Principal with different Name",pcpl.getName(),pp.getName());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrincipal(){
  assertTrue(principalMgr.hasPrincipal(everyone.getName()));
  for (  Principal pcpl : adminPrincipals) {
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetEveryoneByName(){
  assertTrue(principalMgr.hasPrincipal(EveryonePrincipal.NAME));
  assertNotNull(principalMgr.getPrincipal(EveryonePrincipal.NAME));
  assertEquals(EveryonePrincipal.getInstance(),principalMgr.getPrincipal(EveryonePrincipal.NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.privilege.PrivilegeManagerTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegeFromName() throws AccessControlException, RepositoryException {
  Privilege p=privilegeManager.getPrivilege(Privilege.JCR_VERSION_MANAGEMENT);
  assertTrue(p != null);
  assertEquals(PrivilegeConstants.JCR_VERSION_MANAGEMENT,p.getName());
  assertFalse(p.isAggregate());
  p=privilegeManager.getPrivilege(Privilege.JCR_WRITE);
  assertTrue(p != null);
  assertEquals(PrivilegeConstants.JCR_WRITE,p.getName());
  assertTrue(p.isAggregate());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testJcrAll() throws RepositoryException {
  Privilege all=privilegeManager.getPrivilege(Privilege.JCR_ALL);
  assertPrivilege(all,"jcr:all",true,false);
  List<Privilege> decl=Arrays.asList(all.getDeclaredAggregatePrivileges());
  List<Privilege> aggr=new ArrayList<Privilege>(Arrays.asList(all.getAggregatePrivileges()));
  assertFalse(decl.contains(all));
  assertFalse(aggr.contains(all));
  assertTrue(decl.containsAll(aggr));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_READ)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_ADD_CHILD_NODES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_REMOVE_CHILD_NODES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_MODIFY_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_REMOVE_NODE)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_READ_ACCESS_CONTROL)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_MODIFY_ACCESS_CONTROL)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_LIFECYCLE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_LOCK_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_NODE_TYPE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_RETENTION_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_VERSION_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_WRITE)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_WRITE)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_READ_NODES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_READ_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_ADD_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_ALTER_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_REMOVE_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.JCR_NODE_TYPE_DEFINITION_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.JCR_WORKSPACE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_USER_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_INDEX_DEFINITION_MANAGEMENT)));
  assertTrue(aggr.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.privilege.PrivilegeRegistrationTest </h4><pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testRegisterPrivilegeWithPendingChanges() throws RepositoryException {
  try {
    session.getRootNode().addNode("test");
    assertTrue(session.hasPendingChanges());
    privilegeManager.registerPrivilege("new",true,new String[0]);
    fail("Privileges may not be registered while there are pending changes.");
  }
 catch (  InvalidItemStateException e) {
  }
 finally {
    superuser.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testCustomPrivilegeVisibleAfterRefresh() throws RepositoryException {
  Session s2=getAdminSession();
  PrivilegeManager pm=getPrivilegeManager(s2);
  try {
    boolean isAbstract=false;
    String privName="testCustomPrivilegeVisibleAfterRefresh";
    privilegeManager.registerPrivilege(privName,isAbstract,new String[0]);
    try {
      Privilege priv=pm.getPrivilege(privName);
      fail("Custom privilege will show up after Session#refresh()");
    }
 catch (    AccessControlException e) {
    }
    s2.refresh(true);
    Privilege priv=pm.getPrivilege(privName);
    assertEquals(privName,priv.getName());
    assertEquals(isAbstract,priv.isAbstract());
    assertFalse(priv.isAggregate());
  }
  finally {
    s2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2015">OAK-2015</a>
 */
@Test public void testJcrAllWithCustomPrivileges() throws Exception {
  Node testNode=session.getRootNode().addNode("test");
  String testPath=testNode.getPath();
  AccessControlUtils.grantAllToEveryone(session,testPath);
  session.save();
  JackrabbitAccessControlManager acMgr=(JackrabbitAccessControlManager)session.getAccessControlManager();
  Privilege[] allPrivileges=AccessControlUtils.privilegesFromNames(session,Privilege.JCR_ALL);
  Set<Principal> principalSet=ImmutableSet.<Principal>of(EveryonePrincipal.getInstance());
  assertTrue(acMgr.hasPrivileges(testPath,principalSet,allPrivileges));
  privilegeManager.registerPrivilege("customPriv",false,null);
  assertTrue(acMgr.hasPrivileges(testPath,principalSet,allPrivileges));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterPrivilegeAggregatingJcrAll() throws Exception {
  privilegeManager.registerPrivilege("customPriv",false,null);
  try {
    privilegeManager.registerPrivilege("customPriv2",false,new String[]{"customPriv",Privilege.JCR_ALL});
    fail("Aggregation containing jcr:all is invalid.");
  }
 catch (  RepositoryException e) {
    Throwable cause=e.getCause();
    assertTrue(cause instanceof CommitFailedException);
    assertEquals(53,((CommitFailedException)cause).getCode());
  }
 finally {
    superuser.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testRegisterCustomPrivilegesVisibleInContent() throws RepositoryException {
  Workspace workspace=session.getWorkspace();
  workspace.getNamespaceRegistry().registerNamespace("test","http://www.apache.org/jackrabbit/test");
  Map<String,String[]> newCustomPrivs=new HashMap<String,String[]>();
  newCustomPrivs.put("new",new String[0]);
  newCustomPrivs.put("test:new",new String[0]);
  for (  String name : newCustomPrivs.keySet()) {
    boolean isAbstract=true;
    String[] aggrNames=newCustomPrivs.get(name);
    Privilege registered=privilegeManager.registerPrivilege(name,isAbstract,aggrNames);
    Node privilegeRoot=session.getNode(PrivilegeConstants.PRIVILEGES_PATH);
    assertTrue(privilegeRoot.hasNode(name));
    Node privNode=privilegeRoot.getNode(name);
    assertTrue(privNode.getProperty(PrivilegeConstants.REP_IS_ABSTRACT).getBoolean());
    assertFalse(privNode.hasProperty(PrivilegeConstants.REP_AGGREGATES));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterCustomPrivileges() throws RepositoryException {
  Workspace workspace=session.getWorkspace();
  workspace.getNamespaceRegistry().registerNamespace("test","http://www.apache.org/jackrabbit/test");
  Map<String,String[]> newCustomPrivs=new HashMap<String,String[]>();
  newCustomPrivs.put("new",new String[0]);
  newCustomPrivs.put("test:new",new String[0]);
  for (  String name : newCustomPrivs.keySet()) {
    boolean isAbstract=true;
    String[] aggrNames=newCustomPrivs.get(name);
    Privilege registered=privilegeManager.registerPrivilege(name,isAbstract,aggrNames);
    Privilege privilege=privilegeManager.getPrivilege(name);
    assertNotNull(privilege);
    assertEquals(name,privilege.getName());
    assertTrue(privilege.isAbstract());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    assertContainsDeclared(privilegeManager.getPrivilege(PrivilegeConstants.JCR_ALL),name);
  }
  Map<String,String[]> newAggregates=new HashMap<String,String[]>();
  newAggregates.put("newA2",getAggregateNames("test:new","new"));
  newAggregates.put("newA1",getAggregateNames("new",PrivilegeConstants.JCR_READ));
  newAggregates.put("aggrBuiltIn",getAggregateNames(PrivilegeConstants.JCR_MODIFY_PROPERTIES,PrivilegeConstants.JCR_READ));
  for (  String name : newAggregates.keySet()) {
    boolean isAbstract=false;
    String[] aggrNames=newAggregates.get(name);
    privilegeManager.registerPrivilege(name,isAbstract,aggrNames);
    Privilege p=privilegeManager.getPrivilege(name);
    assertNotNull(p);
    assertEquals(name,p.getName());
    assertFalse(p.isAbstract());
    for (    String n : aggrNames) {
      assertContainsDeclared(p,n);
    }
    assertContainsDeclared(privilegeManager.getPrivilege(PrivilegeConstants.JCR_ALL),name);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testCustomPrivilegeVisibleToNewSession() throws RepositoryException {
  boolean isAbstract=false;
  String privName="testCustomPrivilegeVisibleToNewSession";
  privilegeManager.registerPrivilege(privName,isAbstract,new String[0]);
  Session s2=getAdminSession();
  try {
    PrivilegeManager pm=getPrivilegeManager(s2);
    Privilege priv=pm.getPrivilege(privName);
    assertEquals(privName,priv.getName());
    assertEquals(isAbstract,priv.isAbstract());
    assertFalse(priv.isAggregate());
  }
  finally {
    s2.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.AuthorizablePropertyTest </h4><pre class="type-13 type-12 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupGetProperties() throws RepositoryException, NotExecutableException {
  Node n=getNode(group,superuser);
  for (PropertyIterator it=n.getProperties(); it.hasNext(); ) {
    Property prop=it.nextProperty();
    if (prop.getDefinition().isProtected()) {
      assertFalse(group.hasProperty(prop.getName()));
      assertNull(group.getProperty(prop.getName()));
    }
 else {
      assertTrue(group.hasProperty(prop.getName()));
      assertNotNull(group.getProperty(prop.getName()));
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserGetProperties() throws RepositoryException, NotExecutableException {
  Node n=getNode(user,superuser);
  for (PropertyIterator it=n.getProperties(); it.hasNext(); ) {
    Property p=it.nextProperty();
    if (p.getDefinition().isProtected()) {
      assertFalse(user.hasProperty(p.getName()));
      assertNull(user.getProperty(p.getName()));
    }
 else {
      assertTrue(user.hasProperty(p.getName()));
      assertNotNull(user.getProperty(p.getName()));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.AuthorizableTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testObjectMethods() throws Exception {
  final Authorizable user=getTestUser(superuser);
  Authorizable user2=getTestUser(superuser);
  assertEquals(user,user2);
  assertEquals(user.hashCode(),user2.hashCode());
  Set<Authorizable> s=new HashSet<Authorizable>();
  s.add(user);
  assertFalse(s.add(user2));
  Authorizable user3=new Authorizable(){
    public String getID() throws RepositoryException {
      return user.getID();
    }
    public boolean isGroup(){
      return user.isGroup();
    }
    public Principal getPrincipal() throws RepositoryException {
      return user.getPrincipal();
    }
    public Iterator<Group> declaredMemberOf() throws RepositoryException {
      return user.declaredMemberOf();
    }
    public Iterator<Group> memberOf() throws RepositoryException {
      return user.memberOf();
    }
    public void remove() throws RepositoryException {
      user.remove();
    }
    public Iterator<String> getPropertyNames() throws RepositoryException {
      return user.getPropertyNames();
    }
    public Iterator<String> getPropertyNames(    String relPath) throws RepositoryException {
      return user.getPropertyNames(relPath);
    }
    public boolean hasProperty(    String name) throws RepositoryException {
      return user.hasProperty(name);
    }
    public void setProperty(    String name,    Value value) throws RepositoryException {
      user.setProperty(name,value);
    }
    public void setProperty(    String name,    Value[] values) throws RepositoryException {
      user.setProperty(name,values);
    }
    public Value[] getProperty(    String name) throws RepositoryException {
      return user.getProperty(name);
    }
    public boolean removeProperty(    String name) throws RepositoryException {
      return user.removeProperty(name);
    }
    public String getPath() throws RepositoryException {
      return user.getPath();
    }
  }
;
  assertFalse(user.equals(user3));
  assertTrue(s.add(user3));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.CreateGroupTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroup() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  Group gr=createGroup(p);
  createdGroups.add(gr);
  assertNotNull(gr.getID());
  assertEquals(p.getName(),gr.getPrincipal().getName());
  assertFalse("A new group must not have members.",gr.getMembers().hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupWithRelativePath() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  Group gr=createGroup(p,"any/path");
  createdGroups.add(gr);
  assertNotNull(gr.getID());
  assertTrue(gr.getPath().contains("any/path"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.CreateUserTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithDifferentPrincipalName() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=getTestPrincipal().getName();
  User user=createUser(uid,"pw",p,"any/path");
  createdUsers.add(user);
  assertNotNull(user.getID());
  assertEquals(p.getName(),user.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithRelativePath() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=p.getName();
  User user=createUser(uid,"pw",p,"any/path");
  createdUsers.add(user);
  assertNotNull(user.getID());
  assertTrue(user.getPath().contains("any/path"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=p.getName();
  User user=createUser(uid,"pw");
  createdUsers.add(user);
  assertNotNull(user.getID());
  assertEquals(p.getName(),user.getPrincipal().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.EveryoneGroupTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupPrincipal() throws Exception {
  Principal everyonePrincipal=everyone.getPrincipal();
  assertTrue(everyonePrincipal instanceof java.security.acl.Group);
  assertTrue(everyonePrincipal.equals(EveryonePrincipal.getInstance()));
  assertTrue(EveryonePrincipal.getInstance().equals(everyonePrincipal));
  java.security.acl.Group gr=(java.security.acl.Group)everyonePrincipal;
  assertFalse(gr.isMember(everyonePrincipal));
  assertTrue(gr.isMember(getTestUser(superuser).getPrincipal()));
  assertTrue(gr.isMember(new PrincipalImpl("test")));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserMemberOfContainsEveryone() throws Exception {
  User testUser=getTestUser(superuser);
  boolean memberOfEveryone=false;
  Iterator<Group> groups=testUser.memberOf();
  while (groups.hasNext() && !memberOfEveryone) {
    Group g=groups.next();
    memberOfEveryone=(EveryonePrincipal.NAME.equals(g.getPrincipal().getName()));
  }
  assertTrue(memberOfEveryone);
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembers() throws RepositoryException, NotExecutableException {
  assertTrue(everyone.isDeclaredMember(getTestUser(superuser)));
  assertTrue(everyone.isMember(getTestUser(superuser)));
  Iterator<Authorizable> it=everyone.getDeclaredMembers();
  assertTrue(it.hasNext());
  Set<Authorizable> members=new HashSet<Authorizable>();
  while (it.hasNext()) {
    members.add(it.next());
  }
  it=everyone.getMembers();
  assertTrue(it.hasNext());
  while (it.hasNext()) {
    assertTrue(members.contains(it.next()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEditMembers() throws RepositoryException, NotExecutableException {
  assertFalse(everyone.addMember(getTestUser(superuser)));
  assertFalse(everyone.removeMember(getTestUser(superuser)));
  Group anotherGroup=null;
  try {
    anotherGroup=userMgr.createGroup("testGroup");
    superuser.save();
    assertFalse(everyone.addMember(anotherGroup));
    assertFalse(everyone.removeMember(anotherGroup));
    assertFalse(anotherGroup.addMember(everyone));
    assertFalse(anotherGroup.removeMember(everyone));
  }
  finally {
    if (anotherGroup != null) {
      anotherGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.FindAuthorizablesTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindGroupInAllGroups() throws RepositoryException, NotExecutableException {
  Group gr=null;
  try {
    Principal p=getTestPrincipal();
    gr=userMgr.createGroup(p);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_GROUP);
    while (it.hasNext() && !found) {
      Group ng=(Group)it.next();
      found=ng.getPrincipal().getName().equals(p.getName());
    }
    assertTrue("Searching for 'null' must find the created group.",found);
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws RepositoryException, NotExecutableException {
  Set<Principal> principals=new HashSet<Principal>();
  PrincipalManager pMgr=((JackrabbitSession)superuser).getPrincipalManager();
  Principal p=pMgr.getPrincipal(superuser.getUserID());
  if (p != null) {
    principals.add(p);
    PrincipalIterator principalIterator=pMgr.getGroupMembership(p);
    while (principalIterator.hasNext()) {
      principals.add(principalIterator.nextPrincipal());
    }
  }
  Authorizable auth;
  for (  Principal principal : principals) {
    auth=userMgr.getAuthorizable(principal);
    if (auth != null) {
      if (!auth.isGroup() && auth.hasProperty(UserConstants.REP_PRINCIPAL_NAME)) {
        String val=auth.getProperty(UserConstants.REP_PRINCIPAL_NAME)[0].getString();
        Iterator<Authorizable> users=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,val);
        assertTrue(users.hasNext());
        Authorizable first=users.next();
        assertEquals(first.getID(),val);
        assertFalse(users.hasNext());
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizableByRelativePath() throws NotExecutableException, RepositoryException {
  Principal p=getTestPrincipal();
  Authorizable auth=null;
  try {
    auth=userMgr.createGroup(p);
    Value[] vs=new Value[]{superuser.getValueFactory().createValue("v1"),superuser.getValueFactory().createValue("v2")};
    String relPath="relPath/" + propertyName1;
    String relPath2="another/" + propertyName1;
    String relPath3="relPath/relPath/" + propertyName1;
    auth.setProperty(relPath,vs);
    auth.setProperty(relPath2,vs);
    auth.setProperty(relPath3,superuser.getValueFactory().createValue("v3"));
    superuser.save();
    Iterator<Authorizable> result=userMgr.findAuthorizables(propertyName1,"v1");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables(propertyName1,"v3");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables(relPath,"v1");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables("./" + propertyName1,"v1");
    assertFalse("expected result",result.hasNext());
  }
  finally {
    if (auth != null) {
      auth.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindUserByPrincipalName() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,p.getName(),UserManager.SEARCH_TYPE_USER);
    while (it.hasNext() && !found) {
      User nu=(User)it.next();
      found=nu.getPrincipal().getName().equals(p.getName());
    }
    assertTrue("Searching for principal-name must find the created user.",found);
    it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,p.getName(),UserManager.SEARCH_TYPE_GROUP);
    assertFalse(it.hasNext());
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindUserWithSpecialCharIdByPrincipalName() throws RepositoryException {
  List<String> ids=Lists.newArrayList("'","]","']",Text.escapeIllegalJcrChars("']"),Text.escape("']"));
  for (  String id : ids) {
    User user=null;
    try {
      user=userMgr.createUser(id,"pw");
      superuser.save();
      boolean found=false;
      Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,id,UserManager.SEARCH_TYPE_USER);
      while (it.hasNext() && !found) {
        Authorizable a=it.next();
        found=id.equals(a.getID());
      }
      assertTrue(found);
    }
  finally {
      if (user != null) {
        user.remove();
        superuser.save();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindUserInAllUsers2() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
    while (it.hasNext() && !found) {
      User nu=(User)it.next();
      found=nu.getID().equals(uid);
    }
    assertTrue("Searching for 'null' must find the created user.",found);
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindUserInAllUsers() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables("./" + UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
    while (it.hasNext() && !found) {
      User nu=(User)it.next();
      found=nu.getID().equals(uid);
    }
    assertTrue("Searching for 'null' must find the created user.",found);
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupImportTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportNewMembers() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "<sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "   <sv:value>rep:AuthorizableFolder</sv:value>"+ "</sv:property>"+ "<sv:node sv:name=\"g\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>"+ "<sv:node sv:name=\"g1\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Group g=(Group)getUserManager().getAuthorizable("g");
  assertNotNull(g);
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertNotNull(g1);
  Session s=getImportSession();
  Node n=s.getNode(g1.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_MEMBERS) || n.hasNode(UserConstants.NT_REP_MEMBERS));
  s.save();
  assertTrue(g1.isMember(g));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportGroupWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getID());
  assertTrue(s.propertyExists(newGroup.getPath() + "/rep:authorizableId"));
  assertEquals("g",s.getProperty(newGroup.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportMembers() throws Exception {
  Session s=getImportSession();
  Authorizable admin=checkNotNull(getUserManager().getAuthorizable(UserConstants.DEFAULT_ADMIN_ID));
  String uuid=s.getNode(admin.getPath()).getUUID();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:node sv:name=\"g1\">"+ "       <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "       <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>" + uuid + "</sv:value></sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertNotNull(g1);
  s.save();
  assertTrue(g1.isMember(admin));
  boolean found=false;
  for (Iterator<Group> it=admin.declaredMemberOf(); it.hasNext() && !found; ) {
    found="g1".equals(it.next().getID());
  }
  assertTrue(found);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportGroup() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  Session s=getImportSession();
  assertTrue(s.hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getPrincipal().getName());
  assertEquals("g",newGroup.getID());
  Node n=s.getNode(newGroup.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("g",n.getName());
  assertEquals("g",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportGroupMembersFromNodes() throws Exception {
  List<String> createdUsers=new LinkedList<String>();
  Session s=getImportSession();
  UserManager uMgr=getUserManager();
  try {
    String[] users={"angi","adi","hansi","lisi","luzi","susi","pipi","hari","gabi","eddi","debbi","cati","admin","anonymous"};
    for (    String user : users) {
      if (uMgr.getAuthorizable(user) == null) {
        uMgr.createUser(user,user);
        createdUsers.add(user);
      }
    }
    if (!uMgr.isAutoSave()) {
      s.save();
    }
    doImport(getTargetPath(),"GroupImportTest-testImportGroupMembersFromNodes.xml");
    if (!uMgr.isAutoSave()) {
      s.save();
    }
    Authorizable aShrimps=uMgr.getAuthorizable("shrimps");
    assertNotNull("Shrimps authorizable must exist",aShrimps);
    assertTrue("Shrimps authorizable must be a group",aShrimps.isGroup());
    Group gShrimps=(Group)aShrimps;
    for (    String user : users) {
      assertTrue(user + " should be member of " + gShrimps,gShrimps.isMember(uMgr.getAuthorizable(user)));
    }
  }
  finally {
    for (    String user : createdUsers) {
      Authorizable a=uMgr.getAuthorizable(user);
      if (a != null && !a.isGroup()) {
        a.remove();
      }
    }
    for (NodeIterator it=s.getNode(getTargetPath()).getNodes(); it.hasNext(); ) {
      Node n=it.nextNode();
      if (!n.getDefinition().isProtected()) {
        n.remove();
      }
    }
    s.save();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportNewMembersReverseOrder() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:node sv:name=\"g1\">"+ "       <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "       <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   </sv:node>"+ "   <sv:node sv:name=\"g\">"+ "       <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "       <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Group g=(Group)getUserManager().getAuthorizable("g");
  assertNotNull(g);
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertNotNull(g1);
  Session s=getImportSession();
  Node n=s.getNode(g1.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_MEMBERS) || n.hasNode(UserConstants.NT_REP_MEMBERS));
  s.save();
  assertTrue(g1.isMember(g));
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing new rep:MembershipReferences structure
 */
@Test public void testImportGroupMembersFromOakNodes() throws Exception {
  List<String> createdUsers=new LinkedList<String>();
  Session s=getImportSession();
  UserManager uMgr=getUserManager();
  try {
    for (int i=0; i < 32; i++) {
      String user="testUser" + i;
      if (uMgr.getAuthorizable(user) == null) {
        uMgr.createUser(user,user);
        createdUsers.add(user);
      }
    }
    if (!uMgr.isAutoSave()) {
      s.save();
    }
    doImport(getTargetPath(),"GroupImportTest-testImportGroupMembersFromOakNodes.xml");
    if (!uMgr.isAutoSave()) {
      s.save();
    }
    Authorizable authorizable=uMgr.getAuthorizable("testGroup");
    assertNotNull("testGroup authorizable must exist",authorizable);
    assertTrue("testGroup authorizable must be a group",authorizable.isGroup());
    Group testGroup=(Group)authorizable;
    for (int i=0; i < 32; i++) {
      String user="testUser" + i;
      assertTrue(user + " should be member of " + testGroup,testGroup.isMember(uMgr.getAuthorizable(user)));
    }
    authorizable=uMgr.getAuthorizable("shrimps");
    assertNotNull("shrimps authorizable must exist",authorizable);
    assertTrue("shrimps authorizable must be a group",authorizable.isGroup());
    testGroup=(Group)authorizable;
    for (int i=0; i < 32; i++) {
      String user="testUser" + i;
      assertTrue(user + " should be member of " + testGroup,testGroup.isMember(uMgr.getAuthorizable(user)));
    }
  }
  finally {
    for (    String user : createdUsers) {
      Authorizable a=uMgr.getAuthorizable(user);
      if (a != null && !a.isGroup()) {
        a.remove();
      }
    }
    for (NodeIterator it=s.getNode(getTargetPath()).getNodes(); it.hasNext(); ) {
      Node n=it.nextNode();
      if (!n.getDefinition().isProtected()) {
        n.remove();
      }
    }
    s.save();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportMembersWithIdDifferentFromNodeName() throws Exception {
  Session s=getImportSession();
  Authorizable admin=checkNotNull(getUserManager().getAuthorizable(UserConstants.DEFAULT_ADMIN_ID));
  String uuid=s.getNode(admin.getPath()).getUUID();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:node sv:name=\"g_different\">"+ "       <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "       <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>" + uuid + "</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertNotNull(g1);
  s.save();
  assertTrue(g1.isMember(admin));
  boolean found=false;
  for (Iterator<Group> it=admin.declaredMemberOf(); it.hasNext() && !found; ) {
    found="g1".equals(it.next().getID());
  }
  assertTrue(found);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValuedPrincipalName() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value><sv:value>g2</sv:value><sv:value>g</sv:value></sv:property></sv:node>";
  Session s=getImportSession();
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(target.hasNode("g"));
  assertTrue(target.hasProperty("g/rep:principalName"));
  assertFalse(target.getProperty("g/rep:principalName").getDefinition().isProtected());
  try {
    s.save();
    fail("Import must be incomplete. Saving changes must fail.");
  }
 catch (  ConstraintViolationException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupImportWithPoliciesTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportGroupWithPolicies() throws Exception {
  Node target=getTargetNode();
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getPrincipal().getName());
  assertEquals("g",newGroup.getID());
  Node n=getImportSession().getNode(newGroup.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("g",n.getName());
  assertEquals("g",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  AccessControlList acl=AccessControlUtils.getAccessControlList(getImportSession(),newGroup.getPath());
  assertNotNull(acl);
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("administrators",aces[0].getPrincipal().getName());
  assertEquals(PrivilegeConstants.JCR_READ,aces[0].getPrivileges()[0].getName());
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupTest </h4><pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritedMembers() throws Exception {
  Set<Authorizable> authorizables=new HashSet<Authorizable>();
  try {
    User testUser=userMgr.createUser(createUserId(),"pw");
    authorizables.add(testUser);
    Group group1=userMgr.createGroup(createGroupId());
    authorizables.add(group1);
    Group group2=userMgr.createGroup(createGroupId());
    authorizables.add(group2);
    Group group3=userMgr.createGroup(createGroupId());
    group1.addMember(testUser);
    group2.addMember(testUser);
    group3.addMember(group1);
    group3.addMember(group2);
    Iterator<Authorizable> members=group3.getMembers();
    while (members.hasNext()) {
      Authorizable a=members.next();
      assertTrue(authorizables.contains(a));
      assertTrue(authorizables.remove(a));
    }
    assertTrue(authorizables.isEmpty());
  }
  finally {
    for (    Authorizable a : authorizables) {
      a.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMemberModifiesMemberOf() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalseMemberOfContainsGroup(auth.memberOf(),newGroup);
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertTrueMemberOfContainsGroup(auth.declaredMemberOf(),newGroup);
    assertTrueMemberOfContainsGroup(auth.memberOf(),newGroup);
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveMemberTwice() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertTrue(newGroup.removeMember(userMgr.getAuthorizable(auth.getID())));
    superuser.save();
    assertFalse(newGroup.removeMember(auth));
    superuser.save();
  }
  finally {
    if (newGroup != null) {
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMembers() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  int size=100;
  List<User> users=new ArrayList<User>(size);
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    for (int k=0; k < size; k++) {
      users.add(userMgr.createUser("user_" + k,"pass_" + k));
    }
    superuser.save();
    for (    User user : users) {
      assertTrue(newGroup.addMember(user));
    }
    superuser.save();
    for (    User user : users) {
      assertTrue(newGroup.isMember(user));
    }
    for (    User user : users) {
      assertTrue(newGroup.removeMember(user));
    }
    superuser.save();
    for (    User user : users) {
      assertFalse(newGroup.isMember(user));
    }
  }
  finally {
    for (    User user : users) {
      user.remove();
      superuser.save();
    }
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddRemoveMember() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup1=null;
  Group newGroup2=null;
  try {
    newGroup1=userMgr.createGroup(createGroupId());
    newGroup2=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalse(newGroup1.isMember(auth));
    assertFalse(newGroup1.removeMember(auth));
    superuser.save();
    assertFalse(newGroup2.isMember(auth));
    assertFalse(newGroup2.removeMember(auth));
    superuser.save();
    assertTrue(newGroup1.addMember(auth));
    superuser.save();
    assertTrue(newGroup1.isMember(auth));
    assertTrue(newGroup1.isMember(userMgr.getAuthorizable(auth.getID())));
    assertTrue(newGroup2.addMember(auth));
    superuser.save();
    assertTrue(newGroup2.isMember(auth));
    assertTrue(newGroup2.isMember(userMgr.getAuthorizable(auth.getID())));
    assertTrue(newGroup1.removeMember(auth));
    superuser.save();
    assertTrue(newGroup2.removeMember(auth));
    superuser.save();
    assertTrue(newGroup1.addMember(auth));
    superuser.save();
    assertTrue(newGroup1.isMember(auth));
    assertTrue(newGroup1.isMember(userMgr.getAuthorizable(auth.getID())));
    assertTrue(newGroup1.removeMember(auth));
    superuser.save();
  }
  finally {
    if (newGroup1 != null) {
      newGroup1.removeMember(auth);
      newGroup1.remove();
      superuser.save();
    }
    if (newGroup2 != null) {
      newGroup2.removeMember(auth);
      newGroup2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveMembershipWithDifferentSessions() throws Exception {
  String grId2=createGroupId();
  Group gr2=null;
  Session s2=null;
  Session s3=null;
  try {
    gr2=userMgr.createGroup(grId2);
    gr2.addMember(user);
    superuser.save();
    s2=getHelper().getReadWriteSession();
    Authorizable u2=getUserManager(s2).getAuthorizable(user.getID());
    Iterator<Group> groups=u2.declaredMemberOf();
    while (groups.hasNext()) {
      Group group=groups.next();
      group.removeMember(u2);
    }
    s2.save();
    s3=getHelper().getReadWriteSession();
    Authorizable u3=getUserManager(s3).getAuthorizable(user.getID());
    assertFalse(getUserManager(s3).getAuthorizable(group.getID(),Group.class).isDeclaredMember(u3));
    assertFalse(getUserManager(s3).getAuthorizable(grId2,Group.class).isDeclaredMember(u3));
    groups=u3.declaredMemberOf();
    while (groups.hasNext()) {
      String id=groups.next().getID();
      assertFalse(group.getID().equals(id));
      assertFalse(grId2.equals(id));
    }
  }
  finally {
    if (gr2 != null) {
      gr2.remove();
      superuser.save();
    }
    if (s2 != null) {
      s2.logout();
    }
    if (s3 != null) {
      s3.logout();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembersInPrincipal() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  Group newGroup2=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    newGroup2=userMgr.createGroup(createGroupId());
    superuser.save();
    newGroup.addMember(newGroup2);
    superuser.save();
    newGroup2.addMember(auth);
    superuser.save();
    java.security.acl.Group ngPrincipal=(java.security.acl.Group)newGroup.getPrincipal();
    java.security.acl.Group ng2Principal=(java.security.acl.Group)newGroup2.getPrincipal();
    assertFalse(ng2Principal.isMember(ngPrincipal));
    assertTrue(ngPrincipal.isMember(newGroup2.getPrincipal()));
    assertTrue(ng2Principal.isMember(auth.getPrincipal()));
    assertTrue(ngPrincipal.isMember(auth.getPrincipal()));
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(newGroup2);
      newGroup.remove();
      superuser.save();
    }
    if (newGroup2 != null) {
      newGroup2.removeMember(auth);
      newGroup2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsDeclaredMember() throws RepositoryException, NotExecutableException {
  User auth=getTestUser(superuser);
  Group newGroup1=null;
  Group newGroup2=null;
  try {
    newGroup1=userMgr.createGroup(createGroupId());
    newGroup2=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalse(newGroup1.isDeclaredMember(auth));
    assertFalse(newGroup2.isDeclaredMember(auth));
    assertTrue(newGroup2.addMember(auth));
    superuser.save();
    assertTrue(newGroup2.isDeclaredMember(auth));
    assertTrue(newGroup2.isDeclaredMember(userMgr.getAuthorizable(auth.getID())));
    assertTrue(newGroup1.addMember(newGroup2));
    superuser.save();
    assertTrue(newGroup1.isDeclaredMember(newGroup2));
    assertTrue(newGroup1.isDeclaredMember(userMgr.getAuthorizable(newGroup2.getID())));
    assertTrue(newGroup1.isMember(auth));
    assertTrue(newGroup1.isMember(userMgr.getAuthorizable(auth.getID())));
    assertFalse(newGroup1.isDeclaredMember(auth));
    assertFalse(newGroup1.isDeclaredMember(userMgr.getAuthorizable(auth.getID())));
  }
  finally {
    if (newGroup1 != null) {
      newGroup1.remove();
      superuser.save();
    }
    if (newGroup2 != null) {
      newGroup2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMember() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalse(newGroup.isMember(auth));
    assertFalse(newGroup.removeMember(auth));
    superuser.save();
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertTrue(newGroup.isMember(auth));
    assertTrue(newGroup.isMember(userMgr.getAuthorizable(auth.getID())));
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMemberTwice() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertFalse(newGroup.addMember(auth));
    superuser.save();
    assertTrue(newGroup.isMember(auth));
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCyclicGroups2() throws AuthorizableExistsException, RepositoryException, NotExecutableException {
  Group group1=null;
  Group group2=null;
  Group group3=null;
  try {
    group1=userMgr.createGroup(createGroupId());
    group2=userMgr.createGroup(createGroupId());
    group3=userMgr.createGroup(createGroupId());
    assertTrue(group1.addMember(group2));
    assertTrue(group2.addMember(group3));
    assertFalse("Cyclic group membership must be detected.",group3.addMember(group1));
  }
 catch (  RepositoryException e) {
  }
 finally {
    if (group1 != null)     group1.remove();
    if (group2 != null)     group2.remove();
    if (group3 != null)     group3.remove();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCyclicGroups() throws AuthorizableExistsException, RepositoryException, NotExecutableException {
  Group group1=null;
  Group group2=null;
  Group group3=null;
  try {
    group1=userMgr.createGroup(createGroupId());
    group2=userMgr.createGroup(createGroupId());
    group3=userMgr.createGroup(createGroupId());
    assertTrue(group1.addMember(group2));
    superuser.save();
    assertTrue(group2.addMember(group3));
    superuser.save();
    assertFalse(group3.addMember(group1));
    superuser.save();
  }
  finally {
    if (group1 != null)     group1.remove();
    if (group2 != null)     group2.remove();
    if (group3 != null)     group3.remove();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeeplyNestedGroups() throws NotExecutableException, RepositoryException {
  Set<Group> groups=new HashSet<Group>();
  try {
    User auth=getTestUser(superuser);
    Group topGroup=userMgr.createGroup(createGroupId());
    Group bottomGroup=topGroup;
    for (int k=0; k < 100; k++) {
      Group g=userMgr.createGroup(createGroupId());
      groups.add(g);
      bottomGroup.addMember(g);
      bottomGroup=g;
    }
    bottomGroup.addMember(auth);
    for (    Group g : groups) {
      Iterator<Authorizable> declaredMembers=g.getDeclaredMembers();
      assertTrue(declaredMembers.hasNext());
      declaredMembers.next();
      assertFalse(declaredMembers.hasNext());
    }
    HashSet<Group> allGroups=new HashSet<Group>(groups);
    for (Iterator<Authorizable> it=topGroup.getMembers(); it.hasNext(); ) {
      Authorizable a=it.next();
      assertTrue(a.equals(auth) || allGroups.remove(a));
    }
    assertTrue(allGroups.isEmpty());
  }
  finally {
    for (    Group g : groups) {
      g.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIndirectMembers() throws NotExecutableException, RepositoryException {
  User user=getTestUser(superuser);
  Group newGroup=null;
  Group newGroup2=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    newGroup2=userMgr.createGroup(createGroupId());
    superuser.save();
    newGroup.addMember(newGroup2);
    superuser.save();
    assertTrue(newGroup.isMember(newGroup2));
    newGroup2.addMember(user);
    superuser.save();
    assertFalseIsMember(newGroup.getDeclaredMembers(),user);
    assertFalseMemberOfContainsGroup(user.declaredMemberOf(),newGroup);
    assertTrueIsMember(newGroup.getMembers(),user);
    assertTrueMemberOfContainsGroup(user.memberOf(),newGroup);
    assertFalse(newGroup.removeMember(user));
    superuser.save();
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(newGroup2);
      newGroup.remove();
      superuser.save();
    }
    if (newGroup2 != null) {
      newGroup2.removeMember(user);
      newGroup2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveGroupClearsMembership() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  String groupId;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    groupId=newGroup.getID();
    superuser.save();
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    boolean isMember=false;
    Iterator<Group> it=auth.declaredMemberOf();
    while (it.hasNext() && !isMember) {
      isMember=groupId.equals(it.next().getID());
    }
    assertTrue(isMember);
  }
  finally {
    if (newGroup != null) {
      newGroup.remove();
      superuser.save();
    }
  }
  Iterator<Group> it=auth.declaredMemberOf();
  while (it.hasNext()) {
    assertFalse(groupId.equals(it.next().getID()));
  }
  it=auth.memberOf();
  while (it.hasNext()) {
    assertFalse(groupId.equals(it.next().getID()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMemberModifiesGetMembers() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalseIsMember(newGroup.getMembers(),auth);
    assertFalseIsMember(newGroup.getDeclaredMembers(),auth);
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertTrueIsMember(newGroup.getMembers(),auth);
    assertTrueIsMember(newGroup.getDeclaredMembers(),auth);
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveGroupIfMemberExist() throws RepositoryException, NotExecutableException {
  User auth=getTestUser(superuser);
  String newGroupId=null;
  try {
    Group newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    newGroupId=newGroup.getID();
    assertTrue(newGroup.addMember(auth));
    newGroup.remove();
    superuser.save();
  }
  finally {
    Group gr=(Group)userMgr.getAuthorizable(newGroupId);
    if (gr != null) {
      gr.removeMember(auth);
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.ImpersonationTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testImpersonation() throws RepositoryException, NotExecutableException {
  Principal user2Principal=user2.getPrincipal();
  Subject subject=new Subject(true,Collections.singleton(user2Principal),Collections.emptySet(),Collections.emptySet());
  Impersonation impers=user.getImpersonation();
  assertFalse(impers.allows(subject));
  assertTrue(impers.grantImpersonation(user2Principal));
  assertFalse(impers.grantImpersonation(user2Principal));
  superuser.save();
  assertTrue(impers.allows(subject));
  assertTrue(impers.revokeImpersonation(user2Principal));
  assertFalse(impers.revokeImpersonation(user2Principal));
  superuser.save();
  assertFalse(impers.allows(subject));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAdminAsImpersonator() throws RepositoryException, NotExecutableException {
  String adminId=superuser.getUserID();
  Authorizable admin=userMgr.getAuthorizable(adminId);
  if (admin == null || admin.isGroup() || !((User)admin).isAdmin()) {
    throw new NotExecutableException(adminId + " is not administators ID");
  }
  Principal adminPrincipal=admin.getPrincipal();
  Impersonation impersonation=user.getImpersonation();
  assertFalse(impersonation.grantImpersonation(adminPrincipal));
  assertFalse(impersonation.revokeImpersonation(adminPrincipal));
  assertTrue(impersonation.allows(buildSubject(adminPrincipal)));
  Impersonation adminImpersonation=((User)admin).getImpersonation();
  assertFalse(adminImpersonation.grantImpersonation(adminPrincipal));
  assertFalse(adminImpersonation.revokeImpersonation(adminPrincipal));
  assertTrue(impersonation.allows(buildSubject(adminPrincipal)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.NestedGroupTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddGroupAsMember() throws NotExecutableException, RepositoryException {
  Group gr1=null;
  Group gr2=null;
  try {
    gr1=createGroup(getTestPrincipal());
    gr2=createGroup(getTestPrincipal());
    assertFalse(gr1.isMember(gr2));
    assertTrue(addMember(gr1,gr2));
    assertTrue(gr1.isMember(gr2));
  }
  finally {
    if (gr1 != null) {
      removeMember(gr1,gr2);
      removeGroup(gr1);
    }
    if (gr2 != null) {
      removeGroup(gr2);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritedMembership() throws NotExecutableException, RepositoryException {
  Group gr1=null;
  Group gr2=null;
  Group gr3=null;
  if (!(superuser instanceof JackrabbitSession)) {
    throw new NotExecutableException();
  }
  try {
    gr1=createGroup(getTestPrincipal());
    gr2=createGroup(getTestPrincipal());
    gr3=createGroup(getTestPrincipal());
    assertTrue(addMember(gr1,gr2));
    assertTrue(addMember(gr2,gr3));
    boolean isMember=false;
    PrincipalManager pmgr=((JackrabbitSession)superuser).getPrincipalManager();
    for (PrincipalIterator it=pmgr.getGroupMembership(gr3.getPrincipal()); it.hasNext() && !isMember; ) {
      isMember=it.nextPrincipal().equals(gr1.getPrincipal());
    }
    assertTrue(isMember);
  }
  finally {
    if (gr1 != null && gr1.isMember(gr2)) {
      removeMember(gr1,gr2);
    }
    if (gr2 != null && gr2.isMember(gr3)) {
      removeMember(gr2,gr3);
    }
    if (gr1 != null)     removeGroup(gr1);
    if (gr2 != null)     removeGroup(gr2);
    if (gr3 != null)     removeGroup(gr3);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.RefreshTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testAuthorizableGetProperty() throws RepositoryException {
  User user=null;
  try {
    String uid=createUserId();
    user=userMgr.createUser(uid,uid);
    superuser.save();
    Authorizable a=adminUserManager.getAuthorizable(uid);
    user.setProperty("prop",superuser.getValueFactory().createValue("val"));
    superuser.save();
    assertNotNull(a.getProperty("prop"));
  }
  finally {
    if (user != null) {
      user.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.RemappingTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuery() throws Exception {
  Iterator<Authorizable> result=getUserManager(session).findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.eq("@my:property",vf.createValue("value")));
    }
  }
);
  assertTrue(result.hasNext());
  assertEquals(user.getID(),result.next().getID());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable2() throws Exception {
  for (  String relPath : unmappedPaths) {
    user.setProperty(relPath,nameValue);
  }
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("my:property","my:value","my:node/my:property2","my:value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyNames2() throws Exception {
  Iterator it=authorizable.getPropertyNames("my:node");
  assertTrue(it.hasNext());
  assertEquals("my:property2",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable3() throws Exception {
  for (  String relPath : unmappedPaths) {
    user.setProperty(relPath,nameValue);
  }
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("my:property","my:value","my:node/my:property2","my:value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value,UserManager.SEARCH_TYPE_USER);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAuthorizablePath() throws Exception {
  assertTrue(user.getPath().startsWith(UserConstants.DEFAULT_USER_PATH));
  String path=authorizable.getPath();
  assertFalse(path.startsWith(UserConstants.DEFAULT_USER_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyNames() throws Exception {
  Iterator it=authorizable.getPropertyNames();
  assertTrue(it.hasNext());
  assertEquals("my:property",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperty() throws Exception {
  for (  String relPath : unmappedPaths) {
    user.setProperty(relPath,nameValue);
    user.setProperty(relPath,new Value[]{nameValue});
  }
  superuser.save();
  session.refresh(false);
  for (  String relPath : mappedPaths) {
    Value[] values=authorizable.getProperty(relPath);
    assertNotNull(values);
    assertEquals(1,values.length);
    if (PropertyType.STRING == values[0].getType()) {
      assertEquals("value",values[0].getString());
    }
 else {
      assertEquals("my:value",values[0].getString());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws Exception {
  user.setProperty("prop",superuser.getValueFactory().createValue(true));
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("prop","true","my:property","value","my:node/my:property2","value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.SystemUserImportTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUser() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertTrue(((User)newUser).isSystemUser());
  assertEquals("t",newUser.getPrincipal().getName());
  assertEquals("t",newUser.getID());
  assertTrue(((User)newUser).isDisabled());
  assertEquals("disabledUser",((User)newUser).getDisabledReason());
  Node n=s.getNode(newUser.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("t",n.getName());
  assertEquals("t",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  assertEquals("disabledUser",n.getProperty(UserConstants.REP_DISABLED).getString());
  assertFalse(n.hasProperty(UserConstants.REP_PASSWORD));
  s.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : constraintviolation is no longer detected during import
 * but only upon save.
 */
@Test public void testImportIntoNonSystemPath() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  Session s=getImportSession();
  Node target=s.getNode(USERPATH);
  doImport(USERPATH,xml);
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable user=getUserManager().getAuthorizable("t");
  assertNotNull(user);
  assertTrue(target.hasNode("t"));
  assertTrue(target.hasProperty("t/rep:principalName"));
  try {
    s.save();
    fail("Import must be incomplete. Saving changes must fail.");
  }
 catch (  ConstraintViolationException e) {
  }
 finally {
    s.refresh(false);
    if (target.hasNode("t")) {
      target.getNode("t").remove();
      target.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : importing User without password must succeed.
 */
@Test public void testUserWithoutPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable user=getUserManager().getAuthorizable("t");
  assertNotNull(user);
  assertFalse(user.isGroup());
  assertFalse(getImportSession().propertyExists(user.getPath() + "/rep:password"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Same as {@link #testImportUserWithIdDifferentFromNodeName} but with
 * different order of properties.
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUuidMismatch() throws Exception {
  String mismatchUUID="a358efa4-89f5-3062-b10d-d7316b65649e";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>" + mismatchUUID + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property></sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  assertTrue(target.hasNode("t"));
  Node n=target.getNode("t");
  assertEquals(mismatchUUID,n.getUUID());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNull(newUser);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportWithIntermediatePath() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"some\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d5433be9-68d0-4fba-bf96-efc29f461993</sv:value></sv:property>"+ "<sv:node sv:name=\"intermediate\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d87354a4-037e-4756-a8fb-deb2eb7c5149</sv:value></sv:property>"+ "<sv:node sv:name=\"path\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>24263272-b789-4568-957a-3bcaf99dbab3</sv:value></sv:property>"+ "<sv:node sv:name=\"t3\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0b8854ad-38f0-36c6-9807-928d28195609</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}4358694eeb098c6708ae914a10562ce722bbbc34</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t3</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t3");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t3",newUser.getPrincipal().getName());
  assertEquals("t3",newUser.getID());
  Node n=getImportSession().getNode(newUser.getPath());
  assertTrue(n.isNew());
  Node parent=n.getParent();
  assertFalse(n.isSame(target));
  assertTrue(parent.isNodeType(UserConstants.NT_REP_AUTHORIZABLE_FOLDER));
  assertFalse(parent.getDefinition().isProtected());
  assertTrue(target.hasNode("some"));
  assertTrue(target.hasNode("some/intermediate/path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : password property is not longer mandatory -> multivalued
 * property will just be ignored (instead of throwing ConstraintViolationException
 * upon save).
 */
@Test public void testMultiValuedPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertTrue(target.hasNode("t"));
  assertTrue(target.hasProperty("t/rep:password"));
  assertFalse(target.getProperty("t/rep:password").getDefinition().isProtected());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Node target=getTargetNode();
  assertFalse(target.hasProperty(UserConstants.REP_PASSWORD));
  Authorizable user=getUserManager().getAuthorizable("t");
  assertNotNull(user);
  assertFalse(user.isGroup());
  assertTrue(((User)user).isSystemUser());
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.SystemUserTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisable() throws Exception {
  user=createUser(uid);
  user.disable("gone");
  superuser.save();
  assertTrue(user.isDisabled());
  assertEquals("gone",user.getDisabledReason());
  user.disable(null);
  assertFalse(user.isDisabled());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws Exception {
  user=createUser(uid);
  Iterator<Authorizable> iterator=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,user.getPrincipal().getName());
  assertTrue(iterator.hasNext());
  Authorizable authorizable=iterator.next();
  assertNotNull(authorizable);
  assertFalse(authorizable.isGroup());
  assertTrue(((User)authorizable).isSystemUser());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws RepositoryException, NotExecutableException {
  user=createUser(uid);
  assertNotNull(user.getID());
  assertTrue(user.isSystemUser());
  assertFalse(user.isAdmin());
  assertFalse(user.isGroup());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByID() throws RepositoryException, NotExecutableException {
  user=createUser(uid);
  Authorizable authorizable=userMgr.getAuthorizable(user.getID());
  assertNotNull(authorizable);
  assertFalse(authorizable.isGroup());
  assertFalse(((User)authorizable).isAdmin());
  assertTrue(((User)authorizable).isSystemUser());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByPrincipal() throws Exception {
  user=createUser(uid);
  Authorizable authorizable=userMgr.getAuthorizable(user.getPrincipal());
  assertNotNull(authorizable);
  assertFalse(authorizable.isGroup());
  assertFalse(((User)authorizable).isAdmin());
  assertTrue(((User)authorizable).isSystemUser());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportCacheTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since Oak 1.3.4
 */
@Test public void testImportUserWithCache() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"y\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>41529076-9594-360e-ae48-5922904f345d</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>yPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"rep:cache\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>rep:Cache</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\"rep:expiration\" sv:type=\"Long\">"+ "         <sv:value>123456789</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\"rep:groupPrincipalNames\" sv:type=\"String\" sv:multiple=\"true\">"+ "         <sv:value>\"testGroup\"</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  getImportSession().save();
  Authorizable authorizable=getUserManager().getAuthorizable("y");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertFalse(userNode.hasNode("rep:cache"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportFromJackrabbit </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testImportCreatesAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(uid,newUser.getID());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed2() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",movedPath,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0022"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed3() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String originalPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  String expectedPath=Text.getRelativeParent(originalPath,1) + '/' + randomNodeName;
  assertEquals("user path",expectedPath,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",Text.getRelativeParent(initialPath,1) + '/' + uid,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,newUser.getID());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",getTargetPath() + '/' + uid,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,newUser.getID());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed3() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String originalPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  String expectedPath=getTargetPath() + '/' + randomNodeName;
  assertEquals("user path",expectedPath,newUser.getPath());
  assertFalse((Text.getRelativeParent(originalPath,1) + '/' + randomNodeName).equals(newUser.getPath()));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemove() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(getTargetPath(),Text.getRelativeParent(newUser.getPath(),1));
  assertFalse(initialPath.equals(newUser.getPath()));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed2() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",getTargetPath() + '/' + randomNodeName,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplace() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl("t"),getTargetPath() + "/foo/bar/test");
  String initialPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(initialPath,newUser.getPath());
  assertFalse(getTargetPath().equals(Text.getRelativeParent(newUser.getPath(),1)));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportHistoryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.3.3
 */
@Test public void testImportUserWithPwdHistory() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"y\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>41529076-9594-360e-ae48-5922904f345d</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>yPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"" + UserConstants.REP_PWD + "\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>"+ UserConstants.NT_REP_PASSWORD+ "</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\""+ UserConstants.REP_PWD_HISTORY+ "\" sv:type=\"String\" sv:multiple=\"true\">"+ "         <sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("y");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PWD_HISTORY));
  assertEquals("{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375",pwdNode.getProperty(UserConstants.REP_PWD_HISTORY).getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportIgnoreTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportInvalidImpersonationIgnore() throws Exception {
  List<String> invalid=new ArrayList<String>();
  invalid.add("anybody");
  invalid.add("administrators");
  invalid.add("t");
  for (  String principalName : invalid) {
    String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property><sv:property sv:name=\"rep:impersonators\" sv:type=\"String\"><sv:value>" + principalName + "</sv:value></sv:property>"+ "</sv:node>";
    Subject subj=new Subject();
    subj.getPrincipals().add(new PrincipalImpl(principalName));
    try {
      doImport(getTargetPath(),xml);
      Authorizable a=getUserManager().getAuthorizable("t");
      if (!a.isGroup()) {
        Impersonation imp=((User)a).getImpersonation();
        Subject s=new Subject();
        s.getPrincipals().add(new PrincipalImpl(principalName));
        assertFalse(imp.allows(s));
        for (PrincipalIterator it=imp.getImpersonators(); it.hasNext(); ) {
          assertFalse(principalName.equals(it.nextPrincipal().getName()));
        }
      }
 else {
        fail("Importing 't' didn't create a User.");
      }
    }
  finally {
      getImportSession().refresh(false);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportPwExpiryTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportExistingUserWithoutExpiryProperty() throws Exception {
  String uid="existing";
  User user=getUserManager().createUser(uid,uid);
  Session s=getImportSession();
  user.changePassword(uid);
  s.save();
  Node userNode=s.getNode(user.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>"+ uid+ "</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>"+ uid+ "Principal</sv:value>"+ "   </sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable(uid);
  userNode=s.getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportUserCreatesPasswordLastModified2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"x\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>9dd4e461-268c-3034-b5c8-564e155c67a6</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>xPrincipal</sv:value>"+ "   </sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("x");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.getDefinition().isProtected());
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  assertTrue(pwdNode.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getDefinition().isProtected());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportUserCreatesPasswordLastModified() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"x\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>9dd4e461-268c-3034-b5c8-564e155c67a6</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>xPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"" + UserConstants.REP_PWD + "\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>"+ UserConstants.NT_REP_PASSWORD+ "</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("x");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.getDefinition().isProtected());
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  assertTrue(pwdNode.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getDefinition().isProtected());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportUserWithPwdProperties() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"y\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>41529076-9594-360e-ae48-5922904f345d</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>yPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"" + UserConstants.REP_PWD + "\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>"+ UserConstants.NT_REP_PASSWORD+ "</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\""+ UserConstants.REP_PASSWORD_LAST_MODIFIED+ "\" sv:type=\"Long\">"+ "         <sv:value>1404036716000</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\"customProp\" sv:type=\"String\">"+ "         <sv:value>abc</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("y");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  assertEquals(1404036716000L,pwdNode.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getLong());
  assertTrue(pwdNode.hasProperty("customProp"));
  Property custom=pwdNode.getProperty("customProp");
  assertTrue(custom.getDefinition().isProtected());
  assertEquals("abc",custom.getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : password property is not longer mandatory -> multivalued
 * property will just be ignored (instead of throwing ConstraintViolationException
 * upon save).
 */
@Test public void testMultiValuedPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertTrue(target.hasNode("t"));
  assertTrue(target.hasProperty("t/rep:password"));
  assertFalse(target.getProperty("t/rep:password").getDefinition().isProtected());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUser() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getPrincipal().getName());
  assertEquals("t",newUser.getID());
  assertTrue(((User)newUser).isDisabled());
  assertEquals("disabledUser",((User)newUser).getDisabledReason());
  Node n=getImportSession().getNode(newUser.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("t",n.getName());
  assertEquals("t",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  assertEquals("{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375",n.getProperty(UserConstants.REP_PASSWORD).getString());
  assertEquals("disabledUser",n.getProperty(UserConstants.REP_DISABLED).getString());
  getImportSession().save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Same as {@link #testImportUserWithIdDifferentFromNodeName} but with
 * different order of properties.
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportAuthorizableId() throws Exception {
  String mismatchUUID="a358efa4-89f5-3062-b10d-d7316b65649e";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>" + mismatchUUID + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property></sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  assertTrue(target.hasNode("t"));
  Node n=target.getNode("t");
  assertEquals(mismatchUUID,n.getUUID());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNull(newUser);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportWithIntermediatePath() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"some\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d5433be9-68d0-4fba-bf96-efc29f461993</sv:value></sv:property>"+ "<sv:node sv:name=\"intermediate\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d87354a4-037e-4756-a8fb-deb2eb7c5149</sv:value></sv:property>"+ "<sv:node sv:name=\"path\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>24263272-b789-4568-957a-3bcaf99dbab3</sv:value></sv:property>"+ "<sv:node sv:name=\"t3\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0b8854ad-38f0-36c6-9807-928d28195609</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}4358694eeb098c6708ae914a10562ce722bbbc34</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t3</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t3");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t3",newUser.getPrincipal().getName());
  assertEquals("t3",newUser.getID());
  Node n=s.getNode(newUser.getPath());
  assertTrue(n.isNew());
  Node parent=n.getParent();
  assertFalse(n.isSame(target));
  assertTrue(parent.isNodeType(UserConstants.NT_REP_AUTHORIZABLE_FOLDER));
  assertFalse(parent.getDefinition().isProtected());
  assertTrue(target.hasNode("some"));
  assertTrue(target.hasNode("some/intermediate/path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : constraintviolation is no longer detected during import
 * but only upon save.
 */
@Test public void testImportGroupIntoUsersTree() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(target.hasNode("g"));
  assertTrue(target.hasProperty("g/rep:principalName"));
  try {
    getImportSession().save();
    fail("Import must be incomplete. Saving changes must fail.");
  }
 catch (  ConstraintViolationException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : importing User without password must succeed.
 */
@Test public void testUserWithoutPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable user=getUserManager().getAuthorizable("t");
  assertNotNull(user);
  assertFalse(user.isGroup());
  assertFalse(getImportSession().propertyExists(user.getPath() + "/rep:password"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPlainTextPassword() throws Exception {
  String plainPw="myPassword";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>" + plainPw + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Node n=getImportSession().getNode(newUser.getPath());
  String pwValue=n.getProperty(UserConstants.REP_PASSWORD).getString();
  assertFalse(plainPw.equals(pwValue));
  assertTrue(pwValue.toLowerCase().startsWith("{sha"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportWithActionsTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForSystemUser() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tSystemPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  assertTrue(((User)a).isSystemUser());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForUser2() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tPrincipal</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("tPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForUser() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("tPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForGroup() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.GROUP_PRIVILEGE_NAMES,new String[]{Privilege.JCR_READ}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>gPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(GROUPPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("g");
  assertNotNull(a);
  assertTrue(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("gPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserManagerTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizableByPath() throws RepositoryException, NotExecutableException {
  String uid=superuser.getUserID();
  Authorizable a=userMgr.getAuthorizable(uid);
  if (a == null) {
    throw new NotExecutableException();
  }
  try {
    String path=a.getPath();
    Authorizable a2=userMgr.getAuthorizableByPath(path);
    assertNotNull(a2);
    assertEquals(a.getID(),a2.getID());
  }
 catch (  UnsupportedRepositoryOperationException e) {
    throw new NotExecutableException();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizable() throws RepositoryException, NotExecutableException {
  String uid=createUserId();
  User user=null;
  try {
    user=userMgr.createUser(uid,uid);
    superuser.save();
    assertEquals(uid,user.getID());
    assertNotNull(userMgr.getAuthorizable(uid));
    assertEquals(user,userMgr.getAuthorizable(uid));
    assertNotNull(getNode(user,superuser));
  }
  finally {
    if (user != null) {
      user.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateUserPrincipalNameEqualsUserID() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw");
    superuser.save();
    String msg="User.getID() must return the userID pass to createUser.";
    assertEquals(msg,uid,u.getID());
    msg="Principal name must be the same as userID.";
    assertEquals(msg,uid,u.getPrincipal().getName());
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateGroupWithIdAndPrincipal() throws RepositoryException, NotExecutableException {
  Group gr=null;
  try {
    Principal p=getTestPrincipal();
    String uid=p.getName();
    gr=userMgr.createGroup(uid,p,null);
    superuser.save();
    assertEquals("Expect group with exact ID",uid,gr.getID());
    assertEquals("Expected group with exact principal name",p.getName(),gr.getPrincipal().getName());
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserIdDifferentFromPrincipalName() throws RepositoryException, NotExecutableException {
  User u=null;
  Session uSession=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    String msg="Creating a User with principal-name distinct from Principal-name must succeed as long as both are unique.";
    assertEquals(msg,u.getID(),uid);
    assertEquals(msg,p.getName(),u.getPrincipal().getName());
    assertFalse(msg,u.getID().equals(u.getPrincipal().getName()));
    uSession=superuser.getRepository().login(new SimpleCredentials(uid,"pw".toCharArray()));
    assertEquals(uid,uSession.getUserID());
  }
  finally {
    if (uSession != null) {
      uSession.logout();
    }
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNewAuthorizable() throws RepositoryException, NotExecutableException {
  String uid=createUserId();
  User user=null;
  try {
    user=userMgr.createUser(uid,uid);
    assertEquals(uid,user.getID());
    assertNotNull(userMgr.getAuthorizable(uid));
    assertEquals(user,userMgr.getAuthorizable(uid));
    assertNotNull(getNode(user,superuser));
  }
  finally {
    if (user != null) {
      user.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupIdDifferentFromPrincipalName() throws RepositoryException, NotExecutableException {
  Group g=null;
  try {
    Principal p=getTestPrincipal();
    g=userMgr.createGroup("testGroup",p,null);
    superuser.save();
    String msg="Creating a Group with principal-name distinct from Principal-name must succeed as long as both are unique.";
    assertEquals(msg,g.getID(),"testGroup");
    assertEquals(msg,p.getName(),g.getPrincipal().getName());
    assertFalse(msg,g.getID().equals(g.getPrincipal().getName()));
  }
  finally {
    if (g != null) {
      g.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserQueryTest </h4><pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyLike() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.like("profile/@food","m%"));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] food=user.getProperty("profile/food");
        if (food == null || food.length != 1) {
          return false;
        }
 else {
          String value=food[0].getString();
          return value.startsWith("m");
        }
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameMatch() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("a%"));
    }
  }
);
  Iterator<Authorizable> expected=Iterators.filter(authorizables.iterator(),new Predicate<Authorizable>(){
    public boolean apply(    Authorizable authorizable){
      try {
        String name=authorizable.getID();
        Principal principal=authorizable.getPrincipal();
        return name.startsWith("a") || principal != null && principal.getName().startsWith("a");
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyExistence() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@poisonous"));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] poisonous=user.getProperty("poisonous");
        return poisonous != null && poisonous.length == 1;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains3() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.contains("profile/.","grass"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(kangaroo);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-19 type-4 type-8 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetBound() throws RepositoryException {
  List<User> sortedUsers=new ArrayList<User>(users);
  sortedUsers.removeAll(systemDefined);
  Comparator<? super User> comp=new Comparator<User>(){
    public int compare(    User user1,    User user2){
      try {
        Value[] weight1=user1.getProperty("profile/weight");
        assertNotNull(weight1);
        assertEquals(1,weight1.length);
        Value[] weight2=user2.getProperty("profile/weight");
        assertNotNull(weight2);
        assertEquals(1,weight2.length);
        return weight1[0].getDouble() < weight2[0].getDouble() ? -1 : 1;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
        return 0;
      }
    }
  }
;
  Collections.sort(sortedUsers,comp);
  long[] counts={4,0,100000};
  for (  final long count : counts) {
    Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setCondition(builder.eq("profile/@cute",vf.createValue(true)));
        builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING,false);
        builder.setLimit(vf.createValue(1000.0),count);
      }
    }
);
    Iterator<User> expected=Iterators.filter(sortedUsers.iterator(),new Predicate<User>(){
      public boolean apply(      User user){
        try {
          Value[] cute=user.getProperty("profile/cute");
          Value[] weight=user.getProperty("profile/weight");
          return cute != null && cute.length == 1 && cute[0].getBoolean() && weight != null && weight.length == 1 && weight[0].getDouble() > 1000.0;
        }
 catch (        RepositoryException e) {
          fail(e.getMessage());
        }
        return false;
      }
    }
);
    assertSame(expected,result,count);
    assertFalse(result.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCondition1() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.and(builder.eq("profile/@cute",vf.createValue(true)),builder.not(builder.eq("@color",vf.createValue("black")))));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] cute=user.getProperty("profile/cute");
        Value[] black=user.getProperty("color");
        return cute != null && cute.length == 1 && cute[0].getBoolean() && !(black != null && black.length == 1 && black[0].getString().equals("black"));
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderRespectCaseAscendingDoubleValue() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("profile/@weight"));
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING,false);
    }
  }
);
  assertTrue(result.hasNext());
  double prev=Double.MIN_VALUE;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] weight=authorizable.getProperty("profile/weight");
    assertNotNull(weight);
    assertEquals(1,weight.length);
    assertTrue(prev <= weight[0].getDouble());
    prev=weight[0].getDouble();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxCountWithScope() throws Exception {
  final long count=Long.MAX_VALUE;
  final long countjr2=-1;
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setScope("vertebrates",false);
      builder.setLimit(0,countjr2);
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setScope("vertebrates",false);
      builder.setLimit(0,count);
    }
  }
);
  assertSame(expected,result,count);
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2266">OAK-2266</a>
 */
@Test public void testSortOrderIgnoreCaseAscending() throws Exception {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@continent"));
      builder.setSortOrder("@continent",QueryBuilder.Direction.ASCENDING,true);
    }
  }
);
  Iterator<String> continents=ImmutableList.of("africa","america","australia").iterator();
  String expected=continents.next();
  while (result.hasNext()) {
    Authorizable a=result.next();
    String continent=a.getProperty("continent")[0].getString().toLowerCase();
    if (!continent.equals(expected)) {
      expected=continents.next();
      assertEquals(expected,continent);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * The name matching condition must not only search for node-name and
 * principal name but also needs to take the new rep:authoriableId into
 * account that has been introduced as of Oak 1.0
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2243">OAK-2243</a>
 */
@Test public void testNameMatch2() throws RepositoryException {
  User user=userMgr.createUser("moloch",null,new PrincipalImpl("MolochHorridus"),"reptiles");
  String userPath=user.getPath();
  superuser.move(userPath,Text.getRelativeParent(userPath,1) + "/thorny_dragon");
  superuser.save();
  authorizables.add(user);
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("moloch"));
    }
  }
);
  assertTrue(result.hasNext());
  Authorizable a=result.next();
  assertEquals("moloch",a.getID());
  assertFalse(result.hasNext());
  result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("MolochHorridus"));
    }
  }
);
  assertTrue(result.hasNext());
  a=result.next();
  assertEquals("MolochHorridus",a.getPrincipal().getName());
  assertFalse(result.hasNext());
  result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("thorny_dragon"));
    }
  }
);
  assertTrue(result.hasNext());
  a=result.next();
  assertEquals("thorny_dragon",Text.getName(a.getPath()));
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains4() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.contains("profile/@food","grass"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(kangaroo);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testQueryUserWithSpecialCharId() throws Exception {
  List<String> ids=Lists.newArrayList("'","]");
  for (  String id : ids) {
    User user=null;
    try {
      user=userMgr.createUser(id,"pw");
      superuser.save();
      boolean found=false;
      String query="{\"condition\":[{\"named\":\"" + id + "\"}]}";
      AuthorizableQueryManager queryManager=new AuthorizableQueryManager(userMgr,superuser.getValueFactory());
      Iterator<Authorizable> it=queryManager.execute(query);
      while (it.hasNext() && !found) {
        Authorizable a=it.next();
        found=id.equals(a.getID());
      }
      assertTrue(found);
    }
  finally {
      if (user != null) {
        user.remove();
        superuser.save();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOffset() throws RepositoryException {
  long[] offsets={2,0,3,0,100000};
  long[] counts={4,4,0,100000,100000};
  for (int k=0; k < offsets.length; k++) {
    final long offset=offsets[k];
    final long count=counts[k];
    Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
        builder.setLimit(offset,count);
      }
    }
);
    Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      }
    }
);
    skip(expected,offset);
    assertSame(expected,result,count);
    assertFalse(result.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAdminImpersonation() throws Exception {
  final String adminPrincipalName=userMgr.getAuthorizable(superuser.getUserID()).getPrincipal().getName();
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.impersonates(adminPrincipalName));
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
  assertTrue(result.hasNext());
  assertSameElements(expected,result);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindProperty3() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.eq("@numberOfLegs",vf.createValue(8)));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] numberOfLegs=user.getProperty("numberOfLegs");
        return numberOfLegs != null && numberOfLegs.length == 1 && numberOfLegs[0].getLong() == 8;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2266">OAK-2266</a>
 */
@Test() public void testSortOrderRespectCaseAscending() throws Exception {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@continent"));
      builder.setSortOrder("@continent",QueryBuilder.Direction.ASCENDING,false);
    }
  }
);
  Iterator<String> continents=ImmutableList.of("Africa","America","africa","australia").iterator();
  String expected=continents.next();
  while (result.hasNext()) {
    Authorizable a=result.next();
    String continent=a.getProperty("continent")[0].getString();
    if (!continent.equals(expected)) {
      expected=continents.next();
      assertEquals(expected,continent);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testScopeWithMax() throws RepositoryException {
  final int offset=0;
  final int count=22;
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setScope("vertebrates",false);
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setLimit(offset,count);
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setScope("vertebrates",false);
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
    }
  }
);
  assertSameElements(expected,result);
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains1() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.contains(".","gold"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(goldenToad);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindProperty2() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.gt("profile/@weight",vf.createValue(2000.0)));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] weight=user.getProperty("profile/weight");
        return weight != null && weight.length == 1 && weight[0].getDouble() > 2000.0;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains2() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.contains("@color","gold"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(goldenToad);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScopeWithOffset() throws RepositoryException {
  final int offset=5;
  final int count=10000;
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setScope("vertebrates",false);
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setLimit(offset,count);
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setScope("vertebrates",false);
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
    }
  }
);
  skip(expected,offset);
  assertSame(expected,result,count);
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCondition2() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.or(builder.eq("profile/@food",vf.createValue("mice")),builder.eq("profile/@food",vf.createValue("nectar"))));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] food=user.getProperty("profile/food");
        return food != null && food.length == 1 && (food[0].getString().equals("mice") || food[0].getString().equals("nectar"));
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindProperty1() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.eq("@canFly",vf.createValue(true)));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] canFly=user.getProperty("canFly");
        return canFly != null && canFly.length == 1 && canFly[0].getBoolean();
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderIgnoreCaseDescending() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@color"));
      builder.setSortOrder("@color",QueryBuilder.Direction.DESCENDING,true);
    }
  }
);
  assertTrue(result.hasNext());
  String prev=null;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] color=authorizable.getProperty("color");
    assertNotNull(color);
    assertEquals(1,color.length);
    assertTrue(prev == null || prev.compareToIgnoreCase(color[0].getString()) >= 0);
    prev=color[0].getString();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxCount() throws Exception {
  final long count=Long.MAX_VALUE;
  final long countjr2=-1;
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setLimit(0,countjr2);
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setLimit(0,count);
    }
  }
);
  assertSame(expected,result,count);
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderRespectCaseDescending() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@color"));
      builder.setSortOrder("@color",QueryBuilder.Direction.DESCENDING,false);
    }
  }
);
  assertTrue(result.hasNext());
  String prev=null;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] color=authorizable.getProperty("color");
    assertNotNull(color);
    assertEquals(1,color.length);
    assertTrue(prev == null || prev.compareTo(color[0].getString()) >= 0);
    prev=color[0].getString();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testImpersonation() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.impersonates("jackrabbit"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(elephant);
  assertTrue(result.hasNext());
  assertSameElements(expected,result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.version.HiddenNodeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenChildNode() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addMixin("mix:versionable");
  test.addNode("child");
  session.save();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder testBuilder=builder.getChildNode("test").getChildNode("child");
  testBuilder.child(":hidden").setProperty("property","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode("jcr:frozenNode").getChildNode("child");
  assertTrue(state.exists());
  assertFalse(state.hasChildNode(":hidden"));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test").getChildNode("child");
  assertFalse(state.hasChildNode(":hidden"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenChildProperty() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addMixin("mix:versionable");
  test.addNode("child");
  session.save();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder testBuilder=builder.getChildNode("test").getChildNode("child");
  testBuilder.setProperty(":hiddenProperty","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode(VersionConstants.JCR_FROZENNODE).getChildNode("child");
  assertTrue(state.exists());
  assertFalse(state.hasProperty(":hiddenProperty"));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test").getChildNode("child");
  assertFalse(state.hasProperty(":hiddenProperty"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenProperty() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addMixin("mix:versionable");
  session.save();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder testBuilder=builder.getChildNode("test");
  testBuilder.setProperty(":hiddenProperty","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode(VersionConstants.JCR_FROZENNODE);
  assertTrue(state.exists());
  assertFalse(state.hasProperty(":hiddenProperty"));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test");
  assertFalse(state.hasProperty(":hiddenProperty"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenChildOrderProperty() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  Node child=test.addNode("child");
  child.addNode("a");
  child.addNode("b");
  child.addNode("c");
  test.addMixin("mix:versionable");
  session.save();
  NodeBuilder testBuilder=store.getRoot().builder().getChildNode("test").getChildNode("child");
  assertTrue(testBuilder.hasProperty(TreeConstants.OAK_CHILD_ORDER));
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode(VersionConstants.JCR_FROZENNODE).getChildNode("child");
  assertTrue(state.exists());
  assertTrue(state.hasProperty(TreeConstants.OAK_CHILD_ORDER));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test").getChildNode("child");
  assertTrue(state.hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenTree() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addMixin("mix:versionable");
  session.save();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child(":hidden").setProperty("property","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode("jcr:frozenNode");
  assertTrue(state.exists());
  assertFalse(state.hasChildNode(":hidden"));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test");
  assertTrue(state.hasChildNode(":hidden"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenOrderProperty() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addNode("a");
  test.addNode("b");
  test.addNode("c");
  test.addMixin("mix:versionable");
  session.save();
  NodeBuilder testBuilder=store.getRoot().builder().getChildNode("test");
  assertTrue(testBuilder.hasProperty(TreeConstants.OAK_CHILD_ORDER));
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode(VersionConstants.JCR_FROZENNODE);
  assertTrue(state.exists());
  assertTrue(state.hasProperty(TreeConstants.OAK_CHILD_ORDER));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test");
  assertTrue(state.hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.json.JsopDiffTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPropertyChanges(){
  JsopDiff diff;
  PropertyState before=StringPropertyState.stringProperty("foo","bar");
  diff=new JsopDiff();
  diff.propertyAdded(before);
  assertEquals("^\"/foo\":\"bar\"",diff.toString());
  diff=new JsopDiff();
  diff.propertyChanged(before,LongPropertyState.createLongProperty("foo",123L));
  assertEquals("^\"/foo\":123",diff.toString());
  diff=new JsopDiff();
  diff.propertyChanged(before,DoublePropertyState.doubleProperty("foo",1.23));
  assertEquals("^\"/foo\":1.23",diff.toString());
  diff=new JsopDiff();
  diff.propertyChanged(before,BooleanPropertyState.booleanProperty("foo",true));
  assertEquals("^\"/foo\":true",diff.toString());
  diff=new JsopDiff();
  diff.propertyDeleted(before);
  assertEquals("^\"/foo\":null",diff.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNodeChanges(){
  JsopDiff diff;
  NodeState before=EMPTY_NODE;
  NodeBuilder builder=before.builder();
  builder.setProperty("a",1L);
  builder.child("x");
  NodeState after=builder.getNodeState();
  diff=new JsopDiff();
  diff.childNodeAdded("test",before);
  assertEquals("+\"/test\":{}",diff.toString());
  diff=new JsopDiff();
  diff.childNodeChanged("test",before,after);
  assertEquals("^\"/test/a\":1+\"/test/x\":{}",diff.toString());
  diff=new JsopDiff();
  diff.childNodeDeleted("test",after);
  assertEquals("-\"/test\"",diff.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.management.ManagementOperationTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void running() throws InterruptedException {
  final LinkedBlockingDeque<Thread> thread=new LinkedBlockingDeque<Thread>(1);
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      thread.add(currentThread());
      sleep(100000);
      return null;
    }
  }
);
  executor.execute(op);
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(RUNNING,status.getCode());
  thread.poll(5,SECONDS).interrupt();
  try {
    op.get();
    fail("Expected InterruptedException");
  }
 catch (  ExecutionException e) {
    assertTrue(e.getCause() instanceof InterruptedException);
  }
  assertTrue(op.isDone());
  status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertTrue(status.getMessage().contains("test failed: "));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void succeeded() throws InterruptedException, ExecutionException, TimeoutException {
  ManagementOperation<Long> op=newManagementOperation("test",new Callable<Long>(){
    @Override public Long call() throws Exception {
      return 42L;
    }
  }
);
  executor.execute(op);
  assertEquals(42L,(long)op.get(5,SECONDS));
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(SUCCEEDED,status.getCode());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalStateException.class) public void notStarted() throws ExecutionException, InterruptedException {
  ManagementOperation<Integer> op=ManagementOperation.done("test",42);
  assertTrue(op.isDone());
  assertEquals(42,(int)op.get());
  sameThreadExecutor().execute(op);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void failed() throws InterruptedException, TimeoutException {
  final Exception failure=new Exception("fail");
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      throw failure;
    }
  }
);
  executor.execute(op);
  try {
    assertEquals(null,op.get(5,SECONDS));
    fail("Expected " + failure);
  }
 catch (  ExecutionException e) {
    assertEquals(failure,e.getCause());
  }
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertEquals("test failed: " + failure.getMessage(),status.getMessage());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cancelled(){
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      return null;
    }
  }
);
  op.cancel(false);
  executor.execute(op);
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertEquals("test cancelled",status.getMessage());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.namepath.GlobalNameMapperTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleNames() throws RepositoryException {
  List<String> simpleNames=new ArrayList<String>();
  simpleNames.add("foo");
  simpleNames.add(" foo ");
  simpleNames.add("foo.bar");
  simpleNames.add(".");
  simpleNames.add("..");
  simpleNames.add("/");
  simpleNames.add(" ");
  for (  String name : simpleNames) {
    assertEquals(name,mapper.getOakNameOrNull(name));
    assertEquals(name,mapper.getOakName(name));
    assertEquals(name,mapper.getJcrName(name));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyName() throws RepositoryException {
  assertEquals("",mapper.getJcrName(""));
  assertEquals("",mapper.getOakNameOrNull(""));
  assertEquals("",mapper.getOakName(""));
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpandedNames() throws RepositoryException {
  Map<String,String> jcrToOak=new HashMap<String,String>();
  jcrToOak.put("{}foo","foo");
  jcrToOak.put("{foo","{foo");
  jcrToOak.put("{foo}","{foo}");
  jcrToOak.put("{0} foo","{0} foo");
  jcrToOak.put("{","{");
  jcrToOak.put("{http://www.jcp.org/jcr/nt/1.0}base","nt:base");
  jcrToOak.put("{http://www.example.com/foo}bar","foo:bar");
  jcrToOak.put("{http://www.example.com/quu}bar","quu:bar");
  for (  String jcrName : jcrToOak.keySet()) {
    assertEquals(jcrToOak.get(jcrName),mapper.getOakNameOrNull(jcrName));
    assertEquals(jcrToOak.get(jcrName),mapper.getOakName(jcrName));
  }
  assertNull(mapper.getOakNameOrNull("{http://www.example.com/bar}bar"));
  try {
    mapper.getOakName("{http://www.example.com/bar}bar");
    fail("RepositoryException expected");
  }
 catch (  RepositoryException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrefixedNames() throws RepositoryException {
  List<String> prefixed=new ArrayList<String>();
  prefixed.add("nt:base");
  prefixed.add("foo: bar");
  prefixed.add("quu:bar ");
  prefixed.add("unknown:bar");
  for (  String name : prefixed) {
    assertEquals(name,mapper.getOakNameOrNull(name));
    assertEquals(name,mapper.getOakName(name));
    assertEquals(name,mapper.getJcrName(name));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.namepath.NamePathMapperImplTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyName() throws RepositoryException {
  assertEquals("",npMapper.getJcrName(""));
  assertEquals("",npMapper.getOakNameOrNull(""));
  assertEquals("",npMapper.getOakName(""));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJcrToOakKeepIndexNoRemap(){
  NameMapper mapper=new GlobalNameMapper(GLOBAL);
  NamePathMapper npMapper=new NamePathMapperImpl(mapper);
  assertEquals("/",npMapper.getOakPath("/"));
  assertEquals("/foo:bar",npMapper.getOakPath("/foo:bar"));
  assertEquals("/foo:bar/quu:qux",npMapper.getOakPath("/foo:bar/quu:qux"));
  assertEquals("foo:bar",npMapper.getOakPath("foo:bar"));
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOakToJcr(){
  assertEquals("/foo:bar",npMapper.getJcrPath("/oak-foo:bar"));
  assertEquals("/foo:bar/quu:qux",npMapper.getJcrPath("/oak-foo:bar/oak-quu:qux"));
  assertEquals("foo:bar",npMapper.getJcrPath("oak-foo:bar"));
  assertEquals(".",npMapper.getJcrPath(""));
  try {
    npMapper.getJcrPath("{http://www.jcp.org/jcr/nt/1.0}unstructured");
    fail("expanded name should not be accepted");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    npMapper.getJcrPath("foobar/{http://www.jcp.org/jcr/1.0}content");
    fail("expanded name should not be accepted");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJcrToOak(){
  assertEquals("/",npMapper.getOakPath("/"));
  assertEquals("foo",npMapper.getOakPath("{}foo"));
  assertEquals("/oak-foo:bar",npMapper.getOakPath("/foo:bar"));
  assertEquals("/oak-foo:bar/oak-quu:qux",npMapper.getOakPath("/foo:bar/quu:qux"));
  assertEquals("oak-foo:bar",npMapper.getOakPath("foo:bar"));
  assertEquals("oak-nt:unstructured",npMapper.getOakPath("{http://www.jcp.org/jcr/nt/1.0}unstructured"));
  assertEquals("foobar/oak-jcr:content",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("foobar",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/.."));
  assertEquals("",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/../.."));
  assertEquals("..",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/../../.."));
  assertEquals("../..",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/../../../.."));
  assertEquals("oak-jcr:content",npMapper.getOakPath("foobar/../{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("../oak-jcr:content",npMapper.getOakPath("foobar/../../{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("..",npMapper.getOakPath(".."));
  assertEquals("",npMapper.getOakPath("."));
  assertEquals("foobar/oak-jcr:content",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/."));
  assertEquals("foobar/oak-jcr:content",npMapper.getOakPath("foobar/{http://www.jcp.org/jcr/1.0}content/./."));
  assertEquals("foobar/oak-jcr:content",npMapper.getOakPath("foobar/./{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("oak-jcr:content",npMapper.getOakPath("foobar/./../{http://www.jcp.org/jcr/1.0}content"));
  assertEquals("/a/b/c",npMapper.getOakPath("/a/b[1]/c[01]"));
  assertEquals("/a/b[2]/c[3]",npMapper.getOakPath("/a[1]/b[2]/c[03]"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTrailingSlash(){
  assertEquals("/oak-foo:bar/oak-quu:qux",npMapper.getOakPath("/foo:bar/quu:qux/"));
  assertEquals("/a/b/c",npMapper.getOakPath("/a/b/c/"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.atomic.AtomicCounterEditorTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void checkRevision(){
  NodeBuilder b=EMPTY_NODE.builder();
  PropertyState r=LongPropertyState.createLongProperty("r",10L);
  assertTrue(AtomicCounterEditor.checkRevision(b,null));
  assertFalse(AtomicCounterEditor.checkRevision(b,r));
  b.setProperty(LongPropertyState.createLongProperty(r.getName(),1L));
  assertFalse(AtomicCounterEditor.checkRevision(b,r));
  b.setProperty(LongPropertyState.createLongProperty(r.getName(),10L));
  assertTrue(AtomicCounterEditor.checkRevision(b,r));
  b.setProperty(LongPropertyState.createLongProperty(r.getName(),20L));
  assertTrue(AtomicCounterEditor.checkRevision(b,r));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noHookInWhiteboard() throws CommitFailedException, InterruptedException, ExecutionException {
  NodeStore store=new MemoryNodeStore();
  MyExecutor exec1=new MyExecutor();
  Whiteboard board=new DefaultWhiteboard();
  EditorHook hook1=new EditorHook(new TestableACEProvider(CLUSTER_1,exec1,store,board));
  NodeBuilder builder, root;
  PropertyState p;
  root=store.getRoot().builder();
  builder=root.child("c");
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  store.merge(root,hook1,CommitInfo.EMPTY);
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue(builder.exists());
  p=builder.getProperty(PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PROP_COUNTER);
  assertEquals(1,p.getValue(LONG).longValue());
  assertTrue("without a registered hook it should have fell to sync",exec1.isEmpty());
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue("the counter node should exists",builder.exists());
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId(),PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId()),1);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleNodeAsync() throws CommitFailedException, InterruptedException, ExecutionException {
  NodeStore store=new MemoryNodeStore();
  MyExecutor exec1=new MyExecutor();
  Whiteboard board=new DefaultWhiteboard();
  EditorHook hook1=new EditorHook(new TestableACEProvider(CLUSTER_1,exec1,store,board));
  NodeBuilder builder, root;
  PropertyState p;
  board.register(CommitHook.class,EmptyHook.INSTANCE,null);
  root=store.getRoot().builder();
  builder=root.child("c");
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  store.merge(root,hook1,CommitInfo.EMPTY);
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue(builder.exists());
  p=builder.getProperty(PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PROP_COUNTER);
  assertNull(p);
  exec1.execute();
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue("the counter node should exists",builder.exists());
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId(),PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId()),1);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isConsolidate(){
  NodeBuilder b=EMPTY_NODE.builder();
  PropertyState counter, hidden1, hidden2;
  String hidden1Name=PREFIX_PROP_COUNTER + "1";
  String hidden2Name=PREFIX_PROP_COUNTER + "2";
  assertFalse(AtomicCounterEditor.isConsolidate(b));
  counter=LongPropertyState.createLongProperty(PROP_COUNTER,0);
  hidden1=LongPropertyState.createLongProperty(hidden1Name,1);
  b.setProperty(counter);
  b.setProperty(hidden1);
  assertTrue(AtomicCounterEditor.isConsolidate(b));
  counter=LongPropertyState.createLongProperty(PROP_COUNTER,1);
  hidden1=LongPropertyState.createLongProperty(hidden1Name,1);
  hidden2=LongPropertyState.createLongProperty(hidden2Name,1);
  b.setProperty(counter);
  b.setProperty(hidden1);
  b.setProperty(hidden2);
  assertTrue(AtomicCounterEditor.isConsolidate(b));
  counter=LongPropertyState.createLongProperty(PROP_COUNTER,2);
  hidden1=LongPropertyState.createLongProperty(hidden1Name,1);
  hidden2=LongPropertyState.createLongProperty(hidden2Name,1);
  b.setProperty(counter);
  b.setProperty(hidden1);
  b.setProperty(hidden2);
  assertFalse(AtomicCounterEditor.isConsolidate(b));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * covers the revision increments aspect
 * @throws CommitFailedException 
 */
@Test public void revisionIncrements() throws CommitFailedException {
  NodeBuilder builder;
  NodeState before, after;
  PropertyState rev;
  builder=EMPTY_NODE.builder();
  before=builder.getNodeState();
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  after=builder.getNodeState();
  builder=HOOK_1_SYNC.processCommit(before,after,EMPTY).builder();
  rev=builder.getProperty(PREFIX_PROP_REVISION + "1");
  assertNotNull(rev);
  assertEquals(1,rev.getValue(LONG).longValue());
  before=builder.getNodeState();
  builder=incrementBy(builder,INCREMENT_BY_2);
  after=builder.getNodeState();
  builder=HOOK_1_SYNC.processCommit(before,after,EMPTY).builder();
  rev=builder.getProperty(PREFIX_PROP_REVISION + "1");
  assertNotNull(rev);
  assertEquals(2,rev.getValue(LONG).longValue());
  before=builder.getNodeState();
  builder=incrementBy(builder,INCREMENT_BY_1);
  after=builder.getNodeState();
  builder=HOOK_2_SYNC.processCommit(before,after,EMPTY).builder();
  rev=builder.getProperty(PREFIX_PROP_REVISION + "1");
  assertNotNull(rev);
  assertEquals(2,rev.getValue(LONG).longValue());
  rev=builder.getProperty(PREFIX_PROP_REVISION + "2");
  assertNotNull(rev);
  assertEquals(1,rev.getValue(LONG).longValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.BlobStoreStatsTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void download() throws Exception {
  stats.downloaded("foo",103,TimeUnit.SECONDS,1079);
  assertEquals(103,stats.getDownloadTotalSeconds());
  assertEquals(1079,stats.getDownloadTotalSize());
  assertEquals(0,stats.getDownloadCount());
  stats.downloadCompleted("foo");
  assertEquals(1,stats.getDownloadCount());
  stats.downloaded("foo",53,TimeUnit.SECONDS,47);
  assertEquals(103 + 53,stats.getDownloadTotalSeconds());
  assertEquals(1079 + 47,stats.getDownloadTotalSize());
  stats.downloadCompleted("foo");
  assertEquals(2,stats.getDownloadCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void upload() throws Exception {
  stats.uploaded(103,TimeUnit.SECONDS,1079);
  assertEquals(103,stats.getUploadTotalSeconds());
  assertEquals(1079,stats.getUploadTotalSize());
  assertEquals(0,stats.getUploadCount());
  stats.uploadCompleted("foo");
  assertEquals(1,stats.getUploadCount());
  stats.uploaded(53,TimeUnit.SECONDS,47);
  assertEquals(103 + 53,stats.getUploadTotalSeconds());
  assertEquals(1079 + 47,stats.getUploadTotalSize());
  stats.uploadCompleted("foo");
  assertEquals(2,stats.getUploadCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.ClusterRepositoryInfoTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkChangeId() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ds1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(1).getNodeStore();
  String repoId1=ClusterRepositoryInfo.createId(ds1,null);
  ds1.runBackgroundOperations();
  ClusterRepositoryInfo.createId(ds1,"xxxxxxxx");
  String id=ClusterRepositoryInfo.getId(ds1);
  Assert.assertNotNull(id);
  Assert.assertEquals(id,"xxxxxxxx");
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void checkGetIdWhenNotRegistered(){
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ds1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(1).getNodeStore();
  String id=ClusterRepositoryInfo.getId(ds1);
  Assert.assertNull(id);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void differentCluster() throws Exception {
  DocumentNodeStore ds1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(new MemoryDocumentStore()).setBlobStore(blobStore).getNodeStore();
  String repoId1=ClusterRepositoryInfo.createId(ds1);
  DocumentNodeStore ds2=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(new MemoryDocumentStore()).setBlobStore(blobStore).getNodeStore();
  String repoId2=ClusterRepositoryInfo.createId(ds2);
  Assert.assertNotSame(repoId1,repoId2);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void sameCluster() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ds1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(1).setBlobStore(blobStore).getNodeStore();
  String repoId1=ClusterRepositoryInfo.createId(ds1);
  ds1.runBackgroundOperations();
  DocumentNodeStore ds2=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(2).setBlobStore(blobStore).getNodeStore();
  String repoId2=ClusterRepositoryInfo.createId(ds2);
  Assert.assertEquals(repoId1,repoId2);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkCustomId() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ds1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(store).setClusterId(1).getNodeStore();
  String repoId1=ClusterRepositoryInfo.createId(ds1,"yyyyyyy");
  ds1.runBackgroundOperations();
  String id=ClusterRepositoryInfo.getId(ds1);
  Assert.assertEquals(id,"yyyyyyy");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.SharedDataStoreUtilsTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  dataStore=DataStoreUtils.getBlobStore();
  String repoId1=UUID.randomUUID().toString();
  String repoId2=UUID.randomUUID().toString();
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REPOSITORY.getNameFromId(repoId1));
  DataRecord repo1=dataStore.getMetadataRecord(SharedStoreRecordType.REPOSITORY.getNameFromId(repoId1));
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REPOSITORY.getNameFromId(repoId2));
  DataRecord repo2=dataStore.getMetadataRecord(SharedStoreRecordType.REPOSITORY.getNameFromId(repoId2));
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.MARKED_START_MARKER.getNameFromId(repoId1));
  DataRecord markerRec1=dataStore.getMetadataRecord(SharedStoreRecordType.MARKED_START_MARKER.getNameFromId(repoId1));
  Assert.assertEquals(SharedStoreRecordType.MARKED_START_MARKER.getIdFromName(markerRec1.getIdentifier().toString()),repoId1);
  long lastModifiedMarkerRec1=markerRec1.getLastModified();
  TimeUnit.MILLISECONDS.sleep(100);
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REFERENCES.getNameFromId(repoId1));
  DataRecord rec1=dataStore.getMetadataRecord(SharedStoreRecordType.REFERENCES.getNameFromId(repoId1));
  long lastModifiedRec1=rec1.getLastModified();
  TimeUnit.MILLISECONDS.sleep(25);
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REFERENCES.getNameFromId(repoId2));
  DataRecord rec2=dataStore.getMetadataRecord(SharedStoreRecordType.REFERENCES.getNameFromId(repoId2));
  long lastModifiedRec2=rec2.getLastModified();
  Assert.assertEquals(SharedStoreRecordType.REPOSITORY.getIdFromName(repo1.getIdentifier().toString()),repoId1);
  Assert.assertEquals(SharedStoreRecordType.REPOSITORY.getIdFromName(repo2.getIdentifier().toString()),repoId2);
  Assert.assertEquals(SharedStoreRecordType.REFERENCES.getIdFromName(rec1.getIdentifier().toString()),repoId1);
  Assert.assertEquals(SharedStoreRecordType.REFERENCES.getIdFromName(rec2.getIdentifier().toString()),repoId2);
  Assert.assertTrue(SharedDataStoreUtils.refsNotAvailableFromRepos(dataStore.getAllMetadataRecords(SharedStoreRecordType.REPOSITORY.getType()),dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType())).isEmpty());
  long minRefTime=(lastModifiedRec1 <= lastModifiedRec2 ? lastModifiedRec1 : lastModifiedRec2);
  Assert.assertEquals(SharedDataStoreUtils.getEarliestRecord(dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType())).getLastModified(),minRefTime);
  long minMarkerTime=SharedDataStoreUtils.getEarliestRecord(dataStore.getAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType())).getLastModified();
  Assert.assertTrue(minRefTime >= minMarkerTime);
  dataStore.deleteAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType());
  Assert.assertTrue(dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType()).isEmpty());
  dataStore.deleteAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType());
  Assert.assertTrue(dataStore.getAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType()).isEmpty());
  Assert.assertEquals(2,dataStore.getAllMetadataRecords(SharedStoreRecordType.REPOSITORY.getType()).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreBlobStoreTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReference() throws DataStoreException, IOException {
  String reference="testReference";
  String blobId="test";
  DataIdentifier testDI=new DataIdentifier(blobId);
  DataRecord testDR=new ByteArrayDataRecord("foo".getBytes(),testDI,reference);
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getRecordFromReference(reference)).thenReturn(testDR);
  when(mockedDS.getRecord(testDI)).thenReturn(testDR);
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  assertEquals(reference,ds.getReference(blobId));
  assertEquals(blobId,BlobId.of(ds.getBlobId(reference)).blobId);
  assertEquals(BlobId.of(testDR).encodedValue(),ds.getBlobId(reference));
  String inMemBlobId=InMemoryDataRecord.getInstance("foo".getBytes()).getIdentifier().toString();
  assertNull(ds.getReference(inMemBlobId));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAllChunks() throws Exception {
  DataIdentifier d10=new DataIdentifier("d-10");
  DataIdentifier d20=new DataIdentifier("d-20");
  DataIdentifier d30=new DataIdentifier("d-30");
  List<DataIdentifier> dis=ImmutableList.of(d10,d20,d30);
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getAllIdentifiers()).thenReturn(dis.iterator());
  when(mockedDS.getRecord(new DataIdentifier("d-10"))).thenReturn(new TimeDataRecord(d10));
  when(mockedDS.getRecord(new DataIdentifier("d-20"))).thenReturn(new TimeDataRecord(d20));
  when(mockedDS.getRecord(new DataIdentifier("d-30"))).thenReturn(new TimeDataRecord(d30));
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  Iterator<String> chunks=ds.getAllChunkIds(25);
  Set<String> expected=Sets.newHashSet("d-10","d-20");
  assertEquals(expected,Sets.newHashSet(chunks));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExternalBinary() throws DataStoreException, IOException {
  int maxInlineSize=300;
  int actualSize=maxInlineSize + 10;
  byte[] data=new byte[actualSize];
  new Random().nextBytes(data);
  DataIdentifier testDI=new DataIdentifier("test");
  DataRecord testDR=new ByteArrayDataRecord(data,testDI,"testReference");
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getMinRecordLength()).thenReturn(maxInlineSize);
  when(mockedDS.getRecord(testDI)).thenReturn(testDR);
  when(mockedDS.getRecordIfStored(testDI)).thenReturn(testDR);
  when(mockedDS.addRecord(any(InputStream.class))).thenReturn(testDR);
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  assertFalse(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  assertEquals(testDI,dr.getIdentifier());
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),dr.getStream()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),new BlobStoreInputStream(ds,dr.getIdentifier().toString(),0)));
  assertEquals(dr,ds.getRecordIfStored(dr.getIdentifier()));
  assertEquals(dr,ds.getRecord(dr.getIdentifier()));
  assertEquals(actualSize,ds.getBlobLength(dr.getIdentifier().toString()));
  assertEquals(testDI.toString(),BlobId.of(ds.writeBlob(new ByteArrayInputStream(data))).blobId);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInlineBinary() throws DataStoreException, IOException {
  int maxInlineSize=300;
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getMinRecordLength()).thenReturn(maxInlineSize);
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  byte[] data=new byte[maxInlineSize];
  new Random().nextBytes(data);
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  assertTrue(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),dr.getStream()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),new BlobStoreInputStream(ds,dr.getIdentifier().toString(),0)));
  assertEquals(dr,ds.getRecordIfStored(dr.getIdentifier()));
  assertEquals(dr,ds.getRecord(dr.getIdentifier()));
  assertEquals(maxInlineSize,ds.getBlobLength(dr.getIdentifier().toString()));
  assertEquals(dr.getIdentifier().toString(),BlobId.of(ds.writeBlob(new ByteArrayInputStream(data))).blobId);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreServiceTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test @CachingFDS is returned when cacheSize > 0
 */
@Test public void configCachingFDS() throws Exception {
  String nasPath=folder.getRoot().getAbsolutePath() + "/NASPath";
  String cachePath=folder.getRoot().getAbsolutePath() + "/cachePath";
  long cacheSize=100l;
  Map<String,Object> config=new HashMap<String,Object>();
  config.put("repository.home",folder.getRoot().getAbsolutePath());
  config.put(FileDataStoreService.CACHE_SIZE,cacheSize);
  config.put(FileDataStoreService.PATH,nasPath);
  config.put(FileDataStoreService.CACHE_PATH,cachePath);
  FileDataStoreService fdsSvc=new FileDataStoreService();
  DataStore ds=fdsSvc.createDataStore(context.componentContext(),config);
  PropertiesUtil.populate(ds,config,false);
  ds.init(folder.getRoot().getAbsolutePath());
  assertTrue("not instance of CachingFDS",ds instanceof CachingFDS);
  CachingFDS cds=(CachingFDS)ds;
  assertEquals("cachesize not equal",cacheSize,cds.getCacheSize());
  assertEquals("cachepath not equal",cachePath,cds.getPath());
  Backend backend=cds.getBackend();
  Properties props=(Properties)getField(backend,"properties");
  assertEquals("path not equal",nasPath,props.getProperty(FSBackend.FS_BACKEND_PATH));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void mbeanRegs() throws Exception {
  Map<String,Object> config=ImmutableMap.<String,Object>of("repository.home",folder.getRoot().getAbsolutePath());
  FileDataStoreService fds=new FileDataStoreService();
  fds.setStatisticsProvider(StatisticsProvider.NOOP);
  MockOsgi.activate(fds,context.bundleContext(),config);
  assertNotNull(context.getService(BlobStoreStatsMBean.class));
  assertNotNull(context.getService(CacheStatsMBean.class));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test to verify @FileDataStore is returned if cacheSize is not configured.
 */
@Test public void configFileDataStore() throws Exception {
  String nasPath=folder.getRoot().getAbsolutePath() + "/NASPath";
  String cachePath=folder.getRoot().getAbsolutePath() + "/cachePath";
  Map<String,Object> config=new HashMap<String,Object>();
  config.put("repository.home",folder.getRoot().getAbsolutePath());
  config.put(FileDataStoreService.PATH,nasPath);
  config.put(FileDataStoreService.CACHE_PATH,cachePath);
  FileDataStoreService fdsSvc=new FileDataStoreService();
  DataStore ds=fdsSvc.createDataStore(context.componentContext(),config);
  PropertiesUtil.populate(ds,config,false);
  ds.init(folder.getRoot().getAbsolutePath());
  assertTrue("not instance of FileDataStore",ds instanceof FileDataStore);
  FileDataStore fds=(FileDataStore)ds;
  assertEquals("path not equal",nasPath,fds.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreTextWriterTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonExistingEntry() throws Exception {
  File fdsDir=temporaryFolder.newFolder();
  FileDataStore fds=DataStoreUtils.createFDS(fdsDir,0);
  ByteArrayInputStream is=new ByteArrayInputStream("hello".getBytes());
  DataRecord dr=fds.addRecord(is);
  File writerDir=temporaryFolder.newFolder();
  DataStoreTextWriter w=new DataStoreTextWriter(writerDir,false);
  String id=dr.getIdentifier().toString();
  assertFalse(w.isProcessed(id));
  assertNull(w.getText("/a",new IdBlob("foo",id)));
  w.write(id,"foo");
  assertTrue(w.isProcessed(id));
  ExtractedText et=w.getText("/a",new IdBlob("foo",id));
  assertEquals("foo",et.getExtractedText());
  assertEquals(ExtractionResult.SUCCESS,et.getExtractionResult());
  w.markEmpty("a");
  assertTrue(w.isProcessed("a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkEmptyAndErrorBlobs() throws Exception {
  DataStoreTextWriter w=new DataStoreTextWriter(temporaryFolder.getRoot(),false);
  w.markEmpty("a");
  w.markError("b");
  w.close();
  DataStoreTextWriter w2=new DataStoreTextWriter(temporaryFolder.getRoot(),true);
  assertEquals(ExtractionResult.EMPTY,w2.getText("/a",new IdBlob("foo","a")).getExtractionResult());
  assertEquals(ExtractionResult.ERROR,w2.getText("/a",new IdBlob("foo","b")).getExtractionResult());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void basicOperation() throws Exception {
  File fdsDir=temporaryFolder.newFolder();
  FileDataStore fds=DataStoreUtils.createFDS(fdsDir,0);
  ByteArrayInputStream is=new ByteArrayInputStream("hello".getBytes());
  DataRecord dr=fds.addRecord(is);
  File writerDir=temporaryFolder.newFolder();
  TextWriter writer=new DataStoreTextWriter(writerDir,false);
  writer.write(dr.getIdentifier().toString(),"hello");
  FileDataStore fds2=DataStoreUtils.createFDS(writerDir,0);
  DataRecord dr2=fds2.getRecordIfStored(dr.getIdentifier());
  is.reset();
  assertTrue(IOUtils.contentEquals(is,dr2.getStream()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noLoadingInReadOnlyMode() throws Exception {
  DataStoreTextWriter w=new DataStoreTextWriter(temporaryFolder.getRoot(),true);
  assertEquals(0,w.getEmptyBlobsHolder().getLoadCount());
  assertEquals(0,w.getErrorBlobsHolder().getLoadCount());
  DataStoreTextWriter w1=new DataStoreTextWriter(temporaryFolder.getRoot(),false);
  assertEquals(1,w1.getEmptyBlobsHolder().getLoadCount());
  assertEquals(1,w1.getErrorBlobsHolder().getLoadCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.InMemoryDataRecordTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetInstance() throws Exception {
  int length=400;
  byte[] data=new byte[length];
  new Random().nextBytes(data);
  DataRecord dr=InMemoryDataRecord.getInstance(data);
  assertTrue(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  DataRecord dr2=InMemoryDataRecord.getInstance(dr.getIdentifier().toString());
  assertTrue(IOUtils.contentEquals(dr.getStream(),dr2.getStream()));
  assertTrue(IOUtils.contentEquals(dr.getStream(),new ByteArrayInputStream(data)));
  assertEquals(length,dr.getLength());
  assertEquals(dr2.getLength(),dr.getLength());
  assertEquals(dr,dr2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.OakFileDataStoreTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAllIdentifiers() throws Exception {
  File testDir=new File("./target","oak-fds-test");
  FileUtils.touch(new File(testDir,"a"));
  FileUtils.touch(new File(testDir,"b"));
  FileUtils.touch(new File(testDir,"adir/c"));
  FileDataStore fds=new OakFileDataStore();
  fds.setPath(testDir.getAbsolutePath());
  fds.init(null);
  Iterator<DataIdentifier> dis=fds.getAllIdentifiers();
  Set<String> fileNames=Sets.newHashSet(Iterators.transform(dis,new Function<DataIdentifier,String>(){
    @Override public String apply(    @Nullable DataIdentifier input){
      return input.toString();
    }
  }
));
  Set<String> expectedNames=Sets.newHashSet("a","b","c");
  assertEquals(expectedNames,fileNames);
  FileUtils.cleanDirectory(testDir);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BasicDocumentStoreTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreatePartialFailure(){
  String bid=this.getClass().getName() + ".testCreatePartialFailure-";
  int cnt=10;
  assertTrue(cnt > 8);
  for (int i=0; i < cnt; i++) {
    super.ds.remove(Collection.NODES,bid + i);
    removeMe.add(bid + i);
  }
  int pre=cnt / 2;
  UpdateOp up=new UpdateOp(bid + pre,true);
  up.set("_id",bid + pre);
  up.set("foo","bar");
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  Set<String> toCreate=new HashSet<String>();
  Set<String> toCreateFailEarly=new HashSet<String>();
  List<UpdateOp> ups=new ArrayList<UpdateOp>();
  for (int i=0; i < cnt; i++) {
    UpdateOp op=new UpdateOp(bid + i,true);
    op.set("_id",bid + i);
    op.set("foo","qux");
    ups.add(op);
    if (i != pre) {
      toCreate.add(bid + i);
    }
    if (i < pre) {
      toCreateFailEarly.add(bid + i);
    }
  }
  assertFalse(super.ds.create(Collection.NODES,ups));
  Set<String> created=new HashSet<String>();
  for (int i=0; i < cnt; i++) {
    boolean present=null != super.ds.find(Collection.NODES,bid + i,0);
    if (i == pre && !present) {
      fail(super.dsname + ": batch update removed previously existing node " + (bid + i));
    }
 else     if (present && i != pre) {
      created.add(bid + i);
    }
  }
  toCreate.removeAll(created);
  if (created.isEmpty()) {
    LOG.info(super.dsname + ": create() apparently is atomic");
  }
 else   if (created.size() == toCreate.size()) {
    LOG.info(super.dsname + ": create() apparently is best-effort");
  }
 else   if (created.equals(toCreateFailEarly)) {
    LOG.info(super.dsname + ": create() stops at first failure");
  }
 else {
    LOG.info(super.dsname + ": create() created: " + created+ ", missing: "+ toCreate);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeleteNonExistingMultiple(){
  String id=this.getClass().getName() + ".testDeleteNonExistingMultiple-" + UUID.randomUUID();
  UpdateOp up=new UpdateOp(id + "-2",true);
  up.set("_id",id + "-2");
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  List<String> todelete=new ArrayList<String>();
  todelete.add(id + "-2");
  todelete.add(id);
  ds.remove(Collection.NODES,todelete);
  Document d=ds.find(Collection.NODES,id + "-2");
  assertTrue(d == null);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddAndRemove(){
  String id=this.getClass().getName() + ".testAddAndRemove";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConditionalUpdate(){
  String id=this.getClass().getName() + ".testConditionalUpdate";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  String existingProp="_recoverylock";
  String existingRevisionProp="recoverylock";
  String nonExistingProp="_qux";
  String nonExistingRevisionProp="qux";
  Revision r=new Revision(1,1,1);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set(existingProp,"lock");
  up.setMapEntry(existingRevisionProp,r,"lock");
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.notEquals(nonExistingProp,"none");
  NodeDocument result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(nonExistingProp,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.notEquals(nonExistingRevisionProp,r,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(nonExistingRevisionProp,r,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingProp,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingProp,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingRevisionProp,r,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingRevisionProp,r,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.notEquals(existingProp,"lock");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingProp,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.notEquals(existingRevisionProp,r,"lock");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingRevisionProp,r,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingProp,"lock");
  up.set(existingProp,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingRevisionProp,r,"lock");
  up.setMapEntry(existingRevisionProp,r,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  removeMe.add(id);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuery(){
  String base=this.getClass().getName() + ".testQuery-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "A",5));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "4"));
  assertFalse(result.contains(base + "5"));
  result=getKeys(ds.query(Collection.NODES,base,base + "A",20));
  assertEquals(10,result.size());
  assertTrue(result.contains(base + "0"));
  assertTrue(result.contains(base + "9"));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeWithCondition() throws Exception {
  Set<String> existingDocs=new HashSet<String>();
  for (  NodeDocument doc : Utils.getAllDocuments(ds)) {
    existingDocs.add(doc.getPath());
  }
  List<UpdateOp> docs=Lists.newArrayList();
  docs.add(newDocument("/foo",100));
  removeMe.add(Utils.getIdFromPath("/foo"));
  docs.add(newDocument("/bar",200));
  removeMe.add(Utils.getIdFromPath("/bar"));
  docs.add(newDocument("/baz",300));
  removeMe.add(Utils.getIdFromPath("/baz"));
  ds.create(Collection.NODES,docs);
  for (  UpdateOp op : docs) {
    assertNotNull(ds.find(Collection.NODES,op.getId()));
  }
  Map<String,Map<Key,Condition>> toRemove=Maps.newHashMap();
  removeDocument(toRemove,"/foo",100);
  removeDocument(toRemove,"/bar",300);
  removeDocument(toRemove,"/qux",100);
  removeDocument(toRemove,"/baz",300);
  int removed=ds.remove(Collection.NODES,toRemove);
  assertEquals(2,removed);
  assertNotNull(ds.find(Collection.NODES,Utils.getIdFromPath("/bar")));
  for (  NodeDocument doc : Utils.getAllDocuments(ds)) {
    if (!doc.getPath().equals("/bar") && !existingDocs.contains(doc.getPath())) {
      fail("document must not exist: " + doc.getId());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateMultiple(){
  String id=this.getClass().getName() + ".testUpdateMultiple";
  super.ds.remove(Collection.NODES,id);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  List<String> toupdate=new ArrayList<String>();
  toupdate.add(id + "-" + UUID.randomUUID());
  toupdate.add(id);
  UpdateOp up2=new UpdateOp(id,false);
  up2.set("foo","bar");
  ds.update(Collection.NODES,toupdate,up2);
  ds.invalidateCache();
  Document d=ds.find(Collection.NODES,id);
  assertNotNull(d);
  assertEquals(id,d.getId());
  assertEquals("bar",d.get("foo").toString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterestingStrings(){
  String[] tests=new String[]{"simple:foo","cr:a\n\b","dquote:a\"b","bs:a\\b","euro:a\u201c","gclef:\uD834\uDD1E","tab:a\tb","nul:a\u0000b","brokensurrogate:\ud800"};
  for (  String t : tests) {
    int pos=t.indexOf(":");
    String testname=t.substring(0,pos);
    String test=t.substring(pos + 1);
    String id=this.getClass().getName() + ".testInterestingStrings-" + testname;
    super.ds.remove(Collection.NODES,id);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("foo",test);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("failed to insert a document with property value of " + test + " ("+ testname+ ") in "+ super.dsname,success);
    super.ds.invalidateCache();
    NodeDocument nd=super.ds.find(Collection.NODES,id);
    assertEquals("failure to round-trip " + testname + " through "+ super.dsname,test,nd.get("foo"));
    super.ds.remove(Collection.NODES,id);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifiedMaxUpdateQuery(){
  String id=this.getClass().getName() + ".testModifiedMaxUpdate";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",1000L);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  UpdateOp up2=new UpdateOp(id,true);
  up2.set("_id",id);
  up2.max("_modified",100L);
  super.ds.findAndUpdate(Collection.NODES,up2);
  super.ds.invalidateCache();
  String startId=this.getClass().getName() + ".testModifiedMaxUpdatd";
  String endId=this.getClass().getName() + ".testModifiedMaxUpdatf";
  List<NodeDocument> results=super.ds.query(Collection.NODES,startId,endId,"_modified",1000,1);
  assertEquals("document not found, maybe indexed _modified property not properly updated",1,results.size());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyDeletedOnce(){
  String id=this.getClass().getName() + ".testModifyDeletedOnce";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set(NodeDocument.DELETED_ONCE,Boolean.FALSE);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  NodeDocument nd=super.ds.find(Collection.NODES,id,0);
  assertNotNull(nd);
  Boolean dovalue=(Boolean)nd.get(NodeDocument.DELETED_ONCE);
  if (dovalue != null) {
    assertEquals(dovalue.booleanValue(),Boolean.FALSE);
  }
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set(NodeDocument.DELETED_ONCE,Boolean.TRUE);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  nd=super.ds.find(Collection.NODES,id,0);
  assertNotNull(nd);
  assertNotNull(nd.get(NodeDocument.DELETED_ONCE));
  assertEquals(((Boolean)nd.get(NodeDocument.DELETED_ONCE)).booleanValue(),Boolean.TRUE);
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterestingPropLengths() throws UnsupportedEncodingException {
  int lengths[]={1,10,100,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000,11000,12000,13000,14000,15000,16000,20000};
  for (  int test : lengths) {
    String id=this.getClass().getName() + ".testInterestingPropLengths-" + test;
    String pval=generateString(test,true);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("foo",pval);
    super.ds.remove(Collection.NODES,id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("failed to insert a document with property of length " + test + "(ASCII) in "+ super.dsname,success);
    super.ds.remove(Collection.NODES,id);
  }
  for (  int test : lengths) {
    String id=this.getClass().getName() + ".testInterestingPropLengths-" + test;
    String pval=generateString(test,false);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("foo",pval);
    super.ds.remove(Collection.NODES,id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("failed to insert a document with property of length " + test + " (potentially non-ASCII, actual octet length with UTF-8 encoding: "+ pval.getBytes("UTF-8").length+ ") in "+ super.dsname,success);
    if (success) {
      try {
        super.ds.findAndUpdate(Collection.NODES,up);
      }
 catch (      Exception ex) {
        ex.printStackTrace(System.err);
        fail("failed to update a document with property of length " + test + " (potentially non-ASCII, actual octet length with UTF-8 encoding: "+ pval.getBytes("UTF-8").length+ ") in "+ super.dsname);
      }
    }
    super.ds.remove(Collection.NODES,id);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConditionalUpdateForbidden(){
  String id=this.getClass().getName() + ".testConditionalupdateForbidden";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  try {
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.equals("foo","bar");
    super.ds.create(Collection.NODES,Collections.singletonList(up));
    fail("conditional create should fail");
  }
 catch (  IllegalStateException expected) {
  }
  UpdateOp cup=new UpdateOp(id,true);
  cup.set("_id",id);
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(cup)));
  removeMe.add(id);
  try {
    UpdateOp up=new UpdateOp(id,false);
    up.set("_id",id);
    up.equals("foo","bar");
    super.ds.createOrUpdate(Collection.NODES,up);
    fail("conditional createOrUpdate should fail");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    UpdateOp up=new UpdateOp(id,false);
    up.set("_id",id);
    up.equals("foo","bar");
    super.ds.createOrUpdate(Collection.NODES,Collections.singletonList(up));
    fail("conditional createOrUpdate should fail");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    UpdateOp up=new UpdateOp(id,false);
    up.set("_id",id);
    up.equals("foo","bar");
    super.ds.update(Collection.NODES,Collections.singletonList(id),up);
    fail("conditional update should fail");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryBinary(){
  String base=this.getClass().getName() + ".testQueryBinary-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set(NodeDocument.HAS_BINARY_FLAG,i % 2L);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "Z",NodeDocument.HAS_BINARY_FLAG,NodeDocument.HAS_BINARY_VAL,1000));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "1"));
  assertFalse(result.contains(base + "0"));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCollisionsModCount(){
  String id=this.getClass().getName() + ".testCollisionsModCount";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  Revision revision=Revision.fromString("r0-0-1");
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.setMapEntry("_collisions",revision,"foo");
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  nd=super.ds.find(Collection.NODES,id);
  assertNotNull(nd);
  Number cmc=(Number)nd.get("_collisionsModCount");
  if (cmc == null) {
  }
 else {
    Revision revision2=Revision.fromString("r0-0-2");
    UpdateOp up2=new UpdateOp(id,false);
    up2.set("_id",id);
    up2.setMapEntry("_collisions",revision2,"foobar");
    NodeDocument old=super.ds.findAndUpdate(Collection.NODES,up2);
    assertNotNull(old);
    nd=super.ds.find(Collection.NODES,id,0);
    assertNotNull(nd);
    Number cmc2=(Number)nd.get("_collisionsModCount");
    assertNotNull(cmc2);
    assertTrue(cmc2.longValue() > cmc.longValue());
    UpdateOp up3=new UpdateOp(id,false);
    up3.set("_id",id);
    up3.set("foo","bar");
    old=super.ds.findAndUpdate(Collection.NODES,up3);
    assertNotNull(old);
    nd=super.ds.find(Collection.NODES,id,0);
    assertNotNull(nd);
    Number cmc3=(Number)nd.get("_collisionsModCount");
    assertNotNull(cmc3);
    assertTrue(cmc2.longValue() == cmc3.longValue());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyModified(){
  String id=this.getClass().getName() + ".testModifyModified";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",1000L);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.max("_modified",2000L);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  NodeDocument nd=super.ds.find(Collection.NODES,id,0);
  assertEquals(((Number)nd.get("_modified")).longValue(),2000L);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set("_modified",1500L);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  nd=super.ds.find(Collection.NODES,id,0);
  assertEquals(((Number)nd.get("_modified")).longValue(),1500L);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateModified(){
  String id=this.getClass().getName() + ".testUpdateModified";
  super.ds.remove(Collection.NODES,id);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  ds.invalidateCache();
  Document d=super.ds.find(Collection.NODES,id);
  Object m=d.get("_modified");
  assertNull("_modified should be null until set",m);
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",123L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("123",m.toString());
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.max("_modified",122L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("123",m.toString());
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.max("_modified",124L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("124",m.toString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepeatingUpdatesOnSQLServer(){
  String id=this.getClass().getName() + ".testRepeatingUpdatesOnSQLServer";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set("f0",generateConstantString(3000));
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set("f1",generateConstantString(967));
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  NodeDocument doc=super.ds.find(Collection.NODES,id,0);
  assertNotNull(doc);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryDeletedOnce(){
  String base=this.getClass().getName() + ".testQueryDeletedOnce-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set(NodeDocument.DELETED_ONCE,Boolean.valueOf(i % 2 == 0));
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "Z",NodeDocument.DELETED_ONCE,1L,1000));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "0"));
  assertFalse(result.contains(base + "1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BlobReferenceIteratorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBlobIterator() throws Exception {
  List<ReferencedBlob> blobs=Lists.newArrayList();
  for (int i=0; i < 10; i++) {
    NodeBuilder b1=store.getRoot().builder();
    Blob b=store.createBlob(randomStream(i,4096));
    b1.child("x").child("y" + 1).setProperty("b" + i,b);
    blobs.add(new ReferencedBlob(b,"/x/y" + 1));
    store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  List<ReferencedBlob> collectedBlobs=ImmutableList.copyOf(store.getReferencedBlobsIterator());
  assertEquals(blobs.size(),collectedBlobs.size());
  assertEquals(new HashSet<ReferencedBlob>(blobs),new HashSet<ReferencedBlob>(collectedBlobs));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BlobTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBlobSerialization() throws Exception {
  TestBlobStore blobStore=new TestBlobStore();
  DocumentMK mk=builderProvider.newBuilder().setBlobStore(blobStore).open();
  BlobSerializer blobSerializer=mk.getNodeStore().getBlobSerializer();
  Blob blob=new BlobStoreBlob(blobStore,"foo");
  assertEquals("foo",blobSerializer.serialize(blob));
  assertEquals(0,blobStore.writeCount);
  blob=new ArrayBasedBlob("foo".getBytes());
  blobSerializer.serialize(blob);
  assertEquals(1,blobStore.writeCount);
  byte[] bytes="foo".getBytes();
  String blobId=blobStore.writeBlob(new ByteArrayInputStream(bytes));
  String reference=blobStore.getReference(blobId);
  blob=new ReferencedBlob("foo".getBytes(),reference);
  blobStore.writeCount=0;
  blobSerializer.serialize(blob);
  assertEquals(0,blobStore.writeCount);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void addBlobs() throws Exception {
  DocumentMK mk=setMongoConnection(builderProvider.newBuilder()).open();
  long blobSize=TOTAL_SIZE / DOCUMENT_COUNT;
  ArrayList<String> blobIds=new ArrayList<String>();
  Random r=new Random();
  for (int i=0; i < DOCUMENT_COUNT; i++) {
    log("writing " + i + "/"+ DOCUMENT_COUNT);
    String id=mk.write(new RandomStream(blobSize,r.nextInt()));
    blobIds.add(id);
  }
  for (  String id : blobIds) {
    assertEquals(blobSize,mk.getLength(id));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BulkCreateOrUpdateTest </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * This method updates multiple items using createOrUpdate() method. The
 * return value should be a list of items before the update.
 */
@Test public void testUpdateMultiple(){
  final int amount=100;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testUpdateMultiple" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",100);
    updates.add(up);
    removeMe.add(id);
  }
  ds.create(Collection.NODES,updates);
  for (int i=0; i < amount; i++) {
    UpdateOp up=updates.get(i).copy();
    up.set("prop",200);
    updates.set(i,up);
  }
  List<NodeDocument> docs=ds.createOrUpdate(Collection.NODES,updates);
  assertEquals(amount,docs.size());
  for (int i=0; i < amount; i++) {
    NodeDocument oldDoc=docs.get(i);
    String id=oldDoc.getId();
    NodeDocument newDoc=ds.find(Collection.NODES,id);
    assertEquals("The result list order is incorrect",updates.get(i).getId(),id);
    assertEquals("The old value is not correct",100l,oldDoc.get("prop"));
    assertEquals("The document hasn't been updated",200l,newDoc.get("prop"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This method creates or updates multiple items using createOrUpdate()
 * method. New items have odd indexes and updates items have even indexes.
 * The return value should be a list of old documents (for the updates) or
 * nulls (for the inserts).
 */
@Test public void testCreateOrUpdateMultiple(){
  int amount=100;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  for (int i=0; i < amount; i+=2) {
    String id=this.getClass().getName() + ".testCreateOrUpdateMultiple" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",100);
    updates.add(up);
    removeMe.add(id);
  }
  ds.create(Collection.NODES,updates);
  updates.clear();
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testCreateOrUpdateMultiple" + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("prop",200);
    updates.add(up);
    removeMe.add(id);
  }
  List<NodeDocument> docs=ds.createOrUpdate(Collection.NODES,updates);
  assertEquals(amount,docs.size());
  for (int i=0; i < amount; i++) {
    String id=this.getClass().getName() + ".testCreateOrUpdateMultiple" + i;
    NodeDocument oldDoc=docs.get(i);
    NodeDocument newDoc=ds.find(Collection.NODES,id);
    if (i % 2 == 1) {
      assertNull("The returned value should be null for created doc",oldDoc);
    }
 else {
      assertNotNull("The returned doc shouldn't be null for updated doc",oldDoc);
      assertEquals("The old value is not correct",100l,oldDoc.get("prop"));
      assertEquals("The result list order is incorrect",updates.get(i).getId(),oldDoc.getId());
    }
    assertEquals("The document hasn't been updated",200l,newDoc.get("prop"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This method adds a few updateOperations modifying the same document.
 */
@Test public void testUpdateSameDocument(){
  final int amount=5;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  String id=this.getClass().getName() + ".testUpdateSameDocument";
  removeMe.add(id);
  for (int i=0; i < amount; i++) {
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("update_id",i);
    up.set("prop_" + i,100);
    updates.add(up);
  }
  List<NodeDocument> docs=ds.createOrUpdate(Collection.NODES,updates);
  assertEquals(amount,docs.size());
  assertNull("The old value should be null for the first update",docs.get(0));
  Long prevModCount=null;
  for (int i=1; i < amount; i++) {
    Long modCount=docs.get(i).getModCount();
    if (prevModCount != null) {
      assertNotNull(modCount);
      assertTrue("_modCount, when present, must be increasing, but changed from " + prevModCount + " to "+ modCount,prevModCount.longValue() < modCount.longValue());
    }
    prevModCount=modCount;
    assertEquals("The old value is not correct",Long.valueOf(i - 1),docs.get(i).get("update_id"));
  }
  NodeDocument newDoc=ds.find(Collection.NODES,id);
  if (newDoc.getModCount() != null) {
    assertEquals("The final mod count is not correct",Long.valueOf(5),newDoc.getModCount());
  }
  for (int i=0; i < amount; i++) {
    assertEquals("The value is not correct",100l,newDoc.get("prop_" + i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CheckpointsTest </h4><pre class="type-6 type-19 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetOldestRevisionToKeep() throws Exception {
  long et1=1000, et2=et1 + 1000;
  Revision r1=Revision.fromString(store.checkpoint(et1));
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x");
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Revision r2=Revision.fromString(store.checkpoint(et2));
  assertNotSame(r1,r2);
  assertEquals(r2,store.getCheckpoints().getOldestRevisionToKeep());
  long starttime=clock.getTime();
  clock.waitUntil(starttime + et1 + 1);
  assertEquals(r2,store.getCheckpoints().getOldestRevisionToKeep());
  clock.waitUntil(starttime + et2 + 1);
  assertNull(store.getCheckpoints().getOldestRevisionToKeep());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckpointPurge() throws Exception {
  long expiryTime=1000;
  Revision r1=Revision.fromString(store.checkpoint(expiryTime));
  assertEquals(r1,store.getCheckpoints().getOldestRevisionToKeep());
  clock.waitUntil(clock.getTime() + expiryTime + 1);
  assertNull(store.getCheckpoints().getOldestRevisionToKeep());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void expiryOverflow() throws Exception {
  clock.waitUntil(System.currentTimeMillis());
  Map<String,String> empty=Collections.emptyMap();
  Revision r=Revision.fromString(store.checkpoint(Long.MAX_VALUE,empty));
  Checkpoints.Info info=store.getCheckpoints().getCheckpoints().get(r);
  assertNotNull(info);
  assertEquals(Long.MAX_VALUE,info.getExpiryTime());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkpointRemove() throws Exception {
  long et1=1000, et2=et1 + 1000;
  String cp1=store.checkpoint(et1);
  Revision r1=Revision.fromString(cp1);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x");
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  String cp2=store.checkpoint(et2);
  Revision r2=Revision.fromString(cp2);
  assertEquals(2,store.getCheckpoints().size());
  assertEquals(r2,store.getCheckpoints().getOldestRevisionToKeep());
  store.release(cp2);
  assertEquals(1,store.getCheckpoints().size());
  assertEquals(r1,store.getCheckpoints().getOldestRevisionToKeep());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void crossClusterCheckpointNewClusterNode() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("foo");
  ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  String checkpoint=ns1.checkpoint(Long.MAX_VALUE);
  b1=ns1.getRoot().builder();
  b1.child("bar");
  ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("baz");
  ns2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState root=ns2.retrieve(checkpoint);
  assertNotNull(root);
  assertTrue(root.hasChildNode("foo"));
  assertFalse(root.hasChildNode("bar"));
  assertFalse(root.hasChildNode("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readOldFormat() throws Exception {
  clock.waitUntil(System.currentTimeMillis());
  DocumentStore docStore=store.getDocumentStore();
  Map<String,String> empty=Collections.emptyMap();
  Revision r=Revision.fromString(store.checkpoint(Integer.MAX_VALUE,empty));
  Document doc=docStore.find(Collection.SETTINGS,"checkpoint");
  assertNotNull(doc);
  @SuppressWarnings("unchecked") Map<Revision,String> data=(Map<Revision,String>)doc.get("data");
  assertNotNull(data);
  assertEquals(1,data.size());
  assertTrue(data.containsKey(r));
  UpdateOp update=new UpdateOp("checkpoint",false);
  long expires=clock.getTime() + 1000 + Integer.MAX_VALUE;
  update.setMapEntry("data",r,String.valueOf(expires));
  assertNotNull(docStore.findAndUpdate(Collection.SETTINGS,update));
  Checkpoints.Info info=store.getCheckpoints().getCheckpoints().get(r);
  assertNotNull(info);
  assertEquals(expires,info.getExpiryTime());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void crossClusterReadOldCheckpoint() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("foo");
  ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  Revision headRev=Revision.fromString(ns1.getHeadRevision().toString());
  long expires=Long.MAX_VALUE;
  String data="{\"expires\":\"" + expires + "\"}";
  UpdateOp update=new UpdateOp("checkpoint",false);
  update.setMapEntry("data",headRev,data);
  store.createOrUpdate(Collection.SETTINGS,update);
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("baz");
  ns2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState root=ns2.retrieve(headRev.toString());
  assertNotNull(root);
  assertTrue(root.hasChildNode("foo"));
  assertFalse(root.hasChildNode("baz"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userInfoNamedExpires() throws Exception {
  Map<String,String> props=ImmutableMap.of("expires","today");
  Revision r=Revision.fromString(store.checkpoint(Integer.MAX_VALUE,props));
  Map<String,String> info=store.checkpointInfo(r.toString());
  assertNotNull(info);
  assertEquals(props,info);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCheckpointPurgeByCount() throws Exception {
  long expiryTime=TimeUnit.HOURS.toMillis(1);
  Revision r1=null;
  for (int i=0; i < Checkpoints.CLEANUP_INTERVAL; i++) {
    r1=Revision.fromString(store.checkpoint(expiryTime));
    store.setRoot(new RevisionVector(Revision.newRevision(store.getClusterId())));
  }
  assertEquals(r1,store.getCheckpoints().getOldestRevisionToKeep());
  assertEquals(Checkpoints.CLEANUP_INTERVAL,store.getCheckpoints().size());
  clock.waitUntil(clock.getTime() + expiryTime);
  store.checkpoint(expiryTime);
  assertEquals(1,store.getCheckpoints().size());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void parseInfo(){
  long expires=System.currentTimeMillis();
  Checkpoints.Info info=Checkpoints.Info.fromString(String.valueOf(expires));
  assertEquals(expires,info.getExpiryTime());
  String infoString="{\"expires\":\"" + expires + "\",\"foo\":\"bar\"}";
  info=Checkpoints.Info.fromString(infoString);
  assertEquals(expires,info.getExpiryTime());
  assertEquals(Collections.singleton("foo"),info.get().keySet());
  assertEquals("bar",info.get().get("foo"));
  Revision r1=new Revision(1,0,1);
  Revision r2=new Revision(1,0,2);
  RevisionVector rv=new RevisionVector(r1,r2);
  infoString="{\"expires\":\"" + expires + "\",\"rv\":\""+ rv.toString()+ "\",\"foo\":\"bar\"}";
  info=Checkpoints.Info.fromString(infoString);
  assertEquals(expires,info.getExpiryTime());
  assertEquals(Collections.singleton("foo"),info.get().keySet());
  assertEquals("bar",info.get().get("foo"));
  assertEquals(rv,info.getCheckpoint());
  assertEquals(infoString,info.toString());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multipleCheckpointOnSameRevision() throws Exception {
  long e1=TimeUnit.HOURS.toMillis(1);
  long e2=TimeUnit.HOURS.toMillis(3);
  Revision r2=Revision.fromString(store.checkpoint(e2));
  Revision r1=Revision.fromString(store.checkpoint(e1));
  clock.waitUntil(clock.getTime() + e1 + 1);
  assertEquals(r2,store.getCheckpoints().getOldestRevisionToKeep());
  assertEquals(1,store.getCheckpoints().size());
  assertNull(store.retrieve(r1.toString()));
  assertNotNull(store.retrieve(r2.toString()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void crossClusterNodeCheckpoint() throws Exception {
  final int asyncDelay=(int)TimeUnit.MINUTES.toMillis(1);
  DocumentStore store=new MemoryDocumentStore();
  final DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(asyncDelay).getNodeStore();
  final DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(asyncDelay).getNodeStore();
  NodeBuilder builder=ns1.getRoot().builder();
  builder.child("foo");
  ns1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  String cp1=ns1.checkpoint(Long.MAX_VALUE);
  NodeState root=ns2.retrieve(cp1);
  assertNotNull(root);
  assertTrue(root.hasChildNode("foo"));
  ns2.release(cp1);
  builder=ns1.getRoot().builder();
  builder.child("bar");
  ns1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final String cp2=ns1.checkpoint(Long.MAX_VALUE);
  final NodeState state[]=new NodeState[1];
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      state[0]=ns2.retrieve(cp2);
    }
  }
);
  t.start();
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  t.join();
  assertNotNull(state[0]);
  assertTrue(state[0].hasChildNode("bar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterInfoTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readWriteMode() throws InterruptedException {
  MemoryDocumentStore mem=new MemoryDocumentStore();
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  ClusterNodeInfo.setClock(clock);
  DocumentNodeStore ns1=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).setClusterId(2).getNodeStore();
  clock.waitUntil(clock.getTime() + ns1.getClusterInfo().getLeaseTime());
  ns1.getClusterInfo().setLeaseTime(0);
  ns1.getClusterInfo().setLeaseUpdateInterval(0);
  ns2.getClusterInfo().setLeaseTime(0);
  ns2.getClusterInfo().setLeaseUpdateInterval(0);
  List<ClusterNodeInfoDocument> list=mem.query(Collection.CLUSTER_NODES,"0","a",Integer.MAX_VALUE);
  assertEquals(2,list.size());
  assertNull(mem.getReadPreference());
  assertNull(mem.getWriteConcern());
  mem.setReadWriteMode("read:primary, write:majority");
  assertEquals(ReadPreference.primary(),mem.getReadPreference());
  assertEquals(WriteConcern.MAJORITY,mem.getWriteConcern());
  UpdateOp op;
  op=new UpdateOp(list.get(0).getId(),false);
  op.set("readWriteMode","read:xyz, write:abc");
  mem.findAndUpdate(Collection.CLUSTER_NODES,op);
  ns1.renewClusterIdLease();
  assertEquals(ReadPreference.primary(),mem.getReadPreference());
  assertEquals(WriteConcern.MAJORITY,mem.getWriteConcern());
  op=new UpdateOp(list.get(0).getId(),false);
  op.set("readWriteMode","read:nearest, write:fsynced");
  mem.findAndUpdate(Collection.CLUSTER_NODES,op);
  ns1.renewClusterIdLease();
  assertEquals(ReadPreference.nearest(),mem.getReadPreference());
  assertEquals(WriteConcern.FSYNCED,mem.getWriteConcern());
  ns1.dispose();
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void useAbandoned() throws InterruptedException {
  MemoryDocumentStore mem=new MemoryDocumentStore();
  DocumentNodeStore ns1=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).getNodeStore();
  DocumentStore ds=ns1.getDocumentStore();
  int cid=ns1.getClusterId();
  ClusterNodeInfoDocument cnid=ds.find(Collection.CLUSTER_NODES,"" + cid);
  assertNotNull(cnid);
  assertEquals(ClusterNodeState.ACTIVE.toString(),cnid.get(ClusterNodeInfo.STATE));
  ns1.dispose();
  long waitFor=2000;
  UpdateOp up=new UpdateOp("" + cid,false);
  up.set(Document.ID,"" + cid);
  up.set(ClusterNodeInfo.STATE,ClusterNodeState.ACTIVE.toString());
  long now=System.currentTimeMillis();
  up.set(ClusterNodeInfo.LEASE_END_KEY,now + waitFor);
  ds.findAndUpdate(Collection.CLUSTER_NODES,up);
  ns1=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).getNodeStore();
  assertEquals("should have re-used existing cluster id",cid,ns1.getClusterId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renewLease() throws InterruptedException {
  MemoryDocumentStore mem=new MemoryDocumentStore();
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  ClusterNodeInfo.setClock(clock);
  DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).getNodeStore();
  ClusterNodeInfo info=ns.getClusterInfo();
  assertNotNull(info);
  long leaseEnd=getLeaseEndTime(ns);
  clock.waitUntil(clock.getTime() + ClusterNodeInfo.DEFAULT_LEASE_UPDATE_INTERVAL_MILLIS - 1000);
  ns.renewClusterIdLease();
  assertEquals(leaseEnd,getLeaseEndTime(ns));
  clock.waitUntil(clock.getTime() + 2000);
  ns.renewClusterIdLease();
  assertTrue(getLeaseEndTime(ns) > leaseEnd);
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterJoinTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeJoins() throws Exception {
  String rev1, rev2, rev3;
  mk.getNodeStore().setAsyncDelay(0);
  rev1=mk.commit("/","+\"foo\":{}",null,null);
  DocumentMK mk2=new DocumentMK.Builder().setAsyncDelay(0).setMongoDB(connectionFactory.getConnection().getDB()).setClusterId(mk.getNodeStore().getClusterId() + 1).open();
  try {
    mk2.commit("/","+\"bar\":{}+\"bla\":{}",null,null);
    rev2=mk.commit("/","+\"baz\":{}+\"qux\":{}",null,null);
    assertChildNodeCount("/",rev1,1);
    JSONObject obj=parseJSONObject(mk.getNodes("/",rev2,0,0,10,null));
    mk2.runBackgroundOperations();
    mk.runBackgroundOperations();
    for (    Object key : obj.keySet()) {
      String name=key.toString();
      if (name.startsWith(":")) {
        continue;
      }
      assertNodesExist(rev2,"/" + name);
    }
    assertEquals(3L,obj.get(":childNodeCount"));
    rev3=mk.getHeadRevision();
    obj=parseJSONObject(mk.getNodes("/",rev3,0,0,10,null));
    for (    Object key : obj.keySet()) {
      String name=key.toString();
      if (name.startsWith(":")) {
        continue;
      }
      assertNodesExist(rev3,"/" + name);
    }
    assertEquals(5L,obj.get(":childNodeCount"));
  }
  finally {
    mk2.dispose();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterNodeRestartTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void restart() throws Exception {
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(1).setAsyncDelay(0).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(2).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns1.getRoot().builder();
  builder.child("foo").child("bar");
  merge(ns1,builder);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  builder=ns2.getRoot().builder();
  builder.child("foo").child("bar").setProperty("p","v");
  merge(ns2,builder);
  assertTrue(ns2.getRoot().getChildNode("foo").getChildNode("bar").hasProperty("p"));
  ns2.dispose();
  ns1.runBackgroundOperations();
  assertTrue(ns1.getRoot().getChildNode("foo").getChildNode("bar").hasProperty("p"));
  ns2=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(2).setAsyncDelay(0).getNodeStore();
  assertTrue(ns2.getRoot().getChildNode("foo").getChildNode("bar").hasProperty("p"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterRevisionComparisonTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void revisionComparisonTwoClusterNodes() throws Exception {
  DocumentNodeStore c1=createNS(1);
  DocumentNodeStore c2=createNS(2);
  createNode(c1,"/a");
  runBgOps(c1,c2);
  createNode(c2,"/a/c2");
  createNode(c1,"/a/c1");
  runBgOps(c2);
  runBgOps(c1);
  DocumentNodeState c1ns1=c1.getRoot();
  NodeState a=c1ns1.getChildNode("a");
  assertTrue("/a/c1 missing",a.hasChildNode("c1"));
  assertTrue("/a/c2 missing",a.hasChildNode("c2"));
  c1.invalidateNodeCache("/a/c1",((DocumentNodeState)a).getLastRevision());
  c1.invalidateNodeCache("/a/c2",((DocumentNodeState)a).getLastRevision());
  runBgOps(c1);
  assertTrue("/a/c1 disappeared",a.hasChildNode("c1"));
  assertTrue("/a/c2 disappeared",a.hasChildNode("c2"));
  c1ns1=c1.getRoot();
  c1.invalidateNodeCache("/",c1ns1.getRevision());
  c1ns1=c1.getRoot();
  c1.invalidateNodeCache("/a",c1ns1.getLastRevision());
  assertTrue("/a missing",c1ns1.hasChildNode("a"));
  a=c1ns1.getChildNode("a");
  c1.invalidateNodeCache("/a/c1",((DocumentNodeState)a).getLastRevision());
  c1.invalidateNodeCache("/a/c2",((DocumentNodeState)a).getLastRevision());
  assertTrue("/a/c1 disappeared",a.hasChildNode("c1"));
  assertTrue("/a/c2 disappeared",a.hasChildNode("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void revisionComparisonMultipleClusterNode() throws Exception {
  DocumentNodeStore c1=createNS(1);
  DocumentNodeStore c2=createNS(2);
  DocumentNodeStore c3=createNS(3);
  createNode(c1,"/a");
  runBgOps(c1,c2,c3);
  createNode(c2,"/a/c2");
  createNode(c3,"/a/c3");
  runBgOps(c3);
  runBgOps(c1);
  runBgOps(c2);
  runBgOps(c1);
  DocumentNodeState c1ns1=c1.getRoot();
  Iterables.size(c1ns1.getChildNode("a").getChildNodeEntries());
  createNode(c1,"/a/c1");
  c1.invalidateNodeCache("/a/c2",((DocumentNodeState)c1ns1.getChildNode("a")).getLastRevision());
  c1.invalidateNodeCache("/a/c3",((DocumentNodeState)c1ns1.getChildNode("a")).getLastRevision());
  runBgOps(c1);
  NodeState a=c1ns1.getChildNode("a");
  assertTrue("/a/c2 disappeared",a.hasChildNode("c2"));
  assertTrue("/a/c3 disappeared",a.hasChildNode("c3"));
  DocumentNodeState c1ns2=c1.getRoot();
  c1ns1.compareAgainstBaseState(c1ns2,new TrackingDiff());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterTest </h4><pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void conflict(){
  DocumentMK mk1=createMK(1,0);
  DocumentMK mk2=createMK(2,0);
  String m1r0=mk1.getHeadRevision();
  String m2r0=mk2.getHeadRevision();
  mk1.commit("/","+\"test\":{}",m1r0,null);
  try {
    mk2.commit("/","+\"test\":{}",m2r0,null);
    fail();
  }
 catch (  DocumentStoreException e) {
  }
  mk1.runBackgroundOperations();
  mk2.runBackgroundOperations();
  String n1=mk1.getNodes("/",mk1.getHeadRevision(),0,0,10,null);
  String n2=mk2.getNodes("/",mk2.getHeadRevision(),0,0,10,null);
  assertEquals(n1,n2);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void clusterBranchInVisibility() throws InterruptedException {
  DocumentMK mk1=createMK(1);
  mk1.commit("/","+\"regular\": {}",null,null);
  String b1=mk1.branch(null);
  String b2=mk1.branch(null);
  b1=mk1.commit("/","+\"branchVisible\": {}",b1,null);
  b2=mk1.commit("/","+\"branchInvisible\": {}",b2,null);
  mk1.merge(b1,null);
  disposeMK(mk1);
  DocumentMK mk2=createMK(2);
  String nodes=mk2.getNodes("/",null,0,0,100,null);
  assertEquals("{\"branchVisible\":{},\"regular\":{},\":childNodeCount\":2}",nodes);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void revisionVisibility() throws InterruptedException {
  DocumentMK mk1=createMK(1);
  DocumentMK mk2=createMK(2);
  String m2h;
  m2h=mk2.getNodes("/",mk2.getHeadRevision(),0,0,2,null);
  assertEquals("{\":childNodeCount\":0}",m2h);
  String oldHead=mk2.getHeadRevision();
  mk1.commit("/","+\"test\":{}",null,null);
  String m1h=mk1.getNodes("/",mk1.getHeadRevision(),0,0,2,null);
  assertEquals("{\"test\":{},\":childNodeCount\":1}",m1h);
  assertEquals("{\":childNodeCount\":0}",m2h);
  m2h=mk2.getNodes("/test",mk2.getHeadRevision(),0,0,2,null);
  for (int i=0; i < 100; i++) {
    Thread.sleep(10);
    if (mk1.getPendingWriteCount() > 0) {
      continue;
    }
    if (mk2.getHeadRevision().equals(oldHead)) {
      continue;
    }
    break;
  }
  m2h=mk2.getNodes("/",mk2.getHeadRevision(),0,0,5,null);
  assertEquals("{\"test\":{},\":childNodeCount\":1}",m2h);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for OAK-1254
 */
@Test public void clusterBranchRebase() throws Exception {
  DocumentMK mk1=createMK(1,0);
  mk1.commit("/","+\"test\":{}",null,null);
  mk1.runBackgroundOperations();
  DocumentMK mk2=createMK(2,0);
  DocumentMK mk3=createMK(3,0);
  DocumentNodeStore ns3=mk3.getNodeStore();
  traverse(ns3.getRoot(),"/");
  String b3=mk3.branch(null);
  b3=mk3.commit("/","+\"mk3\":{}",b3,null);
  assertTrue(mk3.nodeExists("/test",b3));
  mk2.commit("/","+\"test/mk21\":{}",null,null);
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  String base3=mk3.getHeadRevision();
  assertFalse(mk3.nodeExists("/test/mk21",b3));
  b3=mk3.rebase(b3,base3);
  mk2.commit("/","+\"test/mk22\":{}",null,null);
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  DocumentNodeState base=ns3.getNode("/",RevisionVector.fromString(base3));
  assertNotNull(base);
  NodeState branchHead=ns3.getNode("/",RevisionVector.fromString(b3));
  assertNotNull(branchHead);
  TrackingDiff diff=new TrackingDiff();
  branchHead.compareAgainstBaseState(base,diff);
  assertEquals(1,diff.added.size());
  assertEquals(Sets.newHashSet("/mk3"),diff.added);
  assertEquals(new HashSet<String>(),diff.deleted);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void threeNodes() throws Exception {
  DocumentMK mk1=createMK(1,0);
  DocumentMK mk2=createMK(2,0);
  DocumentMK mk3=createMK(3,0);
  mk1.commit("/","+\"test\":{}",null,null);
  mk2.commit("/","+\"a\":{}",null,null);
  mk3.commit("/","+\"b\":{}",null,null);
  mk2.backgroundWrite();
  mk2.backgroundRead();
  mk3.backgroundWrite();
  mk3.backgroundRead();
  mk1.backgroundWrite();
  mk1.backgroundRead();
  mk2.backgroundWrite();
  mk2.backgroundRead();
  mk3.backgroundWrite();
  mk3.backgroundRead();
  mk2.commit("/","^\"test/x\":1",null,null);
  String n3=mk3.getNodes("/test",mk3.getHeadRevision(),0,0,10,null);
  assertEquals("{\":childNodeCount\":0}",n3);
  mk3.commit("/","^\"test/y\":2",null,null);
  mk3.backgroundWrite();
  mk3.backgroundRead();
  mk1.backgroundWrite();
  mk1.backgroundRead();
  String r1=mk1.getHeadRevision();
  String n1=mk1.getNodes("/test",r1,0,0,10,null);
  assertEquals("{\"y\":2,\":childNodeCount\":0}",n1);
  mk2.backgroundWrite();
  mk2.backgroundRead();
  mk1.backgroundWrite();
  mk1.backgroundRead();
  String r1b=mk1.getHeadRevision();
  String n1b=mk1.getNodes("/test",r1b,0,0,10,null);
  JSONParser parser=new JSONParser();
  JSONObject obj=(JSONObject)parser.parse(n1b);
  assertEquals(1L,obj.get("x"));
  assertEquals(2L,obj.get("y"));
  assertEquals(0L,obj.get(":childNodeCount"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterTest2 </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void twoNodes() throws Exception {
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  DocumentMK.Builder builder;
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs);
  DocumentMK mk1=builder.setClusterId(1).open();
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs);
  DocumentMK mk2=builder.setClusterId(2).open();
  mk1.commit("/","+\"test\":{\"x\": 1}",null,null);
  mk1.backgroundWrite();
  mk2.backgroundRead();
  String b1=mk2.branch(mk2.getHeadRevision());
  mk2.commit("/","-\"test\"",b1,null);
  String b2=mk2.branch(mk2.getHeadRevision());
  String b2b=mk2.commit("/","-\"test\"",b2,null);
  mk2.merge(b2b,null);
  mk2.backgroundWrite();
  mk1.backgroundRead();
  mk1.commit("/","+\"test\":{\"x\": 1}",null,null);
  mk1.backgroundWrite();
  mk2.backgroundRead();
  String n1=mk1.getNodes("/test",mk1.getHeadRevision(),0,0,10,null);
  String n2=mk2.getNodes("/test",mk2.getHeadRevision(),0,0,10,null);
  assertEquals("{\"x\":1,\":childNodeCount\":0}",n1);
  assertEquals("{\"x\":1,\":childNodeCount\":0}",n2);
  mk1.dispose();
  mk2.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterViewDocumentTest </h4><pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHistory() throws Exception {
  final int localClusterId=1;
  final DocumentNodeStore ns=createMK(localClusterId).nodeStore;
  final Set<Integer> activeIds=new HashSet<Integer>();
  activeIds.add(localClusterId);
  ClusterViewDocument.readOrUpdate(ns,activeIds,null,null);
  final int LOOP_CNT=100;
  for (int i=0; i < LOOP_CNT; i++) {
    activeIds.add(i + 2);
    ClusterViewDocument result=ClusterViewDocument.readOrUpdate(ns,activeIds,null,null);
    assertNotNull(result);
    assertEquals(i + 2,result.getActiveIds().size());
    if (i < 10) {
      assertEquals(i + 1,result.getHistory().size());
    }
 else {
      assertTrue(result.getHistory().size() <= ClusterViewDocument.HISTORY_LIMIT);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructor(){
  ClusterViewDocument doc=new ClusterViewBuilder(1,"2",3).active(3,4).asDoc();
  assertNotNull(doc);
  assertEquals("2",doc.getClusterViewId());
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  doc=new ClusterViewBuilder(1,"2",3).active(3,4).backlogs(5).inactive(5,6).asDoc();
  assertNotNull(doc);
  assertEquals("2",doc.getClusterViewId());
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(2,doc.getInactiveIds().size());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  assertTrue(doc.getInactiveIds().contains(5));
  assertTrue(doc.getInactiveIds().contains(6));
  doc=new ClusterViewBuilder(11,"x",4).active(3,4,5).recovering(6).inactive(7,8).asDoc();
  assertNotNull(doc);
  assertEquals(11,doc.getViewSeqNum());
  assertEquals("x",doc.getClusterViewId());
  assertEquals(1,doc.getRecoveringIds().size());
  assertEquals(2,doc.getInactiveIds().size());
  assertEquals(3,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  assertTrue(doc.getActiveIds().contains(5));
  assertTrue(doc.getRecoveringIds().contains(6));
  assertTrue(doc.getInactiveIds().contains(7));
  assertTrue(doc.getInactiveIds().contains(8));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadUpdate() throws Exception {
  final int localClusterId=11;
  final DocumentNodeStore ns=createMK(localClusterId).nodeStore;
  try {
    ClusterViewDocument.readOrUpdate(ns,null,null,null);
    fail("should complain");
  }
 catch (  Exception ok) {
  }
  try {
    ClusterViewDocument.readOrUpdate(ns,new HashSet<Integer>(),null,null);
    fail("should complain");
  }
 catch (  Exception ok) {
  }
  Set<Integer> activeIds=new HashSet<Integer>();
  activeIds.add(2);
  Set<Integer> recoveringIds=null;
  Set<Integer> inactiveIds=null;
  ClusterViewDocument doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  final String id=doc.getClusterViewId();
  assertTrue(id != null && id.length() > 0);
  String createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  long createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(1,doc.getViewSeqNum());
  assertEquals(1,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(1,doc.getViewSeqNum());
  activeIds.add(3);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(2,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(2,doc.getViewSeqNum());
  recoveringIds=new HashSet<Integer>();
  recoveringIds.add(4);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(3,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(1,doc.getRecoveringIds().size());
  assertTrue(doc.getRecoveringIds().contains(4));
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(3,doc.getViewSeqNum());
  recoveringIds=new HashSet<Integer>();
  inactiveIds=new HashSet<Integer>();
  inactiveIds.add(4);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(4,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(1,doc.getInactiveIds().size());
  assertTrue(doc.getInactiveIds().contains(4));
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterViewTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithRecoveringAndBacklog() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2,3).recovering(4).inactive(5,6).backlogs(5).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("2",props.get("me"));
  assertEquals("false",props.get("final"));
  assertEquals(asJsonArray(2,3),props.get("active"));
  assertEquals(asJsonArray(4,5),props.get("deactivating"));
  assertEquals(asJsonArray(6),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneActiveOneInactive() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2).inactive(3).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("2",props.get("me"));
  assertEquals(asJsonArray(2),props.get("active"));
  assertEquals(asJsonArray(),props.get("deactivating"));
  assertEquals(asJsonArray(3),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetters() throws Exception {
  final Integer viewId=3;
  final String clusterViewId=UUID.randomUUID().toString();
  final Set<Integer> instanceIds=new HashSet<Integer>();
  instanceIds.add(1);
  final Integer instanceId=2;
  final Set<Integer> deactivating=new HashSet<Integer>();
  final Set<Integer> inactive=new HashSet<Integer>();
  final ClusterView cv=new ClusterView(viewId,true,clusterViewId,instanceId,instanceIds,deactivating,inactive);
  assertNotNull(cv);
  assertTrue(cv.asDescriptorValue().length() > 0);
  assertTrue(cv.toString().length() > 0);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneActiveSeveralInactive() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2).inactive(3,4,5,6).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("true",props.get("final"));
  assertEquals("2",props.get("me"));
  assertEquals(asJsonArray(2),props.get("active"));
  assertEquals(asJsonArray(),props.get("deactivating"));
  assertEquals(asJsonArray(3,4,5,6),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneActiveOnly() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,21);
  ClusterView view=builder.active(21).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("21",props.get("me"));
  assertEquals(asJsonArray(21),props.get("active"));
  assertEquals(asJsonArray(),props.get("deactivating"));
  assertEquals(asJsonArray(),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSeveralActiveOneInactive() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2,5,6).inactive(3).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("true",props.get("final"));
  assertEquals("2",props.get("me"));
  assertEquals(asJsonArray(2,5,6),props.get("active"));
  assertEquals(asJsonArray(),props.get("deactivating"));
  assertEquals(asJsonArray(3),props.get("inactive"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithRecoveringOnly() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  ClusterViewBuilder builder=new ClusterViewBuilder(10,clusterViewId,2);
  ClusterView view=builder.active(2,3).recovering(4).inactive(5,6).asView();
  JsonObject o=asJsonObject(view);
  Map<String,String> props=o.getProperties();
  assertEquals("10",props.get("seq"));
  assertEquals("true",props.get("final"));
  assertEquals("2",props.get("me"));
  assertEquals(asJsonArray(2,3),props.get("active"));
  assertEquals(asJsonArray(4),props.get("deactivating"));
  assertEquals(asJsonArray(5,6),props.get("inactive"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CollisionTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void purge() throws Exception {
  DocumentMK mk1=builderProvider.newBuilder().setClusterId(1).open();
  DocumentNodeStore ns1=mk1.getNodeStore();
  DocumentStore store=ns1.getDocumentStore();
  DocumentMK mk2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).open();
  DocumentNodeStore ns2=mk2.getNodeStore();
  createCollision(mk1);
  createCollision(mk2);
  String id=getIdFromPath("/");
  assertEquals(2,store.find(NODES,id).getLocalMap(COLLISIONS).size());
  ns1.dispose();
  mk1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).open();
  ns1=mk1.getNodeStore();
  assertEquals(1,store.find(NODES,id).getLocalMap(COLLISIONS).size());
  ns1.dispose();
  ns2.dispose();
  mk2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).open();
  ns2=mk2.getNodeStore();
  assertEquals(0,store.find(NODES,id).getLocalMap(COLLISIONS).size());
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void isConflicting() throws CommitFailedException {
  DocumentNodeStore ns=builderProvider.newBuilder().setAsyncDelay(0).getNodeStore();
  DocumentStore store=ns.getDocumentStore();
  String id=Utils.getIdFromPath("/test");
  NodeBuilder b=ns.getRoot().builder();
  b.child("test").setProperty("p","a");
  Revision r1=merge(ns,b).getRevision(ns.getClusterId());
  assertNotNull(r1);
  NodeDocument doc=getDocument(store,id);
  Revision c=ns.newRevision();
  UpdateOp op=new UpdateOp(id,true);
  NodeDocument.setDeleted(op,c,false);
  Collision col=new Collision(doc,r1,op,c);
  assertTrue(col.isConflicting());
  op=new UpdateOp(id,false);
  op.setMapEntry("p",c,"b");
  col=new Collision(doc,r1,op,c);
  assertTrue(col.isConflicting());
  b=ns.getRoot().builder();
  b.child("test").setProperty("p","b");
  Revision r2=merge(ns,b).getRevision(ns.getClusterId());
  assertNotNull(r2);
  doc=getDocument(store,id);
  c=ns.newRevision();
  op=new UpdateOp(id,false);
  op.setDelete(true);
  NodeDocument.setDeleted(op,c,true);
  col=new Collision(doc,r2,op,c);
  assertTrue(col.isConflicting());
  op=new UpdateOp(id,false);
  op.setMapEntry("p",c,"c");
  col=new Collision(doc,r2,op,c);
  assertTrue(col.isConflicting());
  op=new UpdateOp(id,false);
  op.setMapEntry("q",c,"a");
  col=new Collision(doc,r2,op,c);
  assertFalse(col.isConflicting());
  b=ns.getRoot().builder();
  b.child("test").remove();
  Revision r3=merge(ns,b).getRevision(ns.getClusterId());
  assertNotNull(r3);
  doc=getDocument(store,id);
  c=ns.newRevision();
  op=new UpdateOp(id,false);
  op.setDelete(true);
  NodeDocument.setDeleted(op,c,true);
  col=new Collision(doc,r3,op,c);
  assertTrue(col.isConflicting());
  op=new UpdateOp(id,false);
  op.setMapEntry("p",c,"d");
  col=new Collision(doc,r3,op,c);
  assertTrue(col.isConflicting());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CollisionWithSplitTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void collisionAfterSplit() throws Exception {
  final int NUM_NODES=10;
  NodeBuilder b1=ns1.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    b1.child("node-" + i);
  }
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  Revision conflictRev=null;
  for (int i=0; i < NUM_NODES; i++) {
    b1=ns1.getRoot().builder();
    b1.setProperty("p",i);
    b1.child("node-" + i).remove();
    merge(ns1,b1);
    if (i == 0) {
      conflictRev=ns1.getHeadRevision().getRevision(ns1.getClusterId());
    }
  }
  assertNotNull(conflictRev);
  DocumentStore store=ns1.getDocumentStore();
  NodeDocument doc=Utils.getRootDocument(store);
  List<UpdateOp> ops=SplitOperations.forDocument(doc,ns1,ns1.getHeadRevision(),NUM_NODES);
  assertFalse(ops.isEmpty());
  for (  UpdateOp op : ops) {
    if (!op.isNew() || !store.create(NODES,Collections.singletonList(op))) {
      store.createOrUpdate(NODES,op);
    }
  }
  String id=Utils.getIdFromPath("/node-0");
  UpdateOp op=new UpdateOp(id,false);
  Revision ourRev=ns2.newRevision();
  op.setMapEntry("p",ourRev,"v");
  NodeDocument.setModified(op,ourRev);
  NodeDocument.setCommitRoot(op,ourRev,0);
  ns2.getDocumentStore().findAndUpdate(NODES,op);
  doc=ns2.getDocumentStore().find(NODES,id);
  assertTrue(doc.getLocalCommitRoot().containsKey(conflictRev));
  Collision c=new Collision(doc,conflictRev,op,ourRev);
  assertEquals("Collision must match our revision (" + ourRev + "). "+ "The conflict revision "+ conflictRev+ " is already committed.",ourRev,c.mark(ns2.getDocumentStore()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CommitQueueTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void suspendUntil() throws Exception {
  final AtomicReference<RevisionVector> headRevision=new AtomicReference<RevisionVector>();
  RevisionContext context=new DummyRevisionContext(){
    @Nonnull @Override public RevisionVector getHeadRevision(){
      return headRevision.get();
    }
  }
;
  headRevision.set(new RevisionVector(context.newRevision()));
  final CommitQueue queue=new CommitQueue(context);
  final Revision newHeadRev=context.newRevision();
  final Set<Revision> revisions=queue.createRevisions(10);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      queue.suspendUntilAll(union(of(newHeadRev),revisions));
    }
  }
);
  t.start();
  for (int i=0; i < 100; i++) {
    if (queue.numSuspendedThreads() > 0) {
      break;
    }
    Thread.sleep(10);
  }
  assertEquals(1,queue.numSuspendedThreads());
  queue.headRevisionChanged();
  assertEquals(1,queue.numSuspendedThreads());
  headRevision.set(new RevisionVector(newHeadRev));
  queue.headRevisionChanged();
  assertEquals(1,queue.numSuspendedThreads());
  for (  Revision rev : revisions) {
    queue.canceled(rev);
  }
  assertEquals(0,queue.numSuspendedThreads());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void branchCommitMustNotBlockTrunkCommit() throws Exception {
  final DocumentNodeStore ds=builderProvider.newBuilder().getNodeStore();
  Commit c=ds.newCommit(ds.getHeadRevision().asBranchRevision(ds.getClusterId()),null);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        NodeBuilder builder=ds.getRoot().builder();
        builder.child("foo");
        ds.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      }
 catch (      CommitFailedException e) {
        exceptions.add(e);
      }
    }
  }
);
  t.start();
  t.join(3000);
  assertFalse("Commit did not succeed within 3 seconds",t.isAlive());
  ds.canceled(c);
  assertNoExceptions();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void suspendUntilTimeout() throws Exception {
  final AtomicReference<RevisionVector> headRevision=new AtomicReference<RevisionVector>();
  RevisionContext context=new DummyRevisionContext(){
    @Nonnull @Override public RevisionVector getHeadRevision(){
      return headRevision.get();
    }
  }
;
  headRevision.set(new RevisionVector(context.newRevision()));
  final CommitQueue queue=new CommitQueue(context);
  queue.setSuspendTimeoutMillis(0);
  final Revision r=context.newRevision();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      queue.suspendUntilAll(of(r));
    }
  }
);
  t.start();
  t.join(1000);
  assertFalse(t.isAlive());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrentSuspendUntil() throws Exception {
  final AtomicReference<RevisionVector> headRevision=new AtomicReference<RevisionVector>();
  RevisionContext context=new DummyRevisionContext(){
    @Nonnull @Override public RevisionVector getHeadRevision(){
      return headRevision.get();
    }
  }
;
  headRevision.set(new RevisionVector(context.newRevision()));
  List<Thread> threads=new ArrayList<Thread>();
  List<Revision> allRevisions=new ArrayList<Revision>();
  final CommitQueue queue=new CommitQueue(context);
  for (int i=0; i < 10; i++) {
    final Set<Revision> revisions=new HashSet<Revision>();
    for (int j=0; j < 10; j++) {
      Revision r=queue.createRevision();
      revisions.add(r);
      allRevisions.add(r);
    }
    Thread t=new Thread(new Runnable(){
      public void run(){
        queue.suspendUntilAll(revisions);
      }
    }
);
    threads.add(t);
    t.start();
  }
  for (int i=0; i < 100; i++) {
    if (queue.numSuspendedThreads() == 10) {
      break;
    }
    Thread.sleep(10);
  }
  assertEquals(10,queue.numSuspendedThreads());
  Collections.shuffle(allRevisions);
  for (  Revision r : allRevisions) {
    queue.canceled(r);
    Thread.sleep(10);
  }
  for (int i=0; i < 100; i++) {
    if (queue.numSuspendedThreads() == 0) {
      break;
    }
    Thread.sleep(10);
  }
  assertEquals(0,queue.numSuspendedThreads());
  for (  Thread t : threads) {
    t.join(1000);
    assertFalse(t.isAlive());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CommitRootUpdateTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void exceptionOnUpdate() throws Exception {
  final AtomicBoolean throwAfterUpdate=new AtomicBoolean(false);
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T findAndUpdate(    Collection<T> collection,    UpdateOp update){
      T doc=super.findAndUpdate(collection,update);
      if (isFinalCommitRootUpdate(update) && throwAfterUpdate.compareAndSet(true,false)) {
        throw new RuntimeException("communication failure");
      }
      return doc;
    }
    private boolean isFinalCommitRootUpdate(    UpdateOp update){
      boolean finalUpdate=true;
      for (      Map.Entry<Key,Operation> op : update.getChanges().entrySet()) {
        String name=op.getKey().getName();
        if (NodeDocument.isRevisionsEntry(name) || NodeDocument.MODIFIED_IN_SECS.equals(name)) {
          continue;
        }
        finalUpdate=false;
        break;
      }
      return finalUpdate;
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b=ns.getRoot().builder();
  b.child("foo");
  b.child("bar");
  merge(ns,b);
  throwAfterUpdate.set(true);
  boolean success=false;
  Commit c=ns.newCommit(ns.getHeadRevision(),null);
  try {
    c.addNode(new DocumentNodeState(ns,"/foo/node",c.getBaseRevision()));
    c.addNode(new DocumentNodeState(ns,"/bar/node",c.getBaseRevision()));
    c.apply();
    success=true;
  }
  finally {
    if (success) {
      ns.done(c,false,null);
    }
 else {
      ns.canceled(c);
    }
  }
  NodeState root=ns.getRoot();
  assertTrue(root.getChildNode("foo").getChildNode("node").exists());
  assertTrue(root.getChildNode("bar").getChildNode("node").exists());
  assertFalse(throwAfterUpdate.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConcurrentDocumentStoreTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConcurrentCreateOrUpdate() throws Exception {
  int workers=8;
  String id=this.getClass().getName() + ".testConcurrentCreateOrUpdate";
  super.removeMe.add(id);
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<Thread> worker=new ArrayList<Thread>();
  for (int i=0; i < workers; i++) {
    worker.add(new Thread(new Worker(id,true,exceptions)));
  }
  for (  Thread t : worker) {
    t.start();
  }
  for (  Thread t : worker) {
    t.join();
  }
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  Document d=ds.find(Collection.NODES,id);
  String val=d.get("counter").toString();
  org.junit.Assert.assertEquals("counter property not updated as expected",Integer.toString(workers),val);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConcurrentUpdate() throws Exception {
  int workers=20;
  String id=this.getClass().getName() + ".testConcurrentUpdate";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("thread",Thread.currentThread().getName());
  up.set("counter",0L);
  ds.create(Collection.NODES,Collections.singletonList(up));
  super.removeMe.add(id);
  List<Exception> exceptions=Collections.synchronizedList(new ArrayList<Exception>());
  List<Thread> worker=new ArrayList<Thread>();
  for (int i=0; i < workers; i++) {
    worker.add(new Thread(new Worker(id,false,exceptions)));
  }
  for (  Thread t : worker) {
    t.start();
  }
  for (  Thread t : worker) {
    t.join();
  }
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  Document d=ds.find(Collection.NODES,id);
  String val=d.get("counter").toString();
  org.junit.Assert.assertEquals("counter property not updated as expected",Integer.toString(workers),val);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConflictExceptionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void asCommitFailedException(){
  Revision r=Revision.newRevision(1);
  ConflictException e=new ConflictException("conflict",r);
  CommitFailedException cfe=e.asCommitFailedException();
  assertTrue(cfe instanceof FailedWithConflictException);
  FailedWithConflictException fwce=(FailedWithConflictException)cfe;
  assertEquals(CommitFailedException.MERGE,fwce.getType());
  assertEquals(Collections.singleton(r),fwce.getConflictRevisions());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void type(){
  ConflictException e=new ConflictException("conflict");
  CommitFailedException cfe=e.asCommitFailedException();
  assertEquals(CommitFailedException.MERGE,cfe.getType());
}

</code></pre>

<br>
<pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void cause(){
  ConflictException e=new ConflictException("conflict");
  CommitFailedException cfe=e.asCommitFailedException();
  assertSame(e,cfe.getCause());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKBranchTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Creates the following revision history:
 * <pre>
 * + rev1 (first commit with /child1)
 * |\
 * | + branchRev1 (branch from rev1)
 * | + branchRev11 (branch commit /child1/foo:1)
 * |
 * + rev2 (second commit with /child2)
 * |\
 * | + branchRev2 (brach from rev2)
 * </pre>
 * The test reads /child from <code>branchRev2</code> and expects
 * the version from the first commit.
 * @throws ParseException
 */
@Test public void isolatedBranches() throws ParseException {
  String rev1=mk.commit("","+\"/child1\":{}",null,"");
  String branchRev1=mk.branch(rev1);
  mk.commit("/child1","^\"foo\":1",branchRev1,"");
  String rev2=mk.commit("","+\"/child2\":{}",null,"");
  String branchRev2=mk.branch(rev2);
  String json=mk.getNodes("/child1",branchRev2,0,0,-1,null);
  JSONParser parser=new JSONParser();
  JSONObject obj=(JSONObject)parser.parse(json);
  assertFalse(obj.containsKey("foo"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void movesInBranch() throws Exception {
  String branchRev=mk.branch(null);
  branchRev=mk.commit("/","+\"a\":{}",branchRev,null);
  branchRev=mk.commit("/a","^\"foo\":1",branchRev,null);
  branchRev=mk.commit("/",">\"a\" : \"b\"",branchRev,null);
  branchRev=mk.commit("/",">\"b\" : \"a\"",branchRev,null);
  mk.merge(branchRev,null);
  String json=mk.getNodes("/a",null,0,0,-1,null);
  JSONParser parser=new JSONParser();
  JSONObject obj=(JSONObject)parser.parse(json);
  assertTrue(obj.containsKey("foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKGetHeadRevisionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simple() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  String rev1=scenario.create();
  String rev2=mk.getHeadRevision();
  assertEquals(rev1,rev2);
  String rev3=scenario.deleteA();
  assertFalse(rev3.equals(rev2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKNodeExistsTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void simple() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  String revisionId=scenario.create();
  boolean exists=mk.nodeExists("/a",revisionId);
  assertTrue(exists);
  exists=mk.nodeExists("/a/b",revisionId);
  assertTrue(exists);
  revisionId=scenario.deleteA();
  exists=mk.nodeExists("/a",revisionId);
  assertFalse(exists);
  exists=mk.nodeExists("/a/b",revisionId);
  assertFalse(exists);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void existsInOldRevNotInNewRev() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  String rev1=scenario.create();
  String rev2=scenario.deleteA();
  boolean exists=mk.nodeExists("/a",rev1);
  assertTrue(exists);
  exists=mk.nodeExists("/a",rev2);
  assertFalse(exists);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKResetTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resetMultipleCommits(){
  DocumentStore store=mk.getDocumentStore();
  addNodes(null,"/foo");
  String b0=mk.branch(null);
  String b1=mk.commit("","^\"/foo/p1\":1",b0,null);
  String b2=mk.commit("","^\"/foo/p2\":1",b1,null);
  String b3=mk.commit("","^\"/foo/p3\":1",b2,null);
  mk.commit("","^\"/foo/p2\":1^\"/foo/p3\":1",null,null);
  NodeDocument rootDoc=store.find(NODES,getIdFromPath("/"));
  assertNotNull(rootDoc);
  Map<Revision,String> collisions=rootDoc.getValueMap(COLLISIONS);
  assertEquals(2,collisions.size());
  assertTrue(collisions.containsKey(Revision.fromString(b2).asTrunkRevision()));
  assertTrue(collisions.containsKey(Revision.fromString(b3).asTrunkRevision()));
  try {
    mk.merge(b3,null);
    fail("merge with conflict must fail");
  }
 catch (  DocumentStoreException e) {
  }
  String b4=mk.reset(b3,b1);
  String b5=mk.commit("","^\"/foo/p4\":1",b4,null);
  rootDoc=store.find(NODES,getIdFromPath("/"));
  assertNotNull(rootDoc);
  collisions=rootDoc.getValueMap(COLLISIONS);
  assertEquals(0,collisions.size());
  String rev=mk.merge(b5,null);
  assertPropExists(rev,"/foo","p1");
  assertPropExists(rev,"/foo","p2");
  assertPropExists(rev,"/foo","p3");
  assertPropExists(rev,"/foo","p4");
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resetRemovesCommitRootOnParent(){
  DocumentStore store=mk.getDocumentStore();
  addNodes(null,"/foo");
  String b0=mk.branch(null);
  String b1=addNodes(b0,"/foo/bar");
  NodeDocument foo=store.find(NODES,getIdFromPath("/foo"));
  assertNotNull(foo);
  assertTrue(foo.getLocalCommitRoot().containsKey(Revision.fromString(b1).asTrunkRevision()));
  addNodes(null,"/foo/bar");
  mk.reset(b1,b0);
  foo=store.find(NODES,getIdFromPath("/foo"));
  assertNotNull(foo);
  assertFalse(foo.getLocalCommitRoot().containsKey(Revision.fromString(b1).asTrunkRevision()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStateTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getMemory(){
  DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  RevisionVector rv=new RevisionVector(Revision.newRevision(1));
  DocumentNodeState state=new DocumentNodeState(store,"/foo",rv);
  assertEquals(232,state.getMemory());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrentChildOperations() throws Exception {
  Clock clock=new Clock.Virtual();
  Revision.setClock(clock);
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setAsyncDelay(0).clock(clock).setDocumentStore(store).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setAsyncDelay(0).clock(clock).setDocumentStore(store).setClusterId(2).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  NodeBuilder node=b1.child("foo").child("bar");
  node.child("child-0");
  node.child("child-1");
  node.child("child-2");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  b1.child("foo").child("bar").getChildNode("child-0").remove();
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("foo").child("bar").getChildNode("child-1").remove();
  merge(ns2,b2);
  List<ChildNodeEntry> children=Lists.newArrayList(ns2.getRoot().getChildNode("foo").getChildNode("bar").getChildNodeEntries());
  assertEquals(2,Iterables.size(children));
  RevisionVector invalidate=null;
  for (  ChildNodeEntry entry : children) {
    if (entry.getName().equals("child-0")) {
      invalidate=asDocumentNodeState(entry.getNodeState()).getRevision();
    }
  }
  assertNotNull(invalidate);
  ns2.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + TimeUnit.HOURS.toMillis(2));
  ns1.getVersionGarbageCollector().gc(1,TimeUnit.HOURS);
  ns2.invalidateNodeCache("/foo/bar/child-0",invalidate);
  children=Lists.newArrayList(ns2.getRoot().getChildNode("foo").getChildNode("bar").getChildNodeEntries());
  assertEquals(1,Iterables.size(children));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void retrieve() throws Exception {
  DocumentNodeStore store=new DocumentMK.Builder().getNodeStore();
  String ref=store.checkpoint(60000);
  assertNotNull(store.retrieve(ref));
  ref=Revision.newRevision(1).toString();
  assertNull(store.retrieve(ref));
  ref=UUID.randomUUID().toString();
  assertNull(store.retrieve(ref));
  store.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void lastRevWithRevisionVector() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("parent");
  merge(ns1,b1);
  b1=ns1.getRoot().builder();
  NodeBuilder parent=b1.child("parent");
  parent.setProperty("p",1);
  parent.child("child");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("parent").setProperty("p",2);
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  assertTrue(ns1.getRoot().getChildNode("parent").hasChildNode("child"));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ignoreUncommitted() throws Exception {
  final AtomicLong numPreviousFinds=new AtomicLong();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      if (Utils.getPathFromId(key).startsWith("p")) {
        numPreviousFinds.incrementAndGet();
      }
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  String id=Utils.getIdFromPath("/test");
  NodeBuilder b=ns.getRoot().builder();
  b.child("test").setProperty("p","a");
  merge(ns,b);
  NodeDocument doc;
  int i=0;
  do {
    b=ns.getRoot().builder();
    b.child("test").setProperty("q",i++);
    merge(ns,b);
    doc=store.find(NODES,id);
    assertNotNull(doc);
    if (i % 100 == 0) {
      ns.runBackgroundOperations();
    }
  }
 while (doc.getPreviousRanges().isEmpty());
  Revision r=ns.newRevision();
  UpdateOp op=new UpdateOp(id,false);
  NodeDocument.setCommitRoot(op,r,0);
  op.setMapEntry("p",r,"b");
  assertNotNull(store.findAndUpdate(NODES,op));
  doc=store.find(NODES,id);
  numPreviousFinds.set(0);
  doc.getNodeAtRevision(ns,ns.getHeadRevision(),null);
  assertEquals(0,numPreviousFinds.get());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNewestRevision2() throws Exception {
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(1).getNodeStore();
  ns1.getRoot();
  Revision r1=ns1.getHeadRevision().getRevision(ns1.getClusterId());
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(2).getNodeStore();
  ns2.getRoot();
  NodeBuilder b1=ns1.getRoot().builder();
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1.setProperty("p",String.valueOf(i));
    ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns1.runBackgroundOperations();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  Revision newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),Revision.newRevision(ns2.getClusterId()),null,Sets.<Revision>newHashSet());
  assertEquals(r1,newest);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void notYetVisibleExceptionMessage() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  ns2.setMaxBackOffMillis(0);
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("test").setProperty("p","v");
  merge(ns1,b1);
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("test").setProperty("q","v");
  try {
    merge(ns2,b2);
    fail("Must throw CommitFailedException");
  }
 catch (  CommitFailedException e) {
    assertNotNull(e.getCause());
    assertTrue(e.getCause().getMessage().contains("not yet visible"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commitHookChangesOnBranch() throws Exception {
  final int NUM_NODES=DocumentRootBuilder.UPDATE_LIMIT / 2;
  final int NUM_PROPS=10;
  DocumentNodeStore ns=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.child("n" + i);
    for (int j=0; j < NUM_PROPS; j++) {
      c.setProperty("q" + j,"value");
      c.setProperty("p" + j,"value");
    }
  }
  try {
    ns.merge(builder,CompositeHook.compose(Arrays.asList(new TestHook("p"),new TestHook("q"),FAILING_HOOK)),CommitInfo.EMPTY);
    fail("merge must fail and reset changes done by commit hooks");
  }
 catch (  CommitFailedException e) {
  }
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.getChildNode("n" + i);
    assertTrue(c.exists());
    for (int j=0; j < NUM_PROPS; j++) {
      PropertyState p=c.getProperty("p" + j);
      assertNotNull(p);
      assertEquals("value",p.getValue(Type.STRING));
      p=c.getProperty("q" + j);
      assertNotNull(p);
      assertEquals("value",p.getValue(Type.STRING));
    }
  }
  ns.merge(builder,CompositeHook.compose(Arrays.<CommitHook>asList(new TestHook("p"),new TestHook("q"))),CommitInfo.EMPTY);
  builder=ns.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.getChildNode("n" + i);
    assertTrue(c.exists());
    for (int j=0; j < NUM_PROPS; j++) {
      PropertyState p=c.getProperty("p" + j);
      assertNotNull(p);
      assertEquals("test",p.getValue(Type.STRING));
      p=c.getProperty("q" + j);
      assertNotNull(p);
      assertEquals("test",p.getValue(Type.STRING));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dispose() throws CommitFailedException, InterruptedException {
  final BlockingQueue<String> updates=new ArrayBlockingQueue<String>(1);
  final AtomicBoolean throttleUpdates=new AtomicBoolean(true);
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>void update(    Collection<T> collection,    List<String> keys,    UpdateOp updateOp){
      if (throttleUpdates.get()) {
        for (        String k : keys) {
          try {
            updates.put(k);
          }
 catch (          InterruptedException e) {
            throw new RuntimeException(e);
          }
        }
      }
      super.update(collection,keys,updateOp);
    }
  }
;
  final DocumentNodeStore store=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  updates.clear();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child("node");
  merge(store,builder);
  builder=store.getRoot().builder();
  builder.child("test").child("node").child("child-1");
  merge(store,builder);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      store.dispose();
    }
  }
);
  t.start();
  String p=updates.take();
  assertEquals("2:/test/node",p);
  assertTrue(t.isAlive());
  for (; ; ) {
    if (updates.peek() != null) {
      break;
    }
  }
  try {
    builder=store.getRoot().builder();
    builder.child("test").child("node").child("child-2");
    merge(store,builder);
    fail("Merge must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  while (t.isAlive()) {
    updates.poll(10,TimeUnit.MILLISECONDS);
  }
  updates.clear();
  throttleUpdates.set(false);
  DocumentNodeStore store2=builderProvider.newBuilder().setClusterId(2).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  LastRevRecoveryAgent agent=new LastRevRecoveryAgent(store2);
  if (agent.isRecoveryNeeded()) {
    agent.recover(1);
  }
  builder=store2.getRoot().builder();
  NodeBuilder test=builder.getChildNode("test");
  assertTrue(test.exists());
  NodeBuilder node=test.getChildNode("node");
  assertTrue(node.exists());
  if (!node.hasChildNode("child-2")) {
    node.child("child-2");
    merge(store2,builder);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rootRevision() throws Exception {
  DocumentNodeStore ns=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("foo").child("child");
  builder.child("bar").child("child");
  merge(ns,builder);
  builder=ns.getRoot().builder();
  builder.child("foo").child("child").child("node");
  merge(ns,builder);
  RevisionVector head=ns.getHeadRevision();
  NodeState child=ns.getRoot().getChildNode("bar").getChildNode("child");
  assertTrue(child instanceof DocumentNodeState);
  DocumentNodeState state=(DocumentNodeState)child;
  assertEquals(head,state.getRootRevision());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void backgroundLeaseUpdateThread() throws Exception {
  int clusterId=-1;
  Random random=new Random();
  for (int i=0; i < 10; i++) {
    int id=random.nextInt(1000) + 1000;
    if (!backgroundLeaseUpdateThreadRunning(id)) {
      clusterId=id;
      break;
    }
  }
  assertNotEquals(-1,clusterId);
  DocumentNodeStore ns=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(clusterId).getNodeStore();
  for (int i=0; i < 10; i++) {
    if (!backgroundLeaseUpdateThreadRunning(clusterId)) {
      Thread.sleep(100);
    }
  }
  assertTrue(backgroundLeaseUpdateThreadRunning(clusterId));
  assertEquals(clusterId,ns.getClusterId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readFromPreviousDoc() throws CommitFailedException {
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("test").setProperty("prop","initial");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns.dispose();
  ns=builderProvider.newBuilder().setClusterId(2).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  builder=ns.getRoot().builder();
  builder.child("test").setProperty("prop","value");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  RevisionVector rev=ns.getHeadRevision();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  DocumentNodeState state=doc.getNodeAtRevision(ns,rev,null);
  assertNotNull(state);
  assertTrue(state.hasProperty("prop"));
  assertEquals("value",state.getProperty("prop").getValue(Type.STRING));
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.child("test").setProperty("prop","v-" + i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns.runBackgroundOperations();
  doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  state=doc.getNodeAtRevision(ns,rev,null);
  assertNotNull(state);
  assertTrue(state.hasProperty("prop"));
  assertEquals("value",state.getProperty("prop").getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void docChildCacheWithIncompatiblDocStoreSort() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  final ConcurrentSkipListMap<String,NodeDocument> nodes=new ConcurrentSkipListMap<String,NodeDocument>(new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      int ret=o1.compareTo(o2);
      if (o1.indexOf("child") > 0 && o2.indexOf("child") > 0) {
        ret=(-ret);
      }
      return ret;
    }
  }
);
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override @SuppressWarnings("unchecked") protected <T extends Document>ConcurrentSkipListMap<String,T> getMap(    Collection<T> collection){
      if (collection == Collection.NODES) {
        return (ConcurrentSkipListMap<String,T>)nodes;
      }
 else {
        return super.getMap(collection);
      }
    }
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setUseSimpleRevision(true).setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder parentBuilder=builder.child("parent");
  int numChildren=DocumentNodeState.INITIAL_FETCH_SIZE - 2;
  for (int i=0; i < numChildren; i++) {
    parentBuilder.child("child" + (i + 1));
  }
  merge(store,builder);
  store.invalidateNodeChildrenCache();
  NodeState parentNodeState=store.getRoot().getChildNode("parent");
  Iterables.size(parentNodeState.getChildNodeEntries());
  reads.clear();
  NodeState nonExistingChild=parentNodeState.getChildNode("child501-non-existing-child");
  assertEquals("Fully cached entry in doc child cache should be able to find non existing children" + " even if doc store sort order is incompatible to that of Java",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  store.invalidateNodeCache("/parent/child25",store.getHeadRevision());
  reads.clear();
  NodeState existingChild=parentNodeState.getChildNode("child25");
  assertTrue("Fully cached entry in doc child cache should be able to find existing children" + " even if doc store sort order is incompatible to that of Java",reads.size() > 0);
  assertTrue("Existing children should be reported as such",existingChild.exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rollback() throws Exception {
  final Map<Thread,Semaphore> locks=Collections.synchronizedMap(new HashMap<Thread,Semaphore>());
  final Semaphore created=new Semaphore(0);
  DocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>List<T> createOrUpdate(    Collection<T> collection,    List<UpdateOp> updateOps){
      Semaphore semaphore=locks.get(Thread.currentThread());
      List<T> result=super.createOrUpdate(collection,updateOps);
      if (semaphore != null) {
        created.release();
        semaphore.acquireUninterruptibly();
      }
      return result;
    }
  }
;
  final List<Exception> exceptions=new ArrayList<Exception>();
  final DocumentMK mk=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).open();
  final DocumentNodeStore store=mk.getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("deletedNode");
  builder.child("updateNode").setProperty("foo","bar");
  merge(store,builder);
  builder=store.getRoot().builder();
  builder.child("deletedNode").remove();
  merge(store,builder);
  final RevisionVector head=store.getHeadRevision();
  Thread writer=new Thread(new Runnable(){
    @Override public void run(){
      try {
        Revision r=store.newRevision();
        Commit c=new Commit(store,r,head,null);
        c.addNode(new DocumentNodeState(store,"/newConflictingNode",new RevisionVector(r)));
        c.addNode(new DocumentNodeState(store,"/deletedNode",new RevisionVector(r)));
        c.updateProperty("/updateNode","foo","baz");
        c.apply();
      }
 catch (      DocumentStoreException e) {
        exceptions.add(e);
      }
    }
  }
);
  final Semaphore s=new Semaphore(0);
  locks.put(writer,s);
  writer.start();
  created.acquireUninterruptibly();
  Revision r=store.newRevision();
  Commit c=new Commit(store,r,head,null);
  c.addNode(new DocumentNodeState(store,"/newConflictingNode",new RevisionVector(r)));
  c.addNode(new DocumentNodeState(store,"/newNonConflictingNode",new RevisionVector(r)));
  c.apply();
  s.release();
  writer.join();
  assertEquals("expected exception",1,exceptions.size());
  String id=Utils.getIdFromPath("/newConflictingNode");
  NodeDocument doc=docStore.find(NODES,id);
  assertNotNull("document with id " + id + " does not exist",doc);
  assertTrue("document with id " + id + " should get _deletedOnce marked due to rollback",doc.wasDeletedOnce());
  id=Utils.getIdFromPath("/newNonConflictingNode");
  doc=docStore.find(NODES,id);
  assertNull("document with id " + id + " must not have _deletedOnce",doc.get(NodeDocument.DELETED_ONCE));
  id=Utils.getIdFromPath("/deletedNode");
  doc=docStore.find(NODES,id);
  assertTrue("document with id " + id + " should get _deletedOnce marked due to rollback",doc.wasDeletedOnce());
  id=Utils.getIdFromPath("/updateNode");
  doc=docStore.find(NODES,id);
  assertNull("document with id " + id + " must not have _deletedOnce despite rollback",doc.get(NodeDocument.DELETED_ONCE));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void clusterWithClockDifferences2() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  long now=System.currentTimeMillis();
  Clock c1=new Clock.Virtual();
  c1.waitUntil(now);
  Revision.setClock(c1);
  DocumentNodeStore ns1=builderProvider.newBuilder().clock(c1).setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("node").setProperty("p",1);
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Clock c2=new Clock.Virtual();
  c2.waitUntil(now + 5000);
  Revision.setClock(c2);
  DocumentNodeStore ns2=builderProvider.newBuilder().clock(c2).setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  assertTrue(ns2.getRoot().hasChildNode("node"));
  assertEquals(1,ns2.getRoot().getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").setProperty("p",2);
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c1);
  ns1.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  assertEquals(2,b1.getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
  b1.child("node").setProperty("p",3);
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c2);
  ns2.runBackgroundOperations();
  b2=ns2.getRoot().builder();
  assertEquals(3,b2.getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergedBranchVisibility() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().setAsyncDelay(0).getNodeStore();
  DocumentStore docStore=store.getDocumentStore();
  NodeBuilder builder1=store.getRoot().builder();
  builder1.child("test");
  merge(store,builder1);
  builder1=store.getRoot().builder();
  NodeBuilder node=builder1.getChildNode("test").child("node");
  String id=Utils.getIdFromPath("/test/node");
  int i=0;
  while (docStore.find(NODES,id) == null) {
    node.setProperty("foo",i++);
  }
  NodeDocument doc=docStore.find(NODES,id);
  assertNotNull(doc);
  RevisionVector rev=new RevisionVector(doc.getLocalDeleted().firstKey());
  merge(store,builder1);
  assertFalse(store.getRoot(rev).getChildNode("test").getChildNode("node").exists());
  assertTrue(store.getRoot().getChildNode("test").getChildNode("node").exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void branchBaseBeforeClusterJoin() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("parent");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("parent").child("baz");
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  DocumentNodeState root=ns1.getRoot();
  DocumentNodeStoreBranch b=ns1.createBranch(root);
  NodeBuilder builder=root.builder();
  builder.child("parent").child("foo");
  b.setRoot(builder.getNodeState());
  builder.child("parent").child("bar");
  b.setRoot(builder.getNodeState());
  b.rebase();
  NodeState parent=b.getHead().getChildNode("parent");
  assertTrue(parent.exists());
  assertTrue(parent.hasChildNode("foo"));
  assertTrue(parent.hasChildNode("bar"));
  assertFalse(parent.hasChildNode("baz"));
  ns1.runBackgroundOperations();
  b.merge(EmptyHook.INSTANCE,CommitInfo.EMPTY);
  parent=ns1.getRoot().getChildNode("parent");
  assertTrue(parent.exists());
  assertTrue(parent.hasChildNode("foo"));
  assertTrue(parent.hasChildNode("bar"));
  assertTrue(parent.hasChildNode("baz"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void childNodeCache() throws Exception {
  DocumentNodeStore store=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  int max=(int)(100 * 1.5);
  SortedSet<String> children=new TreeSet<String>();
  for (int i=0; i < max; i++) {
    String name="c" + i;
    children.add(name);
    builder.child(name);
  }
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=store.getRoot().builder();
  String name=new ArrayList<String>(children).get(100 / 2);
  builder.child(name).remove();
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  int numEntries=Iterables.size(store.getRoot().getChildNodeEntries());
  assertEquals(max - 1,numEntries);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void parentWithUnseenChildrenMustNotBeDeleted() throws Exception {
  final MemoryDocumentStore docStore=new MemoryDocumentStore();
  final DocumentNodeStore store1=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(1).getNodeStore();
  store1.setEnableConcurrentAddRemove(true);
  final DocumentNodeStore store2=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(2).getNodeStore();
  store2.setEnableConcurrentAddRemove(true);
  NodeBuilder builder=store1.getRoot().builder();
  builder.child(":hidden");
  merge(store1,builder);
  store1.runBackgroundOperations();
  store2.runBackgroundOperations();
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent").child("node1");
  merge(store1,builder);
  builder=store2.getRoot().builder();
  builder.child(":hidden").child("parent").child("node2");
  merge(store2,builder);
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent").remove();
  try {
    merge(store1,builder);
    fail("parent node of unseen children must not get deleted");
  }
 catch (  CommitFailedException cfe) {
  }
  String parentPath="/:hidden/parent";
  NodeDocument parentDoc=docStore.find(Collection.NODES,Utils.getIdFromPath(parentPath));
  assertFalse("parent node of unseen children must not get deleted",isDocDeleted(parentDoc));
  builder=store2.getRoot().builder();
  builder.child(":hidden").child("parent").remove();
  try {
    merge(store2,builder);
    fail("parent node of unseen children must not get deleted");
  }
 catch (  CommitFailedException cfe) {
  }
  parentDoc=docStore.find(Collection.NODES,Utils.getIdFromPath(parentPath));
  assertFalse("parent node of unseen children must not get deleted",isDocDeleted(parentDoc));
  store1.runBackgroundOperations();
  store2.runBackgroundOperations();
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent").remove();
  builder.child(":hidden").child("parent1");
  store1.runBackgroundOperations();
  store2.runBackgroundOperations();
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent1").child("node1");
  merge(store1,builder);
  builder=store2.getRoot().builder();
  builder.child(":hidden").child("parent1").child("node2");
  merge(store2,builder);
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent1").remove();
  try {
    merge(store1,builder);
  }
 catch (  CommitFailedException cfe) {
  }
  parentPath="/:hidden/parent1";
  parentDoc=docStore.find(Collection.NODES,Utils.getIdFromPath(parentPath));
  assertFalse("parent node of unseen children must not get deleted",isDocDeleted(parentDoc));
  builder=store2.getRoot().builder();
  builder.child(":hidden").child("parent1").remove();
  try {
    merge(store2,builder);
  }
 catch (  CommitFailedException cfe) {
  }
  parentDoc=docStore.find(Collection.NODES,Utils.getIdFromPath(parentPath));
  assertFalse("parent node of unseen children must not get deleted",isDocDeleted(parentDoc));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void backgroundRead() throws Exception {
  final Semaphore semaphore=new Semaphore(1);
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentStore testStore=new TimingDocumentStoreWrapper(docStore){
    @Override public CacheInvalidationStats invalidateCache(    Iterable<String> keys){
      super.invalidateCache(keys);
      semaphore.acquireUninterruptibly();
      semaphore.release();
      return null;
    }
  }
;
  final DocumentNodeStore store1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(testStore).setClusterId(1).getNodeStore();
  DocumentNodeStore store2=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(docStore).setClusterId(2).getNodeStore();
  NodeBuilder builder=store2.getRoot().builder();
  builder.child("node2");
  store2.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store2.runBackgroundOperations();
  assertFalse(store1.getRoot().hasChildNode("node2"));
  builder=store1.getRoot().builder();
  builder.child("node1");
  NodeState root=store1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  semaphore.acquireUninterruptibly();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      store1.runBackgroundOperations();
    }
  }
);
  t.start();
  while (!semaphore.hasQueuedThreads()) {
    Thread.sleep(10);
  }
  try {
    assertFalse(root.hasChildNode("node2"));
  }
  finally {
    semaphore.release();
  }
  t.join();
  root=store1.getRoot();
  assertTrue(root.hasChildNode("node2"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void diffMany() throws Exception {
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  Revision.setClock(clock);
  final List<Long> startValues=Lists.newArrayList();
  MemoryDocumentStore ds=new MemoryDocumentStore(){
    @Nonnull @Override public <T extends Document>List<T> query(    Collection<T> collection,    String fromKey,    String toKey,    String indexedProperty,    long startValue,    int limit){
      if (indexedProperty != null) {
        startValues.add(startValue);
      }
      return super.query(collection,fromKey,toKey,indexedProperty,startValue,limit);
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().clock(clock).setDocumentStore(ds).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  NodeBuilder test=builder.child("test");
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    test.child("node-" + i);
  }
  merge(ns,builder);
  clock.waitUntil(clock.getTime() + TimeUnit.HOURS.toMillis(1));
  builder=ns.getRoot().builder();
  builder.child("foo");
  DocumentNodeState before=asDocumentNodeState(merge(ns,builder));
  NodeState beforeTest=before.getChildNode("test");
  builder=ns.getRoot().builder();
  builder.child("bar");
  merge(ns,builder);
  builder=ns.getRoot().builder();
  builder.child("test").child("bar");
  NodeState after=merge(ns,builder);
  NodeState afterTest=after.getChildNode("test");
  startValues.clear();
  afterTest.compareAgainstBaseState(beforeTest,new DefaultNodeStateDiff());
  assertEquals(1,startValues.size());
  Revision localHead=before.getRevision().getRevision(ns.getClusterId());
  assertNotNull(localHead);
  long beforeModified=getModifiedInSecs(localHead.getTimestamp());
  assertEquals(beforeModified,(long)startValues.get(0));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void updateClusterState(){
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(1).setDocumentStore(docStore).getNodeStore();
  int cId1=ns1.getClusterId();
  DocumentNodeStore ns2=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(2).setDocumentStore(docStore).getNodeStore();
  int cId2=ns2.getClusterId();
  ns1.updateClusterState();
  ns2.updateClusterState();
  assertEquals(0,ns1.getMBean().getInactiveClusterNodes().length);
  assertEquals(0,ns2.getMBean().getInactiveClusterNodes().length);
  assertEquals(2,ns1.getMBean().getActiveClusterNodes().length);
  assertEquals(2,ns2.getMBean().getActiveClusterNodes().length);
  ns1.dispose();
  ns2.updateClusterState();
  String[] inactive=ns2.getMBean().getInactiveClusterNodes();
  String[] active=ns2.getMBean().getActiveClusterNodes();
  assertEquals(1,inactive.length);
  assertTrue(inactive[0].startsWith(cId1 + "="));
  assertEquals(1,active.length);
  assertTrue(active[0].startsWith(cId2 + "="));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void concurrentChildOperations2() throws Exception {
  Clock clock=new Clock.Virtual();
  Revision.setClock(clock);
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).clock(clock).setDocumentStore(store).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setAsyncDelay(0).clock(clock).setDocumentStore(store).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("foo");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  b1.child("foo").child("child-1");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("foo").child("child-2");
  merge(ns2,b2);
  List<ChildNodeEntry> children=Lists.newArrayList(ns2.getRoot().getChildNode("foo").getChildNodeEntries());
  assertEquals(1,Iterables.size(children));
  ns2.runBackgroundOperations();
  children=Lists.newArrayList(ns2.getRoot().getChildNode("foo").getChildNodeEntries());
  assertEquals(2,Iterables.size(children));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void useDocChildCacheForFindingNodes() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("a");
  builder.child("b").child("c");
  merge(store,builder);
  NodeState parentState=store.getRoot().getChildNode("b");
  reads.clear();
  NodeState nonExistingChild=parentState.getChildNode("non-existing-node-1");
  assertEquals("Should not go to DocStore::find for a known non-existent child",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  builder=store.getRoot().builder();
  NodeBuilder childPropBuilder=builder.child("a");
  childPropBuilder.setProperty("foo","bar");
  merge(store,builder);
  parentState=store.getRoot().getChildNode("b");
  reads.clear();
  nonExistingChild=parentState.getChildNode("non-existing-node-2");
  assertEquals("Should not go to DocStore::find for a known non-existent child," + " even if another merge has happened (on another sub-tree)",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  store.invalidateNodeChildrenCache();
  parentState=store.getRoot().getChildNode("b");
  Iterables.size(parentState.getChildNodeEntries());
  reads.clear();
  nonExistingChild=parentState.getChildNode("non-existing-node-3");
  assertEquals("Should not go to DocStore::find when doc child cache is filled by reading",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void clusterWithClockDifferences() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  long now=System.currentTimeMillis();
  Clock c1=new Clock.Virtual();
  c1.waitUntil(now);
  Revision.setClock(c1);
  DocumentNodeStore ns1=builderProvider.newBuilder().clock(c1).setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("node");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Clock c2=new Clock.Virtual();
  c2.waitUntil(now + 5000);
  Revision.setClock(c2);
  DocumentNodeStore ns2=builderProvider.newBuilder().clock(c2).setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  assertTrue(ns2.getRoot().hasChildNode("node"));
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").remove();
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c1);
  ns1.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  assertFalse(b1.hasChildNode("node"));
  b1.child("node");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c2);
  ns2.runBackgroundOperations();
  b2=ns2.getRoot().builder();
  assertTrue(b2.hasChildNode("node"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void readNullEntry() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").setProperty("foo","bar");
  merge(store,builder);
  builder=store.getRoot().builder();
  builder.child("test").remove();
  merge(store,builder);
  RevisionVector removedAt=store.getHeadRevision();
  String id=Utils.getIdFromPath("/test");
  int count=0;
  while (docStore.find(NODES,id).getPreviousRanges().size() <= PREV_SPLIT_FACTOR) {
    builder=store.getRoot().builder();
    builder.child("test").setProperty("count",count++);
    merge(store,builder);
    store.runBackgroundOperations();
  }
  NodeDocument doc=docStore.find(NODES,id);
  assertNotNull(doc);
  reads.clear();
  doc.getNodeAtRevision(store,store.getHeadRevision(),null);
  assertNoPreviousDocs(reads);
  reads.clear();
  doc.getValueMap("foo").get(removedAt.getRevision(store.getClusterId()));
  assertNoPreviousDocs(reads);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void ignoreDocChildCacheForIncompleteEntry() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setUseSimpleRevision(true).setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder parentBuilder=builder.child("a");
  int numChildren=DocumentNodeState.INITIAL_FETCH_SIZE + 2;
  for (int i=0; i < numChildren; i++) {
    parentBuilder.child("child" + i);
  }
  merge(store,builder);
  store.invalidateNodeChildrenCache();
  NodeState parentNodeState=store.getRoot().getChildNode("a");
  Iterables.size(parentNodeState.getChildNodeEntries());
  reads.clear();
  NodeState nonExistingChild=parentNodeState.getChildNode("non-existing-child-1");
  assertTrue("DocStore should be queried when no doc child cache entry has all children",reads.size() > 0);
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readBranchCommit() throws Exception {
  final Set<String> readSet=Sets.newHashSet();
  DocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      readSet.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  String testId=Utils.getIdFromPath("/test");
  NodeBuilder test=builder.child("test");
  test.setProperty("p","value");
  int q=0;
  while (store.find(NODES,testId) == null) {
    test.setProperty("q",q++);
  }
  merge(ns,builder);
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.child("test").setProperty("q",i);
    merge(ns,builder);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  readSet.clear();
  doc.getNodeAtRevision(ns,ns.getHeadRevision(),null);
  for (  String id : Sets.newHashSet(readSet)) {
    doc=store.find(NODES,id);
    assertNotNull(doc);
    if (doc.isSplitDocument() && !doc.getMainPath().equals("/")) {
      fail("must not access previous document: " + id);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonBlockingReset() throws Exception {
  final List<String> failure=Lists.newArrayList();
  final AtomicReference<ReentrantReadWriteLock> mergeLock=new AtomicReference<ReentrantReadWriteLock>();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T findAndUpdate(    Collection<T> collection,    UpdateOp update){
      for (      Map.Entry<Key,Operation> entry : update.getChanges().entrySet()) {
        if (entry.getKey().getName().equals(NodeDocument.COLLISIONS)) {
          ReentrantReadWriteLock rwLock=mergeLock.get();
          if (rwLock.getReadHoldCount() > 0 || rwLock.getWriteHoldCount() > 0) {
            failure.add("Branch reset still holds merge lock");
            break;
          }
        }
      }
      return super.findAndUpdate(collection,update);
    }
  }
;
  DocumentNodeStore ds=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  ds.setMaxBackOffMillis(0);
  DocumentNodeState root=ds.getRoot();
  final DocumentNodeStoreBranch b=ds.createBranch(root);
  assertTrue(b.getMergeLock() instanceof ReentrantReadWriteLock);
  mergeLock.set((ReentrantReadWriteLock)b.getMergeLock());
  NodeBuilder builder=root.builder();
  builder.child("foo");
  b.setRoot(builder.getNodeState());
  builder.child("bar");
  b.setRoot(builder.getNodeState());
  try {
    b.merge(new CommitHook(){
      @Nonnull @Override public NodeState processCommit(      NodeState before,      NodeState after,      CommitInfo info) throws CommitFailedException {
        NodeBuilder foo=after.builder().child("foo");
        for (int i=0; i <= DocumentRootBuilder.UPDATE_LIMIT; i++) {
          foo.setProperty("prop",i);
        }
        throw new CommitFailedException("Fail",0,"");
      }
    }
,CommitInfo.EMPTY);
  }
 catch (  CommitFailedException e) {
  }
  for (  String s : failure) {
    fail(s);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void recoverBranchCommit() throws Exception {
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore store1=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).clock(clock).setClusterId(1).getNodeStore();
  NodeBuilder builder=store1.getRoot().builder();
  builder.child("test");
  merge(store1,builder);
  store1.runBackgroundOperations();
  builder=store1.getRoot().builder();
  NodeBuilder node=builder.getChildNode("test").child("node");
  String id=Utils.getIdFromPath("/test/node");
  int i=0;
  while (docStore.find(NODES,id) == null) {
    node.setProperty("foo",i++);
  }
  merge(store1,builder);
  clock.waitUntil(clock.getTime() + store1.getClusterInfo().getLeaseTime() + 1000);
  LastRevRecoveryAgent agent=store1.getLastRevRecoveryAgent();
  assertTrue(agent.isRecoveryNeeded());
  agent.recover(store1.getClusterId());
  DocumentNodeStore store2=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).clock(clock).setClusterId(2).getNodeStore();
  assertTrue(store2.getRoot().getChildNode("test").getChildNode("node").exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sameSeenAtRevision2() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("test");
  merge(ns2,b2);
  b2=ns2.getRoot().builder();
  b2.child("test").remove();
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  NodeBuilder b1=ns1.getRoot().builder();
  assertFalse(b1.hasChildNode("test"));
  b1.child("test");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns3=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(3).getNodeStore();
  ns3.setMaxBackOffMillis(0);
  NodeBuilder b3=ns3.getRoot().builder();
  assertTrue(b3.hasChildNode("test"));
  b3.child("test").remove();
  merge(ns3,b3);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void diffOnce() throws Exception {
  final AtomicInteger numQueries=new AtomicInteger();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Nonnull @Override public <T extends Document>List<T> query(    Collection<T> collection,    String fromKey,    String toKey,    String indexedProperty,    long startValue,    int limit){
      numQueries.getAndIncrement();
      return super.query(collection,fromKey,toKey,indexedProperty,startValue,limit);
    }
  }
;
  final DocumentMK mk=builderProvider.newBuilder().setDocumentStore(store).open();
  final DocumentNodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    builder.child("node-" + i);
  }
  merge(ns,builder);
  final RevisionVector head=ns.getHeadRevision();
  Revision localHead=head.getRevision(ns.getClusterId());
  assertNotNull(localHead);
  final RevisionVector to=new RevisionVector(new Revision(localHead.getTimestamp() + 1000,0,localHead.getClusterId()));
  int numReaders=10;
  final CountDownLatch ready=new CountDownLatch(numReaders);
  final CountDownLatch go=new CountDownLatch(1);
  List<Thread> readers=Lists.newArrayList();
  for (int i=0; i < numReaders; i++) {
    Thread t=new Thread(new Runnable(){
      @Override public void run(){
        try {
          ready.countDown();
          go.await();
          mk.diff(head.toString(),to.toString(),"/",0);
        }
 catch (        InterruptedException e) {
        }
      }
    }
);
    readers.add(t);
    t.start();
  }
  ready.await();
  numQueries.set(0);
  go.countDown();
  for (  Thread t : readers) {
    t.join();
  }
  assertTrue(numQueries.get() <= 2);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void conflictDetectionWithClockDifference() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  long now=System.currentTimeMillis();
  Clock c1=new Clock.Virtual();
  c1.waitUntil(now);
  Revision.setClock(c1);
  DocumentNodeStore ns1=builderProvider.newBuilder().clock(c1).setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("node");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Clock c2=new Clock.Virtual();
  c2.waitUntil(now + 5000);
  Revision.setClock(c2);
  DocumentNodeStore ns2=builderProvider.newBuilder().clock(c2).setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  assertTrue(ns2.getRoot().hasChildNode("node"));
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").child("foo");
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c1);
  ns1.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  assertTrue(b1.getChildNode("node").hasChildNode("foo"));
  b1.child("node").remove();
  merge(ns1,b1);
  Revision.resetClockToDefault();
  Revision.setClock(c2);
  b2=ns2.getRoot().builder();
  b2.child("node").child("bar");
  try {
    merge(ns2,b2);
    fail("must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void modifiedReset() throws Exception {
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  Revision.setClock(clock);
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(1).setAsyncDelay(0).clock(clock).getNodeStore();
  NodeBuilder builder1=ns1.getRoot().builder();
  builder1.child("node");
  ns1.merge(builder1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(2).setAsyncDelay(0).clock(clock).getNodeStore();
  NodeBuilder builder2=ns2.getRoot().builder();
  builder2.child("node").child("child-2");
  ns2.merge(builder2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(System.currentTimeMillis() + SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION + 1));
  builder1=ns1.getRoot().builder();
  builder1.child("node").child("child-1");
  ns1.merge(builder1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/node"));
  Long mod1=(Long)doc.get(MODIFIED_IN_SECS);
  assertNotNull(mod1);
  ns2.runBackgroundOperations();
  doc=docStore.find(NODES,Utils.getIdFromPath("/node"));
  Long mod2=(Long)doc.get(MODIFIED_IN_SECS);
  assertTrue("" + mod2 + " < "+ mod1,mod2 >= mod1);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sameSeenAtRevision() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("test");
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  NodeBuilder b1=ns1.getRoot().builder();
  assertTrue(b1.hasChildNode("test"));
  b1.child("test").remove();
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns3=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(3).getNodeStore();
  ns3.setMaxBackOffMillis(0);
  NodeBuilder b3=ns3.getRoot().builder();
  assertFalse(b3.hasChildNode("test"));
  b3.child("test");
  merge(ns3,b3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentSplitTest </h4><pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cascadingWithSplitRatio(){
  String id=Utils.getIdFromPath("/test");
  mk.commit("/","+\"test\":{}",null,null);
  DocumentStore store=mk.getDocumentStore();
  int clusterId=mk.getNodeStore().getClusterId();
  UpdateOp op=new UpdateOp(id,false);
  for (int i=0; i < 1000; i++) {
    Revision r=Revision.newRevision(2);
    op.setMapEntry("prop",r,"some long test value with many characters");
    NodeDocument.setRevision(op,r,"c");
  }
  store.findAndUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,id);
  assertNotNull(doc);
  assertTrue(doc.getMemory() > NodeDocument.DOC_SIZE_THRESHOLD);
  for (int i=0; i < NUM_REVS_THRESHOLD / 2; i++) {
    Revision r=Revision.newRevision(clusterId);
    op.setMapEntry("prop",r,"value");
    NodeDocument.setRevision(op,r,"c");
  }
  TreeSet<Revision> prev=Sets.newTreeSet(StableRevisionComparator.INSTANCE);
  for (int i=0; i < PREV_SPLIT_FACTOR; i++) {
    Revision low=Revision.newRevision(clusterId);
    Revision high=Revision.newRevision(clusterId);
    prev.add(high);
    NodeDocument.setPrevious(op,new Range(high,low,0));
  }
  store.findAndUpdate(NODES,op);
  doc=store.find(NODES,id);
  assertNotNull(doc);
  List<UpdateOp> splitOps=Lists.newArrayList(doc.split(mk.getNodeStore(),mk.getNodeStore().getHeadRevision()));
  assertEquals(2,splitOps.size());
  op=splitOps.get(0);
  String newPrevId=Utils.getPreviousIdFor("/test",prev.last(),1);
  assertEquals(newPrevId,op.getId());
  op=splitOps.get(1);
  assertEquals(id,op.getId());
  for (  Map.Entry<Key,Operation> entry : op.getChanges().entrySet()) {
    Revision r=entry.getKey().getRevision();
    assertNotNull(r);
    assertEquals(clusterId,r.getClusterId());
    if (entry.getKey().getName().equals("_prev")) {
      if (entry.getValue().type == REMOVE_MAP_ENTRY) {
        assertTrue(prev.contains(r));
      }
 else       if (entry.getValue().type == SET_MAP_ENTRY) {
        assertEquals(newPrevId,Utils.getPreviousIdFor("/test",r,1));
      }
 else {
        fail("unexpected update operation " + entry);
      }
    }
 else {
      fail("unexpected update operation " + entry);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitDocWithHasBinary() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  NodeBuilder b1=ns.getRoot().builder();
  b1.child("test").child("foo").setProperty("binaryProp",ns.createBlob(randomStream(1,4096)));
  ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1=ns.getRoot().builder();
    b1.child("test").child("foo").setProperty("prop",i);
    ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  List<NodeDocument> prevDocs=ImmutableList.copyOf(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  assertTrue(doc.hasBinary());
  assertTrue(prevDocs.get(0).hasBinary());
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeGarbage() throws Exception {
  final DocumentStore store=mk.getDocumentStore();
  final DocumentNodeStore ns=mk.getNodeStore();
  final List<Exception> exceptions=Lists.newArrayList();
  final List<RevisionVector> revisions=Lists.newArrayList();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        for (int i=0; i < 200; i++) {
          NodeBuilder builder=ns.getRoot().builder();
          builder.child("foo").child("node").child("node").child("node").child("node");
          builder.child("bar").child("node").child("node").child("node").child("node");
          merge(ns,builder);
          revisions.add(ns.getHeadRevision());
          builder=ns.getRoot().builder();
          builder.child("foo").child("node").remove();
          builder.child("bar").child("node").remove();
          merge(ns,builder);
          revisions.add(ns.getHeadRevision());
        }
      }
 catch (      CommitFailedException e) {
        exceptions.add(e);
      }
    }
  }
);
  t.start();
  RevisionContext rc=new TestRevisionContext(ns);
  while (t.isAlive()) {
    for (    String id : ns.getSplitCandidates()) {
      RevisionVector head=ns.getHeadRevision();
      NodeDocument doc=store.find(NODES,id);
      List<UpdateOp> ops=SplitOperations.forDocument(doc,rc,head,NUM_REVS_THRESHOLD);
      Set<Revision> removed=Sets.newHashSet();
      Set<Revision> added=Sets.newHashSet();
      for (      UpdateOp op : ops) {
        for (        Map.Entry<Key,Operation> e : op.getChanges().entrySet()) {
          if (!"_deleted".equals(e.getKey().getName())) {
            continue;
          }
          Revision r=e.getKey().getRevision();
          if (e.getValue().type == Operation.Type.REMOVE_MAP_ENTRY) {
            removed.add(r);
          }
 else           if (e.getValue().type == Operation.Type.SET_MAP_ENTRY) {
            added.add(r);
          }
        }
      }
      removed.removeAll(added);
      assertTrue("SplitOperations must not remove committed changes: " + removed,removed.isEmpty());
    }
    ns.runBackgroundOperations();
  }
  for (  NodeDocument doc : Utils.getAllDocuments(store)) {
    if (doc.isSplitDocument() || Utils.getDepthFromId(doc.getId()) < 2) {
      continue;
    }
    Set<Revision> revs=Sets.newHashSet();
    for (    RevisionVector rv : revisions) {
      Iterables.addAll(revs,rv);
    }
    revs.removeAll(doc.getValueMap("_deleted").keySet());
    assertTrue("Missing _deleted entries on " + doc.getId() + ": "+ revs,revs.isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commitRootForChildrenFlag() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  for (int i=0; i < NUM_REVS_THRESHOLD * 2; i++) {
    NodeBuilder builder=ns.getRoot().builder();
    builder.child("test").child("child-" + i);
    merge(ns,builder);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  assertTrue(doc.getLocalCommitRoot().size() < NUM_REVS_THRESHOLD);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitPropertyRevisions() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  mk.commit("/","+\"foo\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Set<Revision> revisions=Sets.newHashSet();
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    revisions.add(Revision.fromString(mk.commit("/","^\"foo/prop\":" + revisions.size(),null,null)));
  }
  mk.runBackgroundOperations();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> localRevs=doc.getLocalRevisions();
  assertEquals(1,localRevs.size());
  for (  Revision rev : revisions) {
    assertTrue(doc.isCommitted(rev));
  }
  Map<Revision,String> valueMap=doc.getValueMap("prop");
  assertEquals((long)revisions.size(),valueMap.size());
  valueMap=doc.getLocalMap("prop");
  assertEquals(1L,valueMap.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSplitDocNoChild() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  mk.commit("/","+\"test\":{\"node\":{}}",null,null);
  mk.commit("/test","+\"foo\":{}+\"bar\":{}",null,null);
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    mk.commit("/test/foo","^\"prop\":" + i,null,null);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  List<NodeDocument> prevDocs=ImmutableList.copyOf(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  assertEquals(SplitDocType.DEFAULT_LEAF,prevDocs.get(0).getSplitDocType());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cluster(){
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  DocumentMK.Builder builder;
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk1=builder.setClusterId(1).open();
  mk1.commit("/","+\"test\":{\"prop1\":0}",null,null);
  mk1.backgroundWrite();
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk2=builder.setClusterId(2).open();
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk3=builder.setClusterId(3).open();
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    mk1.commit("/","^\"test/prop1\":" + i,null,null);
    mk2.commit("/","^\"test/prop2\":" + i,null,null);
    mk3.commit("/","^\"test/prop3\":" + i,null,null);
  }
  mk1.runBackgroundOperations();
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  NodeDocument doc=ds.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Map<Revision,String> revs=doc.getLocalRevisions();
  assertEquals(3,revs.size());
  revs=doc.getValueMap("_revisions");
  assertEquals(3 * NodeDocument.NUM_REVS_THRESHOLD,revs.size());
  Revision previous=null;
  for (  Map.Entry<Revision,String> entry : revs.entrySet()) {
    if (previous != null) {
      assertTrue(previous.compareRevisionTimeThenClusterId(entry.getKey()) > 0);
    }
    previous=entry.getKey();
  }
  mk1.dispose();
  mk2.dispose();
  mk3.dispose();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mainPath(){
  Revision r=Revision.fromString("r1-0-1");
  for (  String path : new String[]{"/","/test","/test/path"}) {
    DocumentStore store=mk.getDocumentStore();
    NodeDocument doc=new NodeDocument(store);
    String id=Utils.getPreviousIdFor(path,r,0);
    doc.put(NodeDocument.ID,id);
    assertEquals(path,doc.getMainPath());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitCommitRoot() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  mk.commit("/","+\"foo\":{}+\"bar\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Set<Revision> commitRoots=Sets.newHashSet();
  commitRoots.addAll(doc.getLocalCommitRoot().keySet());
  while (commitRoots.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    commitRoots.add(Revision.fromString(mk.commit("/","^\"foo/prop\":" + commitRoots.size() + "^\"bar/prop\":"+ commitRoots.size(),null,null)));
  }
  mk.runBackgroundOperations();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> commits=doc.getLocalCommitRoot();
  assertEquals(2,commits.size());
  for (  Revision rev : commitRoots) {
    assertTrue(doc.isCommitted(rev));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readLocalCommitInfo() throws Exception {
  final Set<String> readSet=Sets.newHashSet();
  DocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key,    int maxCacheAge){
      readSet.add(key);
      return super.find(collection,key,maxCacheAge);
    }
  }
;
  DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("test");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.setProperty("p",i);
    builder.child("test").setProperty("p",i);
    builder.child("test").setProperty("q",i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  builder=ns.getRoot().builder();
  builder.child("test").removeProperty("q");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  readSet.clear();
  doc.getNodeAtRevision(ns,ns.getHeadRevision(),null);
  for (  String id : Sets.newHashSet(readSet)) {
    doc=store.find(NODES,id);
    assertNotNull(doc);
    if (doc.isSplitDocument() && !doc.getMainPath().equals("/")) {
      fail("must not access previous document: " + id);
    }
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void purgeAllButMostRecentCommitRoot() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns1=mk.getNodeStore();
  NodeBuilder builder1=ns1.getRoot().builder();
  builder1.child("test");
  merge(ns1,builder1);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=new DocumentMK.Builder().setDocumentStore(store).setAsyncDelay(0).setClusterId(ns1.getClusterId() + 1).getNodeStore();
  ns2.setMaxBackOffMillis(0);
  assertTrue(ns2.getRoot().hasChildNode("test"));
  NodeBuilder builder2=ns2.getRoot().builder();
  builder2.child("test").remove();
  for (int i=0; i < NUM_REVS_THRESHOLD * 2; i++) {
    builder1=ns1.getRoot().builder();
    builder1.child("test").child("child-" + i);
    merge(ns1,builder1);
  }
  ns1.runBackgroundOperations();
  try {
    merge(ns2,builder2);
    fail("merge must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitDeleted() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  Set<Revision> revisions=Sets.newHashSet();
  mk.commit("/","+\"foo\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  revisions.addAll(doc.getLocalRevisions().keySet());
  boolean create=false;
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    if (create) {
      revisions.add(Revision.fromString(mk.commit("/","+\"foo\":{}",null,null)));
    }
 else {
      revisions.add(Revision.fromString(mk.commit("/","-\"foo\"",null,null)));
    }
    create=!create;
  }
  mk.runBackgroundOperations();
  String head=mk.getHeadRevision();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> deleted=doc.getLocalDeleted();
  assertEquals(1,deleted.size());
  for (  Revision rev : revisions) {
    assertTrue("document should contain revision (or have revision in commit root path):" + rev,doc.containsRevision(rev) || doc.getCommitRootPath(rev) != null);
    assertTrue(doc.isCommitted(rev));
  }
  DocumentNodeState node=ns.getNode("/foo",RevisionVector.fromString(head));
  if (create) {
    assertNull(node);
  }
 else {
    assertNotNull(node);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void keepCommitRootForMostRecentChanges() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  NodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.setProperty("p",-1);
  NodeBuilder test=builder.child("test");
  test.setProperty("foo",-1);
  test.setProperty("bar",-1);
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.setProperty("p",i);
    test=builder.child("test");
    test.setProperty("foo",i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  mk.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("bar");
  assertFalse(valueMap.isEmpty());
  Revision r=valueMap.keySet().iterator().next();
  assertTrue(doc.getLocalCommitRoot().containsKey(r));
  List<NodeDocument> prevDocs=Lists.newArrayList(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  NodeDocument prev=prevDocs.get(0);
  assertTrue(prev.getLocalCommitRoot().containsKey(r));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitRevisionsManyClusterNodes(){
  int numClusterNodes=5;
  String id=Utils.getIdFromPath("/test");
  mk.commit("/","+\"test\":{}",null,null);
  DocumentStore store=mk.getDocumentStore();
  int clusterId=mk.getNodeStore().getClusterId();
  List<Revision> revs=Lists.newArrayList();
  UpdateOp op=new UpdateOp(id,false);
  for (int i=0; i < numClusterNodes; i++) {
    for (int j=0; j < NUM_REVS_THRESHOLD; j++) {
      Revision r=Revision.newRevision(i + 1);
      if (clusterId == r.getClusterId()) {
        revs.add(r);
      }
      op.setMapEntry("prop",r,"value");
      NodeDocument.setRevision(op,r,"c");
    }
  }
  store.findAndUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,id);
  assertNotNull(doc);
  List<UpdateOp> splitOps=Lists.newArrayList(doc.split(mk.getNodeStore(),mk.getNodeStore().getHeadRevision()));
  assertEquals(2,splitOps.size());
  String prevId=Utils.getPreviousIdFor("/test",revs.get(revs.size() - 2),0);
  assertEquals(prevId,splitOps.get(0).getId());
  assertEquals(id,splitOps.get(1).getId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void keepRevisionsForMostRecentChanges() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  NodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.setProperty("foo",-1);
  builder.setProperty("bar",-1);
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.setProperty("foo",i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  mk.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("bar");
  assertFalse(valueMap.isEmpty());
  Revision r=valueMap.keySet().iterator().next();
  assertTrue(doc.getLocalRevisions().containsKey(r));
  List<NodeDocument> prevDocs=Lists.newArrayList(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  NodeDocument prev=prevDocs.get(0);
  assertTrue(prev.getLocalRevisions().containsKey(r));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void manyRevisions(){
  final int numMKs=3;
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  List<Set<String>> changes=new ArrayList<Set<String>>();
  List<DocumentMK> mks=new ArrayList<DocumentMK>();
  for (int i=1; i <= numMKs; i++) {
    DocumentMK.Builder builder=new DocumentMK.Builder();
    builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
    DocumentMK mk=builder.setClusterId(i).open();
    mks.add(mk);
    changes.add(new HashSet<String>());
    if (i == 1) {
      mk.commit("/","+\"test\":{}",null,null);
      mk.runBackgroundOperations();
    }
  }
  List<String> propNames=Arrays.asList("prop1","prop2","prop3");
  Random random=new Random(0);
  for (int i=0; i < 1000; i++) {
    int mkIdx=random.nextInt(mks.size());
    DocumentMK mk=mks.get(mkIdx);
    DocumentNodeStore ns=mk.getNodeStore();
    String name=propNames.get(random.nextInt(propNames.size()));
    for (int j=0; j < changes.size(); j++) {
      Set<String> c=changes.get(j);
      if (c.contains(name)) {
        syncMKs(mks,j);
        c.clear();
        break;
      }
    }
    NodeDocument doc=ds.find(NODES,Utils.getIdFromPath("/test"));
    assertNotNull(doc);
    RevisionVector head=ns.getHeadRevision();
    Revision lastRev=ns.getPendingModifications().get("/test");
    DocumentNodeState n=doc.getNodeAtRevision(mk.getNodeStore(),head,lastRev);
    assertNotNull(n);
    String value=n.getPropertyAsString(name);
    if (value == null) {
      value=String.valueOf(0);
    }
 else {
      value=String.valueOf(Integer.parseInt(value) + 1);
    }
    mk.commit("/test","^\"" + name + "\":"+ value,null,null);
    changes.get(mkIdx).add(name);
  }
  for (  DocumentMK mk : mks) {
    mk.dispose();
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSplitPropAndCommitOnly() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  NodeBuilder b1=ns.getRoot().builder();
  b1.child("test").child("foo").child("bar");
  ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1=ns.getRoot().builder();
    b1.child("test").child("foo").setProperty("prop",i);
    b1.child("test").setProperty("prop",i);
    ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  List<NodeDocument> prevDocs=ImmutableList.copyOf(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  assertEquals(SplitDocType.COMMIT_ROOT_ONLY,prevDocs.get(0).getSplitDocType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitRevisions() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  Set<Revision> revisions=Sets.newHashSet();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  revisions.addAll(doc.getLocalRevisions().keySet());
  revisions.add(Revision.fromString(mk.commit("/","+\"foo\":{}+\"bar\":{}",null,null)));
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    revisions.add(Revision.fromString(mk.commit("/","+\"foo/node-" + revisions.size() + "\":{}"+ "+\"bar/node-"+ revisions.size()+ "\":{}",null,null)));
  }
  mk.runBackgroundOperations();
  String head=mk.getHeadRevision();
  doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  Map<Revision,String> revs=doc.getLocalRevisions();
  assertEquals(1,revs.size());
  for (  Revision rev : revisions) {
    assertTrue(doc.containsRevision(rev));
    assertTrue(doc.isCommitted(rev));
  }
  assertNotNull(ns.getNode("/",RevisionVector.fromString(head)));
  NodeDocument prevDoc=Iterators.getOnlyElement(doc.getAllPreviousDocs());
  assertEquals(SplitDocType.DEFAULT,prevDoc.getSplitDocType());
  mk.commit("/","+\"baz\":{}",null,null);
  ns.setAsyncDelay(0);
  mk.backgroundWrite();
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void commitRootInPrevious(){
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  mk.commit("/","+\"test\":{\"node\":{}}",null,null);
  mk.commit("/test","+\"foo\":{}+\"bar\":{}",null,null);
  mk.commit("/test","^\"foo/prop\":0^\"bar/prop\":0",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  assertNotNull(doc);
  String rev=null;
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    rev=mk.commit("/test/foo","^\"prop\":" + i,null,null);
  }
  ns.runBackgroundOperations();
  doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  assertNotNull(doc);
  DocumentNodeState node=doc.getNodeAtRevision(ns,RevisionVector.fromString(rev),null);
  assertNotNull(node);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStorePerformanceTest </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPerfLastRevBatch(){
  String bid=this.getClass().getName() + ".testPerfLastRevBatch";
  int nodecount=100;
  long duration=5000;
  int cnt=0;
  List<String> ids=new ArrayList<String>();
  Revision cr=Revision.fromString("r0-0-1");
  for (int i=0; i < nodecount; i++) {
    String id=bid + "-" + i;
    super.ds.remove(Collection.NODES,id);
    removeMe.add(id);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("testprop",generateString(100 * i,true));
    up.setMapEntry("_lastRev",cr,"setup");
    up.set("_modified",NodeDocument.getModifiedInSecs(System.currentTimeMillis()));
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("creation failed for " + id + " in "+ super.dsname,success);
    ids.add(id);
  }
  long end=System.currentTimeMillis() + duration;
  while (System.currentTimeMillis() < end) {
    UpdateOp up=new UpdateOp(bid,true);
    up.setMapEntry("_lastRev",cr,"iteration-" + cnt);
    up.max("_modified",NodeDocument.getModifiedInSecs(System.currentTimeMillis()));
    super.ds.update(Collection.NODES,ids,up);
    cnt+=1;
  }
  super.ds.invalidateCache();
  for (int i=0; i < nodecount; i++) {
    NodeDocument d=super.ds.find(Collection.NODES,bid + "-" + i);
    assertNotNull(d);
    Map<Revision,String> m=(Map<Revision,String>)d.get("_lastRev");
    assertEquals("iteration-" + (cnt - 1),m.get(cr));
  }
  LOG.info("batch update for _lastRev for " + super.dsname + " was "+ cnt+ " in "+ duration+ "ms ("+ (cnt / (duration / 1000f))+ "/s)");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStoreStatsIT </h4><pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void query() throws Exception {
  String base=testName.getMethodName();
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  ds.query(Collection.NODES,base,base + "A",5);
  verify(stats).doneQuery(anyLong(),eq(Collection.NODES),eq(base),eq(base + "A"),eq(false),eq(5),anyLong(),eq(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStoreStatsTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void perfLog() throws Exception {
  String logName=DocumentStoreStats.class.getName() + ".perf";
  LogCustomizer customLogs=LogCustomizer.forLogger(logName).filter(Level.TRACE).create();
  enableLevel(logName,Level.INFO);
  customLogs.starting();
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,true,0);
  assertEquals(0,customLogs.getLogs().size());
  stats.doneFindAndModify(TimeUnit.SECONDS.toNanos(10),Collection.NODES,"foo",true,true,0);
  assertEquals(0,customLogs.getLogs().size());
  enableLevel(logName,Level.DEBUG);
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,true,0);
  assertEquals(0,customLogs.getLogs().size());
  stats.doneFindAndModify(TimeUnit.SECONDS.toNanos(10),Collection.NODES,"foo",true,true,0);
  assertEquals(1,customLogs.getLogs().size());
  enableLevel(logName,Level.TRACE);
  stats.doneFindAndModify(100,Collection.NODES,"foo",true,true,0);
  assertEquals(2,customLogs.getLogs().size());
  customLogs.finished();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.JournalEntryTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fillExternalChanges() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  JournalEntry entry=JOURNAL.newDocument(store);
  Set<String> paths=Sets.newHashSet();
  addRandomPaths(paths);
  entry.modified(paths);
  Revision r1=new Revision(1,0,1);
  Revision r2=new Revision(2,0,1);
  Revision r3=new Revision(3,0,1);
  UpdateOp op=entry.asUpdateOp(r2);
  assertTrue(store.create(JOURNAL,Collections.singletonList(op)));
  StringSort sort=JournalEntry.newSorter();
  JournalEntry.fillExternalChanges(sort,r2,r3,store);
  assertEquals(0,sort.getSize());
  JournalEntry.fillExternalChanges(sort,r1,r2,store);
  assertEquals(paths.size(),sort.getSize());
  sort.close();
  sort=JournalEntry.newSorter();
  JournalEntry.fillExternalChanges(sort,r1,r3,store);
  assertEquals(paths.size(),sort.getSize());
  sort.close();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void applyTo() throws Exception {
  DiffCache cache=new MemoryDiffCache(new DocumentMK.Builder());
  List<String> paths=Lists.newArrayList();
  addRandomPaths(paths);
  StringSort sort=JournalEntry.newSorter();
  add(sort,paths);
  RevisionVector from=new RevisionVector(new Revision(1,0,1));
  RevisionVector to=new RevisionVector(new Revision(2,0,1));
  sort.sort();
  JournalEntry.applyTo(sort,cache,from,to);
  for (  String p : paths) {
    String changes=cache.getChanges(from,to,p,null);
    assertNotNull("missing changes for " + p,changes);
    for (    String c : getChildren(changes)) {
      assertTrue(paths.contains(PathUtils.concat(p,c)));
    }
  }
  sort.close();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRevisionTimestamp() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  JournalEntry entry=JOURNAL.newDocument(store);
  entry.modified("/foo");
  Revision r=Revision.newRevision(1);
  assertTrue(store.create(JOURNAL,Collections.singletonList(entry.asUpdateOp(r))));
  entry=store.find(JOURNAL,JournalEntry.asId(r));
  assertEquals(r.getTimestamp(),entry.getRevisionTimestamp());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.JournalTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void externalBranchChange() throws Exception {
  DocumentMK mk1=createMK(1,0);
  DocumentNodeStore ns1=mk1.getNodeStore();
  DocumentMK mk2=createMK(2,0);
  DocumentNodeStore ns2=mk2.getNodeStore();
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  mk1.commit("/","+\"regular1\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/regular1","+\"regular1child\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular2\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular3\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular4\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular5\": {}",null,null);
  ns1.runBackgroundOperations();
  String b1=mk1.branch(null);
  b1=mk1.commit("/","+\"branchVisible\": {}",b1,null);
  mk1.merge(b1,null);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  String nodes=mk2.getNodes("/",null,0,0,100,null);
  assertEquals("{\"branchVisible\":{},\"regular1\":{},\"regular2\":{},\"regular3\":{},\"regular4\":{},\"regular5\":{},\":childNodeCount\":6}",nodes);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void journalTest() throws Exception {
  DocumentMK mk1=createMK(1,0);
  DocumentNodeStore ns1=mk1.getNodeStore();
  CountingDocumentStore countingDocStore1=builder.actualStore;
  CountingTieredDiffCache countingDiffCache1=builder.actualDiffCache;
  DocumentMK mk2=createMK(2,0);
  DocumentNodeStore ns2=mk2.getNodeStore();
  CountingDocumentStore countingDocStore2=builder.actualStore;
  CountingTieredDiffCache countingDiffCache2=builder.actualDiffCache;
  final DiffingObserver observer=new DiffingObserver(false);
  ns1.addObserver(observer);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  observer.processAll();
  observer.clear();
  countingDocStore1.resetCounters();
  countingDocStore2.resetCounters();
  countingDiffCache1.resetLoadCounter();
  countingDiffCache2.resetLoadCounter();
  mk2.commit("/","+\"regular1\": {}",null,null);
  mk2.commit("/","+\"regular2\": {}",null,null);
  mk2.commit("/","+\"regular3\": {}",null,null);
  mk2.commit("/regular2","+\"regular4\": {}",null,null);
  ns2.runBackgroundOperations();
  assertEquals(0,observer.getTotal());
  assertEquals(0,countingDocStore1.getNumFindCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumQueryCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumRemoveCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumCreateOrUpdateCalls(Collection.NODES));
  assertEquals(0,countingDiffCache1.getLoadCount());
  ns1.runBackgroundOperations();
  mk2.commit("/","+\"regular5\": {}",null,null);
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  observer.processAll();
  countingDocStore1.printStacks=false;
  assertEquals(2,observer.getTotal());
  assertEquals(0,countingDiffCache1.getLoadCount());
  assertEquals(0,countingDocStore1.getNumRemoveCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumCreateOrUpdateCalls(Collection.NODES));
  assertEquals(0,countingDocStore1.getNumQueryCalls(Collection.NODES));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void journalEntryKey() throws Exception {
  DocumentNodeStore ns1=createMK(1,0).getNodeStore();
  DocumentNodeStore ns2=createMK(2,0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("foo");
  ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("bar");
  ns2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Revision h2=ns2.getHeadRevision().getRevision(ns2.getClusterId());
  assertNotNull(h2);
  ns2.runBackgroundReadOperations();
  ns2.runBackgroundOperations();
  String id=JournalEntry.asId(h2);
  assertTrue("Background update did not create a journal entry with id " + id,ns1.getDocumentStore().find(Collection.JOURNAL,id) != null);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cleanupTest() throws Exception {
  DocumentMK mk1=createMK(0,0);
  DocumentNodeStore ns1=mk1.getNodeStore();
  ns1.renewClusterIdLease();
  JournalGarbageCollector gc=new JournalGarbageCollector(ns1);
  Thread.sleep(100);
  gc.gc(1,TimeUnit.MILLISECONDS);
  Thread.sleep(100);
  assertEquals(0,gc.gc(1,TimeUnit.DAYS));
  assertEquals(0,gc.gc(6,TimeUnit.HOURS));
  assertEquals(0,gc.gc(1,TimeUnit.HOURS));
  assertEquals(0,gc.gc(10,TimeUnit.MINUTES));
  assertEquals(0,gc.gc(1,TimeUnit.MINUTES));
  assertEquals(0,gc.gc(1,TimeUnit.SECONDS));
  assertEquals(0,gc.gc(1,TimeUnit.MILLISECONDS));
  mk1.commit("/","+\"regular1\": {}",null,null);
  mk1.commit("/","+\"regular2\": {}",null,null);
  mk1.commit("/","+\"regular3\": {}",null,null);
  mk1.commit("/regular2","+\"regular4\": {}",null,null);
  Thread.sleep(100);
  assertEquals(0,gc.gc(5,TimeUnit.SECONDS));
  assertEquals(0,gc.gc(1,TimeUnit.MILLISECONDS));
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular5\": {}",null,null);
  ns1.runBackgroundOperations();
  mk1.commit("/","+\"regular6\": {}",null,null);
  ns1.runBackgroundOperations();
  Thread.sleep(100);
  assertEquals(0,gc.gc(5,TimeUnit.SECONDS));
  assertEquals(3,gc.gc(1,TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LargeTreeOperationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeLargeSubtree() throws CommitFailedException {
  DocumentNodeStore ns=new DocumentMK.Builder().setUseSimpleRevision(true).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  NodeBuilder test=builder.child("test");
  for (int i=0; i < DocumentRootBuilder.UPDATE_LIMIT * 3; i++) {
    test.child("child-" + i);
  }
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=ns.getRoot().builder();
  Revision r1=ns.newRevision();
  builder.getChildNode("test").remove();
  Revision r2=ns.newRevision();
  assertTrue("remove of large subtree must trigger branch commits",r2.getTimestamp() - r1.getTimestamp() > 1);
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevRecoveryAgentTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepeatedRecovery() throws Exception {
  NodeBuilder b1=ds1.getRoot().builder();
  b1.child("x").child("y");
  ds1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  ds2.runBackgroundOperations();
  NodeBuilder b2=ds2.getRoot().builder();
  b2.child("x").child("y").child("z").setProperty("foo","bar");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeDocument z1=getDocument(ds1,"/x/y/z");
  Revision zlastRev2=z1.getLastRev().get(c2Id);
  long leaseTime=ds1.getClusterInfo().getLeaseTime();
  ds1.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + leaseTime + 10);
  ds1.getClusterInfo().renewLease();
  assertTrue(ds1.getLastRevRecoveryAgent().isRecoveryNeeded());
  ds1.getLastRevRecoveryAgent().performRecoveryIfNeeded();
  assertFalse(ds1.getLastRevRecoveryAgent().isRecoveryNeeded());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsRecoveryRequired() throws Exception {
  NodeBuilder b1=ds1.getRoot().builder();
  b1.child("x").child("y");
  ds1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  ds2.runBackgroundOperations();
  NodeBuilder b2=ds2.getRoot().builder();
  b2.child("x").child("y").child("z").setProperty("foo","bar");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Revision zlastRev2=ds2.getHeadRevision().getRevision(ds2.getClusterId());
  long leaseTime=ds1.getClusterInfo().getLeaseTime();
  ds1.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + leaseTime + 10);
  ds1.getClusterInfo().renewLease();
  assertTrue(ds1.getLastRevRecoveryAgent().isRecoveryNeeded());
  List<Integer> cids=ds1.getLastRevRecoveryAgent().getRecoveryCandidateNodes();
  assertEquals(1,cids.size());
  assertEquals(c2Id,cids.get(0).intValue());
  ds1.getLastRevRecoveryAgent().recover(cids.get(0));
  assertEquals(zlastRev2,getDocument(ds1,"/x/y").getLastRev().get(c2Id));
  assertEquals(zlastRev2,getDocument(ds1,"/x").getLastRev().get(c2Id));
  assertEquals(zlastRev2,getDocument(ds1,"/").getLastRev().get(c2Id));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevRecoveryTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecover() throws Exception {
  NodeBuilder b1=ds1.getRoot().builder();
  b1.child("x").child("y");
  ds1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  ds2.runBackgroundOperations();
  NodeBuilder b2=ds2.getRoot().builder();
  b2.child("x").setProperty("f1","b1");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds2.runBackgroundOperations();
  b2=ds2.getRoot().builder();
  b2.child("x").child("y").child("z").setProperty("foo","bar");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  NodeDocument z1=getDocument(ds1,"/x/y/z");
  NodeDocument y1=getDocument(ds1,"/x/y");
  NodeDocument x1=getDocument(ds1,"/x");
  Revision zlastRev2=z1.getLastRev().get(c2Id);
  assertNull(zlastRev2);
  Revision head2=ds2.getHeadRevision().getRevision(c2Id);
  assertNull(y1.getLastRev().get(c2Id));
  LastRevRecoveryAgent recovery=new LastRevRecoveryAgent(ds1);
  recovery.recover(Iterators.forArray(x1,z1),c2Id);
  assertEquals(head2,getDocument(ds1,"/x/y").getLastRev().get(c2Id));
  assertEquals(head2,getDocument(ds1,"/x").getLastRev().get(c2Id));
  assertEquals(head2,getDocument(ds1,"/").getLastRev().get(c2Id));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void recoveryWithoutRootUpdate() throws Exception {
  String clusterId=String.valueOf(c1Id);
  ClusterNodeInfoDocument doc=sharedStore.find(CLUSTER_NODES,clusterId);
  NodeBuilder builder=ds1.getRoot().builder();
  builder.child("x").child("y").child("z");
  merge(ds1,builder);
  ds1.dispose();
  sharedStore.remove(CLUSTER_NODES,clusterId);
  sharedStore.create(CLUSTER_NODES,newArrayList(updateOpFromDocument(doc)));
  clock.waitUntil(doc.getLeaseEndTime() + 1);
  LastRevRecoveryAgent agent=new LastRevRecoveryAgent(ds2);
  List<Integer> clusterIds=agent.getRecoveryCandidateNodes();
  assertTrue(clusterIds.contains(c1Id));
  assertEquals("must not recover any documents",0,agent.recover(c1Id));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevSingleNodeRecoveryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoMissingUpdates() throws Exception {
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  setupScenario();
  mk.backgroundWrite();
  clock.waitUntil(clock.getTime() + 5000);
  mk.commit("/","^\"a/key2\" : \"value2\"",null,null);
  mk.backgroundWrite();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime());
  mk.getClusterInfo().renewLease();
  int pendingCount=mk.getPendingWriteCount();
  LastRevRecoveryAgent recoveryAgent=mk.getNodeStore().getLastRevRecoveryAgent();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime());
  assertEquals(pendingCount,recoveryAgent.recover(mk.getClusterInfo().getId()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLastRevRestoreOnNodeStart() throws Exception {
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  setupScenario();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  mk.getClusterInfo().renewLease();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 1000);
  mk2=openMK(0,mk.getNodeStore().getDocumentStore());
  int pendingCount=mk2.getPendingWriteCount();
  LastRevRecoveryAgent recoveryAgent=mk2.getNodeStore().getLastRevRecoveryAgent();
  assertEquals(pendingCount,recoveryAgent.recover(mk2.getClusterInfo().getId()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNodeRecoveryNeeded() throws InterruptedException {
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  setupScenario();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 1000);
  LastRevRecoveryAgent recoveryAgent=mk.getNodeStore().getLastRevRecoveryAgent();
  List<Integer> cids=recoveryAgent.getRecoveryCandidateNodes();
  assertEquals(1,cids.size());
  assertEquals(Integer.valueOf(1),cids.get(0));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLastRevRestore() throws Exception {
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 10);
  setupScenario();
  int pendingCount=mk.getPendingWriteCount();
  clock.waitUntil(clock.getTime() + mk.getClusterInfo().getLeaseTime() + 1000);
  LastRevRecoveryAgent recoveryAgent=mk.getNodeStore().getLastRevRecoveryAgent();
  assertEquals(pendingCount,recoveryAgent.recover(mk.getClusterInfo().getId()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LocalDiffCacheTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleDiff() throws Exception {
  TestNodeObserver o=new TestNodeObserver("/");
  store=createMK().getNodeStore();
  store.addObserver(o);
  o.reset();
  DiffCache cache=store.getDiffCache();
  Iterable<CacheStats> stats=cache.getStats();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("a").child("a2").setProperty("foo","bar");
  builder.child("b");
  merge(store,builder);
  assertTrue(getHitCount(stats) > 0);
  assertEquals(0,getMissCount(stats));
  assertEquals(3,o.added.size());
  builder=store.getRoot().builder();
  builder.child("a").child("a2").removeProperty("foo");
  o.reset();
  resetStats(stats);
  merge(store,builder);
  assertTrue(getHitCount(stats) > 0);
  assertEquals(0,getMissCount(stats));
  assertEquals(1,o.changed.size());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyDiff() throws Exception {
  Map<String,String> changes=new HashMap<String,String>();
  Diff diff=new Diff(changes,100);
  String asString=diff.asString();
  Diff diff2=Diff.fromString(asString);
  assertEquals(diff,diff2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ManyChildNodesTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nodeChildrenCache() throws Exception {
  DocumentNodeStore ns=new DocumentMK.Builder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < 1000; i++) {
    builder.child("c-" + i);
  }
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(ns.getNodeChildrenCacheStats().getElementCount() < 1000);
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoBlobGCTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consistencyCheckInlined() throws Exception {
  DataStoreState state=setUp(true);
  addInlined();
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void consistencyCheckWithGc() throws Exception {
  DataStoreState state=setUp(true);
  Set<String> existingAfterGC=gc(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consistencyCheckInit() throws Exception {
  DataStoreState state=setUp(true);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcLongRunningBlobCollection() throws Exception {
  DataStoreState state=setUp(true);
  log.info("{} Blobs added {}",state.blobsAdded.size(),state.blobsAdded);
  log.info("{} Blobs should be present {}",state.blobsPresent.size(),state.blobsPresent);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  DocumentNodeStore store=mk.getNodeStore();
  String repoId=null;
  if (SharedDataStoreUtils.isShared(store.getBlobStore())) {
    repoId=ClusterRepositoryInfo.createId(store);
    ((SharedDataStore)store.getBlobStore()).addMetadataRecord(new ByteArrayInputStream(new byte[0]),REPOSITORY.getNameFromId(repoId));
  }
  TestGarbageCollector gc=new TestGarbageCollector(new DocumentBlobReferenceRetriever(store),(GarbageCollectableBlobStore)store.getBlobStore(),executor,"./target",5,5000,repoId);
  gc.collectGarbage(false);
  Set<String> existingAfterGC=iterate();
  log.info("{} Blobs existing after gc {}",existingAfterGC.size(),existingAfterGC);
  assertTrue(Sets.difference(state.blobsPresent,existingAfterGC).isEmpty());
  assertEquals(gc.additionalBlobs,Sets.symmetricDifference(state.blobsPresent,existingAfterGC));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void consistencyCheckWithRenegadeDelete() throws Exception {
  DataStoreState state=setUp(true);
  Random rand=new Random(87);
  List<String> existing=Lists.newArrayList(state.blobsPresent);
  GarbageCollectableBlobStore store=(GarbageCollectableBlobStore)mk.getNodeStore().getBlobStore();
  long count=store.countDeleteChunks(ImmutableList.of(existing.get(rand.nextInt(existing.size()))),0);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(count,candidates);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreIT </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void create() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  String id=Utils.getIdFromPath("/test");
  UpdateOp updateOp=new UpdateOp(id,true);
  updateOp.set(Document.ID,id);
  Revision r1=Revision.newRevision(1);
  updateOp.setMapEntry("p",r1,"a");
  Revision r2=Revision.newRevision(1);
  updateOp.setMapEntry("p",r2,"b");
  Revision r3=Revision.newRevision(1);
  updateOp.setMapEntry("p",r3,"c");
  assertTrue(store.create(NODES,Collections.singletonList(updateOp)));
  NodeDocument doc=store.find(NODES,id,0);
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(3,valueMap.size());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void negativeCache() throws Exception {
  String id=Utils.getIdFromPath("/test");
  DocumentStore docStore=mk.getDocumentStore();
  assertNull(docStore.find(NODES,id));
  mk.commit("/","+\"test\":{}",null,null);
  assertNotNull(docStore.find(NODES,id));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void modCount() throws Exception {
  DocumentStore docStore=mk.getDocumentStore();
  String head=mk.commit("/","+\"test\":{}",null,null);
  mk.commit("/test","^\"prop\":\"v1\"",head,null);
  mk.runBackgroundOperations();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Long mc1=doc.getModCount();
  assertNotNull(mc1);
  try {
    mk.commit("/test","^\"prop\":\"v2\"",head,null);
    fail();
  }
 catch (  DocumentStoreException e) {
  }
  doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Long mc2=doc.getModCount();
  assertNotNull(mc2);
  assertTrue(mc2 > mc1);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrent() throws Exception {
  final long time=System.currentTimeMillis();
  mk.commit("/","+\"test\":{}",null,null);
  final String id=Utils.getIdFromPath("/test");
  final DocumentStore docStore=mk.getDocumentStore();
  List<Thread> threads=new ArrayList<Thread>();
  for (int i=0; i < NUM_THREADS; i++) {
    final int tId=i;
    threads.add(new Thread(new Runnable(){
      @Override public void run(){
        Revision r=new Revision(time,tId,0);
        for (int i=0; i < UPDATES_PER_THREAD; i++) {
          UpdateOp update=new UpdateOp(id,false);
          update.setMapEntry("prop",r,String.valueOf(i));
          docStore.createOrUpdate(NODES,update);
        }
      }
    }
));
  }
  final List<Exception> exceptions=new ArrayList<Exception>();
  final AtomicBoolean running=new AtomicBoolean(true);
  Thread reader=new Thread(new Runnable(){
    @Override public void run(){
      try {
        Map<Revision,Integer> previous=Maps.newHashMap();
        while (running.get()) {
          NodeDocument doc=docStore.find(NODES,id);
          if (doc == null) {
            throw new Exception("document is null");
          }
          Map<Revision,String> values=doc.getValueMap("prop");
          for (          Map.Entry<Revision,String> entry : values.entrySet()) {
            Revision r=entry.getKey();
            Integer previousValue=previous.get(r);
            Integer currentValue=Integer.parseInt(entry.getValue());
            if (previousValue != null && previousValue > currentValue) {
              throw new Exception("inconsistent read for " + r + ". previous value: "+ previousValue+ ", now: "+ entry.getValue());
            }
            previous.put(r,currentValue);
          }
          Thread.yield();
        }
      }
 catch (      Exception e) {
        exceptions.add(e);
      }
    }
  }
);
  reader.start();
  for (  Thread t : threads) {
    t.start();
  }
  for (  Thread t : threads) {
    t.join();
  }
  running.set(false);
  reader.join();
  for (  Exception e : exceptions) {
    throw e;
  }
  NodeDocument doc=docStore.find(NODES,id);
  assertNotNull(doc);
  Map<Revision,String> values=doc.getLocalMap("prop");
  assertNotNull(values);
  for (  Map.Entry<Revision,String> entry : values.entrySet()) {
    assertEquals(String.valueOf(UPDATES_PER_THREAD - 1),entry.getValue());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createWithNull() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  String id=Utils.getIdFromPath("/test");
  UpdateOp updateOp=new UpdateOp(id,true);
  updateOp.set(Document.ID,id);
  Revision r1=Revision.newRevision(1);
  updateOp.setMapEntry("p",r1,"a");
  Revision r2=Revision.newRevision(1);
  updateOp.setMapEntry("p",r2,null);
  Revision r3=Revision.newRevision(1);
  updateOp.setMapEntry("p",r3,"c");
  assertTrue(store.create(NODES,Collections.singletonList(updateOp)));
  NodeDocument doc=store.find(NODES,id,0);
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(3,valueMap.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreLimitsTest </h4><pre class="type-9 type-6 type-8 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void longName() throws Exception {
  DocumentNodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("test");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  String longName=Strings.repeat("foo_",10000);
  String longPath=String.format("/test/%s",longName);
  builder=ns.getRoot().builder();
  builder.child("test").child(longName);
  try {
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
 catch (  CommitFailedException e) {
    return;
  }
  String id=Utils.getIdFromPath(longPath);
  NodeDocument doc=ns.getDocumentStore().find(Collection.NODES,id,0);
  assertNotNull(doc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void containsMapEntry(){
  Revision r=new Revision(0,0,0);
  Revision unknown=new Revision(0,1,0);
  DocumentStore docStore=openDocumentStore();
  UpdateOp op=new UpdateOp("/node",true);
  op.setMapEntry("map",r,"value");
  docStore.createOrUpdate(Collection.NODES,op);
  op=new UpdateOp("/node",false);
  op.set("prop","value");
  op.containsMapEntry("map",unknown,true);
  assertNull(docStore.findAndUpdate(Collection.NODES,op));
  op=new UpdateOp("/node",false);
  op.set("prop","value");
  op.containsMapEntry("map",r,true);
  NodeDocument doc=docStore.findAndUpdate(Collection.NODES,op);
  assertNotNull(doc);
  doc=docStore.find(Collection.NODES,"/node");
  assertNotNull(doc);
  assertNotNull(doc.get("prop"));
  assertEquals("value",doc.get("prop"));
  op=new UpdateOp("/node",false);
  op.set("prop","other");
  op.containsMapEntry("map",r,false);
  assertNull(docStore.findAndUpdate(Collection.NODES,op));
  doc=docStore.find(Collection.NODES,"/node");
  assertNotNull(doc);
  assertNotNull(doc.get("prop"));
  assertEquals("value",doc.get("prop"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void queryWithLimit() throws Exception {
  DocumentStore docStore=openDocumentStore();
  DocumentNodeStore store=new DocumentMK.Builder().setDocumentStore(docStore).setAsyncDelay(0).getNodeStore();
  Revision rev=Revision.newRevision(0);
  List<UpdateOp> inserts=new ArrayList<UpdateOp>();
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    DocumentNodeState n=new DocumentNodeState(store,"/node-" + i,new RevisionVector(rev));
    inserts.add(n.asOperation(rev));
  }
  docStore.create(Collection.NODES,inserts);
  List<NodeDocument> docs=docStore.query(Collection.NODES,Utils.getKeyLowerLimit("/"),Utils.getKeyUpperLimit("/"),DocumentMK.MANY_CHILDREN_THRESHOLD);
  assertEquals(DocumentMK.MANY_CHILDREN_THRESHOLD,docs.size());
  store.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addGetAndRemove() throws Exception {
  DocumentStore docStore=openDocumentStore();
  UpdateOp updateOp=new UpdateOp("/",true);
  Revision r1=new Revision(0,0,0);
  updateOp.setMapEntry("property1",r1,"value1");
  updateOp.increment("property2",1);
  updateOp.set("property3","value3");
  docStore.createOrUpdate(Collection.NODES,updateOp);
  NodeDocument doc=docStore.find(Collection.NODES,"/");
  assertNotNull(doc);
  Map<?,?> property1=(Map<?,?>)doc.get("property1");
  assertNotNull(property1);
  String value1=(String)property1.get(r1);
  assertEquals("value1",value1);
  Long value2=(Long)doc.get("property2");
  assertEquals(Long.valueOf(1),value2);
  String value3=(String)doc.get("property3");
  assertEquals("value3",value3);
  docStore.remove(Collection.NODES,"/");
  doc=docStore.find(Collection.NODES,"/");
  assertTrue(doc == null);
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void batchRemove() throws Exception {
  DocumentStore docStore=openDocumentStore();
  int nUpdates=10;
  Revision r1=new Revision(0,0,0);
  List<String> ids=Lists.newArrayList();
  List<UpdateOp> updateOps=new ArrayList<UpdateOp>();
  for (int i=0; i < nUpdates; i++) {
    String path="/node" + i;
    UpdateOp updateOp=new UpdateOp(path,true);
    updateOp.set(Document.ID,"/node" + i);
    updateOp.setMapEntry("property1",r1,"value1");
    updateOp.increment("property2",1);
    updateOp.set("property3","value3");
    updateOps.add(updateOp);
    ids.add(updateOp.getId());
  }
  docStore.create(Collection.NODES,updateOps);
  for (  String id : ids) {
    assertNotNull(docStore.find(Collection.NODES,id));
  }
  docStore.remove(Collection.NODES,ids);
  for (  String id : ids) {
    assertNull(docStore.find(Collection.NODES,id));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MultiDocumentStoreTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void batchUpdateCachedDocument() throws Exception {
  String id=Utils.getIdFromPath("/foo");
  removeMe.add(id);
  UpdateOp op=new UpdateOp(id,true);
  op.set(Document.ID,id);
  op.set("_ds1",1);
  assertNull(ds1.createOrUpdate(Collection.NODES,op));
  assertNotNull(ds2.find(Collection.NODES,id));
  op=new UpdateOp(id,false);
  op.set("_ds1",2);
  assertNotNull(ds1.createOrUpdate(Collection.NODES,op));
  op=new UpdateOp(id,false);
  op.set("_ds2",1);
  List<UpdateOp> ops=Lists.newArrayList();
  ops.add(op);
  for (int i=0; i < 10; i++) {
    String docId=Utils.getIdFromPath("/node-" + i);
    UpdateOp update=new UpdateOp(docId,true);
    update.set(Document.ID,docId);
    update.set("_ds2",1);
    removeMe.add(docId);
    ops.add(update);
  }
  List<NodeDocument> old=ds2.createOrUpdate(Collection.NODES,ops);
  assertEquals(11,old.size());
  assertNotNull(old.get(0));
  assertEquals(2L,old.get(0).get("_ds1"));
  NodeDocument foo=ds2.find(Collection.NODES,id);
  assertNotNull(foo);
  assertEquals(2L,foo.get("_ds1"));
  assertEquals(1L,foo.get("_ds2"));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrentBatchUpdate() throws Exception {
  final CountDownLatch ready=new CountDownLatch(2);
  final CountDownLatch go=new CountDownLatch(1);
  final List<String> ids=Lists.newArrayList();
  for (int i=0; i < 100; i++) {
    ids.add(Utils.getIdFromPath("/node-" + i));
  }
  removeMe.addAll(ids);
  ds1.remove(Collection.NODES,ids);
  final List<Exception> exceptions=synchronizedList(new ArrayList<Exception>());
  final Map<String,NodeDocument> result1=Maps.newHashMap();
  Thread t1=new Thread(new Runnable(){
    @Override public void run(){
      try {
        List<UpdateOp> ops=Lists.newArrayList();
        for (        String id : ids) {
          UpdateOp op=new UpdateOp(id,true);
          op.set(Document.ID,id);
          op.set("_t1","value");
          ops.add(op);
        }
        Collections.shuffle(ops);
        ready.countDown();
        go.await();
        List<NodeDocument> docs=ds1.createOrUpdate(Collection.NODES,ops);
        for (int i=0; i < ops.size(); i++) {
          UpdateOp op=ops.get(i);
          result1.put(op.getId(),docs.get(i));
        }
      }
 catch (      Exception e) {
        exceptions.add(e);
      }
    }
  }
,"t1");
  final Map<String,NodeDocument> result2=Maps.newHashMap();
  Thread t2=new Thread(new Runnable(){
    @Override public void run(){
      try {
        List<UpdateOp> ops=Lists.newArrayList();
        for (        String id : ids) {
          UpdateOp op=new UpdateOp(id,true);
          op.set(Document.ID,id);
          op.set("_t2","value");
          ops.add(op);
        }
        Collections.shuffle(ops);
        ready.countDown();
        go.await();
        List<NodeDocument> docs=ds2.createOrUpdate(Collection.NODES,ops);
        for (int i=0; i < ops.size(); i++) {
          UpdateOp op=ops.get(i);
          result2.put(op.getId(),docs.get(i));
        }
      }
 catch (      Exception e) {
        exceptions.add(e);
      }
    }
  }
,"t2");
  t1.start();
  t2.start();
  ready.await();
  go.countDown();
  t1.join();
  t2.join();
  for (  Exception e : exceptions) {
    fail(e.toString());
  }
  for (  String id : ids) {
    NodeDocument d1=result1.get(id);
    NodeDocument d2=result2.get(id);
    if (d1 != null) {
      if (d2 != null) {
        fail("found " + id + " in both result sets, modcounts are: "+ d1.getModCount()+ "/"+ d2.getModCount());
      }
    }
 else {
      assertNotNull("id " + id + " is in neither result set",d2);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangeVisibility(){
  String id=this.getClass().getName() + ".testChangeVisibility";
  super.ds1.remove(Collection.NODES,id);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_foo",0);
  up.set("_bar",0);
  assertTrue(super.ds1.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  NodeDocument orig=super.ds1.find(Collection.NODES,id);
  if (orig.getModCount() != null) {
    long origMc=orig.getModCount();
    UpdateOp up2=new UpdateOp(id,false);
    up2.set("_id",id);
    up2.increment("_foo",1L);
    super.ds2.update(Collection.NODES,Collections.singletonList(id),up2);
    NodeDocument ds2doc=super.ds2.find(Collection.NODES,id);
    long ds2Mc=ds2doc.getModCount();
    assertTrue("_modCount needs to be > " + origMc + " but was "+ ds2Mc,ds2Mc > origMc);
    UpdateOp up1=new UpdateOp(id,false);
    up1.set("_id",id);
    up1.increment("_bar",1L);
    super.ds1.update(Collection.NODES,Collections.singletonList(id),up1);
    NodeDocument ds1doc=super.ds1.find(Collection.NODES,id);
    long ds1Mc=ds1doc.getModCount();
    assertTrue("_modCount needs to be > " + ds2Mc + " but was "+ ds1Mc,ds1Mc > ds2Mc);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidateCache(){
  String id="1:/" + this.getClass().getName() + ".testInvalidateCache";
  NodeDocument nd=super.ds1.find(Collection.NODES,id);
  if (nd != null) {
    super.ds1.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_foo","bar");
  assertTrue(super.ds1.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  NodeDocument nd1=super.ds1.find(Collection.NODES,id);
  NodeDocument nd2=super.ds2.find(Collection.NODES,id);
  assertNotNull(nd1);
  assertNotNull(nd2);
  long firstVersion=nd1.getModCount();
  assertEquals(firstVersion,nd2.getModCount().longValue());
  UpdateOp upds1=new UpdateOp(id,true);
  upds1.set("_id",id);
  upds1.set("foo","qux");
  super.ds1.update(Collection.NODES,Collections.singletonList(id),upds1);
  nd1=super.ds1.find(Collection.NODES,id);
  assertEquals("modcount should have changed in ds1",firstVersion + 1,nd1.getModCount().longValue());
  nd2=super.ds2.find(Collection.NODES,id);
  assertEquals("ds2 should still be on first version",firstVersion,nd2.getModCount().longValue());
  nd2=super.ds2.find(Collection.NODES,id,0);
  assertEquals("ds2 should now see the second version",firstVersion + 1,nd2.getModCount().longValue());
  NodeDocument nd2b=super.ds2.find(Collection.NODES,id);
  assertEquals("ds2 should now see the second version",firstVersion + 1,nd2b.getModCount().longValue());
  UpdateOp upds2=new UpdateOp(id,true);
  upds2.set("_id",id);
  upds2.set("foo","blub");
  super.ds2.update(Collection.NODES,Collections.singletonList(id),upds1);
  nd2=super.ds2.find(Collection.NODES,id);
  assertEquals("modcount should have incremented again",firstVersion + 2,nd2.getModCount().longValue());
  long ds1checktime=nd1.getLastCheckTime();
  letTimeElapse();
  ds1.invalidateCache();
  nd1=super.ds1.find(Collection.NODES,id);
  assertEquals("modcount should have incremented again",firstVersion + 2,nd1.getModCount().longValue());
  assertTrue(nd1.getLastCheckTime() > ds1checktime);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterleavedUpdate(){
  String id=this.getClass().getName() + ".testInterleavedUpdate";
  NodeDocument nd=super.ds1.find(Collection.NODES,id);
  if (nd != null) {
    super.ds1.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_foo",0);
  assertTrue(super.ds1.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  long increments=10;
  for (int i=0; i < increments; i++) {
    up=new UpdateOp(id,true);
    up.set("_id",id);
    up.increment("_foo",1);
    if (i % 2 == 0) {
      super.ds1.update(Collection.NODES,Collections.singletonList(id),up);
    }
 else {
      super.ds2.update(Collection.NODES,Collections.singletonList(id),up);
    }
  }
  nd=super.ds1.find(Collection.NODES,id,0);
  assertEquals("_foo should have been incremented 10 times",increments,nd.get("_foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.NodeDocumentTest </h4><pre class="type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesAfterGC2() throws Exception {
  int numChanges=200;
  DocumentNodeStore ns=createTestStore(numChanges);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  NodeDocument toRemove=Iterators.getLast(root.getAllPreviousDocs());
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  numChanges-=Iterables.size(toRemove.getAllChanges());
  root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(numChanges + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChanges() throws Exception {
  final int NUM_CHANGES=200;
  DocumentNodeStore ns=createTestStore(NUM_CHANGES);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(NUM_CHANGES + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesCluster() throws Exception {
  final int NUM_CLUSTER_NODES=3;
  final int NUM_CHANGES=500;
  DocumentStore store=new MemoryDocumentStore();
  List<DocumentNodeStore> docStores=Lists.newArrayList();
  for (int i=0; i < NUM_CLUSTER_NODES; i++) {
    DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(store).setAsyncDelay(0).setClusterId(i + 1).getNodeStore();
    docStores.add(ns);
  }
  Random r=new Random(42);
  for (int i=0; i < NUM_CHANGES; i++) {
    int clusterIdx=r.nextInt(NUM_CLUSTER_NODES);
    DocumentNodeStore ns=docStores.get(clusterIdx);
    NodeBuilder builder=ns.getRoot().builder();
    builder.setProperty("p-" + clusterIdx,i);
    merge(ns,builder);
    if (r.nextFloat() < 0.2) {
      RevisionVector head=ns.getHeadRevision();
      for (      UpdateOp op : SplitOperations.forDocument(getRootDocument(store),ns,head,2)) {
        store.createOrUpdate(NODES,op);
      }
    }
  }
  DocumentNodeStore ns=docStores.get(0);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision rev : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTimeThenClusterId(rev) > 0);
    previous=rev;
  }
  assertEquals(NUM_CHANGES + 1,Iterables.size(root.getAllChanges()));
  for (  DocumentNodeStore dns : docStores) {
    dns.dispose();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesAfterGC1() throws Exception {
  int numChanges=200;
  DocumentNodeStore ns=createTestStore(numChanges);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  NodeDocument toRemove=root.getAllPreviousDocs().next();
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  numChanges-=Iterables.size(toRemove.getAllChanges());
  root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(numChanges + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void isConflicting() throws Exception {
  final int numChanges=200;
  final Set<String> prevDocCalls=newHashSet();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      if (Utils.getPathFromId(key).startsWith("p")) {
        prevDocCalls.add(key);
      }
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore ns=createTestStore(store,0,numChanges);
  NodeDocument doc=getRootDocument(store);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(200,valueMap.size());
  RevisionVector baseRev=new RevisionVector(valueMap.keySet().iterator().next());
  Revision commitRev=ns.newRevision();
  UpdateOp op=new UpdateOp(Utils.getIdFromPath("/"),false);
  op.setMapEntry("p",commitRev,"v");
  prevDocCalls.clear();
  assertFalse(doc.isConflicting(op,baseRev,commitRev,false));
  assertTrue("too many calls for previous documents: " + prevDocCalls,prevDocCalls.size() <= 6);
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getConflictsFor(){
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  String id=Utils.getPathFromId("/");
  NodeDocument doc=new NodeDocument(docStore);
  doc.put(Document.ID,id);
  Iterable<Revision> branchCommits=Collections.emptyList();
  Set<Revision> conflicts=doc.getConflictsFor(branchCommits);
  assertTrue(conflicts.isEmpty());
  UpdateOp op=new UpdateOp(id,false);
  Revision r0=Revision.newRevision(1);
  Revision r1=Revision.newRevision(1);
  Revision c1=Revision.newRevision(1);
  Revision r2=Revision.newRevision(1);
  Revision c2=Revision.newRevision(1);
  op.setMapEntry(COLLISIONS,r0,String.valueOf(true));
  NodeDocument.addCollision(op,r1,c1);
  NodeDocument.addCollision(op,r2,c2);
  UpdateUtils.applyChanges(doc,op);
  branchCommits=Collections.singleton(r0);
  conflicts=doc.getConflictsFor(branchCommits);
  assertTrue(conflicts.isEmpty());
  branchCommits=Collections.singleton(r1.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1),conflicts);
  branchCommits=Collections.singleton(r2.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c2),conflicts);
  branchCommits=Lists.newArrayList(r1.asBranchRevision(),r2.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1,c2),conflicts);
  branchCommits=Lists.newArrayList(r2.asBranchRevision(),r1.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1,c2),conflicts);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPreviousDocLeavesAfterGC1() throws Exception {
  DocumentNodeStore ns=createTestStore(200);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  int numLeaves=Iterators.size(root.getPreviousDocLeaves());
  NodeDocument toRemove=root.getAllPreviousDocs().next();
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  root=getRootDocument(ns.getDocumentStore());
  assertEquals(numLeaves - 1,Iterators.size(root.getPreviousDocLeaves()));
  Iterator<NodeDocument> it=root.getPreviousDocLeaves();
  while (it.hasNext()) {
    NodeDocument leaf=it.next();
    Revision r=leaf.getAllChanges().iterator().next();
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPreviousDocLeavesAfterGC2() throws Exception {
  DocumentNodeStore ns=createTestStore(200);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  int numLeaves=Iterators.size(root.getPreviousDocLeaves());
  NodeDocument toRemove=Iterators.getLast(root.getAllPreviousDocs());
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  root=getRootDocument(ns.getDocumentStore());
  assertEquals(numLeaves - 1,Iterators.size(root.getPreviousDocLeaves()));
  Iterator<NodeDocument> it=root.getPreviousDocLeaves();
  while (it.hasNext()) {
    NodeDocument leaf=it.next();
    Revision r=leaf.getAllChanges().iterator().next();
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getChanges() throws Exception {
  final int numChanges=200;
  Random random=new Random();
  DocumentNodeStore ns=createTestStore(numChanges);
  DocumentStore store=ns.getDocumentStore();
  NodeDocument doc=getRootDocument(store);
  for (int i=0; i < 10; i++) {
    int idx=random.nextInt(numChanges);
    Revision r=Iterables.get(doc.getValueMap("p").keySet(),idx);
    Iterable<Revision> revs=doc.getChanges("p",new RevisionVector(r));
    assertEquals(idx,Iterables.size(revs));
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNewestRevision() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=createTestStore(store,1,0);
  DocumentNodeStore ns2=createTestStore(store,2,0);
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("test");
  merge(ns1,b1);
  RevisionVector headCreated=ns1.getHeadRevision();
  Revision created=headCreated.getRevision(ns1.getClusterId());
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  Set<Revision> collisions=newHashSet();
  Revision newest=doc.getNewestRevision(ns1,ns1.getHeadRevision(),ns1.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(0,collisions.size());
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertNull(newest);
  assertEquals(1,collisions.size());
  assertEquals(created,collisions.iterator().next());
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(0,collisions.size());
  Revision uncommitted=ns1.newRevision();
  UpdateOp op=new UpdateOp(Utils.getIdFromPath("/test"),false);
  NodeDocument.setCommitRoot(op,uncommitted,0);
  op.setMapEntry("p",uncommitted,"v");
  assertNotNull(store.findAndUpdate(NODES,op));
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns1,ns1.getHeadRevision(),ns1.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(1,collisions.size());
  assertEquals(uncommitted,collisions.iterator().next());
  collisions.clear();
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(1,collisions.size());
  assertEquals(uncommitted,collisions.iterator().next());
  b1=ns1.getRoot().builder();
  b1.child("test").setProperty("q","v");
  merge(ns1,b1);
  Revision committed=ns1.getHeadRevision().getRevision(ns1.getClusterId());
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns1,headCreated,ns1.newRevision(),null,collisions);
  assertEquals(committed,newest);
  assertEquals(0,collisions.size());
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(2,collisions.size());
  assertTrue(collisions.contains(uncommitted));
  assertTrue(collisions.contains(committed));
  ns1.dispose();
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getChangesMixedClusterIds() throws Exception {
  final int numChanges=200;
  Random random=new Random();
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=createTestStore(store,1,0);
  DocumentNodeStore ns2=createTestStore(store,2,0);
  List<DocumentNodeStore> nodeStores=Lists.newArrayList(ns1,ns2);
  List<RevisionVector> headRevisions=Lists.newArrayList();
  for (int i=0; i < numChanges; i++) {
    DocumentNodeStore ns=nodeStores.get(random.nextInt(nodeStores.size()));
    ns.runBackgroundOperations();
    NodeBuilder builder=ns.getRoot().builder();
    builder.setProperty("p",i);
    merge(ns,builder);
    headRevisions.add(ns.getHeadRevision());
    ns.runBackgroundOperations();
    if (random.nextDouble() < 0.2) {
      RevisionVector head=ns.getHeadRevision();
      for (      UpdateOp op : SplitOperations.forDocument(getRootDocument(store),ns,head,2)) {
        store.createOrUpdate(NODES,op);
      }
    }
  }
  headRevisions=Lists.reverse(headRevisions);
  NodeDocument doc=getRootDocument(store);
  for (int i=0; i < 10; i++) {
    int idx=random.nextInt(numChanges);
    RevisionVector r=headRevisions.get(idx);
    Iterable<Revision> revs1=doc.getChanges("p",r);
    Iterable<Revision> revs2=doc.getChanges("p",r);
    assertEquals(Iterables.size(revs1),Iterables.size(revs2));
    assertEquals(idx,Iterables.size(revs1));
  }
  ns1.dispose();
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getPreviousDocLeaves() throws Exception {
  DocumentNodeStore ns=createTestStore(200);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  Iterator<NodeDocument> it=root.getPreviousDocLeaves();
  while (it.hasNext()) {
    NodeDocument leaf=it.next();
    Revision r=leaf.getAllChanges().iterator().next();
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.NodeStoreDiffTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This testcase demonstrates that diff logic in merge part traverses node path
 * which are not affected by the commit
 * @throws Exception
 */
@Test public void testDiff() throws Exception {
  createNodes("/oak:index/prop-a","/oak:index/prop-b","/etc/workflow");
  createNodes("/fake/a");
  createNodes("/fake/b");
  NodeBuilder b2=ns.getRoot().builder();
  createNodes(b2,"/etc/workflow/instance1");
  tds.reset();
  ns.merge(b2,new CommitHook(){
    @Nonnull public NodeState processCommit(    NodeState before,    NodeState after,    CommitInfo info) throws CommitFailedException {
      NodeBuilder rb=after.builder();
      createNodes(rb,"/oak:index/prop-a/a1");
      createNodes("/oak:index/prop-b/b1");
      return rb.getNodeState();
    }
  }
,CommitInfo.EMPTY);
  assertFalse(tds.paths.contains("/oak:index/prop-b/b1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.OrphanedBranchTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeUncommittedChange() throws Exception {
  String id=Utils.getIdFromPath("/foo");
  NodeBuilder builder=store.getRoot().builder();
  builder.child("foo");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  int count=0;
  while (store.getDocumentStore().find(NODES,id).getPreviousRanges().isEmpty()) {
    builder=store.getRoot().builder();
    builder.child("foo").setProperty("test",count++);
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    store.runBackgroundOperations();
  }
  int numBranches=store.getBranches().size();
  count=0;
  builder=store.getRoot().builder();
  NodeBuilder child=builder.child("foo");
  while (store.getBranches().size() == numBranches) {
    child.setProperty("prop",count++);
  }
  builder=store.getRoot().builder();
  builder.child("foo").setProperty("bar",0);
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeDocument doc=store.getDocumentStore().find(NODES,id);
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getLocalMap("prop");
  assertFalse(valueMap.isEmpty());
  UnmergedBranches branches=store.getBranches();
  Revision branchRev=doc.getLocalMap("prop").firstKey();
  Branch b=branches.getBranch(new RevisionVector(branchRev.asBranchRevision()));
  assertNotNull(b);
  branches.remove(b);
  count=0;
  while (store.getDocumentStore().find(NODES,id).getPreviousRanges().size() == 1) {
    builder=store.getRoot().builder();
    builder.child("foo").setProperty("p",count++);
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    store.runBackgroundOperations();
  }
  doc=store.getDocumentStore().find(NODES,id);
  doc.getNodeAtRevision(store,store.getHeadRevision(),null);
  store.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void orphanedBranches() throws Exception {
  int numCreated=0;
  for (; ; ) {
    NodeBuilder builder=store.getRoot().builder();
    NodeBuilder child=builder.child("foo");
    int numBranches=store.getBranches().size();
    int count=0;
    while (store.getBranches().size() == numBranches) {
      child.setProperty("prop",count++);
    }
    numCreated++;
    builder=store.getRoot().builder();
    builder.child("bar").setProperty("prop",numCreated);
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    numBranches=store.getBranches().size();
    store.runBackgroundOperations();
    String id=Utils.getIdFromPath("/");
    NodeDocument doc=store.getDocumentStore().find(NODES,id);
    assertNotNull(doc);
    Map<Revision,String> collisions=doc.getLocalMap(COLLISIONS);
    assertTrue("too many collisions: " + collisions.size(),collisions.size() <= numBranches);
    int limit=numBranches + NodeDocument.NUM_REVS_THRESHOLD;
    id=Utils.getIdFromPath("/foo");
    doc=store.getDocumentStore().find(NODES,id);
    assertNotNull(doc);
    Map<Revision,String> map=doc.getLocalMap("prop");
    assertTrue("too many orphaned changes: " + map.size() + " > "+ limit,map.size() <= limit);
    map=doc.getLocalCommitRoot();
    assertTrue("too many orphaned commit root entries: " + map.size() + " > "+ limit,map.size() <= limit);
    if (numCreated % NodeDocument.NUM_REVS_THRESHOLD == 0) {
      gc.gc(1,TimeUnit.SECONDS);
    }
    LOG.info("created {}, still considered active: {}",numCreated,store.getBranches().size());
    int collect=fixture instanceof DocumentStoreFixture.MemoryFixture ? 500 : 100;
    if (numCreated - store.getBranches().size() >= collect) {
      break;
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.PreviousDocCacheTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cacheTestPrevDocs() throws Exception {
  DocumentNodeStore ns=mk.getNodeStore();
  DocumentStore docStore=ns.getDocumentStore();
  final int SPLIT_THRESHOLD=10;
  NodeBuilder b;
  for (int j=0; j <= SPLIT_THRESHOLD; j++) {
    for (int i=0; i < SPLIT_THRESHOLD; i++) {
      b=ns.getRoot().builder();
      b.setProperty("foo","node-" + j + "-"+ i);
      merge(ns,b);
    }
    splitDocs(ns,SPLIT_THRESHOLD);
  }
  CacheStats nodesCache=null;
  CacheStats prevDocsCache=null;
  for (  CacheStats cacheStats : docStore.getCacheStats()) {
    if ("Document-Documents".equals(cacheStats.getName())) {
      nodesCache=cacheStats;
    }
 else     if ("Document-PrevDocuments".equals(cacheStats.getName())) {
      prevDocsCache=cacheStats;
    }
  }
  assertNotNull("Nodes cache must not be null",nodesCache);
  assertNotNull("Prev docs cache must not be null",prevDocsCache);
  validateFullyLoadedCache(docStore,SPLIT_THRESHOLD,nodesCache,prevDocsCache);
  docStore.invalidateCache();
  assertEquals("No entries expected in nodes cache",0,nodesCache.getElementCount());
  assertEquals("No entries expected in prev docs cache",0,prevDocsCache.getElementCount());
  NodeDocument doc=docStore.find(NODES,"0:/");
  assertEquals("Only main doc entry expected in nodes cache",1,nodesCache.getElementCount());
  assertEquals("No entries expected in prev docs cache",0,prevDocsCache.getElementCount());
  Iterators.size(doc.getAllPreviousDocs());
  validateFullyLoadedCache(docStore,SPLIT_THRESHOLD,nodesCache,prevDocsCache);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RangeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void includes(){
  Revision lower=new Revision(0xff,0,1);
  Revision low=new Revision(0x100,0,1);
  Revision high=new Revision(0x300,0,1);
  Revision higher=new Revision(0x301,0,1);
  Revision r=new Revision(0x200,0,1);
  Revision other=new Revision(0x200,0,2);
  Range range=new Range(high,low,0);
  assertTrue(range.includes(low));
  assertTrue(range.includes(high));
  assertTrue(range.includes(r));
  assertFalse(range.includes(lower));
  assertFalse(range.includes(higher));
  assertFalse(range.includes(other));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void parse(){
  Revision low=Revision.fromString("r1-0-1");
  Revision high=Revision.fromString("r2-0-1");
  Range r=new Range(high,low,0);
  assertEquals("r1-0-1/0",r.getLowValue());
  assertEquals(r,Range.fromEntry(high,r.getLowValue()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionGCTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void recreateRemovedNodeAfterGC() throws Exception {
  NodeBuilder b=newNodeBuilder();
  b.child("child");
  merge(b);
  b=newNodeBuilder();
  b.child("child").remove();
  merge(b);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(2));
  gc.gc(1,HOURS);
  b=newNodeBuilder();
  b.child("child");
  merge(b);
  assertTrue(store.getRoot().hasChildNode("child"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void equalsHashCode(){
  Revision a=Revision.newRevision(0);
  Revision b=Revision.newRevision(0);
  assertTrue(a.equals(a));
  assertFalse(a.equals(b));
  assertFalse(b.equals(a));
  assertFalse(a.hashCode() == b.hashCode());
  Revision a1=Revision.fromString(a.toString());
  assertTrue(a.equals(a1));
  assertTrue(a1.equals(a));
  Revision a2=new Revision(a.getTimestamp(),a.getCounter(),a.getClusterId());
  assertTrue(a.equals(a2));
  assertTrue(a2.equals(a));
  assertEquals(a.hashCode(),a1.hashCode());
  assertEquals(a.hashCode(),a2.hashCode());
  Revision x1=new Revision(a.getTimestamp() + 1,a.getCounter(),a.getClusterId());
  assertFalse(a.equals(x1));
  assertFalse(x1.equals(a));
  assertFalse(a.hashCode() == x1.hashCode());
  Revision x2=new Revision(a.getTimestamp(),a.getCounter() + 1,a.getClusterId());
  assertFalse(a.equals(x2));
  assertFalse(x2.equals(a));
  assertFalse(a.hashCode() == x2.hashCode());
  Revision x3=new Revision(a.getTimestamp(),a.getCounter(),a.getClusterId() + 1);
  assertFalse(a.equals(x3));
  assertFalse(x3.equals(a));
  assertFalse(a.hashCode() == x3.hashCode());
}

</code></pre>

<br>
<pre class="type-13 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compare() throws InterruptedException {
  Revision last=Revision.newRevision(0);
  try {
    last.compareRevisionTime(null);
    fail();
  }
 catch (  NullPointerException e) {
  }
  for (int i=0; i < 1000; i++) {
    Revision r=Revision.newRevision(0);
    assertTrue(r.compareRevisionTime(r) == 0);
    assertTrue(r.compareRevisionTime(last) > 0);
    assertTrue(last.compareRevisionTime(r) < 0);
    last=r;
    if (i % 100 == 0) {
      Thread.sleep(1);
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fromStringToString(){
  for (int i=0; i < 10000; i++) {
    Revision r=Revision.newRevision(i);
    Revision r2=Revision.fromString(r.toString());
    assertEquals(r.toString(),r2.toString());
    assertEquals(r.hashCode(),r2.hashCode());
    assertTrue(r.equals(r2));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionVectorTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void asTrunkRevision(){
  RevisionVector rv=new RevisionVector();
  assertFalse(rv.asTrunkRevision().isBranch());
  rv=rv.update(new Revision(1,0,1,true));
  assertTrue(rv.isBranch());
  assertFalse(rv.asTrunkRevision().isBranch());
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void remove(){
  RevisionVector rv=new RevisionVector();
  assertSame(rv,rv.remove(1));
  Revision rev1=new Revision(1,0,1);
  Revision rev2=new Revision(1,0,2);
  Revision rev3=new Revision(1,0,3);
  rv=new RevisionVector(rev1);
  assertSame(rv,rv.remove(2));
  assertEquals(new RevisionVector(),rv.remove(rev1.getClusterId()));
  rv=new RevisionVector(rev1,rev2,rev3);
  assertEquals(new RevisionVector(rev2,rev3),rv.remove(rev1.getClusterId()));
  assertEquals(new RevisionVector(rev1,rev3),rv.remove(rev2.getClusterId()));
  assertEquals(new RevisionVector(rev1,rev2),rv.remove(rev3.getClusterId()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void equals(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(rv1,rv2);
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  assertNotEquals(rv1,rv2);
  rv2=rv2.update(r11);
  assertEquals(rv1,rv2);
  Revision r12=new Revision(1,0,2);
  rv1=rv1.update(r12);
  assertNotEquals(rv1,rv2);
  rv2=rv2.update(r12);
  assertEquals(rv1,rv2);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void asBranchRevision3(){
  Revision r11=new Revision(1,0,1);
  Revision br11=r11.asBranchRevision();
  RevisionVector rv=new RevisionVector(r11);
  assertEquals(new RevisionVector(br11),rv.asBranchRevision(1));
  rv=rv.asTrunkRevision();
  Revision r12=new Revision(1,0,2);
  rv=rv.update(r12);
  assertEquals(new RevisionVector(br11,r12),rv.asBranchRevision(1));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void hashCodeTest(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(rv1.hashCode(),rv2.hashCode());
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  rv2=rv2.update(r11);
  assertEquals(rv1.hashCode(),rv2.hashCode());
  Revision r12=new Revision(1,0,2);
  rv1=rv1.update(r12);
  rv2=rv2.update(r12);
  assertEquals(rv1.hashCode(),rv2.hashCode());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void pmin(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(newHashSet(),newHashSet(rv1.pmin(rv2)));
  Revision rev11=new Revision(1,0,1);
  Revision rev21=new Revision(2,0,1);
  Revision rev12=new Revision(1,0,2);
  Revision rev22=new Revision(2,0,2);
  rv1=rv1.update(rev11);
  assertEquals(newHashSet(),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(),newHashSet(rv2.pmin(rv1)));
  rv2=rv2.update(rev12);
  assertEquals(newHashSet(),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(),newHashSet(rv2.pmin(rv1)));
  rv1=rv1.update(rev12);
  assertEquals(newHashSet(rev12),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev12),newHashSet(rv2.pmin(rv1)));
  rv2=rv2.update(rev22);
  assertEquals(newHashSet(rev12),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev12),newHashSet(rv2.pmin(rv1)));
  rv2=rv2.update(rev11);
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv2.pmin(rv1)));
  rv1=rv1.update(rev21);
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv2.pmin(rv1)));
  rv1=rv1.update(rev22);
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv2.pmin(rv1)));
  rv2=rv2.update(rev21);
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv1.pmin(rv2)));
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv2.pmin(rv1)));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void pmax(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(newHashSet(),newHashSet(rv1.pmax(rv2)));
  Revision rev11=new Revision(1,0,1);
  Revision rev21=new Revision(2,0,1);
  Revision rev12=new Revision(1,0,2);
  Revision rev22=new Revision(2,0,2);
  rv1=rv1.update(rev11);
  assertEquals(newHashSet(rev11),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11),newHashSet(rv2.pmax(rv1)));
  rv2=rv2.update(rev12);
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv2.pmax(rv1)));
  rv1=rv1.update(rev12);
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11,rev12),newHashSet(rv2.pmax(rv1)));
  rv2=rv2.update(rev22);
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv2.pmax(rv1)));
  rv2=rv2.update(rev11);
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev11,rev22),newHashSet(rv2.pmax(rv1)));
  rv1=rv1.update(rev21);
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv2.pmax(rv1)));
  rv1=rv1.update(rev22);
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv2.pmax(rv1)));
  rv2=rv2.update(rev21);
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv1.pmax(rv2)));
  assertEquals(newHashSet(rev21,rev22),newHashSet(rv2.pmax(rv1)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isNewer(){
  Revision rev1=new Revision(1,0,1);
  Revision rev2=new Revision(1,0,2);
  Revision rev3=new Revision(1,0,3);
  RevisionVector rv=new RevisionVector(rev1,rev2);
  assertFalse(rv.isRevisionNewer(rev1));
  assertFalse(rv.isRevisionNewer(rev2));
  assertTrue(rv.isRevisionNewer(rev3));
  assertTrue(rv.isRevisionNewer(new Revision(2,0,1)));
  assertTrue(rv.isRevisionNewer(new Revision(2,0,2)));
  assertFalse(rv.isRevisionNewer(new Revision(0,0,1)));
  assertFalse(rv.isRevisionNewer(new Revision(0,0,2)));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void difference(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(new RevisionVector(),rv1.difference(rv2));
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  assertEquals(new RevisionVector(r11),rv1.difference(rv2));
  assertEquals(new RevisionVector(),rv2.difference(rv1));
  rv2=rv2.update(r11);
  assertEquals(new RevisionVector(),rv1.difference(rv2));
  assertEquals(new RevisionVector(),rv2.difference(rv1));
  Revision r12=new Revision(1,0,2);
  rv1=rv1.update(r12);
  assertEquals(new RevisionVector(r12),rv1.difference(rv2));
  assertEquals(new RevisionVector(),rv2.difference(rv1));
  Revision r22=new Revision(2,0,2);
  rv2=rv2.update(r22);
  assertEquals(new RevisionVector(r12),rv1.difference(rv2));
  assertEquals(new RevisionVector(r22),rv2.difference(rv1));
  Revision r21=new Revision(2,0,1);
  rv1=rv1.update(r21);
  assertEquals(new RevisionVector(r21,r12),rv1.difference(rv2));
  assertEquals(new RevisionVector(r11,r22),rv2.difference(rv1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compareTo(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(0,rv1.compareTo(rv2));
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  assertTrue(rv1.compareTo(rv2) > 0);
  assertTrue(rv2.compareTo(rv1) < 0);
  Revision r12=new Revision(1,0,2);
  rv2=rv2.update(r12);
  assertTrue(rv1.compareTo(rv2) > 0);
  assertTrue(rv2.compareTo(rv1) < 0);
  rv2=rv2.update(r11);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
  rv1=rv1.update(r12);
  assertEquals(0,rv1.compareTo(rv2));
  assertEquals(0,rv2.compareTo(rv1));
  Revision r22=new Revision(2,0,2);
  rv2=rv2.update(r22);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
  Revision rb22=r22.asBranchRevision();
  rv1=rv1.update(rb22);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRevision(){
  RevisionVector rv=new RevisionVector();
  assertNull(rv.getRevision(1));
  Revision r11=new Revision(1,0,1);
  rv=rv.update(r11);
  assertEquals(r11,rv.getRevision(1));
  assertNull(rv.getRevision(2));
  Revision r13=new Revision(1,0,3);
  rv=rv.update(r13);
  assertEquals(r13,rv.getRevision(3));
  assertNull(rv.getRevision(2));
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void update(){
  Revision rev1=new Revision(1,0,1);
  RevisionVector rv=new RevisionVector(rev1);
  assertEquals(1,Iterables.size(rv));
  assertSame(rv,rv.update(rev1));
  Revision rev2=new Revision(2,0,1);
  rv=rv.update(rev2);
  assertEquals(newHashSet(rev2),newHashSet(rv));
  Revision rev3=new Revision(3,0,2);
  rv=rv.update(rev3);
  assertEquals(newHashSet(rev2,rev3),newHashSet(rv));
  rev3=rev3.asBranchRevision();
  rv=rv.update(rev3);
  assertEquals(newHashSet(rev2,rev3),newHashSet(rv));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isBranch(){
  RevisionVector rv=new RevisionVector();
  assertFalse(rv.isBranch());
  Revision r1=new Revision(1,0,1);
  rv=rv.update(r1);
  assertFalse(rv.isBranch());
  Revision r2=new Revision(1,0,2,true);
  rv=rv.update(r2);
  assertTrue(rv.isBranch());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.SharedBlobStoreGCTest </h4><pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGCStats() throws Exception {
  log.debug("Running testGCStats()");
  cluster1.gc.collectGarbage(true);
  cluster2.gc.collectGarbage(true);
  Set<String> actualRepoIds=Sets.newHashSet();
  actualRepoIds.add(cluster1.repoId);
  actualRepoIds.add(cluster2.repoId);
  Set<Integer> actualNumBlobs=Sets.newHashSet();
  actualNumBlobs.add(cluster1.initBlobs.size());
  actualNumBlobs.add(cluster2.initBlobs.size());
  List<GarbageCollectionRepoStats> statsList=cluster1.gc.getStats();
  Set<Integer> observedNumBlobs=Sets.newHashSet();
  Set<String> observedRepoIds=Sets.newHashSet();
  for (  GarbageCollectionRepoStats stat : statsList) {
    observedNumBlobs.add(stat.getNumLines());
    observedRepoIds.add(stat.getRepositoryId());
    Assert.assertTrue(stat.getStartTime() <= stat.getEndTime());
    if (stat.getRepositoryId().equals(cluster1.repoId)) {
      Assert.assertTrue(stat.isLocal());
    }
  }
  Assert.assertTrue(Sets.difference(actualNumBlobs,observedNumBlobs).isEmpty());
  Assert.assertTrue(Sets.difference(actualRepoIds,observedRepoIds).isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.SimpleTest </h4><pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeAndPropertyNames(){
  DocumentMK mk=createMK();
  String rev;
  String nodes;
  for (  String s : new String[]{"_","$","__","_id","$x",".",".\\","x\\","\\x","first.name"}) {
    String x2=Utils.escapePropertyName(s);
    String s2=Utils.unescapePropertyName(x2);
    if (!s.equals(s2)) {
      assertEquals(s,s2);
    }
    JsopBuilder jsop=new JsopBuilder();
    jsop.tag('+').key(s).object().key(s).value("x").endObject();
    rev=mk.commit("/",jsop.toString(),null,null);
    nodes=mk.getNodes("/" + s,rev,0,0,10,null);
    jsop=new JsopBuilder();
    jsop.object().key(s).value("x").key(":childNodeCount").value(0).endObject();
    String n=jsop.toString();
    assertEquals(n,nodes);
    nodes=mk.getNodes("/",rev,0,0,10,null);
    jsop=new JsopBuilder();
    jsop.object().key(s).object().endObject().key(":childNodeCount").value(1).endObject();
    n=jsop.toString();
    assertEquals(n,nodes);
    jsop=new JsopBuilder();
    jsop.tag('-').value(s);
    rev=mk.commit("/",jsop.toString(),rev,null);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void move(){
  DocumentMK mk=createMK();
  String rev=mk.commit("/","+\"test\":{\"x\":\"1\",\"child\": {}}",null,null);
  rev=mk.commit("/",">\"test\": \"/test2\"",rev,null);
  String test=mk.getNodes("/test2",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"x\":\"1\",\"child\":{},\":childNodeCount\":1}",test);
  test=mk.getNodes("/test",rev,0,0,Integer.MAX_VALUE,null);
  assertNull(test);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void escapeUnescape(){
  DocumentMK mk=createMK();
  String rev;
  String nodes;
  Random r=new Random(1);
  for (int i=0; i < 20; i++) {
    int len=1 + r.nextInt(5);
    StringBuilder buff=new StringBuilder();
    for (int j=0; j < len; j++) {
      buff.append((char)(32 + r.nextInt(128)));
    }
    String s=buff.toString();
    String x2=Utils.escapePropertyName(s);
    String s2=Utils.unescapePropertyName(x2);
    if (!s.equals(s2)) {
      assertEquals(s,s2);
    }
    if (s.indexOf('/') >= 0) {
      continue;
    }
    JsopBuilder jsop=new JsopBuilder();
    jsop.tag('+').key(s).object().key(s).value("x").endObject();
    rev=mk.commit("/",jsop.toString(),null,null);
    nodes=mk.getNodes("/" + s,rev,0,0,100,null);
    jsop=new JsopBuilder();
    jsop.object().key(s).value("x").key(":childNodeCount").value(0).endObject();
    String n=jsop.toString();
    assertEquals(n,nodes);
    nodes=mk.getNodes("/",rev,0,0,100,null);
    jsop=new JsopBuilder();
    jsop.object().key(s).object().endObject().key(":childNodeCount").value(1).endObject();
    n=jsop.toString();
    assertEquals(n,nodes);
    jsop=new JsopBuilder();
    jsop.tag('-').value(s);
    rev=mk.commit("/",jsop.toString(),rev,null);
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void delete(){
  DocumentMK mk=createMK();
  DocumentNodeStore ns=mk.getNodeStore();
  mk.commit("/","+\"testDel\":{\"name\": \"Hello\"}",null,null);
  mk.commit("/testDel","+\"a\":{\"name\": \"World\"}",null,null);
  mk.commit("/testDel","+\"b\":{\"name\": \"!\"}",null,null);
  String r1=mk.commit("/testDel","+\"c\":{\"name\": \"!\"}",null,null);
  DocumentNodeState n=ns.getNode("/testDel",RevisionVector.fromString(r1));
  assertNotNull(n);
  Children c=ns.getChildren(n,null,Integer.MAX_VALUE);
  assertEquals(3,c.children.size());
  String r2=mk.commit("/testDel","-\"c\"",null,null);
  n=ns.getNode("/testDel",RevisionVector.fromString(r2));
  assertNotNull(n);
  c=ns.getChildren(n,null,Integer.MAX_VALUE);
  assertEquals(2,c.children.size());
  String r3=mk.commit("/","-\"testDel\"",null,null);
  n=ns.getNode("/testDel",RevisionVector.fromString(r3));
  assertNull(n);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void diff(){
  DocumentMK mk=createMK();
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"t1\":{}",null,null);
  String rev2=mk.commit("/","+\"t2\":{}",null,null);
  String rev3=mk.commit("/","+\"t3\":{}",null,null);
  String rev4=mk.commit("/","^\"t3/x\":1",null,null);
  String r0=mk.getNodes("/",rev0,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\":childNodeCount\":0}",r0);
  String r1=mk.getNodes("/",rev1,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"t1\":{},\":childNodeCount\":1}",r1);
  String r2=mk.getNodes("/",rev2,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"t1\":{},\"t2\":{},\":childNodeCount\":2}",r2);
  String r3=mk.getNodes("/",rev3,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"t1\":{},\"t2\":{},\"t3\":{},\":childNodeCount\":3}",r3);
  String diff01=mk.diff(rev0,rev1,"/",0).trim();
  assertEquals("+\"/t1\":{}",diff01);
  String diff12=mk.diff(rev1,rev2,"/",0).trim();
  assertEquals("+\"/t2\":{}",diff12);
  String diff23=mk.diff(rev2,rev3,"/",0).trim();
  assertEquals("+\"/t3\":{}",diff23);
  String diff13=mk.diff(rev1,rev3,"/",0).trim();
  assertEquals("+\"/t2\":{}+\"/t3\":{}",diff13);
  String diff34=mk.diff(rev3,rev4,"/",0).trim();
  assertEquals("^\"/t3\":{}",diff34);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addAndMove(){
  DocumentMK mk=createMK();
  String head=mk.getHeadRevision();
  head=mk.commit("","+\"/root\":{}\n" + "+\"/root/a\":{}\n" + "+\"/root/a/b\":{}\n",head,"");
  head=mk.commit("",">\"/root/a\":\"/root/c\"\n",head,"");
  assertFalse(mk.nodeExists("/root/a",head));
  assertTrue(mk.nodeExists("/root/c/b",head));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void copy(){
  DocumentMK mk=createMK();
  String rev=mk.commit("/","+\"test\":{\"x\":\"1\",\"child\": {}}",null,null);
  rev=mk.commit("/","*\"test\": \"/test2\"",rev,null);
  String test=mk.getNodes("/test2",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"x\":\"1\",\"child\":{},\":childNodeCount\":1}",test);
  test=mk.getNodes("/test",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"x\":\"1\",\"child\":{},\":childNodeCount\":1}",test);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeIdentifier(){
  DocumentMK mk=createMK(true);
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"test\":{}",null,null);
  String rev2=mk.commit("/test","+\"a\":{}",null,null);
  String rev3=mk.commit("/test","+\"b\":{}",null,null);
  String rev4=mk.commit("/test","^\"a/x\":1",null,null);
  String r0=mk.getNodes("/",rev0,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r0-0-1\",\":childNodeCount\":0}",r0);
  String r1=mk.getNodes("/",rev1,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r1-0-1\",\"test\":{},\":childNodeCount\":1}",r1);
  String r2=mk.getNodes("/",rev2,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r2-0-1\",\"test\":{},\":childNodeCount\":1}",r2);
  String r3;
  r3=mk.getNodes("/",rev3,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r3-0-1\",\"test\":{},\":childNodeCount\":1}",r3);
  r3=mk.getNodes("/test",rev3,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/test@r3-0-1\",\"a\":{},\"b\":{},\":childNodeCount\":2}",r3);
  String r4;
  r4=mk.getNodes("/",rev4,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/@r4-0-1\",\"test\":{},\":childNodeCount\":1}",r4);
  r4=mk.getNodes("/test",rev4,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/test@r4-0-1\",\"a\":{},\"b\":{},\":childNodeCount\":2}",r4);
  r4=mk.getNodes("/test/a",rev4,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/test/a@r4-0-1\",\"x\":1,\":childNodeCount\":0}",r4);
  r4=mk.getNodes("/test/b",rev4,0,0,Integer.MAX_VALUE,":id");
  assertEquals("{\":id\":\"/test/b@r3-0-1\",\":childNodeCount\":0}",r4);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void escapePropertyName(){
  DocumentMK mk=createMK();
  String rev=mk.commit("/","+\"test1\":{\"name.first\": \"Hello\"} +\"test2\":{\"_id\": \"a\"} +\"test3\":{\"$x\": \"1\"}",null,null);
  String test1=mk.getNodes("/test1",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"name.first\":\"Hello\",\":childNodeCount\":0}",test1);
  String test2=mk.getNodes("/test2",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"_id\":\"a\",\":childNodeCount\":0}",test2);
  String test3=mk.getNodes("/test3",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"$x\":\"1\",\":childNodeCount\":0}",test3);
  mk.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commit(){
  DocumentMK mk=createMK();
  DocumentNodeStore ns=mk.getNodeStore();
  String rev=mk.commit("/","+\"test\":{\"name\": \"Hello\"}",null,null);
  String test=mk.getNodes("/test",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"name\":\"Hello\",\":childNodeCount\":0}",test);
  String r0=mk.commit("/test","+\"a\":{\"name\": \"World\"}",null,null);
  String r1=mk.commit("/test","+\"b\":{\"name\": \"!\"}",null,null);
  test=mk.getNodes("/test",r0,0,0,Integer.MAX_VALUE,null);
  DocumentNodeState n=ns.getNode("/",RevisionVector.fromString(r0));
  assertNotNull(n);
  Children c=ns.getChildren(n,null,Integer.MAX_VALUE);
  assertEquals("[test]",c.toString());
  n=ns.getNode("/test",RevisionVector.fromString(r1));
  assertNotNull(n);
  c=ns.getChildren(n,null,Integer.MAX_VALUE);
  assertEquals("[a, b]",c.toString());
  rev=mk.commit("","^\"/test\":1",null,null);
  test=mk.getNodes("/",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"test\":1,\"test\":{},\":childNodeCount\":1}",test);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commitRoot(){
  DocumentMK mk=createMK();
  DocumentStore store=mk.getDocumentStore();
  Revision head=Revision.fromString(mk.getHeadRevision());
  head=Revision.fromString(mk.commit("","+\"/test\":{\"foo\":{}}",head.toString(),null));
  NodeDocument rootDoc=store.find(Collection.NODES,"0:/");
  NodeDocument node=store.find(Collection.NODES,"1:/test");
  NodeDocument foo=store.find(Collection.NODES,"2:/test/foo");
  assertNotNull(foo);
  assertFalse(foo.containsRevision(head));
  assertEquals("/",foo.getCommitRootPath(head));
  head=Revision.fromString(mk.commit("","+\"/bar\":{}+\"/test/foo/bar\":{}",head.toString(),null));
  rootDoc=store.find(Collection.NODES,"0:/");
  assertNotNull(rootDoc);
  assertTrue(rootDoc.containsRevision(head));
  NodeDocument bar=store.find(Collection.NODES,"1:/bar");
  assertNotNull(bar);
  assertEquals("/",bar.getCommitRootPath(head));
  bar=store.find(Collection.NODES,"3:/test/foo/bar");
  assertNotNull(bar);
  assertEquals("/",bar.getCommitRootPath(head));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNodeGetNode(){
  DocumentMK mk=builderProvider.newBuilder().open();
  DocumentStore s=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  RevisionVector rev=RevisionVector.fromString(mk.getHeadRevision());
  DocumentNodeState n=new DocumentNodeState(ns,"/test",rev);
  n.setProperty("name","\"Hello\"");
  UpdateOp op=n.asOperation(rev.getRevision(ns.getClusterId()));
  NodeDocument.setRevision(op,rev.getRevision(ns.getClusterId()),"c");
  assertTrue(s.create(Collection.NODES,Lists.newArrayList(op)));
  DocumentNodeState n2=ns.getNode("/test",rev);
  assertNotNull(n2);
  PropertyState p=n2.getProperty("name");
  assertNotNull(p);
  assertEquals("Hello",p.getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void reAddDeleted2(){
  DocumentMK mk=createMK();
  String rev=mk.commit("/","+\"test\":{\"x\":\"1\",\"child\": {}}",null,null);
  rev=mk.commit("/","-\"test\"",rev,null);
  rev=mk.commit("/","+\"test\":{}  +\"test2\": {}",null,null);
  String test=mk.getNodes("/test",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\":childNodeCount\":0}",test);
  String test2=mk.getNodes("/test2",rev,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\":childNodeCount\":0}",test2);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void reAddDeleted(){
  DocumentMK mk=createMK();
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"test\":{\"name\": \"Hello\"} ^ \"x\": 1",null,null);
  String rev2=mk.commit("/","-\"test\" ^ \"x\": 2",null,null);
  String rev3=mk.commit("/","+\"test\":{\"name\": \"Hallo\"} ^ \"x\": 3",null,null);
  String test0=mk.getNodes("/test",rev0,0,0,Integer.MAX_VALUE,null);
  assertNull(null,test0);
  String test1=mk.getNodes("/test",rev1,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"name\":\"Hello\",\":childNodeCount\":0}",test1);
  String test2=mk.getNodes("/test",rev2,0,0,Integer.MAX_VALUE,null);
  assertNull(null,test2);
  String test3=mk.getNodes("/test",rev3,0,0,Integer.MAX_VALUE,null);
  assertEquals("{\"name\":\"Hallo\",\":childNodeCount\":0}",test3);
  mk.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.UnmergedBranchTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void purgeUnmergedBranch() throws Exception {
  DocumentStore testStore=new MemoryDocumentStore();
  DocumentMK mk1=create(testStore,1);
  int cId1=mk1.getNodeStore().getClusterId();
  DocumentMK mk2=create(testStore,2);
  int cId2=mk2.getNodeStore().getClusterId();
  String rev1=mk1.commit("","+\"/child1\":{}",null,"");
  String branchRev1=mk1.branch(rev1);
  String brev1=mk1.commit("/child1","^\"foo\":1",branchRev1,"");
  String rev2=mk2.commit("","+\"/child2\":{}",null,"");
  String branchRev2=mk2.branch(rev2);
  String brev2=mk2.commit("/child2","^\"foo\":1",branchRev2,"");
  Map<Revision,RevisionVector> revs1=getUncommittedRevisions(mk1);
  Map<Revision,RevisionVector> revs2=getUncommittedRevisions(mk2);
  assertTrue(revs1.containsKey(RevisionVector.fromString(brev1).asTrunkRevision().getRevision(cId1)));
  assertTrue(revs2.containsKey(RevisionVector.fromString(brev2).asTrunkRevision().getRevision(cId2)));
  mk1.dispose();
  mk1=create(testStore,1);
  revs1=getUncommittedRevisions(mk1);
  revs2=getUncommittedRevisions(mk2);
  assertFalse(revs1.containsKey(RevisionVector.fromString(brev1).asTrunkRevision().getRevision(cId1)));
  assertTrue(revs2.containsKey(RevisionVector.fromString(brev2).asTrunkRevision().getRevision(cId2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.UpdateOpTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void notEqualsTest(){
  Revision r=Revision.newRevision(1);
  UpdateOp op=new UpdateOp("id",true);
  try {
    op.notEquals("p",r,"v");
    fail("expected " + IllegalStateException.class.getName());
  }
 catch (  IllegalStateException e) {
  }
  op=new UpdateOp("id",false);
  op.notEquals("p",r,"v");
  assertEquals(1,op.getConditions().size());
  UpdateOp.Key key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  UpdateOp.Condition c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.Type.NOTEQUALS,c.type);
  assertEquals("v",c.value);
  op=new UpdateOp("id",false);
  op.notEquals("p",r,null);
  assertEquals(1,op.getConditions().size());
  key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.Type.NOTEQUALS,c.type);
  assertEquals(null,c.value);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void equalsTest(){
  Revision r=Revision.newRevision(1);
  UpdateOp op=new UpdateOp("id",true);
  try {
    op.equals("p",r,"v");
    fail("expected " + IllegalStateException.class.getName());
  }
 catch (  IllegalStateException e) {
  }
  op=new UpdateOp("id",false);
  op.equals("p",r,"v");
  assertEquals(1,op.getConditions().size());
  UpdateOp.Key key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  UpdateOp.Condition c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.Type.EQUALS,c.type);
  assertEquals("v",c.value);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void combine(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=new UpdateOp("id",false);
  Revision r=Revision.newRevision(1);
  op2.containsMapEntry("e",r,true);
  UpdateOp combined=UpdateOp.combine("id",newArrayList(op1,op2));
  assertTrue(combined.hasChanges());
  assertEquals(1,combined.getChanges().size());
  assertEquals(1,combined.getConditions().size());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void keyEquals(){
  Revision r1=Revision.newRevision(1);
  Revision r2=Revision.newRevision(1);
  UpdateOp.Key k1=new UpdateOp.Key("foo",null);
  UpdateOp.Key k2=new UpdateOp.Key("bar",null);
  assertFalse(k1.equals(k2));
  assertFalse(k2.equals(k1));
  UpdateOp.Key k3=new UpdateOp.Key("foo",null);
  assertTrue(k1.equals(k3));
  assertTrue(k3.equals(k1));
  UpdateOp.Key k4=new UpdateOp.Key("foo",r1);
  assertFalse(k4.equals(k3));
  assertFalse(k3.equals(k4));
  UpdateOp.Key k5=new UpdateOp.Key("foo",r2);
  assertFalse(k5.equals(k4));
  assertFalse(k4.equals(k5));
  UpdateOp.Key k6=new UpdateOp.Key("foo",r1);
  assertTrue(k6.equals(k4));
  assertTrue(k4.equals(k6));
  UpdateOp.Key k7=new UpdateOp.Key("bar",r1);
  assertFalse(k7.equals(k6));
  assertFalse(k6.equals(k7));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void containsMapEntry(){
  Revision r=Revision.newRevision(1);
  UpdateOp op=new UpdateOp("id",true);
  try {
    op.containsMapEntry("p",r,true);
    fail("expected " + IllegalStateException.class.getName());
  }
 catch (  IllegalStateException e) {
  }
  op=new UpdateOp("id",false);
  op.containsMapEntry("p",r,true);
  assertEquals(1,op.getConditions().size());
  UpdateOp.Key key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  UpdateOp.Condition c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.EXISTS,c);
  op=new UpdateOp("id",false);
  op.containsMapEntry("p",r,false);
  assertEquals(1,op.getConditions().size());
  key=op.getConditions().keySet().iterator().next();
  assertEquals(r,key.getRevision());
  assertEquals("p",key.getName());
  c=op.getConditions().get(key);
  assertEquals(UpdateOp.Condition.MISSING,c);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shallowCopy(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=op1.shallowCopy("id");
  assertTrue(op2.hasChanges());
  assertEquals(1,op2.getChanges().size());
  assertEquals(0,op2.getConditions().size());
  Revision r=Revision.newRevision(1);
  op1.containsMapEntry("e",r,true);
  op2=op1.shallowCopy("id");
  assertEquals(1,op2.getConditions().size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getChanges(){
  UpdateOp op=new UpdateOp("id",false);
  assertEquals(0,op.getChanges().size());
  assertTrue(!op.hasChanges());
  op.set("p","value");
  assertEquals(1,op.getChanges().size());
  assertTrue(op.hasChanges());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copy(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=op1.copy();
  assertTrue(op2.hasChanges());
  assertEquals(1,op2.getChanges().size());
  assertEquals(0,op2.getConditions().size());
  Revision r=Revision.newRevision(1);
  op1.containsMapEntry("e",r,true);
  op2=op1.copy();
  assertEquals(1,op2.getConditions().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.UpdateUtilsTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void checkConditions(){
  Revision r=Revision.newRevision(1);
  String id=Utils.getIdFromPath("/foo");
  Document d=new Document();
  d.put(Document.ID,id);
  UpdateOp op=newUpdateOp(id);
  op.set("p",42L);
  op.setMapEntry("t",r,"value");
  UpdateUtils.applyChanges(d,op);
  op=newUpdateOp(id);
  op.containsMapEntry("t",r,true);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.containsMapEntry("t",r,false);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.containsMapEntry("q",r,true);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.containsMapEntry("q",r,false);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("t",r,"value");
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("t",r,"value");
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("t",r,"foo");
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("t",r,"foo");
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("t",Revision.newRevision(1),"value");
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("t",Revision.newRevision(1),"value");
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("t","value");
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("t","value");
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("p",r,42L);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("p",r,42L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("p",42L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("p",42L);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("p",7L);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("p",7L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("other",7L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("other",r,7L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("other",r,null);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("other",r,null);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("p",null);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("other",r,null);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void applyChanges(){
  Revision r=Revision.newRevision(1);
  String id=Utils.getIdFromPath("/foo");
  Document d=new Document();
  d.put(Document.ID,id);
  UpdateOp op=newUpdateOp(id);
  op.set("p",42L);
  UpdateUtils.applyChanges(d,op);
  assertEquals(42L,d.get("p"));
  op=newUpdateOp(id);
  op.max("p",23L);
  UpdateUtils.applyChanges(d,op);
  assertEquals(42L,d.get("p"));
  op=newUpdateOp(id);
  op.max("p",58L);
  UpdateUtils.applyChanges(d,op);
  assertEquals(58L,d.get("p"));
  op=newUpdateOp(id);
  op.increment("p",3);
  UpdateUtils.applyChanges(d,op);
  assertEquals(61L,d.get("p"));
  op=newUpdateOp(id);
  op.setMapEntry("t",r,"value");
  UpdateUtils.applyChanges(d,op);
  assertEquals("value",getMapEntry(d,"t",r));
  op=newUpdateOp(id);
  op.removeMapEntry("t",r);
  UpdateUtils.applyChanges(d,op);
  assertNull(getMapEntry(d,"t",r));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ValueMapTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void previousDocs1(){
  String rootPath="/";
  String rootId=Utils.getIdFromPath(rootPath);
  Revision r0=new Revision(0,0,1);
  MemoryDocumentStore store=new MemoryDocumentStore();
  UpdateOp op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r0,0),true);
  op.set(ID,op.getId());
  op.setMapEntry("prop",r0,"0");
  NodeDocument.setRevision(op,r0,"c");
  store.createOrUpdate(NODES,op);
  Revision r1low=new Revision(1,0,1);
  Revision r1high=new Revision(1,10,1);
  op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r1high,0),true);
  op.set(ID,op.getId());
  for (int i=r1low.getCounter(); i <= r1high.getCounter(); i++) {
    Revision r=new Revision(1,i,1);
    op.setMapEntry("foo",r,String.valueOf(i));
    NodeDocument.setRevision(op,r,"c");
  }
  store.createOrUpdate(NODES,op);
  op=new UpdateOp(rootId,true);
  op.set(ID,op.getId());
  Revision r2=new Revision(2,0,1);
  op.setMapEntry("prop",r2,"1");
  NodeDocument.setRevision(op,r2,"c");
  NodeDocument.setPrevious(op,new Range(r0,r0,0));
  NodeDocument.setPrevious(op,new Range(r1high,r1low,0));
  store.createOrUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,rootId);
  assertNotNull(doc);
  Set<Revision> revs=doc.getValueMap("prop").keySet();
  assertEquals(2,revs.size());
  assertTrue(revs.contains(r0));
  assertTrue(revs.contains(r2));
  Iterator<Revision> it=revs.iterator();
  assertTrue(it.hasNext());
  assertEquals(r2,it.next());
  assertTrue(it.hasNext());
  assertEquals(r0,it.next());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void previousDocs2(){
  MemoryDocumentStore store=new MemoryDocumentStore();
  String rootPath="/";
  String rootId=Utils.getIdFromPath(rootPath);
  Revision r01=new Revision(0,0,1);
  Revision r12=new Revision(1,0,2);
  Revision r22=new Revision(2,0,2);
  Revision r31=new Revision(3,0,1);
  Revision r42=new Revision(4,0,2);
  Revision r51=new Revision(5,0,1);
  UpdateOp op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r31,0),true);
  op.set(ID,op.getId());
  op.setMapEntry("p0",r01,"0");
  NodeDocument.setRevision(op,r01,"c");
  op.setMapEntry("p1",r31,"1");
  NodeDocument.setRevision(op,r31,"c");
  store.createOrUpdate(NODES,op);
  op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r42,0),true);
  op.set(ID,op.getId());
  op.setMapEntry("p1",r12,"0");
  NodeDocument.setRevision(op,r12,"c");
  op.setMapEntry("p1",r22,"1");
  NodeDocument.setRevision(op,r22,"c");
  op.setMapEntry("p0",r42,"1");
  NodeDocument.setRevision(op,r42,"c");
  store.createOrUpdate(NODES,op);
  op=new UpdateOp(rootId,true);
  op.set(ID,op.getId());
  op.setMapEntry("p0",r51,"2");
  op.setMapEntry("p1",r51,"2");
  NodeDocument.setRevision(op,r51,"c");
  NodeDocument.setPrevious(op,new Range(r42,r12,0));
  NodeDocument.setPrevious(op,new Range(r31,r01,0));
  store.createOrUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,rootId);
  assertNotNull(doc);
  List<NodeDocument> prevDocs=Lists.newArrayList(doc.getPreviousDocs("p1",null));
  assertEquals(2,prevDocs.size());
  assertEquals(Utils.getPreviousIdFor(rootPath,r31,0),prevDocs.get(0).getId());
  assertEquals(Utils.getPreviousIdFor(rootPath,r42,0),prevDocs.get(1).getId());
  List<Revision> revs=new ArrayList<Revision>();
  for (  Revision r : doc.getValueMap("p1").keySet()) {
    revs.add(r);
  }
  assertEquals(Arrays.asList(r51,r31,r22,r12),revs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGCDeletionTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void gcWithPathsHavingNewLine() throws Exception {
  int noOfDocsToDelete=200;
  DocumentStore ts=new MemoryDocumentStore();
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(new MemoryDocumentStore()).setAsyncDelay(0).getNodeStore();
  clock.waitUntil(Revision.getCurrentTimestamp());
  NodeBuilder b1=store.getRoot().builder();
  NodeBuilder xb=b1.child("x");
  for (int i=0; i < noOfDocsToDelete - 1; i++) {
    xb.child("a" + i).child("b" + i);
  }
  xb.child("a-1").child("b\r");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  gc.setOverflowToDiskThreshold(100);
  VersionGCStats stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(noOfDocsToDelete * 2 + 1,stats.deletedDocGCCount);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void queryWhileDocsAreRemoved() throws Exception {
  clock.waitUntil(Revision.getCurrentTimestamp());
  final Thread currentThread=Thread.currentThread();
  final Semaphore queries=new Semaphore(0);
  final CountDownLatch ready=new CountDownLatch(1);
  MemoryDocumentStore ms=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      if (Thread.currentThread() != currentThread) {
        ready.countDown();
        queries.acquireUninterruptibly();
      }
      return super.find(collection,key);
    }
  }
;
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(ms).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder node=builder.child("node");
  for (int i=0; i < 200; i++) {
    node.child("c-" + i);
  }
  merge(store,builder);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(1));
  builder=store.getRoot().builder();
  node=builder.child("node");
  for (int i=0; i < 90; i++) {
    node.getChildNode("c-" + i).remove();
  }
  merge(store,builder);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(1));
  List<String> expected=Lists.newArrayList();
  NodeState n=store.getRoot().getChildNode("node");
  for (  ChildNodeEntry entry : n.getChildNodeEntries()) {
    expected.add(entry.getName());
  }
  assertEquals(110,expected.size());
  store.invalidateNodeChildrenCache();
  Future<List<String>> f=newSingleThreadExecutor().submit(new Callable<List<String>>(){
    @Override public List<String> call() throws Exception {
      List<String> names=Lists.newArrayList();
      NodeState n=store.getRoot().getChildNode("node");
      for (      ChildNodeEntry entry : n.getChildNodeEntries()) {
        names.add(entry.getName());
      }
      return names;
    }
  }
);
  ready.await();
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  VersionGCStats stats=gc.gc(30,MINUTES);
  assertEquals(90,stats.deletedDocGCCount);
  queries.release(200);
  List<String> names=f.get();
  assertEquals(expected,names);
}

</code></pre>

<br>
<pre class="type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteParentLast() throws Exception {
  TestDocumentStore ts=new TestDocumentStore();
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(ts).setAsyncDelay(0).getNodeStore();
  clock.waitUntil(Revision.getCurrentTimestamp());
  NodeBuilder b1=store.getRoot().builder();
  b1.child("x").child("y");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  try {
    ts.throwException=true;
    gc.gc(maxAge * 2,HOURS);
    fail("Exception should be thrown");
  }
 catch (  AssertionError ignore) {
  }
  ts.throwException=false;
  gc.gc(maxAge * 2,HOURS);
  assertNull(ts.find(Collection.NODES,"2:/x/y"));
  assertNull(ts.find(Collection.NODES,"1:/x"));
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteLargeNumber() throws Exception {
  int noOfDocsToDelete=10000;
  DocumentStore ts=new MemoryDocumentStore();
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(new MemoryDocumentStore()).setAsyncDelay(0).getNodeStore();
  clock.waitUntil(Revision.getCurrentTimestamp());
  NodeBuilder b1=store.getRoot().builder();
  NodeBuilder xb=b1.child("x");
  for (int i=0; i < noOfDocsToDelete; i++) {
    xb.child("a" + i).child("b" + i);
  }
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  gc.setOverflowToDiskThreshold(100);
  VersionGCStats stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(noOfDocsToDelete * 2 + 1,stats.deletedDocGCCount);
  assertNull(ts.find(Collection.NODES,"1:/x"));
  for (int i=0; i < noOfDocsToDelete; i++) {
    assertNull(ts.find(Collection.NODES,"2:/a" + i + "/b"+ i));
    assertNull(ts.find(Collection.NODES,"1:/a" + i));
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcForPreviousDocs() throws Exception {
  DocumentStore ts=new MemoryDocumentStore();
  store=new DocumentMK.Builder().clock(clock).setDocumentStore(ts).setAsyncDelay(0).getNodeStore();
  clock.waitUntil(Revision.getCurrentTimestamp());
  NodeBuilder b1;
  NodeBuilder xb;
  boolean create=true;
  for (int i=0; create || i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1=store.getRoot().builder();
    xb=b1.child("x").child("split");
    if (!create) {
      xb.remove();
    }
    store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    create=!create;
  }
  store.runBackgroundOperations();
  NodeDocument doc=ts.find(Collection.NODES,"2:/x/split");
  int splitDocCount=Iterators.size(doc.getAllPreviousDocs());
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  VersionGarbageCollector gc=store.getVersionGarbageCollector();
  VersionGCStats stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(2,stats.deletedDocGCCount);
  assertEquals(splitDocCount,stats.splitDocGCCount);
  assertNull(ts.find(Collection.NODES,"1:/x"));
  assertNull(ts.find(Collection.NODES,"2:/x/split"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGCWithSplitTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcWithConcurrentSplit() throws Exception {
  Revision.setClock(clock);
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").setProperty("prop",-1);
  merge(store,builder);
  final String id=Utils.getIdFromPath("/test");
  DocumentStore docStore=store.getDocumentStore();
  int count=0;
  while (docStore.find(NODES,id).getPreviousRanges().size() < PREV_SPLIT_FACTOR) {
    builder=store.getRoot().builder();
    builder.child("test").setProperty("prop",count);
    merge(store,builder);
    if (count++ % NUM_REVS_THRESHOLD == 0) {
      store.runBackgroundOperations();
    }
  }
  clock.waitUntil(Revision.getCurrentTimestamp() + HOURS.toMillis(1) + 2 * SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION));
  final AtomicReference<VersionGarbageCollector.VersionGCStats> stats=new AtomicReference<VersionGarbageCollector.VersionGCStats>();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        stats.set(gc.gc(1,HOURS));
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
);
  Semaphore gcLock=new Semaphore(0);
  updateLocks.put(t,gcLock);
  t.start();
  while (!gcLock.hasQueuedThreads()) {
    Thread.sleep(1);
  }
  while (docStore.find(NODES,id).getPreviousRanges().size() >= PREV_SPLIT_FACTOR) {
    builder=store.getRoot().builder();
    builder.child("test").setProperty("prop",count);
    merge(store,builder);
    if (count++ % NUM_REVS_THRESHOLD == 0) {
      store.runBackgroundOperations();
    }
  }
  gcLock.release();
  t.join();
  assertEquals(10,stats.get().splitDocGCCount);
  NodeDocument doc=docStore.find(NODES,id);
  assertEquals(1,doc.getStalePrev().size());
  store.addSplitCandidate(id);
  store.runBackgroundOperations();
  doc=docStore.find(NODES,id);
  assertTrue(doc.getStalePrev().isEmpty());
  Map<Revision,String> valueMap=doc.getValueMap("prop");
  assertEquals(NUM_REVS_THRESHOLD + 1,valueMap.size());
  assertEquals(NUM_REVS_THRESHOLD + 1,size(valueMap.entrySet()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGarbageCollectorIT </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGCDeletedDocument() throws Exception {
  NodeBuilder b1=store.getRoot().builder();
  b1.child("x").child("y");
  b1.child("z");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  clock.waitUntil(Revision.getCurrentTimestamp() + maxAge);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(0,stats.deletedDocGCCount);
  NodeBuilder b2=store.getRoot().builder();
  b2.child("x").child("y").remove();
  store.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + delta);
  stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(0,stats.deletedDocGCCount);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(1,stats.deletedDocGCCount);
  NodeBuilder b3=store.getRoot().builder();
  b3.child("z").remove();
  store.merge(b3,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeBuilder b4=store.getRoot().builder();
  b4.child("z");
  store.merge(b4,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge * 2) + delta);
  stats=gc.gc(maxAge * 2,HOURS);
  assertEquals(0,stats.deletedDocGCCount);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cacheConsistency() throws Exception {
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  Set<String> names=Sets.newHashSet();
  NodeBuilder b1=store.getRoot().builder();
  for (int i=0; i < 10; i++) {
    String name="test-" + i;
    b1.child(name);
    names.add(name);
  }
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (  ChildNodeEntry entry : store.getRoot().getChildNodeEntries()) {
    entry.getNodeState();
  }
  b1=store.getRoot().builder();
  b1.getChildNode("test-7").remove();
  names.remove("test-7");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge) + delta);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(1,stats.deletedDocGCCount);
  Set<String> children=Sets.newHashSet();
  for (  ChildNodeEntry entry : store.getRoot().getChildNodeEntries()) {
    children.add(entry.getName());
  }
  assertEquals(names,children);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcPrevWithMostRecentModification() throws Exception {
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  for (int i=0; i < NUM_REVS_THRESHOLD + 1; i++) {
    NodeBuilder builder=store.getRoot().builder();
    builder.child("foo").setProperty("prop","v" + i);
    builder.child("bar").setProperty("prop","v" + i);
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge) + delta);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(2,stats.splitDocGCCount);
  NodeDocument doc=getDoc("/foo");
  assertNotNull(doc);
  DocumentNodeState state=doc.getNodeAtRevision(store,store.getHeadRevision(),null);
  assertNotNull(state);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void gcIgnoredForCheckpoint() throws Exception {
  long expiryTime=100, maxAge=20;
  Revision cp=Revision.fromString(store.checkpoint(expiryTime));
  clock.waitUntil(cp.getTimestamp() + expiryTime - maxAge);
  VersionGCStats stats=gc.gc(maxAge,TimeUnit.MILLISECONDS);
  assertTrue(stats.ignoredGCDueToCheckPoint);
  clock.waitUntil(clock.getTime() + expiryTime + 1);
  stats=gc.gc(maxAge,TimeUnit.MILLISECONDS);
  assertFalse("GC should be performed",stats.ignoredGCDueToCheckPoint);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcWithConcurrentModification() throws Exception {
  Revision.setClock(clock);
  DocumentStore ds=store.getDocumentStore();
  createTestNode("foo");
  createTestNode("bar");
  NodeBuilder builder=store.getRoot().builder();
  builder.getChildNode("foo").remove();
  builder.getChildNode("bar").remove();
  merge(store,builder);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(1));
  final BlockingQueue<NodeDocument> docs=Queues.newSynchronousQueue();
  VersionGCSupport gcSupport=new VersionGCSupport(store.getDocumentStore()){
    @Override public Iterable<NodeDocument> getPossiblyDeletedDocs(    long lastModifiedTime){
      return filter(super.getPossiblyDeletedDocs(lastModifiedTime),new Predicate<NodeDocument>(){
        @Override public boolean apply(        NodeDocument input){
          try {
            docs.put(input);
          }
 catch (          InterruptedException e) {
            throw new RuntimeException(e);
          }
          return true;
        }
      }
);
    }
  }
;
  final VersionGarbageCollector gc=new VersionGarbageCollector(store,gcSupport);
  Future<VersionGCStats> f=execService.submit(new Callable<VersionGCStats>(){
    @Override public VersionGCStats call() throws Exception {
      return gc.gc(30,MINUTES);
    }
  }
);
  NodeDocument doc=docs.take();
  String name=PathUtils.getName(doc.getPath());
  name=name.equals("foo") ? "bar" : "foo";
  builder=store.getRoot().builder();
  builder.child(name);
  merge(store,builder);
  for (  ChildNodeEntry cne : store.getRoot().getChildNodeEntries()) {
    cne.getName();
  }
  DocumentNodeState state=(DocumentNodeState)store.getRoot().getChildNode(name);
  store.invalidateNodeCache(state.getPath(),state.getRevision());
  while (!f.isDone()) {
    docs.poll();
  }
  List<String> names=Lists.newArrayList();
  for (  ChildNodeEntry cne : store.getRoot().getChildNodeEntries()) {
    names.add(cne.getName());
  }
  assertEquals(1,names.size());
  doc=ds.find(NODES,Utils.getIdFromPath("/" + names.get(0)));
  assertNotNull(doc);
  assertEquals(0,Iterators.size(doc.getAllPreviousDocs()));
  VersionGCStats stats=f.get();
  assertEquals(1,stats.deletedDocGCCount);
  assertEquals(2,stats.splitDocGCCount);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcIntermediateDocs() throws Exception {
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b1=store.getRoot().builder();
  b1.child("test");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(getDoc("/test").getLocalRevisions().isEmpty());
  b1=store.getRoot().builder();
  b1.child("test").setProperty("test","value");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(!getDoc("/test").getLocalRevisions().isEmpty());
  for (int i=0; i < PREV_SPLIT_FACTOR; i++) {
    for (int j=0; j < NUM_REVS_THRESHOLD; j++) {
      b1=store.getRoot().builder();
      b1.child("test").setProperty("prop",i * NUM_REVS_THRESHOLD + j);
      store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    }
    store.runBackgroundOperations();
  }
  store.addSplitCandidate(Utils.getIdFromPath("/test"));
  store.runBackgroundOperations();
  Map<Revision,Range> prevRanges=getDoc("/test").getPreviousRanges();
  boolean hasIntermediateDoc=false;
  for (  Map.Entry<Revision,Range> entry : prevRanges.entrySet()) {
    if (entry.getValue().getHeight() > 0) {
      hasIntermediateDoc=true;
      break;
    }
  }
  assertTrue("Test data does not have intermediate previous docs",hasIntermediateDoc);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge) + delta);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(10,stats.splitDocGCCount);
  DocumentNodeState test=getDoc("/test").getNodeAtRevision(store,store.getHeadRevision(),null);
  assertNotNull(test);
  assertTrue(test.hasProperty("test"));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcDefaultLeafSplitDocs() throws Exception {
  Revision.setClock(clock);
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").setProperty("prop",-1);
  merge(store,builder);
  String id=Utils.getIdFromPath("/test");
  long start=Revision.getCurrentTimestamp();
  int hours=24;
  if (fixture instanceof DocumentStoreFixture.MongoFixture) {
    hours=6;
  }
  for (int i=0; i < 3600 * hours; i++) {
    clock.waitUntil(start + i * 1000);
    builder=store.getRoot().builder();
    builder.child("test").setProperty("prop",i);
    merge(store,builder);
    if (i % 10 == 0) {
      store.runBackgroundOperations();
    }
    if (i % 1800 == 0) {
      gc.gc(1,HOURS);
      NodeDocument doc=store.getDocumentStore().find(NODES,id);
      assertNotNull(doc);
      int numPrevDocs=Iterators.size(doc.getAllPreviousDocs());
      assertTrue("too many previous docs: " + numPrevDocs,numPrevDocs < 70);
    }
  }
  NodeDocument doc=store.getDocumentStore().find(NODES,id);
  assertNotNull(doc);
  int numRevs=size(doc.getValueMap("prop").entrySet());
  assertTrue("too many revisions: " + numRevs,numRevs < 6000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.RDBBlobStoreTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBigBlob() throws Exception {
  int min=0;
  int max=8 * 1024 * 1024;
  int test=0;
  while (max - min > 256) {
    if (test == 0) {
      test=max;
    }
 else {
      test=(max + min) / 2;
    }
    byte[] data=new byte[test];
    Random r=new Random(0);
    r.nextBytes(data);
    byte[] digest=getDigest(data);
    try {
      RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
      byte[] data2=RDBBlobStoreFriend.readBlockFromBackend(blobStore,digest);
      if (!Arrays.equals(data,data2)) {
        throw new Exception("data mismatch for length " + data.length);
      }
      min=test;
    }
 catch (    Exception ex) {
      max=test;
    }
  }
  LOG.info("max blob length for " + blobStoreName + " was "+ test);
  int expected=Math.max(blobStore.getBlockSize(),2 * 1024 * 1024);
  assertTrue(blobStoreName + ": expected supported block size is " + expected+ ", but measured: "+ test,test >= expected);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateAndDelete() throws Exception {
  byte[] data=new byte[256];
  Random r=new Random(0);
  r.nextBytes(data);
  byte[] digest=getDigest(data);
  RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
  String id=StringUtils.convertBytesToHex(digest);
  long until=System.currentTimeMillis() + 1000;
  while (System.currentTimeMillis() < until) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
    }
  }
  RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
  Assert.assertFalse(blobStore.deleteChunks(ImmutableList.of(id),System.currentTimeMillis() - 100));
  Assert.assertNotNull(RDBBlobStoreFriend.readBlockFromBackend(blobStore,digest));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.CacheInvalidationIT </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCacheInvalidationHierarchicalNotExist() throws CommitFailedException {
  NodeBuilder b2=getRoot(c2).builder();
  b2.child("x").child("other");
  b2.child("y");
  c2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  c2.runBackgroundOperations();
  c1.runBackgroundOperations();
  NodeState x=getRoot(c1).getChildNode("x");
  assertTrue(x.exists());
  assertFalse(x.getChildNode("futureX").exists());
  NodeState y=getRoot(c1).getChildNode("y");
  assertTrue(y.exists());
  b2.child("x").child("futureX").setProperty("z","1");
  c2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  b2.child("y").child("futureY").setProperty("z","2");
  c2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  c2.runBackgroundOperations();
  c1.runBackgroundOperations();
  assertTrue(getRoot(c1).getChildNode("y").getChildNode("futureY").exists());
  assertTrue(getRoot(c1).getChildNode("x").getChildNode("futureX").exists());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCacheInvalidation() throws CommitFailedException {
  final int totalPaths=createScenario();
  NodeBuilder b2=getRoot(c2).builder();
  builder(b2,"/a/d").setProperty("foo","bar");
  c2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  c2.runBackgroundOperations();
  c1.runBackgroundOperations();
  assertEquals(initialCacheSizeC1 + totalPaths - 2,size(ds(c1).getNodeDocumentCache().keys()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.CollisionMarkerTest </h4><pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void conditionalCollisionUpdate() throws Exception {
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("test");
  b1.child("node");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2=newDocumentMK(connectionFactory.getConnection().getDB(),3).getNodeStore();
  b1=ns1.getRoot().builder();
  b1.child("node").child("foo");
  b1.child("test").setProperty("p",1);
  merge(ns1,b1);
  Revision head=ns1.getHeadRevision().getRevision(ns1.getClusterId());
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").child("bar");
  b2.child("test").setProperty("p",2);
  try {
    merge(ns2,b2);
    fail("must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  String rootId=Utils.getIdFromPath("/");
  NodeDocument root=ns2.getDocumentStore().find(NODES,rootId);
  assertFalse("root document must not have a collision marker for a" + " committed revision",root.getValueMap(COLLISIONS).containsKey(head));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoDocumentStoreTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timeoutQuery(){
  String fromId=Utils.getKeyLowerLimit("/");
  String toId=Utils.getKeyUpperLimit("/");
  store.setMaxLockedQueryTimeMS(1);
  long index=0;
  for (int i=0; i < 100; i++) {
    StringBuilder sb=new StringBuilder();
    for (int j=0; j < 1000; j++) {
      sb.append("+\"node-").append(index++).append("\":{}");
    }
    mk.commit("/",sb.toString(),null,null);
    store.queriesWithoutLock.set(0);
    store.resetLockAcquisitionCount();
    List<NodeDocument> docs=store.query(Collection.NODES,fromId,toId,"foo",System.currentTimeMillis(),Integer.MAX_VALUE);
    assertTrue(docs.isEmpty());
    if (store.queriesWithoutLock.get() > 0) {
      assertEquals(1,store.getLockAcquisitionCount());
      return;
    }
  }
  fail("No query timeout triggered even after adding " + index + " nodes");
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void defaultIndexes(){
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),Document.ID));
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.SD_TYPE));
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.DELETED_ONCE));
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.HAS_BINARY_FLAG));
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.MODIFIED_IN_SECS,Document.ID));
  assertFalse(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.MODIFIED_IN_SECS));
  assertTrue(hasIndex(store.getDBCollection(Collection.JOURNAL),JournalEntry.MODIFIED));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoUtilsTest </h4><pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createIndex(){
  MongoConnection c=connectionFactory.getConnection();
  c.getDB().dropDatabase();
  DBCollection collection=c.getDB().getCollection("test");
  MongoUtils.createIndex(collection,"foo",true,false,true);
  MongoUtils.createIndex(collection,"bar",false,true,false);
  MongoUtils.createIndex(collection,new String[]{"baz","qux"},new boolean[]{true,false},false,false);
  assertTrue(MongoUtils.hasIndex(collection,"_id"));
  assertTrue(MongoUtils.hasIndex(collection,"foo"));
  assertFalse(MongoUtils.hasIndex(collection,"foo","bar"));
  assertTrue(MongoUtils.hasIndex(collection,"baz","qux"));
  assertEquals(4,collection.getIndexInfo().size());
  for (  DBObject info : collection.getIndexInfo()) {
    DBObject key=(DBObject)info.get("key");
    if (key.keySet().contains("foo")) {
      assertEquals(1,key.keySet().size());
      assertEquals(1,key.get("foo"));
      assertEquals(Boolean.TRUE,info.get("sparse"));
    }
 else     if (key.keySet().contains("bar")) {
      assertEquals(1,key.keySet().size());
      assertEquals(-1,key.get("bar"));
      assertEquals(Boolean.TRUE,info.get("unique"));
    }
 else     if (key.keySet().contains("baz")) {
      assertEquals(2,key.keySet().size());
      assertEquals(1,key.get("baz"));
      assertEquals(-1,key.get("qux"));
    }
  }
  c.getDB().dropDatabase();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.QueryHintTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHints() throws Exception {
  assertFalse(mongoDS.getDisableIndexHint());
  long delta=mongoDS.getMaxDeltaForModTimeIdxSecs();
  clock.waitUntil(TimeUnit.SECONDS.toMillis(delta + 10));
  assertFalse(mongoDS.canUseModifiedTimeIdx(1));
  assertTrue(mongoDS.canUseModifiedTimeIdx(10));
  mongoDS.query(Collection.NODES,Utils.getKeyLowerLimit("/"),Utils.getKeyUpperLimit("/"),NodeDocument.MODIFIED_IN_SECS,50,10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.ReadPreferenceIT </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMongoReadPreferencesWithAge() throws Exception {
  ReadPreference testPref=ReadPreference.secondary();
  mongoDS.getDBCollection(NODES).getDB().setReadPreference(testPref);
  NodeStore nodeStore=mk.getNodeStore();
  NodeBuilder b1=nodeStore.getRoot().builder();
  b1.child("x").child("y");
  nodeStore.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  String id=Utils.getIdFromPath("/x/y");
  String parentId=Utils.getParentId(id);
  mongoDS.invalidateCache(NODES,id);
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(NODES,parentId,DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH));
  clock.waitUntil(Revision.getCurrentTimestamp() + replicationLag);
  mongoDS.setClock(clock);
  assertEquals(testPref,mongoDS.getMongoReadPreference(NODES,parentId,DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMongoReadPreferencesDefault() throws Exception {
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PRIMARY));
  assertEquals(ReadPreference.primaryPreferred(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PREFER_PRIMARY));
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PREFER_SECONDARY));
  mongoDS.getDBCollection(NODES).getDB().setReadPreference(ReadPreference.secondary());
  assertEquals(ReadPreference.secondary(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PREFER_SECONDARY));
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(NODES,"foo",DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH));
  assertEquals(ReadPreference.primary(),mongoDS.getMongoReadPreference(SETTINGS,"foo",DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadWriteMode() throws Exception {
  assertEquals(ReadPreference.primary(),mongoDS.getConfiguredReadPreference(NODES));
  mongoDS.setReadWriteMode("readPreference=secondary&w=2&safe=true&j=true");
  assertEquals(ReadPreference.secondary(),mongoDS.getDBCollection(NODES).getReadPreference());
  assertEquals(2,mongoDS.getDBCollection(NODES).getWriteConcern().getW());
  assertTrue(mongoDS.getDBCollection(NODES).getWriteConcern().getJ());
  assertEquals(ReadPreference.secondary(),mongoDS.getConfiguredReadPreference(NODES));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPreferenceConversion() throws Exception {
  assertEquals(DocumentReadPreference.PRIMARY,mongoDS.getReadPreference(0));
  assertEquals(DocumentReadPreference.PRIMARY,mongoDS.getReadPreference((int)(replicationLag - 100)));
  assertEquals(DocumentReadPreference.PREFER_SECONDARY,mongoDS.getReadPreference(Integer.MAX_VALUE));
  assertEquals(DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH,mongoDS.getReadPreference(-1));
  assertEquals(DocumentReadPreference.PREFER_SECONDARY_IF_OLD_ENOUGH,mongoDS.getReadPreference((int)(replicationLag + 100)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.RetryReadIT </h4><pre class="type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void retry(){
  store.failRead=2;
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNull(doc);
  store.failRead=3;
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNull(doc);
  try {
    store.find(NODES,Utils.getIdFromPath("/bar"));
    fail("must fail with DocumentStoreException");
  }
 catch (  DocumentStoreException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.persistentCache.CacheTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void interrupt() throws Exception {
  FileUtils.deleteDirectory(new File("target/cacheTest"));
  PersistentCache cache=new PersistentCache("target/cacheTest,size=1,-compress");
  try {
    CacheMap<String,String> m1=cache.openMap(0,"m1",null);
    CacheMap<String,String> m2=cache.openMap(0,"test",null);
    assertEquals(1,cache.getOpenCount());
    String largeString=new String(new char[1024 * 1024]);
    int count=10;
    for (int i=0; i < count; i++) {
      m1.put("x" + i,largeString);
      m2.put("y" + i,largeString);
    }
    Thread.currentThread().interrupt();
    for (int i=0; i < count; i++) {
      m1.get("x" + i);
      m2.get("y" + i);
    }
    assertEquals(2,cache.getOpenCount());
    assertFalse(Thread.interrupted());
  }
  finally {
    cache.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void recoverIfCorrupt() throws Exception {
  FileUtils.deleteDirectory(new File("target/cacheTest"));
  new File("target/cacheTest").mkdirs();
  FileOutputStream out=new FileOutputStream("target/cacheTest/cache-0.data");
  out.write("corrupt".getBytes());
  out.close();
  PersistentCache pCache=new PersistentCache("target/cacheTest");
  CacheLIRS<PathRev,StringValue> cache=new CacheLIRS.Builder<PathRev,StringValue>().maximumSize(1).build();
  Cache<PathRev,StringValue> map=pCache.wrap(null,null,cache,CacheType.DIFF);
  String largeString=new String(new char[1024 * 1024]);
  for (int counter=0; counter < 10; counter++) {
    long end=System.currentTimeMillis() + 100;
    while (System.currentTimeMillis() < end) {
      Thread.yield();
    }
    for (int i=0; i < 100; i++) {
      PathRev k=new PathRev("/" + counter,new RevisionVector(new Revision(0,0,i)));
      map.getIfPresent(k);
      map.put(k,new StringValue(largeString));
    }
  }
  assertTrue("Exceptions: " + pCache.getExceptionCount(),pCache.getExceptionCount() < 100);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentSerializerTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidJsonSimple(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  assertNull(json.parse("null"));
  assertTrue((Boolean)json.parse("true"));
  assertFalse((Boolean)json.parse("false"));
  assertEquals(123.45,(Number)json.parse("123.45"));
  assertEquals("\r\n\t\u00e0",(String)json.parse("\"\r\n\t\u00e0\""));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidJsonMap(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  Map<String,Object> map=(Map<String,Object>)json.parse("{\"a\":true,\"b\":null,\"c\":123,\"d\":\"foobar\"}");
  assertEquals(4,map.size());
  assertTrue((Boolean)map.get("a"));
  assertTrue(map.containsKey("b"));
  assertNull(map.get("b"));
  assertEquals(123l,((Long)map.get("c")).longValue());
  assertEquals("foobar",(String)map.get("d"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleStringNonAscii(){
  RDBRow row=new RDBRow("_foo",true,false,1,2,3,"{\"x\":\"\u20ac\uD834\uDD1E\"}",null);
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("_foo",doc.getId());
  assertEquals("\u20ac\uD834\uDD1E",doc.get("x"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValidJsonArray(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  assertArrayEquals("",new Object[]{Boolean.TRUE},((List)json.parse("[true]")).toArray());
  assertArrayEquals("",new Object[]{Boolean.TRUE,null,123L,"foobar"},((List)json.parse("[true, null, 123, \"foobar\"]")).toArray());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleBlob() throws UnsupportedEncodingException {
  RDBRow row=new RDBRow("_foo",false,false,1,2,3,"\"blob\"","{}".getBytes("UTF-8"));
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("_foo",doc.getId());
  assertEquals(false,doc.hasBinary());
  assertEquals(2L,doc.getModCount().longValue());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBlobAndDiff() throws UnsupportedEncodingException {
  RDBRow row=new RDBRow("_foo",true,false,1,2,3,"\"blob\", [[\"=\", \"foo\", \"bar\"],[\"M\", \"m1\", 1],[\"M\", \"m2\", 3]]","{\"m1\":2, \"m2\":2}".getBytes("UTF-8"));
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("bar",doc.get("foo"));
  assertEquals(2L,doc.get("m1"));
  assertEquals(3L,doc.get("m2"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleString(){
  RDBRow row=new RDBRow("_foo",true,true,1,2,3,"{}",null);
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("_foo",doc.getId());
  assertEquals(true,doc.hasBinary());
  assertEquals(true,doc.get(NodeDocument.DELETED_ONCE));
  assertEquals(2L,doc.getModCount().longValue());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleBlob2() throws UnsupportedEncodingException {
  RDBRow row=new RDBRow("_foo",false,false,1,2,3,"\"blob\"","{\"s\":\"string\", \"b\":true, \"i\":1}".getBytes("UTF-8"));
  NodeDocument doc=this.ser.fromRow(Collection.NODES,row);
  assertEquals("_foo",doc.getId());
  assertEquals(false,doc.hasBinary());
  assertEquals(2L,doc.getModCount().longValue());
  assertEquals("string",doc.get("s"));
  assertEquals(Boolean.TRUE,doc.get("b"));
  assertEquals(1L,doc.get("i"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentStoreTest </h4><pre class="type-13 type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRDBQueryKeyPatterns(){
  if (ds instanceof RDBDocumentStore) {
    RDBDocumentStore rds=(RDBDocumentStore)ds;
    String base=this.getClass().getName() + ".testRDBQuery-";
    for (int i=0; i < 10; i++) {
      String id="1:" + (i % 2 == 1 ? "p" : "") + "/"+ base+ i;
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set("_test",base);
      boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
      assertTrue("document with " + id + " not created",success);
      removeMe.add(id);
    }
    System.out.println(removeMe);
    List<QueryCondition> conditions=new ArrayList<QueryCondition>();
    List<NodeDocument> result=rds.query(Collection.NODES,NodeDocument.MIN_ID_VALUE,NodeDocument.MAX_ID_VALUE,Arrays.asList("_:/%","__:/%","___:/%"),conditions,10000);
    for (    NodeDocument d : result) {
      if (base.equals(d.get("_test"))) {
        assertTrue(d.getId().startsWith("1:p"));
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRDBQueryConditions(){
  if (ds instanceof RDBDocumentStore) {
    RDBDocumentStore rds=(RDBDocumentStore)ds;
    long now=System.currentTimeMillis();
    String base=this.getClass().getName() + ".testRDBQuery-";
    for (int i=0; i < 10; i++) {
      String id=base + i;
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set(NodeDocument.DELETED_ONCE,i % 2 == 1);
      up.set(NodeDocument.MODIFIED_IN_SECS,now++);
      boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
      assertTrue("document with " + id + " not created",success);
      removeMe.add(id);
    }
    List<QueryCondition> conditions=new ArrayList<QueryCondition>();
    conditions.add(new QueryCondition(NodeDocument.DELETED_ONCE,"=",0));
    conditions.add(new QueryCondition(NodeDocument.MODIFIED_IN_SECS,"<",now - 2));
    List<NodeDocument> result=rds.query(Collection.NODES,base,base + "A",RDBDocumentStore.EMPTY_KEY_PATTERN,conditions,10);
    assertEquals(4,result.size());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.RevisionsKeyTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fromAsString(){
  RevisionsKey k1=new RevisionsKey(new RevisionVector(new Revision(1,0,1)),new RevisionVector(new Revision(2,1,2)));
  RevisionsKey k2=RevisionsKey.fromString(k1.asString());
  assertEquals(k1,k2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.UtilsTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getPreviousIdFor(){
  Revision r=new Revision(System.currentTimeMillis(),0,0);
  assertEquals("2:p/" + r.toString() + "/0",Utils.getPreviousIdFor("/",r,0));
  assertEquals("3:p/test/" + r.toString() + "/1",Utils.getPreviousIdFor("/test",r,1));
  assertEquals("15:p/a/b/c/d/e/f/g/h/i/j/k/l/m/" + r.toString() + "/3",Utils.getPreviousIdFor("/a/b/c/d/e/f/g/h/i/j/k/l/m",r,3));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getAllDocuments() throws CommitFailedException {
  DocumentNodeStore store=new DocumentMK.Builder().getNodeStore();
  try {
    NodeBuilder builder=store.getRoot().builder();
    for (int i=0; i < 1000; i++) {
      builder.child("test-" + i);
    }
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    assertEquals(1001,Iterables.size(Utils.getAllDocuments(store.getDocumentStore())));
  }
  finally {
    store.dispose();
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getMinTimestampForDiff(){
  RevisionVector from=new RevisionVector(new Revision(17,0,1));
  RevisionVector to=new RevisionVector(new Revision(19,0,1));
  assertEquals(17,Utils.getMinTimestampForDiff(from,to,new RevisionVector()));
  assertEquals(17,Utils.getMinTimestampForDiff(to,from,new RevisionVector()));
  RevisionVector minRevs=new RevisionVector(new Revision(7,0,1),new Revision(4,0,2));
  assertEquals(17,Utils.getMinTimestampForDiff(from,to,minRevs));
  assertEquals(17,Utils.getMinTimestampForDiff(to,from,minRevs));
  to=to.update(new Revision(15,0,2));
  assertEquals(4,Utils.getMinTimestampForDiff(from,to,minRevs));
  assertEquals(4,Utils.getMinTimestampForDiff(to,from,minRevs));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.identifier.IdentifierManagerTest </h4><pre class="type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getTreeTest(){
  assertEquals("/",identifierManager.getTree(ID_ROOT).getPath());
  assertEquals(PATH_X1,identifierManager.getTree(ID_X1).getPath());
  assertEquals(PATH_Y1,identifierManager.getTree(ID_Y1).getPath());
  assertEquals(PATH_Z1,identifierManager.getTree(ID_Z1).getPath());
  assertNull(identifierManager.getTree(ID_NON_EXISTING));
  try {
    identifierManager.getTree(ID_INVALID);
    fail("Expected IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPathTest(){
  assertEquals("/",identifierManager.getPath(ID_ROOT));
  assertEquals(PATH_X1,identifierManager.getPath(ID_X1));
  assertEquals(PATH_Y1,identifierManager.getPath(ID_Y1));
  assertEquals(PATH_Z1,identifierManager.getPath(ID_Z1));
  assertNull(identifierManager.getPath(ID_NON_EXISTING));
  try {
    identifierManager.getPath(ID_INVALID);
    fail("Expected IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getIdentifierTest(){
  Tree rootTree=root.getTree("/");
  assertEquals(ID_ROOT,getIdentifier(rootTree));
  Tree xx1=root.getTree(PATH_X1);
  assertEquals(ID_X1,getIdentifier(xx1));
  Tree yy1=root.getTree(PATH_Y1);
  assertEquals(ID_Y1,getIdentifier(yy1));
  Tree zz1=root.getTree(PATH_Z1);
  assertEquals(ID_Z1,getIdentifier(zz1));
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPathFromPropertyTest(){
  assertEquals("/y",identifierManager.getPath(createReferenceProperty(UUID_Y)));
  assertEquals(PATH_Z1,identifierManager.getPath(createReferenceProperty(UUID_Z1)));
  assertNull(identifierManager.getPath(createReferenceProperty(ID_NON_EXISTING)));
  assertNull(identifierManager.getPath(createReferenceProperty(ID_INVALID)));
  try {
    identifierManager.getPath(PropertyStates.createProperty("any","any"));
    fail("Expected IllegalArgumentException");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdateTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Async Index Test with 2 index defs at different tree locations
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testAsyncDoubleSubtree() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child("newchild").child("other").child(INDEX_DEFINITIONS_NAME),"subIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  builder.child("newchild").child("other").child("testChild").setProperty("foo","xyz");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  checkPathExists(root,"newchild","other",INDEX_DEFINITIONS_NAME,"subIndex",INDEX_CONTENT_NODE_NAME);
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
  PropertyIndexLookup lookupChild=new PropertyIndexLookup(root.getChildNode("newchild").getChildNode("other"));
  assertEquals(ImmutableSet.of("testChild"),find(lookupChild,"foo","xyz"));
  assertEquals(ImmutableSet.<String>of(),find(lookupChild,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAsyncExecutionStats() throws Exception {
  final Set<String> knownCheckpoints=Sets.newHashSet();
  MemoryNodeStore store=new MemoryNodeStore(){
    @Override public synchronized NodeState retrieve(    @Nonnull String checkpoint){
      if (!knownCheckpoints.isEmpty() && !knownCheckpoints.contains(checkpoint)) {
        return null;
      }
      return super.retrieve(checkpoint);
    }
  }
;
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  runOneCycle(async);
  assertEquals(1,lastExecutionStats(async.getIndexStats().getExecutionCount()));
  runOneCycle(async);
  assertEquals(1,lastExecutionStats(async.getIndexStats().getExecutionCount()));
  runOneCycle(async);
  assertEquals(1,lastExecutionStats(async.getIndexStats().getExecutionCount()));
  builder=store.getRoot().builder();
  builder.child("testRoot2").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  runOneCycle(async);
  assertEquals(1,lastExecutionStats(async.getIndexStats().getExecutionCount()));
  builder=store.getRoot().builder();
  builder.child("testRoot3").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  knownCheckpoints.addAll(store.listCheckpoints());
  runOneCycle(async);
  assertEquals(0,lastExecutionStats(async.getIndexStats().getExecutionCount()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Async Index Test with 2 index defs at the same location
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testAsyncDouble() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndexSecond",true,false,ImmutableSet.of("bar"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc").setProperty("bar","def");
  builder.child("testSecond").setProperty("bar","ghi");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndexSecond",INDEX_CONTENT_NODE_NAME);
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
  assertEquals(ImmutableSet.<String>of(),find(lookup,"foo","def"));
  assertEquals(ImmutableSet.<String>of(),find(lookup,"foo","ghi"));
  assertEquals(ImmutableSet.<String>of(),find(lookup,"bar","abc"));
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"bar","def"));
  assertEquals(ImmutableSet.of("testSecond"),find(lookup,"bar","ghi"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkpointStability() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  async.run();
  builder=store.getRoot().builder();
  builder.child("testRoot2").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  LogCustomizer customLogs=LogCustomizer.forLogger(AsyncIndexUpdate.class.getName()).filter(Level.WARN).create();
  builder=store.getRoot().builder();
  builder.child("testRoot3").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  customLogs.starting();
  async.run();
  assertEquals(Collections.emptyList(),customLogs.getLogs());
  customLogs.finished();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsyncPause() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.getIndexStats().pause();
  async.run();
  assertFalse(store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("rootIndex").hasChildNode(INDEX_CONTENT_NODE_NAME));
  async.getIndexStats().resume();
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  assertFalse(root.getChildNode(INDEX_DEFINITIONS_NAME).hasChildNode(":conflict"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWUnrelatedChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").child(":hidden");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertFalse("Store should keep only second checkpoint",secondCp.equals(firstCp));
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupNoRelease() throws Exception {
  final MemoryNodeStore mns=new MemoryNodeStore();
  final AtomicBoolean canRelease=new AtomicBoolean(false);
  ProxyNodeStore store=new ProxyNodeStore(){
    @Override protected NodeStore getNodeStore(){
      return mns;
    }
    @Override public boolean release(    String checkpoint){
      if (canRelease.get()) {
        return super.release(checkpoint);
      }
      return false;
    }
  }
;
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",mns.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",mns.listCheckpoints().size() == 1);
  assertTrue("Expecting one temp checkpoint",newHashSet(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")).size() == 1);
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting two checkpoints",mns.listCheckpoints().size() == 2);
  assertTrue("Expecting two temp checkpoints",newHashSet(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")).size() == 2);
  canRelease.set(true);
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","ghi");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",mns.listCheckpoints().size() == 1);
  String secondCp=mns.listCheckpoints().iterator().next();
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
  for (  String cp : store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")) {
    if (cp.equals(secondCp)) {
      continue;
    }
    assertNull("Temp checkpoint was already cleared from store",store.retrieve(cp));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWErrors() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  FaultyIndexEditorProvder provider=new FaultyIndexEditorProvder();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Error should have been triggered by the commit",provider.isFailed());
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexStats stats=async.getIndexStats();
  String since=stats.getFailingSince();
  assertTrue(stats.isFailing());
  assertEquals(1,stats.getConsecutiveFailedExecutions());
  assertEquals(since,stats.getLatestErrorTime());
  TimeUnit.MILLISECONDS.sleep(100);
  async.run();
  assertTrue(stats.isFailing());
  assertEquals(2,stats.getConsecutiveFailedExecutions());
  assertEquals(since,stats.getFailingSince());
  assertNotEquals(since,stats.getLatestErrorTime());
  stats.fixed();
  assertFalse(stats.isFailing());
  assertEquals(0,stats.getConsecutiveFailedExecutions());
  assertEquals("",stats.getFailingSince());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void closeWithSoftLimit() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final Semaphore asyncLock=new Semaphore(1);
  final AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider){
    @Override protected AsyncUpdateCallback newAsyncUpdateCallback(    NodeStore store,    String name,    long leaseTimeOut,    String beforeCheckpoint,    String afterCheckpoint,    AsyncIndexStats indexStats,    AtomicBoolean stopFlag){
      try {
        asyncLock.acquire();
      }
 catch (      InterruptedException ignore) {
      }
      return super.newAsyncUpdateCallback(store,name,leaseTimeOut,beforeCheckpoint,afterCheckpoint,indexStats,stopFlag);
    }
  }
;
  async.setCloseTimeOut(1000);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      async.run();
    }
  }
);
  Thread closer=new Thread(new Runnable(){
    @Override public void run(){
      async.close();
    }
  }
);
  asyncLock.acquire();
  t.start();
  while (!asyncLock.hasQueuedThreads())   ;
  LogCustomizer lc=createLogCustomizer(Level.DEBUG);
  closer.start();
  while (!async.isClosing())   ;
  assertFalse(async.isClosed());
  assertLogPhrase(lc.getLogs(),"[WAITING]");
  asyncLock.release();
  t.join();
  closer.join();
  assertLogPhrase(lc.getLogs(),"[CLOSED OK]");
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Async Index Test
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testAsync() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  assertFalse(root.getChildNode(INDEX_DEFINITIONS_NAME).hasChildNode(":conflict"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noRunWhenClosed() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  async.close();
  LogCustomizer lc=createLogCustomizer(Level.WARN);
  async.run();
  assertEquals(1,lc.getLogs().size());
  assertThat(lc.getLogs().get(0),containsString("Could not acquire run permit"));
  lc.finished();
  async.close();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void branchBaseOnCheckpoint() throws Exception {
  final Semaphore retrieve=new Semaphore(1);
  final Semaphore checkpoint=new Semaphore(0);
  NodeStore store=new MemoryNodeStore(){
    @CheckForNull @Override public NodeState retrieve(    @Nonnull String checkpoint){
      retrieve.acquireUninterruptibly();
      try {
        return super.retrieve(checkpoint);
      }
  finally {
        retrieve.release();
      }
    }
    @Nonnull @Override public String checkpoint(    long lifetime,    @Nonnull Map<String,String> properties){
      try {
        return super.checkpoint(lifetime,properties);
      }
  finally {
        checkpoint.release();
      }
    }
  }
;
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",false,ImmutableSet.of("foo"),null,TYPE,Collections.singletonMap(ASYNC_PROPERTY_NAME,"async"));
  builder.child("test").setProperty("foo","a");
  builder.child("child");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  builder=store.getRoot().builder();
  builder.child("test").setProperty("foo","b");
  builder.child("child").setProperty("prop","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      async.run();
    }
  }
);
  checkpoint.acquireUninterruptibly(checkpoint.availablePermits());
  retrieve.acquireUninterruptibly();
  t.start();
  retrieve.release();
  checkpoint.acquireUninterruptibly();
  builder=store.getRoot().builder();
  builder.child("child").remove();
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  retrieve.release();
  t.join();
  assertFalse(store.getRoot().hasChildNode("child"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void closeWithHardLimit() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final Semaphore asyncLock=new Semaphore(1);
  final AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider){
    @Override protected AsyncUpdateCallback newAsyncUpdateCallback(    NodeStore store,    String name,    long leaseTimeOut,    String beforeCheckpoint,    String afterCheckpoint,    AsyncIndexStats indexStats,    AtomicBoolean stopFlag){
      try {
        asyncLock.acquire();
      }
 catch (      InterruptedException ignore) {
      }
      return super.newAsyncUpdateCallback(store,name,leaseTimeOut,beforeCheckpoint,afterCheckpoint,indexStats,stopFlag);
    }
  }
;
  async.setCloseTimeOut(1);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      async.run();
    }
  }
);
  Thread closer=new Thread(new Runnable(){
    @Override public void run(){
      async.close();
    }
  }
);
  asyncLock.acquire();
  t.start();
  while (!asyncLock.hasQueuedThreads())   ;
  LogCustomizer lc=createLogCustomizer(Level.DEBUG);
  closer.start();
  while (!async.isClosed())   ;
  assertLogPhrase(lc.getLogs(),"[SOFT LIMIT HIT]");
  asyncLock.release();
  t.join();
  assertNotNull(async.getIndexStats().getLatestError());
  closer.join();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2203 Test reindex behavior on an async index when the index provider is missing
 * for a given type
 */
@Test public void testReindexMissingProvider() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"asyncMissing");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("asyncMissing",store,provider);
  async.run();
  assertFalse(async.isFailing());
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  assertEquals(firstCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("asyncMissing"));
  provider=CompositeIndexEditorProvider.compose(new ArrayList<IndexEditorProvider>());
  async=new AsyncIndexUpdate("asyncMissing",store,provider);
  async.run();
  assertTrue(async.isFailing());
  PropertyState reindex=store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("rootIndex").getProperty(REINDEX_PROPERTY_NAME);
  assertTrue(reindex == null || !reindex.getValue(Type.BOOLEAN));
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertTrue("Store should not create a new checkpoint",secondCp.equals(firstCp));
  assertEquals(firstCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("asyncMissing"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertFalse("Store should keep only second checkpoint",secondCp.equals(firstCp));
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupNoChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  async.run();
  assertTrue(async.isFinished());
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting the initial checkpoint",checkpoints.size() == 1);
  assertEquals(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"),checkpoints.iterator().next());
  async.run();
  assertEquals("Expecting no checkpoint changes",checkpoints,store.listCheckpoints());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void taskSplitNoMatch() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored",true,false,ImmutableSet.of("baz"),null).setProperty(ASYNC_PROPERTY_NAME,"async-ignored");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  IndexTaskSpliter splitter=async.getTaskSplitter();
  splitter.registerSplit(newHashSet("/oak:index/ignored"),"async-slow");
  async.run();
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting a single checkpoint",checkpoints.size() == 1);
  String secondCp=checkpoints.iterator().next();
  NodeState asyncNode=store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC);
  assertEquals(secondCp,asyncNode.getString("async"));
  assertNull(firstCp,asyncNode.getString("async-slow"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void taskSplit() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"changedIndex",true,false,ImmutableSet.of("bar"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored1",true,false,ImmutableSet.of("baz"),null).setProperty(ASYNC_PROPERTY_NAME,"async-ignored");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored2",true,false,ImmutableSet.of("etc"),null);
  builder.child("testRoot").setProperty("foo","abc");
  builder.child("testRoot").setProperty("bar","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  builder.child("testRoot").setProperty("bar","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  IndexTaskSpliter splitter=async.getTaskSplitter();
  splitter.registerSplit(newHashSet("/oak:index/changedIndex"),"async-slow");
  async.run();
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting two checkpoints",checkpoints.size() == 2);
  assertTrue(checkpoints.remove(firstCp));
  String secondCp=checkpoints.iterator().next();
  NodeState asyncNode=store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC);
  assertEquals(firstCp,asyncNode.getString("async-slow"));
  assertEquals(secondCp,asyncNode.getString("async"));
  assertFalse(newHashSet(asyncNode.getStrings("async-temp")).contains(firstCp));
  NodeState indexNode=store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME);
  assertEquals("async",indexNode.getChildNode("rootIndex").getString("async"));
  assertEquals("async-ignored",indexNode.getChildNode("ignored1").getString("async"));
  assertNull(indexNode.getChildNode("ignored2").getString("async"));
  assertEquals("async-slow",indexNode.getChildNode("changedIndex").getString("async"));
  assertEquals(false,indexNode.getChildNode("changedIndex").getBoolean("reindex"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(store.getRoot());
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"bar","abc"));
  assertEquals(ImmutableSet.of(),find(lookup,"bar","def"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.IndexUpdateTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Simple Test
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void test() throws Exception {
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null);
  createIndexDefinition(builder.child("newchild").child("other").child(INDEX_DEFINITIONS_NAME),"subIndex",true,false,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.child("testRoot").setProperty("foo","abc");
  builder.child("newchild").child("other").child("testChild").setProperty("foo","xyz");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  checkPathExists(indexed,"newchild","other",INDEX_DEFINITIONS_NAME,"subIndex",INDEX_CONTENT_NODE_NAME);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
  PropertyIndexLookup lookupChild=new PropertyIndexLookup(indexed.getChildNode("newchild").getChildNode("other"));
  assertEquals(ImmutableSet.of("testChild"),find(lookupChild,"foo","xyz"));
  assertEquals(ImmutableSet.of(),find(lookupChild,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2203 Test reindex behavior on a sync index when the index provider is missing
 * for a given type
 */
@Test public void testReindexSyncMissingProvider() throws Exception {
  EditorHook hook=new EditorHook(new IndexUpdateProvider(emptyProvider()));
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null);
  builder.child(INDEX_DEFINITIONS_NAME).child("azerty");
  builder.child("testRoot").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  NodeState rootIndex=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  PropertyState ps=rootIndex.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertTrue(ps.getValue(Type.BOOLEAN));
  NodeState azerty=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"azerty");
  assertNull("Node should be ignored by reindexer",azerty.getProperty(REINDEX_PROPERTY_NAME));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReindexCount() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  long t1=getReindexCount(indexed);
  NodeBuilder b2=indexed.builder();
  b2.child(INDEX_DEFINITIONS_NAME).child("rootIndex").setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  indexed=HOOK.processCommit(indexed,b2.getNodeState(),CommitInfo.EMPTY);
  long t2=getReindexCount(indexed);
  assertTrue(t2 > t1);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Async Reindex Test (OAK-2174)
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition with the reindex flag and the reindex-async flag set</li>
 * <li>Run the background async job manually</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindexAsync() throws Exception {
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  EditorHook hook=new EditorHook(new IndexUpdateProvider(provider));
  NodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(REINDEX_ASYNC_PROPERTY_NAME,true);
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,hook,CommitInfo.EMPTY);
  NodeState ns1=checkPathExists(store.getRoot(),INDEX_DEFINITIONS_NAME,"rootIndex");
  assertTrue(ns1.getProperty(REINDEX_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertTrue(ns1.getProperty(REINDEX_ASYNC_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertEquals(ASYNC_REINDEX_VALUE,ns1.getString(ASYNC_PROPERTY_NAME));
  AsyncIndexUpdate async=new AsyncIndexUpdate(ASYNC_REINDEX_VALUE,store,provider,true);
  int max=5;
  boolean done=false;
  int count=0;
  while (!done || count >= max) {
    async.run();
    done=async.isFinished();
    count++;
  }
  NodeState ns=checkPathExists(store.getRoot(),INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  assertFalse(ns.getProperty(REINDEX_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertNull(ns.getProperty(ASYNC_PROPERTY_NAME));
  PropertyIndexLookup lookup=new PropertyIndexLookup(store.getRoot());
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Reindex Test
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition with the reindex flag set</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindex() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReindexHidden() throws Exception {
  NodeState before=EmptyNodeState.EMPTY_NODE;
  NodeBuilder builder=before.builder();
  builder.child(":testRoot").setProperty("foo","abc");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  NodeState index=checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  assertFalse(index.getChildNodeCount(1) > 0);
  before=indexed;
  builder=before.builder();
  builder.child(INDEX_DEFINITIONS_NAME).child("rootIndex").setProperty("reindex",true);
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  index=checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  assertFalse(index.getChildNodeCount(1) > 0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void reindexAndIndexDefnChildRemoval_OAK_2117() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  NodeBuilder nb=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  nb.child("prop1").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,"prop1");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Auto Reindex Test
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition without a reindex flag (see OAK-1874)</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindexAuto() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Reindex Test
 * <ul>
 * <li>Add some content & an index definition</li>
 * <li>Update the index def by setting the reindex flag to true</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindex2() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).removeProperty("reindex");
  NodeState before=builder.getNodeState();
  builder.child(INDEX_DEFINITIONS_NAME).child("rootIndex").setProperty(REINDEX_PROPERTY_NAME,true);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.PathFilterTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void exclude() throws Exception {
  PathFilter p=new PathFilter(of("/"),of("/etc"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/a"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void config() throws Exception {
  NodeBuilder root=EMPTY_NODE.builder();
  root.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/etc"),Type.STRINGS));
  root.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/etc/workflow"),Type.STRINGS));
  PathFilter p=PathFilter.from(root);
  assertEquals(PathFilter.Result.TRAVERSE,p.filter("/"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc/a"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow/1"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyConfig() throws Exception {
  NodeBuilder root=EMPTY_NODE.builder();
  PathFilter p=PathFilter.from(root);
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void include() throws Exception {
  PathFilter p=new PathFilter(of("/content","/etc"),of("/etc/workflow/instance"));
  assertEquals(PathFilter.Result.TRAVERSE,p.filter("/"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/var"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/content"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/content/example"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc/workflow"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow/instance"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow/instance/1"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/x"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/e"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etcx"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void configOnlyExclude() throws Exception {
  NodeBuilder root=EMPTY_NODE.builder();
  root.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/etc/workflow"),Type.STRINGS));
  PathFilter p=PathFilter.from(root);
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc"));
  assertEquals(PathFilter.Result.INCLUDE,p.filter("/etc/a"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow"));
  assertEquals(PathFilter.Result.EXCLUDE,p.filter("/etc/workflow/1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.aggregate.SimpleNodeAggregatorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStarNameMoreLevels(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList("*","*/*","*/*/*","*/*/*/*"));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/file"),actual);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNodeName(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList(JCR_CONTENT));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/file"),actual);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testStarNameWrongParentType(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE + "_");
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList(INCLUDE_ALL));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertTrue(actual.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStarName(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList(INCLUDE_ALL));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/file"),actual);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNodeNameWrongParentType(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE + "_");
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList(JCR_CONTENT));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertTrue(actual.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCascadingNodeName(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder folder=builder.child("folder");
  folder.setProperty(JCR_PRIMARYTYPE,NT_FOLDER);
  NodeBuilder file=folder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FOLDER,newArrayList("file")).newRuleWithName(NT_FILE,newArrayList(JCR_CONTENT));
  String path="/folder/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/folder/file","/folder"),actual);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCascadingStarName(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder folder=builder.child("folder");
  folder.setProperty(JCR_PRIMARYTYPE,NT_FOLDER);
  NodeBuilder file=folder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE);
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FOLDER,newArrayList("file")).newRuleWithName(NT_FILE,newArrayList(INCLUDE_ALL));
  String path="/folder/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertEquals(newArrayList("/folder/file","/folder"),actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.diffindex.DiffCollectorTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUUID() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("a").setProperty("jcr:uuid","abc");
  builder.child("b").setProperty("jcr:uuid","xyz");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(root,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("abc"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("a",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeepChange() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  NodeBuilder b1=builder.child("rep:security").child("rep:authorizables");
  b1.child("rep:groups").child("t").child("te").child("testGroup_1c22a39f");
  NodeBuilder b2=b1.child("rep:users");
  b2.child("t").child("te").child("testUser_008e00d9");
  NodeBuilder b3=b2.child("a");
  b3.child("an").child("anonymous");
  b3.child("ad").child("admin");
  NodeState before=builder.getNodeState();
  builder=before.builder();
  NodeBuilder a1=builder.child("rep:security").child("rep:authorizables").child("rep:groups").child("t").child("te");
  a1.child("testGroup_1c22a39f").setProperty("jcr:uuid","c6195630-e956-3d4b-8912-479c303bf15a");
  a1.child("testPrincipal_4e6b704e").setProperty("jcr:uuid","ee59b554-76b7-3e27-9fc6-15bda1388894");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(before,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("ee59b554-76b7-3e27-9fc6-15bda1388894"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("rep:security/rep:authorizables/rep:groups/t/te/testPrincipal_4e6b704e",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUUIDInner() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("a").setProperty("jcr:uuid","abc");
  NodeState before=builder.getNodeState();
  builder=before.builder();
  builder.child("a").child("b").setProperty("jcr:uuid","xyz");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(before,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("xyz"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("a/b",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.AggregateTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleAggregateConfig() throws Exception {
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate agg=defn.getAggregate("nt:folder");
  assertNotNull(agg);
  assertEquals(1,agg.getIncludes().size());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void includeMatches() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni(null,"*",true),ni(null,"*/*",true)));
  assertTrue(ag.hasRelativeNodeInclude("foo"));
  assertTrue(ag.hasRelativeNodeInclude("foo/bar"));
  assertFalse(ag.hasRelativeNodeInclude("foo/bar/baz"));
  Aggregate ag2=new Aggregate("nt:base",of(ni(null,"foo",true),ni(null,"foo/*",true)));
  assertTrue(ag2.hasRelativeNodeInclude("foo"));
  assertFalse(ag2.hasRelativeNodeInclude("bar"));
  assertTrue(ag2.hasRelativeNodeInclude("foo/bar"));
  assertFalse(ag2.hasRelativeNodeInclude("foo/bar/baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void aggregateConfig2() throws Exception {
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.setProperty(LuceneIndexConstants.AGG_RECURSIVE_LIMIT,42);
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PRIMARY_TYPE,"nt:file");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_RELATIVE_NODE,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate agg=defn.getAggregate("nt:folder");
  assertNotNull(agg);
  assertEquals(42,agg.reAggregationLimit);
  assertEquals(1,agg.getIncludes().size());
  assertEquals("nt:file",((NodeInclude)agg.getIncludes().get(0)).primaryType);
  assertTrue(((NodeInclude)agg.getIncludes().get(0)).relativeNode);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.ExtractedTextCacheTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void cacheEnabledErrorInTextExtraction() throws Exception {
  ExtractedTextCache cache=new ExtractedTextCache(10 * FileUtils.ONE_MB,100);
  Blob b=new IdBlob("hello","a");
  String text=cache.get("/a","foo",b,false);
  assertNull(text);
  cache.put(b,new ExtractedText(ExtractedText.ExtractionResult.ERROR,"test hello"));
  text=cache.get("/a","foo",b,false);
  assertNull(text);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cacheEnabled() throws Exception {
  ExtractedTextCache cache=new ExtractedTextCache(10 * FileUtils.ONE_MB,100);
  assertNotNull(cache.getCacheStats());
  Blob b=new IdBlob("hello","a");
  String text=cache.get("/a","foo",b,false);
  assertNull(text);
  cache.put(b,new ExtractedText(ExtractedText.ExtractionResult.SUCCESS,"test hello"));
  text=cache.get("/a","foo",b,false);
  assertEquals("test hello",text);
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void cacheEnabledNonIdBlob() throws Exception {
  ExtractedTextCache cache=new ExtractedTextCache(10 * FileUtils.ONE_MB,100);
  Blob b=new ArrayBasedBlob("hello".getBytes());
  String text=cache.get("/a","foo",b,false);
  assertNull(text);
  cache.put(b,new ExtractedText(ExtractedText.ExtractionResult.SUCCESS,"test hello"));
  text=cache.get("/a","foo",b,false);
  assertNull(text);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexCopierTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTestWithFS() throws Exception {
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new IndexCopier(sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  assertEquals(2,wrapped.listAll().length);
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
  File indexBaseDir=c1.getIndexDir("/foo");
  File indexDir=new File(indexBaseDir,"0");
  assertTrue(new File(indexDir,"t1").exists());
  TabularData td=c1.getIndexPathMapping();
  assertEquals(1,td.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void cowCopyDoneOnClose() throws Exception {
  final CollectingExecutor executor=new CollectingExecutor();
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,executor,getWorkDir());
  Directory remote=new CloseSafeDir();
  final Directory local=copier.wrapForWrite(defn,remote,false);
  byte[] t1=writeFile(local,"t1");
  assertTrue(local.fileExists("t1"));
  assertFalse("t1 should NOT be copied to remote",remote.fileExists("t1"));
  executor.executeAll();
  assertTrue("t1 should now be copied to remote",remote.fileExists("t1"));
  byte[] t2=writeFile(local,"t2");
  assertFalse("t2 should NOT be copied to remote",remote.fileExists("t2"));
  final ExecutorService executorService=Executors.newFixedThreadPool(4);
  final CountDownLatch copyLatch=new CountDownLatch(1);
  Future<?> copyTasks=executorService.submit(new Callable(){
    @Override public Object call() throws Exception {
      copyLatch.await();
      executor.setForwardingExecutor(executorService);
      executor.executeAll();
      return null;
    }
  }
);
  final CountDownLatch closeLatch=new CountDownLatch(1);
  Future<?> closeTasks=executorService.submit(new Callable(){
    @Override public Object call() throws Exception {
      closeLatch.await();
      local.close();
      return null;
    }
  }
);
  closeLatch.countDown();
  assertFalse("t2 should NOT be copied to remote",remote.fileExists("t2"));
  copyLatch.countDown();
  closeTasks.get();
  assertTrue("t2 should now be copied to remote",remote.fileExists("t2"));
  executorService.shutdown();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test the interaction between COR and COW using same underlying directory
 */
@Test public void cowConcurrentAccess() throws Exception {
  CollectingExecutor executor=new CollectingExecutor();
  ExecutorService executorService=Executors.newFixedThreadPool(2);
  executor.setForwardingExecutor(executorService);
  Directory baseDir=new CloseSafeDir();
  String indexPath="/foo";
  builder.setProperty(LuceneIndexConstants.INDEX_PATH,indexPath);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,executor,getWorkDir(),true);
  Directory remote=new CloseSafeDir();
  byte[] f1=writeFile(remote,"f1");
  Directory cor1=copier.wrapForRead(indexPath,defn,remote);
  readAndAssert(cor1,"f1",f1);
  cor1.close();
  final CountDownLatch pauseCopyLatch=new CountDownLatch(1);
  Directory remote2=new FilterDirectory(remote){
    @Override public IndexOutput createOutput(    String name,    IOContext context) throws IOException {
      try {
        pauseCopyLatch.await();
      }
 catch (      InterruptedException ignore) {
      }
      return super.createOutput(name,context);
    }
  }
;
  Directory cow1=copier.wrapForWrite(defn,remote2,false);
  byte[] f2=writeFile(cow1,"f2");
  remote.deleteFile("f1");
  Directory cor2=copier.wrapForRead(indexPath,defn,remote);
  executor.enableImmediateExecution();
  cor2.close();
  executor.enableDelayedExecution();
  assertFalse(baseDir.fileExists("f1"));
  assertFalse("f2 should not have been copied to remote so far",remote.fileExists("f2"));
  assertTrue("f2 should exist",baseDir.fileExists("f2"));
  pauseCopyLatch.countDown();
  cow1.close();
  assertTrue("f2 should exist",remote.fileExists("f2"));
  executorService.shutdown();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test for the case where local directory is opened already contains
 * the index files and in such a case file should not be read from remote
 */
@Test public void reuseLocalDir() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  TestRAMDirectory remote=new TestRAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  readAndAssert(wrapped,"t1",t1);
  assertEquals(1,remote.openedFiles.size());
  Directory wrapped2=c1.wrapForRead("/foo",defn,remote);
  remote.reset();
  readAndAssert(wrapped2,"t1",t1);
  assertEquals(0,remote.openedFiles.size());
  Directory wrapped3=c1.wrapForRead("/foo",defn,remote);
  remote.reset();
  writeFile(baseDir,"t1");
  readAndAssert(wrapped3,"t1",t1);
  assertEquals(1,remote.openedFiles.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTest() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  assertEquals(2,wrapped.listAll().length);
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
  assertTrue(baseDir.fileExists("t1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Checks for the case where if the file exist local before writer starts
 * then those files do not get deleted even if deleted by writer via
 * indexing process from 'baseDir' as they might be in use by existing open
 * indexes
 */
@Test public void cowExistingLocalFileNotDeleted() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new CloseSafeDir();
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  Directory local=copier.wrapForWrite(defn,remote,false);
  assertEquals(newHashSet("t1","t2"),newHashSet(local.listAll()));
  byte[] t3=writeFile(local,"t3");
  Directory localForRead=copier.wrapForRead("/foo",defn,remote);
  readAndAssert(localForRead,"t1",t1);
  assertTrue(baseDir.fileExists("t1"));
  local.deleteFile("t1");
  assertFalse("t1 should be deleted from remote",remote.fileExists("t1"));
  assertFalse("t1 should be deleted from 'local' view also",local.fileExists("t1"));
  assertTrue("t1 should not be deleted from baseDir",baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t3"));
  local.deleteFile("t3");
  assertFalse("t1 should be deleted from remote",local.fileExists("t3"));
  assertTrue("t1 should NOT be deleted from remote",baseDir.fileExists("t3"));
  local.close();
  assertFalse("t3 should also be deleted from local",baseDir.fileExists("t3"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void cowCopyDoneOnCloseExceptionHandling() throws Exception {
  final CollectingExecutor executor=new CollectingExecutor();
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,executor,getWorkDir());
  Directory remote=new CloseSafeDir();
  final Directory local=copier.wrapForWrite(defn,remote,false);
  byte[] t1=writeFile(local,"t1");
  assertTrue(local.fileExists("t1"));
  assertFalse("t1 should NOT be copied to remote",remote.fileExists("t1"));
  executor.executeAll();
  assertTrue("t1 should now be copied to remote",remote.fileExists("t1"));
  byte[] t2=writeFile(local,"t2");
  assertFalse("t2 should NOT be copied to remote",remote.fileExists("t2"));
  ExecutorService executorService=Executors.newFixedThreadPool(2);
  final CountDownLatch copyLatch=new CountDownLatch(1);
  Future<?> copyTasks=executorService.submit(new Callable(){
    @Override public Object call() throws Exception {
      copyLatch.await();
      executor.executeAll();
      executor.enableImmediateExecution();
      return null;
    }
  }
);
  final CountDownLatch closeLatch=new CountDownLatch(1);
  Future<?> closeTasks=executorService.submit(new Callable(){
    @Override public Object call() throws Exception {
      closeLatch.await();
      local.close();
      return null;
    }
  }
);
  closeLatch.countDown();
  assertFalse("t2 should NOT be copied to remote",remote.fileExists("t2"));
  copyLatch.countDown();
  closeTasks.get();
  assertTrue("t2 should now be copied to remote",remote.fileExists("t2"));
  executorService.shutdown();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void deleteOldPostReindex() throws Exception {
  assumeNotWindows();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new IndexCopier(sameThreadExecutor(),getWorkDir());
  Directory remote=new CloseSafeDir();
  Directory w1=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  readAndAssert(w1,"t1",t1);
  readAndAssert(w1,"t2",t2);
  File indexBaseDir=c1.getIndexDir("/foo");
  File indexDir=new File(indexBaseDir,"0");
  assertTrue(new File(indexDir,"t1").exists());
  builder.setProperty(REINDEX_COUNT,1);
  defn=new IndexDefinition(root,builder.getNodeState());
  w1.close();
  Directory w2=c1.wrapForRead("/foo",defn,remote);
  readAndAssert(w2,"t1",t1);
  w2.close();
  assertFalse("Old index directory should have been removed",indexDir.exists());
  File indexDir2=new File(indexBaseDir,"1");
  assertTrue(new File(indexDir2,"t1").exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTestWithPrefetch() throws Exception {
  final List<String> syncedFiles=Lists.newArrayList();
  Directory baseDir=new RAMDirectory(){
    @Override public void sync(    Collection<String> names) throws IOException {
      syncedFiles.addAll(names);
      super.sync(names);
    }
  }
;
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir(),true);
  Directory remote=new RAMDirectory();
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  assertEquals(2,wrapped.listAll().length);
  assertThat(syncedFiles,containsInAnyOrder("t1","t2"));
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertTrue(baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void copyInProgressStats() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  final List<ListenableFuture<?>> submittedTasks=Lists.newArrayList();
  ExecutorService executor=new ForwardingListeningExecutorService(){
    @Override protected ListeningExecutorService delegate(){
      return MoreExecutors.listeningDecorator(Executors.newSingleThreadExecutor());
    }
    @Override public void execute(    Runnable command){
      submittedTasks.add(super.submit(command));
    }
  }
;
  IndexCopier c1=new RAMIndexCopier(baseDir,executor,getWorkDir());
  final CountDownLatch copyProceed=new CountDownLatch(1);
  final CountDownLatch copyRequestArrived=new CountDownLatch(1);
  TestRAMDirectory remote=new TestRAMDirectory(){
    @Override public void copy(    Directory to,    String src,    String dest,    IOContext context) throws IOException {
      copyRequestArrived.countDown();
      try {
        copyProceed.await();
      }
 catch (      InterruptedException e) {
      }
      super.copy(to,src,dest,context);
    }
  }
;
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  readAndAssert(wrapped,"t1",t1);
  copyRequestArrived.await();
  assertEquals(1,c1.getCopyInProgressCount());
  assertEquals(1,remote.openedFiles.size());
  readAndAssert(wrapped,"t1",t1);
  assertEquals(1,c1.getCopyInProgressCount());
  assertEquals(IOUtils.humanReadableByteCount(t1.length),c1.getCopyInProgressSize());
  assertEquals(1,c1.getCopyInProgressDetails().length);
  System.out.println(Arrays.toString(c1.getCopyInProgressDetails()));
  assertEquals(2,remote.openedFiles.size());
  copyProceed.countDown();
  Futures.allAsList(submittedTasks).get();
  remote.reset();
  readAndAssert(wrapped,"t1",t1);
  assertEquals(0,remote.openedFiles.size());
  assertEquals(0,c1.getCopyInProgressCount());
  executor.shutdown();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void failureInDelete() throws Exception {
  final Set<String> testFiles=new HashSet<String>();
  Directory baseDir=new CloseSafeDir(){
    @Override public void deleteFile(    String name) throws IOException {
      if (testFiles.contains(name)) {
        throw new IOException("Not allowed to delete " + name);
      }
      super.deleteFile(name);
    }
  }
;
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory r1=new RAMDirectory();
  byte[] t1=writeFile(r1,"t1");
  byte[] t2=writeFile(r1,"t2");
  Directory w1=c1.wrapForRead("/foo",defn,r1);
  readAndAssert(w1,"t1",t1);
  readAndAssert(w1,"t2",t2);
  assertTrue(baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
  Directory r2=new CloseSafeDir();
  copy(r1,r2);
  r2.deleteFile("t1");
  Directory w2=c1.wrapForRead("/foo",defn,r2);
  testFiles.add("t1");
  w2.close();
  assertEquals(1,c1.getFailedToDeleteFiles().size());
  IndexCopier.LocalIndexFile testFile=c1.getFailedToDeleteFiles().values().iterator().next();
  assertEquals(1,testFile.getDeleteAttemptCount());
  assertEquals(IOUtils.humanReadableByteCount(t1.length),c1.getGarbageSize());
  assertEquals(1,c1.getGarbageDetails().length);
  Directory w3=c1.wrapForRead("/foo",defn,r2);
  w3.close();
  assertEquals(2,testFile.getDeleteAttemptCount());
  testFiles.clear();
  Directory w4=c1.wrapForRead("/foo",defn,r2);
  w4.close();
  assertEquals(0,c1.getFailedToDeleteFiles().size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void wrapForWriteWithIndexPath() throws Exception {
  assumeNotWindows();
  Directory remote=new CloseSafeDir();
  IndexCopier copier=new IndexCopier(sameThreadExecutor(),getWorkDir());
  builder.setProperty(LuceneIndexConstants.INDEX_PATH,"foo");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Directory dir=copier.wrapForWrite(defn,remote,false);
  byte[] t1=writeFile(dir,"t1");
  dir.close();
  readAndAssert(remote,"t1",t1);
  List<File> files=new ArrayList<File>(FileUtils.listFiles(copier.getIndexRootDir(),null,true));
  assertEquals(1,files.size());
  assertEquals("t1",files.get(0).getName());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void concurrentRead() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  CollectingExecutor executor=new CollectingExecutor();
  IndexCopier c1=new RAMIndexCopier(baseDir,executor,getWorkDir());
  TestRAMDirectory remote=new TestRAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  readAndAssert(wrapped,"t1",t1);
  assertEquals(1,c1.getScheduledForCopyCount());
  assertEquals(1,remote.openedFiles.size());
  assertEquals(1,executor.commands.size());
  readAndAssert(wrapped,"t1",t1);
  assertEquals(1,c1.getScheduledForCopyCount());
  assertEquals(2,remote.openedFiles.size());
  assertEquals(1,executor.commands.size());
  executor.executeAll();
  remote.reset();
  readAndAssert(wrapped,"t1",t1);
  assertEquals(0,remote.openedFiles.size());
  assertEquals(0,c1.getScheduledForCopyCount());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void deletesOnClose() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory r1=new RAMDirectory();
  byte[] t1=writeFile(r1,"t1");
  byte[] t2=writeFile(r1,"t2");
  Directory w1=c1.wrapForRead("/foo",defn,r1);
  readAndAssert(w1,"t1",t1);
  readAndAssert(w1,"t2",t2);
  assertTrue(baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
  Directory r2=new RAMDirectory();
  copy(r1,r2);
  r2.deleteFile("t1");
  Directory w2=c1.wrapForRead("/foo",defn,r2);
  w2.close();
  assertFalse("t1 should have been deleted",baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteCorruptedFile() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  RAMIndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory(){
    @Override public IndexInput openInput(    String name,    IOContext context) throws IOException {
      throw new IllegalStateException("boom");
    }
  }
;
  String fileName="failed.txt";
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,fileName);
  try {
    readAndAssert(wrapped,fileName,t1);
    fail("Read of file should have failed");
  }
 catch (  IllegalStateException ignore) {
  }
  assertFalse(c1.baseDir.fileExists(fileName));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void wrapForWriteWithoutIndexPath() throws Exception {
  assumeNotWindows();
  Directory remote=new CloseSafeDir();
  IndexCopier copier=new IndexCopier(sameThreadExecutor(),getWorkDir());
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Directory dir=copier.wrapForWrite(defn,remote,false);
  byte[] t1=writeFile(dir,"t1");
  dir.close();
  readAndAssert(remote,"t1",t1);
  assertArrayEquals(FileUtils.EMPTY_FILE_ARRAY,copier.getIndexWorkDir().listFiles());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copyOnWriteBasics() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  byte[] t1=writeFile(remote,"t1");
  Directory local=copier.wrapForWrite(defn,remote,false);
  assertEquals(newHashSet("t1"),newHashSet(local.listAll()));
  assertEquals(t1.length,local.fileLength("t1"));
  byte[] t2=writeFile(local,"t2");
  assertEquals(newHashSet("t1","t2"),newHashSet(local.listAll()));
  assertEquals(t2.length,local.fileLength("t2"));
  assertTrue(local.fileExists("t1"));
  assertTrue(local.fileExists("t2"));
  assertTrue("t2 should be copied to remote",remote.fileExists("t2"));
  readAndAssert(local,"t1",t1);
  readAndAssert(local,"t2",t2);
  local.deleteFile("t1");
  assertEquals(newHashSet("t2"),newHashSet(local.listAll()));
  local.deleteFile("t2");
  assertEquals(newHashSet(),newHashSet(local.listAll()));
  try {
    local.fileLength("nonExistentFile");
    fail();
  }
 catch (  FileNotFoundException ignore) {
  }
  try {
    local.openInput("nonExistentFile",IOContext.DEFAULT);
    fail();
  }
 catch (  FileNotFoundException ignore) {
  }
  local.close();
  assertFalse(baseDir.fileExists("t2"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexDefinitionTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonIndexPropShouldHaveAllOtherConfigDisabled() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_INDEX,false).setProperty(LuceneIndexConstants.PROP_USE_IN_SUGGEST,true).setProperty(LuceneIndexConstants.PROP_USE_IN_SPELLCHECK,true).setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true).setProperty(LuceneIndexConstants.PROP_NOT_NULL_CHECK_ENABLED,true).setProperty(LuceneIndexConstants.PROP_USE_IN_EXCERPT,true).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true).setProperty(LuceneIndexConstants.PROP_ORDERED,true).setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule);
  PropertyDefinition pd=rule.getConfig("foo");
  assertFalse(pd.index);
  assertFalse(pd.nodeScopeIndex);
  assertFalse(pd.useInSuggest);
  assertFalse(pd.useInSpellcheck);
  assertFalse(pd.nullCheckEnabled);
  assertFalse(pd.notNullCheckEnabled);
  assertFalse(pd.stored);
  assertFalse(pd.ordered);
  assertFalse(pd.analyzed);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSuggestEnabledOnNamedProp() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_USE_IN_SUGGEST,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(idxDefn.isSuggestEnabled());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void indexRuleInheritanceDisabled() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  builder.setProperty(PROP_NAME,"testIndex");
  rules.child("nt:hierarchyNode").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0).setProperty(LuceneIndexConstants.RULE_INHERITED,false);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNull(defn.getApplicableIndexingRule(newTree(newNode("nt:base"))));
  assertNotNull(defn.getApplicableIndexingRule(newTree(newNode("nt:hierarchyNode"))));
  assertNull("nt:folder should not be index as rule is not inheritable",defn.getApplicableIndexingRule(newTree(newNode("nt:folder"))));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyDefinition() throws Exception {
  builder.child(PROP_NODE).child("foo").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  builder.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","bar"),STRINGS));
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertTrue(rule.isIndexed("foo"));
  assertTrue(rule.isIndexed("bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo").getType());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void notNullCheckEnabledWithTestNode() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_NOT_NULL_CHECK_ENABLED,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(!idxDefn.getApplicableIndexingRule(TestUtil.NT_TEST).getNotNullCheckEnabledProperties().isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionPropertyIsV2() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.V2,defn.getVersion());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nullCheckEnabledWithTestNode() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(!idxDefn.getApplicableIndexingRule(TestUtil.NT_TEST).getNullCheckEnabledProperties().isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyRegExAndRelativeProperty() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING),of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertTrue(defn.isOfOldFormat());
  NodeBuilder updated=IndexDefinition.updateDefinition(defnb.getNodeState().builder());
  IndexDefinition defn2=new IndexDefinition(root,updated.getNodeState());
  IndexingRule rule=defn2.getApplicableIndexingRule(newTree(newNode("nt:base")));
  assertNotNull(rule.getConfig("foo"));
  assertNull("Property regex used should not allow relative properties",rule.getConfig("foo/bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleWithPropertyOrdering() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  rules.child("nt:folder").child(PROP_NODE).setProperty(OAK_CHILD_ORDER,ImmutableList.of("prop2","prop1"),NAMES);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("prop1"));
  assertTrue(rule1.isIndexed("fooProp"));
  assertEquals(4.0f,rule1.getConfig("bazProp2").boost,0);
  assertEquals(4.0f,rule1.getConfig("fooProp").boost,0);
  rules.child("nt:folder").child(PROP_NODE).setProperty(OAK_CHILD_ORDER,ImmutableList.of("prop1","prop2"),NAMES);
  defn=new IndexDefinition(root,builder.getNodeState());
  rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertEquals(3.0f,rule1.getConfig("fooProp").boost,0);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void defaultConfig() throws Exception {
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(idxDefn.saveDirListing());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void indexRuleInheritance() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  builder.setProperty(PROP_NAME,"testIndex");
  rules.child("nt:hierarchyNode").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNull(defn.getApplicableIndexingRule(newTree(newNode("nt:base"))));
  assertNotNull(defn.getApplicableIndexingRule(newTree(newNode("nt:hierarchyNode"))));
  assertNotNull(defn.getApplicableIndexingRule(newTree(newNode("nt:folder"))));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSuggestDisabled() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo");
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertFalse(idxDefn.isSuggestEnabled());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionFreshIsCurrent() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.getDefault(),defn.getVersion());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void skipTokenization() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertFalse(rule.getConfig("foo").skipTokenization("foo"));
  assertTrue(rule.getConfig(JcrConstants.JCR_UUID).skipTokenization(JcrConstants.JCR_UUID));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeFullTextIndexed_Aggregates() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule);
  assertTrue(rule.isNodeFullTextIndexed());
  assertTrue(rule.indexesAllNodesOfMatchingType());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSuggestFrequency() throws Exception {
  int suggestFreq=40;
  NodeBuilder indexRoot=builder;
  IndexDefinition idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertEquals("Default config",60,idxDefn.getSuggesterUpdateFrequencyMinutes());
  indexRoot=builder.child("shadowConfigRoot");
  indexRoot.setProperty(LuceneIndexConstants.SUGGEST_UPDATE_FREQUENCY_MINUTES,suggestFreq);
  indexRoot.child(LuceneIndexConstants.SUGGESTION_CONFIG);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertEquals("Namespaced config node should shadow global config",60,idxDefn.getSuggesterUpdateFrequencyMinutes());
  indexRoot=builder.child("backwardCompatibilityRoot");
  indexRoot.setProperty(LuceneIndexConstants.SUGGEST_UPDATE_FREQUENCY_MINUTES,suggestFreq);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertEquals("Backward compatibility config",suggestFreq,idxDefn.getSuggesterUpdateFrequencyMinutes());
  indexRoot=builder.child("indexRoot");
  indexRoot.child(LuceneIndexConstants.SUGGESTION_CONFIG).setProperty(LuceneIndexConstants.SUGGEST_UPDATE_FREQUENCY_MINUTES,suggestFreq);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertEquals("Set config",suggestFreq,idxDefn.getSuggesterUpdateFrequencyMinutes());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fulltextCost() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(300,defn.getFulltextEntryCount(300));
  assertEquals(IndexDefinition.DEFAULT_ENTRY_COUNT + 100,defn.getFulltextEntryCount(IndexDefinition.DEFAULT_ENTRY_COUNT + 100));
  defnb.setProperty(IndexConstants.ENTRY_COUNT_PROPERTY_NAME,100);
  defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(100,defn.getFulltextEntryCount(300));
  assertEquals(50,defn.getFulltextEntryCount(50));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyConfigCaseInsensitive() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/foo").setProperty(LuceneIndexConstants.PROP_NAME,"Foo").setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  TestUtil.child(rules,"nt:folder/properties/bar").setProperty(LuceneIndexConstants.PROP_NAME,"BAR").setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("Foo"));
  assertTrue(rule1.isIndexed("foo"));
  assertTrue(rule1.isIndexed("fOO"));
  assertTrue(rule1.isIndexed("bar"));
  assertFalse(rule1.isIndexed("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeFullTextIndexed_Simple() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule);
  assertFalse(rule.isNodeFullTextIndexed());
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  defn=new IndexDefinition(root,builder.getNodeState());
  rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertTrue(rule.isNodeFullTextIndexed());
  assertTrue(rule.indexesAllNodesOfMatchingType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void formatUpdate() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING),of("foo","Bar"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertTrue(defn.isOfOldFormat());
  NodeBuilder updated=IndexDefinition.updateDefinition(defnb.getNodeState().builder());
  IndexDefinition defn2=new IndexDefinition(root,updated.getNodeState());
  assertFalse(defn2.isOfOldFormat());
  IndexingRule rule=defn2.getApplicableIndexingRule(newTree(newNode("nt:base")));
  assertNotNull(rule);
  assertFalse(rule.getConfig("foo").index);
  assertFalse(rule.getConfig("Bar").index);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void fulltextEnabledAndAggregate() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertFalse(defn.isFullTextEnabled());
  NodeBuilder aggregates=defnb.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:base");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  defn=new IndexDefinition(root,defnb.getNodeState());
  assertTrue(defn.isFullTextEnabled());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void fullTextEnabled() throws Exception {
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertTrue("By default fulltext is enabled",idxDefn.isFullTextEnabled());
  assertTrue("By default everything is indexed",rule.isIndexed("foo"));
  assertTrue("Property types need to be defined",rule.includePropertyType(PropertyType.DATE));
  assertTrue("For fulltext storage is enabled",rule.getConfig("foo").stored);
  assertFalse(rule.getConfig("foo").skipTokenization("foo"));
  assertTrue(rule.getConfig("jcr:uuid").skipTokenization("jcr:uuid"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeFullTextIndexed_Regex() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_ANALYZED,true).setProperty(LuceneIndexConstants.PROP_IS_REGEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule);
  assertFalse(rule.isNodeFullTextIndexed());
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  defn=new IndexDefinition(root,builder.getNodeState());
  rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertTrue(rule.isNodeFullTextIndexed());
  assertTrue(rule.indexesAllNodesOfMatchingType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleWithPropertyRegEx() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("prop1"));
  assertFalse(rule1.isIndexed("prop2"));
  assertTrue(rule1.isIndexed("fooProp"));
  PropertyDefinition pd=rule1.getConfig("fooProp2");
  assertEquals(4.0f,pd.boost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexRuleInheritanceOrdering2() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.setProperty(OAK_CHILD_ORDER,ImmutableList.of("nt:base","nt:hierarchyNode"),NAMES);
  rules.child("nt:hierarchyNode").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  rules.child("nt:base").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertEquals(3.0,getRule(defn,"nt:base").boost,0);
  assertEquals(3.0,getRule(defn,"nt:hierarchyNode").boost,0);
  assertEquals(3.0,getRule(defn,"nt:file").boost,0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleSanity() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0).setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_BOOLEAN);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNull(defn.getApplicableIndexingRule(newTree(newNode("nt:base"))));
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertEquals(2.0f,rule1.boost,0);
  assertTrue(rule1.isIndexed("prop1"));
  assertFalse(rule1.isIndexed("prop2"));
  PropertyDefinition pd=rule1.getConfig("prop1");
  assertEquals(3.0f,pd.boost,0);
  assertEquals(PropertyType.BOOLEAN,pd.getType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void costConfig() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(1.0,defn.getCostPerEntry(),0);
  assertEquals(1.0,defn.getCostPerExecution(),0);
  assertEquals(IndexDefinition.DEFAULT_ENTRY_COUNT,defn.getEntryCount());
  assertFalse(defn.isEntryCountDefined());
  defnb.setProperty(LuceneIndexConstants.COST_PER_ENTRY,2.0);
  defnb.setProperty(LuceneIndexConstants.COST_PER_EXECUTION,3.0);
  defnb.setProperty(IndexConstants.ENTRY_COUNT_PROPERTY_NAME,500);
  IndexDefinition defn2=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(2.0,defn2.getCostPerEntry(),0);
  assertEquals(3.0,defn2.getCostPerExecution(),0);
  assertEquals(500,defn2.getEntryCount());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void indexRuleMixin() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("mix:title");
  TestUtil.child(rules,"mix:title/properties/jcr:title").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNotNull(defn.getApplicableIndexingRule(newTree(newNode("nt:folder","mix:title"))));
  assertNull(defn.getApplicableIndexingRule(newTree(newNode("nt:folder"))));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void maxExtractLength() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(-IndexDefinition.DEFAULT_MAX_EXTRACT_LENGTH * IndexDefinition.DEFAULT_MAX_FIELD_LENGTH,defn.getMaxExtractLength());
  defnb.child(TIKA).setProperty(LuceneIndexConstants.TIKA_MAX_EXTRACT_LENGTH,1000);
  defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(1000,defn.getMaxExtractLength());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSuggestAnalyzed() throws Exception {
  NodeBuilder indexRoot=builder;
  IndexDefinition idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertFalse("Default config",idxDefn.isSuggestAnalyzed());
  indexRoot=builder.child("shadowConfigRoot");
  indexRoot.setProperty(LuceneIndexConstants.SUGGEST_ANALYZED,true);
  indexRoot.child(LuceneIndexConstants.SUGGESTION_CONFIG);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertFalse("Namespaced config node should shadow global config",idxDefn.isSuggestAnalyzed());
  indexRoot=builder.child("backwardCompatibilityRoot");
  indexRoot.setProperty(LuceneIndexConstants.SUGGEST_ANALYZED,true);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertTrue("Backward compatibility config",idxDefn.isSuggestAnalyzed());
  indexRoot=builder.child("indexRoot");
  indexRoot.child(LuceneIndexConstants.SUGGESTION_CONFIG).setProperty(LuceneIndexConstants.SUGGEST_ANALYZED,true);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertTrue("Set config",idxDefn.isSuggestAnalyzed());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSuggestEnabledOnRegexProp() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child(TestUtil.NT_TEST);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.PROP_USE_IN_SUGGEST,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(idxDefn.isSuggestEnabled());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void codecConfig() throws Exception {
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNotNull(defn.getCodec());
  assertEquals(oakCodec.getName(),defn.getCodec().getName());
  builder.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  defn=new IndexDefinition(root,builder.getNodeState());
  assertNull(defn.getCodec());
  Codec simple=Codec.getDefault();
  builder.setProperty(LuceneIndexConstants.CODEC_NAME,simple.getName());
  defn=new IndexDefinition(root,builder.getNodeState());
  assertNotNull(defn.getCodec());
  assertEquals(simple.getName(),defn.getCodec().getName());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionFullTextIsV1() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  defnb.child(INDEX_DATA_CHILD_NAME);
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.V1,defn.getVersion());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionFreshCompateMode() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  defnb.setProperty(LuceneIndexConstants.COMPAT_MODE,IndexFormatVersion.V1.getVersion());
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.V1,defn.getVersion());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyTypes() throws Exception {
  builder.setProperty(createProperty(INCLUDE_PROPERTY_TYPES,of(TYPENAME_LONG),STRINGS));
  builder.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","bar"),STRINGS));
  builder.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertFalse(idxDefn.isFullTextEnabled());
  assertFalse("If fulltext disabled then nothing stored",rule.getConfig("foo").stored);
  assertTrue(rule.includePropertyType(PropertyType.LONG));
  assertFalse(rule.includePropertyType(PropertyType.STRING));
  assertTrue(rule.isIndexed("foo"));
  assertTrue(rule.isIndexed("bar"));
  assertFalse(rule.isIndexed("baz"));
  assertTrue(rule.getConfig("foo").skipTokenization("foo"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void customAnalyzer() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  defnb.setProperty(LuceneIndexConstants.MAX_FIELD_LENGTH,-1);
  defnb.child(ANALYZERS).child(ANL_DEFAULT).child(LuceneIndexConstants.ANL_TOKENIZER).setProperty(LuceneIndexConstants.ANL_NAME,"whitespace");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(TokenizerChain.class.getName(),defn.getAnalyzer().getClass().getName());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionDefnUpdateFulltextIsV1() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  defnb.child(INDEX_DATA_CHILD_NAME);
  defnb=defnb.getNodeState().builder();
  IndexDefinition.updateDefinition(defnb);
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(IndexFormatVersion.V1,defn.getVersion());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void relativePropertyConfig() throws Exception {
  builder.child(PROP_NODE).child("foo1").child("bar").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  builder.child(PROP_NODE).child("foo2").child("bar2").child("baz").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_LONG);
  builder.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","foo1/bar","foo2/bar2/baz"),STRINGS));
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule.getConfig("foo1/bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo1/bar").getType());
  assertEquals(PropertyType.LONG,rule.getConfig("foo2/bar2/baz").getType());
  assertTrue(rule.getConfig("foo1/bar").relative);
  assertArrayEquals(new String[]{"foo2","bar2"},rule.getConfig("foo2/bar2/baz").ancestors);
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void indexRuleMixinInheritance() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("mix:mimeType");
  TestUtil.child(rules,"mix:mimeType/properties/jcr:mimeType").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNotNull(defn.getApplicableIndexingRule(newTree(newNode("nt:folder","mix:mimeType"))));
  assertNull(defn.getApplicableIndexingRule(newTree(newNode("nt:folder"))));
  assertNotNull(defn.getApplicableIndexingRule(newTree(newNode("nt:resource"))));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyDefinitionWithExcludes() throws Exception {
  builder.child(PROP_NODE).child("foo").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertTrue(rule.isIndexed("foo"));
  assertTrue(rule.isIndexed("bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo").getType());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void customTikaConfig() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertFalse(defn.hasCustomTikaConfig());
  defnb.child(LuceneIndexConstants.TIKA).child(LuceneIndexConstants.TIKA_CONFIG).child(JcrConstants.JCR_CONTENT).setProperty(JcrConstants.JCR_DATA,"hello".getBytes());
  defn=new IndexDefinition(root,defnb.getNodeState());
  assertTrue(defn.hasCustomTikaConfig());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleWithPropertyRegEx2() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"metadata/.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("prop1"));
  assertTrue(rule1.isIndexed("prop2"));
  assertFalse(rule1.isIndexed("jcr:content/prop1"));
  assertTrue(rule1.isIndexed("metadata/foo"));
  assertFalse(rule1.isIndexed("metadata/foo/bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzedEnabledForBoostedField() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_ANALYZED,true).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  TestUtil.child(rules,"nt:folder/properties/prop3").setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  PropertyDefinition pd=rule1.getConfig("prop1");
  assertEquals(3.0f,pd.boost,0);
  assertTrue("Analyzed should be assumed to be true for boosted fields",pd.analyzed);
  assertFalse(rule1.getConfig("prop3").analyzed);
  assertEquals(2,rule1.getNodeScopeAnalyzedProps().size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexRuleInheritanceOrdering() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.setProperty(OAK_CHILD_ORDER,ImmutableList.of("nt:hierarchyNode","nt:base"),NAMES);
  rules.child("nt:hierarchyNode").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  rules.child("nt:base").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertEquals(3.0,getRule(defn,"nt:base").boost,0);
  assertEquals(2.0,getRule(defn,"nt:hierarchyNode").boost,0);
  assertEquals(3.0,getRule(defn,"nt:query").boost,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexPlannerTest </h4><pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void purePropertyIndexAndPathRestriction() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictPath("/content",Filter.PathRestriction.ALL_CHILDREN);
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void worksWithIndexFormatV2Onwards() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinition(index,"lucene",of(TYPENAME_STRING));
  nb.child(INDEX_DATA_CHILD_NAME);
  IndexNode node=createIndexNode(new IndexDefinition(root,nb.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.setFullTextConstraint(FullTextParser.parse(".","mountain"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void purePropertyIndexAndNodeTypeRestriction() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  defn.setProperty(IndexConstants.DECLARING_NODE_TYPES,of("nt:file"),NAMES);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:file");
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void purePropertyIndexAndNodeTypeRestriction3() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  defn.setProperty(IndexConstants.DECLARING_NODE_TYPES,of("nt:file"),NAMES);
  defn=IndexDefinition.updateDefinition(defn.getNodeState().builder());
  NodeBuilder foob=getNode(defn,"indexRules/nt:file/properties/foo");
  foob.setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:file");
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNotNull(plan);
  assertNotNull(pr(plan));
  assertTrue(pr(plan).evaluateNodeTypeRestriction());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void matchingProperty() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNotNull(plan);
  assertNotNull(pr(plan));
  assertTrue(pr(plan).evaluateNonFullTextConstraints());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void purePropertyIndexAndNodeTypeRestriction2() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  defn=IndexDefinition.updateDefinition(defn.getNodeState().builder());
  NodeBuilder foob=getNode(defn,"indexRules/nt:base/properties/foo");
  foob.setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:file");
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void noPathRestHasQueryPath() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(createProperty(IndexConstants.QUERY_PATHS,of("/test/a"),Type.STRINGS));
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  filter.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void nullPropertyCheck2() throws Exception {
  root=registerTestNodeType(builder).getNodeState();
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  NodeBuilder rules=defn.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true).setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState().getChildNode("test"));
  IndexNode node=createIndexNode(idxDefn);
  FilterImpl filter=createFilter(NT_TEST);
  filter.restrictProperty("foo",Operator.EQUAL,null);
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNotNull("For null checks plan should be returned with nullCheckEnabled",plan);
  IndexPlanner.PlanResult pr=(IndexPlanner.PlanResult)plan.getAttribute(LucenePropertyIndex.ATTR_PLAN_RESULT);
  assertNotNull(pr.getPropDefn(filter.getPropertyRestriction("foo")));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void propertyIndexCost() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  long numofDocs=IndexDefinition.DEFAULT_ENTRY_COUNT + 1000;
  IndexDefinition idxDefn=new IndexDefinition(root,defn.getNodeState());
  IndexNode node=createIndexNode(idxDefn,numofDocs);
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertEquals(idxDefn.getEntryCount(),plan.getEstimatedEntryCount());
  assertEquals(1.0,plan.getCostPerExecution(),0);
  assertEquals(1.0,plan.getCostPerEntry(),0);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void noMatchingProperty() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("bar",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void fulltextIndexAndPathRestriction() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  defn=IndexDefinition.updateDefinition(defn.getNodeState().builder());
  NodeBuilder foob=getNode(defn,"indexRules/nt:base/properties/foo");
  foob.setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictPath("/content",Filter.PathRestriction.ALL_CHILDREN);
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNotNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void noPlanForSortOnlyByScore() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  IndexPlanner planner=new IndexPlanner(node,"/foo",createFilter("nt:file"),ImmutableList.of(new OrderEntry("jcr:score",Type.LONG,OrderEntry.Order.ASCENDING)));
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void nodeTypeInheritance() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(createProperty(IndexConstants.DECLARING_NODE_TYPES,of("nt:hierarchyNode"),STRINGS));
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:folder");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNotNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void hasPathRestHasMatchingQueryPaths() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(createProperty(IndexConstants.QUERY_PATHS,of("/test/a","/test/b"),Type.STRINGS));
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictPath("/test/a",Filter.PathRestriction.ALL_CHILDREN);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNotNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void nullPropertyCheck() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,null);
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNull("For null checks no plan should be returned",plan);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void pureNodeTypeWithEvaluatePathRestrictionEnabled() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder defn=newLuceneIndexDefinition(index,"lucene",of(TYPENAME_STRING));
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  TestUtil.useV2(defn);
  FilterImpl filter=createFilter("nt:file");
  filter.restrictPath("/",Filter.PathRestriction.ALL_CHILDREN);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void fulltextIndexAndNodeTypeRestriction() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  defn.setProperty(IndexConstants.DECLARING_NODE_TYPES,of("nt:file"),NAMES);
  defn=IndexDefinition.updateDefinition(defn.getNodeState().builder());
  NodeBuilder foob=getNode(defn,"indexRules/nt:file/properties/foo");
  foob.setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:file");
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNotNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void planForSortField() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(createProperty(ORDERED_PROP_NAMES,of("foo"),STRINGS));
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  IndexPlanner planner=new IndexPlanner(node,"/foo",createFilter("nt:base"),ImmutableList.of(new OrderEntry("foo",Type.LONG,OrderEntry.Order.ASCENDING)));
  assertNotNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void noApplicableRule() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(createProperty(IndexConstants.DECLARING_NODE_TYPES,of("nt:folder"),STRINGS));
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
  filter=createFilter("nt:folder");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNotNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fulltextIndexCost() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder defn=newLuceneIndexDefinition(index,"lucene",of(TYPENAME_STRING));
  TestUtil.useV2(defn);
  long numofDocs=IndexDefinition.DEFAULT_ENTRY_COUNT + 1000;
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()),numofDocs);
  FilterImpl filter=createFilter("nt:base");
  filter.setFullTextConstraint(FullTextParser.parse(".","mountain"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNotNull(plan);
  assertEquals(numofDocs,plan.getEstimatedEntryCount());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void fullTextQueryNonFulltextIndex() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.setFullTextConstraint(FullTextParser.parse(".","mountain"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyIndexCost2() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.COST_PER_ENTRY,2.0);
  defn.setProperty(LuceneIndexConstants.COST_PER_EXECUTION,3.0);
  long numofDocs=IndexDefinition.DEFAULT_ENTRY_COUNT - 100;
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()),numofDocs);
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertEquals(numofDocs,plan.getEstimatedEntryCount());
  assertEquals(3.0,plan.getCostPerExecution(),0);
  assertEquals(2.0,plan.getCostPerEntry(),0);
  assertNotNull(plan);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void hasPathRestHasNoExplicitQueryPaths() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  assertNotNull(planner.getPlan());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void noPlanForNodeTypeQueryAndOnlyAnalyzedProperties() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  defn.setProperty(IndexConstants.DECLARING_NODE_TYPES,of("nt:file"),NAMES);
  defn=IndexDefinition.updateDefinition(defn.getNodeState().builder());
  NodeBuilder foob=getNode(defn,"indexRules/nt:file/properties/foo");
  foob.setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:file");
  filter.restrictPath("/foo",Filter.PathRestriction.ALL_CHILDREN);
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNull(plan);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void noPlanForFulltextQueryAndOnlyAnalyzedProperties() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  defn=IndexDefinition.updateDefinition(defn.getNodeState().builder());
  NodeBuilder foob=getNode(defn,"indexRules/nt:base/properties/foo");
  foob.setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.setFullTextConstraint(FullTextParser.parse(".","mountain"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNull(plan);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexAugmentTest </h4><pre class="type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void indexHookCallbackAndStorage() throws Exception {
  final String propName="subChild/foo";
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enableForFullText(props,propName);
  root.commit();
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      assertEquals("/test/item",path);
      assertEquals(TestUtil.NT_TEST,document.getName(JcrConstants.JCR_PRIMARYTYPE));
      assertEquals(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE,indexDefinition.getName(JcrConstants.JCR_PRIMARYTYPE));
      return Lists.<Field>newArrayList(new StringField("barbar","1",Field.Store.NO));
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree test=root.getTree("/").addChild("test");
  Tree node=createNodeWithType(test,"item",TestUtil.NT_TEST).addChild("subChild");
  node.setProperty("foo","bar");
  root.commit();
  IndexSearcher searcher=getSearcher();
  TopDocs docs=searcher.search(new TermQuery(new Term("barbar","1")),10);
  ScoreDoc[] scoreDocs=docs.scoreDocs;
  assertEquals("Number of results should be 1",1,scoreDocs.length);
  Document doc=searcher.doc(scoreDocs[0].doc);
  String path=doc.get(":path");
  assertEquals("/test/item",path);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void indexVersionSwitchOnReindex() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinition(index,"lucene",of(TYPENAME_STRING));
  NodeState indexed=HOOK.processCommit(EMPTY_NODE,builder.getNodeState(),CommitInfo.EMPTY);
  builder=indexed.builder();
  builder.child(INDEX_DEFINITIONS_NAME).child("lucene").setProperty(IndexDefinition.INDEX_VERSION,IndexFormatVersion.V1.getVersion());
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  NodeState after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  assertEquals(IndexFormatVersion.V1,new IndexDefinition(root,indexed.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("lucene")).getVersion());
  builder=indexed.builder();
  before=indexed;
  builder.child(INDEX_DEFINITIONS_NAME).child("lucene").setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  assertEquals(IndexFormatVersion.getDefault(),new IndexDefinition(root,indexed.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("lucene")).getVersion());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void autoFormatUpdate() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  NodeState indexed=HOOK.processCommit(EMPTY_NODE,builder.getNodeState(),CommitInfo.EMPTY);
  IndexDefinition defn=new IndexDefinition(root,indexed.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("lucene"));
  assertFalse(defn.isOfOldFormat());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneWithFullText() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder idxnb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  IndexDefinition defn=new IndexDefinition(root,idxnb.getNodeState());
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  builder.child("test").setProperty("price",100);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertEquals("/test",query(escape(FieldNames.createAnalyzedFieldName("foo")) + ":fox",defn));
  assertNull("Non string properties not indexed by default",getPath(NumericRangeQuery.newLongRange("price",100L,100L,true,true)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void saveDirectoryListing() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  nb.setProperty(LuceneIndexConstants.SAVE_DIR_LISTING,true);
  nb.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  nb.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo"),STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState dir=indexed.getChildNode("oak:index").getChildNode("lucene").getChildNode(":data");
  assertTrue(dir.hasProperty(OakDirectory.PROP_DIR_LISTING));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneWithNonFullText() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  nb.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  nb.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","price","weight","bool","creationTime"),STRINGS));
  IndexDefinition defn=new IndexDefinition(root,nb.getNodeState());
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  builder.child("test").setProperty("bar","kite is flying");
  builder.child("test").setProperty("price",100);
  builder.child("test").setProperty("weight",10.0);
  builder.child("test").setProperty("bool",true);
  builder.child("test").setProperty("truth",true);
  builder.child("test").setProperty("creationTime",createCal("05/06/2014"));
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  tracker.update(indexed);
  assertNull("Fulltext search should not work",query("foo:fox",defn));
  assertEquals("/test",getPath(new TermQuery(new Term("foo","fox is jumping"))));
  assertNull("bar must NOT be indexed",getPath(new TermQuery(new Term("bar","kite is flying"))));
  assertEquals("/test",getPath(NumericRangeQuery.newDoubleRange("weight",8D,12D,true,true)));
  assertEquals("/test",getPath(NumericRangeQuery.newLongRange("price",100L,100L,true,true)));
  assertEquals("/test",getPath(new TermQuery(new Term("bool","true"))));
  assertNull("truth must NOT be indexed",getPath(new TermQuery(new Term("truth","true"))));
  assertEquals("/test",getPath(NumericRangeQuery.newLongRange("creationTime",dateToTime("05/05/2014"),dateToTime("05/07/2014"),true,true)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexLookupTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void collectPathOnSubNode() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLuceneIndexDefinition(index,"l1",of(TYPENAME_STRING));
  index=builder.child("a").child(INDEX_DEFINITIONS_NAME);
  newLuceneIndexDefinition(index,"l2",of(TYPENAME_STRING));
  index=builder.child("a").child("b").child(INDEX_DEFINITIONS_NAME);
  newLuceneIndexDefinition(index,"l3",of(TYPENAME_STRING));
  LuceneIndexLookup lookup=new LuceneIndexLookup(builder.getNodeState());
  FilterImpl f=new FilterImpl();
  f.restrictPath("/a",Filter.PathRestriction.EXACT);
  assertEquals(of("/oak:index/l1","/a/oak:index/l2"),lookup.collectIndexNodePaths(f));
  f.restrictPath("/a/b",Filter.PathRestriction.EXACT);
  assertEquals(of("/oak:index/l1","/a/oak:index/l2","/a/b/oak:index/l3"),lookup.collectIndexNodePaths(f));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void collectPathOnRootNode() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLuceneIndexDefinition(index,"l1",of(TYPENAME_STRING));
  newLuceneIndexDefinition(index,"l2",of(TYPENAME_STRING));
  LuceneIndexLookup lookup=new LuceneIndexLookup(builder.getNodeState());
  FilterImpl f=new FilterImpl();
  f.restrictPath("/",Filter.PathRestriction.EXACT);
  assertEquals(of("/oak:index/l1","/oak:index/l2"),lookup.collectIndexNodePaths(f));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderServiceTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void enablePrefetchIndexFiles() throws Exception {
  Map<String,Object> config=getDefaultConfig();
  config.put("prefetchIndexFiles",true);
  MockOsgi.activate(service,context.bundleContext(),config);
  IndexCopier indexCopier=service.getIndexCopier();
  assertTrue(indexCopier.isPrefetchEnabled());
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void defaultSetup() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),getDefaultConfig());
  assertNotNull(context.getService(QueryIndexProvider.class));
  assertNotNull(context.getService(Observer.class));
  assertNotNull(context.getService(IndexEditorProvider.class));
  LuceneIndexEditorProvider editorProvider=(LuceneIndexEditorProvider)context.getService(IndexEditorProvider.class);
  assertNotNull(editorProvider.getIndexCopier());
  IndexCopier indexCopier=service.getIndexCopier();
  assertNotNull("IndexCopier should be initialized as CopyOnRead is enabled by default",indexCopier);
  assertTrue(indexCopier.isPrefetchEnabled());
  assertNotNull("CopyOnRead should be enabled by default",context.getService(CopyOnReadStatsMBean.class));
  assertNotNull(context.getService(CacheStatsMBean.class));
  assertTrue(context.getService(Observer.class) instanceof BackgroundObserver);
  assertEquals(InfoStream.NO_OUTPUT,InfoStream.getDefault());
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void enableExtractedTextCaching() throws Exception {
  Map<String,Object> config=getDefaultConfig();
  config.put("extractedTextCacheSizeInMB",11);
  MockOsgi.activate(service,context.bundleContext(),config);
  ExtractedTextCache textCache=service.getExtractedTextCache();
  assertNotNull(textCache.getCacheStats());
  assertNotNull(context.getService(CacheStatsMBean.class));
  assertEquals(11 * FileUtils.ONE_MB,textCache.getCacheStats().getMaxTotalWeight());
  MockOsgi.deactivate(service);
  assertNull(context.getService(CacheStatsMBean.class));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void preExtractedTextProvider() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),getDefaultConfig());
  LuceneIndexEditorProvider editorProvider=(LuceneIndexEditorProvider)context.getService(IndexEditorProvider.class);
  assertNull(editorProvider.getExtractedTextCache().getExtractedTextProvider());
  service.bindExtractedTextProvider(new DummyProvider());
  assertNotNull(editorProvider.getExtractedTextCache().getExtractedTextProvider());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void enableCopyOnWrite() throws Exception {
  Map<String,Object> config=getDefaultConfig();
  config.put("enableCopyOnWriteSupport",true);
  MockOsgi.activate(service,context.bundleContext(),config);
  LuceneIndexEditorProvider editorProvider=(LuceneIndexEditorProvider)context.getService(IndexEditorProvider.class);
  assertNotNull(editorProvider);
  assertNotNull(editorProvider.getIndexCopier());
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void disableOpenIndexAsync() throws Exception {
  Map<String,Object> config=getDefaultConfig();
  config.put("enableOpenIndexAsync",false);
  MockOsgi.activate(service,context.bundleContext(),config);
  assertTrue(context.getService(Observer.class) instanceof LuceneIndexProvider);
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexSuggestionTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void suggestNodeName() throws Exception {
  final String nodeType="nt:unstructured";
  createSuggestIndex("lucene-suggest",nodeType,LuceneIndexConstants.PROPDEF_PROP_NODE_NAME);
  root.addNode("indexedNode",nodeType);
  session.save();
  String suggQuery=createSuggestQuery(nodeType,"indexedn");
  QueryManager queryManager=session.getWorkspace().getQueryManager();
  QueryResult result=queryManager.createQuery(suggQuery,Query.JCR_SQL2).execute();
  RowIterator rows=result.getRows();
  String value=null;
  while (rows.hasNext()) {
    Row firstRow=rows.nextRow();
    value=firstRow.getValue("suggestion").getString();
    break;
  }
  assertEquals("Node name should be suggested","indexedNode",value);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCursorStability() throws Exception {
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder fooProp=rules.child("nt:base").child(LuceneIndexConstants.PROP_NODE).child("foo");
  fooProp.setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  NodeState before=builder.getNodeState();
  int noOfDocs=LucenePropertyIndex.LUCENE_QUERY_BATCH_SIZE + 10;
  for (int i=0; i < noOfDocs; i++) {
    builder.child("a" + i).setProperty("foo",(long)i);
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.GREATER_OR_EQUAL,PropertyValues.newLong(0L));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  before=indexed;
  builder=indexed.builder();
  for (int i=0; i < noOfDocs - 10; i++) {
    builder.child("a" + i).remove();
  }
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  builder=indexed.builder();
  NodeBuilder idx=builder.child(INDEX_DEFINITIONS_NAME).child("lucene");
  purgeDeletedDocs(idx,new IndexDefinition(root,idx));
  int numDeletes=getDeletedDocCount(idx,new IndexDefinition(root,idx));
  Assert.assertEquals(0,numDeletes);
  tracker.update(builder.getNodeState());
  Assert.assertTrue(Iterators.size(cursor) > 0);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneV1NonExistentProperty() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder defn=newLuceneIndexDefinition(index,"lucene",ImmutableSet.of("String"));
  defn.setProperty(LuceneIndexConstants.COMPAT_MODE,IndexFormatVersion.V1.getVersion());
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","value-with-dash");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LuceneIndex(tracker,null);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictPath("/",Filter.PathRestriction.EXACT);
  filter.setFullTextConstraint(FullTextParser.parse("foo","value-with*"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,builder.getNodeState());
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
  FilterImpl filter2=createFilter(NT_BASE);
  filter2.restrictPath("/",Filter.PathRestriction.EXACT);
  filter2.setFullTextConstraint(FullTextParser.parse("baz","value-with*"));
  List<IndexPlan> plans2=queryIndex.getPlans(filter2,null,builder.getNodeState());
  Cursor cursor2=queryIndex.query(plans2.get(0),indexed);
  assertFalse(cursor2.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictPath("/",Filter.PathRestriction.EXACT);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,builder.getNodeState());
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene3() throws Exception {
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder fooProp=rules.child("nt:base").child(LuceneIndexConstants.PROP_NODE).child("foo");
  fooProp.setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  fooProp.setProperty(LuceneIndexConstants.PROP_INCLUDED_TYPE,PropertyType.TYPENAME_STRING);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  builder.child("a").setProperty("foo","bar");
  builder.child("a").child("b").setProperty("foo","bar",Type.NAME);
  builder.child("a").child("b").child("c").setProperty("foo","bar",Type.NAME);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/a",cursor.next().getPath());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneLazyCursor() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  for (int i=0; i < LuceneIndex.LUCENE_QUERY_BATCH_SIZE; i++) {
    builder.child("parent").child("child" + i).setProperty("foo","bar");
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  List<String> paths=copyOf(transform(cursor,new Function<IndexRow,String>(){
    public String apply(    IndexRow input){
      return input.getPath();
    }
  }
));
  assertTrue(!paths.isEmpty());
  assertEquals(LuceneIndex.LUCENE_QUERY_BATCH_SIZE + 1,paths.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void luceneWithCopyOnReadDirAndReindex() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo","foo2","foo3"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  NodeState indexed=HOOK.processCommit(before,builder.getNodeState(),CommitInfo.EMPTY);
  IndexCopier copier=new IndexCopier(sameThreadExecutor(),new File(getIndexDir()));
  IndexTracker tracker=new IndexTracker(copier);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo","bar");
  assertEquals(0,copier.getInvalidFileCount());
  builder=indexed.builder();
  builder.setProperty("foo2","bar2");
  indexed=HOOK.processCommit(indexed,builder.getNodeState(),CommitInfo.EMPTY);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo2","bar2");
  assertEquals(0,copier.getInvalidFileCount());
  builder=indexed.builder();
  builder.child(INDEX_DEFINITIONS_NAME).child("lucene").setProperty(REINDEX_PROPERTY_NAME,true);
  indexed=HOOK.processCommit(indexed,builder.getNodeState(),CommitInfo.EMPTY);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo2","bar2");
  assertEquals(0,copier.getInvalidFileCount());
  assertEquals(2,copier.getIndexDir("/oak:index/lucene").listFiles().length);
  builder=indexed.builder();
  builder.setProperty("foo3","bar3");
  indexed=HOOK.processCommit(indexed,builder.getNodeState(),CommitInfo.EMPTY);
  tracker.update(indexed);
  assertQuery(tracker,indexed,"foo3","bar3");
  assertEquals(0,copier.getInvalidFileCount());
  assertEquals(1,copier.getIndexDir("/oak:index/lucene").listFiles().length);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene2() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  builder.child("a").setProperty("foo","bar");
  builder.child("a").child("b").setProperty("foo","bar");
  builder.child("a").child("b").child("c").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/a/b/c",cursor.next().getPath());
  assertEquals("/a/b",cursor.next().getPath());
  assertEquals("/a",cursor.next().getPath());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LucenePropertyIndexTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void preExtractedTextProvider() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  root.commit();
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("fox is jumping","id1");
  MapBasedProvider textProvider=new MapBasedProvider();
  textProvider.write("id1","lion");
  editorProvider.getExtractedTextCache().setExtractedTextProvider(textProvider);
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"text",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertQuery("select * from [nt:base] where CONTAINS(*, 'fox ')",asList("/test/text/jcr:content"));
  assertEquals(0,textProvider.accessCount);
  testBlob.resetState();
  root.getTree(idx.getPath()).setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertQuery("select * from [nt:base] where CONTAINS(*, 'lion ')",asList("/test/text/jcr:content"));
  assertEquals(1,textProvider.accessCount);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void excludedBlobContentNotAccessed() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("<?xml version=\"1.0\" encoding=\"UTF-8\"?><msg>sky is blue</msg>");
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"zip",testBlob,"application/zip");
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertEquals(0,testBlob.readByteCount());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void preExtractedTextCache() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  root.commit();
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("fox is jumping","id1");
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"text",testBlob,"text/plain");
  root.commit();
  editorProvider.getExtractedTextCache().resetCache();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text2",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertEquals(2,testBlob.accessCount);
  testBlob.resetState();
  editorProvider.getExtractedTextCache().resetCache();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text3",testBlob,"text/plain");
  createFileNode(test,"text4",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertEquals(1,testBlob.accessCount);
  testBlob.resetState();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text5",testBlob,"text/plain");
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertEquals(0,testBlob.accessCount);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.NodeStateAnalyzerFactoryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void analyzerByComposition_CharFilter() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  NodeBuilder filters=nb.child(ANL_CHAR_FILTERS);
  filters.setProperty(OAK_CHILD_ORDER,ImmutableList.of("htmlStrip","mapping"),NAMES);
  filters.child("mapping").setProperty(ANL_NAME,"mapping");
  filters.child("htmlStrip");
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(2,analyzer.getCharFilters().length);
  assertEquals(HTMLStripCharFilterFactory.class.getName(),analyzer.getCharFilters()[0].getClassArg());
  assertEquals(MappingCharFilterFactory.class.getName(),analyzer.getCharFilters()[1].getClassArg());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerByComposition_FileResource() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  NodeBuilder filters=nb.child(ANL_FILTERS);
  NodeBuilder stop=filters.child("stop");
  stop.setProperty("words","set1.txt, set2.txt");
  createFileNode(stop,"set1.txt",newCharArraySet("foo","bar"));
  createFileNode(stop,"set2.txt",newCharArraySet("foo1","bar1"));
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(1,analyzer.getFilters().length);
  assertEquals(StopFilterFactory.class.getName(),analyzer.getFilters()[0].getClassArg());
  StopFilterFactory sff=(StopFilterFactory)analyzer.getFilters()[0];
  assertTrue(sff.getStopWords().contains("foo"));
  assertTrue(sff.getStopWords().contains("foo1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerViaReflection() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.setProperty(ANL_CLASS,TestAnalyzer.class.getName());
  TestAnalyzer analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertNotNull(analyzer);
  assertEquals(LuceneIndexConstants.VERSION,analyzer.matchVersion);
  nb.setProperty(LuceneIndexConstants.ANL_LUCENE_MATCH_VERSION,Version.LUCENE_31.toString());
  analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertEquals("Version field not picked from config",Version.LUCENE_31,analyzer.matchVersion);
  byte[] stopWords=newCharArraySet("foo","bar");
  createFileNode(nb,LuceneIndexConstants.ANL_STOPWORDS,stopWords);
  analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertTrue("Configured stopword set not used",analyzer.getStopwordSet().contains("foo"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void analyzerByComposition_Tokenizer() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(WhitespaceTokenizerFactory.class.getName(),analyzer.getTokenizer().getClassArg());
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"pathhierarchy").setProperty("delimiter","#");
  analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(PathHierarchyTokenizerFactory.class.getName(),analyzer.getTokenizer().getClassArg());
  assertEquals('#',getValue(analyzer.getTokenizer(),"delimiter"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerByComposition_TokenFilter() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  NodeBuilder filters=nb.child(ANL_FILTERS);
  filters.setProperty(OAK_CHILD_ORDER,ImmutableList.of("stop","LowerCase"),NAMES);
  filters.child("LowerCase").setProperty(ANL_NAME,"LowerCase");
  filters.child("LowerCase").setProperty(JCR_PRIMARYTYPE,"nt:unstructured");
  filters.child("stop").setProperty(ANL_LUCENE_MATCH_VERSION,Version.LUCENE_31.toString());
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(2,analyzer.getFilters().length);
  assertEquals(StopFilterFactory.class.getName(),analyzer.getFilters()[0].getClassArg());
  assertEquals(LowerCaseFilterFactory.class.getName(),analyzer.getFilters()[1].getClassArg());
  assertTrue(analyzer.getFilters()[0].isExplicitLuceneMatchVersion());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeStateResourceLoader() throws Exception {
  byte[] testData="hello".getBytes();
  NodeBuilder nb=EMPTY_NODE.builder();
  createFileNode(nb,"foo",testData);
  NodeStateResourceLoader loader=new NodeStateResourceLoader(nb.getNodeState(),new ClasspathResourceLoader());
  assertArrayEquals(testData,IOUtils.toByteArray(loader.openResource("foo")));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeStateAsMap() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.setProperty("a","a");
  nb.setProperty("b",1);
  nb.setProperty(JcrConstants.JCR_PRIMARYTYPE,"nt:base");
  nb.setProperty(":hiddenProp","hiddenValue");
  Map<String,String> result=factory.convertNodeState(nb.getNodeState());
  assertEquals("a",result.get("a"));
  assertEquals("1",result.get("b"));
  assertNull(result.get(JcrConstants.JCR_PRIMARYTYPE));
  assertNull(result.get(":hiddenProp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.OakDirectoryTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOverflow() throws Exception {
  Directory dir=createDir(builder,false);
  NodeBuilder file=builder.child(INDEX_DATA_CHILD_NAME).child("test.txt");
  int blobSize=32768;
  int dataSize=90844;
  file.setProperty(OakDirectory.PROP_BLOB_SIZE,blobSize);
  List<? super Blob> blobs=new ArrayList<Blob>(dataSize);
  for (int i=0; i < dataSize; i++) {
    blobs.add(new ArrayBasedBlob(new byte[0]));
  }
  file.setProperty(PropertyStates.createProperty("jcr:data",blobs,Type.BINARIES));
  IndexInput input=dir.openInput("test.txt",IOContext.DEFAULT);
  assertEquals((long)blobSize * (dataSize - 1),input.length());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void saveListing() throws Exception {
  builder.setProperty(LuceneIndexConstants.SAVE_DIR_LISTING,true);
  Directory dir=createDir(builder,false);
  Set<String> fileNames=newHashSet();
  for (int i=0; i < 10; i++) {
    String fileName="foo" + i;
    createFile(dir,fileName);
    fileNames.add(fileName);
  }
  dir.close();
  dir=createDir(builder,true);
  assertEquals(fileNames,newHashSet(dir.listAll()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void readOnlyDirectory() throws Exception {
  Directory dir=new OakDirectory(new ReadOnlyBuilder(builder.getNodeState()),new IndexDefinition(root,builder.getNodeState()),true);
  assertEquals(0,dir.listAll().length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void largeFile() throws Exception {
  FileStore store=FileStore.newFileStore(tempFolder.getRoot()).withMemoryMapping(false).withBlobStore(new BlackHoleBlobStore()).create();
  SegmentNodeStore nodeStore=SegmentNodeStore.newSegmentNodeStore(store).create();
  IndexDefinition defn=new IndexDefinition(INITIAL_CONTENT,EmptyNodeState.EMPTY_NODE);
  Directory directory=new OakDirectory(nodeStore.getRoot().builder(),defn,false);
  long expectedSize=ONE_GB * 2 + ONE_MB;
  String fileName="test";
  writeFile(directory,fileName,expectedSize);
  assertEquals(expectedSize,directory.fileLength(fileName));
  IndexInput input=directory.openInput(fileName,IOContext.DEFAULT);
  readInputToEnd(expectedSize,input);
  store.close();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompatibility() throws Exception {
  builder.setProperty(LuceneIndexConstants.BLOB_SIZE,OakDirectory.DEFAULT_BLOB_SIZE);
  Directory dir=createDir(builder,false);
  byte[] data=assertWrites(dir,OakDirectory.DEFAULT_BLOB_SIZE);
  NodeBuilder testNode=builder.child(INDEX_DATA_CHILD_NAME).child("test");
  testNode.removeProperty(PROP_BLOB_SIZE);
  IndexInput i=dir.openInput("test",IOContext.DEFAULT);
  assertEquals(fileSize,i.length());
  byte[] result=new byte[fileSize];
  i.readBytes(result,0,result.length);
  assertTrue(Arrays.equals(data,result));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.util.FacetHelperTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetFacetsConfig() throws Exception {
  FacetsConfig facetsConfig=FacetHelper.getFacetsConfig(root.builder());
  assertNotNull(facetsConfig);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.util.NodeStateFacetsConfigTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultivaluedDimConfig() throws Exception {
  NodeStateFacetsConfig nodeStateFacetsConfig=new NodeStateFacetsConfig(builder);
  String dimension="foo";
  nodeStateFacetsConfig.setMultiValued(dimension,true);
  FacetsConfig.DimConfig dimConfig=nodeStateFacetsConfig.getDimConfig(dimension);
  assertNotNull(dimConfig);
  assertTrue(dimConfig.multiValued);
  NodeStateFacetsConfig nodeStateFacetsConfig2=new NodeStateFacetsConfig(builder);
  FacetsConfig.DimConfig dimConfig2=nodeStateFacetsConfig2.getDimConfig(dimension);
  assertNotNull(dimConfig2);
  assertTrue(dimConfig2.multiValued);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.nodetype.NodeTypeIndexTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nodeType() throws Exception {
  NodeBuilder root=store.getRoot().builder();
  root.getChildNode("rep:security").remove();
  root.getChildNode("oak:index").getChildNode("nodetype").setProperty("entryCount",-1);
  addFolder(root,"folder-1");
  addFolder(root,"folder-2");
  addFile(root,"file-1");
  store.merge(root,new EditorHook(new IndexUpdateProvider(new PropertyIndexEditorProvider())),CommitInfo.EMPTY);
  NodeState rootState=store.getRoot();
  NodeTypeIndex index=new NodeTypeIndex();
  FilterImpl filter;
  filter=createFilter(rootState,JcrConstants.NT_FOLDER);
  assertEquals(6.0,index.getCost(filter,rootState),0.0);
  checkCursor(index.query(filter,rootState),"/folder-1","/folder-2");
  filter=createFilter(rootState,JcrConstants.NT_FILE);
  assertEquals(5.0,index.getCost(filter,rootState),0.0);
  checkCursor(index.query(filter,rootState),"/file-1");
  filter=createFilter(rootState,JcrConstants.NT_HIERARCHYNODE);
  assertEquals(7.0,index.getCost(filter,rootState),0.0);
  checkCursor(index.query(filter,rootState),"/folder-1","/folder-2","/file-1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.AsyncPropertyIndexTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsyncPropertyLookup() throws Exception {
  NodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder def=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,of("foo"),null);
  def.setProperty(REINDEX_ASYNC_PROPERTY_NAME,true);
  builder.child("a").setProperty("foo","abc");
  builder.child("b").setProperty("foo",Arrays.asList("abc","def"),STRINGS);
  NodeState head=store.merge(builder,hook,EMPTY);
  FilterImpl f=createFilter(head,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(head);
  try {
    assertEquals(of(),find(lookup,"foo","abc",f));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
  AsyncIndexUpdate async=new AsyncIndexUpdate(ASYNC_REINDEX_VALUE,store,provider,true);
  async.run();
  assertEquals(ASYNC_REINDEX_VALUE,store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("foo").getString(ASYNC_PROPERTY_NAME));
  async.run();
  assertEquals(null,store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("foo").getString(ASYNC_PROPERTY_NAME));
  builder=store.getRoot().builder();
  builder.child("c").setProperty("foo","def");
  head=store.merge(builder,hook,EMPTY);
  f=createFilter(head,NT_BASE);
  lookup=new PropertyIndexLookup(head);
  assertEquals(ImmutableSet.of("b","c"),find(lookup,"foo","def",f));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.OrderedPropertyIndexEditorProviderTest </h4><pre class="type-9 type-7 type-6 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void withIndexMultipleNodes() throws RepositoryException, CommitFailedException {
  final int threshold=5;
  final int nodes=16;
  final int traces=nodes / threshold;
  OrderedPropertyIndexEditorProvider.setThreshold(threshold);
  final List<String> expected=Collections.nCopies(traces,OrderedIndex.DEPRECATION_MESSAGE);
  NodeBuilder root=InitialContent.INITIAL_CONTENT.builder();
  createIndexDef(root);
  custom.starting();
  for (int i=0; i < nodes; i++) {
    NodeState before=root.getNodeState();
    root.child("n" + i).setProperty(indexedProperty,"dead" + i);
    NodeState after=root.getNodeState();
    root=hook.processCommit(before,after,CommitInfo.EMPTY).builder();
  }
  assertThat(custom.getLogs(),is(expected));
  custom.finished();
  assertFalse(root.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode(indexName).getChildNode(INDEX_CONTENT_NODE_NAME).exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void withIndexDefSingleNode() throws RepositoryException, CommitFailedException {
  NodeBuilder root=InitialContent.INITIAL_CONTENT.builder();
  createIndexDef(root);
  NodeState before=root.getNodeState();
  root.child("n1").setProperty(indexedProperty,"dead");
  NodeState after=root.getNodeState();
  custom.starting();
  root=hook.processCommit(before,after,CommitInfo.EMPTY).builder();
  assertEquals(1,custom.getLogs().size());
  assertThat(custom.getLogs(),hasItem(OrderedIndex.DEPRECATION_MESSAGE));
  custom.finished();
  NodeBuilder b=root.getChildNode(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE).getChildNode(indexName).getChildNode(IndexConstants.INDEX_CONTENT_NODE_NAME);
  assertFalse("nothing should have been touched under the actual index",b.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.OrderedPropertyIndexProviderTest </h4><pre class="type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleQueryRun(){
  custom.starting();
  executeQuery("SELECT * FROM [oak:Unstructured]",SQL2);
  List<String> logs=custom.getLogs();
  assertEquals(1,logs.size());
  assertThat(logs,hasItem(OrderedIndex.DEPRECATION_MESSAGE));
  custom.finished();
}

</code></pre>

<br>
<pre class="type-9 type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void multipleQueryRuns(){
  final int executions=16;
  final int trackEvery=5;
  final int numTraces=executions / trackEvery;
  OrderedPropertyIndexProvider.setThreshold(trackEvery);
  List<String> expectedLogs=Collections.nCopies(numTraces,OrderedIndex.DEPRECATION_MESSAGE);
  custom.starting();
  for (int i=0; i < executions; i++) {
    executeQuery("SELECT * FROM [oak:Unstructured]",SQL2);
  }
  assertThat(custom.getLogs(),is(expectedLogs));
  custom.finished();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void costMaxEstimation() throws Exception {
  NodeState root=EmptyNodeState.EMPTY_NODE;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  int nodes=101;
  int levels=12;
  NodeBuilder data=builder;
  for (int i=0; i < levels; i++) {
    data=data.child("l" + i);
  }
  for (int i=0; i < nodes; i++) {
    NodeBuilder c=data.child("c_" + i);
    c.setProperty("foo","azerty");
  }
  for (int i=0; i < 10000; i++) {
    data.child("cx_" + i);
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  double cost=lookup.getCost(f,"foo",PropertyValues.newString("azerty"));
  double traversal=new TraversingIndex().getCost(f,indexed);
  assertTrue("Estimated cost for " + nodes + " nodes should not be higher than traversal ("+ cost+ " < "+ traversal+ ")",cost < traversal);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPathAwarePropertyLookup() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc");
  builder.child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictPath("/a",Filter.PathRestriction.ALL_CHILDREN);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a"),find(lookup,"foo","abc",f));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPathIncludeExclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a/b"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("a").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("abc"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("test/a"),find(lookup,"foo","abc",f));
  PropertyIndexPlan plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test/a/x");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY != plan.getCost());
  f.setPath("/test/a/b");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test/a");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void costEstimation() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty("entryCount",-1);
  NodeState before=builder.getNodeState();
  for (int i=0; i < MANY; i++) {
    builder.child("n" + i).setProperty("foo","x" + i % 20);
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  double cost;
  cost=lookup.getCost(f,"foo",PropertyValues.newString("x1"));
  assertTrue("cost: " + cost,cost >= 6.5 && cost <= 7.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2")));
  assertTrue("cost: " + cost,cost >= 11.5 && cost <= 12.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2","x3","x4","x5")));
  assertTrue("cost: " + cost,cost >= 26.5 && cost <= 27.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2","x3","x4","x5","x6","x7","x8","x9","x0")));
  assertTrue("cost: " + cost,cost >= 51.5 && cost <= 52.5);
  cost=lookup.getCost(f,"foo",null);
  assertTrue("cost: " + cost,cost >= MANY);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomConfigPropertyLookup() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"fooIndex",true,false,ImmutableSet.of("foo","extrafoo"),null);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc").setProperty("extrafoo","pqr");
  builder.child("b").setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  for (int i=0; i < MANY; i++) {
    builder.child("n" + i).setProperty("foo","xyz");
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  assertEquals(MANY,find(lookup,"foo","xyz",f).size());
  assertEquals(ImmutableSet.of("a"),find(lookup,"extrafoo","pqr",f));
  try {
    assertEquals(ImmutableSet.of(),find(lookup,"pqr","foo",f));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPathInclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("test/a"),find(lookup,"foo","abc",f));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyLookup() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty("entryCount",-1);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc");
  builder.child("b").setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  for (int i=0; i < MANY; i++) {
    builder.child("n" + i).setProperty("foo","xyz");
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  assertEquals(MANY,find(lookup,"foo","xyz",f).size());
  assertEquals(MANY + 2,find(lookup,"foo",null,f).size());
  double cost;
  cost=lookup.getCost(f,"foo",PropertyValues.newString("xyz"));
  assertTrue("cost: " + cost,cost >= MANY);
  cost=lookup.getCost(f,"foo",null);
  assertTrue("cost: " + cost,cost >= MANY);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-666">OAK-666:
     *      Property2Index: node type is used when indexing, but ignored when
     *      querying</a>
 */
@Test public void testCustomConfigNodeType() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  createIndexDefinition(index,"fooIndex",true,false,ImmutableSet.of("foo","extrafoo"),ImmutableSet.of(NT_UNSTRUCTURED));
  createIndexDefinition(index,"fooIndexFile",true,false,ImmutableSet.of("foo"),ImmutableSet.of(NT_FILE));
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,Type.NAME).setProperty("foo","abc");
  builder.child("b").setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,Type.NAME).setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_UNSTRUCTURED);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  try {
    assertEquals(ImmutableSet.of(),find(lookup,"pqr","foo",f));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPathExclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("abc"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("test/b"),find(lookup,"foo","abc",f));
  PropertyIndexPlan plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test2");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY != plan.getCost());
  f.setPath("/test");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-666">OAK-666:
     *      Property2Index: node type is used when indexing, but ignored when
     *      querying</a>
 */
@Test public void testCustomConfigNodeTypeFallback() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  createIndexDefinition(index,"fooIndex",true,false,ImmutableSet.of("foo","extrafoo"),null);
  createIndexDefinition(index,"fooIndexFile",true,false,ImmutableSet.of("foo"),ImmutableSet.of(NT_FILE));
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,Type.NAME).setProperty("foo","abc");
  builder.child("b").setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,Type.NAME).setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(after,NT_UNSTRUCTURED);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  try {
    assertEquals(ImmutableSet.of(),find(lookup,"pqr","foo",f));
    fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This is essentially same test as {@link #costEstimation()} with one difference that it uses
 * path constraint in query and creates similar trees under 2 branches {@code path1} and {@code path2}.
 * The cost estimation is then verified to be same as that in {@code costEstimation} for query under {@code path1}
 * @throws Exception
 */
@Test public void pathBasedCostEstimation() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty("entryCount",-1);
  builder.setProperty(COUNT_PROPERTY_NAME,(long)MANY * 2,Type.LONG);
  NodeState before=builder.getNodeState();
  NodeBuilder path1=builder.child("path1");
  NodeBuilder path2=builder.child("path2");
  for (int i=0; i < MANY; i++) {
    path1.child("n" + i).setProperty("foo","x" + i % 20);
    path2.child("n" + i).setProperty("foo","x" + i % 20);
  }
  path1.setProperty(COUNT_PROPERTY_NAME,(long)MANY,Type.LONG);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictPath("/path1",Filter.PathRestriction.ALL_CHILDREN);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  double cost;
  cost=lookup.getCost(f,"foo",PropertyValues.newString("x1"));
  assertTrue("cost: " + cost,cost >= 7.5 && cost <= 8.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2")));
  assertTrue("cost: " + cost,cost >= 14.5 && cost <= 15.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2","x3","x4","x5")));
  assertTrue("cost: " + cost,cost >= 34.5 && cost <= 35.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2","x3","x4","x5","x6","x7","x8","x9","x0")));
  assertTrue("cost: " + cost,cost >= 81.5 && cost <= 82.5);
  cost=lookup.getCost(f,"foo",null);
  assertTrue("cost: " + cost,cost >= MANY);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPathMismatch() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a/b"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("a").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  PropertyIndexPlan plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.strategy.ContentMirrorStoreStrategyTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUnique() throws CommitFailedException {
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeState root=EMPTY_NODE;
  NodeBuilder indexMeta=root.builder();
  NodeBuilder index=indexMeta.child(INDEX_CONTENT_NODE_NAME);
  store.update(index,"a",null,null,EMPTY,KEY);
  store.update(index,"b",null,null,EMPTY,KEY);
  Assert.assertTrue("ContentMirrorStoreStrategy should guarantee uniqueness on insert",store.count(root,indexMeta.getNodeState(),Collections.singleton("key"),2) > 1);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIndexCountersUsageWithPathRestriction(){
  final String subPathName="sub-path";
  final int filteredNodeFactor=2;
  final long repoTreeApproxNodeCount=50000;
  final long repoSubPathApproxNodeCount=repoTreeApproxNodeCount / filteredNodeFactor;
  final FilterImpl filter=new FilterImpl();
  filter.restrictPath("/" + subPathName,Filter.PathRestriction.ALL_CHILDREN);
  final long approxNodeCount=100;
  final long approxKeyCount=50;
  final long entryCount=60 * DEFAULT_RESOLUTION;
  final long keyCount=150;
  final int maxTraversal=200;
  final String keyValue=KEY.iterator().next();
  final String approxPropName=COUNT_PROPERTY_PREFIX + "gen_uuid";
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.setProperty(COUNT_PROPERTY_NAME,repoTreeApproxNodeCount,Type.LONG);
  NodeBuilder subPath=rootBuilder.child(subPathName);
  subPath.setProperty(COUNT_PROPERTY_NAME,repoSubPathApproxNodeCount,Type.LONG);
  NodeState root=rootBuilder.getNodeState();
  NodeBuilder indexMeta=rootBuilder.child("propIndex");
  NodeBuilder index=indexMeta.child(INDEX_CONTENT_NODE_NAME);
  NodeBuilder key=index.child(keyValue);
  index.setProperty(approxPropName,approxNodeCount,Type.LONG);
  assertInRange("Approximate count not used for is-not-null query",approxNodeCount,filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),null,maxTraversal));
  key.setProperty(approxPropName,approxKeyCount,Type.LONG);
  assertInRange("Approximate count not used for key=value query",approxKeyCount,filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(ENTRY_COUNT_PROPERTY_NAME,entryCount,Type.LONG);
  assertInRange("Entry count not used even when present for is-not-null query",entryCount,filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),null,maxTraversal));
  Assert.assertTrue("Rough key count not considered for key=value query",entryCount > filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(KEY_COUNT_PROPERTY_NAME,keyCount,Type.LONG);
  Assert.assertTrue("Key count not considered for key=value query",entryCount > filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),KEY,maxTraversal));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * <p>
 * Tests the index pruning mechanism
 * </p>
 * <ul>
 * <li>
 * adds a few levels of nodes, nodes with an even index will have the
 * 'match' property set</li>
 * <li>
 * pruning in this case means that whatever path that doesn't have a 'match'
 * property is considered dead weight and should be removed from the index</li>
 * </ul>
 */
@Test public void testIndexPruning(){
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeState root=EMPTY_NODE;
  NodeBuilder index=root.builder();
  for (  String path : asList("/","a/b/c","a/b/d","b","d/e","d/e/f")) {
    store.update(index,path,null,null,EMPTY,KEY);
  }
  checkPath(index,"key","",true);
  checkPath(index,"key","a/b/c",true);
  checkPath(index,"key","a/b/d",true);
  checkPath(index,"key","b",true);
  checkPath(index,"key","d/e",true);
  checkPath(index,"key","d/e/f",true);
  store.update(index,"/",null,null,KEY,EMPTY);
  checkPath(index,"key","d/e/f",true);
  store.update(index,"d/e",null,null,KEY,EMPTY);
  checkPath(index,"key","d/e/f",true);
  store.update(index,"d/e/f",null,null,KEY,EMPTY);
  checkNotPath(index,"key","d");
  store.update(index,"a/b/d",null,null,KEY,EMPTY);
  store.update(index,"a/b",null,null,KEY,EMPTY);
  checkPath(index,"key","a/b/c",true);
  store.update(index,"",null,null,EMPTY,KEY);
  store.update(index,"d/e/f",null,null,KEY,EMPTY);
  store.update(index,"b",null,null,KEY,EMPTY);
  store.update(index,"a/b/c",null,null,KEY,EMPTY);
  store.update(index,"",null,null,KEY,EMPTY);
  Assert.assertEquals(0,index.getChildNodeCount(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIndexCountersUsageWithoutPathRestriction(){
  final long approxNodeCount=50;
  final long approxKeyCount=25;
  final long entryCount=30 * DEFAULT_RESOLUTION;
  final long keyCount=75;
  final int maxTraversal=200;
  final String keyValue=KEY.iterator().next();
  final String approxPropName=COUNT_PROPERTY_PREFIX + "gen_uuid";
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeState root=EMPTY_NODE;
  NodeBuilder indexMeta=root.builder();
  NodeBuilder index=indexMeta.child(INDEX_CONTENT_NODE_NAME);
  NodeBuilder key=index.child(keyValue);
  index.setProperty(approxPropName,approxNodeCount,Type.LONG);
  Assert.assertEquals("Approximate count not used for is-not-null query",approxNodeCount,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
  key.setProperty(approxPropName,approxKeyCount,Type.LONG);
  Assert.assertEquals("Approximate count not used for key=value query",approxKeyCount,store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(ENTRY_COUNT_PROPERTY_NAME,entryCount,Type.LONG);
  Assert.assertEquals("Entry count not used even when present for is-not-null query",entryCount,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
  Assert.assertTrue("Rough key count not considered for key=value query",entryCount > store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(KEY_COUNT_PROPERTY_NAME,keyCount,Type.LONG);
  Assert.assertTrue("Key count not considered for key=value query",entryCount > store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(ENTRY_COUNT_PROPERTY_NAME,(long)-1,Type.LONG);
  Assert.assertEquals("Entry count not used even when present for is-not-null query",0,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.configuration.SolrServerConfigurationTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCreateRemoteServerFromConfig() throws Exception {
  SolrServerConfiguration<RemoteSolrServerProvider> remoteSolrServerProviderSolrServerConfiguration=new RemoteSolrServerConfiguration(null,null,1,1,null);
  RemoteSolrServerProvider remoteSolrServerProvider=remoteSolrServerProviderSolrServerConfiguration.getProvider();
  assertNotNull(remoteSolrServerProvider);
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCreteEmbeddedServerFromConfig() throws Exception {
  SolrServerConfiguration<EmbeddedSolrServerProvider> embeddedSolrServerSolrServerConfiguration=new EmbeddedSolrServerConfiguration(null,null);
  EmbeddedSolrServerProvider embeddedSolrServerProvider=embeddedSolrServerSolrServerConfiguration.getProvider();
  assertNotNull(embeddedSolrServerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.configuration.nodestate.OakSolrNodeStateConfigurationTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testExistingPath() throws Exception {
  NodeState idxDef=store.getRoot().getChildNode("oak:index").getChildNode("solrIdx");
  OakSolrNodeStateConfiguration nodeStateConfiguration=new OakSolrNodeStateConfiguration(idxDef);
  assertNotNull(nodeStateConfiguration.getCatchAllField());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.index.SolrCommitHookIT </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveNode() throws Exception {
  Root r=createRoot();
  r.getTree("/").addChild("testRemoveNode").setProperty("foo","bar");
  r.commit();
  SolrQuery query=new SolrQuery();
  query.setQuery("path_exact:\\/testRemoveNode");
  assertTrue("item with id:testRemoveNode was not found in the index",server.query(query).getResults().size() > 0);
  r.getTree("/").getChild("testRemoveNode").remove();
  r.commit();
  assertTrue("item with id:testRemoveNode was found in the index",server.query(query).getResults().size() == 0);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddSomeNodes() throws Exception {
  Root r=createRoot();
  r.getTree("/").addChild("a").addChild("b").addChild("doc1").setProperty("text","hit that hot hat tattoo");
  r.getTree("/").getChild("a").addChild("c").addChild("doc2").setProperty("text","it hits hot hats");
  r.getTree("/").getChild("a").getChild("b").addChild("doc3").setProperty("text","tattoos hate hot hits");
  r.getTree("/").getChild("a").getChild("b").addChild("doc4").setProperty("text","hats tattoos hit hot");
  r.commit();
  SolrQuery query=new SolrQuery();
  query.setQuery("*:*");
  QueryResponse queryResponse=server.query(query);
  assertTrue("no documents were indexed",queryResponse.getResults().size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.index.SolrIndexEditorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIndexedProperties() throws Exception {
  SolrServer solrServer=TestUtils.createSolrServer();
  OakSolrConfiguration configuration=TestUtils.getTestConfiguration();
  IndexUpdateCallback callback=mock(IndexUpdateCallback.class);
  SolrIndexEditor solrIndexEditor=new SolrIndexEditor(solrServer,configuration,callback);
  NodeState before=mock(NodeState.class);
  NodeState after=mock(NodeState.class);
  Iterable properties=new Iterable<PropertyState>(){
    @Override public Iterator<PropertyState> iterator(){
      return Arrays.asList(PropertyStates.createProperty("foo1","bar")).iterator();
    }
  }
;
  when(after.getProperties()).thenReturn(properties);
  solrIndexEditor.leave(before,after);
  QueryResponse queryResponse=solrServer.query(new SolrQuery("foo1:*"));
  assertEquals(1,queryResponse.getResults().getNumFound());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIgnoredPropertiesNotIndexed() throws Exception {
  NodeBuilder builder=mock(NodeBuilder.class);
  SolrServer solrServer=TestUtils.createSolrServer();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Nonnull @Override public Collection<String> getIgnoredProperties(){
      return Arrays.asList("foo2");
    }
    @Nonnull @Override public CommitPolicy getCommitPolicy(){
      return CommitPolicy.HARD;
    }
  }
;
  IndexUpdateCallback callback=mock(IndexUpdateCallback.class);
  SolrIndexEditor solrIndexEditor=new SolrIndexEditor(solrServer,configuration,callback);
  NodeState before=mock(NodeState.class);
  NodeState after=mock(NodeState.class);
  Iterable properties=new Iterable<PropertyState>(){
    @Override public Iterator<PropertyState> iterator(){
      return Arrays.asList(PropertyStates.createProperty("foo2","bar")).iterator();
    }
  }
;
  when(after.getProperties()).thenReturn(properties);
  solrIndexEditor.leave(before,after);
  QueryResponse queryResponse=solrServer.query(new SolrQuery("foo2:*"));
  assertEquals(0,queryResponse.getResults().getNumFound());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.index.SolrIndexHookIT </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleNodeCreation() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("oak:index").child("solr").setProperty(JCR_PRIMARYTYPE,"oak:QueryIndexDefinition").setProperty("type","solr");
  NodeState before=builder.getNodeState();
  builder.child("newnode").setProperty("prop","val");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  QueryIndex queryIndex=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictPath("/newnode",Filter.PathRestriction.EXACT);
  filter.restrictProperty("prop",Operator.EQUAL,PropertyValues.newString("val"));
  Cursor cursor=queryIndex.query(filter,indexed);
  assertNotNull(cursor);
  assertTrue("no results found",cursor.hasNext());
  IndexRow next=cursor.next();
  assertNotNull("first returned item should not be null",next);
  assertEquals("/newnode",next.getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyAddition() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("oak:index").child("solr").setProperty(JCR_PRIMARYTYPE,"oak:QueryIndexDefinition").setProperty("type","solr");
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  QueryIndex queryIndex=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  Cursor cursor=queryIndex.query(filter,indexed);
  assertNotNull(cursor);
  assertTrue("no results found",cursor.hasNext());
  IndexRow next=cursor.next();
  assertNotNull("first returned item should not be null",next);
  assertEquals("/test",next.getPath());
  assertNotNull(next.getValue("foo"));
  assertEquals(PropertyValues.newString("[bar]"),next.getValue("foo"));
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.FilterQueryParserTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCollapseJcrContentNodes() throws Exception {
  String query="select [jcr:path], [jcr:score], * from [nt:hierarchy] as a where isdescendantnode(a, '/')";
  Filter filter=mock(Filter.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean collapseJcrContentNodes(){
      return true;
    }
  }
;
  when(filter.getQueryStatement()).thenReturn(query);
  SolrQuery solrQuery=FilterQueryParser.getQuery(filter,null,configuration);
  assertNotNull(solrQuery);
  String[] filterQueries=solrQuery.getFilterQueries();
  assertTrue(Arrays.asList(filterQueries).contains("{!collapse field=" + configuration.getCollapsedPathField() + " min="+ configuration.getPathDepthField()+ " hint=top_fc nullPolicy=expand}"));
  assertEquals("*:*",solrQuery.get("q"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAllChildrenQueryParsing() throws Exception {
  String query="select [jcr:path], [jcr:score], * from [nt:hierarchy] as a where isdescendantnode(a, '/')";
  Filter filter=mock(Filter.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPathRestrictions(){
      return true;
    }
  }
;
  when(filter.getQueryStatement()).thenReturn(query);
  Filter.PathRestriction pathRestriction=Filter.PathRestriction.ALL_CHILDREN;
  when(filter.getPathRestriction()).thenReturn(pathRestriction);
  when(filter.getPath()).thenReturn("/");
  SolrQuery solrQuery=FilterQueryParser.getQuery(filter,null,configuration);
  assertNotNull(solrQuery);
  String[] filterQueries=solrQuery.getFilterQueries();
  assertTrue(Arrays.asList(filterQueries).contains(configuration.getFieldForPathRestriction(pathRestriction) + ":\\/"));
  assertEquals("*:*",solrQuery.get("q"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.LMSEstimatorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEstimate() throws Exception {
  LMSEstimator lmsEstimator=new LMSEstimator();
  Filter filter=mock(Filter.class);
  long estimate=lmsEstimator.estimate(filter);
  assertEquals(1l,estimate);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleUpdates() throws Exception {
  LMSEstimator lmsEstimator=new LMSEstimator();
  Filter filter=mock(Filter.class);
  FullTextExpression fte=new FullTextTerm("foo","bar",false,false,"");
  when(filter.getFullTextConstraint()).thenReturn(fte);
  SolrDocumentList docs=new SolrDocumentList();
  lmsEstimator.update(filter,docs);
  long actualCount=10;
  docs.setNumFound(actualCount);
  long estimate=lmsEstimator.estimate(filter);
  long diff=actualCount - estimate;
  lmsEstimator.update(filter,docs);
  long estimate2=lmsEstimator.estimate(filter);
  long diff2=actualCount - estimate2;
  assertTrue(diff2 < diff);
  lmsEstimator.update(filter,docs);
  long estimate3=lmsEstimator.estimate(filter);
  assertEquals(estimate3,estimate2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.SolrQueryIndexTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCostWithPropertyRestrictions() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration();
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyAndPathRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPathRestrictions(){
      return true;
    }
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where isdescendantnode(a, '/test')",new QueryEngineSettings());
  filter.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(5,cost,0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryOnIgnoredExistingProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=TestUtils.createSolrServer();
  SolrInputDocument document=new SolrInputDocument();
  document.addField("path_exact","/a/b");
  document.addField("name","hello");
  solrServer.add(document);
  solrServer.commit();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getIgnoredProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  String plan=solrQueryIndex.getPlan(filter,root);
  assertNotNull(plan);
  assertTrue(plan.contains("q=*%3A*"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSize() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  String sqlQuery="select [jcr:path], [jcr:score] from [nt:base] as a where" + " contains([jcr:content/*], 'founded')";
  SolrServer solrServer=TestUtils.createSolrServer();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,sqlQuery,new QueryEngineSettings());
  Cursor cursor=solrQueryIndex.query(filter,root);
  assertNotNull(cursor);
  long sizeExact=cursor.getSize(Result.SizePrecision.EXACT,100000);
  long sizeApprox=cursor.getSize(Result.SizePrecision.APPROXIMATION,100000);
  long sizeFastApprox=cursor.getSize(Result.SizePrecision.FAST_APPROXIMATION,100000);
  assertTrue(Math.abs(sizeExact - sizeApprox) < 10);
  assertTrue(Math.abs(sizeExact - sizeFastApprox) > 10000);
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testUnion() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  String sqlQuery="select [jcr:path], [jcr:score], [rep:excerpt] from [nt:hierarchyNode] as a where" + " isdescendantnode(a, '/content') and contains([jcr:content/*], 'founded') union select [jcr:path]," + " [jcr:score], [rep:excerpt] from [nt:hierarchyNode] as a where isdescendantnode(a, '/content') and "+ "contains([jcr:content/jcr:title], 'founded') union select [jcr:path], [jcr:score], [rep:excerpt]"+ " from [nt:hierarchyNode] as a where isdescendantnode(a, '/content') and "+ "contains([jcr:content/jcr:description], 'founded') order by [jcr:score] desc";
  SolrServer solrServer=TestUtils.createSolrServer();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,sqlQuery,new QueryEngineSettings());
  Cursor cursor=solrQueryIndex.query(filter,root);
  assertNotNull(cursor);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryOnExistingProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=TestUtils.createSolrServer();
  SolrInputDocument document=new SolrInputDocument();
  document.addField("path_exact","/a/b");
  document.addField("name","hello");
  solrServer.add(document);
  solrServer.commit();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  String plan=solrQueryIndex.getPlan(filter,root);
  assertNotNull(plan);
  assertTrue(plan.contains("q=name%3Ahello"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithOnlyPrimaryTypeRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPrimaryTypes(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where jcr:primaryType = 'nt:unstructured')",new QueryEngineSettings());
  filter.restrictProperty("jcr:primaryType",Operator.EQUAL,PropertyValues.newString("nt:unstructured"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryOnExplicitlyUsedProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=TestUtils.createSolrServer();
  SolrInputDocument document=new SolrInputDocument();
  document.addField("path_exact","/a/b");
  document.addField("name","hello");
  solrServer.add(document);
  solrServer.commit();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getUsedProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  String plan=solrQueryIndex.getPlan(filter,root);
  assertNotNull(plan);
  assertTrue(plan.contains("name%3Ahello"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyRestrictionsEnabledButPropertyIgnored() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getIgnoredProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCostWithPrimaryTypeRestrictions() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration();
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where jcr:primaryType = 'nt:unstructured')",new QueryEngineSettings());
  filter.restrictProperty("jcr:primaryType",Operator.EQUAL,PropertyValues.newString("nt:unstructured"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithOnlyPathRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPathRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where isdescendantnode(a, '/test')",new QueryEngineSettings());
  filter.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryOnPropertyNotListedInUsedProperties() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=TestUtils.createSolrServer();
  SolrInputDocument document=new SolrInputDocument();
  document.addField("path_exact","/a/b");
  document.addField("name","hello");
  solrServer.add(document);
  solrServer.commit();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getUsedProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where foo = 'bar')",new QueryEngineSettings());
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  String plan=solrQueryIndex.getPlan(filter,root);
  assertNotNull(plan);
  assertTrue(plan.contains("*%3A*"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyRestrictionsEnabledAndUsedProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getUsedProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(10,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCostWithPathRestrictions() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration();
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where isdescendantnode(a, '/test')",new QueryEngineSettings());
  filter.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultCostWithNoRestrictions() throws Exception {
  NodeState root=mock(NodeState.class);
  SelectorImpl selector=mock(SelectorImpl.class);
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration();
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"",new QueryEngineSettings());
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyRestrictionsEnabledButNotUsedProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getUsedProperties(){
      return Arrays.asList("foo");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(Double.POSITIVE_INFINITY,cost,0);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoMoreThanThreeSolrRequests() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  String sqlQuery="select [jcr:path], [jcr:score] from [nt:base] as a where" + " contains([jcr:content/*], 'founded')";
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Override public int getRows(){
      return 10;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,sqlQuery,new QueryEngineSettings());
  CountingResponse response=new CountingResponse(0);
  when(solrServer.query(any(SolrParams.class))).thenReturn(response);
  Cursor cursor=solrQueryIndex.query(filter,root);
  assertNotNull(cursor);
  while (cursor.hasNext()) {
    IndexRow row=cursor.next();
    assertNotNull(row);
  }
  assertEquals(3,response.getCounter());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyAndPrimaryTypeRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPrimaryTypes(){
      return true;
    }
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where jcr:primaryType = 'nt:unstructured')",new QueryEngineSettings());
  filter.restrictProperty("jcr:primaryType",Operator.EQUAL,PropertyValues.newString("nt:unstructured"));
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(5,cost,0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCostWithPropertyRestrictionsEnabled() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=mock(SolrServer.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  double cost=solrQueryIndex.getCost(filter,root);
  assertEquals(10,cost,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.server.EmbeddedSolrServerProviderTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmbeddedSolrServerInitialization() throws Exception {
  EmbeddedSolrServerConfiguration solrServerConfiguration=new EmbeddedSolrServerConfiguration(getClass().getResource("/solr").getFile(),"oak");
  EmbeddedSolrServerProvider embeddedSolrServerProvider=new EmbeddedSolrServerProvider(solrServerConfiguration);
  SolrServer solrServer=embeddedSolrServerProvider.getSolrServer();
  assertNotNull(solrServer);
  SolrPingResponse ping=solrServer.ping();
  assertNotNull(ping);
  assertEquals(0,ping.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.server.RemoteSolrServerProviderIT </h4><pre class="type-12 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCloudRemoteServerCreation() throws Exception {
  for (  String host : zkHosts) {
    boolean cloudServerAvailable=false;
    try {
      cloudServerAvailable=canCreateCollections(host);
    }
 catch (    Exception e) {
    }
    if (cloudServerAvailable) {
      String collection="sample_" + System.nanoTime();
      RemoteSolrServerProvider remoteSolrServerProvider=new RemoteSolrServerProvider(new RemoteSolrServerConfiguration(host,collection,2,2,null));
      SolrServer solrServer=remoteSolrServerProvider.getSolrServer();
      assertNotNull(solrServer);
      solrServer.shutdown();
      break;
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.EmptyNodeStateTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void emptyEqualsMissing(){
  NodeState empty=EmptyNodeState.EMPTY_NODE;
  NodeState missing=new ModifiedNodeState(EmptyNodeState.MISSING_NODE,new HashMap<String,PropertyState>(),new HashMap<String,MutableNodeState>());
  assertTrue(empty.exists());
  assertFalse(missing.exists());
  assertFalse(missing.equals(empty));
  assertFalse(empty.equals(missing));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void missingEqualsModified(){
  NodeState empty=new ModifiedNodeState(EmptyNodeState.EMPTY_NODE,new HashMap<String,PropertyState>(),new HashMap<String,MutableNodeState>());
  NodeState missing=EmptyNodeState.MISSING_NODE;
  assertTrue(empty.exists());
  assertFalse(missing.exists());
  assertFalse(missing.equals(empty));
  assertFalse(empty.equals(missing));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.MemoryNodeBuilderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void navigateNonExistingNode(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  NodeBuilder aBuilder=rootBuilder.getChildNode("a");
  NodeBuilder bBuilder=aBuilder.getChildNode("b");
  NodeBuilder cBuilder=bBuilder.getChildNode("c");
  assertTrue(aBuilder.exists());
  assertTrue(cBuilder.exists());
  cBuilder.setProperty("c2","c2Value");
  r=rootBuilder.getNodeState();
  a=r.getChildNode("a");
  b=a.getChildNode("b");
  c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addNewChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.setChildNode("any");
  assertTrue(x.exists());
  assertTrue(x.getNodeState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReplacedStatus3(){
  NodeBuilder x=base.builder().getChildNode("x");
  NodeBuilder q=x.getChildNode("q");
  assertFalse(q.isReplaced());
  x.setChildNode("q").setProperty("a","b");
  assertTrue(q.isReplaced());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testConnectOnAddProperty(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  assertFalse(childA.hasProperty("test"));
  childB.setProperty("test","foo");
  assertTrue(childA.hasProperty("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNewStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder n=root.child("n");
  assertTrue(n.exists());
  assertTrue(n.isNew());
  assertFalse(n.isModified());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMoveToSelf(){
  NodeBuilder rootBuilder=base.builder();
  assertFalse(rootBuilder.getChildNode("y").moveTo(rootBuilder,"y"));
  NodeState newRoot=rootBuilder.getNodeState();
  assertTrue(newRoot.hasChildNode("y"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnmodifiedEqualsBase(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  assertEquals(x.getBaseState(),x.getNodeState());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRename(){
  NodeBuilder rootBuilder=base.builder();
  assertTrue(rootBuilder.getChildNode("y").moveTo(rootBuilder,"yy"));
  NodeState newRoot=rootBuilder.getNodeState();
  assertFalse(newRoot.hasChildNode("y"));
  assertTrue(newRoot.hasChildNode("yy"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReset2(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  x.child("y");
  ((MemoryNodeBuilder)root).reset(base);
  assertTrue(root.hasChildNode("x"));
  assertFalse(x.hasChildNode("y"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addExistingChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.setChildNode("x");
  assertTrue(x.exists());
  assertTrue(x.getBaseState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void shadowNonExistingNode1(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  rootBuilder.child("a").setChildNode("b").child("c").setProperty("c2","c2Value");
  r=rootBuilder.getNodeState();
  a=r.getChildNode("a");
  b=a.getChildNode("b");
  c=b.getChildNode("c");
  assertTrue(a.exists());
  assertTrue(b.exists());
  assertTrue(c.exists());
  assertFalse(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemovedStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  root.getChildNode("x").remove();
  assertFalse(x.exists());
  assertFalse(x.isNew());
  assertFalse(x.isModified());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteOnRemoveNode(){
  for (  String name : new String[]{"x","new"}) {
    NodeBuilder root=base.builder();
    NodeBuilder child=root.child(name);
    root.getChildNode(name).remove();
    try {
      child.setProperty("q","w");
      fail();
    }
 catch (    IllegalStateException e) {
    }
    root.child(name);
    assertEquals(0,child.getChildNodeCount(1));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReset(){
  NodeBuilder root=base.builder();
  NodeBuilder child=root.child("x");
  child.child("new");
  assertTrue(child.hasChildNode("new"));
  assertTrue(root.child("x").hasChildNode("new"));
  ((MemoryNodeBuilder)root).reset(base);
  assertFalse(child.hasChildNode("new"));
  assertFalse(root.child("x").hasChildNode("new"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void existingChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.child("x");
  assertTrue(x.exists());
  assertTrue(x.getBaseState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeParent(){
  NodeBuilder x=base.builder().getChildNode("x");
  NodeBuilder y=x.setChildNode("y");
  x.remove();
  assertFalse(x.exists());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNonExistingChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder any=rootBuilder.getChildNode("any");
  assertFalse(any.getChildNode("other").exists());
  assertFalse(any.exists());
  try {
    any.setChildNode("any");
    fail();
  }
 catch (  IllegalStateException expected) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReplacedStatus2(){
  NodeBuilder x=base.builder().getChildNode("x");
  NodeBuilder q=x.getChildNode("q");
  q.remove();
  assertFalse(q.isReplaced());
  x.setChildNode("q").setProperty("a","b");
  assertTrue(q.isReplaced());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getExistingChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.getChildNode("x");
  assertTrue(x.exists());
  assertTrue(x.getNodeState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testModifiedStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  x.setProperty("p","pValue");
  assertTrue(x.exists());
  assertFalse(x.isNew());
  assertTrue(x.isModified());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMoveToDescendant(){
  NodeBuilder rootBuilder=base.builder();
  assertTrue(rootBuilder.getChildNode("x").moveTo(rootBuilder.getChildNode("x"),"xx"));
  assertFalse(rootBuilder.hasChildNode("x"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setTest(){
  Assume.assumeTrue(EMPTY_NODE.builder() instanceof MemoryNodeBuilder);
  MemoryNodeBuilder rootBuilder=(MemoryNodeBuilder)EMPTY_NODE.builder();
  assertFalse(base.equals(rootBuilder.getNodeState()));
  rootBuilder.set(base);
  assertTrue(base.equals(rootBuilder.getNodeState()));
  MemoryNodeBuilder xBuilder=(MemoryNodeBuilder)rootBuilder.getChildNode("x");
  NodeState yState=base.getChildNode("y");
  assertFalse(yState.equals(xBuilder.getNodeState()));
  xBuilder.set(yState);
  assertTrue(yState.equals(xBuilder.getNodeState()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectOnRemoveProperty(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  childB.setProperty("test","foo");
  childA.removeProperty("test");
  assertFalse(childA.hasProperty("test"));
  assertFalse(childB.hasProperty("test"));
  childA.setProperty("test","bar");
  assertEquals("bar",childA.getProperty("test").getValue(STRING));
  assertEquals("bar",childB.getProperty("test").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMove(){
  NodeBuilder rootBuilder=base.builder();
  assertTrue(rootBuilder.getChildNode("y").moveTo(rootBuilder.child("x"),"yy"));
  NodeState newRoot=rootBuilder.getNodeState();
  assertFalse(newRoot.hasChildNode("y"));
  assertTrue(newRoot.hasChildNode("x"));
  assertTrue(newRoot.getChildNode("x").hasChildNode("q"));
  assertTrue(newRoot.getChildNode("x").hasChildNode("yy"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void modifyChildNodeOfNonExistingNode(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  rootBuilder.child("a").getChildNode("b").child("c").setProperty("c2","c2Value");
  r=rootBuilder.getNodeState();
  a=r.getChildNode("a");
  b=a.getChildNode("b");
  c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testExistingStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  assertTrue(x.exists());
  assertFalse(x.isNew());
  assertFalse(x.isModified());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReplacedStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.getChildNode("x");
  x.setChildNode("new");
  assertFalse(x.isReplaced());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConnectOnUpdateProperty(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  childB.setProperty("test","foo");
  childA.setProperty("test","bar");
  assertEquals("bar",childA.getProperty("test").getValue(STRING));
  assertEquals("bar",childB.getProperty("test").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void newChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.child("any");
  assertTrue(x.exists());
  assertTrue(x.getNodeState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void setNodeTest(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.setChildNode("a",createBC(true));
  NodeState c=rootBuilder.getNodeState().getChildNode("a").getChildNode("c");
  assertTrue(c.hasProperty("c"));
  rootBuilder.child("a").child("c").setProperty("c2","c2Value");
  c=rootBuilder.getNodeState().getChildNode("a").getChildNode("c");
  assertTrue(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddRemovedNodeAgain(){
  NodeBuilder root=base.builder();
  root.getChildNode("x").remove();
  NodeBuilder x=root.child("x");
  x.child("q");
  assertTrue(x.hasChildNode("q"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void shadowNonExistingNode2(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  rootBuilder.child("a").child("b").child("c").setProperty("c2","c2Value");
  r=rootBuilder.getNodeState();
  a=r.getChildNode("a");
  b=a.getChildNode("b");
  c=b.getChildNode("c");
  assertTrue(a.exists());
  assertTrue(b.exists());
  assertTrue(c.exists());
  assertFalse(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testConnectOnAddNode(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  assertFalse(childA.hasChildNode("test"));
  assertFalse(childB.hasChildNode("test"));
  childB.child("test");
  assertTrue(childA.hasChildNode("test"));
  assertTrue(childB.hasChildNode("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void transitiveRemove(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.getChildNode("x");
  NodeBuilder q=x.getChildNode("q");
  assertTrue(x.exists());
  assertTrue(q.exists());
  root.getChildNode("x").remove();
  assertFalse(q.exists());
  assertFalse(x.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void assertion_OAK781(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  rootBuilder.child("a").child("b").child("c");
  rootBuilder=new MemoryNodeBuilder(r);
  rootBuilder.child("a").child("b").child("c");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.PropertyBuilderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromString(){
  PropertyState source=StringPropertyState.stringProperty("foo","42");
  PropertyBuilder builder=PropertyBuilder.scalar(Type.LONG);
  builder.assignFrom(source);
  assertEquals(LongPropertyState.createLongProperty("foo",42L),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromDates(){
  String date1="1970-01-01T00:00:00.000Z";
  String date2="1971-01-01T00:00:00.000Z";
  PropertyState source=MultiGenericPropertyState.dateProperty("foo",Arrays.asList(date1,date2));
  PropertyBuilder builder=PropertyBuilder.scalar(Type.DATE);
  builder.assignFrom(source);
  assertEquals(source,builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromLong(){
  PropertyState source=LongPropertyState.createLongProperty("foo",42L);
  PropertyBuilder builder=PropertyBuilder.scalar(Type.STRING);
  builder.assignFrom(source);
  assertEquals(StringPropertyState.stringProperty("foo","42"),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDateProperty(){
  PropertyBuilder builder=PropertyBuilder.array(Type.DATE);
  String date1="1970-01-01T00:00:00.000Z";
  String date2="1971-01-01T00:00:00.000Z";
  builder.setName("foo").addValue(date1).addValue(date2);
  Assert.assertEquals(MultiGenericPropertyState.dateProperty("foo",Arrays.asList(date1,date2)),builder.getPropertyState());
  builder.setScalar();
  try {
    builder.getPropertyState();
  }
 catch (  IllegalStateException expected) {
  }
  builder.removeValue(date1);
  Assert.assertEquals(GenericPropertyState.dateProperty("foo",date2),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLongProperty(){
  PropertyBuilder builder=PropertyBuilder.scalar(Type.LONG);
  builder.setName("foo").setValue(42L);
  Assert.assertEquals(LongPropertyState.createLongProperty("foo",42L),builder.getPropertyState());
  builder.setArray();
  Assert.assertEquals(MultiLongPropertyState.createLongProperty("foo",Arrays.asList(42L)),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromDate(){
  String date="1970-01-01T00:00:00.000Z";
  PropertyState source=GenericPropertyState.dateProperty("foo",date);
  PropertyBuilder builder=PropertyBuilder.scalar(Type.DATE);
  builder.assignFrom(source);
  assertEquals(source,builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromLongs(){
  PropertyState source=MultiLongPropertyState.createLongProperty("foo",Arrays.asList(1L,2L,3L));
  PropertyBuilder builder=PropertyBuilder.scalar(Type.STRING);
  builder.assignFrom(source);
  assertEquals(MultiStringPropertyState.stringProperty("foo",Arrays.asList("1","2","3")),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringProperty(){
  PropertyBuilder builder=PropertyBuilder.scalar(Type.STRING);
  builder.setName("foo").setValue("bar");
  Assert.assertEquals(StringPropertyState.stringProperty("foo","bar"),builder.getPropertyState());
  builder.setArray();
  Assert.assertEquals(MultiStringPropertyState.stringProperty("foo",Arrays.asList("bar")),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignFromStrings(){
  PropertyState source=MultiStringPropertyState.stringProperty("foo",Arrays.asList("1","2","3"));
  PropertyBuilder builder=PropertyBuilder.scalar(Type.LONG);
  builder.assignFrom(source);
  assertEquals(MultiLongPropertyState.createLongProperty("foo",Arrays.asList(1L,2L,3L)),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringsProperty(){
  PropertyBuilder builder=PropertyBuilder.array(Type.STRING);
  builder.setName("foo").addValue("one").addValue("two");
  assertEquals(MultiStringPropertyState.stringProperty("foo",Arrays.asList("one","two")),builder.getPropertyState());
  builder.setScalar();
  try {
    builder.getPropertyState();
  }
 catch (  IllegalStateException expected) {
  }
  builder.removeValue("one");
  assertEquals(StringPropertyState.stringProperty("foo","two"),builder.getPropertyState());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignInvariant(){
  PropertyState source=MultiStringPropertyState.stringProperty("source",Arrays.asList("1","2","3"));
  PropertyBuilder builder=PropertyBuilder.scalar(Type.STRING);
  builder.assignFrom(source);
  assertEquals(source,builder.getPropertyState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.PropertyStatesTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void dateValueFromDateProperty() throws RepositoryException {
  String expected=ISO8601.format(Calendar.getInstance());
  PropertyState dateProperty=PropertyStates.createProperty("date",expected,Type.DATE);
  String actual=dateProperty.getValue(Type.DATE);
  assertEquals(expected,actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.CompositeStatsTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void meter() throws Exception {
  AtomicLong simpleStats=new AtomicLong();
  Meter meter=registry.meter("test");
  CompositeStats meterStats=new CompositeStats(simpleStats,meter);
  meterStats.mark();
  assertEquals(1,simpleStats.get());
  assertEquals(1,meter.getCount());
  meterStats.mark(5);
  assertEquals(6,simpleStats.get());
  assertEquals(6,meter.getCount());
  assertTrue(meterStats.isMeter());
  assertFalse(meterStats.isTimer());
  assertFalse(meterStats.isCounter());
  assertNotNull(meterStats.getMeter());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timer() throws Exception {
  AtomicLong counter=new AtomicLong();
  Timer time=registry.timer("test");
  CompositeStats timerStats=new CompositeStats(counter,time);
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(1,time.getCount());
  assertEquals(TimeUnit.SECONDS.toMillis(100),counter.get());
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(2,timerStats.getCount());
  assertFalse(timerStats.isMeter());
  assertTrue(timerStats.isTimer());
  assertFalse(timerStats.isCounter());
  assertNotNull(timerStats.getTimer());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counter() throws Exception {
  AtomicLong simpleStats=new AtomicLong();
  Counter counter=registry.counter("test");
  CompositeStats counterStats=new CompositeStats(simpleStats,counter);
  counterStats.inc();
  assertEquals(1,simpleStats.get());
  assertEquals(1,counter.getCount());
  assertEquals(1,counterStats.getCount());
  counterStats.inc();
  counterStats.inc();
  assertEquals(3,simpleStats.get());
  counterStats.dec();
  assertEquals(2,simpleStats.get());
  assertEquals(2,counter.getCount());
  counterStats.inc(7);
  assertEquals(9,simpleStats.get());
  assertEquals(9,counter.getCount());
  counterStats.dec(5);
  assertEquals(4,simpleStats.get());
  assertEquals(4,counter.getCount());
  assertFalse(counterStats.isMeter());
  assertFalse(counterStats.isTimer());
  assertTrue(counterStats.isCounter());
  assertNotNull(counterStats.getCounter());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void histogram() throws Exception {
  Histogram histo=registry.histogram("test");
  CompositeStats histoStats=new CompositeStats(new AtomicLong(),histo);
  histoStats.update(100);
  assertEquals(1,histo.getCount());
  assertEquals(100,histo.getSnapshot().getMax());
  assertFalse(histoStats.isMeter());
  assertFalse(histoStats.isTimer());
  assertFalse(histoStats.isCounter());
  assertTrue(histoStats.isHistogram());
  assertNotNull(histoStats.getHistogram());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.MetricImplTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void meter() throws Exception {
  Meter meter=registry.meter("test");
  MeterImpl meterStats=new MeterImpl(meter);
  meterStats.mark();
  assertEquals(1,meter.getCount());
  meterStats.mark(5);
  assertEquals(6,meter.getCount());
  assertEquals(6,meterStats.getCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timerContext() throws Exception {
  VirtualClock clock=new VirtualClock();
  Timer time=new Timer(new ExponentiallyDecayingReservoir(),clock);
  TimerStats timerStats=new TimerImpl(time);
  TimerStats.Context context=timerStats.time();
  clock.tick=TimeUnit.SECONDS.toNanos(314);
  context.close();
  assertEquals(1,time.getCount());
  assertEquals(TimeUnit.SECONDS.toNanos(314),time.getSnapshot().getMax());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timer() throws Exception {
  Timer time=registry.timer("test");
  TimerImpl timerStats=new TimerImpl(time);
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(1,time.getCount());
  assertEquals(TimeUnit.SECONDS.toNanos(100),time.getSnapshot().getMax());
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(2,time.getCount());
  assertEquals(2,timerStats.getCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void counter() throws Exception {
  Counter counter=registry.counter("test");
  CounterImpl counterStats=new CounterImpl(counter);
  counterStats.inc();
  assertEquals(1,counter.getCount());
  assertEquals(1,counterStats.getCount());
  counterStats.inc();
  counterStats.inc();
  counterStats.dec();
  assertEquals(2,counter.getCount());
  counterStats.inc(7);
  assertEquals(9,counter.getCount());
  counterStats.dec(5);
  assertEquals(4,counter.getCount());
  assertEquals(4,counterStats.getCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void histogram() throws Exception {
  Histogram histo=registry.histogram("test");
  HistogramImpl histoStats=new HistogramImpl(histo);
  histoStats.update(100);
  assertEquals(1,histo.getCount());
  assertEquals(100,histo.getSnapshot().getMax());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.MetricStatisticsProviderTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counter() throws Exception {
  CounterStats counterStats=statsProvider.getCounterStats("test",StatsOptions.DEFAULT);
  assertNotNull(counterStats);
  assertNotNull(statsProvider.getRegistry().getCounters().containsKey("test"));
  assertTrue(((CompositeStats)counterStats).isCounter());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicSetup() throws Exception {
  assertEquals(1,statsProvider.getRegistry().getMeters().size());
  assertEquals(1,statsProvider.getRegistry().getTimers().size());
  assertNotNull(statsProvider.getStats());
  assertEquals(statsProvider.getRegistry().getMetrics().size(),getMetricMbeans().size());
  statsProvider.close();
  assertEquals(0,getMetricMbeans().size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noopMeter() throws Exception {
  assertInstanceOf(statsProvider.getTimer(Type.SESSION_READ_DURATION.name(),StatsOptions.TIME_SERIES_ONLY),SimpleStats.class);
  assertNotEquals(statsProvider.getMeter(Type.OBSERVATION_EVENT_COUNTER.name(),StatsOptions.TIME_SERIES_ONLY),NoopStats.INSTANCE);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void meter() throws Exception {
  MeterStats meterStats=statsProvider.getMeter("test",StatsOptions.DEFAULT);
  assertNotNull(meterStats);
  assertNotNull(statsProvider.getRegistry().getMeters().containsKey("test"));
  assertTrue(((CompositeStats)meterStats).isMeter());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void histogram() throws Exception {
  HistogramStats histoStats=statsProvider.getHistogram("test",StatsOptions.DEFAULT);
  assertNotNull(histoStats);
  assertNotNull(statsProvider.getRegistry().getHistograms().containsKey("test"));
  assertTrue(((CompositeStats)histoStats).isHistogram());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timeSeriesIntegration() throws Exception {
  MeterStats meterStats=statsProvider.getMeter(Type.SESSION_COUNT.name(),StatsOptions.DEFAULT);
  meterStats.mark(5);
  assertEquals(5,statsProvider.getRepoStats().getCounter(Type.SESSION_COUNT).get());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timer() throws Exception {
  TimerStats timerStats=statsProvider.getTimer("test",StatsOptions.DEFAULT);
  assertNotNull(timerStats);
  assertNotNull(statsProvider.getRegistry().getTimers().containsKey("test"));
  assertTrue(((CompositeStats)timerStats).isTimer());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.StatisticsProviderFactoryTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void noneMode() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),ImmutableMap.<String,Object>of("providerType","NONE"));
  assertNull(context.getService(StatisticsProvider.class));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void defaultMode() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),ImmutableMap.<String,Object>of("providerType","DEFAULT"));
  assertTrue(context.getService(StatisticsProvider.class) instanceof DefaultStatisticsProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void autoMode() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),Collections.<String,Object>emptyMap());
  assertTrue(context.getService(StatisticsProvider.class) instanceof MetricStatisticsProvider);
  assertNotNull(context.getService(MetricRegistry.class));
  MockOsgi.deactivate(service);
  assertNull(context.getService(StatisticsProvider.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.name.ReadWriteNamespaceRegistryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMappings() throws Exception {
  final ContentSession session=createContentSession();
  final Root root=session.getLatestRoot();
  NamespaceRegistry r=new ReadWriteNamespaceRegistry(root){
    @Override protected Root getWriteRoot(){
      return session.getLatestRoot();
    }
    @Override protected void refresh(){
      root.refresh();
    }
  }
;
  assertEquals("",r.getURI(""));
  assertEquals("http://www.jcp.org/jcr/1.0",r.getURI("jcr"));
  assertEquals("http://www.jcp.org/jcr/nt/1.0",r.getURI("nt"));
  assertEquals("http://www.jcp.org/jcr/mix/1.0",r.getURI("mix"));
  assertEquals("http://www.w3.org/XML/1998/namespace",r.getURI("xml"));
  assertEquals("",r.getPrefix(""));
  assertEquals("jcr",r.getPrefix("http://www.jcp.org/jcr/1.0"));
  assertEquals("nt",r.getPrefix("http://www.jcp.org/jcr/nt/1.0"));
  assertEquals("mix",r.getPrefix("http://www.jcp.org/jcr/mix/1.0"));
  assertEquals("xml",r.getPrefix("http://www.w3.org/XML/1998/namespace"));
  r.registerNamespace("p","n");
  assertEquals(r.getURI("p"),"n");
  assertEquals(r.getPrefix("n"),"p");
  r.registerNamespace("p2","n2");
  assertEquals(r.getURI("p2"),"n2");
  assertEquals(r.getPrefix("n2"),"p2");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.nodetype.TypeEditorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMandatoryPropertyWithBadRequiredType(){
  EditorHook hook=new EditorHook(new TypeEditorProvider());
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeState before=builder.getNodeState();
  NodeBuilder acl=builder.child(AccessControlConstants.REP_POLICY);
  acl.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_ACL,Type.NAME);
  NodeBuilder ace=acl.child("first");
  ace.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_GRANT_ACE,Type.NAME);
  ace.setProperty(AccessControlConstants.REP_PRINCIPAL_NAME,EveryonePrincipal.NAME);
  ace.setProperty(AccessControlConstants.REP_PRIVILEGES,ImmutableList.of(PrivilegeConstants.JCR_READ),Type.STRINGS);
  try {
    hook.processCommit(before,builder.getNodeState(),CommitInfo.EMPTY);
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(55,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.nodetype.write.InitialContentTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void noVersionStoragePrePopulated() throws Exception {
  NodeState system=InitialContent.INITIAL_CONTENT.getChildNode(JCR_SYSTEM);
  assertTrue(system.exists());
  NodeState vs=system.getChildNode(JCR_VERSIONSTORAGE);
  assertTrue(vs.exists());
  assertTrue(vs.getChildNodeCount(Integer.MAX_VALUE) == 0);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void versionStoragePrePopulated() throws Exception {
  NodeBuilder root=EMPTY_NODE.builder();
  new InitialContent().withPrePopulatedVersionStore().initialize(root);
  NodeBuilder system=root.getChildNode(JCR_SYSTEM);
  assertTrue(system.exists());
  NodeBuilder vs=system.getChildNode(JCR_VERSIONSTORAGE);
  assertTrue(vs.exists());
  assertTrue(vs.getChildNodeCount(Integer.MAX_VALUE) == 0xff);
  for (  String name : vs.getChildNodeNames()) {
    assertTrue(vs.child(name).getChildNodeCount(Integer.MAX_VALUE) == 0xff);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.CommitRateLimiterTest </h4><pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void delayCommits() throws CommitFailedException {
  limiter.setDelay(1000);
  long t0=Clock.ACCURATE.getTime();
  assertSame(AFTER,limiter.processCommit(EMPTY_NODE,AFTER,null));
  assertTrue(Clock.ACCURATE.getTime() - t0 >= 1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.NodeObserverTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").setProperty("p",42);
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertEquals(ImmutableMap.of("/m/n",ImmutableSet.of("p")),nodeObserver.changed);
  assertEquals(ImmutableMap.of("/m/n",ImmutableMap.of("extra","42")),nodeObserver.properties);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void ignoreAdd(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("a").getChildNode("b").setChildNode("new").setProperty("p","3");
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void ignoreChange(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("a").getChildNode("b").setProperty("p",42);
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void ignoreDelete(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("a").getChildNode("b").remove();
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").getChildNode("o").remove();
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertEquals(ImmutableMap.of("/m/n/o",ImmutableSet.of("q")),nodeObserver.deleted);
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").setChildNode("new").setProperty("p","3");
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertEquals(ImmutableMap.of("/m/n/new",ImmutableSet.of("p")),nodeObserver.added);
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.FilterBuilderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void anyShortcutsIncludeAll(){
  FilterBuilder builder=new FilterBuilder();
  Condition condition=builder.any(builder.path("path"),builder.includeAll(),builder.path("path"));
  assertEquals(ConstantFilter.INCLUDE_ALL,condition.createFilter(EMPTY_NODE,EMPTY_NODE));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyAllShortcuts(){
  FilterBuilder builder=new FilterBuilder();
  Condition condition=builder.all();
  assertEquals(ConstantFilter.INCLUDE_ALL,condition.createFilter(EMPTY_NODE,EMPTY_NODE));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyAnyShortcuts(){
  FilterBuilder builder=new FilterBuilder();
  Condition condition=builder.any();
  assertEquals(ConstantFilter.EXCLUDE_ALL,condition.createFilter(EMPTY_NODE,EMPTY_NODE));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void allShortcutsExcludeAll(){
  FilterBuilder builder=new FilterBuilder();
  Condition condition=builder.all(builder.path("path"),builder.excludeAll(),builder.path("path"));
  assertEquals(ConstantFilter.EXCLUDE_ALL,condition.createFilter(EMPTY_NODE,EMPTY_NODE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.GlobbingPathFilterTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * **&#47/y/z should match x/y/x/y/z
 */
@Test public void starStarGlob(){
  EventFilter rootFilter=new GlobbingPathFilter("**/y/z");
  NodeState x1=tree.getChild("x").getNodeState();
  assertFalse(rootFilter.includeAdd("x",x1));
  EventFilter x1Filter=rootFilter.create("x",x1,x1);
  assertNotNull(x1Filter);
  NodeState y1=x1.getChildNode("y");
  assertFalse(x1Filter.includeAdd("y",y1));
  EventFilter y1Filter=x1Filter.create("y",y1,y1);
  assertNotNull(y1Filter);
  NodeState x2=y1.getChildNode("x");
  assertFalse(y1Filter.includeAdd("x",x2));
  EventFilter x2Filter=y1Filter.create("x",x2,x2);
  assertNotNull(x2Filter);
  NodeState y2=x2.getChildNode("y");
  assertFalse(x2Filter.includeAdd("y",y2));
  EventFilter y2Filter=x2Filter.create("y",y2,y2);
  assertNotNull(y2Filter);
  NodeState z=y2.getChildNode("z");
  assertTrue(y2Filter.includeAdd("z",z));
  EventFilter zFilter=(y2Filter.create("z",z,z));
  assertFalse(zFilter.includeAdd("x",EMPTY_NODE));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * a/b/c should match a/b/c
 */
@Test public void literal(){
  EventFilter rootFilter=new GlobbingPathFilter("a/b/c");
  NodeState a=tree.getChild("a").getNodeState();
  assertFalse(rootFilter.includeAdd("a",a));
  EventFilter aFilter=rootFilter.create("a",a,a);
  assertNotNull(aFilter);
  NodeState b=a.getChildNode("b");
  assertFalse(aFilter.includeAdd("b",b));
  EventFilter bFilter=aFilter.create("b",b,b);
  assertNotNull(bFilter);
  NodeState c=b.getChildNode("c");
  assertTrue(bFilter.includeAdd("c",b));
  assertFalse(bFilter.includeAdd("x",b));
  assertNull(bFilter.create("c",c,c));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * **&#47r/s/t/u/v/w should match r/s/t/u/v/r/s/t/u/v/r/s/t/u/v/w
 */
@Test public void matchAtEnd(){
  EventFilter filter=new GlobbingPathFilter("**/r/s/t/u/v/w");
  ImmutableTree t=tree;
  for (  String name : elements("r/s/t/u/v/r/s/t/u/v/r/s/t/u/v")) {
    t=t.getChild(name);
    assertFalse(filter.includeAdd(name,t.getNodeState()));
    filter=filter.create(name,t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
  t=t.getChild("w");
  assertTrue(filter.includeAdd("w",t.getNodeState()));
  filter=filter.create("w",t.getNodeState(),t.getNodeState());
  assertNotNull(filter);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * ** should match every path
 */
@Test public void all(){
  EventFilter filter=new GlobbingPathFilter(STAR_STAR);
  ImmutableTree t=tree;
  for (  String name : elements("a/b/c/d")) {
    t=t.getChild(name);
    assertTrue(filter.includeAdd(name,t.getNodeState()));
    filter=filter.create(name,t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * **&#47r/s/t/u/v should match r/s/t/u/v and r/s/t/u/v/r/s/t/u/v and r/s/t/u/v/r/s/t/u/v/r/s/t/u/v
 */
@Test public void multipleMatches(){
  EventFilter filter=new GlobbingPathFilter("**/r/s/t/u/v");
  ImmutableTree t=tree;
  for (int c=0; c < 2; c++) {
    for (    String name : elements("r/s/t/u")) {
      t=t.getChild(name);
      assertFalse(filter.includeAdd(name,t.getNodeState()));
      filter=filter.create(name,t.getNodeState(),t.getNodeState());
      assertNotNull(filter);
    }
    t=t.getChild("v");
    assertTrue(filter.includeAdd("v",t.getNodeState()));
    filter=filter.create("v",t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * An empty path pattern should match no path
 */
@Test public void emptyMatchesNothing(){
  EventFilter rootFilter=new GlobbingPathFilter("");
  NodeState a=tree.getChild("a").getNodeState();
  assertFalse(rootFilter.includeAdd("a",a));
  assertNull(rootFilter.create("a",a,a));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * a/*&#47c should match a/b/c
 */
@Test public void starGlob(){
  EventFilter rootFilter=new GlobbingPathFilter("a/*/c");
  NodeState a=tree.getChild("a").getNodeState();
  assertFalse(rootFilter.includeAdd("a",a));
  EventFilter aFilter=rootFilter.create("a",a,a);
  assertNotNull(aFilter);
  NodeState b=a.getChildNode("b");
  assertFalse(aFilter.includeAdd("b",b));
  EventFilter bFilter=aFilter.create("b",b,b);
  assertNotNull(bFilter);
  NodeState c=b.getChildNode("c");
  assertTrue(bFilter.includeAdd("c",b));
  assertFalse(bFilter.includeAdd("x",b));
  assertNull(bFilter.create("c",c,c));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * r/s/t&#47** should match r/s/t and all its descendants
 */
@Test public void matchSuffix(){
  EventFilter filter=new GlobbingPathFilter("r/s/t/**");
  ImmutableTree t=tree;
  for (  String name : elements("r/s")) {
    t=t.getChild(name);
    assertFalse(filter.includeAdd(name,t.getNodeState()));
    filter=filter.create(name,t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
  for (  String name : elements("t/u/v/r/s/t/u/v/r/s/t/u/v/w")) {
    t=t.getChild(name);
    assertTrue(filter.includeAdd(name,t.getNodeState()));
    filter=filter.create(name,t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * **&#47a/b/c should match a/b/c
 */
@Test public void matchAtStart(){
  EventFilter rootFilter=new GlobbingPathFilter("**/a/b/c");
  NodeState a=tree.getChild("a").getNodeState();
  assertFalse(rootFilter.includeAdd("a",a));
  EventFilter aFilter=rootFilter.create("a",a,a);
  assertNotNull(aFilter);
  NodeState b=a.getChildNode("b");
  assertFalse(aFilter.includeAdd("b",b));
  EventFilter bFilter=aFilter.create("b",b,b);
  assertNotNull(bFilter);
  NodeState c=b.getChildNode("c");
  assertTrue(bFilter.includeAdd("c",b));
  assertFalse(bFilter.includeAdd("x",b));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.PropertyPredicateTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nonExistingProperty(){
  String name="foo";
  final String value="bar";
  PropertyPredicate p=new PropertyPredicate("any",new Predicate<PropertyState>(){
    @Override public boolean apply(    PropertyState property){
      return value.equals(property.getValue(STRING));
    }
  }
);
  assertFalse(p.apply(createWithProperty(name,value)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyMiss(){
  String name="foo";
  final String value="bar";
  PropertyPredicate p=new PropertyPredicate(name,new Predicate<PropertyState>(){
    @Override public boolean apply(    PropertyState property){
      return "baz".equals(property.getValue(STRING));
    }
  }
);
  assertFalse(p.apply(createWithProperty(name,value)));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyMatch(){
  String name="foo";
  final String value="bar";
  PropertyPredicate p=new PropertyPredicate(name,new Predicate<PropertyState>(){
    @Override public boolean apply(    PropertyState property){
      return value.equals(property.getValue(STRING));
    }
  }
);
  assertTrue(p.apply(createWithProperty(name,value)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CheckpointTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * OAK-3587 test simulates a timeout while trying to create a checkpoint,
 * then releases the lock and tries again
 */
@Test public void testShortWait() throws Exception {
  final SegmentNodeStore store=new SegmentNodeStore(new MemoryStore());
  store.setCheckpointsLockWaitTime(1);
  final Semaphore semaphore=new Semaphore(0);
  final AtomicBoolean blocking=new AtomicBoolean(true);
  final Callable<Boolean> block=new Callable<Boolean>(){
    @Override public Boolean call(){
      while (blocking.get()) {
        if (semaphore.availablePermits() == 0) {
          semaphore.release();
        }
      }
      return true;
    }
  }
;
  Thread background=new Thread(){
    @Override public void run(){
      try {
        store.locked(block);
      }
 catch (      Exception e) {
      }
    }
  }
;
  background.start();
  semaphore.acquire();
  String cp0=store.checkpoint(10);
  assertNull(store.retrieve(cp0));
  blocking.set(false);
  String cp1=store.checkpoint(10);
  assertNotNull(store.retrieve(cp1));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * OAK-3587 test simulates a wait less than configured{@code SegmentNodeStore#setCheckpointsLockWaitTime(int)} value so the
 * checkpoint call must return a valid value
 */
@Test public void testLongWait() throws Exception {
  final int blockTime=1;
  final SegmentNodeStore store=new SegmentNodeStore(new MemoryStore());
  store.setCheckpointsLockWaitTime(blockTime + 1);
  final Semaphore semaphore=new Semaphore(0);
  final Callable<Boolean> block=new Callable<Boolean>(){
    @Override public Boolean call(){
      try {
        semaphore.release();
        TimeUnit.SECONDS.sleep(blockTime);
      }
 catch (      InterruptedException e) {
      }
      return true;
    }
  }
;
  Thread background=new Thread(){
    @Override public void run(){
      try {
        store.locked(block);
      }
 catch (      Exception e) {
      }
    }
  }
;
  background.start();
  semaphore.acquire();
  String cp0=store.checkpoint(10);
  assertNotNull(store.retrieve(cp0));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRelease() throws CommitFailedException, IOException {
  SegmentNodeStore store=new SegmentNodeStore(new MemoryStore());
  addTestNode(store,"test-checkpoint");
  String cp=verifyNS(store,true);
  store.release(cp);
  assertNull(store.retrieve(cp));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactionAndCleanupIT </h4><pre class="type-9 type-7 type-6 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test asserting OAK-3348: Cross gc sessions might introduce references to pre-compacted segments
 */
@Test @Ignore("OAK-3348") public void preCompactionReferences() throws IOException, CommitFailedException, InterruptedException {
  for (  String ref : new String[]{"merge-before-compact","merge-after-compact"}) {
    File repoDir=new File(directory,ref);
    FileStore fileStore=newFileStore(repoDir).withMaxFileSize(2).create();
    final SegmentNodeStore nodeStore=newSegmentNodeStore(fileStore).create();
    fileStore.setCompactionStrategy(new CompactionStrategy(true,false,CLEAN_NONE,0,(byte)5){
      @Override public boolean compacted(      Callable<Boolean> setHead) throws Exception {
        return nodeStore.locked(setHead);
      }
    }
);
    try {
      NodeBuilder preGCBuilder=nodeStore.getRoot().builder();
      preGCBuilder.setChildNode("test").setProperty("blob",createBlob(nodeStore,1024 * 1024));
      nodeStore.merge(preGCBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      preGCBuilder=nodeStore.getRoot().builder();
      preGCBuilder.getChildNode("test").remove();
      nodeStore.merge(preGCBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      preGCBuilder=nodeStore.getRoot().builder();
      preGCBuilder.setChildNode("test").setChildNode("a").setChildNode("b").setProperty("foo","bar");
      for (int k=0; k < getInteger("update.limit",10000); k+=2) {
        preGCBuilder.setChildNode("dummy").remove();
      }
      if ("merge-before-compact".equals(ref)) {
        NodeBuilder builder=nodeStore.getRoot().builder();
        builder.setChildNode("n");
        nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
        nodeStore.merge(preGCBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      }
      fileStore.compact();
      if ("merge-after-compact".equals(ref)) {
        NodeBuilder builder=nodeStore.getRoot().builder();
        builder.setChildNode("n");
        nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
        nodeStore.merge(preGCBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      }
    }
  finally {
      fileStore.close();
    }
    fileStore=newFileStore(repoDir).withMaxFileSize(2).create();
    try {
      fileStore.cleanup();
      assertTrue(ref + " repository size " + fileStore.size()+ " < "+ 1024 * 1024,fileStore.size() < 1024 * 1024);
    }
  finally {
      fileStore.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyRetention() throws IOException, CommitFailedException {
  FileStore fileStore=new NonCachingFileStore(directory,1);
  try {
    final SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
    CompactionStrategy strategy=new CompactionStrategy(false,false,CLEAN_ALL,0,(byte)0){
      @Override public boolean compacted(      @Nonnull Callable<Boolean> setHead) throws Exception {
        return nodeStore.locked(setHead);
      }
    }
;
    strategy.setPersistCompactionMap(false);
    fileStore.setCompactionStrategy(strategy);
    NodeBuilder builder=nodeStore.getRoot().builder();
    builder.setChildNode("test").setProperty("property","value");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    NodeState test=nodeStore.getRoot().getChildNode("test");
    SegmentId id=((SegmentNodeState)test).getRecordId().getSegmentId();
    assertTrue(fileStore.containsSegment(id));
    builder=nodeStore.getRoot().builder();
    addContent(builder.setChildNode("dump"));
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    assertTrue(fileStore.containsSegment(id));
    PropertyState property=test.getProperty("property");
    assertEquals("value",property.getValue(STRING));
    fileStore.flush();
    fileStore.compact();
    fileStore.cleanup();
    try {
      fileStore.readSegment(id);
      fail("Segment " + id + "should be gc'ed");
    }
 catch (    SegmentNotFoundException ignore) {
    }
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compactionNoBinaryClone() throws Exception {
  final int blobSize=5 * 1024 * 1024;
  final int dataNodes=10000;
  FileStore fileStore=FileStore.newFileStore(directory).withMaxFileSize(1).create();
  final SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
  CompactionStrategy custom=new CompactionStrategy(false,false,CLEAN_OLD,TimeUnit.HOURS.toMillis(1),(byte)0){
    @Override public boolean compacted(    @Nonnull Callable<Boolean> setHead) throws Exception {
      return nodeStore.locked(setHead);
    }
  }
;
  custom.setPersistCompactionMap(false);
  fileStore.setCompactionStrategy(custom);
  NodeBuilder extra=nodeStore.getRoot().builder();
  NodeBuilder content=extra.child("content");
  for (int i=0; i < dataNodes; i++) {
    NodeBuilder c=content.child("c" + i);
    for (int j=0; j < 1000; j++) {
      c.setProperty("p" + i,"v" + i);
    }
  }
  nodeStore.merge(extra,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final long dataSize=fileStore.size();
  log.debug("File store dataSize {}",byteCountToDisplaySize(dataSize));
  try {
    NodeBuilder builder=nodeStore.getRoot().builder();
    builder.setProperty("a1",createBlob(nodeStore,blobSize));
    builder.setProperty("b","foo");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    log.debug("File store pre removal {}, expecting {}",byteCountToDisplaySize(fileStore.size()),byteCountToDisplaySize(blobSize + dataSize));
    assertEquals(mb(blobSize + dataSize),mb(fileStore.size()));
    builder=nodeStore.getRoot().builder();
    builder.removeProperty("a1");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    log.debug("File store pre compaction {}, expecting {}",byteCountToDisplaySize(fileStore.size()),byteCountToDisplaySize(blobSize + dataSize));
    assertEquals(mb(blobSize + dataSize),mb(fileStore.size()));
    assertTrue(fileStore.maybeCompact(false));
    assertSize("post compaction",fileStore.size(),blobSize + dataSize,blobSize + 2 * dataSize);
    builder=nodeStore.getRoot().builder();
    builder.setProperty("a2",createBlob(nodeStore,blobSize));
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    assertSize("pre cleanup",fileStore.size(),2 * blobSize + dataSize,2 * blobSize + 2 * dataSize);
    assertTrue(fileStore.maybeCompact(false));
    fileStore.cleanup();
    assertSize("post cleanup",fileStore.size(),0,blobSize + 2 * dataSize);
    custom.setOlderThan(0);
    TimeUnit.MILLISECONDS.sleep(5);
    boolean needsCompaction=true;
    for (int i=0; i < 3 && needsCompaction; i++) {
      needsCompaction=fileStore.maybeCompact(false);
      fileStore.cleanup();
    }
    assertFalse(fileStore.maybeCompact(false));
    byte[] blob=ByteStreams.toByteArray(nodeStore.getRoot().getProperty("a2").getValue(Type.BINARY).getNewStream());
    assertEquals(blobSize,blob.length);
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactionMapTest </h4><pre class="type-9 type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeSome(){
  Set<UUID> removedUUIDs=newHashSet();
  for (int k=0; k < 1 + rnd.nextInt(referenceMap.size()); k++) {
    RecordId key=get(referenceMap.keySet(),rnd.nextInt(referenceMap.size()));
    removedUUIDs.add(key.asUUID());
  }
  compactionMap.remove(removedUUIDs);
  for (  Entry<RecordId,RecordId> reference : referenceMap.entrySet()) {
    RecordId key=reference.getKey();
    if (removedUUIDs.contains(key.asUUID())) {
      assertNull(compactionMap.get(key));
    }
 else {
      assertEquals(reference.getValue(),compactionMap.get(key));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void removeGeneration(){
  compactionMap1.compress();
  compactionMap2.compress();
  compactionMap3.compress();
  assertArrayEquals(new long[]{10,10,10},compactionMap.getSegmentCounts());
  assertArrayEquals(new long[]{100,100,100},compactionMap.getRecordCounts());
  int expectedDepth=3;
  int expectedGeneration=3;
  long expectedSize=countUUIDs(referenceMap.keySet());
  assertEquals(expectedDepth,compactionMap.getDepth());
  assertEquals(expectedSize,sum(compactionMap.getSegmentCounts()));
  assertEquals(expectedGeneration,compactionMap.getGeneration());
  for (  Map<RecordId,RecordId> referenceMap : ImmutableList.of(referenceMap2,referenceMap1,referenceMap3)) {
    Set<UUID> removedUUIDs=newHashSet();
    for (    RecordId key : referenceMap.keySet()) {
      removedUUIDs.add(key.asUUID());
    }
    compactionMap.remove(removedUUIDs);
    expectedDepth--;
    CompactionMap consed=compactionMap.cons(compactionMap1);
    assertEquals(expectedDepth + 1,consed.getDepth());
    expectedSize-=removedUUIDs.size();
    assertEquals(expectedSize,sum(compactionMap.getSegmentCounts()));
    assertEquals(expectedGeneration + 1,consed.getGeneration());
  }
  CompactionMap consed=compactionMap.cons(createCompactionMap(false));
  assertEquals(1,consed.getDepth());
  assertEquals(0,sum(compactionMap.getSegmentCounts()));
  assertEquals(expectedGeneration + 1,consed.getGeneration());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * See OAK-3511
 */
@Test public void removeRecentKey(){
  compactionMap1.compress();
  RecordId key=newRecordId(store.getTracker(),rnd);
  while (compactionMap1.get(key) != null) {
    key=newRecordId(store.getTracker(),rnd);
  }
  compactionMap1.put(key,newRecordId(store.getTracker(),rnd));
  compactionMap1.remove(singleton(key.asUUID()));
  assertNull("Compaction map must not contain removed key",compactionMap1.get(key));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactorTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactor() throws Exception {
  NodeStore store=new SegmentNodeStore(segmentStore);
  init(store);
  Compactor compactor=new Compactor(segmentStore.getTracker());
  addTestContent(store,0);
  NodeState initial=store.getRoot();
  SegmentNodeState after=compactor.compact(initial,store.getRoot(),initial);
  Assert.assertEquals(store.getRoot(),after);
  addTestContent(store,1);
  after=compactor.compact(initial,store.getRoot(),initial);
  Assert.assertEquals(store.getRoot(),after);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCancel() throws Throwable {
  NodeStore store=SegmentNodeStore.newSegmentNodeStore(segmentStore).create();
  Compactor compactor=new Compactor(segmentStore.getTracker(),Suppliers.ofInstance(true));
  SegmentNodeState sns=compactor.compact(store.getRoot(),addChild(store.getRoot(),"b"),store.getRoot());
  assertFalse(sns.hasChildNode("b"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.ExternalBlobIT </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDataStoreBlob() throws Exception {
  FileDataStore fds=createFileDataStore();
  DataStoreBlobStore dbs=new DataStoreBlobStore(fds);
  nodeStore=getNodeStore(dbs);
  Blob b1=testCreateAndRead(createBlob(fds.getMinRecordLength() - 2));
  assertTrue(b1 instanceof SegmentBlob);
  assertNull(((SegmentBlob)b1).getBlobId());
  byte[] data2=new byte[Segment.MEDIUM_LIMIT + 1];
  new Random().nextBytes(data2);
  Blob b2=testCreateAndRead(nodeStore.createBlob(new ByteArrayInputStream(data2)));
  assertTrue(b2 instanceof SegmentBlob);
  assertNotNull(b2.getReference());
  assertEquals(b2.getContentIdentity(),((SegmentBlob)b2).getBlobId());
  InputStream is=dbs.getInputStream(((SegmentBlob)b2).getBlobId());
  assertNotNull(IOUtils.contentEquals(new ByteArrayInputStream(data2),is));
  is.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.MergeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testOptimisticMerge() throws CommitFailedException, IOException {
  NodeStore store=new SegmentNodeStore(new MemoryStore());
  NodeBuilder a=store.getRoot().builder();
  a.setProperty("foo","abc");
  NodeBuilder b=store.getRoot().builder();
  b.setProperty("bar","xyz");
  assertFalse(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  store.merge(a,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  store.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertTrue(store.getRoot().hasProperty("bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSequentialMerge() throws CommitFailedException, IOException {
  NodeStore store=new SegmentNodeStore(new MemoryStore());
  assertFalse(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  NodeBuilder a=store.getRoot().builder();
  a.setProperty("foo","abc");
  store.merge(a,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  NodeBuilder b=store.getRoot().builder();
  b.setProperty("bar","xyz");
  store.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertTrue(store.getRoot().hasProperty("bar"));
}

</code></pre>

<br>
<pre class="type-13 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPessimisticMerge() throws Exception {
  final SegmentNodeStore store=new SegmentNodeStore(new MemoryStore());
  final Semaphore semaphore=new Semaphore(0);
  final AtomicBoolean running=new AtomicBoolean(true);
  Thread background=new Thread(){
    @Override public void run(){
      for (int i=0; running.get(); i++) {
        try {
          NodeBuilder a=store.getRoot().builder();
          a.setProperty("foo","abc" + i);
          store.merge(a,EmptyHook.INSTANCE,CommitInfo.EMPTY);
          semaphore.release();
        }
 catch (        CommitFailedException e) {
          fail();
        }
      }
    }
  }
;
  background.start();
  semaphore.acquire();
  assertTrue(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  NodeBuilder b=store.getRoot().builder();
  b.setProperty("bar","xyz");
  store.setMaximumBackoff(100);
  store.merge(b,new CommitHook(){
    @Override @Nonnull public NodeState processCommit(    NodeState before,    NodeState after,    CommitInfo info){
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException e) {
        fail();
      }
      return after;
    }
  }
,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertTrue(store.getRoot().hasProperty("bar"));
  running.set(false);
  background.join();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.PartialCompactionMapTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void single(){
  map=createCompactionMap();
  RecordId before=RecordId.fromString(getTracker(),"00000000-0000-0000-0000-000000000000.0000");
  RecordId after=RecordId.fromString(getTracker(),"11111111-1111-1111-1111-111111111111.1111");
  map.put(before,after);
  assertEquals(after,map.get(before));
  map.compress();
  assertEquals(after,map.get(before));
  assertEquals(1,map.getRecordCount());
  assertEquals(1,map.getSegmentCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void random(){
  int maxSegments=1000;
  int entriesPerSegment=10;
  reference=newHashMap();
  map=createCompactionMap();
  for (int k=0; k < 10; k++) {
    addRandomEntries(rnd.nextInt(maxSegments) + 1,rnd.nextInt(entriesPerSegment) + 1);
    if (!reference.isEmpty()) {
      removeRandomEntries(rnd.nextInt(reference.size()));
    }
    checkMap();
  }
  map.compress();
  assertEquals(reference.size(),map.getRecordCount());
  assertEquals(toUUID(reference.keySet()).size(),map.getSegmentCount());
  checkMap();
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void remove(){
  map=createCompactionMap();
  RecordId before1=RecordId.fromString(getTracker(),"00000000-0000-0000-0000-000000000000.0000");
  RecordId before2=RecordId.fromString(getTracker(),"00000000-0000-0000-0000-000000000000.1111");
  RecordId after1=RecordId.fromString(getTracker(),"11111111-1111-1111-1111-111111111111.0000");
  RecordId after2=RecordId.fromString(getTracker(),"11111111-1111-1111-1111-111111111111.1111");
  map.put(before1,after1);
  map.compress();
  map.put(before2,after2);
  assertEquals(after1,map.get(before1));
  assertEquals(after2,map.get(before2));
  map.remove(newHashSet(before1.asUUID()));
  assertNull(map.get(before1));
  assertNull(map.get(before2));
  assertEquals(0,map.getRecordCount());
  assertEquals(0,map.getSegmentCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.RecordIdMapTest </h4><pre class="type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmpty(){
  RecordIdMap map=new RecordIdMap();
  assertFalse(map.containsKey((short)0));
  assertNull(map.get((short)0));
  assertEquals(0,map.size());
  try {
    map.getKey(0);
    fail("Expected AIOBE");
  }
 catch (  ArrayIndexOutOfBoundsException ignored) {
  }
  try {
    map.getRecordId(0);
    fail("Expected AIOBE");
  }
 catch (  ArrayIndexOutOfBoundsException ignored) {
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecordIdMap() throws IOException {
  int maxSegments=1000;
  int maxEntriesPerSegment=10;
  int seed=new Random().nextInt();
  Random r=new Random(seed);
  SegmentTracker tracker=new MemoryStore().getTracker();
  RecordIdMap map=new RecordIdMap();
  Map<Short,RecordId> reference=newHashMap();
  int segments=r.nextInt(maxSegments);
  for (int i=0; i < segments; i++) {
    SegmentId id=tracker.newDataSegmentId();
    int n=r.nextInt(maxEntriesPerSegment);
    int offset=MAX_SEGMENT_SIZE;
    for (int j=0; j < n; j++) {
      offset=newValidOffset(r,(n - j) << RECORD_ALIGN_BITS,offset);
      RecordId record=new RecordId(id,offset);
      reference.put(encode(record.getOffset()),record);
    }
  }
  for (  Entry<Short,RecordId> entry : reference.entrySet()) {
    map.put(entry.getKey(),entry.getValue());
  }
  assertEquals("Failed with seed " + seed,reference.size(),map.size());
  for (  Entry<Short,RecordId> entry : reference.entrySet()) {
    short key=entry.getKey();
    assertTrue("Failed with seed " + seed,map.containsKey(key));
    RecordId expected=entry.getValue();
    RecordId actual=map.get(key);
    assertEquals("Failed with seed " + seed,expected,actual);
  }
  for (int k=0; k < map.size(); k++) {
    short key=map.getKey(k);
    RecordId expected=reference.get(key);
    RecordId actual=map.get(key);
    assertEquals("Failed with seed " + seed,expected,actual);
    assertEquals("Failed with seed " + seed,expected,map.getRecordId(k));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.RecordTest </h4><pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorstCaseMap() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  Map<String,RecordId> map=newHashMap();
  char[] key=new char[2];
  for (int i=0; i <= MapRecord.BUCKETS_PER_LEVEL; i++) {
    key[0]=(char)('A' + i);
    key[1]=(char)('\u1000' - key[0] * 31);
    map.put(new String(key),blockId);
  }
  MapRecord bad=writer.writeMap(null,map);
  assertEquals(map.size(),bad.size());
  Iterator<MapEntry> iterator=bad.getEntries().iterator();
  for (int i=0; i < map.size(); i++) {
    assertTrue(iterator.hasNext());
    assertEquals('\u1000',iterator.next().getName().hashCode());
  }
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyNode() throws IOException {
  NodeState before=EMPTY_NODE;
  NodeState after=writer.writeNode(before);
  assertEquals(before,after);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapRecord() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  MapRecord zero=writer.writeMap(null,ImmutableMap.<String,RecordId>of());
  MapRecord one=writer.writeMap(null,ImmutableMap.of("one",blockId));
  MapRecord two=writer.writeMap(null,ImmutableMap.of("one",blockId,"two",blockId));
  Map<String,RecordId> map=newHashMap();
  for (int i=0; i < 1000; i++) {
    map.put("key" + i,blockId);
  }
  MapRecord many=writer.writeMap(null,map);
  Iterator<MapEntry> iterator;
  assertEquals(0,zero.size());
  assertNull(zero.getEntry("one"));
  iterator=zero.getEntries().iterator();
  assertFalse(iterator.hasNext());
  assertEquals(1,one.size());
  assertEquals(blockId,one.getEntry("one").getValue());
  assertNull(one.getEntry("two"));
  iterator=one.getEntries().iterator();
  assertTrue(iterator.hasNext());
  assertEquals("one",iterator.next().getName());
  assertFalse(iterator.hasNext());
  assertEquals(2,two.size());
  assertEquals(blockId,two.getEntry("one").getValue());
  assertEquals(blockId,two.getEntry("two").getValue());
  assertNull(two.getEntry("three"));
  iterator=two.getEntries().iterator();
  assertTrue(iterator.hasNext());
  iterator.next();
  assertTrue(iterator.hasNext());
  iterator.next();
  assertFalse(iterator.hasNext());
  assertEquals(1000,many.size());
  iterator=many.getEntries().iterator();
  for (int i=0; i < 1000; i++) {
    assertTrue(iterator.hasNext());
    assertEquals(blockId,iterator.next().getValue());
    assertEquals(blockId,many.getEntry("key" + i).getValue());
  }
  assertFalse(iterator.hasNext());
  assertNull(many.getEntry("foo"));
  Map<String,RecordId> changes=newHashMap();
  changes.put("key0",null);
  changes.put("key1000",blockId);
  MapRecord modified=writer.writeMap(many,changes);
  assertEquals(1000,modified.size());
  iterator=modified.getEntries().iterator();
  for (int i=1; i <= 1000; i++) {
    assertTrue(iterator.hasNext());
    assertEquals(blockId,iterator.next().getValue());
    assertEquals(blockId,modified.getEntry("key" + i).getValue());
  }
  assertFalse(iterator.hasNext());
  assertNull(many.getEntry("foo"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapRemoveNonExisting() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  Map<String,RecordId> changes=newHashMap();
  changes.put("one",null);
  MapRecord zero=writer.writeMap(null,changes);
  assertEquals(0,zero.size());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testStringMixinTypes() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("jcr:mixinTypes",singletonList("foo"),STRINGS);
  NodeState state=writer.writeNode(builder.getNodeState());
  assertNotNull(state.getProperty("jcr:mixinTypes"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringRecord() throws IOException {
  RecordId empty=writer.writeString("");
  RecordId space=writer.writeString(" ");
  RecordId hello=writer.writeString("Hello, World!");
  StringBuilder builder=new StringBuilder();
  for (int i=0; i < 2 * Segment.MAX_SEGMENT_SIZE + 1000; i++) {
    builder.append((char)('0' + i % 10));
  }
  RecordId large=writer.writeString(builder.toString());
  Segment segment=large.getSegmentId().getSegment();
  assertEquals("",readString(empty));
  assertEquals(" ",readString(space));
  assertEquals("Hello, World!",readString(hello));
  assertEquals(builder.toString(),readString(large));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testStringPrimaryType() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setProperty("jcr:primaryType","foo",STRING);
  NodeState state=writer.writeNode(builder.getNodeState());
  assertNotNull(state.getProperty("jcr:primaryType"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testManyMapDeletes() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  for (int i=0; i < 1000; i++) {
    builder.child("test" + i);
  }
  NodeState before=writer.writeNode(builder.getNodeState());
  assertEquals(builder.getNodeState(),before);
  builder=before.builder();
  for (int i=0; i < 900; i++) {
    builder.getChildNode("test" + i).remove();
  }
  NodeState after=writer.writeNode(builder.getNodeState());
  assertEquals(builder.getNodeState(),after);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeepNode() throws IOException {
  NodeBuilder root=EMPTY_NODE.builder();
  NodeBuilder builder=root;
  for (int i=0; i < 1000; i++) {
    builder=builder.child("test");
  }
  NodeState before=builder.getNodeState();
  NodeState after=writer.writeNode(before);
  assertEquals(before,after);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testBlockRecord() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  BlockRecord block=new BlockRecord(blockId,bytes.length);
  for (int n=1; n < bytes.length; n++) {
    for (int i=0; i + n <= bytes.length; i++) {
      Arrays.fill(bytes,i,i + n,(byte)'.');
      assertEquals(n,block.read(i,bytes,i,n));
      assertEquals(hello,new String(bytes,Charsets.UTF_8));
    }
  }
  byte[] large=new byte[bytes.length * 2];
  assertEquals(bytes.length,block.read(0,large,0,large.length));
  assertEquals(hello,new String(large,0,bytes.length,Charsets.UTF_8));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testListRecord() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  ListRecord one=writeList(1,blockId);
  ListRecord level1=writeList(LEVEL_SIZE,blockId);
  ListRecord level1p=writeList(LEVEL_SIZE + 1,blockId);
  ListRecord level2=writeList(LEVEL_SIZE * LEVEL_SIZE,blockId);
  ListRecord level2p=writeList(LEVEL_SIZE * LEVEL_SIZE + 1,blockId);
  assertEquals(1,one.size());
  assertEquals(blockId,one.getEntry(0));
  assertEquals(LEVEL_SIZE,level1.size());
  assertEquals(blockId,level1.getEntry(0));
  assertEquals(blockId,level1.getEntry(LEVEL_SIZE - 1));
  assertEquals(LEVEL_SIZE + 1,level1p.size());
  assertEquals(blockId,level1p.getEntry(0));
  assertEquals(blockId,level1p.getEntry(LEVEL_SIZE));
  assertEquals(LEVEL_SIZE * LEVEL_SIZE,level2.size());
  assertEquals(blockId,level2.getEntry(0));
  assertEquals(blockId,level2.getEntry(LEVEL_SIZE * LEVEL_SIZE - 1));
  assertEquals(LEVEL_SIZE * LEVEL_SIZE + 1,level2p.size());
  assertEquals(blockId,level2p.getEntry(0));
  assertEquals(blockId,level2p.getEntry(LEVEL_SIZE * LEVEL_SIZE));
  int count=0;
  for (  RecordId entry : level2p.getEntries()) {
    assertEquals(blockId,entry);
    assertEquals(blockId,level2p.getEntry(count));
    count++;
  }
  assertEquals(LEVEL_SIZE * LEVEL_SIZE + 1,count);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleNode() throws IOException {
  NodeState before=EMPTY_NODE.builder().setProperty("foo","abc").setProperty("bar",123).setProperty("baz",Math.PI).getNodeState();
  NodeState after=writer.writeNode(before);
  assertEquals(before,after);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentDataStoreBlobGCIT </h4><pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void consistencyCheckWithRenegadeDelete() throws Exception {
  DataStoreState state=setUp();
  Random rand=new Random(87);
  List<String> existing=Lists.newArrayList(state.blobsPresent);
  long count=blobStore.countDeleteChunks(ImmutableList.of(existing.get(rand.nextInt(existing.size()))),0);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(count,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consistencyCheckInit() throws Exception {
  DataStoreState state=setUp();
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consistencyCheckInlined() throws Exception {
  blobStore=new DataStoreBlobStore(DataStoreUtils.createFDS(new File(getWorkDir(),"datastore"),16516));
  DataStoreState state=setUp();
  addInlined();
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void consistencyCheckWithGc() throws Exception {
  DataStoreState state=setUp();
  Set<String> existingAfterGC=gcInternal(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcLongRunningBlobCollection() throws Exception {
  DataStoreState state=setUp();
  log.info("{} Blobs added {}",state.blobsAdded.size(),state.blobsAdded);
  log.info("{} Blobs should be present {}",state.blobsPresent.size(),state.blobsPresent);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  String repoId=null;
  if (SharedDataStoreUtils.isShared(store.getBlobStore())) {
    repoId=ClusterRepositoryInfo.createId(nodeStore);
    ((SharedDataStore)store.getBlobStore()).addMetadataRecord(new ByteArrayInputStream(new byte[0]),REPOSITORY.getNameFromId(repoId));
  }
  TestGarbageCollector gc=new TestGarbageCollector(new SegmentBlobReferenceRetriever(store.getTracker()),(GarbageCollectableBlobStore)store.getBlobStore(),executor,"./target",5,5000,repoId);
  gc.collectGarbage(false);
  Set<String> existingAfterGC=iterate();
  log.info("{} Blobs existing after gc {}",existingAfterGC.size(),existingAfterGC);
  assertTrue(Sets.difference(state.blobsPresent,existingAfterGC).isEmpty());
  assertEquals(gc.additionalBlobs,Sets.symmetricDifference(state.blobsPresent,existingAfterGC));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentGraphTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSegmentGraphWithFilter() throws IOException {
  ReadOnlyStore store=new ReadOnlyStore(storeDir);
  try {
    Predicate<UUID> filter=createRegExpFilter(".*testWriter.*",store.getTracker());
    Graph<UUID> segmentGraph=parseSegmentGraph(store,filter);
    assertEquals(filteredSegments,newHashSet(segmentGraph.vertices()));
    Map<UUID,Set<UUID>> map=newHashMap();
    for (    Entry<UUID,Multiset<UUID>> entry : segmentGraph.edges()) {
      map.put(entry.getKey(),entry.getValue().elementSet());
    }
    assertEquals(filteredReferences,map);
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentIdFactoryTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void referencedSegmentIds() throws InterruptedException {
  SegmentId a=factory.newDataSegmentId();
  SegmentId b=factory.newBulkSegmentId();
  SegmentId c=factory.newDataSegmentId();
  Set<SegmentId> ids=factory.getReferencedSegmentIds();
  assertTrue(ids.contains(a));
  assertTrue(ids.contains(b));
  assertTrue(ids.contains(c));
  assertFalse(ids.contains(factory.newBulkSegmentId()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void segmentIdType(){
  assertTrue(factory.newDataSegmentId().isDataSegmentId());
  assertTrue(factory.newBulkSegmentId().isBulkSegmentId());
  assertFalse(factory.newDataSegmentId().isBulkSegmentId());
  assertFalse(factory.newBulkSegmentId().isDataSegmentId());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void internedSegmentIds(){
  assertTrue(factory.getSegmentId(0,0) == factory.getSegmentId(0,0));
  assertTrue(factory.getSegmentId(1,2) == factory.getSegmentId(1,2));
  assertTrue(factory.getSegmentId(1,2) != factory.getSegmentId(3,4));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentIdTableTest </h4><pre class="type-9 type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2752
 */
@Test public void endlessSearchLoop() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  for (int i=0; i < 1024; i++) {
    refs.add(tbl.getSegmentId(i,i % 64));
  }
  Callable<SegmentId> c=new Callable<SegmentId>(){
    @Override public SegmentId call() throws Exception {
      return tbl.getSegmentId(2,1);
    }
  }
;
  Future<SegmentId> f=Executors.newSingleThreadExecutor().submit(c);
  SegmentId s=null;
  try {
    s=f.get(5,TimeUnit.SECONDS);
  }
 catch (  Exception e) {
    Assert.fail(e.getMessage());
  }
  Assert.assertNotNull(s);
  Assert.assertEquals(2,s.getMostSignificantBits());
  Assert.assertEquals(1,s.getLeastSignificantBits());
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gc() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  int originalCount=1024;
  for (int i=0; i < originalCount; i++) {
    refs.add(tbl.getSegmentId(i,i % 128));
  }
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(1,tbl.getMapRebuildCount());
  for (int i=0; i < refs.size() / 2; i++) {
    refs.remove(0);
  }
  for (int gcCalls=0; ; gcCalls++) {
    System.gc();
    for (    SegmentId id : refs) {
      SegmentId id2=tbl.getSegmentId(id.getMostSignificantBits(),id.getLeastSignificantBits());
      Assert.assertTrue(id2 == id);
    }
    Assert.assertEquals(1,tbl.getMapRebuildCount());
    for (int i=0; i < 10; i++) {
      tbl.getSegmentId(i,i);
    }
    if (tbl.getEntryCount() < originalCount) {
      break;
    }
 else     if (gcCalls > 10) {
      fail("No entries were garbage collected after 10 times System.gc()");
    }
  }
  Assert.assertEquals(2,tbl.getMapRebuildCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void justHashCollisions() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  int originalCount=1024;
  for (int i=0; i < originalCount; i++) {
    refs.add(tbl.getSegmentId(i,i % 128));
  }
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(1,tbl.getMapRebuildCount());
  List<SegmentId> refs2=new ArrayList<SegmentId>();
  tbl.collectReferencedIds(refs2);
  Assert.assertEquals(refs.size(),refs2.size());
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(1,tbl.getMapRebuildCount());
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void clearTable() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  int originalCount=8;
  for (int i=0; i < originalCount; i++) {
    refs.add(tbl.getSegmentId(i,i % 2));
  }
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(0,tbl.getMapRebuildCount());
  tbl.clearSegmentIdTables(new CompactionStrategy(false,false,CleanupType.CLEAN_NONE,originalCount,(byte)0){
    @Override public boolean compacted(    @Nonnull Callable<Boolean> setHead) throws Exception {
      return true;
    }
    @Override public boolean canRemove(    SegmentId id){
      return id.getMostSignificantBits() < 4;
    }
  }
);
  Assert.assertEquals(4,tbl.getEntryCount());
  for (  SegmentId id : refs) {
    if (id.getMostSignificantBits() >= 4) {
      SegmentId id2=tbl.getSegmentId(id.getMostSignificantBits(),id.getLeastSignificantBits());
      List<SegmentId> list=tbl.getRawSegmentIdList();
      if (list.size() != new HashSet<SegmentId>(list).size()) {
        Collections.sort(list);
        fail("duplicate entry " + list.toString());
      }
      Assert.assertTrue(id == id2);
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void randomized() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  Random r=new Random(1);
  for (int i=0; i < 16 * 1024; i++) {
    refs.add(tbl.getSegmentId(r.nextLong(),r.nextLong()));
  }
  Assert.assertEquals(16 * 1024,tbl.getEntryCount());
  Assert.assertEquals(16 * 2048,tbl.getMapSize());
  Assert.assertEquals(5,tbl.getMapRebuildCount());
  r=new Random(1);
  for (int i=0; i < 16 * 1024; i++) {
    refs.add(tbl.getSegmentId(r.nextLong(),r.nextLong()));
    Assert.assertEquals(16 * 1024,tbl.getEntryCount());
    Assert.assertEquals(16 * 2048,tbl.getMapSize());
    Assert.assertEquals(5,tbl.getMapRebuildCount());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentParserTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nonEmptyList() throws IOException {
  int count=100000;
  Random rnd=new Random();
  List<RecordId> list=newArrayListWithCapacity(count);
  for (int k=0; k < count; k++) {
    list.add(newRecordId(store.getTracker(),rnd));
  }
  RecordId listId=writer.writeList(list);
  ListInfo listInfo=new TestParser("nonEmptyList"){
    @Override protected void onListBucket(    RecordId parentId,    RecordId listId,    int index,    int count,    int capacity){
      parseListBucket(listId,index,count,capacity);
    }
  }
.parseList(null,listId,count);
  assertEquals(listId,listInfo.listId);
  assertEquals(count,listInfo.count);
  assertEquals(301185,listInfo.size);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void node() throws IOException {
  final NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("one");
  builder.setChildNode("two");
  builder.setProperty("three",42);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  NodeInfo info=new TestParser("node"){
    @Override protected void onNode(    RecordId parentId,    RecordId nodeId){
    }
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
    }
    @Override protected void onMap(    RecordId parentId,    RecordId mapId,    MapRecord map){
    }
    @Override protected void onProperty(    RecordId parentId,    RecordId propertyId,    PropertyTemplate template){
    }
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
      if (segmentVersion == V_10) {
        super.onList(parentId,listId,count);
      }
    }
  }
.parseNode(node.getRecordId());
  assertEquals(node.getRecordId(),info.nodeId);
  assertEquals(2,info.nodeCount);
  assertEquals(1,info.propertyCount);
  assertEquals(9,info.size);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void nonEmptyMap() throws IOException {
  Random rnd=new Random();
  MapRecord base=writer.writeMap(null,createMap(33,rnd));
  MapRecord map=writer.writeMap(base,createMap(1,rnd));
  final AtomicInteger size=new AtomicInteger();
  MapInfo mapInfo=new TestParser("nonEmptyMap"){
    @Override protected void onMapDiff(    RecordId parentId,    RecordId mapId,    MapRecord map){
      MapInfo mapInfo=parseMapDiff(mapId,map);
      assertEquals(mapId,mapInfo.mapId);
      size.addAndGet(mapInfo.size);
    }
    @Override protected void onMap(    RecordId parentId,    RecordId mapId,    MapRecord map){
      MapInfo mapInfo=parseMap(parentId,mapId,map);
      assertEquals(mapId,mapInfo.mapId);
      size.addAndGet(mapInfo.size);
    }
    @Override protected void onMapBranch(    RecordId parentId,    RecordId mapId,    MapRecord map){
      MapInfo mapInfo=parseMapBranch(mapId,map);
      assertEquals(mapId,mapInfo.mapId);
      size.addAndGet(mapInfo.size);
    }
    @Override protected void onMapLeaf(    RecordId parentId,    RecordId mapId,    MapRecord map){
      MapInfo mapInfo=parseMapLeaf(mapId,map);
      assertEquals(mapId,mapInfo.mapId);
      size.addAndGet(mapInfo.size);
    }
    @Override protected void onString(    RecordId parentId,    RecordId stringId){
    }
  }
.parseMap(null,map.getRecordId(),map);
  assertEquals(map.getRecordId(),mapInfo.mapId);
  assertEquals(-1,mapInfo.size);
  assertEquals(456,size.get());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shortString() throws IOException {
  RecordId stringId=writer.writeString("short");
  BlobInfo blobInfo=new TestParser("shortString").parseString(stringId);
  assertEquals(stringId,blobInfo.blobId);
  assertEquals(SMALL,blobInfo.blobType);
  assertEquals(6,blobInfo.size);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void mediumBlob() throws IOException {
  SegmentBlob blob=writer.writeBlob(createRandomBlob(SMALL_LIMIT));
  ValueInfo valueInfo=new TestParser("mediumBlob"){
    @Override protected void onBlob(    RecordId parentId,    RecordId blobId){
      BlobInfo blobInfo=parseBlob(blobId);
      assertEquals(blobId,blobInfo.blobId);
      assertEquals(MEDIUM,blobInfo.blobType);
      assertEquals(SMALL_LIMIT + 2,blobInfo.size);
    }
  }
.parseValue(null,blob.getRecordId(),BINARY);
  assertEquals(blob.getRecordId(),valueInfo.valueId);
  assertEquals(BINARY,valueInfo.type);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void longString() throws IOException {
  RecordId stringId=writer.writeString(repeat("s",MEDIUM_LIMIT));
  BlobInfo blobInfo=new TestParser("longString"){
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
    }
  }
.parseString(stringId);
  assertEquals(stringId,blobInfo.blobId);
  assertEquals(LONG,blobInfo.blobType);
  assertEquals(MEDIUM_LIMIT + 11,blobInfo.size);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyList(){
  RecordId listId=newRecordId(store.getTracker(),new Random());
  ListInfo listInfo=new TestParser("emptyList").parseList(null,listId,0);
  assertEquals(listId,listInfo.listId);
  assertEquals(0,listInfo.count);
  assertEquals(0,listInfo.size);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void longBlob() throws IOException {
  SegmentBlob blob=writer.writeBlob(createRandomBlob(MEDIUM_LIMIT));
  ValueInfo valueInfo=new TestParser("longBlob"){
    @Override protected void onBlob(    RecordId parentId,    RecordId blobId){
      BlobInfo blobInfo=parseBlob(blobId);
      assertEquals(blobId,blobInfo.blobId);
      assertEquals(LONG,blobInfo.blobType);
      assertEquals(MEDIUM_LIMIT + 11,blobInfo.size);
    }
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
    }
  }
.parseValue(null,blob.getRecordId(),BINARY);
  assertEquals(blob.getRecordId(),valueInfo.valueId);
  assertEquals(BINARY,valueInfo.type);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mediumString() throws IOException {
  RecordId stringId=writer.writeString(repeat("s",SMALL_LIMIT));
  BlobInfo blobInfo=new TestParser("mediumString").parseString(stringId);
  assertEquals(stringId,blobInfo.blobId);
  assertEquals(MEDIUM,blobInfo.blobType);
  assertEquals(SMALL_LIMIT + 2,blobInfo.size);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyNode() throws IOException {
  SegmentNodeState node=writer.writeNode(EMPTY_NODE);
  NodeInfo info=new TestParser("emptyNode"){
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
    }
  }
.parseNode(node.getRecordId());
  assertEquals(node.getRecordId(),info.nodeId);
  assertEquals(0,info.nodeCount);
  assertEquals(0,info.propertyCount);
  assertEquals(3,info.size);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void smallBlob() throws IOException {
  SegmentBlob blob=writer.writeBlob(createRandomBlob(4));
  ValueInfo valueInfo=new TestParser("smallBlob"){
    @Override protected void onBlob(    RecordId parentId,    RecordId blobId){
      BlobInfo blobInfo=parseBlob(blobId);
      assertEquals(blobId,blobInfo.blobId);
      assertEquals(SMALL,blobInfo.blobType);
      assertEquals(5,blobInfo.size);
    }
  }
.parseValue(null,blob.getRecordId(),BINARY);
  assertEquals(blob.getRecordId(),valueInfo.valueId);
  assertEquals(BINARY,valueInfo.type);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void emptyMap() throws IOException {
  Map<String,RecordId> empty=newHashMap();
  MapRecord map=writer.writeMap(null,empty);
  MapInfo mapInfo=new TestParser("emptyMap"){
    @Override protected void onMapLeaf(    RecordId parentId,    RecordId mapId,    MapRecord map){
    }
  }
.parseMap(null,map.getRecordId(),map);
  assertEquals(map.getRecordId(),mapInfo.mapId);
  assertEquals(-1,mapInfo.size);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void singleChildNode() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("child");
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  NodeInfo info=new TestParser("singleChildNode"){
    @Override protected void onNode(    RecordId parentId,    RecordId nodeId){
    }
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
    }
  }
.parseNode(node.getRecordId());
  assertEquals(node.getRecordId(),info.nodeId);
  assertEquals(1,info.nodeCount);
  assertEquals(0,info.propertyCount);
  assertEquals(6,info.size);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentSizeTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFlatNodeUpdate() throws IOException {
  SegmentStore store=new MemoryStore();
  SegmentWriter writer=store.getTracker().getWriter();
  NodeBuilder builder=EMPTY_NODE.builder();
  for (int i=0; i < 1000; i++) {
    builder.child("child" + i);
  }
  SegmentNodeState state=writer.writeNode(builder.getNodeState());
  writer.flush();
  Segment segment=store.readSegment(state.getRecordId().getSegmentId());
  assertEquals(27584,segment.size());
  writer.flush();
  builder=state.builder();
  builder.child("child1000");
  state=writer.writeNode(builder.getNodeState());
  writer.flush();
  segment=store.readSegment(state.getRecordId().getSegmentId());
  assertEquals(560,segment.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDuplicateStrings() throws IOException {
  String string="More than just a few bytes of example content.";
  SegmentWriter writer=new MemoryStore().getTracker().getWriter();
  SegmentNodeBuilder builder=writer.writeNode(EMPTY_NODE).builder();
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(1,string),Type.STRINGS));
  RecordId id1=builder.getNodeState().getRecordId();
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(12,string),Type.STRINGS));
  RecordId id2=builder.getNodeState().getRecordId();
  assertEquals(16 + 12 * Segment.RECORD_ID_BYTES,id1.getOffset() - id2.getOffset());
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(100,string),Type.STRINGS));
  RecordId id3=builder.getNodeState().getRecordId();
  assertEquals(16 + 100 * Segment.RECORD_ID_BYTES,id2.getOffset() - id3.getOffset());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDuplicateDates() throws IOException {
  String now=ISO8601.format(Calendar.getInstance());
  SegmentWriter writer=new MemoryStore().getTracker().getWriter();
  SegmentNodeBuilder builder=writer.writeNode(EMPTY_NODE).builder();
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(1,now),Type.DATES));
  RecordId id1=builder.getNodeState().getRecordId();
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(12,now),Type.DATES));
  RecordId id2=builder.getNodeState().getRecordId();
  assertEquals(16 + 12 * Segment.RECORD_ID_BYTES,id1.getOffset() - id2.getOffset());
  builder.setProperty(PropertyStates.createProperty("test",Collections.nCopies(100,now),Type.DATES));
  RecordId id3=builder.getNodeState().getRecordId();
  assertEquals(16 + 100 * Segment.RECORD_ID_BYTES,id2.getOffset() - id3.getOffset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.ShortSetTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addOne(){
  set.add(s(42));
  assertTrue(set.contains(s(42)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addTwoReverse(){
  set.add(s(42));
  set.add(s(21));
  assertTrue(set.contains(s(21)));
  assertTrue(set.contains(s(42)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addTwo(){
  set.add(s(21));
  set.add(s(42));
  assertTrue(set.contains(s(21)));
  assertTrue(set.contains(s(42)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.StringCacheTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void clear(){
  final AtomicInteger counter=new AtomicInteger();
  Function<Integer,String> uniqueLoader=new Function<Integer,String>(){
    @Override @Nullable public String apply(    @Nullable Integer input){
      return "" + counter.incrementAndGet();
    }
  }
;
  StringCache c=new StringCache(0);
  assertEquals("1",c.getString(0,0,0,uniqueLoader));
  assertEquals("1",c.getString(0,0,0,uniqueLoader));
  c.clear();
  assertEquals("2",c.getString(0,0,0,uniqueLoader));
  assertEquals("2",c.getString(0,0,0,uniqueLoader));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void largeEntries(){
  final AtomicInteger counter=new AtomicInteger();
  final String large=new String(new char[1024]);
  Function<Integer,String> loader=new Function<Integer,String>(){
    @Override @Nullable public String apply(    @Nullable Integer input){
      counter.incrementAndGet();
      return large + input;
    }
  }
;
  StringCache c=new StringCache(1024);
  for (int repeat=0; repeat < 10; repeat++) {
    for (int i=0; i < 1000; i++) {
      assertEquals(large + i,c.getString(i,i,i,loader));
      assertEquals(large + 0,c.getString(0,0,0,loader));
    }
  }
  assertTrue("" + counter,counter.get() > 9000);
  assertTrue("" + counter,counter.get() < 10000);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void randomized(){
  ArrayList<Function<Integer,String>> loaderList=new ArrayList<Function<Integer,String>>();
  int segmentCount=10;
  for (int i=0; i < segmentCount; i++) {
    final int x=i;
    Function<Integer,String> loader=new Function<Integer,String>(){
      @Override @Nullable public String apply(      @Nullable Integer input){
        return "loader #" + x + " offset "+ input;
      }
    }
;
    loaderList.add(loader);
  }
  StringCache c=new StringCache(10);
  Random r=new Random(1);
  for (int i=0; i < 1000; i++) {
    int segment=r.nextInt(segmentCount);
    int offset=r.nextInt(10);
    Function<Integer,String> loader=loaderList.get(segment);
    String x=c.getString(segment,segment,offset,loader);
    assertEquals(loader.apply(offset),x);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.CompactionEstimatorTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGainEstimator() throws Exception {
  final int MB=1024 * 1024;
  final int blobSize=2 * MB;
  FileStore fileStore=new FileStore(directory,2,false);
  SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
  NodeBuilder builder=nodeStore.getRoot().builder();
  NodeBuilder c1=builder.child("c1");
  c1.setProperty("a",createBlob(nodeStore,blobSize));
  c1.setProperty("b","foo");
  NodeBuilder c2=builder.child("c2");
  c2.setProperty("a",createBlob(nodeStore,blobSize));
  c2.setProperty("b","foo");
  NodeBuilder c3=builder.child("c3");
  c3.setProperty("a",createBlob(nodeStore,blobSize));
  c3.setProperty("b","foo");
  nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=nodeStore.getRoot().builder();
  builder.child("c1").remove();
  builder.child("c2").remove();
  nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  fileStore.flush();
  try {
    assertTrue(fileStore.estimateCompactionGain(Suppliers.ofInstance(false)).estimateCompactionGain(0) > 60);
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.FileStoreIT </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompaction() throws IOException {
  int largeBinarySize=10 * 1024 * 1024;
  FileStore store=new FileStore(directory,1,false);
  SegmentWriter writer=store.getTracker().getWriter();
  SegmentNodeState base=store.getHead();
  SegmentNodeBuilder builder=base.builder();
  byte[] data=new byte[largeBinarySize];
  new Random().nextBytes(data);
  SegmentBlob blob=writer.writeStream(new ByteArrayInputStream(data));
  builder.setProperty("foo",blob);
  builder.getNodeState();
  builder.setProperty("foo","bar");
  SegmentNodeState head=builder.getNodeState();
  assertTrue(store.setHead(base,head));
  assertEquals("bar",store.getHead().getString("foo"));
  Compactor compactor=new Compactor(store.getTracker());
  SegmentNodeState compacted=compactor.compact(EMPTY_NODE,head,EMPTY_NODE);
  store.close();
  store=new FileStore(directory,1,false);
  head=store.getHead();
  assertTrue(store.size() > largeBinarySize);
  builder=head.builder();
  builder.setChildNode("old",head);
  builder.getNodeState();
  assertTrue(store.setHead(head,compacted));
  store.close();
  store=new FileStore(directory,1,false);
  assertTrue(store.size() > largeBinarySize);
  store.cleanup();
  assertTrue(store.size() > largeBinarySize);
  store.close();
  store=new FileStore(directory,1,false);
  head=store.getHead();
  assertTrue(store.size() > largeBinarySize);
  writer=new SegmentWriter(store,V_11,"");
  compactor=new Compactor(store.getTracker());
  compacted=compactor.compact(EMPTY_NODE,head,EMPTY_NODE);
  builder=head.builder();
  builder.setChildNode("old",head);
  builder.getNodeState();
  writer.flush();
  assertTrue(store.setHead(head,compacted));
  store.close();
  store=new FileStore(directory,1,false);
  assertTrue(store.size() > largeBinarySize);
  store.cleanup();
  assertTrue(store.size() < largeBinarySize);
  store.close();
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nonBlockingROStore() throws IOException {
  FileStore store=new FileStore(directory,1,false);
  store.flush();
  SegmentNodeState base=store.getHead();
  SegmentNodeBuilder builder=base.builder();
  builder.setProperty("step","a");
  store.setHead(base,builder.getNodeState());
  store.flush();
  ReadOnlyStore ro=null;
  try {
    ro=new ReadOnlyStore(directory);
    assertEquals(store.getHead(),ro.getHead());
  }
  finally {
    if (ro != null) {
      ro.close();
    }
    store.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.FileStoreStatsTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void initCall() throws Exception {
  FileStoreStats stats=new FileStoreStats(statsProvider,fileStore,1000);
  assertEquals(1000,stats.getApproximateSize());
  stats.written(500);
  assertEquals(1500,stats.getApproximateSize());
  stats.reclaimed(250);
  assertEquals(1250,stats.getApproximateSize());
  assertEquals(1,stats.getTarFileCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tarWriterIntegration() throws Exception {
  FileStoreStats stats=new FileStoreStats(statsProvider,fileStore,0);
  UUID id=UUID.randomUUID();
  long msb=id.getMostSignificantBits();
  long lsb=id.getLeastSignificantBits() & (-1 >>> 4);
  byte[] data="Hello, World!".getBytes(UTF_8);
  File file=segmentFolder.newFile();
  TarWriter writer=new TarWriter(file,stats);
  writer.writeEntry(msb,lsb,data,0,data.length);
  writer.close();
  assertEquals(stats.getApproximateSize(),file.length());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.JournalReaderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleton() throws IOException {
  JournalReader journalReader=createJournalReader("one 1");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiple() throws IOException {
  JournalReader journalReader=createJournalReader("one 1\ntwo 2\nthree 3");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("three",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("two",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpaces() throws IOException {
  JournalReader journalReader=createJournalReader("\n \n  \n   ");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIgnoreInvalid() throws IOException {
  JournalReader journalReader=createJournalReader("one 1\ntwo 2\ninvalid\nthree 3");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("three",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("two",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.ReversedLinesFileReaderTestParamFile </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDataIntegrityWithBufferedReader() throws URISyntaxException, IOException {
  File testFileIso=createFile(data);
  reversedLinesFileReader=new ReversedLinesFileReader(testFileIso,buffSize,encoding);
  Stack<String> lineStack=new Stack<String>();
  bufferedReader=new BufferedReader(new InputStreamReader(new FileInputStream(testFileIso),encoding));
  String line;
  while ((line=bufferedReader.readLine()) != null) {
    lineStack.push(line);
  }
  while ((line=reversedLinesFileReader.readLine()) != null) {
    String lineFromBufferedReader=lineStack.pop();
    assertEquals(lineFromBufferedReader,line);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.TarFileTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWriteAndRead() throws IOException {
  UUID id=UUID.randomUUID();
  long msb=id.getMostSignificantBits();
  long lsb=id.getLeastSignificantBits() & (-1 >>> 4);
  byte[] data="Hello, World!".getBytes(UTF_8);
  TarWriter writer=new TarWriter(file);
  try {
    writer.writeEntry(msb,lsb,data,0,data.length);
    assertEquals(ByteBuffer.wrap(data),writer.readEntry(msb,lsb));
  }
  finally {
    writer.close();
  }
  assertEquals(4096,file.length());
  TarReader reader=TarReader.open(file,false);
  try {
    assertEquals(ByteBuffer.wrap(data),reader.readEntry(msb,lsb));
  }
  finally {
    reader.close();
  }
  reader=TarReader.open(file,false);
  try {
    assertEquals(ByteBuffer.wrap(data),reader.readEntry(msb,lsb));
  }
  finally {
    reader.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.TarWriterTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Regression test for OAK-2800
 */
@Test public void collectReferences() throws IOException {
  SegmentGraphBuilder graphBuilder=new SegmentGraphBuilder();
  Node c=graphBuilder.createNode("c");
  Node b=graphBuilder.createNode("b",c);
  Node a=graphBuilder.createNode("a",b);
  Node n=graphBuilder.createNode("n");
  Node z=graphBuilder.createNode("z");
  Node y=graphBuilder.createNode("y",z);
  assertEquals(singleton(b),a.getReferences());
  assertEquals(singleton(c),b.getReferences());
  assertTrue(c.getReferences().isEmpty());
  assertEquals(singleton(z),y.getReferences());
  assertTrue(z.getReferences().isEmpty());
  File tar=createTempFile(getClass().getName(),"tar");
  TarWriter tarWriter=new TarWriter(tar);
  try {
    y.write(tarWriter);
    b.write(tarWriter);
    a.write(tarWriter);
    n.write(tarWriter);
    Set<UUID> references=newHashSet();
    references.add(a.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(c + " must be in references as " + a+ " has an transitive reference to "+ c+ " through "+ b+ ", "+ a+ " must not be in references as "+ a+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(b.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(b + " must be in references as " + a+ " has a direct reference to "+ b+ ", "+ a+ " must not be in references as "+ a+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(y.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(z + " must be in references as " + y+ " has a direct reference to "+ z+ ", "+ y+ " must not be in references as "+ y+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(z),toNodes(graphBuilder,references));
    references.clear();
    references.add(c.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(c + " must be in references as " + c+ " is not in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(z.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(z + " must be in references as " + z+ " is not in the TarWriter "+ "no other elements must be in references.",singleton(z),toNodes(graphBuilder,references));
    references.clear();
    references.add(n.getUUID());
    tarWriter.collectReferences(references);
    assertTrue("references must be empty as " + n + " has no references "+ "and "+ n+ " is in the TarWriter",references.isEmpty());
  }
  finally {
    tarWriter.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.migration.DepthFirstNodeIteratorTest </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPath(){
  Map<String,String> nameToPath=new HashMap<String,String>();
  nameToPath.put("countries","/countries");
  nameToPath.put("uk","/countries/uk");
  nameToPath.put("frognal","/countries/uk/cities/london/districts/frognal");
  nameToPath.put("paris","/countries/france/cities/paris");
  DepthFirstNodeIterator iterator=new DepthFirstNodeIterator(store.getRoot());
  while (iterator.hasNext()) {
    String expectedPath=nameToPath.remove(iterator.next().getName());
    if (expectedPath == null) {
      continue;
    }
    assertEquals(expectedPath,iterator.getPath());
  }
  assertTrue(nameToPath.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterate(){
  Map<String,String[]> subtrees=new HashMap<String,String[]>();
  subtrees.put("uk",new String[]{"cities","london","districts","frognal"});
  subtrees.put("germany",new String[]{});
  subtrees.put("france",new String[]{"cities","paris"});
  DepthFirstNodeIterator iterator=new DepthFirstNodeIterator(store.getRoot());
  assertTrue(iterator.hasNext());
  assertEquals("countries",iterator.next().getName());
  for (int i=0; i < 3; i++) {
    assertTrue(iterator.hasNext());
    String country=iterator.next().getName();
    for (    String node : subtrees.remove(country)) {
      assertTrue(iterator.hasNext());
      assertEquals(node,iterator.next().getName());
    }
  }
  assertFalse(iterator.hasNext());
  assertTrue(subtrees.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.DataStoreTestBase </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSync() throws Exception {
  final int mb=1 * 1024 * 1024;
  final int blobSize=5 * mb;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  cl.run();
  try {
    assertEquals(primary.getHead(),secondary.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() < mb);
  assertTrue(secondary.size() < mb);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.MBeanTest </h4><pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-8 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-2086") public void testClientAndServerEmptyConfig() throws Exception {
  final StandbyServer server=new StandbyServer(port,this.storeS);
  server.start();
  System.setProperty(StandbyClient.CLIENT_ID_PROPERTY_NAME,"Bar");
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  ObjectName clientStatus=new ObjectName(client.getMBeanName());
  ObjectName serverStatus=new ObjectName(server.getMBeanName());
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(3,instances.size());
    ObjectName connectionStatus=null;
    for (    ObjectName s : instances) {
      if (!s.equals(clientStatus) && !s.equals(serverStatus))       connectionStatus=s;
    }
    assertNotNull(connectionStatus);
    assertTrue(jmxServer.isRegistered(clientStatus));
    assertTrue(jmxServer.isRegistered(serverStatus));
    assertTrue(jmxServer.isRegistered(connectionStatus));
    String m=jmxServer.getAttribute(clientStatus,"Mode").toString();
    if (!m.startsWith("client: "))     fail("unexpected mode " + m);
    assertEquals("master",jmxServer.getAttribute(serverStatus,"Mode"));
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals("0",jmxServer.getAttribute(clientStatus,"FailedRequests").toString());
    assertEquals("0",jmxServer.getAttribute(clientStatus,"SecondsSinceLastSuccess").toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcFailedRequests",null,null).toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcSecondsSinceLastSuccess",null,null).toString());
    Thread.sleep(1000);
    assertEquals("0",jmxServer.getAttribute(clientStatus,"FailedRequests").toString());
    assertEquals("1",jmxServer.getAttribute(clientStatus,"SecondsSinceLastSuccess").toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcFailedRequests",null,null).toString());
    assertEquals("1",jmxServer.invoke(clientStatus,"calcSecondsSinceLastSuccess",null,null).toString());
    assertEquals(new Long(2),jmxServer.getAttribute(connectionStatus,"TransferredSegments"));
    assertEquals(new Long(128),jmxServer.getAttribute(connectionStatus,"TransferredSegmentBytes"));
    jmxServer.invoke(serverStatus,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(serverStatus,"Running"));
    m=jmxServer.getAttribute(serverStatus,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STOPPED) && !m.equals("channel unregistered"))     fail("unexpected Status" + m);
    jmxServer.invoke(serverStatus,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    m=jmxServer.getAttribute(serverStatus,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STARTING) && !m.equals("channel unregistered"))     fail("unexpected Status" + m);
    jmxServer.invoke(clientStatus,"stop",null,null);
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(false,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(clientStatus,"Status"));
    jmxServer.invoke(clientStatus,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_RUNNING,jmxServer.getAttribute(clientStatus,"Status"));
  }
  finally {
    client.close();
    server.close();
  }
  assertTrue(!jmxServer.isRegistered(clientStatus));
  assertTrue(!jmxServer.isRegistered(serverStatus));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServerEmptyConfig() throws Exception {
  final StandbyServer server=new StandbyServer(this.port,this.storeS);
  server.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(1,instances.size());
    status=instances.toArray(new ObjectName[0])[0];
    assertEquals(new ObjectName(server.getMBeanName()),status);
    assertTrue(jmxServer.isRegistered(status));
    assertEquals("primary",jmxServer.getAttribute(status,"Mode"));
    String m=jmxServer.getAttribute(status,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STARTING) && !m.equals("channel unregistered"))     fail("unexpected Status " + m);
    assertEquals(StandbyStatusMBean.STATUS_STARTING,jmxServer.getAttribute(status,"Status"));
    assertEquals(true,jmxServer.getAttribute(status,"Running"));
    jmxServer.invoke(status,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
    jmxServer.invoke(status,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_RUNNING,jmxServer.getAttribute(status,"Status"));
  }
  finally {
    server.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClientEmptyConfigNoServer() throws Exception {
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(1,instances.size());
    status=instances.toArray(new ObjectName[0])[0];
    assertEquals(new ObjectName(client.getMBeanName()),status);
    assertTrue(jmxServer.isRegistered(status));
    String m=jmxServer.getAttribute(status,"Mode").toString();
    if (!m.startsWith("client: "))     fail("unexpected mode " + m);
    assertEquals("0",jmxServer.getAttribute(status,"FailedRequests").toString());
    assertEquals("-1",jmxServer.getAttribute(status,"SecondsSinceLastSuccess").toString());
    assertEquals(StandbyStatusMBean.STATUS_INITIALIZING,jmxServer.getAttribute(status,"Status"));
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    jmxServer.invoke(status,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
    jmxServer.invoke(status,"start",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
  }
  finally {
    client.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClientNoServer() throws Exception {
  System.setProperty(StandbyClient.CLIENT_ID_PROPERTY_NAME,"Foo");
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(client.getMBeanName());
  try {
    assertTrue(jmxServer.isRegistered(status));
    assertEquals("client: Foo",jmxServer.getAttribute(status,"Mode"));
    assertEquals("1",jmxServer.getAttribute(status,"FailedRequests").toString());
    assertEquals("-1",jmxServer.getAttribute(status,"SecondsSinceLastSuccess").toString());
    assertEquals("1",jmxServer.invoke(status,"calcFailedRequests",null,null).toString());
    assertEquals("-1",jmxServer.invoke(status,"calcSecondsSinceLastSuccess",null,null).toString());
  }
  finally {
    client.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.StandbyTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSync() throws Exception {
  final int mb=1 * 1024 * 1024;
  final int blobSize=5 * mb;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize,150);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  cl.run();
  try {
    assertEquals(primary.getHead(),secondary.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() > blobSize);
  assertTrue(secondary.size() > blobSize);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.StandbyTestIT </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2430
 */
@Test public void testSyncLoop() throws Exception {
  final int blobSize=25 * 1024;
  final int dataNodes=5000;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize,dataNodes);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  try {
    for (int i=0; i < 5; i++) {
      String cp=store.checkpoint(Long.MAX_VALUE);
      primary.flush();
      cl.run();
      assertEquals(primary.getHead(),secondary.getHead());
      assertTrue(store.release(cp));
      cl.cleanup();
      assertTrue(secondary.size() > blobSize);
    }
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() > blobSize);
  assertTrue(secondary.size() > blobSize);
  long primaryFs=FileUtils.sizeOf(directoryS);
  long secondaryFs=FileUtils.sizeOf(directoryC);
  assertTrue(secondaryFs < primaryFs * 1.15);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tika.CSVFileBinaryResourceProviderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetBinaries() throws Exception {
  StringBuilder sb=new StringBuilder();
  CSVPrinter p=new CSVPrinter(sb,CSVFileBinaryResourceProvider.FORMAT);
  p.printRecord("a",123,"text/plain",null,"/a");
  p.printRecord("a2",123,"text/plain",null,"/a/c");
  p.printRecord("b",null,"text/plain",null,"/b");
  p.printRecord(null,null,"text/plain",null,"/c");
  File dataFile=temporaryFolder.newFile();
  Files.write(sb,dataFile,Charsets.UTF_8);
  CSVFileBinaryResourceProvider provider=new CSVFileBinaryResourceProvider(dataFile,new MemoryBlobStore());
  Map<String,BinaryResource> binaries=provider.getBinaries("/").uniqueIndex(BinarySourceMapper.BY_BLOBID);
  assertEquals(3,binaries.size());
  assertEquals("a",binaries.get("a").getBlobId());
  assertEquals("/a",binaries.get("a").getPath());
  binaries=provider.getBinaries("/a").uniqueIndex(BinarySourceMapper.BY_BLOBID);
  assertEquals(1,binaries.size());
  provider.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tika.NodeStoreBinaryResourceProviderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void countBinaries() throws Exception {
  NodeBuilder builder=root.builder();
  createFileNode(builder,"a",new IdBlob("hello",null),"text/plain");
  createFileNode(builder,"b",new IdBlob("hello","id1"),"text/plain");
  createFileNode(builder.child("a2"),"c",new IdBlob("hello","id2"),"text/foo").setProperty(JcrConstants.JCR_ENCODING,"bar");
  NodeStore store=new MemoryNodeStore(builder.getNodeState());
  BlobStore blobStore=new MemoryBlobStore();
  NodeStoreBinaryResourceProvider extractor=new NodeStoreBinaryResourceProvider(store,blobStore);
  assertEquals(2,extractor.getBinaries("/").size());
  assertEquals(1,extractor.getBinaries("/a2").size());
  BinaryResource bs=extractor.getBinaries("/a2").first().get();
  assertEquals("text/foo",bs.getMimeType());
  assertEquals("bar",bs.getEncoding());
  assertEquals("id2",bs.getBlobId());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void csvGenerator() throws Exception {
  File csv=new File(temporaryFolder.getRoot(),"test.csv");
  BlobStore blobStore=new MemoryBlobStore();
  NodeBuilder builder=root.builder();
  createFileNode(builder,"a",blobOf("foo",blobStore),"text/plain");
  createFileNode(builder,"b",blobOf("hello",blobStore),"text/plain");
  NodeStore store=new MemoryNodeStore(builder.getNodeState());
  NodeStoreBinaryResourceProvider extractor=new NodeStoreBinaryResourceProvider(store,blobStore);
  CSVFileGenerator generator=new CSVFileGenerator(csv);
  generator.generate(extractor.getBinaries("/"));
  CSVFileBinaryResourceProvider csvbrp=new CSVFileBinaryResourceProvider(csv,blobStore);
  assertEquals(2,csvbrp.getBinaries("/").size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tika.TikaHelperTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void indexedTypes() throws Exception {
  File config=temporaryFolder.newFile();
  String configText="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<properties>\n" + "  <detectors>\n"+ "    <detector class=\"org.apache.tika.detect.DefaultDetector\"/>\n"+ "  </detectors>\n"+ "  <parsers>\n"+ "    <parser class=\"org.apache.tika.parser.DefaultParser\"/>\n"+ "    <parser class=\"org.apache.tika.parser.EmptyParser\">\n"+ "      <mime>application/xml</mime>\n"+ "    </parser>\n"+ "  </parsers>\n"+ "</properties>";
  Files.write(configText,config,Charsets.UTF_8);
  TikaHelper tika=new TikaHelper(config);
  assertFalse(tika.isIndexed("application/xml"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tree.TreeLocationTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNullLocation(){
  TreeLocation xyz=nullLocation.getChild("x").getChild("y").getChild("z");
  Assert.assertEquals("x/y/z",xyz.getPath());
  assertEquals("x/y",xyz.getParent().getPath());
  assertEquals("x",xyz.getParent().getParent().getPath());
  assertEquals(nullLocation,xyz.getParent().getParent().getParent());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getDeepLocation(){
  TreeLocation p=TreeLocation.create(root,"/z/1/2/p");
  assertNotNull(p.getProperty());
  assertEquals("/z/1/2/p",p.getPath());
  TreeLocation n=TreeLocation.create(root,"/z/1/2/3/4");
  assertNull(n.getTree());
  assertNull(n.getProperty());
  assertEquals("/z/1/2/3/4",n.getPath());
  TreeLocation two=n.getParent().getParent();
  assertNotNull(two.getTree());
  assertEquals("/z/1/2",two.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyLocation(){
  TreeLocation a=TreeLocation.create(root,"/a");
  assertNotNull(a.getProperty());
  TreeLocation abc=a.getChild("b").getChild("c");
  assertEquals("/a/b/c",abc.getPath());
  assertNull(abc.getProperty());
  TreeLocation ab=abc.getParent();
  assertEquals("/a/b",ab.getPath());
  assertNull(ab.getProperty());
  assertEquals(a.getProperty(),ab.getParent().getProperty());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNodeLocation(){
  TreeLocation x=TreeLocation.create(root,"/x");
  assertNotNull(x.getTree());
  TreeLocation xyz=x.getChild("y").getChild("z");
  assertEquals("/x/y/z",xyz.getPath());
  assertNull(xyz.getTree());
  TreeLocation xy=xyz.getParent();
  assertEquals("/x/y",xy.getPath());
  assertNull(xy.getTree());
  assertEquals(x.getTree(),xy.getParent().getTree());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tree.TreeTypeProviderTest </h4><pre class="type-12 type-6 type-4 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testGetTypeWithDefaultParentType(){
  for (  TypeTest test : tests) {
    TreeType typeIfParentDefault=typeProvider.getType(root.getTree(test.path),TreeType.DEFAULT);
    if (TreeType.DEFAULT == test.parentType) {
      assertEquals(test.path,test.type,typeIfParentDefault);
    }
 else {
      assertNotEquals(test.path,test.type,typeIfParentDefault);
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTypeForImmutableTreeWithParent(){
  Tree t=RootFactory.createReadOnlyRoot(root).getTree("/:hidden/testPath");
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t,TreeType.HIDDEN));
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t));
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t,TreeType.DEFAULT));
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t,TreeType.ACCESS_CONTROL));
  assertEquals(TreeType.HIDDEN,typeProvider.getType(t,TreeType.VERSION));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTypeForRootTree(){
  Tree t=root.getTree("/");
  assertEquals(TreeType.DEFAULT,typeProvider.getType(t));
  assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.DEFAULT));
  assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.HIDDEN));
  assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.VERSION));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTypeForImmutableTree(){
  for (  String path : new String[]{"/","/testPath"}) {
    Tree t=RootFactory.createReadOnlyRoot(root).getTree(path);
    assertEquals(TreeType.DEFAULT,typeProvider.getType(t));
    assertEquals(TreeType.DEFAULT,typeProvider.getType(t));
    assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.DEFAULT));
    assertEquals(TreeType.DEFAULT,typeProvider.getType(t,TreeType.HIDDEN));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tree.impl.ImmutableTreeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperties(){
  ImmutableTree orderable=immutable.getChild("orderable");
  List<String> propNames=Lists.newArrayList(TreeConstants.OAK_CHILD_ORDER,JcrConstants.JCR_PRIMARYTYPE);
  for (  PropertyState ps : orderable.getProperties()) {
    assertTrue(propNames.remove(ps.getName()));
  }
  assertEquals(2,orderable.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonExisting(){
  ImmutableTree child=immutable.getChild("nonExisting");
  assertNotNull(child);
  assertFalse(child.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testExists(){
  ImmutableTree child=immutable.getChild("x");
  assertTrue(child.exists());
}

</code></pre>

<br>
<pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetPropertyStatus(){
  ImmutableTree orderable=immutable.getChild("orderable");
  assertSame(Tree.Status.UNCHANGED,orderable.getPropertyStatus(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPropertyCount(){
  ImmutableTree orderable=immutable.getChild("orderable");
  assertEquals(2,orderable.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPath(){
  assertEquals("/",immutable.getPath());
  immutable=immutable.getChild("x");
  assertEquals("/x",immutable.getPath());
  immutable=immutable.getChild("y");
  assertEquals("/x/y",immutable.getPath());
  immutable=immutable.getChild("z");
  assertEquals("/x/y/z",immutable.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasHiddenProperty(){
  ImmutableTree orderable=immutable.getChild("orderable");
  assertTrue(orderable.hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetParent(){
  ImmutableTree child=immutable.getChild("x");
  assertNotNull(child.getParent());
  assertEquals("/",child.getParent().getPath());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetHiddenProperty(){
  ImmutableTree orderable=immutable.getChild("orderable");
  assertNotNull(orderable.getProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.value.BinaryBasedBlobTest </h4><pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getStream() throws RepositoryException, IOException {
  byte[] bytes="just a test".getBytes();
  Binary binary=new TestBinary(bytes);
  Blob blob=new BinaryBasedBlob(binary);
  assertEquals(bytes.length,blob.length());
  InputStream expected=binary.getStream();
  InputStream actual=blob.getNewStream();
  try {
    for (int e=expected.read(); e != -1; e=expected.read()) {
      assertEquals(e,actual.read());
    }
    assertEquals(-1,actual.read());
  }
  finally {
    expected.close();
    actual.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.version.ReadOnlyVersionManagerTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetVersionableNonExistingWorkspace() throws Exception {
  Tree versionHistory=checkNotNull(versionManager.getVersionHistory(root.getTree("/a")));
  assertNull(versionManager.getVersionable(versionHistory,"nonExistingWorkspaceName"));
  assertNull(versionManager.getVersionable(versionHistory.getChild(JcrConstants.JCR_ROOTVERSION),"nonExistingWorkspaceName"));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetVersionableForNonVersionTree() throws Exception {
  assertNull(versionManager.getVersionable(versionManager.getVersionStorage(),workspaceName));
  assertNull(versionManager.getVersionable(versionable,workspaceName));
  assertNull(versionManager.getVersionable(root.getTree("/"),workspaceName));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsVersionStoreTree() throws Exception {
  assertFalse(ReadOnlyVersionManager.isVersionStoreTree(root.getTree("/")));
  assertFalse(ReadOnlyVersionManager.isVersionStoreTree(root.getTree("/a")));
  assertFalse(ReadOnlyVersionManager.isVersionStoreTree(root.getTree("/a/b/c")));
  assertTrue(ReadOnlyVersionManager.isVersionStoreTree(root.getTree(VersionConstants.VERSION_STORE_PATH)));
  Tree versionHistory=versionManager.getVersionHistory(root.getTree("/a"));
  assertNotNull(versionHistory);
  assertFalse(ReadOnlyVersionManager.isVersionStoreTree(versionHistory));
  assertTrue(ReadOnlyVersionManager.isVersionStoreTree(versionHistory.getParent()));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetVersionableMissingPathProperty() throws Exception {
  Tree versionHistory=checkNotNull(versionManager.getVersionHistory(root.getTree("/a")));
  versionHistory.removeProperty(workspaceName);
  assertNull(versionManager.getVersionable(versionHistory,workspaceName));
  assertNull(versionManager.getVersionable(versionHistory.getChild(JcrConstants.JCR_ROOTVERSION),workspaceName));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetVersionableTargetRemoved() throws Exception {
  Tree baseVersion=checkNotNull(versionManager.getBaseVersion(versionable));
  versionable.remove();
  root.commit();
  Tree t=versionManager.getVersionable(baseVersion,workspaceName);
  assertNotNull(t);
  assertFalse(t.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.LargeQueryTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleOr() throws ParseException {
  StringBuilder buff=new StringBuilder("//*[");
  StringBuilder buff2=new StringBuilder("select [jcr:path], [jcr:score], * from [nt:base] as a where [x] in(");
  for (int i=0; i < 100000; i++) {
    if (i > 0) {
      buff.append(" or ");
      buff2.append(", ");
    }
    buff.append("@x=").append(i);
    buff2.append(i);
  }
  buff.append("]");
  buff2.append(")");
  String xpath=buff.toString();
  XPathToSQL2Converter conv=new XPathToSQL2Converter();
  String sql2=conv.convert(xpath);
  buff2.append(" /* xpath: ").append(xpath).append(" */");
  assertEquals(buff2.toString(),sql2);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCombinedOr() throws ParseException {
  StringBuilder buff=new StringBuilder("//*[");
  StringBuilder buff2=new StringBuilder("select [jcr:path], [jcr:score], * from [nt:base] as a where [x] in(");
  int step=111;
  for (int i=0; i < 5000; i++) {
    if (i % step == 2) {
      if (i > 0) {
        buff.append(" or ");
      }
      buff.append("@x>").append(i);
      buff2.append(") union select [jcr:path], [jcr:score], * from [nt:base] as a " + "where [x] > ").append(i);
      buff2.append(" union select [jcr:path], [jcr:score], * from [nt:base] as a " + "where [x] in(");
    }
 else {
      if (i > 0) {
        buff.append(" or ");
      }
      buff.append("@x=").append(i);
      if (i > 0 && i % step != 3) {
        buff2.append(", ");
      }
      buff2.append(i);
    }
  }
  buff.append("]");
  buff2.append(")");
  String xpath=buff.toString();
  XPathToSQL2Converter conv=new XPathToSQL2Converter();
  String sql2=conv.convert(xpath);
  buff2.append(" /* xpath: ").append(xpath).append(" */");
  assertEquals(buff2.toString(),sql2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.SQL2OptimiseQueryTest </h4><pre class="type-7 type-6 type-19 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * ensure that an optimisation is available for the provided queries.
 * @throws ParseException
 */
@Test public void optimise() throws ParseException {
  SQL2Parser parser=new SQL2Parser(getMappings(),getTypes(),qeSettings);
  String statement;
  Query original, optimised;
  statement="SELECT * FROM [nt:unstructured] AS c " + "WHERE " + "(c.[p1]='a' OR c.[p2]='b') ";
  original=parser.parse(statement,false);
  assertNotNull(original);
  optimised=original.buildAlternativeQuery();
  assertNotNull(optimised);
  assertNotSame(original,optimised);
  assertTrue(optimised instanceof UnionQueryImpl);
  statement="SELECT * FROM [nt:unstructured] AS c " + "WHERE " + "(c.[p1]='a' OR c.[p2]='b') "+ "AND "+ "ISDESCENDANTNODE(c, '/test') ";
  original=parser.parse(statement,false);
  assertNotNull(original);
  optimised=original.buildAlternativeQuery();
  assertNotNull(optimised);
  assertNotSame(original,optimised);
  statement="SELECT * FROM [nt:unstructured] AS c " + "WHERE " + "(c.[p1]='a' OR c.[p2]='b' OR c.[p3]='c') "+ "AND "+ "ISDESCENDANTNODE(c, '/test') ";
  original=parser.parse(statement,false);
  assertNotNull(original);
  optimised=original.buildAlternativeQuery();
  assertNotNull(optimised);
  assertNotSame(original,optimised);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.UnionQueryTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOrderLimitOffset() throws Exception {
  String left="SELECT [jcr:path] FROM [nt:base] AS a WHERE ISDESCENDANTNODE(a, '/UnionQueryTest')";
  String right="SELECT [jcr:path] FROM [nt:base] AS a WHERE ISDESCENDANTNODE(a, '/UnionQueryTest')";
  String order="ORDER BY [jcr:path]";
  String union=String.format("%s UNION %s %s",left,right,order);
  final int limit=3;
  final int offset=2;
  String[] expected={"/UnionQueryTest/a/b/c","/UnionQueryTest/a/b/c/d","/UnionQueryTest/a/b/c/d/e"};
  Result result=qe.executeQuery(union,QueryEngineImpl.SQL2,limit,offset,QueryEngine.NO_BINDINGS,QueryEngine.NO_MAPPINGS);
  List<ResultRow> rows=Lists.newArrayList(result.getRows());
  assertEquals(expected.length,rows.size());
  int i=0;
  for (  ResultRow rr : result.getRows()) {
    assertEquals(rr.getPath(),expected[i++]);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.facet.FacetResultTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResult() throws Exception {
  QueryResult queryResult=mock(QueryResult.class);
  when(queryResult.getColumnNames()).thenReturn(new String[]{"rep:facet(text)","jcr:path","rep:facet(jcr:title)"});
  RowIterator rows=mock(RowIterator.class);
  when(rows.hasNext()).thenReturn(true);
  Row row=mock(Row.class);
  Value value=mock(Value.class);
  when(value.getString()).thenReturn("{}");
  when(row.getValue("rep:facet(text)")).thenReturn(value);
  Value value2=mock(Value.class);
  when(value2.getString()).thenReturn("{\"a\" : 2, \"b\" : 1}");
  when(row.getValue("rep:facet(jcr:title)")).thenReturn(value2);
  when(rows.nextRow()).thenReturn(row);
  when(queryResult.getRows()).thenReturn(rows);
  FacetResult facetResult=new FacetResult(queryResult);
  assertNotNull(facetResult.getDimensions());
  assertEquals(2,facetResult.getDimensions().size());
  assertTrue(facetResult.getDimensions().contains("text"));
  assertTrue(facetResult.getDimensions().contains("jcr:title"));
  assertNotNull(facetResult.getFacets("text"));
  assertTrue(facetResult.getFacets("text").isEmpty());
  assertNotNull(facetResult.getFacets("jcr:title"));
  assertEquals(2,facetResult.getFacets("jcr:title").size());
  assertEquals("a",facetResult.getFacets("jcr:title").get(0).getLabel());
  assertEquals(2,facetResult.getFacets("jcr:title").get(0).getCount(),0);
  assertEquals("b",facetResult.getFacets("jcr:title").get(1).getLabel());
  assertEquals(1,facetResult.getFacets("jcr:title").get(1).getCount(),0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.AdvancedIndexTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copy() throws Exception {
  Filter f=new FilterImpl(null,"SELECT * FROM [nt:file]",new QueryEngineSettings());
  IndexPlan.Builder b=new IndexPlan.Builder();
  IndexPlan plan1=b.setEstimatedEntryCount(10).setFilter(f).setDelayed(true).build();
  IndexPlan plan2=plan1.copy();
  plan2.setFilter(new FilterImpl(null,"SELECT * FROM [oak:Unstructured]",new QueryEngineSettings()));
  assertEquals(plan1.getEstimatedEntryCount(),10);
  assertEquals(plan2.getEstimatedEntryCount(),10);
  assertTrue(plan1.isDelayed());
  assertTrue(plan2.isDelayed());
  assertEquals(plan1.getFilter().getQueryStatement(),"SELECT * FROM [nt:file]");
  assertEquals(plan2.getFilter().getQueryStatement(),"SELECT * FROM [oak:Unstructured]");
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void builder(){
  IndexPlan.Builder b=new IndexPlan.Builder();
  IndexPlan plan=b.setEstimatedEntryCount(10).build();
  assertEquals(10,plan.getEstimatedEntryCount());
  b.setEstimatedEntryCount(20);
  assertEquals(10,plan.getEstimatedEntryCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.FilterTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void pathRestrictions() throws Exception {
  FilterImpl f=new FilterImpl();
  assertEquals("/",f.getPath());
  assertEquals(Filter.PathRestriction.NO_RESTRICTION,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.ALL_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.DIRECT_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.PARENT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  f.restrictPath("/",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  f.restrictPath("/test/y",Filter.PathRestriction.DIRECT_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.PARENT);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test2",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void pathRestrictionsRandomized() throws Exception {
  ArrayList<String> paths=new ArrayList<String>();
  paths.add("/");
  for (int i='a'; i <= 'c'; i++) {
    String p1="/" + (char)i;
    paths.add(p1);
    for (int j='a'; j <= 'c'; j++) {
      String p2="/" + (char)j;
      paths.add(p1 + p2);
      for (int k='a'; k <= 'c'; k++) {
        String p3="/" + (char)k;
        paths.add(p1 + p2 + p3);
      }
    }
  }
  Random r=new Random(1);
  for (int i=0; i < 10000; i++) {
    String p1=paths.get(r.nextInt(paths.size()));
    String p2=paths.get(r.nextInt(paths.size()));
    Filter.PathRestriction r1=Filter.PathRestriction.values()[r.nextInt(Filter.PathRestriction.values().length)];
    Filter.PathRestriction r2=Filter.PathRestriction.values()[r.nextInt(Filter.PathRestriction.values().length)];
    FilterImpl f1=new FilterImpl();
    f1.restrictPath(p1,r1);
    FilterImpl f2=new FilterImpl();
    f2.restrictPath(p2,r2);
    FilterImpl fc=new FilterImpl();
    fc.restrictPath(p1,r1);
    fc.restrictPath(p2,r2);
    int tooMany=0;
    for (    String p : paths) {
      boolean expected=f1.testPath(p) && f2.testPath(p);
      boolean got=fc.testPath(p);
      if (expected == got) {
      }
 else       if (expected && !got) {
        fc=new FilterImpl();
        fc.restrictPath(p1,r1);
        fc.restrictPath(p2,r2);
        fail("not matched: " + p1 + "/"+ r1.name()+ " && "+ p2+ "/"+ r2.name());
      }
 else {
        tooMany++;
      }
    }
    if (tooMany > 3) {
      fail("too many matches: " + p1 + "/"+ r1.name()+ " && "+ p2+ "/"+ r2.name()+ " superfluous: "+ tooMany);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyRestriction(){
  PropertyValue one=PropertyValues.newString("1");
  PropertyValue two=PropertyValues.newString("2");
  FilterImpl f=new FilterImpl();
  assertTrue(null == f.getPropertyRestriction("x"));
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2]]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1.., ..2)]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1.., ..2), 2]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1.., ..1]]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1.., ..1], (1..]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[1, ..1)]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.NOT_EQUAL,null);
  assertEquals("Filter(, path=*, property=[x=[is not null]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[is not null, ..1)]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[is not null, ..1), 2]])",f.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.TraversingIndexTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void traverse() throws Exception {
  NodeBuilder builder=EMPTY_NODE.builder();
  NodeBuilder parents=builder.child("parents");
  parents.child("p0").setProperty("id",0);
  parents.child("p1").setProperty("id",1);
  parents.child("p2").setProperty("id",2);
  NodeBuilder children=builder.child("children");
  children.child("c1").setProperty("p","1");
  children.child("c2").setProperty("p","1");
  children.child("c3").setProperty("p","2");
  children.child("c4").setProperty("p","3");
  NodeState root=builder.getNodeState();
  TraversingIndex t=new TraversingIndex();
  FilterImpl f=new FilterImpl();
  f.setPath("/");
  Cursor c=t.query(f,root);
  List<String> paths=new ArrayList<String>();
  while (c.hasNext()) {
    paths.add(c.next().getPath());
  }
  Collections.sort(paths);
  assertEquals(Arrays.asList("/","/children","/children/c1","/children/c2","/children/c3","/children/c4","/parents","/parents/p0","/parents/p1","/parents/p2"),paths);
  assertFalse(c.hasNext());
  assertFalse(c.hasNext());
  f.setPath("/nowhere");
  c=t.query(f,root);
  assertFalse(c.hasNext());
  assertFalse(c.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteRepositoryTest </h4><pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testSuccessfulLoginWithBasicCredentials() throws Exception {
  ContentRepository repository=mock(ContentRepository.class);
  when(repository.login(any(Credentials.class),anyString())).thenReturn(mock(ContentSession.class));
  ContentRemoteRepository remoteRepository=createRepository(repository);
  assertNotNull(remoteRepository.login(remoteRepository.createBasicCredentials("admin","admin".toCharArray())));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteResultTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.STRING).when(value).getType();
  doReturn("value").when(value).getValue(Type.STRING);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asText());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiLongColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.LONGS).when(value).getType();
  doReturn(asList(4L,2L)).when(value).getValue(Type.LONGS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(4L,2L),remoteValue.asMultiLong());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBinaryColumn(){
  Blob blob=mock(Blob.class);
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.BINARY).when(value).getType();
  doReturn(blob).when(value).getValue(Type.BINARY);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("id").when(binaries).put(blob);
  ContentRemoteResult result=createResult(binaries,row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("id",remoteValue.asBinaryId());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiBooleanColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.BOOLEANS).when(value).getType();
  doReturn(asList(true,false)).when(value).getValue(Type.BOOLEANS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(true,false),remoteValue.asMultiBoolean());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiPathColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.PATHS).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.PATHS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiPath());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiUriColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.URIS).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.URIS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiUri());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiDecimalColumn(){
  BigDecimal first=new BigDecimal(4);
  BigDecimal second=new BigDecimal(2);
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DECIMALS).when(value).getType();
  doReturn(asList(first,second)).when(value).getValue(Type.DECIMALS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(first,second),remoteValue.asMultiDecimal());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiWeakReferenceColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.WEAKREFERENCES).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.WEAKREFERENCES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiWeakReference());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDecimalColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DECIMAL).when(value).getType();
  doReturn(BigDecimal.ONE).when(value).getValue(Type.DECIMAL);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(BigDecimal.ONE,remoteValue.asDecimal());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNameColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.NAME).when(value).getType();
  doReturn("value").when(value).getValue(Type.NAME);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asName());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiDoubleColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DOUBLES).when(value).getType();
  doReturn(asList(4.0,2.0)).when(value).getValue(Type.DOUBLES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(4.0,2.0),remoteValue.asMultiDouble());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiReferenceColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.REFERENCES).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.REFERENCES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiReference());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLongColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.LONG).when(value).getType();
  doReturn(42L).when(value).getValue(Type.LONG);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(42L,remoteValue.asLong().longValue());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiStringColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.STRINGS).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.STRINGS);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiText());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUriColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.URI).when(value).getType();
  doReturn("value").when(value).getValue(Type.URI);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asUri());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReferenceColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.REFERENCE).when(value).getType();
  doReturn("value").when(value).getValue(Type.REFERENCE);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asReference());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDoubleColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DOUBLE).when(value).getType();
  doReturn(4.2).when(value).getValue(Type.DOUBLE);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(4.2,remoteValue.asDouble().doubleValue(),1e-5);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBooleanColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.BOOLEAN).when(value).getType();
  doReturn(true).when(value).getValue(Type.BOOLEAN);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(true,remoteValue.asBoolean());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDateColumn(){
  Date now=new Date();
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DATE).when(value).getType();
  doReturn(toFormattedDate(now)).when(value).getValue(Type.DATE);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(now.getTime(),remoteValue.asDate().longValue());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiBinaryColumn(){
  Blob first=mock(Blob.class);
  Blob second=mock(Blob.class);
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("first").when(binaries).put(first);
  doReturn("second").when(binaries).put(second);
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.BINARIES).when(value).getType();
  doReturn(asList(first,second)).when(value).getValue(Type.BINARIES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(binaries,row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("first","second"),remoteValue.asMultiBinaryId());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPathColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.PATH).when(value).getType();
  doReturn("value").when(value).getValue(Type.PATH);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asPath());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWeakReferenceColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.WEAKREFERENCE).when(value).getType();
  doReturn("value").when(value).getValue(Type.WEAKREFERENCE);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals("value",remoteValue.asWeakReference());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiNameColumn(){
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.NAMES).when(value).getType();
  doReturn(asList("a","b")).when(value).getValue(Type.NAMES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList("a","b"),remoteValue.asMultiName());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiDateColumn(){
  Date first=new Date(4);
  Date second=new Date(2);
  PropertyValue value=mock(PropertyValue.class);
  doReturn(Type.DATES).when(value).getType();
  doReturn(toFormattedDates(first,second)).when(value).getValue(Type.DATES);
  ResultRow row=mock(ResultRow.class);
  doReturn(value).when(row).getValue("column");
  ContentRemoteResult result=createResult(row);
  RemoteValue remoteValue=result.getColumnValue("column");
  assertEquals(asList(4L,2L),remoteValue.asMultiDate());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteTreeTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiBinaryProperty(){
  InputStream stream=mock(InputStream.class);
  Blob blob=mock(Blob.class);
  doReturn(stream).when(blob).getNewStream();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARIES).when(property).getType();
  doReturn(singletonList(blob)).when(property).getValue(Type.BINARIES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public long getBinaryThreshold(){
      return Long.MAX_VALUE;
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiBinary());
  assertEquals(stream,getOnlyElement(properties.get("name").asMultiBinary()).get());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildren(){
  Tree child=mock(Tree.class);
  doReturn("child").when(child).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(child)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getDepth(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("child"));
  assertNotNull(children.get("child"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFilterPropertyOut(){
  PropertyState fooProperty=mock(PropertyState.class);
  doReturn("foo").when(fooProperty).getName();
  doReturn(Type.BOOLEAN).when(fooProperty).getType();
  doReturn(true).when(fooProperty).getValue(Type.BOOLEAN);
  PropertyState barProperty=mock(PropertyState.class);
  doReturn("bar").when(barProperty).getName();
  doReturn(Type.BOOLEAN).when(barProperty).getType();
  doReturn(true).when(barProperty).getValue(Type.BOOLEAN);
  Tree tree=mock(Tree.class);
  doReturn(asList(fooProperty,barProperty)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getPropertyFilters(){
      return newHashSet("-bar");
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("foo"));
  assertFalse(properties.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithCountTooBig(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenCount(){
      return 3;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithIncludeFilters(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getNodeFilters(){
      return newHashSet("foo");
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBinaryProperty(){
  InputStream stream=mock(InputStream.class);
  Blob blob=mock(Blob.class);
  doReturn(stream).when(blob).getNewStream();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARY).when(property).getType();
  doReturn(blob).when(property).getValue(Type.BINARY);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public long getBinaryThreshold(){
      return Long.MAX_VALUE;
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isBinary());
  assertEquals(stream,properties.get("name").asBinary().get());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithNegativeCount(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenCount(){
      return -1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithNegativeStart(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenStart(){
      return -1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithStartTooBig(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenStart(){
      return 2;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFilterPropertyIn(){
  PropertyState fooProperty=mock(PropertyState.class);
  doReturn("foo").when(fooProperty).getName();
  doReturn(Type.BOOLEAN).when(fooProperty).getType();
  doReturn(true).when(fooProperty).getValue(Type.BOOLEAN);
  PropertyState barProperty=mock(PropertyState.class);
  doReturn("bar").when(barProperty).getName();
  doReturn(Type.BOOLEAN).when(barProperty).getType();
  doReturn(true).when(barProperty).getValue(Type.BOOLEAN);
  Tree tree=mock(Tree.class);
  doReturn(asList(fooProperty,barProperty)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getPropertyFilters(){
      return newHashSet("foo");
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("foo"));
  assertFalse(properties.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithExcludeFilters(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getNodeFilters(){
      return newHashSet("-bar");
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithSlicingAndFiltering(){
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree baz=mock(Tree.class);
  doReturn("baz").when(baz).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(bar,foo,baz)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getNodeFilters(){
      return Sets.newHashSet("ba*");
    }
    @Override public int getChildrenStart(){
      return 1;
    }
    @Override public int getChildrenCount(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("bar"));
  assertFalse(children.containsKey("foo"));
  assertFalse(children.containsKey("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithSlicing(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree baz=mock(Tree.class);
  doReturn("baz").when(baz).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar,baz)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenStart(){
      return 1;
    }
    @Override public int getChildrenCount(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
  assertFalse(children.containsKey("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithZeroCount(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenCount(){
      return 0;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithCount(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenCount(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithStart(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenStart(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.filter.FilterTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWildcard(){
  Filter filter=new Filter("na*e");
  assertTrue(filter.matches("nae"));
  assertTrue(filter.matches("name"));
  assertTrue(filter.matches("namme"));
  assertFalse(filter.matches("nam"));
  assertFalse(filter.matches("named"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testExact(){
  Filter filter=new Filter("name");
  assertTrue(filter.matches("name"));
  assertFalse(filter.matches("nam"));
  assertFalse(filter.matches("named"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEscapedWildcard(){
  Filter filter=new Filter("na\\*e");
  assertTrue(filter.matches("na*e"));
  assertFalse(filter.matches("nae"));
  assertFalse(filter.matches("name"));
  assertFalse(filter.matches("namme"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.filter.FiltersTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEmptyFilters(){
  Filters filters=new Filters(new HashSet<String>());
  assertTrue(filters.matches("foo"));
  assertTrue(filters.matches("bar"));
  assertTrue(filters.matches("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testExcludeFilter(){
  Filters filters=new Filters(Sets.newHashSet("-foo"));
  assertFalse(filters.matches("foo"));
  assertTrue(filters.matches("bar"));
  assertTrue(filters.matches("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIncludeExcludeFilters(){
  Filters filters=new Filters(Sets.newHashSet("ba*","-baz"));
  assertFalse(filters.matches("foo"));
  assertTrue(filters.matches("bar"));
  assertFalse(filters.matches("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIncludeFilter(){
  Filters filters=new Filters(Sets.newHashSet("ba*"));
  assertFalse(filters.matches("foo"));
  assertTrue(filters.matches("bar"));
  assertTrue(filters.matches("baz"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.http.handler.RemoteServerIT </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithWithNodeFilters() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree foo=node.addChild("foo");
  foo.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree bar=node.addChild("bar");
  bar.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree baz=node.addChild("baz");
  baz.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("children","ba*").queryString("children","-baz").asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("children").has("foo"));
  assertTrue(body.getJSONObject("children").has("bar"));
  assertFalse(body.getJSONObject("children").has("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.REFERENCES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("references",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadTreeAtRevision() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  String revision=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getHeaders().getFirst("oak-revision");
  HttpResponse<JsonNode> response=get(resource("/revisions/{revision}/tree/node")).basicAuth("admin","admin").routeParam("revision",revision).asJson();
  assertEquals(200,response.getStatus());
  assertEquals(revision,response.getHeaders().getFirst("oak-revision"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeUriProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","http://acme.org",Type.URI);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("uri",property.getString("type"));
  assertEquals("http://acme.org",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiWeakReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.WEAKREFERENCES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("weakReferences",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithWithPropertyFilters() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("foo","foo",Type.STRING);
  node.setProperty("bar","bar",Type.STRING);
  node.setProperty("baz","baz",Type.STRING);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("properties","ba*").queryString("properties","-baz").asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("properties").has("foo"));
  assertTrue(body.getJSONObject("properties").has("bar"));
  assertFalse(body.getJSONObject("properties").has("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryRangeOffsetOnly() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes = 3").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*3\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("7",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("3456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiBooleanProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(true,false),Type.BOOLEANS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("booleans",property.getString("type"));
  assertEquals(true,property.getJSONArray("value").getBoolean(0));
  assertEquals(false,property.getJSONArray("value").getBoolean(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiLongProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(4L,2L),Type.LONGS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("longs",property.getString("type"));
  assertEquals(4L,property.getJSONArray("value").getLong(0));
  assertEquals(2L,property.getJSONArray("value").getLong(1));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryMultipleRanges() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0,-1 , 2-2, 3-6").asString();
  assertEquals(206,binaryResponse.getStatus());
  String contentType=binaryResponse.getHeaders().getFirst("content-type");
  assertNotNull(contentType);
  Pattern multipartDelimiterPattern=Pattern.compile("^\\s*multipart/byteranges;\\s*boundary=(.+)");
  Matcher matcher=multipartDelimiterPattern.matcher(contentType);
  assertTrue(matcher.matches());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevision() throws Exception {
  HttpResponse<JsonNode> response=get(resource("/revisions/last")).basicAuth("admin","admin").asJson();
  assertEquals(200,response.getStatus());
  JSONObject payload=response.getBody().getObject();
  assertNotNull(payload.getString("revision"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeNameProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.NAME);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("name",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadBinaryInvalidRanges() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","elephant=0-9").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","this is not correct").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","0").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0-1000").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=9-8").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0, -1, 10000").asString();
  assertNotEquals(206,binaryResponse.getStatus());
  assertNotEquals(500,binaryResponse.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDecimalProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(BigDecimal.ZERO,BigDecimal.ONE),Type.DECIMALS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("decimals",property.getString("type"));
  assertEquals("0",property.getJSONArray("value").getString(0));
  assertEquals("1",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiStringProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("a","b"),Type.STRINGS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("strings",property.getString("type"));
  assertEquals("a",property.getJSONArray("value").getString(0));
  assertEquals("b",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreePathProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","/value",Type.PATH);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("path",property.getString("type"));
  assertEquals("/value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadBinary() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("test")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).asString();
  assertEquals(200,binaryResponse.getStatus());
  assertEquals("test",binaryResponse.getBody());
  assertEquals("4",binaryResponse.getHeaders().getFirst("content-length"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithDepth() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree child=node.addChild("child");
  child.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree grandChild=child.addChild("grandChild");
  grandChild.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("depth",1).asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("children").isNull("child"));
  assertTrue(body.getJSONObject("children").getJSONObject("child").getJSONObject("children").isNull("grandChild"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeLongProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",42L,Type.LONG);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("long",property.getString("type"));
  assertEquals(42L,property.getLong("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeStringProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","a",Type.STRING);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("string",property.getString("type"));
  assertEquals("a",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDecimalProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",BigDecimal.ZERO,Type.DECIMAL);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("decimal",property.getString("type"));
  assertEquals("0",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWeakReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.WEAKREFERENCE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("weakReference",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiNameProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.NAMES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("names",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDateProperty() throws Exception {
  Calendar calendar=Calendar.getInstance();
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(asString(calendar),asString(calendar)),Type.DATES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("dates",property.getString("type"));
  assertEquals(calendar.getTimeInMillis(),property.getJSONArray("value").getLong(0));
  assertEquals(calendar.getTimeInMillis(),property.getJSONArray("value").getLong(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiBinaryProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",root.createBlob(asStream("a")),Type.BINARY);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("binaryId",property.getString("type"));
  assertFalse(property.getString("value").isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeBinaryProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(root.createBlob(asStream("a")),root.createBlob(asStream("b"))),Type.BINARIES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("binaryIds",property.getString("type"));
  assertFalse(property.getJSONArray("value").getString(0).isEmpty());
  assertFalse(property.getJSONArray("value").getString(1).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDoubleProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(4.2,2.4),Type.DOUBLES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("doubles",property.getString("type"));
  assertEquals(4.2,property.getJSONArray("value").getDouble(0),1e-10);
  assertEquals(2.4,property.getJSONArray("value").getDouble(1),1e-10);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.REFERENCE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("reference",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSearchLastRevision() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree test=root.getTree("/").addChild("test");
  test.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree n1=test.addChild("one");
  n1.setProperty("name","one",Type.STRING);
  n1.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree n2=test.addChild("two");
  n2.setProperty("name","two",Type.STRING);
  n2.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree")).basicAuth("admin","admin").queryString("query","select name from nt:unstructured as node where jcr:path like '/test/%'").queryString("language","sql").queryString("offset",0).queryString("limit",10).asJson();
  assertEquals(200,response.getStatus());
  JSONObject results=response.getBody().getObject();
  assertNotNull(results.getLong("total"));
  List<String> columns=getStringArray(results,"columns");
  assertTrue(columns.contains("name"));
  assertTrue(columns.contains("jcr:path"));
  List<String> selectors=getStringArray(results,"selectors");
  assertTrue(selectors.contains("node"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExistsBinary() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=head(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).asString();
  assertEquals(200,binaryResponse.getStatus());
  assertEquals("bytes",binaryResponse.getHeaders().getFirst("accept-ranges"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateBinary() throws Exception {
  HttpResponse<JsonNode> response=post(resource("/binaries")).basicAuth("admin","admin").body("body").asJson();
  assertEquals(201,response.getStatus());
  String binaryId=response.getBody().getObject().getString("binaryId");
  assertFalse(binaryId.isEmpty());
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).asString();
  assertEquals(200,binaryResponse.getStatus());
  assertEquals("body",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeBooleanProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",true,Type.BOOLEAN);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("boolean",property.getString("type"));
  assertEquals(true,property.getBoolean("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiPathProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("/first","/second"),Type.PATHS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("paths",property.getString("type"));
  assertEquals("/first",property.getJSONArray("value").getString(0));
  assertEquals("/second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryRangeSuffix() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-10").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-3").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*7\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("3",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-1").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiUriProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("http://acme.org","http://acme.com"),Type.URIS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("uris",property.getString("type"));
  assertEquals("http://acme.org",property.getJSONArray("value").getString(0));
  assertEquals("http://acme.com",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinarySingleRange() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0-9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0-").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=3- 6").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*3\\s*\\-\\s*6\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("4",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("3456",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes= 9 - 9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDateProperty() throws Exception {
  Calendar calendar=Calendar.getInstance();
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asString(calendar),Type.DATE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("date",property.getString("type"));
  assertEquals(calendar.getTimeInMillis(),property.getLong("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDoubleProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",4.2,Type.DOUBLE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("double",property.getString("type"));
  assertEquals(4.2,property.getDouble("value"),1e-10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.run.osgi.OakOSGiRepositoryFactoryTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepositoryTar() throws Exception {
  copyConfig("tar");
  config.put(BundleActivator.class.getName(),new TestActivator());
  Repository repository=repositoryFactory.getRepository(config);
  assertTrue("test activator should have been called on startup",calledOnStart);
  TimeUnit.SECONDS.sleep(1);
  assertNotNull(repository);
  System.out.println("Repository started ");
  basicCrudTest(repository);
  testCallback(repository);
  shutdown(repository);
  assertTrue("test activator should have been called on stop",calledOnStop);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.GuestDefaultLoginModuleTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGuestLogin() throws Exception {
  ContentSession cs=login(new GuestCredentials());
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
    assertEquals(anonymousID,authInfo.getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNullLogin() throws Exception {
  ContentSession cs=login(null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
    assertEquals(anonymousID,authInfo.getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.Jackrabbit2ConfigurationTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNullLogin() throws Exception {
  ContentSession cs=login(null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
    assertEquals(anonymousID,authInfo.getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.L2_AuthInfoTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserAuthInfo() throws LoginException, RepositoryException, CommitFailedException {
  testUser=createTestUser(userManager);
  root.commit();
  contentSession=login(ExerciseUtility.getTestCredentials(testUser.getID()));
  AuthInfo authInfo=contentSession.getAuthInfo();
  String expectedId=null;
  assertEquals(expectedId,authInfo.getUserID());
  Set<Principal> expectedPrincipals=null;
  assertEquals(expectedPrincipals,authInfo.getPrincipals());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserAuthInfoWithGroupMembership() throws LoginException, RepositoryException, CommitFailedException {
  testUser=createTestUser(userManager);
  testGroup=createTestGroup(userManager);
  testGroup.addMember(testUser);
  root.commit();
  contentSession=login(getTestCredentials(testUser.getID()));
  AuthInfo authInfo=contentSession.getAuthInfo();
  Set<Principal> expectedPrincipals=null;
  assertEquals(expectedPrincipals,authInfo.getPrincipals());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGuestAuthInfo() throws LoginException, NoSuchWorkspaceException {
  contentSession=login(new GuestCredentials());
  AuthInfo authInfo=contentSession.getAuthInfo();
  String expectedId=null;
  assertEquals(expectedId,authInfo.getUserID());
  Set<Principal> expectedPrincipals=null;
  assertEquals(expectedPrincipals,authInfo.getPrincipals());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.L6_AnonymousIdTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAnonymousID() throws RepositoryException, LoginException {
  testSession=login(new GuestCredentials());
  String anonymousID=testSession.getAuthInfo().getUserID();
  String expectedID=null;
  assertEquals(expectedID,anonymousID);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.TokenDefaultLoginModuleTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTokenCreationWithImpersonationAttributes() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    sc.setAttribute(".token.mandatory","something");
    sc.setAttribute("attr","val");
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,new AuthInfoImpl(((SimpleCredentials)getAdminCredentials()).getUserID(),Collections.<String,Object>emptyMap(),Collections.<Principal>emptySet()));
    cs=login(ic);
    AuthInfo ai=cs.getAuthInfo();
    Set<String> attrNames=ImmutableSet.copyOf(ai.getAttributeNames());
    assertTrue(attrNames.contains("attr"));
    assertFalse(attrNames.contains(".token"));
    assertFalse(attrNames.contains(".token.mandatory"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTokenAuthInfo() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    cs=login(sc);
    assertEquals("userid must be correct","admin",cs.getAuthInfo().getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testTokenCreationAndLogin() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    cs=login(sc);
    Object token=sc.getAttribute(".token").toString();
    assertNotNull(token);
    TokenCredentials tc=new TokenCredentials(token.toString());
    cs.close();
    cs=login(tc);
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTokenCreationWithAttributes() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    sc.setAttribute(".token.mandatory","something");
    sc.setAttribute("attr","val");
    cs=login(sc);
    AuthInfo ai=cs.getAuthInfo();
    Set<String> attrNames=ImmutableSet.copyOf(ai.getAttributeNames());
    assertTrue(attrNames.contains("attr"));
    assertFalse(attrNames.contains(".token"));
    assertFalse(attrNames.contains(".token.mandatory"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTokenLoginForDisabledUser() throws Exception {
  ContentSession cs=null;
  try {
    User user=getTestUser();
    SimpleCredentials sc=new SimpleCredentials(user.getID(),user.getID().toCharArray());
    sc.setAttribute(".token","");
    cs=login(sc);
    user.disable("disabled");
    root.commit();
    Object token=sc.getAttribute(".token").toString();
    assertNotNull(token);
    TokenCredentials tc=new TokenCredentials(token.toString());
    cs.close();
    cs=login(tc);
    fail("token login for a disabled user must fail.");
  }
 catch (  LoginException e) {
  }
 finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValidTokenCredentials() throws Exception {
  Root root=adminSession.getLatestRoot();
  TokenConfiguration tc=getSecurityProvider().getConfiguration(TokenConfiguration.class);
  TokenProvider tp=tc.getTokenProvider(root);
  SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
  TokenInfo info=tp.createToken(sc.getUserID(),Collections.<String,Object>emptyMap());
  ContentSession cs=login(new TokenCredentials(info.getToken()));
  try {
    assertEquals(sc.getUserID(),cs.getAuthInfo().getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testTokenCreationAndImpersonation() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,new AuthInfoImpl(((SimpleCredentials)getAdminCredentials()).getUserID(),Collections.<String,Object>emptyMap(),Collections.<Principal>emptySet()));
    cs=login(ic);
    Object token=sc.getAttribute(".token").toString();
    assertNotNull(token);
    TokenCredentials tc=new TokenCredentials(token.toString());
    cs.close();
    cs=login(tc);
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LargeLdapProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetMembers() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(GROUP_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("Group instance",id instanceof ExternalGroup);
  ExternalGroup grp=(ExternalGroup)id;
  assertIfEquals("Group members",TEST_MEMBERS,grp.getDeclaredMembers());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LdapLoginTestBase </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReLogin() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    Authorizable user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertFalse(root.getTree(user.getPath()).hasProperty(UserConstants.REP_PASSWORD));
    cs.close();
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    assertEquals(USER_ID,cs.getAuthInfo().getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLoginSetsAuthInfo() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PWD.toCharArray());
    sc.setAttribute("attr","val");
    cs=login(sc);
    AuthInfo ai=cs.getAuthInfo();
    assertEquals(USER_ID,ai.getUserID());
    assertEquals("val",ai.getAttribute("attr"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrincipalsFromAuthInfo() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PWD.toCharArray());
    sc.setAttribute("attr","val");
    cs=login(sc);
    AuthInfo ai=cs.getAuthInfo();
    root.refresh();
    PrincipalProvider pp=getSecurityProvider().getConfiguration(PrincipalConfiguration.class).getPrincipalProvider(root,NamePathMapper.DEFAULT);
    Set<? extends Principal> expected=pp.getPrincipals(USER_ID);
    assertEquals(3,expected.size());
    assertEquals(expected,ai.getPrincipals());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncUpdate() throws Exception {
  Authorizable user=userManager.createUser(USER_ID,null);
  ExternalUser externalUser=idp.getUser(USER_ID);
  user.setProperty("rep:externalId",new ValueFactoryImpl(root,NamePathMapper.DEFAULT).createValue(externalUser.getExternalId().getString()));
  root.commit();
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertTrue(user.hasProperty(USER_PROP));
    assertNull(userManager.getAuthorizable(GROUP_DN));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUser() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    Authorizable user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertTrue(user.hasProperty(USER_PROP));
    Tree userTree=cs.getLatestRoot().getTree(user.getPath());
    assertFalse(userTree.hasProperty(UserConstants.REP_PASSWORD));
    assertNull(userManager.getAuthorizable(GROUP_DN));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUserCaseInsensitive() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID.toUpperCase(),USER_PWD.toCharArray()));
    root.refresh();
    Authorizable user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertTrue(user.hasProperty(USER_PROP));
    Tree userTree=cs.getLatestRoot().getTree(user.getPath());
    assertFalse(userTree.hasProperty(UserConstants.REP_PASSWORD));
    assertNull(userManager.getAuthorizable(GROUP_DN));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testSyncCreateGroup() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    assertNotNull(userManager.getAuthorizable(USER_ID));
    assertNotNull(userManager.getAuthorizable(GROUP_NAME));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LdapProviderTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByUserId() throws Exception {
  ExternalUser user=idp.getUser(TEST_USER1_UID);
  assertNotNull("User 1 must exist",user);
  assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateValidateTrueFalse() throws Exception {
  providerConfig.getAdminPoolConfig().setMaxActive(2).setLookupOnValidate(true);
  providerConfig.getUserPoolConfig().setMaxActive(2).setLookupOnValidate(false);
  idp.close();
  idp=new LdapIdentityProvider(providerConfig);
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  for (int i=0; i < 8; i++) {
    ExternalUser user=idp.authenticate(creds);
    assertNotNull("User 1 must authenticate (i=" + i + ")",user);
    assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetUserByForeignRef() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_USER1_DN,"foobar");
  ExternalIdentity id=idp.getIdentity(ref);
  assertNull("Foreign ref must be null",id);
}

</code></pre>

<br>
<pre class="type-6 type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserProperties() throws Exception {
  ExternalUser user=idp.getUser(TEST_USER1_UID);
  assertNotNull("User 1 must exist",user);
  Map<String,?> properties=user.getProperties();
  assertThat((Map<String,Collection<String>>)properties,Matchers.<String,Collection<String>>hasEntry(Matchers.equalTo("objectclass"),Matchers.containsInAnyOrder("inetOrgPerson","top","person","organizationalPerson")));
  assertThat(properties,Matchers.<String,Object>hasEntry("uid","hhornblo"));
  assertThat(properties,Matchers.<String,Object>hasEntry("mail","hhornblo@royalnavy.mod.uk"));
  assertThat(properties,Matchers.<String,Object>hasEntry("givenname","Horatio"));
  assertThat(properties,Matchers.<String,Object>hasEntry("description","Capt. Horatio Hornblower, R.N"));
  assertThat(properties,Matchers.<String,Object>hasEntry("sn","Hornblower"));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testAuthenticateMissing() throws Exception {
  SimpleCredentials creds=new SimpleCredentials("foobar" + TEST_USER1_UID,"pass".toCharArray());
  ExternalUser user=idp.authenticate(creds);
  assertNull("Authenticate must return NULL for unknown user",user);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateValidateTrueTrue() throws Exception {
  providerConfig.getAdminPoolConfig().setMaxActive(2).setLookupOnValidate(true);
  providerConfig.getUserPoolConfig().setMaxActive(2).setLookupOnValidate(true);
  idp.close();
  idp=new LdapIdentityProvider(providerConfig);
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  for (int i=0; i < 8; i++) {
    ExternalUser user=idp.authenticate(creds);
    assertNotNull("User 1 must authenticate (i=" + i + ")",user);
    assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateCaseInsensitive() throws Exception {
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID.toUpperCase(),"pass".toCharArray());
  ExternalUser user=idp.authenticate(creds);
  assertNotNull("User 1 must authenticate",user);
  assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetUnknownUserByRef() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef("bla=foo," + TEST_USER1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertNull("Unknown user must return null",id);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateValidateFalseTrue() throws Exception {
  providerConfig.getAdminPoolConfig().setMaxActive(2).setLookupOnValidate(false);
  providerConfig.getUserPoolConfig().setMaxActive(2).setLookupOnValidate(true);
  idp.close();
  idp=new LdapIdentityProvider(providerConfig);
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  for (int i=0; i < 8; i++) {
    ExternalUser user=idp.authenticate(creds);
    assertNotNull("User 1 must authenticate",user);
    assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNullIntermediatePath() throws Exception {
  providerConfig.getUserConfig().setMakeDnPath(false);
  ExternalUser user=idp.getUser(TEST_USER1_UID);
  assertNotNull("User 1 must exist",user);
  assertNull("Intermediate path must be null",user.getIntermediatePath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitDNIntermediatePath2() throws Exception {
  providerConfig.getUserConfig().setMakeDnPath(true);
  ExternalUser user=idp.getUser(TEST_USER5_UID);
  assertNotNull("User 5 must exist",user);
  assertEquals("Intermediate path must be the split dn",TEST_USER5_PATH,user.getIntermediatePath());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetMembers() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_GROUP1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("Group instance",id instanceof ExternalGroup);
  ExternalGroup grp=(ExternalGroup)id;
  assertIfEquals("Group members",TEST_GROUP1_MEMBERS,grp.getDeclaredMembers());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticate() throws Exception {
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  ExternalUser user=idp.authenticate(creds);
  assertNotNull("User 1 must authenticate",user);
  assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateValidateFalseFalse() throws Exception {
  providerConfig.getAdminPoolConfig().setMaxActive(2).setLookupOnValidate(false);
  providerConfig.getUserPoolConfig().setMaxActive(2).setLookupOnValidate(false);
  idp.close();
  idp=new LdapIdentityProvider(providerConfig);
  SimpleCredentials creds=new SimpleCredentials(TEST_USER1_UID,"pass".toCharArray());
  for (int i=0; i < 8; i++) {
    ExternalUser user=idp.authenticate(creds);
    assertNotNull("User 1 must authenticate",user);
    assertEquals("User Ref",TEST_USER1_DN,user.getExternalId().getId());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByRef() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_USER1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("User instance",id instanceof ExternalUser);
  assertEquals("User ID",TEST_USER1_UID,id.getId());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test case to reproduce OAK-3396 where an ldap user entry
 * without a uid caused a NullpointerException in LdapIdentityProvider.createUser
 */
@Test public void testListUsersWithMissingUid() throws Exception {
  InputStream erroneousDIF=LdapProviderTest.class.getResourceAsStream(ERRONEOUS_LDIF);
  LDAP_SERVER.loadLdif(erroneousDIF);
  Iterator<ExternalUser> users=idp.listUsers();
  while (users.hasNext()) {
    ExternalUser user=users.next();
    assertTrue(!user.getPrincipalName().startsWith("cn=Faulty Entry"));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetGroupByName() throws Exception {
  ExternalGroup group=idp.getGroup(TEST_GROUP1_NAME);
  assertNotNull("Group 1 must exist",group);
  assertEquals("Group Ref",TEST_GROUP1_DN,group.getExternalId().getId());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetGroups() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_USER1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("User instance",id instanceof ExternalUser);
  assertIfEquals("Groups",TEST_USER1_GROUPS,id.getDeclaredGroups());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitDNIntermediatePath() throws Exception {
  providerConfig.getUserConfig().setMakeDnPath(true);
  ExternalUser user=idp.getUser(TEST_USER1_UID);
  assertNotNull("User 1 must exist",user);
  assertEquals("Intermediate path must be the split dn",TEST_USER1_PATH,user.getIntermediatePath());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetGroups2() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_USER0_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("User instance",id instanceof ExternalUser);
  assertIfEquals("Groups",TEST_USER0_GROUPS,id.getDeclaredGroups());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetGroupByRef() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_GROUP1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("Group instance",id instanceof ExternalGroup);
  assertEquals("Group Name",TEST_GROUP1_NAME,id.getId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.CompositeTokenConfigurationTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTokenProvider(){
  CompositeTokenConfiguration ctc=(CompositeTokenConfiguration)compositeConfiguration;
  TokenProvider tp=ctc.getTokenProvider(root);
  assertNotNull(tp);
  assertFalse(tp instanceof CompositeTokenProvider);
  TokenConfiguration tc=new TokenConfigurationImpl(getSecurityProvider());
  setDefault(tc);
  tp=ctc.getTokenProvider(root);
  assertNotNull(tp);
  assertFalse(tp instanceof CompositeTokenProvider);
  assertTrue(tp instanceof TokenProviderImpl);
  addConfiguration(tc);
  tp=ctc.getTokenProvider(root);
  assertNotNull(tp);
  assertFalse(tp instanceof CompositeTokenProvider);
  assertTrue(tp instanceof TokenProviderImpl);
  addConfiguration(new TokenConfigurationImpl(getSecurityProvider()));
  tp=ctc.getTokenProvider(root);
  assertNotNull(tp);
  assertTrue(tp instanceof CompositeTokenProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenAuthenticationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAuthenticate() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertTrue(authentication.authenticate(new TokenCredentials(info.getToken())));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTokenInfoAfterAuthenticate() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  authentication.authenticate(new TokenCredentials(info.getToken()));
  TokenInfo info2=authentication.getTokenInfo();
  assertNotNull(info2);
  assertEquals(info.getUserId(),info2.getUserId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenConfigurationImplTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConfigOptions(){
  int exp=tc.getParameters().getConfigValue(TokenProvider.PARAM_TOKEN_EXPIRATION,DEFAULT_EXPIRATION);
  assertEquals(60,exp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenInfoTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testResetTokenExpiration() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertFalse(info.resetExpiration(new Date().getTime()));
  long loginTime=new Date().getTime() + 3600000;
  assertFalse(info.isExpired(loginTime));
  assertTrue(info.resetExpiration(loginTime));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsExpired(){
  long loginTime=new Date().getTime();
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertFalse(info.isExpired(loginTime));
  loginTime=new Date().getTime() + 3600000;
  assertFalse(info.isExpired(loginTime));
  long expiredTime=new Date().getTime() + 7200001;
  assertTrue(info.isExpired(expiredTime));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetToken(){
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertNotNull(info.getToken());
  info=tokenProvider.getTokenInfo(info.getToken());
  assertNotNull(info.getToken());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAttributes(){
  Map<String,String> reserved=new HashMap<String,String>();
  reserved.put(TOKEN_ATTRIBUTE,"value");
  reserved.put(TOKEN_ATTRIBUTE_KEY,"value");
  reserved.put(TOKEN_ATTRIBUTE_EXPIRY,"value");
  Map<String,String> privateAttributes=new HashMap<String,String>();
  privateAttributes.put(".token_exp","value");
  privateAttributes.put(".tokenTest","value");
  privateAttributes.put(".token_something","value");
  Map<String,String> publicAttributes=new HashMap<String,String>();
  publicAttributes.put("any","value");
  publicAttributes.put("another","value");
  Map<String,String> attributes=new HashMap<String,String>();
  attributes.putAll(reserved);
  attributes.putAll(publicAttributes);
  attributes.putAll(privateAttributes);
  TokenInfo info=tokenProvider.createToken(userId,attributes);
  Map<String,String> pubAttr=info.getPublicAttributes();
  assertEquals("public attributes",publicAttributes.size(),pubAttr.size());
  for (  String key : publicAttributes.keySet()) {
    assertTrue("public attribute " + key + " not contained",pubAttr.containsKey(key));
    assertEquals("public attribute " + key,publicAttributes.get(key),pubAttr.get(key));
  }
  Map<String,String> privAttr=info.getPrivateAttributes();
  assertEquals("private attributes",privateAttributes.size(),privAttr.size());
  for (  String key : privateAttributes.keySet()) {
    assertTrue("private attribute " + key + " not contained",privAttr.containsKey(key));
    assertEquals("private attribute" + key,privateAttributes.get(key),privAttr.get(key));
  }
  for (  String key : reserved.keySet()) {
    assertFalse("reserved attribute " + key,privAttr.containsKey(key));
    assertFalse("reserved attribute " + key,pubAttr.containsKey(key));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testResetTokenExpirationExpiredToken() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  long expiredTime=new Date().getTime() + 7200001;
  assertTrue(info.isExpired(expiredTime));
  assertFalse(info.resetExpiration(expiredTime));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveTokenRemovesNode() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  Tree tokens=userTree.getChild(TOKENS_NODE_NAME);
  String tokenNodePath=tokens.getChildren().iterator().next().getPath();
  info.remove();
  assertFalse(root.getTree(tokenNodePath).exists());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetUserId(){
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertEquals(userId,info.getUserId());
  info=tokenProvider.getTokenInfo(info.getToken());
  assertEquals(userId,info.getUserId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMatches(){
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  Map<String,String> attributes=new HashMap<String,String>();
  attributes.put("something","value");
  info=tokenProvider.createToken(userId,attributes);
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  attributes.put(".token-something","mandatory");
  info=tokenProvider.createToken(userId,attributes);
  assertFalse(info.matches(new TokenCredentials(info.getToken())));
  TokenCredentials tc=new TokenCredentials(info.getToken());
  tc.setAttribute(".token-something","mandatory");
  assertTrue(info.matches(tc));
  tc.setAttribute("another","value");
  assertTrue(info.matches(tc));
  tc.setAttribute(".token_ignored","value");
  assertTrue(info.matches(tc));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenLoginModuleTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValidTokenCredentials() throws Exception {
  Root root=adminSession.getLatestRoot();
  TokenConfiguration tokenConfig=getSecurityProvider().getConfiguration(TokenConfiguration.class);
  TokenProvider tp=tokenConfig.getTokenProvider(root);
  SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
  TokenInfo info=tp.createToken(sc.getUserID(),Collections.<String,Object>emptyMap());
  ContentSession cs=login(new TokenCredentials(info.getToken()));
  try {
    assertEquals(sc.getUserID(),cs.getAuthInfo().getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenNoRefreshTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotReset(){
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertNotNull(info);
  assertFalse(info.resetExpiration(new Date().getTime()));
  long loginTime=new Date().getTime() + 3600000;
  assertFalse(info.resetExpiration(loginTime));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenProviderImplTest </h4><pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetTokenInfoFromInvalidLocation2() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree).addChild("testNode",JcrConstants.NT_UNSTRUCTURED);
  try {
    createTokenTree(info,node,TOKEN_NT_NAME);
    tokenTree.remove();
    assertNull(tokenProvider.getTokenInfo(info.getToken()));
  }
  finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTokenNode() throws Exception {
  Map<String,String> reserved=new HashMap<String,String>();
  reserved.put(TOKEN_ATTRIBUTE,"value");
  reserved.put(TOKEN_ATTRIBUTE_KEY,"value");
  reserved.put(TOKEN_ATTRIBUTE_EXPIRY,"value");
  Map<String,String> privateAttributes=new HashMap<String,String>();
  privateAttributes.put(".token_exp","value");
  privateAttributes.put(".tokenTest","value");
  privateAttributes.put(".token_something","value");
  Map<String,String> publicAttributes=new HashMap<String,String>();
  publicAttributes.put("any","value");
  publicAttributes.put("another","value");
  Map<String,String> attributes=new HashMap<String,String>();
  attributes.putAll(reserved);
  attributes.putAll(publicAttributes);
  attributes.putAll(privateAttributes);
  TokenInfo info=tokenProvider.createToken(userId,attributes);
  Tree tokenTree=getTokenTree(info);
  PropertyState prop=tokenTree.getProperty(TOKEN_ATTRIBUTE_KEY);
  assertNotNull(prop);
  assertEquals(Type.STRING,prop.getType());
  prop=tokenTree.getProperty(TOKEN_ATTRIBUTE_EXPIRY);
  assertNotNull(prop);
  assertEquals(Type.DATE,prop.getType());
  for (  String key : reserved.keySet()) {
    PropertyState p=tokenTree.getProperty(key);
    if (p != null) {
      assertFalse(reserved.get(key).equals(p.getValue(Type.STRING)));
    }
  }
  for (  String key : privateAttributes.keySet()) {
    assertEquals(privateAttributes.get(key),tokenTree.getProperty(key).getValue(Type.STRING));
  }
  for (  String key : publicAttributes.keySet()) {
    assertEquals(publicAttributes.get(key),tokenTree.getProperty(key).getValue(Type.STRING));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateTokenWithExpirationParam() throws Exception {
  SimpleCredentials sc=new SimpleCredentials(userId,new char[0]);
  sc.setAttribute(TokenProvider.PARAM_TOKEN_EXPIRATION,100000);
  TokenInfo info=tokenProvider.createToken(sc);
  assertTokenInfo(info,userId);
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenTree);
  assertTrue(tokenTree.exists());
  assertTrue(tokenTree.hasProperty(TokenProvider.PARAM_TOKEN_EXPIRATION));
  assertEquals(100000,tokenTree.getProperty(TokenProvider.PARAM_TOKEN_EXPIRATION).getValue(Type.LONG).longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-1985">OAK-1985</a>
 */
@Test public void testTokenValidationIsCaseInsensitive() throws Exception {
  Root root=adminSession.getLatestRoot();
  TokenConfiguration tokenConfig=getSecurityProvider().getConfiguration(TokenConfiguration.class);
  TokenProvider tp=tokenConfig.getTokenProvider(root);
  String userId=((SimpleCredentials)getAdminCredentials()).getUserID();
  TokenInfo info=tp.createToken(userId.toUpperCase(),Collections.<String,Object>emptyMap());
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  assertEquals(userId,info.getUserId());
  info=tp.getTokenInfo(info.getToken());
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  assertEquals(userId,info.getUserId());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDoCreateToken() throws Exception {
  assertFalse(tokenProvider.doCreateToken(new GuestCredentials()));
  assertFalse(tokenProvider.doCreateToken(new TokenCredentials("token")));
  assertFalse(tokenProvider.doCreateToken(getAdminCredentials()));
  SimpleCredentials sc=new SimpleCredentials("uid","pw".toCharArray());
  assertFalse(tokenProvider.doCreateToken(sc));
  sc.setAttribute("any_attribute","value");
  assertFalse(tokenProvider.doCreateToken(sc));
  sc.setAttribute("rep:token_key","value");
  assertFalse(tokenProvider.doCreateToken(sc));
  sc.setAttribute(".token","existing");
  assertFalse(tokenProvider.doCreateToken(sc));
  sc.setAttribute(".token","");
  assertTrue(tokenProvider.doCreateToken(sc));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetTokenInfoFromInvalidLocation() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  NodeUtil node=new NodeUtil(root.getTree("/")).addChild("testNode",JcrConstants.NT_UNSTRUCTURED);
  try {
    createTokenTree(info,node,TOKEN_NT_NAME);
    tokenTree.remove();
    assertNull(tokenProvider.getTokenInfo(info.getToken()));
  }
  finally {
    node.getTree().remove();
    root.commit(CommitMarker.asCommitAttributes());
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetTokenInfoFromInvalidLocation3() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree.getChild(TOKENS_NODE_NAME));
  try {
    createTokenTree(info,node,JcrConstants.NT_UNSTRUCTURED);
    tokenTree.remove();
    assertNull(tokenProvider.getTokenInfo(info.getToken()));
  }
  finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTokenInfoFromInvalidLocation4() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  TokenInfo info2=null;
  try {
    Tree adminTree=root.getTree(getUserManager(root).getAuthorizable(adminSession.getAuthInfo().getUserID()).getPath());
    NodeUtil node=new NodeUtil(adminTree).getOrAddChild(TOKENS_NODE_NAME,JcrConstants.NT_UNSTRUCTURED);
    assertTrue(root.move(tokenTree.getPath(),node.getTree().getPath() + '/' + tokenTree.getName()));
    info2=tokenProvider.getTokenInfo(info.getToken());
    assertNotNull(info2);
    assertFalse(info2.matches(new TokenCredentials(info.getToken())));
  }
  finally {
    root.refresh();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenValidatorTest </h4><pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidTokenParentNode() throws Exception {
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree).addChild("testNode",JcrConstants.NT_UNSTRUCTURED);
  try {
    node.addChild(TOKENS_NODE_NAME,JcrConstants.NT_UNSTRUCTURED);
    root.commit(CommitMarker.asCommitAttributes());
    fail("Creating a new token '" + node.getTree().getPath() + "' must fail.");
  }
 catch (  CommitFailedException e) {
    assertEquals(68,e.getCode());
  }
 finally {
    node.getTree().remove();
    root.commit(CommitMarker.asCommitAttributes());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateTokenAtInvalidLocationInsideUser2() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  NodeUtil node=new NodeUtil(userTree).getOrAddChild(TOKENS_NODE_NAME,TOKENS_NT_NAME);
  try {
    node=node.addChild("invalid",JcrConstants.NT_UNSTRUCTURED);
    createTokenTree(info,node,TOKEN_NT_NAME);
    tokenTree.remove();
    root.commit(CommitMarker.asCommitAttributes());
    fail("Creating a new token '" + node.getTree().getPath() + "' must fail.");
  }
 catch (  CommitFailedException e) {
    assertEquals(65,e.getCode());
  }
 finally {
    node.getTree().remove();
    root.commit(CommitMarker.asCommitAttributes());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.user.LoginModuleImplTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImpersonationWithAttributes() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    cs.close();
    cs=null;
    sc=new SimpleCredentials(USER_ID,new char[0]);
    sc.setAttribute("attr","value");
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,authInfo);
    cs=login(ic);
    authInfo=cs.getAuthInfo();
    assertTrue(Arrays.asList(authInfo.getAttributeNames()).contains("attr"));
    assertEquals("value",authInfo.getAttribute("attr"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSelfImpersonation() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    assertEquals(USER_ID,authInfo.getUserID());
    cs.close();
    sc=new SimpleCredentials(USER_ID,new char[0]);
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,authInfo);
    cs=login(ic);
    authInfo=cs.getAuthInfo();
    assertEquals(USER_ID,authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserLoginIsCaseInsensitive2() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    cs=login(new SimpleCredentials(USER_ID_CASED,USER_PW.toCharArray()));
    AuthInfo authInfo=cs.getAuthInfo();
    assertEquals(USER_ID_CASED,authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGuestLogin() throws Exception {
  ContentSession cs=login(new GuestCredentials());
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
    assertEquals(anonymousID,authInfo.getUserID());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidImpersonation() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    assertEquals(USER_ID,authInfo.getUserID());
    cs.close();
    cs=null;
    ConfigurationParameters config=securityProvider.getConfiguration(UserConfiguration.class).getParameters();
    String adminId=UserUtil.getAdminId(config);
    sc=new SimpleCredentials(adminId,new char[0]);
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,authInfo);
    try {
      cs=login(ic);
      fail("User 'test' should not be allowed to impersonate " + adminId);
    }
 catch (    LoginException e) {
    }
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnonymousLogin() throws Exception {
  String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
  UserManager userMgr=getUserManager(root);
  Authorizable anonymous=userMgr.getAuthorizable(anonymousID);
  assertNotNull(anonymous);
  assertFalse(root.getTree(anonymous.getPath()).hasProperty(UserConstants.REP_PASSWORD));
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(anonymousID,new char[0]));
    fail("Login with anonymousID should fail since the initial setup doesn't provide a password.");
  }
 catch (  LoginException e) {
  }
 finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testUserLoginIsCaseInsensitive() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    cs=login(new SimpleCredentials(USER_ID_CASED,USER_PW.toCharArray()));
    AuthInfo authInfo=cs.getAuthInfo();
    UserManager userMgr=getUserManager(root);
    Authorizable auth=userMgr.getAuthorizable(authInfo.getUserID());
    assertNotNull(auth);
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoginWithAttributes() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    sc.setAttribute("attr","value");
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    assertTrue(Arrays.asList(authInfo.getAttributeNames()).contains("attr"));
    assertEquals("value",authInfo.getAttribute("attr"));
    cs.close();
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserLogin() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    cs=login(new SimpleCredentials(USER_ID,USER_PW.toCharArray()));
    AuthInfo authInfo=cs.getAuthInfo();
    assertEquals(USER_ID,authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.AuthorizationContextTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepoPolicyDefinesContextRoot() throws Exception {
  createAcl(null,PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT);
  Tree aclTree=root.getTree("/").getChild(AccessControlConstants.REP_REPO_POLICY);
  assertTrue(aclTree.exists());
  assertTrue(AuthorizationContext.getInstance().definesContextRoot(aclTree));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLocation() throws Exception {
  createAcl("/",PrivilegeConstants.JCR_READ);
  Context ctx=AuthorizationContext.getInstance();
  String policyPath="/rep:policy";
  assertTrue(ctx.definesLocation(TreeLocation.create(root,policyPath + "/allow")));
  assertTrue(ctx.definesLocation(TreeLocation.create(root,policyPath + "/allow/" + AccessControlConstants.REP_PRINCIPAL_NAME)));
  assertTrue(ctx.definesLocation(TreeLocation.create(root,policyPath + "/allow/" + AccessControlConstants.REP_PRIVILEGES)));
  List<String> existingRegular=ImmutableList.of("/","/jcr:system");
  for (  String path : existingRegular) {
    assertFalse(path,ctx.definesLocation(TreeLocation.create(root,path)));
    assertFalse(path,ctx.definesLocation(TreeLocation.create(root,PathUtils.concat(path,JcrConstants.JCR_PRIMARYTYPE))));
  }
  List<String> nonExistingItem=ImmutableList.of('/' + AccessControlConstants.REP_REPO_POLICY,"/content/" + AccessControlConstants.REP_POLICY,"/content/" + AccessControlConstants.REP_PRIVILEGES,"/content/" + AccessControlConstants.REP_REPO_POLICY,"/jcr:system/" + AccessControlConstants.REP_POLICY,PermissionConstants.PERMISSIONS_STORE_PATH + "/nonexisting");
  for (  String path : nonExistingItem) {
    assertTrue(path,ctx.definesLocation(TreeLocation.create(root,path)));
    assertTrue(path,ctx.definesLocation(TreeLocation.create(root,PathUtils.concat(path,AccessControlConstants.REP_PRIVILEGES))));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPolicyDefinesContextRoot() throws Exception {
  createAcl("/",PrivilegeConstants.JCR_READ);
  Tree aclTree=root.getTree("/").getChild(AccessControlConstants.REP_POLICY);
  assertTrue(aclTree.exists());
  assertTrue(AuthorizationContext.getInstance().definesContextRoot(aclTree));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.ACLTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDifferentPrivilegeImplementation() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,readPriv,false);
  assertFalse(acl.addEntry(new PrincipalImpl(testPrincipal.getName()),readPriv,false));
  assertFalse(acl.addEntry(new Principal(){
    public String getName(){
      return testPrincipal.getName();
    }
  }
,readPriv,false));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReorder() throws Exception {
  Privilege[] read=privilegesFromNames(JCR_READ,JCR_READ_ACCESS_CONTROL);
  Privilege[] write=privilegesFromNames(JCR_WRITE);
  AbstractAccessControlList acl=createEmptyACL();
  acl.addAccessControlEntry(testPrincipal,read);
  acl.addEntry(testPrincipal,write,false);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),write);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  AccessControlEntry first=entries[0];
  AccessControlEntry second=entries[1];
  AccessControlEntry third=entries[2];
  acl.orderBefore(second,first);
  assertEquals(second,acl.getEntries().get(0));
  assertEquals(first,acl.getEntries().get(1));
  assertEquals(third,acl.getEntries().get(2));
  acl.orderBefore(third,first);
  assertEquals(second,acl.getEntries().get(0));
  assertEquals(third,acl.getEntries().get(1));
  assertEquals(first,acl.getEntries().get(2));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleEntries() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,privileges,true);
  privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  assertTrue(acl.addEntry(testPrincipal,privileges,true));
  assertTrue(acl.size() == 1);
  assertACE(acl.getEntries().get(0),true,privileges);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntryTwice() throws Exception {
  acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap());
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap()));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplementaryEntry3() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  acl.addAccessControlEntry(testPrincipal,privilegesFromNames(JCR_WRITE));
  acl.addEntry(testPrincipal,readPriv,false);
  acl.addAccessControlEntry(testPrincipal,readPriv);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertEquals(1,entries.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplementaryGroupEntry() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Principal everyone=principalManager.getEveryone();
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(everyone,readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  acl.addEntry(everyone,writePriv,true);
  acl.addEntry(testPrincipal,readPriv,false);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(2,entries.length);
  JackrabbitAccessControlEntry first=(JackrabbitAccessControlEntry)entries[0];
  assertEquals(everyone,first.getPrincipal());
  JackrabbitAccessControlEntry second=(JackrabbitAccessControlEntry)entries[1];
  assertEquals(testPrincipal,second.getPrincipal());
  assertACE(second,false,privilegesFromNames(JCR_READ,JCR_WRITE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntry() throws Exception {
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true));
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddAccessControlEntry() throws Exception {
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetEntryForGroupPrincipal() throws Exception {
  Privilege[] privs=privilegesFromNames(JCR_READ);
  Group grPrincipal=(Group)principalManager.getEveryone();
  assertTrue(acl.addAccessControlEntry(grPrincipal,privs));
  assertTrue(acl.addEntry(grPrincipal,privs,false));
  assertEquals(1,acl.size());
  assertFalse(acl.getEntries().get(0).isAllow());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testComplementaryEntry2() throws Exception {
  Privilege[] repwrite=privilegesFromNames(REP_WRITE);
  acl.addAccessControlEntry(testPrincipal,repwrite);
  Privilege[] modProperties=privilegesFromNames(JCR_MODIFY_PROPERTIES);
  assertTrue(acl.addEntry(testPrincipal,modProperties,false));
  assertTrue(acl.size() == 2);
  Privilege[] expected=privilegesFromNames(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_NODE_TYPE_MANAGEMENT);
  assertACE(acl.getEntries().get(0),true,expected);
  assertACE(acl.getEntries().get(1),false,modProperties);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddEntriesWithCustomPrincipal() throws Exception {
  Principal oakPrincipal=new PrincipalImpl("anonymous");
  Principal principal=new Principal(){
    @Override public String getName(){
      return "anonymous";
    }
  }
;
  assertTrue(acl.addAccessControlEntry(oakPrincipal,privilegesFromNames(JCR_READ)));
  assertTrue(acl.addAccessControlEntry(principal,privilegesFromNames(JCR_READ_ACCESS_CONTROL)));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(principal,privilegesFromNames(JCR_READ),false));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertArrayEquals(privilegesFromNames(JCR_READ_ACCESS_CONTROL),acl.getAccessControlEntries()[0].getPrivileges());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleEntries2() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  acl.addEntry(testPrincipal,privileges,true);
  Privilege[] achPrivs=privilegesFromNames(JCR_ADD_CHILD_NODES);
  assertFalse(acl.addEntry(testPrincipal,achPrivs,true));
  assertTrue(acl.size() == 1);
  assertACE(acl.getEntries().get(0),true,privileges);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUpdateGroupEntry() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Principal everyone=principalManager.getEveryone();
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(everyone,readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  acl.addEntry(everyone,writePriv,true);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  JackrabbitAccessControlEntry princ2AllowEntry=(JackrabbitAccessControlEntry)entries[1];
  assertEquals(everyone,princ2AllowEntry.getPrincipal());
  assertACE(princ2AllowEntry,true,privilegesFromNames(JCR_READ,JCR_WRITE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testComplementaryEntry1() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  acl.addEntry(testPrincipal,privileges,true);
  privileges=privilegesFromNames(JCR_READ);
  assertTrue(acl.addEntry(testPrincipal,privileges,false));
  assertTrue(acl.size() == 2);
  assertACE(acl.getEntries().get(0),true,privilegesFromNames(JCR_ADD_CHILD_NODES));
  assertACE(acl.getEntries().get(1),false,privilegesFromNames(JCR_READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiplePrincipals() throws Exception {
  Principal everyone=principalManager.getEveryone();
  Privilege[] privs=privilegesFromNames(JCR_READ);
  acl.addAccessControlEntry(testPrincipal,privs);
  assertFalse(acl.addAccessControlEntry(testPrincipal,privs));
  assertTrue(acl.addAccessControlEntry(everyone,privs));
  assertTrue(acl.getAccessControlEntries().length == 2);
  assertEquals(everyone,acl.getAccessControlEntries()[1].getPrincipal());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntry2() throws Exception {
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap()));
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMvRestrictions() throws Exception {
  ValueFactory vf=getValueFactory();
  Value[] vs=new Value[]{vf.createValue(JcrConstants.NT_FILE,PropertyType.NAME),vf.createValue(JcrConstants.NT_FOLDER,PropertyType.NAME)};
  Map<String,Value[]> mvRestrictions=Collections.singletonMap(REP_NT_NAMES,vs);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,vf.createValue("/.*"));
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,false,restrictions,mvRestrictions));
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,false,restrictions,mvRestrictions));
  assertEquals(1,acl.getAccessControlEntries().length);
  JackrabbitAccessControlEntry ace=(JackrabbitAccessControlEntry)acl.getAccessControlEntries()[0];
  try {
    ace.getRestriction(REP_NT_NAMES);
    fail();
  }
 catch (  ValueFormatException e) {
  }
  Value[] vvs=ace.getRestrictions(REP_NT_NAMES);
  assertArrayEquals(vs,vvs);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComplementaryEntry() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,privileges,true);
  assertTrue(acl.addEntry(testPrincipal,privileges,false));
  assertEquals(1,acl.size());
  assertACE(acl.getEntries().get(0),false,privileges);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNewEntriesAppendedAtEnd() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  acl.addEntry(testPrincipal,readPriv,true);
  acl.addEntry(principalManager.getEveryone(),readPriv,true);
  acl.addEntry(testPrincipal,writePriv,false);
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  assertEquals(3,entries.length);
  JackrabbitAccessControlEntry last=(JackrabbitAccessControlEntry)entries[2];
  assertEquals(testPrincipal,last.getPrincipal());
  assertACE(last,false,writePriv);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveEntry() throws Exception {
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  acl.removeAccessControlEntry(acl.getAccessControlEntries()[0]);
  assertTrue(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReorderToTheEnd() throws Exception {
  Privilege[] read=privilegesFromNames(JCR_READ,JCR_READ_ACCESS_CONTROL);
  Privilege[] write=privilegesFromNames(JCR_WRITE);
  AbstractAccessControlList acl=createEmptyACL();
  acl.addAccessControlEntry(testPrincipal,read);
  acl.addEntry(testPrincipal,write,false);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),write);
  List<? extends JackrabbitAccessControlEntry> entries=acl.getEntries();
  assertEquals(3,entries.size());
  AccessControlEntry first=entries.get(0);
  acl.orderBefore(first,null);
  List<? extends JackrabbitAccessControlEntry> entriesAfter=acl.getEntries();
  assertEquals(first,entriesAfter.get(2));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateAndComplementary() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Privilege[] acReadPriv=privilegesFromNames(JCR_READ_ACCESS_CONTROL);
  assertTrue(acl.addEntry(testPrincipal,readPriv,true));
  assertTrue(acl.addEntry(testPrincipal,writePriv,true));
  assertTrue(acl.addEntry(testPrincipal,acReadPriv,true));
  assertEquals(1,acl.size());
  assertTrue(acl.addEntry(testPrincipal,readPriv,false));
  assertEquals(2,acl.size());
  assertACE(acl.getEntries().get(0),true,privilegesFromNames(JCR_WRITE,JCR_READ_ACCESS_CONTROL));
  assertACE(acl.getEntries().get(1),false,readPriv);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveEntries() throws Exception {
  JackrabbitAccessControlList acl=createACL(getTestPath(),createTestEntries(),namePathMapper);
  for (  AccessControlEntry ace : acl.getAccessControlEntries()) {
    acl.removeAccessControlEntry(ace);
  }
  assertTrue(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestrictions() throws Exception {
  String[] names=acl.getRestrictionNames();
  assertNotNull(names);
  assertEquals(4,names.length);
  assertArrayEquals(new String[]{REP_GLOB,REP_NT_NAMES,REP_PREFIXES,REP_ITEM_NAMES},names);
  assertEquals(PropertyType.STRING,acl.getRestrictionType(names[0]));
  assertEquals(PropertyType.NAME,acl.getRestrictionType(names[1]));
  assertEquals(PropertyType.STRING,acl.getRestrictionType(names[2]));
  assertEquals(PropertyType.NAME,acl.getRestrictionType(names[3]));
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  assertTrue(acl.addAccessControlEntry(testPrincipal,writePriv));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertFalse(acl.addAccessControlEntry(testPrincipal,writePriv));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertFalse(acl.addEntry(testPrincipal,writePriv,true));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(testPrincipal,writePriv,false));
  assertEquals(1,acl.getAccessControlEntries().length);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,getValueFactory().createValue("/.*"));
  assertTrue(acl.addEntry(testPrincipal,writePriv,false,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertFalse(acl.addEntry(testPrincipal,writePriv,false,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(testPrincipal,writePriv,true,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.AccessControlManagerImplTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectiveModifiedPolicy() throws Exception {
  ACL acl=setupPolicy(testPath);
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  root.commit();
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT));
  acMgr.setPolicy(testPath,acl);
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] effectiveAces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertArrayEquals(aces,effectiveAces);
  assertFalse(Arrays.equals(effectiveAces,acl.getAccessControlEntries()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivileges() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  List<String> testPaths=new ArrayList<String>();
  testPaths.add(null);
  testPaths.add("/");
  testPaths.add("/jcr:system");
  testPaths.add(testPath);
  for (  String path : testPaths) {
    Privilege[] supported=acMgr.getSupportedPrivileges(path);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesNodeNotAccessControlled() throws Exception {
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 Policy at testPath not accessible -> getEffectivePolicies
 * only returns the readable policy but doesn't fail.
 */
@Test public void testTestSessionGetEffectivePoliciesByPrincipal2() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(Collections.singleton(getTestPrincipal()));
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetRepoPolicy() throws Exception {
  ACL acl=getApplicablePolicy(null);
  acl.addAccessControlEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT));
  acMgr.setPolicy(null,acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  AccessControlPolicy[] policies=getAccessControlManager(root2).getPolicies((String)null);
  assertEquals(1,policies.length);
  assertArrayEquals(acl.getAccessControlEntries(),((ACL)policies[0]).getAccessControlEntries());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyWritesAcContent() throws Exception {
  ACL acl=getApplicablePolicy(testPath);
  acl.addAccessControlEntry(testPrincipal,testPrivileges);
  acl.addEntry(EveryonePrincipal.getInstance(),testPrivileges,false,getGlobRestriction("*/something"));
  acMgr.setPolicy(testPath,acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  Tree tree=root2.getTree(testPath);
  assertTrue(tree.hasChild(REP_POLICY));
  Tree policyTree=tree.getChild(REP_POLICY);
  assertEquals(NT_REP_ACL,TreeUtil.getPrimaryTypeName(policyTree));
  assertEquals(2,policyTree.getChildrenCount(3));
  Iterator<Tree> children=policyTree.getChildren().iterator();
  Tree ace=children.next();
  assertEquals(NT_REP_GRANT_ACE,TreeUtil.getPrimaryTypeName(ace));
  assertEquals(testPrincipal.getName(),TreeUtil.getString(ace,REP_PRINCIPAL_NAME));
  assertEquals(newHashSet(testPrivileges),newHashSet(privilegesFromNames(TreeUtil.getStrings(ace,REP_PRIVILEGES))));
  assertFalse(ace.hasChild(REP_RESTRICTIONS));
  Tree ace2=children.next();
  assertEquals(NT_REP_DENY_ACE,TreeUtil.getPrimaryTypeName(ace2));
  assertEquals(EveryonePrincipal.NAME,ace2.getProperty(REP_PRINCIPAL_NAME).getValue(Type.STRING));
  Privilege[] privs=privilegesFromNames(TreeUtil.getNames(ace2,REP_PRIVILEGES));
  assertEquals(newHashSet(testPrivileges),newHashSet(privs));
  assertTrue(ace2.hasChild(REP_RESTRICTIONS));
  Tree restr=ace2.getChild(REP_RESTRICTIONS);
  assertEquals("*/something",restr.getProperty(REP_GLOB).getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesAccessControlledNodePath() throws Exception {
  Privilege[] expected=privilegesFromNames(PrivilegeConstants.JCR_ALL);
  for (  String path : getAcContentPaths()) {
    assertArrayEquals(expected,acMgr.getPrivileges(path));
    assertArrayEquals(expected,acMgr.getPrivileges(path,getPrincipals(adminSession)));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesAccessControlledNodePath() throws Exception {
  Privilege[] privs=privilegesFromNames(PrivilegeConstants.JCR_ALL);
  for (  String path : getAcContentPaths()) {
    assertTrue(acMgr.hasPrivileges(path,privs));
    assertTrue(acMgr.hasPrivileges(path,getPrincipals(adminSession),privs));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePolicies() throws Exception {
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertTrue(itr.hasNext());
  AccessControlPolicy policy=itr.nextAccessControlPolicy();
  assertNotNull(policy);
  assertTrue(policy instanceof ACL);
  ACL acl=(ACL)policy;
  assertTrue(acl.isEmpty());
  assertEquals(testPath,acl.getPath());
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetPolicies() throws Exception {
  setupPolicy(testPath);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  PrincipalManager testPrincipalMgr=getPrincipalManager(testRoot);
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    if (testPrincipalMgr.hasPrincipal(principal.getName())) {
      AccessControlPolicy[] policies=testAcMgr.getPolicies(principal);
      assertNotNull(policies);
      assertEquals(0,policies.length);
    }
 else {
      assertEquals(0,testAcMgr.getPolicies(principal).length);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesByPrincipal2() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  root.commit();
  applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 Policy at testPath not accessible -> getEffectivePolicies
 * only returns the readable policy but doesn't fail.
 */
@Test public void testTestSessionGetEffectivePoliciesByPrincipal3() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ));
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(Collections.singleton(getTestPrincipal()));
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesWithCollidingNode() throws Exception {
  NodeUtil testTree=new NodeUtil(root.getTree(testPath));
  testTree.addChild(REP_POLICY,JcrConstants.NT_UNSTRUCTURED);
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-12 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectivePoliciesByPrincipal() throws Exception {
  Set<Set<Principal>> principalSets=new HashSet<Set<Principal>>();
  principalSets.add(Collections.singleton(getTestPrincipal()));
  principalSets.add(Collections.<Principal>singleton(EveryonePrincipal.getInstance()));
  principalSets.add(ImmutableSet.of(testPrincipal,EveryonePrincipal.getInstance()));
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    assertEquals(0,policies.length);
  }
  setupPolicy(testPath);
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    assertEquals(0,policies.length);
  }
  root.commit();
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    if (principals.contains(getTestPrincipal())) {
      assertEquals(1,policies.length);
    }
 else {
      assertEquals(0,policies.length);
    }
  }
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(childPath);
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    if (principals.contains(getTestPrincipal())) {
      assertEquals(1,policies.length);
    }
 else {
      assertEquals(0,policies.length);
    }
  }
  root.commit();
  for (  Set<Principal> principals : principalSets) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principals);
    assertNotNull(policies);
    if (principals.contains(getTestPrincipal())) {
      assertEquals(2,policies.length);
    }
 else {
      assertEquals(0,policies.length);
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetEffectivePoliciesByPrincipal() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  Privilege[] privs=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  setupPolicy(testPath,privs);
  setupPolicy(childPath,privs);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(Collections.singleton(getTestPrincipal()));
  assertNotNull(effective);
  assertEquals(2,effective.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicies() throws Exception {
  AccessControlPolicy policy=getApplicablePolicy(testPath);
  acMgr.setPolicy(testPath,policy);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertTrue(acl.isEmpty());
  assertEquals(testPath,acl.getOakPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRepoPolicies() throws Exception {
  String path=null;
  AccessControlPolicy[] policies=acMgr.getPolicies(path);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  acMgr.setPolicy(null,acMgr.getApplicablePolicies(path).nextAccessControlPolicy());
  assertFalse(acMgr.getApplicablePolicies(path).hasNext());
  policies=acMgr.getPolicies(path);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertTrue(acl.isEmpty());
  assertNull(acl.getPath());
  assertNull(acl.getOakPath());
  assertFalse(acMgr.getApplicablePolicies(path).hasNext());
  acMgr.removePolicy(path,acl);
  assertEquals(0,acMgr.getPolicies(path).length);
  assertTrue(acMgr.getApplicablePolicies(path).hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesByPrincipal() throws Exception {
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    AccessControlPolicy[] applicable=acMgr.getApplicablePolicies(principal);
    assertNotNull(applicable);
    assertEquals(1,applicable.length);
    assertTrue(applicable[0] instanceof ACL);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveRepoPolicy() throws Exception {
  ACL acl=setupPolicy(null);
  acMgr.removePolicy(null,acl);
  assertEquals(0,acMgr.getPolicies((String)null).length);
  assertTrue(acMgr.getApplicablePolicies((String)null).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivilegesIncludingPathConversion() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  List<String> testPaths=new ArrayList<String>();
  testPaths.add('/' + TEST_LOCAL_PREFIX + ":testRoot");
  testPaths.add("/{" + TEST_URI + "}testRoot");
  NameMapper remapped=new LocalNameMapper(root,singletonMap(TEST_LOCAL_PREFIX,TEST_URI));
  AccessControlManager acMgr=getAccessControlManager(new NamePathMapperImpl(remapped));
  for (  String path : testPaths) {
    Privilege[] supported=acMgr.getSupportedPrivileges(path);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedForPrivilegesAcContent() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  for (  String acPath : getAcContentPaths()) {
    Privilege[] supported=acMgr.getSupportedPrivileges(acPath);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPrincipalPolicy() throws Exception {
  JackrabbitAccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  ACL acl=(ACL)applicable[0];
  Value pathValue=getValueFactory().createValue(testPath,PropertyType.PATH);
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.singletonMap(REP_NODE_PATH,pathValue)));
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  AccessControlPolicy[] policies=getAccessControlManager(root2).getPolicies(testPath);
  assertEquals(1,policies.length);
  assertEquals(1,((ACL)policies[0]).getAccessControlEntries().length);
  policies=getAccessControlManager(root2).getPolicies(testPrincipal);
  assertEquals(1,policies.length);
  assertArrayEquals(acl.getAccessControlEntries(),((ACL)policies[0]).getAccessControlEntries());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectivePoliciesNewPolicy() throws Exception {
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  setupPolicy(testPath);
  policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  policies=acMgr.getEffectivePolicies(childPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  setupPolicy(childPath);
  policies=acMgr.getEffectivePolicies(childPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectivePolicies() throws Exception {
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  setupPolicy(testPath);
  root.commit();
  policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  policies=acMgr.getEffectivePolicies(childPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  setupPolicy(childPath);
  root.commit();
  policies=acMgr.getEffectivePolicies(childPath);
  assertNotNull(policies);
  assertEquals(2,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : only accessible policies are returned but not exception
 * is raised.
 */
@Test public void testTestSessionGetEffectivePoliciesByPrincipals2() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  Privilege[] privs=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  JackrabbitAccessControlList acl=getApplicablePolicy(testPath);
  acl.addEntry(getTestPrincipal(),privs,false);
  acMgr.setPolicy(testPath,acl);
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  Set<Principal> principals=ImmutableSet.of(getTestPrincipal(),EveryonePrincipal.getInstance());
  AccessControlPolicy[] policies=testAcMgr.getEffectivePolicies(principals);
  assertNotNull(policies);
  assertEquals(1,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePrincipalPolicy2() throws Exception {
  setupPolicy(testPath);
  root.commit();
  AccessControlPolicy[] policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  acMgr.removePolicy(acl.getPath(),acl);
  policies=acMgr.getPolicies(testPath);
  assertEquals(0,policies.length);
  policies=acMgr.getPolicies(testPrincipal);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testTestSessionGetEffectivePolicies() throws Exception {
  Privilege[] privileges=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  setupPolicy(testPath,privileges);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  AccessControlManager testAcMgr=getTestAccessControlManager();
  assertTrue(testAcMgr.hasPrivileges(testPath,privileges));
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(testPath);
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyExistingPolicy() throws Exception {
  ACL acl=getApplicablePolicy(testPath);
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  AccessControlEntry allowTest=acl.getAccessControlEntries()[0];
  acMgr.setPolicy(testPath,acl);
  root.commit();
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  assertTrue(acl.addEntry(EveryonePrincipal.getInstance(),testPrivileges,false,getGlobRestriction("*/something")));
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  assertEquals(2,aces.length);
  AccessControlEntry denyEveryone=aces[1];
  assertEquals(EveryonePrincipal.getInstance(),denyEveryone.getPrincipal());
  acl.orderBefore(denyEveryone,allowTest);
  acMgr.setPolicy(testPath,acl);
  root.commit();
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  aces=acl.getAccessControlEntries();
  assertEquals(2,aces.length);
  assertEquals(denyEveryone,aces[0]);
  assertEquals(allowTest,aces[1]);
  Privilege[] readAc=new Privilege[]{acMgr.privilegeFromName(PrivilegeConstants.JCR_READ_ACCESS_CONTROL)};
  assertTrue(acl.addEntry(testPrincipal,readAc,false,Collections.<String,Value>emptyMap()));
  assertEquals(3,acl.size());
  AccessControlEntry denyTest=acl.getAccessControlEntries()[2];
  acl.orderBefore(denyTest,allowTest);
  acMgr.setPolicy(testPath,acl);
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  aces=acl.getAccessControlEntries();
  assertEquals(3,aces.length);
  assertEquals(denyEveryone,aces[0]);
  assertEquals(denyTest,aces[1]);
  assertEquals(allowTest,aces[2]);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterSet() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testTestSessionGetEffectivePolicies2() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ));
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  AccessControlManager testAcMgr=getTestAccessControlManager();
  assertTrue(testAcMgr.hasPrivileges(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)));
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(childPath);
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEffectiveSorting() throws Exception {
  Set<Principal> principalSet=ImmutableSet.of(testPrincipal,EveryonePrincipal.getInstance());
  ACL nullPathPolicy=null;
  try {
    ACL policy=getApplicablePolicy(testPath);
    policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
    policy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
    policy.addEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false);
    acMgr.setPolicy(testPath,policy);
    NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
    String childPath=child.getTree().getPath();
    setupPolicy(childPath);
    nullPathPolicy=getApplicablePolicy(null);
    assertNotNull(nullPathPolicy);
    nullPathPolicy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT),true);
    acMgr.setPolicy(null,nullPathPolicy);
    root.commit();
    AccessControlPolicy[] effectivePolicies=acMgr.getEffectivePolicies(principalSet);
    assertEquals(3,effectivePolicies.length);
    assertNull(((JackrabbitAccessControlPolicy)effectivePolicies[0]).getPath());
    assertEquals(testPath,((JackrabbitAccessControlPolicy)effectivePolicies[1]).getPath());
    assertEquals(childPath,((JackrabbitAccessControlPolicy)effectivePolicies[2]).getPath());
  }
  finally {
    if (nullPathPolicy != null) {
      acMgr.removePolicy(null,nullPathPolicy);
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesOnAccessControllable() throws Exception {
  NodeUtil node=new NodeUtil(root.getTree(testPath));
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_ACCESS_CONTROLLABLE);
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertTrue(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetPolicy() throws Exception {
  ACL acl=getApplicablePolicy(testPath);
  acl.addAccessControlEntry(testPrincipal,testPrivileges);
  acl.addEntry(EveryonePrincipal.getInstance(),testPrivileges,false,getGlobRestriction("*/something"));
  acMgr.setPolicy(testPath,acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  AccessControlPolicy[] policies=getAccessControlManager(root2).getPolicies(testPath);
  assertEquals(1,policies.length);
  assertArrayEquals(acl.getAccessControlEntries(),((ACL)policies[0]).getAccessControlEntries());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoEffectiveDuplicateEntries() throws Exception {
  Set<Principal> principalSet=ImmutableSet.of(testPrincipal,EveryonePrincipal.getInstance());
  ACL policy=getApplicablePolicy(testPath);
  policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
  policy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
  policy.addEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false);
  assertEquals(3,policy.getAccessControlEntries().length);
  acMgr.setPolicy(testPath,policy);
  root.commit();
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(principalSet);
  assertEquals(1,policies.length);
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(childPath);
  root.commit();
  policies=acMgr.getEffectivePolicies(principalSet);
  assertEquals(2,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesByPrincipal() throws Exception {
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    AccessControlPolicy[] policies=acMgr.getPolicies(principal);
    assertNotNull(policies);
    assertEquals(0,policies.length);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePolicy() throws Exception {
  ACL acl=setupPolicy(testPath);
  acMgr.removePolicy(testPath,acl);
  assertEquals(0,acMgr.getPolicies(testPath).length);
  assertTrue(acMgr.getApplicablePolicies(testPath).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEffectivePoliciesFiltering() throws Exception {
  ACL policy=getApplicablePolicy(testPath);
  policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
  policy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
  policy.addEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false);
  assertEquals(3,policy.getAccessControlEntries().length);
  acMgr.setPolicy(testPath,policy);
  root.commit();
  List<Principal> principals=ImmutableList.of(testPrincipal,new PrincipalImpl(testPrincipal.getName()),new Principal(){
    @Override public String getName(){
      return testPrincipal.getName();
    }
  }
);
  for (  Principal princ : principals) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(ImmutableSet.of(princ));
    assertEquals(1,policies.length);
    assertTrue(policies[0] instanceof AccessControlList);
    AccessControlList acl=(AccessControlList)policies[0];
    assertEquals(2,acl.getAccessControlEntries().length);
    for (    AccessControlEntry ace : acl.getAccessControlEntries()) {
      assertEquals(princ.getName(),ace.getPrincipal().getName());
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetEffectivePoliciesByPrincipals() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  Privilege[] privs=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  JackrabbitAccessControlList acl=getApplicablePolicy(childPath);
  acl.addEntry(EveryonePrincipal.getInstance(),privs,true);
  acMgr.setPolicy(childPath,acl);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  Set<Principal> principals=ImmutableSet.of(getTestPrincipal(),EveryonePrincipal.getInstance());
  AccessControlPolicy[] policies=testAcMgr.getEffectivePolicies(principals);
  assertNotNull(policies);
  assertEquals(2,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesForAccessControlled() throws Exception {
  AccessControlPolicy policy=getApplicablePolicy(testPath);
  acMgr.setPolicy(testPath,policy);
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrivilegeFromName() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  for (  Privilege privilege : allPrivileges) {
    Privilege p=acMgr.privilegeFromName(privilege.getName());
    assertEquals(privilege,p);
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetPrivileges() throws Exception {
  setupPolicy(testPath);
  root.commit();
  AccessControlManagerImpl testAcMgr=getTestAccessControlManager();
  Set<Principal> testPrincipals=getPrincipals(getTestRoot().getContentSession());
  assertArrayEquals(new Privilege[0],testAcMgr.getPrivileges(null));
  assertArrayEquals(new Privilege[0],testAcMgr.getPrivileges(null,testPrincipals));
  Privilege[] privs=testAcMgr.getPrivileges(testPath);
  assertEquals(ImmutableSet.copyOf(testPrivileges),ImmutableSet.copyOf(privs));
  privs=testAcMgr.getPrivileges(testPath,testPrincipals);
  assertEquals(ImmutableSet.copyOf(testPrivileges),ImmutableSet.copyOf(privs));
  try {
    testAcMgr.getPrivileges(testPath,getPrincipals(adminSession));
    fail("testSession doesn't have sufficient permission to read access control information at testPath");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasRepoPrivileges() throws Exception {
  assertTrue(acMgr.hasPrivileges(null,privilegesFromNames(PrivilegeConstants.JCR_ALL)));
  assertTrue(acMgr.hasPrivileges(null,getPrincipals(adminSession),privilegesFromNames(PrivilegeConstants.JCR_ALL)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPrincipalPolicy2() throws Exception {
  setupPolicy(testPath);
  root.commit();
  JackrabbitAccessControlPolicy[] policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  Map<String,Value> restrictions=new HashMap<String,Value>();
  restrictions.put(REP_NODE_PATH,getValueFactory().createValue(testPath,PropertyType.PATH));
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,restrictions));
  restrictions.putAll(getGlobRestriction("*"));
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,true,restrictions));
  acMgr.setPolicy(acl.getPath(),acl);
  assertEquals(2,((ACL)acMgr.getPolicies(testPath)[0]).getAccessControlEntries().length);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionHasRepoPrivileges() throws Exception {
  AccessControlManagerImpl testAcMgr=getTestAccessControlManager();
  assertFalse(testAcMgr.hasPrivileges(null,testPrivileges));
  assertFalse(testAcMgr.hasPrivileges(null,getPrincipals(getTestRoot().getContentSession()),testPrivileges));
  try {
    testAcMgr.getPrivileges(null,getPrincipals(adminSession));
    fail("testSession doesn't have sufficient permission to read access control information");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesByPrincipal2() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  root.commit();
  policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(1,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTestSessionHasPrivileges() throws Exception {
  setupPolicy(testPath);
  root.commit();
  AccessControlManagerImpl testAcMgr=getTestAccessControlManager();
  List<Privilege[]> granted=new ArrayList<Privilege[]>();
  granted.add(privilegesFromNames(PrivilegeConstants.JCR_READ));
  granted.add(privilegesFromNames(PrivilegeConstants.REP_READ_NODES));
  granted.add(privilegesFromNames(PrivilegeConstants.REP_READ_PROPERTIES));
  granted.add(privilegesFromNames(PrivilegeConstants.JCR_ADD_CHILD_NODES));
  granted.add(testPrivileges);
  for (  Privilege[] privileges : granted) {
    assertTrue(testAcMgr.hasPrivileges(testPath,privileges));
    assertTrue(testAcMgr.hasPrivileges(testPath,getPrincipals(getTestRoot().getContentSession()),privileges));
  }
  List<Privilege[]> denied=new ArrayList<Privilege[]>();
  denied.add(privilegesFromNames(PrivilegeConstants.JCR_ALL));
  denied.add(privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  denied.add(privilegesFromNames(PrivilegeConstants.JCR_WRITE));
  denied.add(privilegesFromNames(PrivilegeConstants.JCR_LOCK_MANAGEMENT));
  for (  Privilege[] privileges : denied) {
    assertFalse(testAcMgr.hasPrivileges(testPath,privileges));
    assertFalse(testAcMgr.hasPrivileges(testPath,getPrincipals(getTestRoot().getContentSession()),privileges));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetApplicablePolicies() throws Exception {
  setupPolicy(testPath);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    AccessControlPolicy[] applicable=testAcMgr.getApplicablePolicies(principal);
    assertNotNull(applicable);
    assertEquals(1,applicable.length);
    assertTrue(applicable[0] instanceof ACL);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterRemove() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  acMgr.removePolicy(testPath,policies[0]);
  policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  assertTrue(acMgr.getApplicablePolicies(testPath).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePrincipalPolicy() throws Exception {
  JackrabbitAccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  ACL acl=(ACL)applicable[0];
  Value pathValue=getValueFactory().createValue(testPath,PropertyType.PATH);
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.singletonMap(REP_NODE_PATH,pathValue)));
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  acMgr.removePolicy(acl.getPath(),acl);
  root.commit();
  assertEquals(0,acMgr.getPolicies(testPrincipal).length);
  assertEquals(0,acMgr.getPolicies(testPath).length);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesForPrincipals() throws Exception {
  Set<Principal> adminPrincipals=getPrincipals(adminSession);
  Privilege[] expected=privilegesFromNames(PrivilegeConstants.JCR_ALL);
  assertArrayEquals(expected,acMgr.getPrivileges("/",adminPrincipals));
  assertArrayEquals(expected,acMgr.getPrivileges(null,adminPrincipals));
  assertArrayEquals(expected,acMgr.getPrivileges(testPath,adminPrincipals));
  setupPolicy(testPath);
  root.commit();
  Set<Principal> testPrincipals=Collections.singleton(testPrincipal);
  assertArrayEquals(new Privilege[0],acMgr.getPrivileges(null,testPrincipals));
  assertArrayEquals(new Privilege[0],acMgr.getPrivileges("/",testPrincipals));
  assertEquals(ImmutableSet.copyOf(testPrivileges),ImmutableSet.copyOf(acMgr.getPrivileges(testPath,testPrincipals)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicyWithInvalidPrincipal() throws Exception {
  ACL policy=getApplicablePolicy(testPath);
  policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
  acMgr.setPolicy(testPath,policy);
  NodeUtil aclNode=new NodeUtil(root.getTree(testPath + '/' + REP_POLICY));
  NodeUtil aceNode=aclNode.addChild("testACE",NT_REP_DENY_ACE);
  aceNode.setString(REP_PRINCIPAL_NAME,"invalidPrincipal");
  aceNode.setNames(REP_PRIVILEGES,PrivilegeConstants.JCR_READ);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  ACL acl=(ACL)policies[0];
  List<String> principalNames=new ArrayList<String>();
  for (  AccessControlEntry ace : acl.getEntries()) {
    principalNames.add(ace.getPrincipal().getName());
  }
  assertTrue(principalNames.remove("invalidPrincipal"));
  assertTrue(principalNames.remove(testPrincipal.getName()));
  assertTrue(principalNames.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicableRepoPolicies() throws Exception {
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies((String)null);
  assertNotNull(itr);
  assertTrue(itr.hasNext());
  AccessControlPolicy policy=itr.nextAccessControlPolicy();
  assertNotNull(policy);
  assertTrue(policy instanceof ACL);
  ACL acl=(ACL)policy;
  assertTrue(acl.isEmpty());
  assertNull(acl.getPath());
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.AccessControlValidatorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPolicyWithOutChildOrder() throws AccessDeniedException {
  NodeUtil testRoot=getTestRoot();
  testRoot.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_ACCESS_CONTROLLABLE);
  testRoot.addChild(REP_POLICY,NT_REP_ACL);
  try {
    root.commit();
    fail("Policy node with child node ordering");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals("OakAccessControl0004: Invalid policy node: Order of children is not stable.",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void hiddenNodeChanged() throws CommitFailedException {
  AccessControlValidatorProvider provider=new AccessControlValidatorProvider(getSecurityProvider());
  MemoryNodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child(":hidden");
  NodeState root=builder.getNodeState();
  NodeBuilder test=root.builder().child("test");
  NodeBuilder hidden=test.child(":hidden");
  hidden.child("added");
  Validator validator=provider.getRootValidator(root,builder.getNodeState(),CommitInfo.EMPTY);
  Validator childValidator=validator.childNodeChanged("test",root.getChildNode("test"),test.getNodeState());
  assertNotNull(childValidator);
  Validator hiddenValidator=childValidator.childNodeChanged(":hidden",root.getChildNode("test").getChildNode(":hidden"),hidden.getNodeState());
  assertNull(hiddenValidator);
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void hiddenNodeDeleted() throws CommitFailedException {
  AccessControlValidatorProvider provider=new AccessControlValidatorProvider(getSecurityProvider());
  MemoryNodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child(":hidden");
  NodeState root=builder.getNodeState();
  builder=root.builder();
  NodeBuilder test=builder.child("test");
  test.child(":hidden").remove();
  Validator validator=provider.getRootValidator(root,builder.getNodeState(),CommitInfo.EMPTY);
  Validator childValidator=validator.childNodeChanged("test",root.getChildNode("test"),test.getNodeState());
  assertNotNull(childValidator);
  Validator hiddenValidator=childValidator.childNodeDeleted(":hidden",root.getChildNode("test").getChildNode(":hidden"));
  assertNull(hiddenValidator);
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void hiddenNodeAdded() throws CommitFailedException {
  AccessControlValidatorProvider provider=new AccessControlValidatorProvider(getSecurityProvider());
  MemoryNodeStore store=new MemoryNodeStore();
  NodeState root=store.getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder test=builder.child("test");
  NodeBuilder hidden=test.child(":hidden");
  Validator validator=provider.getRootValidator(root,builder.getNodeState(),CommitInfo.EMPTY);
  Validator childValidator=validator.childNodeAdded("test",test.getNodeState());
  assertNotNull(childValidator);
  Validator hiddenValidator=childValidator.childNodeAdded(":hidden",hidden.getNodeState());
  assertNull(hiddenValidator);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.AbstractCompositeProviderTest </h4><pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetTreePermissionEmptyParent() throws Exception {
  TreePermission tp=createPermissionProvider().getTreePermission(readOnlyRoot.getTree(TEST_PATH),TreePermission.EMPTY);
  assertSame(TreePermission.EMPTY,tp);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsNotGrantedAction() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  String[] actions=new String[]{JackrabbitSession.ACTION_LOCKING,JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL};
  for (  String nodePath : NODE_PATHS) {
    String actionStr=getActionString(actions);
    assertFalse(nodePath,pp.isGranted(nodePath,actionStr));
    String propPath=PathUtils.concat(nodePath,JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(propPath,pp.isGranted(propPath,actionStr));
    String nonExPath=PathUtils.concat(nodePath,"nonExisting");
    assertFalse(nonExPath,pp.isGranted(nonExPath,actionStr));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=pp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.canReadAll());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    PropertyState ps=tree.getProperty(JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(p,pp.isGranted(tree,null,Permissions.ALL));
    assertFalse(PathUtils.concat(p,JcrConstants.JCR_PRIMARYTYPE),pp.isGranted(tree,ps,Permissions.ALL));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadProperties() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=pp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.canReadProperties());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsNotGranted() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  PropertyState ps=PropertyStates.createProperty("propName","val");
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=pp.getTreePermission(t,parentPermission);
    assertFalse(tp.isGranted(Permissions.NO_PERMISSION));
    assertFalse(tp.isGranted(Permissions.MODIFY_ACCESS_CONTROL));
    assertFalse(tp.isGranted(Permissions.NO_PERMISSION,ps));
    assertFalse(tp.isGranted(Permissions.MODIFY_ACCESS_CONTROL,ps));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedActionNone() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  String actions="";
  for (  String nodePath : NODE_PATHS) {
    assertFalse(nodePath,pp.isGranted(nodePath,actions));
    String propPath=PathUtils.concat(nodePath,JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(propPath,pp.isGranted(propPath,actions));
    String nonExPath=PathUtils.concat(nodePath,"nonExisting");
    assertFalse(nonExPath,pp.isGranted(nonExPath,actions));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesNone() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,pp.hasPrivileges(tree));
  }
}

</code></pre>

<br>
<pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetTreePermissionAllParent() throws Exception {
  TreePermission tp=createPermissionProvider().getTreePermission(readOnlyRoot.getTree(TEST_PATH),TreePermission.ALL);
  assertSame(TreePermission.ALL,tp);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesJcrAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(p,pp.hasPrivileges(tree,JCR_ALL));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsNotGranted() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    PropertyState ps=tree.getProperty(JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(p,pp.isGranted(tree,null,Permissions.MODIFY_ACCESS_CONTROL));
    assertFalse(PathUtils.concat(p,JcrConstants.JCR_PRIMARYTYPE),pp.isGranted(tree,ps,Permissions.MODIFY_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsNotGranted() throws Exception {
  RepositoryPermission rp=createPermissionProvider().getRepositoryPermission();
  assertFalse(rp.isGranted(Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.WORKSPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
  assertFalse(rp.isGranted(Permissions.NO_PERMISSION));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  PropertyState ps=PropertyStates.createProperty("propName","val");
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=pp.getTreePermission(t,parentPermission);
    assertFalse(tp.isGranted(Permissions.ALL));
    assertFalse(tp.isGranted(Permissions.ALL,ps));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedNone() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    PropertyState ps=tree.getProperty(JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(p,pp.isGranted(tree,null,Permissions.NO_PERMISSION));
    assertFalse(PathUtils.concat(p,JcrConstants.JCR_PRIMARYTYPE),pp.isGranted(tree,ps,Permissions.NO_PERMISSION));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeAccessControlManagerTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePolicies() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies("/");
  while (it.hasNext()) {
    if (it.nextAccessControlPolicy() == TestPolicy.INSTANCE) {
      fail("TestPolicy should only be applicable at /test.");
    }
  }
  Set<AccessControlPolicy> applicable=ImmutableSet.copyOf(acMgr.getApplicablePolicies(TEST_PATH));
  assertEquals(2,applicable.size());
  assertTrue(applicable.contains(TestPolicy.INSTANCE));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivileges() throws Exception {
  Set<Privilege> expected=ImmutableSet.copyOf(getPrivilegeManager(root).getRegisteredPrivileges());
  Set<Privilege> result=ImmutableSet.copyOf(acMgr.getSupportedPrivileges("/"));
  assertEquals(expected,result);
  result=Sets.newHashSet(acMgr.getSupportedPrivileges(TEST_PATH));
  assertTrue(result.containsAll(expected));
  assertTrue(result.contains(TestPrivilege.INSTANCE));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePolicies() throws Exception {
  AccessControlPolicy[] effective=acMgr.getEffectivePolicies(TEST_PATH);
  assertEquals(0,effective.length);
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies(TEST_PATH);
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    acMgr.setPolicy(TEST_PATH,plc);
  }
  root.commit();
  assertEquals(2,acMgr.getEffectivePolicies(TEST_PATH).length);
  Tree child=root.getTree(TEST_PATH).addChild("child");
  child.setProperty(JcrConstants.JCR_PRIMARYTYPE,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  assertEquals(1,acMgr.getEffectivePolicies(child.getPath()).length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemovePolicy() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies(TEST_PATH);
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    acMgr.setPolicy(TEST_PATH,plc);
  }
  root.commit();
  acMgr.removePolicy(TEST_PATH,TestPolicy.INSTANCE);
  root.commit();
  assertEquals(1,acMgr.getPolicies(TEST_PATH).length);
  acMgr.removePolicy(TEST_PATH,acMgr.getPolicies(TEST_PATH)[0]);
  root.commit();
  assertEquals(0,acMgr.getPolicies(TEST_PATH).length);
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyAtRoot() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies("/");
  int cnt=0;
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    assertTrue(plc instanceof JackrabbitAccessControlList);
    acMgr.setPolicy("/",plc);
    cnt++;
  }
  assertEquals(1,cnt);
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicies() throws Exception {
  int len=0;
  AccessControlPolicy[] policies=acMgr.getPolicies(TEST_PATH);
  assertEquals(len,policies.length);
  acMgr.setPolicy(TEST_PATH,TestPolicy.INSTANCE);
  len++;
  policies=acMgr.getPolicies(TEST_PATH);
  assertEquals(len,policies.length);
  assertSame(TestPolicy.INSTANCE,policies[0]);
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies(TEST_PATH);
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    if (plc == TestPolicy.INSTANCE) {
      fail("TestPolicy should only be applicable at /test.");
    }
 else {
      acMgr.setPolicy(TEST_PATH,plc);
      len++;
      Set<AccessControlPolicy> policySet=ImmutableSet.copyOf(acMgr.getPolicies(TEST_PATH));
      assertEquals(len,policySet.size());
      assertTrue(policySet.contains(TestPolicy.INSTANCE));
      assertTrue(policySet.contains(plc));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeAuthorizationConfigurationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleGetAccessControlManager() throws RepositoryException {
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()),new AuthorizationConfigurationImpl(getSecurityProvider()));
  AccessControlManager accessControlManager=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertTrue(accessControlManager instanceof CompositeAccessControlManager);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleGetPermissionProvider(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new OpenAuthorizationConfiguration(),new AuthorizationConfigurationImpl(getSecurityProvider()));
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),Collections.<Principal>emptySet());
  assertFalse(pp instanceof CompositePermissionProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleRestrictionProvider(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()),new AuthorizationConfigurationImpl(getSecurityProvider()));
  RestrictionProvider rp=cc.getRestrictionProvider();
  assertTrue(rp instanceof CompositeRestrictionProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSingleGetAccessControlManager(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()));
  AccessControlManager accessControlManager=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertFalse(accessControlManager instanceof CompositeAccessControlManager);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSlingRestrictionProvider(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()));
  RestrictionProvider rp=cc.getRestrictionProvider();
  assertFalse(rp instanceof CompositeRestrictionProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleGetPermissionProvider2(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()),new AuthorizationConfigurationImpl(getSecurityProvider()));
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),Collections.<Principal>emptySet());
  assertTrue(pp instanceof CompositePermissionProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleGetPermissionProvider3(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new OpenAuthorizationConfiguration(),new OpenAuthorizationConfiguration());
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),Collections.<Principal>emptySet());
  assertFalse(pp instanceof CompositePermissionProvider);
  assertSame(EmptyPermissionProvider.getInstance(),pp);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSingleGetPermissionProvider(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()));
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),Collections.<Principal>emptySet());
  assertFalse(pp instanceof CompositePermissionProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderAllTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,true).put(TEST_A_B_C_PATH + "/nonexisting",true).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cpp.getTreePermission(tree,parentPermission);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionsIsGranted() throws Exception {
  RepositoryPermission rp=cpp.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      assertTrue(tp.isGranted(toTest,PROPERTY_STATE));
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepo() throws Exception {
  Set<String> privilegeNames=cpp.getPrivileges(null);
  assertEquals(ImmutableSet.of(JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT),privilegeNames);
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(root.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      assertTrue(tp.isGranted(toTest));
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,false).put(TEST_A_B_C_PATH + "/nonexisting",false).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cpp.getTreePermission(tree,parentPermission);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderCoverageTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(cpp.hasPrivileges(tree,REP_READ_NODES));
    assertFalse(cpp.hasPrivileges(tree,JCR_READ));
    assertFalse(cpp.hasPrivileges(tree,JCR_WRITE));
    assertFalse(cpp.hasPrivileges(tree,JCR_ALL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String nodePath : NODE_PATHS) {
    String propPath=PathUtils.concat(nodePath,JcrConstants.JCR_PRIMARYTYPE);
    assertTrue(cpp.isGranted(nodePath,Session.ACTION_READ));
    assertFalse(cpp.isGranted(propPath,Session.ACTION_READ));
    assertFalse(cpp.isGranted(nodePath,Session.ACTION_REMOVE));
    assertFalse(cpp.isGranted(propPath,JackrabbitSession.ACTION_MODIFY_PROPERTY));
    assertFalse(cpp.isGranted(nodePath,getActionString(JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL,JackrabbitSession.ACTION_READ_ACCESS_CONTROL)));
    String nonExisting=PathUtils.concat(nodePath,"nonExisting");
    assertFalse(cpp.isGranted(nonExisting,Session.ACTION_READ));
    assertFalse(cpp.isGranted(nonExisting,JackrabbitSession.ACTION_ADD_PROPERTY));
    assertFalse(cpp.isGranted(nonExisting,Session.ACTION_ADD_NODE));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.isGranted(Permissions.READ_PROPERTY,PROPERTY_STATE));
    assertFalse(tp.isGranted(Permissions.REMOVE_PROPERTY,PROPERTY_STATE));
    assertFalse(tp.isGranted(Permissions.READ,PROPERTY_STATE));
    assertFalse(tp.isGranted(Permissions.ALL,PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Override @Test public void testGetTreePermissionInstance() throws Exception {
  PermissionProvider pp=createPermissionProvider(EveryonePrincipal.getInstance());
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=pp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertTrue(tp instanceof LimitedTreePermission);
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_NODE));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.LOCK_MANAGEMENT));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.ALL));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_NODE | Permissions.LOCK_MANAGEMENT));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=cpp.getTreePermission(t,parentPermission);
    assertTrue(tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionsIsGranted() throws Exception {
  RepositoryPermission rp=cpp.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertTrue(tp.isGranted(Permissions.READ_NODE));
    assertFalse(tp.isGranted(Permissions.REMOVE_NODE));
    assertFalse(tp.isGranted(Permissions.READ));
    assertFalse(tp.isGranted(Permissions.ALL));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(cpp.isGranted(tree,null,Permissions.READ_NODE));
    assertFalse(cpp.isGranted(tree,null,Permissions.LOCK_MANAGEMENT));
    assertFalse(cpp.isGranted(tree,null,Permissions.ALL));
    assertFalse(cpp.isGranted(tree,null,Permissions.READ_NODE | Permissions.LOCK_MANAGEMENT));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertTrue(cpp.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cpp.hasPrivileges(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cpp.hasPrivileges(null,JCR_ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=cpp.getTreePermission(t,parentPermission);
    assertFalse(tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionGetChild() throws Exception {
  List<String> childNames=ImmutableList.of("test","a","b","c","nonexisting");
  Tree rootTree=readOnlyRoot.getTree(ROOT_PATH);
  NodeState ns=((ImmutableTree)rootTree).getNodeState();
  TreePermission tp=createPermissionProvider().getTreePermission(rootTree,TreePermission.EMPTY);
  for (  String cName : childNames) {
    ns=ns.getChildNode(cName);
    tp=tp.getChildPermission(cName,ns);
    assertTrue(tp instanceof LimitedTreePermission);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderEmptyTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.MODIFY_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.ADD_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.REMOVE_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_ACCESS_CONTROL | Permissions.MODIFY_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=cpp.getTreePermission(t,parentPermission);
    assertFalse(tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String nodePath : NODE_PATHS) {
    String propPath=PathUtils.concat(nodePath,JcrConstants.JCR_PRIMARYTYPE);
    String nonExisting=PathUtils.concat(nodePath,"nonExisting");
    assertFalse(cpp.isGranted(nodePath,Session.ACTION_REMOVE));
    assertFalse(cpp.isGranted(propPath,JackrabbitSession.ACTION_MODIFY_PROPERTY));
    assertFalse(cpp.isGranted(nodePath,getActionString(JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL,JackrabbitSession.ACTION_READ_ACCESS_CONTROL)));
    assertFalse(cpp.isGranted(nonExisting,JackrabbitSession.ACTION_ADD_PROPERTY));
    assertFalse(cpp.isGranted(nonExisting,Session.ACTION_ADD_NODE));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionsIsGranted() throws Exception {
  RepositoryPermission rp=cpp.getRepositoryPermission();
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(cpp.isGranted(tree,null,Permissions.READ_NODE));
    assertFalse(cpp.isGranted(tree,null,Permissions.READ_NODE | Permissions.MODIFY_CHILD_NODE_COLLECTION));
    assertFalse(cpp.isGranted(tree,null,Permissions.READ_ACCESS_CONTROL | Permissions.MODIFY_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=cpp.getTreePermission(t,parentPermission);
    assertFalse(tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.isGranted(Permissions.READ_NODE));
    assertFalse(tp.isGranted(Permissions.REMOVE_NODE));
    assertFalse(tp.isGranted(Permissions.ALL));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(cpp.hasPrivileges(tree,JCR_READ));
    assertFalse(cpp.hasPrivileges(tree,JCR_WRITE));
    assertFalse(cpp.hasPrivileges(tree,REP_READ_NODES));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.isGranted(Permissions.READ_PROPERTY,PROPERTY_STATE));
    assertFalse(tp.isGranted(Permissions.REMOVE_PROPERTY,PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderFullScopeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegeOnRepoAdmin() throws Exception {
  assertTrue(cppAdminUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppAdminUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertTrue(nodePath,tp.canRead());
    assertFalse(nodePath,tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(p,cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.READ_PROPERTY));
    assertFalse(p,cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.SET_PROPERTY));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesAdmin() throws Exception {
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    assertTrue(cppAdminUser.hasPrivileges(tree,REP_READ_NODES));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_READ));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_ALL));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_WRITE));
    assertFalse(cppAdminUser.hasPrivileges(tree,REP_READ_NODES,REP_READ_PROPERTIES));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_MODIFY_PROPERTIES));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_LOCK_MANAGEMENT));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGranted() throws Exception {
  RepositoryPermission rp=cppTestUser.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGrantedAdminUser() throws Exception {
  RepositoryPermission rp=cppAdminUser.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  PrivilegeBitsProvider pbp=new PrivilegeBitsProvider(readOnlyRoot);
  PrivilegeBits readNodes=pbp.getBits(REP_READ_NODES);
  for (  String path : defPrivileges.keySet()) {
    Set<String> defaultPrivs=defPrivileges.get(path);
    PrivilegeBits defaultBits=pbp.getBits(defaultPrivs);
    Tree tree=readOnlyRoot.getTree(path);
    if (defaultPrivs.isEmpty()) {
      assertFalse(path,cppTestUser.hasPrivileges(tree,REP_READ_NODES));
    }
 else     if (defaultBits.includes(readNodes)) {
      assertTrue(path,cppTestUser.hasPrivileges(tree,REP_READ_NODES));
      if (!readNodes.equals(defaultBits)) {
        assertFalse(path,cppTestUser.hasPrivileges(tree,defaultPrivs.toArray(new String[defaultPrivs.size()])));
      }
    }
 else {
      assertFalse(path,cppTestUser.hasPrivileges(tree,REP_READ_NODES));
      assertFalse(path,cppTestUser.hasPrivileges(tree,defaultPrivs.toArray(new String[defaultPrivs.size()])));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    assertFalse(nodePath,tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertTrue(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cppTestUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppTestUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  PrivilegeBitsProvider pbp=new PrivilegeBitsProvider(readOnlyRoot);
  PrivilegeBits readNodes=pbp.getBits(REP_READ_NODES);
  Set<String> expected=ImmutableSet.of(REP_READ_NODES);
  for (  String path : defPrivileges.keySet()) {
    Set<String> defaultPrivs=defPrivileges.get(path);
    Tree tree=readOnlyRoot.getTree(path);
    Set<String> privNames=cppTestUser.getPrivileges(tree);
    if (pbp.getBits(defaultPrivs).includes(readNodes)) {
      assertEquals(expected,privNames);
    }
 else {
      assertTrue(privNames.isEmpty());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,false).put(TEST_A_B_C_PATH + "/nonexisting",false).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedActionAdmin() throws Exception {
  for (  String p : defActionsGranted.keySet()) {
    boolean expectedRead=readOnlyRoot.getTree(p).exists();
    assertEquals(p,expectedRead,cppAdminUser.isGranted(p,Session.ACTION_READ));
    assertFalse(p,cppAdminUser.isGranted(p,getActionString(ALL_ACTIONS)));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      if (Permissions.READ_NODE == toTest) {
        assertTrue(path,tp.isGranted(toTest));
      }
 else {
        boolean canRead=Permissions.includes(toTest,Permissions.READ_NODE);
        assertEquals(path,canRead,tp.isGranted(Permissions.READ_NODE));
        assertFalse(path,tp.isGranted(toTest));
      }
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAdmin() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cppAdminUser.isGranted(tree,null,Permissions.READ_NODE));
    assertFalse(p,cppAdminUser.isGranted(tree,null,Permissions.READ));
    assertFalse(p,cppAdminUser.isGranted(tree,null,Permissions.WRITE));
    assertFalse(p,cppAdminUser.isGranted(tree,null,Permissions.ALL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String p : defActionsGranted.keySet()) {
    String[] actions=defActionsGranted.get(p);
    if (ImmutableList.copyOf(actions).contains(Session.ACTION_READ)) {
      TreeLocation tl=TreeLocation.create(readOnlyRoot,p);
      assertEquals(p,tl.getTree() != null,cppTestUser.isGranted(p,Session.ACTION_READ));
    }
 else {
      assertFalse(p,cppTestUser.isGranted(p,Session.ACTION_READ));
    }
    if (actions.length > 1) {
      assertFalse(p,cppTestUser.isGranted(p,getActionString(actions)));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      boolean granted=(toTest == Permissions.READ_NODE);
      assertEquals(path,granted,tp.isGranted(toTest,PROPERTY_STATE));
    }
    assertFalse(tp.isGranted(Permissions.READ_PROPERTY,PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long defaultPerms=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    if (Permissions.READ_NODE != defaultPerms) {
      assertFalse(p,cppTestUser.isGranted(tree,null,defaultPerms));
    }
    boolean expectedReadNode=Permissions.includes(defaultPerms,Permissions.READ_NODE);
    assertEquals(p,expectedReadNode,cppTestUser.isGranted(tree,null,Permissions.READ_NODE));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedPropertyAdmin() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(p,cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.READ_PROPERTY));
    assertFalse(p,cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.SET_PROPERTY));
    assertFalse(p,cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ALL));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderNoScopeTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String p : defPrivileges.keySet()) {
    Set<String> expected=defPrivileges.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    String[] privNames=expected.toArray(new String[expected.size()]);
    assertTrue(p,cppTestUser.hasPrivileges(tree,privNames));
    assertEquals(p,defTestUser.hasPrivileges(tree,privNames),cppTestUser.hasPrivileges(tree,privNames));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionSize() throws Exception {
  Field tpField=CompositeTreePermission.class.getDeclaredField("treePermissions");
  tpField.setAccessible(true);
  Tree rootTree=readOnlyRoot.getTree(ROOT_PATH);
  NodeState ns=((ImmutableTree)rootTree).getNodeState();
  TreePermission tp=cppTestUser.getTreePermission(rootTree,TreePermission.EMPTY);
  assertEquals(2,((TreePermission[])tpField.get(tp)).length);
  List<String> childNames=ImmutableList.of("test","a","b","c","nonexisting");
  for (  String cName : childNames) {
    ns=ns.getChildNode(cName);
    tp=tp.getChildPermission(cName,ns);
    assertCompositeTreePermission(false,tp);
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      assertTrue(tp.isGranted(toTest,PROPERTY_STATE));
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,true).put(TEST_A_B_C_PATH + "/nonexisting",true).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  TreePermission parentPermission2=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    TreePermission tp2=defTestUser.getTreePermission(tree,parentPermission2);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead(PROPERTY_STATE));
    assertEquals(nodePath + "(default)",expectedResult,tp2.canRead(PROPERTY_STATE));
    parentPermission=tp;
    parentPermission2=tp2;
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepoAdmin() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_ALL);
  assertEquals(expected,cppAdminUser.getPrivileges(null));
  assertEquals(defAdminUser.getPrivileges(null),cppAdminUser.getPrivileges(null));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertTrue(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(defTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(cppTestUser.hasPrivileges(null));
  assertTrue(defTestUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      assertTrue(tp.isGranted(toTest));
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  for (  String p : defPrivileges.keySet()) {
    Set<String> expected=defPrivileges.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    assertEquals(p,expected,cppTestUser.getPrivileges(tree));
    assertEquals(p,defTestUser.getPrivileges(tree),cppTestUser.getPrivileges(tree));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegeOnRepoAdminUser() throws Exception {
  assertTrue(cppAdminUser.hasPrivileges(null,JCR_ALL));
  assertTrue(defAdminUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppAdminUser.hasPrivileges(null));
  assertTrue(defAdminUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  TreePermission parentPermission2=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    TreePermission tp2=defAdminUser.getTreePermission(tree,parentPermission2);
    assertTrue(nodePath,tp.canRead());
    assertTrue(nodePath,tp.canRead(PROPERTY_STATE));
    assertTrue(nodePath + "(default)",tp2.canRead());
    assertTrue(nodePath + "(default)",tp2.canRead(PROPERTY_STATE));
    parentPermission=tp;
    parentPermission2=tp2;
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepo() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT);
  assertEquals(expected,cppTestUser.getPrivileges(null));
  assertEquals(defTestUser.getPrivileges(null),cppTestUser.getPrivileges(null));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGranted() throws Exception {
  RepositoryPermission rp=cppTestUser.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesAdmin() throws Exception {
  Set<String> expected=ImmutableSet.of(JCR_ALL);
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertEquals(p,expected,cppAdminUser.getPrivileges(tree));
    assertEquals(p,defAdminUser.getPrivileges(tree),cppAdminUser.getPrivileges(tree));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGrantedAdminUser() throws Exception {
  RepositoryPermission rp=cppAdminUser.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,false).put(TEST_A_B_C_PATH + "/nonexisting",false).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  TreePermission parentPermission2=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    TreePermission tp2=defTestUser.getTreePermission(tree,parentPermission2);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead());
    assertEquals(nodePath + "(default)",expectedResult,tp2.canRead());
    parentPermission=tp;
    parentPermission2=tp2;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderScopeTest </h4><pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long defaultPerms=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    if (testProvider.isSupported(p)) {
      long expected=Permissions.diff(defaultPerms,Permissions.ADD_NODE | Permissions.ADD_PROPERTY);
      assertTrue(cppTestUser.isGranted(tree,PROPERTY_STATE,expected));
      assertFalse(cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.ADD_PROPERTY));
      assertFalse(cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.SET_PROPERTY));
      assertFalse(cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.WRITE));
    }
 else {
      assertTrue(cppTestUser.isGranted(tree,PROPERTY_STATE,defaultPerms));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAdmin() throws Exception {
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    if (testProvider.isSupported(path)) {
      assertTrue(cppAdminUser.isGranted(tree,null,Permissions.diff(Permissions.ALL,Permissions.ADD_NODE | Permissions.ADD_PROPERTY)));
      assertFalse(cppAdminUser.isGranted(tree,null,Permissions.ADD_NODE));
      assertFalse(cppAdminUser.isGranted(tree,null,Permissions.ADD_PROPERTY));
      assertFalse(cppAdminUser.isGranted(tree,null,Permissions.ADD_NODE | Permissions.ADD_PROPERTY));
      assertFalse(cppAdminUser.isGranted(tree,null,Permissions.WRITE));
    }
 else {
      assertTrue(cppAdminUser.isGranted(tree,null,Permissions.ALL));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegeOnRepoAdmin() throws Exception {
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppAdminUser.hasPrivileges(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  Set<String> expected=pbp.getPrivilegeNames(pbp.getBits(JCR_ALL).modifiable().diff(pbp.getBits(JCR_NAMESPACE_MANAGEMENT)));
  assertTrue(cppAdminUser.hasPrivileges(null,expected.toArray(new String[expected.size()])));
  assertTrue(cppAdminUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  PrivilegeBitsProvider pbp=new PrivilegeBitsProvider(readOnlyRoot);
  for (  String path : defPrivileges.keySet()) {
    Tree tree=readOnlyRoot.getTree(path);
    Set<String> defaultPrivs=defPrivileges.get(path);
    Set<String> privNames=cppTestUser.getPrivileges(tree);
    if (testProvider.isSupported(path)) {
      PrivilegeBits expected=pbp.getBits(defaultPrivs).modifiable().diff(denied).unmodifiable();
      assertEquals(expected,pbp.getBits(privNames));
    }
 else {
      assertEquals(path,defaultPrivs,privNames);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertTrue(nodePath,tp.canRead());
    assertTrue(nodePath,tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertFalse(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cppTestUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppTestUser.hasPrivileges(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(cppTestUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      if (testProvider.isSupported(path)) {
        assertTrue(tp.isGranted(Permissions.diff(toTest,Permissions.ADD_NODE | Permissions.ADD_PROPERTY),PROPERTY_STATE));
        assertFalse(tp.isGranted(Permissions.ADD_PROPERTY,PROPERTY_STATE));
      }
 else {
        assertTrue(tp.isGranted(toTest,PROPERTY_STATE));
      }
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      if (testProvider.isSupported(path)) {
        assertTrue(tp.isGranted(Permissions.diff(toTest,Permissions.ADD_NODE | Permissions.ADD_PROPERTY)));
        assertFalse(tp.isGranted(Permissions.ADD_PROPERTY | Permissions.ADD_NODE));
      }
 else {
        assertTrue(tp.isGranted(toTest));
      }
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesAdmin() throws Exception {
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    Set<String> privNames=cppAdminUser.getPrivileges(tree);
    if (testProvider.isSupported(path)) {
      PrivilegeBits expected=pbp.getBits(JCR_ALL).modifiable().diff(denied).unmodifiable();
      assertEquals(expected,pbp.getBits(privNames));
    }
 else {
      assertEquals(path,ImmutableSet.of(JCR_ALL),privNames);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAllAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertFalse(nodePath,tp.canReadAll());
    assertTrue(nodePath,tp.canReadProperties());
    parentPermission=tp;
  }
  parentPermission=TreePermission.EMPTY;
  for (  String nodePath : PATH_OUTSIDE_SCOPE) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertFalse(nodePath,tp.canReadAll());
    assertTrue(nodePath,tp.canReadProperties());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String path : defPrivileges.keySet()) {
    Set<String> defaultPrivs=defPrivileges.get(path);
    Tree tree=readOnlyRoot.getTree(path);
    if (testProvider.isSupported(path)) {
      Set<String> expected=pbp.getPrivilegeNames(pbp.getBits(defaultPrivs).modifiable().diff(denied));
      assertTrue(path,cppTestUser.hasPrivileges(tree,expected.toArray(new String[expected.size()])));
      assertFalse(path,cppTestUser.hasPrivileges(tree,JCR_ADD_CHILD_NODES));
      assertFalse(path,cppTestUser.hasPrivileges(tree,REP_ADD_PROPERTIES));
      assertFalse(path,cppTestUser.hasPrivileges(tree,JCR_MODIFY_PROPERTIES));
    }
 else {
      assertTrue(path,cppTestUser.hasPrivileges(tree,defaultPrivs.toArray(new String[defaultPrivs.size()])));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,true).put(TEST_A_B_C_PATH + "/nonexisting",true).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    assertEquals(nodePath,readMap.get(nodePath),tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedPropertyAdmin() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    if (testProvider.isSupported(p)) {
      assertTrue(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.diff(Permissions.ALL,Permissions.ADD_NODE | Permissions.ADD_PROPERTY)));
      assertFalse(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ADD_NODE));
      assertFalse(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ADD_PROPERTY));
      assertFalse(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ADD_NODE | Permissions.ADD_PROPERTY));
      assertFalse(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.WRITE));
    }
 else {
      assertTrue(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ALL));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGranted() throws Exception {
  RepositoryPermission rp=cppTestUser.getRepositoryPermission();
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT | Permissions.WORKSPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGrantedAdmin() throws Exception {
  RepositoryPermission rp=cppAdminUser.getRepositoryPermission();
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.PRIVILEGE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT | Permissions.WORKSPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  Set<String> denied=ImmutableSet.of(Session.ACTION_ADD_NODE,JackrabbitSession.ACTION_ADD_PROPERTY);
  for (  String p : defActionsGranted.keySet()) {
    String[] actions=defActionsGranted.get(p);
    if (testProvider.isSupported(p)) {
      Set<String> expected=Sets.newHashSet(actions);
      expected.removeAll(denied);
      boolean canSetProperty=TreeLocation.create(readOnlyRoot,p).getProperty() != null;
      if (!canSetProperty) {
        expected.remove(Session.ACTION_SET_PROPERTY);
      }
      assertTrue(p,cppTestUser.isGranted(p,getActionString(expected.toArray(new String[expected.size()]))));
      assertEquals(p,canSetProperty,cppTestUser.isGranted(p,Session.ACTION_SET_PROPERTY));
      assertFalse(p,cppTestUser.isGranted(p,Session.ACTION_ADD_NODE));
      assertFalse(p,cppTestUser.isGranted(p,JackrabbitSession.ACTION_ADD_PROPERTY));
    }
 else {
      assertTrue(p,cppTestUser.isGranted(p,getActionString(actions)));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppAdminUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    if (testProvider.isSupported(path)) {
      assertTrue(path,tp.isGranted(Permissions.diff(Permissions.ALL,Permissions.ADD_NODE | Permissions.ADD_PROPERTY)));
      assertFalse(path,tp.isGranted(Permissions.ADD_PROPERTY | Permissions.ADD_NODE));
      assertFalse(path,tp.isGranted(Permissions.ALL));
    }
 else {
      assertTrue(path,tp.isGranted(Permissions.ALL));
    }
    parentPermission=tp;
  }
  parentPermission=TreePermission.EMPTY;
  for (  String nodePath : PATH_OUTSIDE_SCOPE) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertTrue(nodePath,tp.isGranted(Permissions.ALL));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesOnRepoAdmin() throws Exception {
  PrivilegeBits expected=pbp.getBits(JCR_ALL).modifiable().diff(pbp.getBits(JCR_NAMESPACE_MANAGEMENT)).unmodifiable();
  assertEquals(expected,pbp.getBits(cppAdminUser.getPrivileges(null)));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  Map<String,Boolean> readMap=ImmutableMap.<String,Boolean>builder().put(ROOT_PATH,false).put(TEST_PATH,true).put(TEST_A_PATH,true).put(TEST_A_B_PATH,true).put(TEST_A_B_C_PATH,false).put(TEST_A_B_C_PATH + "/nonexisting",false).build();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : readMap.keySet()) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    boolean expectedResult=readMap.get(nodePath);
    assertEquals(nodePath,expectedResult,tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long defaultPerms=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    if (testProvider.isSupported(p)) {
      long expected=Permissions.diff(defaultPerms,Permissions.ADD_NODE | Permissions.ADD_PROPERTY);
      assertTrue(cppTestUser.isGranted(tree,null,expected));
      assertFalse(cppTestUser.isGranted(tree,null,Permissions.ADD_NODE));
      assertFalse(cppTestUser.isGranted(tree,null,Permissions.ADD_PROPERTY));
      assertFalse(cppTestUser.isGranted(tree,null,Permissions.SET_PROPERTY));
      assertFalse(cppTestUser.isGranted(tree,null,Permissions.WRITE));
    }
 else {
      assertTrue(cppTestUser.isGranted(tree,null,defaultPerms));
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedActionAdmin() throws Exception {
  String[] grantedActions=new String[]{Session.ACTION_READ,JackrabbitSession.ACTION_REMOVE_NODE,JackrabbitSession.ACTION_MODIFY_PROPERTY,JackrabbitSession.ACTION_REMOVE_PROPERTY,Session.ACTION_REMOVE,JackrabbitSession.ACTION_READ_ACCESS_CONTROL,JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL,JackrabbitSession.ACTION_LOCKING,JackrabbitSession.ACTION_NODE_TYPE_MANAGEMENT,JackrabbitSession.ACTION_VERSIONING,JackrabbitSession.ACTION_USER_MANAGEMENT};
  for (  String path : NODE_PATHS) {
    if (testProvider.isSupported(path)) {
      assertTrue(cppAdminUser.isGranted(path,getActionString(grantedActions)));
      assertFalse(cppAdminUser.isGranted(path,Session.ACTION_ADD_NODE));
      assertFalse(cppAdminUser.isGranted(path,Session.ACTION_SET_PROPERTY));
      assertFalse(cppAdminUser.isGranted(path,JackrabbitSession.ACTION_ADD_PROPERTY));
    }
 else {
      assertTrue(cppAdminUser.isGranted(path,Permissions.getString(Permissions.ALL)));
      assertTrue(cppAdminUser.isGranted(path,getActionString(ALL_ACTIONS)));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesAdmin() throws Exception {
  Set<String> expectedAllowed=pbp.getPrivilegeNames(pbp.getBits(JCR_ALL).modifiable().diff(pbp.getBits(JCR_ADD_CHILD_NODES,REP_ADD_PROPERTIES)));
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    if (testProvider.isSupported(path)) {
      assertTrue(cppAdminUser.hasPrivileges(tree,expectedAllowed.toArray(new String[expectedAllowed.size()])));
      assertFalse(cppAdminUser.hasPrivileges(tree,JCR_ADD_CHILD_NODES));
      assertFalse(cppAdminUser.hasPrivileges(tree,REP_ADD_PROPERTIES));
      assertFalse(cppAdminUser.hasPrivileges(tree,JCR_WRITE));
    }
 else {
      assertTrue(cppAdminUser.hasPrivileges(tree,JCR_ALL));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeTreePermissionTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipleToSingle(){
  TreePermission rootTp=createRootTreePermission(fullScopeProvider,new NoScopeProvider(root),new NoScopeProvider(root));
  assertCompositeTreePermission(true,rootTp);
  NodeState childState=rootTree.getChild("test").getNodeState();
  TreePermission testTp=rootTp.getChildPermission("test",childState);
  TreePermission expected=fullScopeProvider.getTreePermission(rootTree,TreePermission.EMPTY).getChildPermission("test",childState);
  assertEquals(expected.getClass(),testTp.getClass());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingle(){
  Class<? extends TreePermission> expected=fullScopeProvider.getTreePermission(rootTree,TreePermission.EMPTY).getClass();
  TreePermission rootTp=createRootTreePermission(fullScopeProvider);
  assertCompositeTreePermission(false,rootTp);
  assertEquals(expected,rootTp.getClass());
  TreePermission testTp=rootTp.getChildPermission("test",rootTree.getChild("test").getNodeState());
  assertEquals(expected,testTp.getClass());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCanRead() throws Exception {
  TreePermission rootTp=createRootTreePermission(fullScopeProvider,fullScopeProvider);
  Field f=CompositeTreePermission.class.getDeclaredField("canRead");
  f.setAccessible(true);
  Object canRead=f.get(rootTp);
  assertNull(canRead);
  rootTp.canRead();
  canRead=f.get(rootTp);
  assertNotNull(canRead);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.HiddenTreeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetHiddenChildren(){
  Iterable<Tree> children=parent.getChildren();
  assertFalse(children.iterator().hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetHiddenTree(){
  Tree hidden=parent.getChild(HIDDEN_NAME);
  assertNotNull(hidden);
  assertFalse(hidden.exists());
  assertEquals(0,hidden.getChildrenCount(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.JcrUUIDTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Removing the jcr:uuid property must fail due to constraint violations.
 */
@Test public void testRemoveJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ);
  try {
    Root testRoot=getTestRoot();
    Tree test=testRoot.getTree(referenceablePath);
    test.removeProperty(JCR_UUID);
    testRoot.commit();
    fail("Removing the jcr:uuid property of a referenceable node must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(22,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creating a referenceable tree with an invalid jcr:uuid must fail.
 */
@Test public void testCreateInvalidJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  try {
    Root testRoot=getTestRoot();
    testRoot.refresh();
    NodeUtil a=new NodeUtil(testRoot.getTree("/a"));
    NodeUtil test=a.addChild("referenceable2",NT_NAME);
    test.setString(JcrConstants.JCR_UUID,"not a uuid");
    testRoot.commit();
    fail("Creating a referenceable node with an invalid uuid must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(12,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creating a non-referenceable tree with a jcr:uuid must fail
 * with AccessDeniedException unless the REP_ADD_PROPERTY privilege
 * is granted
 */
@Test public void testModifyNonReferenceableJcrUuid() throws Exception {
  NodeUtil a=new NodeUtil(root.getTree("/a"));
  a.setString(JCR_UUID,"some-value");
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  try {
    Root testRoot=getTestRoot();
    a=new NodeUtil(testRoot.getTree("/a"));
    assertNotNull(a.getString(JCR_UUID,null));
    a.setString(JCR_UUID,IdentifierManager.generateUUID());
    testRoot.commit();
    fail("Modifying a jcr:uuid property for an unstructured node without MODIFY_PROPERTY permission must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Modifying the jcr:uuid property must fail due to constraint violations.
 */
@Test public void testModifyJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  try {
    Root testRoot=getTestRoot();
    Tree test=testRoot.getTree(referenceablePath);
    test.setProperty(JCR_UUID,"anothervalue");
    testRoot.commit();
    fail("An attempt to change the jcr:uuid property must fail");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(12,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.Jr2CompatibilityTest </h4><pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveNodeWithJr2Flag() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.JCR_REMOVE_NODE);
  Root testRoot=getTestRoot();
  AccessControlManager acMgr=getAccessControlManager(testRoot);
  assertTrue(acMgr.hasPrivileges("/a",privilegesFromNames(PrivilegeConstants.REP_WRITE)));
  assertFalse(acMgr.hasPrivileges("/a/b",privilegesFromNames(PrivilegeConstants.JCR_REMOVE_NODE)));
  try {
    testRoot.getTree("/a").remove();
    testRoot.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveNodeWithJr2Flag2() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.REP_REMOVE_PROPERTIES);
  Root testRoot=getTestRoot();
  AccessControlManager acMgr=getAccessControlManager(testRoot);
  assertTrue(acMgr.hasPrivileges("/a",privilegesFromNames(PrivilegeConstants.REP_WRITE)));
  assertFalse(acMgr.hasPrivileges("/a/b",privilegesFromNames(PrivilegeConstants.REP_REMOVE_PROPERTIES)));
  try {
    testRoot.getTree("/a").remove();
    testRoot.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.MultipleSessionsACLStabilityTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAllowChild3() throws Exception {
  Tree rootTree1=testRoot1.getTree("/");
  Tree rootTree2=testRoot2.getTree("/");
  assertTrue(rootTree1.hasChild("a"));
  assertTrue(rootTree2.hasChild("a"));
  assertFalse(rootTree1.hasChild("a/bb"));
  assertFalse(rootTree2.hasChild("a/bb"));
  setupPermission(testRoot1,"/a",testPrincipal,false,PrivilegeConstants.JCR_READ);
  assertFalse(rootTree1.hasChild("a"));
  assertTrue(rootTree2.hasChild("a"));
  String uid=testPrincipal.getName();
  ContentSession session3=login(new SimpleCredentials(uid,uid.toCharArray()));
  Tree rootTree3=session3.getLatestRoot().getTree("/");
  assertFalse(rootTree3.hasChild("a"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAllowChild() throws Exception {
  Tree rootTree1=testRoot1.getTree("/");
  Tree rootTree2=testRoot2.getTree("/");
  assertFalse(rootTree1.hasChild("a/bb"));
  assertFalse(rootTree2.hasChild("a/bb"));
  setupPermission("/a/bb",testPrincipal,true,PrivilegeConstants.JCR_READ);
  assertFalse(rootTree1.hasChild("a/bb"));
  assertFalse(rootTree2.hasChild("a/bb"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAllowChild2() throws Exception {
  setupPermission("/a/bb",testPrincipal,true,PrivilegeConstants.JCR_READ);
  Tree rootTree1=testRoot1.getTree("/");
  Tree rootTree2=testRoot2.getTree("/");
  assertFalse(rootTree1.hasChild("a/bb"));
  assertFalse(rootTree2.hasChild("a/bb"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.RootTest </h4><pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetPropertyLocation() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.JCR_READ);
  Root testRoot=getTestRoot();
  List<String> accessible=ImmutableList.of("/","/a","/a/b","/a/bb","/a/b/c");
  for (  String path : accessible) {
    String propertyPath=PathUtils.concat(path,JcrConstants.JCR_PRIMARYTYPE);
    PropertyState property=testRoot.getTree(path).getProperty(JcrConstants.JCR_PRIMARYTYPE);
    assertNotNull(propertyPath,property);
  }
  List<String> propPaths=ImmutableList.of("/a/aProp","/a/b/bProp","/a/bb/bbProp","/a/b/c/cProp");
  for (  String path : propPaths) {
    PropertyState property=testRoot.getTree(PathUtils.getParentPath(path)).getProperty(PathUtils.getName(path));
    assertNotNull(path,property);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetTree() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.JCR_READ);
  setupPermission("/a/bb",testPrincipal,false,PrivilegeConstants.JCR_READ);
  Root testRoot=getTestRoot();
  List<String> accessible=ImmutableList.of("/","/a","/a/b","/a/b/c");
  for (  String path : accessible) {
    assertTrue(testRoot.getTree(path).exists());
  }
  assertFalse(testRoot.getTree("/a/bb").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetTree2() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.JCR_READ);
  setupPermission("/a/b/c",testPrincipal,true,PrivilegeConstants.JCR_READ);
  Root testRoot=getTestRoot();
  List<String> notAccessible=ImmutableList.of("/","/a/b");
  for (  String path : notAccessible) {
    assertFalse(path,testRoot.getTree(path).exists());
  }
  List<String> accessible=ImmutableList.of("/a","/a/bb","/a/b/c");
  for (  String path : accessible) {
    assertTrue(path,testRoot.getTree(path).exists());
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetPropertyLocation3() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.REP_READ_PROPERTIES);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  setupPermission("/a/b/c",testPrincipal,true,PrivilegeConstants.REP_READ_PROPERTIES);
  Root testRoot=getTestRoot();
  List<String> accessible=ImmutableList.of("/a/aProp","/a/bb/bbProp","/a/b/c/cProp");
  for (  String path : accessible) {
    PropertyState property=testRoot.getTree(PathUtils.getParentPath(path)).getProperty(PathUtils.getName(path));
    assertNotNull(path,property);
  }
  List<String> notAccessible=ImmutableList.of("/jcr:primaryType","/a/b/bProp");
  for (  String path : notAccessible) {
    PropertyState property=testRoot.getTree(PathUtils.getParentPath(path)).getProperty(PathUtils.getName(path));
    assertNull(path,property);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNodeLocation2() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.REP_READ_NODES);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.REP_READ_NODES);
  setupPermission("/a/b/c",testPrincipal,true,PrivilegeConstants.REP_READ_NODES);
  Root testRoot=getTestRoot();
  List<String> notAccessible=ImmutableList.of("/","/a/b");
  for (  String path : notAccessible) {
    Tree tree=testRoot.getTree(path);
    assertNotNull(path,tree);
    assertFalse(tree.exists());
  }
  List<String> accessible=ImmutableList.of("/a","/a/bb","/a/b/c");
  for (  String path : accessible) {
    Tree tree=testRoot.getTree(path);
    assertNotNull(path,tree);
    assertTrue(tree.exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNodeLocation() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.REP_READ_NODES);
  setupPermission("/a/bb",testPrincipal,false,PrivilegeConstants.REP_READ_NODES);
  Root testRoot=getTestRoot();
  List<String> accessible=ImmutableList.of("/","/a","/a/b","/a/b/c");
  for (  String path : accessible) {
    Tree tree=testRoot.getTree(path);
    assertNotNull(tree);
    assertTrue(tree.exists());
  }
  Tree tree=testRoot.getTree("/a/bb");
  assertNotNull(tree);
  assertFalse(tree.exists());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetPropertyLocation2() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.REP_READ_PROPERTIES);
  Root testRoot=getTestRoot();
  List<String> accessible=ImmutableList.of("/","/a","/a/b","/a/bb","/a/b/c");
  for (  String path : accessible) {
    String propertyPath=PathUtils.concat(path,JcrConstants.JCR_PRIMARYTYPE);
    PropertyState property=testRoot.getTree(path).getProperty(JcrConstants.JCR_PRIMARYTYPE);
    assertNotNull(propertyPath,property);
  }
  List<String> propPaths=ImmutableList.of("/a/aProp","/a/b/bProp","/a/bb/bbProp","/a/b/c/cProp");
  for (  String path : propPaths) {
    PropertyState property=testRoot.getTree(PathUtils.getParentPath(path)).getProperty(PathUtils.getName(path));
    assertNotNull(path,property);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNodeLocation3() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.REP_READ_PROPERTIES);
  Root testRoot=getTestRoot();
  List<String> notAccessible=ImmutableList.of("/","/a","/a/b","/a/bb","/a/b/c");
  for (  String path : notAccessible) {
    Tree tree=testRoot.getTree(path);
    assertNotNull(path,tree);
    assertFalse(tree.exists());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.ShadowInvisibleContentTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testShadowInvisibleProperty() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_ALL);
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  Root testRoot=getTestRoot();
  Tree a=testRoot.getTree("/a");
  assertNull(a.getProperty("aProp"));
  assertFalse(a.hasProperty("aProp"));
  a.setProperty("aProp","aValue1");
  assertNotNull(a.getProperty("aProp"));
  assertTrue(a.hasProperty("aProp"));
  testRoot.commit();
  assertNull(a.getProperty("aProp"));
  assertFalse(a.hasProperty("aProp"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testShadowInvisibleProperty2() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_ALL);
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_ALTER_PROPERTIES);
  Root testRoot=getTestRoot();
  Tree a=testRoot.getTree("/a");
  assertNull(a.getProperty("aProp"));
  assertFalse(a.hasProperty("aProp"));
  a.setProperty("aProp","aValue");
  assertNotNull(a.getProperty("aProp"));
  assertTrue(a.hasProperty("aProp"));
  testRoot.commit();
  assertNull(a.getProperty("aProp"));
  assertFalse(a.hasProperty("aProp"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testShadowInvisibleNode() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_ALL);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.JCR_ALL);
  setupPermission("/a/b/c",testPrincipal,true,PrivilegeConstants.JCR_ALL);
  Root testRoot=getTestRoot();
  Tree a=testRoot.getTree("/a");
  assertFalse(a.hasChild("b"));
  Tree b=a.addChild("b");
  assertTrue(a.hasChild("b"));
  assertFalse(b.hasChild("c"));
  try {
    testRoot.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.TreeTest </h4><pre class="type-12 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-842">OAK-842</a>
 */
@Test public void testOrderableChildren() throws Exception {
  Tree a=root.getTree("/a");
  a.setOrderableChildren(true);
  testRoot.refresh();
  for (  Tree t : testRoot.getTree("/a").getChildren()) {
    if (!"b".equals(t.getName())) {
      fail("Child " + t.getName() + " should not be accessible.");
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChild() throws Exception {
  Tree rootTree=testRoot.getTree("/");
  assertTrue(rootTree.exists());
  Tree a=rootTree.getChild("a");
  assertTrue(a.exists());
  Tree b=a.getChild("b");
  assertTrue(b.exists());
  assertTrue(b.getChild("c").exists());
  assertFalse(a.getChild("bb").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPolicyChild() throws Exception {
  assertTrue(root.getTree('/' + AccessControlConstants.REP_POLICY).exists());
  Tree rootTree=testRoot.getTree("/");
  assertFalse(rootTree.hasChild(AccessControlConstants.REP_POLICY));
  assertFalse(rootTree.getChild(AccessControlConstants.REP_POLICY).exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasProperty() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  assertFalse(a.hasProperty("aProp"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetChildrenCount() throws Exception {
  long cntRoot=root.getTree("/").getChildrenCount(Long.MAX_VALUE);
  long cntA=root.getTree("/a").getChildrenCount(Long.MAX_VALUE);
  assertEquals(cntRoot - 1,testRoot.getTree("/").getChildrenCount(Long.MAX_VALUE));
  assertEquals(cntA - 1,testRoot.getTree("/a").getChildrenCount(Long.MAX_VALUE));
  List<String> paths=ImmutableList.of("/a/b","/a/b/c");
  for (  String path : paths) {
    assertEquals(root.getTree(path).getChildrenCount(Long.MAX_VALUE),testRoot.getTree(path).getChildrenCount(Long.MAX_VALUE));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyStatus() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_NODES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  assertFalse(a.exists());
  PropertyState p=a.getProperty(JcrConstants.JCR_PRIMARYTYPE);
  assertNotNull(p);
  assertEquals(Tree.Status.UNCHANGED,a.getPropertyStatus(JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetProperty() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  assertNull(a.getProperty("aProp"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetProperties() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  Iterable<? extends PropertyState> props=a.getProperties();
  assertFalse(props.iterator().hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasChild() throws Exception {
  Tree rootTree=testRoot.getTree("/");
  assertTrue(rootTree.hasChild("a"));
  assertFalse(rootTree.hasChild(AccessControlConstants.REP_POLICY));
  Tree a=rootTree.getChild("a");
  assertTrue(a.hasChild("b"));
  assertFalse(a.hasChild("bb"));
  Tree b=a.getChild("b");
  assertTrue(b.hasChild("c"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPropertyCount() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  assertEquals(0,a.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-12 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildren() throws Exception {
  for (  Tree t : testRoot.getTree("/a").getChildren()) {
    if (!"b".equals(t.getName())) {
      fail("Child " + t.getName() + " should not be accessible.");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.AllPermissionsTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted(){
  for (  String path : paths) {
    Tree tree=RootFactory.createReadOnlyRoot(root).getTree(path);
    assertTrue(tree.exists());
    assertTrue(all.isGranted(tree,null,Permissions.ALL));
    for (    PropertyState prop : tree.getProperties()) {
      assertTrue(all.isGranted(tree,prop,Permissions.ALL));
    }
    for (    Tree child : tree.getChildren()) {
      assertTrue(all.isGranted(child,null,Permissions.ALL));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTreePermission(){
  for (  String path : paths) {
    Tree tree=RootFactory.createReadOnlyRoot(root).getTree(path);
    assertTrue(tree.exists());
    assertSame(TreePermission.ALL,all.getTreePermission(tree,TreePermission.EMPTY));
    for (    Tree child : tree.getChildren()) {
      assertSame(TreePermission.ALL,all.getTreePermission(child,TreePermission.EMPTY));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.ClusterPermissionsTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAclPropagation() throws Exception {
  Tree node=root1.getTree("/").addChild("testNode");
  node.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  User user1=userManager1.createUser("testUser","testUser");
  JackrabbitAccessControlList acl1=AccessControlUtils.getAccessControlList(aclMgr1,"/testNode");
  acl1.addEntry(user1.getPrincipal(),AccessControlUtils.privilegesFromNames(aclMgr1,"jcr:all"),true);
  aclMgr1.setPolicy("/testNode",acl1);
  root1.commit();
  syncClusterNodes();
  root2.refresh();
  JackrabbitAccessControlList acl2=AccessControlUtils.getAccessControlList(aclMgr2,"/testNode");
  AccessControlEntry[] aces=acl2.getAccessControlEntries();
  assertEquals(1,aces.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPermissionPropagation() throws Exception {
  Tree node=root1.getTree("/").addChild("testNode");
  node.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  User user1=userManager1.createUser("testUser1","testUser1");
  User user2=userManager1.createUser("testUser2","testUser2");
  JackrabbitAccessControlList acl1=AccessControlUtils.getAccessControlList(aclMgr1,"/testNode");
  acl1.addEntry(EveryonePrincipal.getInstance(),AccessControlUtils.privilegesFromNames(aclMgr1,"jcr:all"),false);
  acl1.addEntry(user1.getPrincipal(),AccessControlUtils.privilegesFromNames(aclMgr1,"jcr:read"),true);
  aclMgr1.setPolicy("/testNode",acl1);
  root1.commit();
  syncClusterNodes();
  root2.refresh();
  ContentSession session1=contentRepository2.login(new SimpleCredentials("testUser1","testUser1".toCharArray()),null);
  ContentSession session2=contentRepository2.login(new SimpleCredentials("testUser2","testUser2".toCharArray()),null);
  assertTrue(session1.getLatestRoot().getTree("/testNode").exists());
  assertFalse(session2.getLatestRoot().getTree("/testNode").exists());
  acl1=AccessControlUtils.getAccessControlList(aclMgr1,"/testNode");
  acl1.addEntry(EveryonePrincipal.getInstance(),AccessControlUtils.privilegesFromNames(aclMgr1,"jcr:read"),true);
  aclMgr1.setPolicy("/testNode",acl1);
  root1.commit();
  syncClusterNodes();
  root2.refresh();
  assertTrue(session1.getLatestRoot().getTree("/testNode").exists());
  assertTrue(session2.getLatestRoot().getTree("/testNode").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionEntryProviderImplTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoExistingName() throws Exception {
  MockPermissionStore store=new MockPermissionStore();
  PermissionEntryCache cache=new MockPermissionEntryCache();
  Set<String> principalNames=Sets.newHashSet("noEntries","noEntries2","noEntries3");
  PermissionEntryProviderImpl provider=new PermissionEntryProviderImpl(store,cache,principalNames,ConfigurationParameters.EMPTY);
  Set<String> existingNames=getExistingNames(provider);
  assertTrue(existingNames.isEmpty());
  Field pathMapField=provider.getClass().getDeclaredField("pathEntryMap");
  pathMapField.setAccessible(true);
  assertNull(pathMapField.get(provider));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2465">OAK-2465</a>
 */
@Test public void testInitLongOverflow() throws Exception {
  MockPermissionStore store=new MockPermissionStore();
  PermissionEntryCache cache=new MockPermissionEntryCache();
  Set<String> principalNames=ImmutableSet.of(GROUP_LONG_MAX);
  PermissionEntryProviderImpl provider=new PermissionEntryProviderImpl(store,cache,principalNames,ConfigurationParameters.EMPTY);
  Field existingNamesField=provider.getClass().getDeclaredField("existingNames");
  existingNamesField.setAccessible(true);
  assertEquals(principalNames,existingNamesField.get(provider));
  assertNotSame(Iterators.emptyIterator(),provider.getEntryIterator(new EntryPredicate()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionHookTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImplicitAceRemoval() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,testPath);
  acl.addAccessControlEntry(getTestPrincipal(),privilegesFromNames(JCR_READ,REP_WRITE));
  acMgr.setPolicy(testPath,acl);
  acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(JCR_READ));
  acMgr.setPolicy(childPath,acl);
  root.commit();
  assertTrue(root.getTree(childPath + "/rep:policy").exists());
  Tree principalRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  assertEquals(4,cntEntries(principalRoot));
  ContentSession testSession=createTestSession();
  Root testRoot=testSession.getLatestRoot();
  assertTrue(testRoot.getTree(childPath).exists());
  assertFalse(testRoot.getTree(childPath + "/rep:policy").exists());
  testRoot.getTree(childPath).remove();
  testRoot.commit();
  testSession.close();
  root.refresh();
  assertFalse(root.getTree(testPath).hasChild("childNode"));
  assertFalse(root.getTree(childPath + "/rep:policy").exists());
  principalRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  assertEquals(2,cntEntries(principalRoot));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyRestrictions() throws Exception {
  Tree testAce=root.getTree(testPath + "/rep:policy").getChildren().iterator().next();
  assertEquals(testPrincipalName,testAce.getProperty(REP_PRINCIPAL_NAME).getValue(Type.STRING));
  NodeUtil node=new NodeUtil(testAce);
  NodeUtil restrictions=node.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS);
  restrictions.setString(REP_GLOB,"*");
  String restrictionsPath=restrictions.getTree().getPath();
  root.commit();
  Tree principalRoot=getPrincipalRoot(testPrincipalName);
  assertEquals(2,cntEntries(principalRoot));
  Tree parent=principalRoot.getChildren().iterator().next();
  assertEquals("*",parent.getChildren().iterator().next().getProperty(REP_GLOB).getValue(Type.STRING));
  Tree restrictionsNode=root.getTree(restrictionsPath);
  restrictionsNode.setProperty(REP_GLOB,"/*/jcr:content/*");
  root.commit();
  principalRoot=getPrincipalRoot(testPrincipalName);
  assertEquals(2,cntEntries(principalRoot));
  parent=principalRoot.getChildren().iterator().next();
  assertEquals("/*/jcr:content/*",parent.getChildren().iterator().next().getProperty(REP_GLOB).getValue(Type.STRING));
  root.getTree(restrictionsPath).remove();
  root.commit();
  principalRoot=getPrincipalRoot(testPrincipalName);
  assertEquals(2,cntEntries(principalRoot));
  parent=principalRoot.getChildren().iterator().next();
  assertNull(parent.getChildren().iterator().next().getProperty(REP_GLOB));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2015">OAK-2015</a>
 */
@Test public void testDynamicJcrAll() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(JCR_ALL));
  acMgr.setPolicy(childPath,acl);
  root.commit();
  Tree allEntry=getEntry(EveryonePrincipal.NAME,childPath,0);
  assertTrue(allEntry.exists());
  PropertyState ps=allEntry.getProperty(PermissionConstants.REP_PRIVILEGE_BITS);
  assertEquals(1,ps.count());
  assertEquals(PermissionStore.DYNAMIC_ALL_BITS,ps.getValue(Type.LONG,0).longValue());
  Set<Principal> principalSet=ImmutableSet.<Principal>of(EveryonePrincipal.getInstance());
  PermissionProvider permissionProvider=getConfig(AuthorizationConfiguration.class).getPermissionProvider(root,root.getContentSession().getWorkspaceName(),principalSet);
  Tree childTree=root.getTree(childPath);
  assertTrue(permissionProvider.hasPrivileges(childTree,PrivilegeConstants.JCR_ALL));
  assertTrue(permissionProvider.getPrivileges(childTree).contains(PrivilegeConstants.JCR_ALL));
  long diff=Permissions.diff(Permissions.ALL,Permissions.REMOVE_NODE | Permissions.ADD_NODE);
  assertFalse(permissionProvider.isGranted(childTree,null,Permissions.REMOVE_NODE));
  assertFalse(permissionProvider.isGranted(childTree,null,Permissions.ADD_NODE));
  assertTrue(permissionProvider.isGranted(childTree,null,diff));
  acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  for (  AccessControlEntry ace : acl.getAccessControlEntries()) {
    if (EveryonePrincipal.NAME.equals(ace.getPrincipal().getName())) {
      acl.removeAccessControlEntry(ace);
    }
  }
  acMgr.setPolicy(childPath,acl);
  root.commit();
  Tree everyoneRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  Tree parent=everyoneRoot.getChild(PermissionUtil.getEntryName(childPath));
  if (parent.exists()) {
    assertFalse(parent.getChild("0").exists());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionProviderImplTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesForReadPaths() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    PermissionProvider pp=createPermissionProvider(testSession);
    for (    String path : READ_PATHS) {
      Tree tree=root.getTree(path);
      assertTrue(pp.hasPrivileges(tree,PrivilegeConstants.JCR_READ));
      assertTrue(pp.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES));
      assertTrue(pp.hasPrivileges(tree,PrivilegeConstants.REP_READ_PROPERTIES));
      assertFalse(pp.hasPrivileges(tree,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
    }
    assertFalse(pp.hasPrivileges(null,PrivilegeConstants.JCR_READ));
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    PermissionProvider pp=createPermissionProvider(testSession);
    assertTrue(pp.hasPrivileges(null));
    assertTrue(pp.hasPrivileges(null,new String[0]));
    assertFalse(pp.hasPrivileges(null,PrivilegeConstants.JCR_WORKSPACE_MANAGEMENT));
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegesForReadPaths() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    PermissionProvider pp=createPermissionProvider(testSession);
    for (    String path : READ_PATHS) {
      Tree tree=root.getTree(path);
      assertEquals(Collections.singleton(PrivilegeConstants.JCR_READ),pp.getPrivileges(tree));
    }
    assertEquals(Collections.<String>emptySet(),pp.getPrivileges(null));
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadPath() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    Root r=testSession.getLatestRoot();
    PermissionProvider pp=createPermissionProvider(testSession);
    Tree tree=r.getTree("/");
    assertFalse(tree.exists());
    assertFalse(pp.getTreePermission(tree,TreePermission.EMPTY).canRead());
    for (    String path : READ_PATHS) {
      tree=r.getTree(path);
      assertTrue(tree.exists());
      assertTrue(pp.getTreePermission(tree,TreePermission.EMPTY).canRead());
    }
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedForReadPaths() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    PermissionProvider pp=createPermissionProvider(testSession);
    for (    String path : READ_PATHS) {
      assertTrue(pp.isGranted(path,Permissions.getString(Permissions.READ)));
      assertTrue(pp.isGranted(path,Permissions.getString(Permissions.READ_NODE)));
      assertTrue(pp.isGranted(path + '/' + JcrConstants.JCR_PRIMARYTYPE,Permissions.getString(Permissions.READ_PROPERTY)));
      assertFalse(pp.isGranted(path,Permissions.getString(Permissions.READ_ACCESS_CONTROL)));
    }
    for (    String path : READ_PATHS) {
      Tree tree=root.getTree(path);
      assertTrue(pp.isGranted(tree,null,Permissions.READ));
      assertTrue(pp.isGranted(tree,null,Permissions.READ_NODE));
      assertTrue(pp.isGranted(tree,tree.getProperty(JcrConstants.JCR_PRIMARYTYPE),Permissions.READ_PROPERTY));
      assertFalse(pp.isGranted(tree,null,Permissions.READ_ACCESS_CONTROL));
    }
    RepositoryPermission rp=pp.getRepositoryPermission();
    assertFalse(rp.isGranted(Permissions.READ));
    assertFalse(rp.isGranted(Permissions.READ_NODE));
    assertFalse(rp.isGranted(Permissions.READ_PROPERTY));
    assertFalse(rp.isGranted(Permissions.READ_ACCESS_CONTROL));
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdministatorConfig() throws Exception {
  adminstrators.addMember(getTestUser());
  root.commit();
  ContentSession testSession=createTestSession();
  try {
    Root r=testSession.getLatestRoot();
    Root immutableRoot=RootFactory.createReadOnlyRoot(r);
    PermissionProvider pp=createPermissionProvider(testSession);
    assertTrue(r.getTree("/").exists());
    TreePermission tp=pp.getTreePermission(immutableRoot.getTree("/"),TreePermission.EMPTY);
    assertSame(TreePermission.ALL,tp);
    for (    String path : READ_PATHS) {
      Tree tree=r.getTree(path);
      assertTrue(tree.exists());
      assertSame(TreePermission.ALL,pp.getTreePermission(tree,TreePermission.EMPTY));
    }
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionStoreTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadAccess(){
  Tree ps=testRoot.getTree(PermissionConstants.PERMISSIONS_STORE_PATH);
  assertFalse(ps.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted(){
  PermissionProvider pp=createPermissionProvider();
  Tree t=root.getTree(PermissionConstants.PERMISSIONS_STORE_PATH);
  assertFalse(pp.isGranted(t,null,Permissions.READ));
  assertFalse(pp.isGranted(t,t.getProperty(JcrConstants.JCR_PRIMARYTYPE),Permissions.READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrivilege(){
  PermissionProvider pp=createPermissionProvider();
  Tree t=root.getTree(PermissionConstants.PERMISSIONS_STORE_PATH);
  Set<String> privilegeNames=pp.getPrivileges(t);
  assertTrue(privilegeNames.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAtPath(){
  PermissionProvider pp=createPermissionProvider();
  assertFalse(pp.isGranted(PermissionConstants.PERMISSIONS_STORE_PATH,Session.ACTION_READ));
  assertFalse(pp.isGranted(PermissionConstants.PERMISSIONS_STORE_PATH,Session.ACTION_ADD_NODE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionValidatorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryTypeToPolicyNode() throws Exception {
  testRootNode.getChild("child").addChild(AccessControlConstants.REP_POLICY,NT_UNSTRUCTURED);
  root.commit();
  grant(TEST_ROOT_PATH,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL,PrivilegeConstants.REP_WRITE);
  ContentSession testSession=createTestSession();
  try {
    Root testRoot=testSession.getLatestRoot();
    Tree testChild=testRoot.getTree(TEST_CHILD_PATH);
    testChild.setProperty(PropertyStates.createProperty(JcrConstants.JCR_MIXINTYPES,ImmutableList.of(AccessControlConstants.MIX_REP_ACCESS_CONTROLLABLE),Type.NAMES));
    Tree testPolicy=testChild.getChild(AccessControlConstants.REP_POLICY);
    testPolicy.setOrderableChildren(true);
    testPolicy.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_ACL,Type.NAME);
    testRoot.commit();
    fail("Turning a false policy node into access control content requires the ability to write AC content.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
    assertEquals(0,e.getCode());
  }
 finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.TreePermissionImplTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCanReadProperties2() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/test");
  acl.addEntry(getTestUser().getPrincipal(),privilegesFromNames(PrivilegeConstants.JCR_READ),true);
  acMgr.setPolicy("/test",acl);
  root.commit();
  Tree policyTree=root.getTree("/test/rep:policy");
  NodeUtil ace=new NodeUtil(policyTree).addChild("ace2",NT_REP_DENY_ACE);
  ace.setNames(REP_PRIVILEGES,PrivilegeConstants.REP_READ_PROPERTIES);
  ace.setString(REP_PRINCIPAL_NAME,getTestUser().getPrincipal().getName());
  root.commit();
  TreePermission tp=getTreePermission("/test");
  assertFalse(tp.canReadProperties());
  assertTrue(tp.canRead());
  assertFalse(tp.canReadProperties());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCanReadProperties() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/test");
  acl.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_READ),true);
  acl.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.REP_READ_PROPERTIES),false);
  acMgr.setPolicy("/test",acl);
  root.commit();
  TreePermission tp=getTreePermission("/test");
  assertFalse(tp.canReadProperties());
  assertTrue(tp.canRead());
  assertFalse(tp.canReadProperties());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.VersionTreePermissionTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testVersionableRemoved() throws Exception {
  Tree versionHistory=checkNotNull(vMgr.getVersionHistory(testTree));
  testTree.remove();
  root.commit();
  pp.refresh();
  TreePermission tp=getVersionPermission(root,pp,versionHistory.getPath());
  assertVersionPermission(tp,"/",false);
  Tree vTree=versionHistory.getChild("1.0");
  tp=pp.getTreePermission(vTree,tp);
  assertVersionPermission(tp,"/",false);
  Tree frozen=vTree.getChild(JCR_FROZENNODE);
  assertTrue(frozen.exists());
  tp=pp.getTreePermission(frozen,tp);
  assertVersionPermission(tp,"/",false);
  Tree t=frozen;
  String expectedPath="/";
  for (  String name : new String[]{"a","b","c"}) {
    t=t.getChild(name);
    expectedPath=PathUtils.concat(expectedPath,name);
    tp=pp.getTreePermission(t,tp);
    assertVersionPermission(tp,expectedPath,false);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetTreePermission() throws Exception {
  Tree versionHistory=checkNotNull(vMgr.getVersionHistory(testTree));
  String expectedPath="/test";
  TreePermission tp=getVersionPermission(root,pp,versionHistory.getPath());
  assertVersionPermission(tp,expectedPath,true);
  Tree vTree=versionHistory.getChild("1.0");
  assertTrue(vTree.exists());
  tp=pp.getTreePermission(vTree,tp);
  assertVersionPermission(tp,expectedPath,true);
  Tree frozen=vTree.getChild(JCR_FROZENNODE);
  assertTrue(frozen.exists());
  tp=pp.getTreePermission(frozen,tp);
  assertVersionPermission(tp,expectedPath,true);
  Tree t=frozen;
  for (  String name : new String[]{"a","b","c"}) {
    t=t.getChild(name);
    expectedPath=PathUtils.concat(expectedPath,name);
    tp=pp.getTreePermission(t,tp);
    assertVersionPermission(tp,expectedPath,true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.ItemNamePatternTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMatchesItem() throws Exception {
  NodeUtil rootTree=new NodeUtil(root.getTree("/"));
  List<String> matching=ImmutableList.of("a","b","c","d/e/a","a/b/c/d/b","test/c");
  for (  String relPath : matching) {
    Tree testTree=rootTree.getOrAddTree(relPath,NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree();
    assertTrue(pattern.matches(testTree,null));
    assertTrue(pattern.matches(testTree,PropertyStates.createProperty("a",Boolean.FALSE)));
    assertFalse(pattern.matches(testTree,PropertyStates.createProperty("f","anyval")));
  }
  List<String> notMatching=ImmutableList.of("d","b/d","d/e/f","c/b/abc");
  for (  String relPath : notMatching) {
    Tree testTree=rootTree.getOrAddTree(relPath,NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree();
    assertFalse(pattern.matches(testTree,null));
    assertTrue(pattern.matches(testTree,PropertyStates.createProperty("a",Boolean.FALSE)));
    assertFalse(pattern.matches(testTree,PropertyStates.createProperty("f","anyval")));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMatchesPath(){
  List<String> matching=ImmutableList.of("/a","/b","/c","/d/e/a","/a/b/c/d/b","/test/c");
  for (  String p : matching) {
    assertTrue(pattern.matches(p));
  }
  List<String> notMatching=ImmutableList.of("/","/d","/b/d","/d/e/f","/c/b/abc");
  for (  String p : notMatching) {
    assertFalse(pattern.matches(p));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.ItemNameRestrictionTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRead(){
  Root testRoot=testSession.getLatestRoot();
  List<String> visible=ImmutableList.of("/a","/a/d/b","/a/d/b/e/c");
  for (  String p : visible) {
    assertTrue(testRoot.getTree(p).exists());
  }
  List<String> invisible=ImmutableList.of("/","/a/d","/a/d/b/e","/a/d/b/e/c/f");
  for (  String p : invisible) {
    assertFalse(testRoot.getTree(p).exists());
  }
  Tree c=testRoot.getTree("/a/d/b/e/c");
  assertNull(c.getProperty(JcrConstants.JCR_PRIMARYTYPE));
  assertNull(c.getProperty("prop"));
  assertNotNull(c.getProperty("a"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.RestrictionProviderImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPatternFromRestrictions() throws Exception {
  Map<PropertyState,RestrictionPattern> map=newHashMap();
  map.put(PropertyStates.createProperty(REP_GLOB,"/*/jcr:content"),GlobPattern.create("/testPath","/*/jcr:content"));
  List<String> ntNames=ImmutableList.of(JcrConstants.NT_FOLDER,JcrConstants.NT_LINKEDFILE);
  map.put(PropertyStates.createProperty(REP_NT_NAMES,ntNames,Type.NAMES),new NodeTypePattern(ntNames));
  List<String> prefixes=ImmutableList.of("rep","jcr");
  map.put(PropertyStates.createProperty(REP_PREFIXES,prefixes,Type.STRINGS),new PrefixPattern(prefixes));
  List<String> itemNames=ImmutableList.of("abc","jcr:primaryType");
  map.put(PropertyStates.createProperty(REP_ITEM_NAMES,itemNames,Type.NAMES),new ItemNamePattern(itemNames));
  NodeUtil tree=new NodeUtil(root.getTree("/")).getOrAddTree("testPath",JcrConstants.NT_UNSTRUCTURED);
  Tree restrictions=tree.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS).getTree();
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
    RestrictionPattern pattern=provider.getPattern("/testPath",provider.readRestrictions("/testPath",tree.getTree()));
    assertEquals(entry.getValue(),pattern);
    restrictions.removeProperty(entry.getKey().getName());
  }
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
  }
  RestrictionPattern pattern=provider.getPattern("/testPath",provider.readRestrictions("/testPath",tree.getTree()));
  assertTrue(pattern instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionPattern() throws Exception {
  Map<PropertyState,RestrictionPattern> map=newHashMap();
  map.put(PropertyStates.createProperty(REP_GLOB,"/*/jcr:content"),GlobPattern.create("/testPath","/*/jcr:content"));
  List<String> ntNames=ImmutableList.of(JcrConstants.NT_FOLDER,JcrConstants.NT_LINKEDFILE);
  map.put(PropertyStates.createProperty(REP_NT_NAMES,ntNames,Type.NAMES),new NodeTypePattern(ntNames));
  NodeUtil tree=new NodeUtil(root.getTree("/")).getOrAddTree("testPath",JcrConstants.NT_UNSTRUCTURED);
  Tree restrictions=tree.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS).getTree();
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
    RestrictionPattern pattern=provider.getPattern("/testPath",restrictions);
    assertEquals(entry.getValue(),pattern);
    restrictions.removeProperty(entry.getKey().getName());
  }
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
  }
  RestrictionPattern pattern=provider.getPattern("/testPath",restrictions);
  assertTrue(pattern instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPatternForAllSupported() throws Exception {
  Map<PropertyState,RestrictionPattern> map=newHashMap();
  map.put(PropertyStates.createProperty(REP_GLOB,"/*/jcr:content"),GlobPattern.create("/testPath","/*/jcr:content"));
  List<String> ntNames=ImmutableList.of(JcrConstants.NT_FOLDER,JcrConstants.NT_LINKEDFILE);
  map.put(PropertyStates.createProperty(REP_NT_NAMES,ntNames,Type.NAMES),new NodeTypePattern(ntNames));
  List<String> prefixes=ImmutableList.of("rep","jcr");
  map.put(PropertyStates.createProperty(REP_PREFIXES,prefixes,Type.STRINGS),new PrefixPattern(prefixes));
  List<String> itemNames=ImmutableList.of("abc","jcr:primaryType");
  map.put(PropertyStates.createProperty(REP_ITEM_NAMES,prefixes,Type.NAMES),new ItemNamePattern(itemNames));
  NodeUtil tree=new NodeUtil(root.getTree("/")).getOrAddTree("testPath",JcrConstants.NT_UNSTRUCTURED);
  Tree restrictions=tree.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS).getTree();
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
  }
  RestrictionPattern pattern=provider.getPattern("/testPath",restrictions);
  assertTrue(pattern instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedDefinitions(){
  assertTrue(provider.getSupportedRestrictions(null).isEmpty());
  Set<RestrictionDefinition> defs=provider.getSupportedRestrictions("/testPath");
  assertNotNull(defs);
  assertEquals(4,defs.size());
  for (  RestrictionDefinition def : defs) {
    if (REP_GLOB.equals(def.getName())) {
      assertEquals(Type.STRING,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_NT_NAMES.equals(def.getName())) {
      assertEquals(Type.NAMES,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_PREFIXES.equals(def.getName())) {
      assertEquals(Type.STRINGS,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_ITEM_NAMES.equals(def.getName())) {
      assertEquals(Type.NAMES,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else {
      fail("unexpected restriction " + def.getName());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.internal.SecurityProviderRegistrationTest </h4><pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthorizationRanking() throws Exception {
  Field f=registration.getClass().getDeclaredField("authorizationConfiguration");
  f.setAccessible(true);
  AuthorizationConfiguration testAc=new TestAuthorizationConfiguration();
  registration.bindAuthorizationConfiguration(testAc,ConfigurationParameters.EMPTY);
  AuthorizationConfigurationImpl ac=new AuthorizationConfigurationImpl();
  ac.setParameters(ConfigurationParameters.of(CompositeConfiguration.PARAM_RANKING,500));
  registration.bindAuthorizationConfiguration(ac,PROPS);
  AuthorizationConfiguration testAc2=new TestAuthorizationConfiguration();
  Map<String,Object> props=ImmutableMap.<String,Object>of(Constants.SERVICE_RANKING,new Integer(100));
  registration.bindAuthorizationConfiguration(testAc2,props);
  CompositeAuthorizationConfiguration cac=(CompositeAuthorizationConfiguration)f.get(registration);
  List<AuthorizationConfiguration> list=cac.getConfigurations();
  assertEquals(3,list.size());
  assertSame(ac,list.get(0));
  assertSame(testAc2,list.get(1));
  assertSame(testAc,list.get(2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.JcrAllCommitHookTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testJcrAll() throws Exception {
  Privilege all=privilegeManager.getPrivilege(PrivilegeConstants.JCR_ALL);
  Set<Privilege> aggregates=Sets.newHashSet(all.getDeclaredAggregatePrivileges());
  assertTrue(aggregates.contains(newPrivilege));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L3_BuiltInPrivilegesTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAggregation() throws RepositoryException {
  PrivilegeManager privilegeManager=getPrivilegeManager(root);
  Map<String,Set<Privilege>> expectedResults=ImmutableMap.of();
  Iterable<Privilege> aggregated=Iterables.<Privilege>filter(ImmutableList.<Privilege>copyOf(privilegeManager.getRegisteredPrivileges()),new Predicate<Privilege>(){
    @Override public boolean apply(    @Nullable Privilege input){
      return input != null && input.isAggregate();
    }
  }
);
  for (  Privilege aggrPrivilege : aggregated) {
    Set<Privilege> expected=expectedResults.get(aggrPrivilege.getName());
    assertEquals(expected,ImmutableSet.copyOf(aggrPrivilege.getDeclaredAggregatePrivileges()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L4_CustomPrivilegeTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCustomPrivilege(){
  Set<String> expected=null;
  assertEqualPrivileges(expected,customAggrPriv.getDeclaredAggregatePrivileges());
  expected=null;
  assertEqualPrivileges(expected,customAggrPriv.getAggregatePrivileges());
  Boolean expectedIsAbstract=null;
  assertEquals(expectedIsAbstract.booleanValue(),customAggrPriv.isAbstract());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L5_PrivilegeContentTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrivilegeDefinition() throws RepositoryException {
  Tree repWriteTree=PrivilegeUtil.getPrivilegesTree(root).getChild(PrivilegeConstants.REP_WRITE);
  PrivilegeDefinition def=PrivilegeUtil.readDefinition(repWriteTree);
  String expectedName=null;
  assertEquals(expectedName,def.getName());
  boolean isAbstract=false;
  assertEquals(isAbstract,def.isAbstract());
  Set<String> expectedAggregates=null;
  assertEquals(expectedAggregates,def.getDeclaredAggregateNames());
  Privilege repWritePrivilege=getPrivilegeManager(root).getPrivilege(PrivilegeConstants.REP_WRITE);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrivilegeRoot(){
  Tree privilegesRoot=root.getTree(PrivilegeConstants.PRIVILEGES_PATH);
  String name=null;
  assertEquals(name,privilegesRoot.getName());
  String primaryType=null;
  assertEquals(primaryType,TreeUtil.getPrimaryTypeName(privilegesRoot));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.PrivilegeDefinitionReaderTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMissingPermissionRoot() throws Exception {
  ContentRepository repo=new Oak().with(new OpenSecurityProvider()).createContentRepository();
  Root tmpRoot=repo.login(null,null).getLatestRoot();
  try {
    PrivilegeDefinitionReader reader=new PrivilegeDefinitionReader(tmpRoot);
    assertNull(reader.readDefinition(JCR_READ));
  }
  finally {
    tmpRoot.getContentSession().close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.PrivilegeDefinitionWriterTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteDefinition() throws Exception {
  PrivilegeDefinitionWriter writer=new PrivilegeDefinitionWriter(root);
  writer.writeDefinition(new ImmutablePrivilegeDefinition("tmp",true,asList(JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL)));
  Tree privRoot=root.getTree(PRIVILEGES_PATH);
  assertTrue(privRoot.hasChild("tmp"));
  Tree tmpTree=privRoot.getChild("tmp");
  assertTrue(TreeUtil.getBoolean(tmpTree,REP_IS_ABSTRACT));
  assertArrayEquals(new String[]{JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},Iterables.toArray(TreeUtil.getStrings(tmpTree,REP_AGGREGATES),String.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.PrivilegeValidatorTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2413">OAK-2413</a>
 */
@Test public void testChildNodeChangedWithoutChanges() throws CommitFailedException {
  NodeBuilder nb=EmptyNodeState.EMPTY_NODE.builder();
  nb.setProperty(JcrConstants.JCR_PRIMARYTYPE,NT_REP_PRIVILEGE,Type.NAME);
  NodeState privilegeDefinition=nb.getNodeState();
  assertTrue(NT_REP_PRIVILEGE.equals(NodeStateUtils.getPrimaryTypeName(privilegeDefinition)));
  PrivilegeValidator pv=new PrivilegeValidator(root,root);
  assertNull(pv.childNodeChanged("test",privilegeDefinition,privilegeDefinition));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAggregatesIncludesJcrAll() throws Exception {
  try {
    Tree privTree=createPrivilegeTree();
    privTree.setProperty(PropertyStates.createProperty(REP_AGGREGATES,ImmutableList.of(JCR_ALL,JCR_READ,JCR_WRITE),Type.NAMES));
    PrivilegeBits.getInstance(bitsProvider.getBits(JCR_ALL,JCR_READ,JCR_WRITE)).writeTo(privTree);
    root.commit();
    fail("Aggregation containing jcr:all is invalid.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(53,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2413">OAK-2413</a>
 */
@Test public void testChildNodeChangedWithChanges() throws CommitFailedException {
  NodeBuilder nb=EmptyNodeState.EMPTY_NODE.builder();
  nb.setProperty(JcrConstants.JCR_PRIMARYTYPE,NT_REP_PRIVILEGE,Type.NAME);
  NodeState privilegeDefinition=nb.getNodeState();
  assertTrue(NT_REP_PRIVILEGE.equals(NodeStateUtils.getPrimaryTypeName(privilegeDefinition)));
  PrivilegeValidator pv=new PrivilegeValidator(root,root);
  try {
    pv.childNodeChanged("test",privilegeDefinition,EmptyNodeState.EMPTY_NODE);
  }
 catch (  CommitFailedException e) {
    assertEquals(41,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AbstractAddMembersByIdTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAlreadyMember() throws Exception {
  testGroup.addMember(getTestUser());
  testGroup.addMember(memberGroup);
  Set<String> failed=testGroup.addMembers(getTestUser().getID(),memberGroup.getID());
  assertEquals(2,failed.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNoMembers() throws Exception {
  Set<String> failed=testGroup.addMembers();
  assertTrue(failed.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSameId() throws Exception {
  Set<String> failed=testGroup.addMembers(testGroup.getID());
  assertEquals(1,failed.size());
  assertTrue(failed.contains(testGroup.getID()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserMembers() throws Exception {
  Set<String> failed=testGroup.addMembers(getTestUser().getID());
  assertTrue(failed.isEmpty());
  root.commit();
  assertTrue(testGroup.isDeclaredMember(getTestUser()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMixedMembers() throws Exception {
  Set<String> failed=testGroup.addMembers(getTestUser().getID(),memberGroup.getID());
  assertTrue(failed.isEmpty());
  root.commit();
  assertTrue(testGroup.isDeclaredMember(getTestUser()));
  assertTrue(testGroup.isDeclaredMember(memberGroup));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupMembers() throws Exception {
  Set<String> failed=testGroup.addMembers(memberGroup.getID());
  assertTrue(failed.isEmpty());
  root.commit();
  assertTrue(testGroup.isDeclaredMember(memberGroup));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwice() throws Exception {
  Set<String> failed=testGroup.addMembers(memberGroup.getID(),memberGroup.getID());
  assertTrue(failed.isEmpty());
  assertTrue(testGroup.isDeclaredMember(memberGroup));
  Iterable<String> memberIds=getMemberIds(testGroup);
  assertEquals(1,Iterables.size(memberIds));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCyclicMembership() throws Exception {
  memberGroup.addMember(testGroup);
  root.commit();
  Set<String> failed=testGroup.addMembers(memberGroup.getID());
  assertTrue(failed.isEmpty());
  try {
    root.commit();
    fail("cyclic group membership must be detected upon commit");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(31,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AbstractRemoveMembersByIdTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotMember() throws Exception {
  Group gr=null;
  try {
    gr=getUserManager(root).createGroup("testGroup" + UUID.randomUUID().toString());
    Set<String> failed=testGroup.removeMembers(gr.getID());
    assertFalse(failed.isEmpty());
  }
  finally {
    if (gr != null) {
      gr.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTwice() throws Exception {
  Set<String> failed=testGroup.removeMembers(memberGroup.getID(),memberGroup.getID());
  assertTrue(failed.isEmpty());
  assertFalse(testGroup.isDeclaredMember(memberGroup));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSameId() throws Exception {
  Set<String> failed=testGroup.removeMembers(testGroup.getID());
  assertEquals(1,failed.size());
  assertTrue(failed.contains(testGroup.getID()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserMember() throws Exception {
  Set<String> failed=testGroup.removeMembers(getTestUser().getID());
  assertTrue(failed.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupMember() throws Exception {
  Set<String> failed=testGroup.removeMembers(memberGroup.getID());
  assertTrue(failed.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AddMembersByIdBestEffortTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCyclicWithoutAccess() throws Exception {
  memberGroup.addMember(testGroup);
  root.commit();
  try {
    Set<String> failed=addExistingMemberWithoutAccess();
    fail("CommitFailedException expected");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(31,e.getCode());
  }
 finally {
    root.refresh();
    assertFalse(testGroup.isMember(memberGroup));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.CacheValidatorProviderTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheBelowProfile() throws Exception {
  try {
    NodeUtil node=new NodeUtil(getAuthorizableTree(getTestUser()));
    NodeUtil child=node.addChild("profile",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    child.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE).setLong(CacheConstants.REP_EXPIRATION,23);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating rep:cache node below a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyCache() throws Exception {
  List<PropertyState> props=new ArrayList();
  props.add(PropertyStates.createProperty(CacheConstants.REP_EXPIRATION,25));
  props.add(PropertyStates.createProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES,EveryonePrincipal.NAME));
  props.add(PropertyStates.createProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME));
  props.add(PropertyStates.createProperty("residualProp","anyvalue"));
  Tree cache=getCache(getTestUser());
  for (  PropertyState prop : props) {
    try {
      cache.setProperty(prop);
      root.commit(CacheValidatorProvider.asCommitAttributes());
      fail("Modifying rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheByName() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      node.addChild(CacheConstants.REP_CACHE,JcrConstants.NT_UNSTRUCTURED);
      root.commit();
      fail("Creating rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheWithCommitInfo() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit(CacheValidatorProvider.asCommitAttributes());
      fail("Creating rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryType() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild("childNode",JcrConstants.NT_UNSTRUCTURED);
      root.commit();
      cache.setName(JcrConstants.JCR_PRIMARYTYPE,CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit();
      fail("Changing primary type of residual node below an user/group to rep:Cache must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheBelowPersistedProfile() throws Exception {
  try {
    NodeUtil node=new NodeUtil(getAuthorizableTree(getTestUser()));
    NodeUtil child=node.addChild("profile",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    root.commit();
    child.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE).setLong(CacheConstants.REP_EXPIRATION,23);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating rep:cache node below a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheOutsideOfAuthorizable() throws Exception {
  NodeUtil n=new NodeUtil(root.getTree("/"));
  try {
    NodeUtil child=n.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
    child.setLong(CacheConstants.REP_EXPIRATION,1);
    root.commit();
    fail("Using rep:cache/rep:Cache outside a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
    Tree c=n.getTree().getChild(CacheConstants.REP_CACHE);
    if (c.exists()) {
      c.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedCache() throws Exception {
  NodeUtil cache=new NodeUtil(getCache(getTestUser()));
  try {
    NodeUtil c=cache.getOrAddChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
    c.setLong(CacheConstants.REP_EXPIRATION,223);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating nested cache must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheByNodeType() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild("childNode",CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit();
      fail("Creating node with nt rep:Cache below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.EveryoneGroupTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEveryoneMemberOf() throws Exception {
  Iterator<Group> groups=everyoneGroup.memberOf();
  assertFalse(groups.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMemberOfIncludesEveryone() throws Exception {
  for (  Authorizable a : authorizables) {
    Set<Group> groups=ImmutableSet.copyOf(a.memberOf());
    assertTrue(groups.contains(everyoneGroup));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetDeclaredMembers() throws Exception {
  Set<Authorizable> members=ImmutableSet.copyOf(everyoneGroup.getDeclaredMembers());
  assertFalse(members.contains(everyoneGroup));
  for (  Authorizable a : authorizables) {
    assertTrue(members.contains(a));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetMembers() throws Exception {
  Set<Authorizable> members=ImmutableSet.copyOf(everyoneGroup.getMembers());
  assertFalse(members.contains(everyoneGroup));
  for (  Authorizable a : authorizables) {
    assertTrue(members.contains(a));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEveryoneDeclaredMemberOf() throws Exception {
  Iterator<Group> groups=everyoneGroup.declaredMemberOf();
  assertFalse(groups.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrincipal() throws Exception {
  assertEquals(EveryonePrincipal.getInstance(),everyoneGroup.getPrincipal());
  assertEquals(EveryonePrincipal.NAME,everyoneGroup.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeclaredMemberOfIncludesEveryone() throws Exception {
  for (  Authorizable a : authorizables) {
    Set<Group> groups=ImmutableSet.copyOf(a.declaredMemberOf());
    assertTrue(groups.contains(everyoneGroup));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.IntermediatePathTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupEmptyPath() throws Exception {
  Authorizable authorizable=createAuthorizable(true,"");
  assertFalse(UserConstants.DEFAULT_GROUP_PATH.equals(PathUtils.getAncestorPath(authorizable.getPath(),1)));
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_GROUP_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserRootPath() throws Exception {
  Authorizable authorizable=createAuthorizable(false,UserConstants.DEFAULT_USER_PATH);
  assertFalse(UserConstants.DEFAULT_USER_PATH.equals(PathUtils.getAncestorPath(authorizable.getPath(),1)));
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_USER_PATH));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRelativePaths() throws Exception {
  new NodeUtil(root.getTree("/")).addChild("testNode",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  List<String> invalidPaths=ImmutableList.of("..","../..","../../..","../../../testNode","a/b/../../../c");
  for (  String relPath : invalidPaths) {
    try {
      Authorizable authorizable=createAuthorizable(false,relPath);
      root.commit();
      fail("Invalid path " + relPath + " outside of configured scope.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(28,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserEmptyPath() throws Exception {
  Authorizable authorizable=createAuthorizable(false,"");
  assertFalse(UserConstants.DEFAULT_USER_PATH.equals(PathUtils.getAncestorPath(authorizable.getPath(),1)));
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_USER_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupRootPath() throws Exception {
  Authorizable authorizable=createAuthorizable(true,UserConstants.DEFAULT_GROUP_PATH);
  assertFalse(UserConstants.DEFAULT_GROUP_PATH.equals(PathUtils.getAncestorPath(authorizable.getPath(),1)));
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_GROUP_PATH));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbsolutePathsWithInvalidParentElements() throws Exception {
  try {
    String invalidPath=UserConstants.DEFAULT_GROUP_PATH + "/../a";
    Authorizable authorizable=createAuthorizable(true,invalidPath);
    assertTrue(authorizable.getPath().startsWith(PathUtils.getAncestorPath(UserConstants.DEFAULT_GROUP_PATH,1) + "/a"));
    root.commit();
    fail("Invalid path " + invalidPath + " outside of configured scope.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(28,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L10_RemovalAndMembershipTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMemberAfterRecreation() throws RepositoryException, CommitFailedException {
  String id=user.getID();
  user.remove();
  root.commit();
  User u=getUserManager(root).createUser(id,ExerciseUtility.TEST_PW);
  root.commit();
  assertFalse(administrators.addMember(u));
  assertTrue(administrators.isDeclaredMember(u));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotMemberAfterRecreation() throws RepositoryException, CommitFailedException {
  String id=user.getID();
  user.remove();
  root.commit();
  User u=getUserManager(root).createUser(id,ExerciseUtility.TEST_PW);
  root.commit();
  assertFalse(administrators.isDeclaredMember(u));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L13_SystemUserTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserNode() throws RepositoryException {
  Tree systemUserTree=root.getTree(systemUser.getPath());
  assertTrue(systemUserTree.exists());
  String expectedPrimaryTypeName=null;
  assertEquals(expectedPrimaryTypeName,TreeUtil.getPrimaryTypeName(systemUserTree));
  String expectedId=null;
  assertEquals(expectedId,TreeUtil.getString(systemUserTree,UserConstants.REP_AUTHORIZABLE_ID));
  String expectedPw=null;
  assertEquals(expectedPw,TreeUtil.getString(systemUserTree,UserConstants.REP_PASSWORD));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetCredentials() throws RepositoryException {
  Credentials creds=systemUser.getCredentials();
  Credentials expected=null;
  assertEquals(expected,creds);
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUser() throws RepositoryException {
  UserManager userMgr=getUserManager(root);
  Authorizable authorizable=userMgr.getAuthorizable(systemUser.getID());
  Boolean isGroup=null;
  assertEquals(isGroup.booleanValue(),authorizable.isGroup());
  Boolean isAdmin=null;
  assertEquals(isAdmin.booleanValue(),systemUser.isAdmin());
  Class cls=null;
  Authorizable sUser=userMgr.getAuthorizable(systemUser.getID(),cls);
  Iterator<Group> memberOf=sUser.memberOf();
  Set<Group> expectedGroups=null;
  while (memberOf.hasNext()) {
    assertTrue(expectedGroups.remove(memberOf.next()));
  }
  assertTrue(expectedGroups.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetPassword() throws RepositoryException, CommitFailedException {
  systemUser.changePassword(ExerciseUtility.TEST_PW);
  Tree systemUserTree=root.getTree(systemUser.getPath());
  String expectedPw=null;
  assertEquals(expectedPw,TreeUtil.getString(systemUserTree,UserConstants.REP_PASSWORD));
  systemUserTree.setProperty(UserConstants.REP_PASSWORD,"anotherPw");
  root.commit();
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserPrincipal() throws RepositoryException {
  Authorizable authorizable=getUserManager(root).getAuthorizable(systemUser.getID());
  Principal principal=authorizable.getPrincipal();
  PrincipalManager principalManager=getPrincipalManager(root);
  PrincipalIterator pIter=principalManager.getGroupMembership(principal);
  int expectedSize=-1;
  assertEquals(expectedSize,pIter.getSize());
  List<Principal> expectedGroupPrincipals=null;
  while (pIter.hasNext()) {
    Principal group=pIter.nextPrincipal();
    assertTrue(expectedGroupPrincipals.remove(group));
  }
  assertTrue(expectedGroupPrincipals.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L14_AuthorizableNodeNameTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAuthorizableNodeName() throws RepositoryException {
  testUser=userManager.createUser("test/:User",null);
  String nodeName=Text.getName(testUser.getPath());
  String expectedNodeName=null;
  assertEquals(expectedNodeName,nodeName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L16_RepositoryWithoutUserManagement </h4><pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogin() throws LoginException, NoSuchWorkspaceException {
  String expectedId=null;
  Credentials creds=null;
  ContentSession s=login(creds);
  AuthInfo authInfo=s.getAuthInfo();
  assertNotSame(AuthInfo.EMPTY,authInfo);
  assertEquals(expectedId,authInfo.getUserID());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserManagementDescriptor() throws RepositoryException {
  Oak oak=new Oak().with(new InitialContent()).with(getSecurityProvider());
  ContentRepository contentRepository=oak.createContentRepository();
  assertFalse(contentRepository.getDescriptors().getValue(JackrabbitRepository.OPTION_USER_MANAGEMENT_SUPPORTED).getBoolean());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L3_UserVsPrincipalTest </h4><pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLookup() throws RepositoryException {
  Map<String,Object[]> resultMap=ImmutableMap.of(testId,new Object[]{null,null,null},testPrincipal.getName(),new Object[]{null,null,null},testGroupId,new Object[]{null,null},testGroupPrincipal.getName(),new Object[]{null,null});
  for (  String key : resultMap.keySet()) {
    Object[] result=resultMap.get(key);
    Principal expectedP=(Principal)result[0];
    Principal principal=principalManager.getPrincipal(key);
    assertEquals(expectedP,principal);
    Principal p=new PrincipalImpl(key);
    Authorizable a=getUserManager(root).getAuthorizable(p);
    if (a != null) {
      assertEquals(expectedP,a.getPrincipal());
    }
    Authorizable expectedA=(Authorizable)result[1];
    a=getUserManager(root).getAuthorizable(key);
    assertEquals(expectedA,a);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L4_AuthorizableIdTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIdWithManualCreation() throws RepositoryException, CommitFailedException {
  Tree userTree=root.getTree(testUser.getPath());
  Tree authorizableFolder=userTree.getParent();
  try {
    String id=TreeUtil.getString(userTree,UserConstants.REP_AUTHORIZABLE_ID);
    Tree anotherUser=authorizableFolder.addChild("nodeName");
    anotherUser.setProperty(userTree.getProperty(JcrConstants.JCR_PRIMARYTYPE));
    anotherUser.setProperty(userTree.getProperty(JcrConstants.JCR_UUID));
    anotherUser.setProperty(UserConstants.REP_PRINCIPAL_NAME,TreeUtil.getString(userTree,UserConstants.REP_PRINCIPAL_NAME));
    anotherUser.setProperty(UserConstants.REP_AUTHORIZABLE_ID,id);
    root.commit();
    User another=getUserManager(root).getAuthorizable(id,User.class);
    assertEquals(id,another.getID());
    assertFalse(another.equals(testUser));
  }
  finally {
    root.refresh();
    Tree t=authorizableFolder.getChild("nodeName");
    if (t.exists()) {
      t.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetByID() throws RepositoryException {
  UserManager uMgr=getUserManager(root);
  Group g=uMgr.getAuthorizable(testUser.getID(),Group.class);
  assertEquals(g,uMgr.getAuthorizable(testGroup.getID()));
  assertEquals(g,uMgr.getAuthorizable(testGroup.getPrincipal().getName()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L8_MembershipTest </h4><pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeclaredMembership() throws RepositoryException, CommitFailedException {
  group.addMember(group2);
  group2.addMember(group3);
  group3.addMember(user);
  root.commit();
  Set<Group> expectedGroups=null;
  Iterator<Group> groups=user.declaredMemberOf();
  while (groups.hasNext()) {
    assertTrue(expectedGroups.remove(groups.next()));
  }
  assertTrue(expectedGroups.isEmpty());
  Set<Authorizable> expectedMembers=null;
  Iterator<Authorizable> memberIterator=group.getDeclaredMembers();
  while (memberIterator.hasNext()) {
    assertTrue(expectedMembers.remove(memberIterator.next()));
  }
  assertTrue(expectedMembers.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddRemoveMembers() throws RepositoryException, CommitFailedException {
  root.commit();
  assertTrue(group.isDeclaredMember(user));
  assertFalse(group2.isDeclaredMember(user));
  assertFalse(group3.isDeclaredMember(user));
  assertTrue(group2.isMember(user));
  assertTrue(group3.isMember(user));
  Boolean isDeclaredMember=null;
  assertEquals(isDeclaredMember,group.isDeclaredMember(group2));
  isDeclaredMember=null;
  assertEquals(isDeclaredMember,group3.isDeclaredMember(group));
  Boolean isMember=null;
  assertEquals(isMember,group.isMember(group2));
  isMember=null;
  assertEquals(isMember,group3.isMember(group));
  root.commit();
  assertFalse(group.isMember(user));
  assertTrue(group.isMember(group2));
  assertTrue(group3.isMember(group2));
  assertTrue(group3.isMember(group));
  assertTrue(group3.isMember(user));
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembersContentStructure() throws RepositoryException, CommitFailedException {
  int size=new MembershipWriter().getMembershipSizeThreshold() * 5;
  List<String> memberUuids=new ArrayList<String>();
  for (int i=0; i < size; i++) {
    Authorizable user=createNewAuthorizable(false);
    String uuid=TreeUtil.getString(root.getTree(user.getPath()),JcrConstants.JCR_UUID);
    memberUuids.add(uuid);
    group.addMember(user);
  }
  root.commit();
  Tree groupTree=root.getTree(group.getPath());
  Iterator<String> values=groupTree.getProperty(UserConstants.REP_MEMBERS).getValue(Type.STRINGS).iterator();
  while (values.hasNext()) {
    assertTrue(memberUuids.remove(values.next()));
  }
  assertFalse(memberUuids.isEmpty());
  assertTrue(memberUuids.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritedMembership() throws RepositoryException, CommitFailedException {
  group.addMember(group2);
  group.addMember(group3);
  group3.addMember(user);
  root.commit();
  Set<Group> groups=null;
  Iterator<Group> groupIterator=user.memberOf();
  while (groupIterator.hasNext()) {
    Group gr=groupIterator.next();
    assertTrue(groups.remove(gr));
  }
  assertTrue(groups.isEmpty());
  Set<Authorizable> expectedMembers=null;
  Iterator<Authorizable> memberIterator=group.getMembers();
  while (memberIterator.hasNext()) {
    assertTrue(expectedMembers.remove(memberIterator.next()));
  }
  assertTrue(expectedMembers.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.MembershipProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMembersAgain() throws Exception {
  Set<String> members=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    members.add(usr.getID());
  }
  root.commit();
  for (  String id : members) {
    assertFalse(grp.addMember(userMgr.getAuthorizable(id)));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManyMemberships() throws Exception {
  Set<String> memberships=new HashSet<String>();
  User usr=createUser();
  for (int i=0; i < NUM_GROUPS; i++) {
    Group grp=createGroup();
    grp.addMember(usr);
    memberships.add(grp.getID());
  }
  root.commit();
  Iterator<Group> iter=usr.declaredMemberOf();
  while (iter.hasNext()) {
    Group group=iter.next();
    Assert.assertTrue(memberships.remove(group.getID()));
  }
  assertEquals(0,memberships.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMembersAgainOnMembershipProvider() throws Exception {
  Set<String> memberPaths=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    memberPaths.add(usr.getPath());
  }
  root.commit();
  MembershipProvider mp=userMgr.getMembershipProvider();
  Tree groupTree=root.getTree(grp.getPath());
  for (  String path : memberPaths) {
    Tree memberTree=root.getTree(path);
    assertFalse(mp.addMember(groupTree,memberTree));
    assertFalse(mp.addMember(groupTree,TreeUtil.getString(memberTree,JcrConstants.JCR_UUID)));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManyMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    members.add(usr.getID());
  }
  root.commit();
  checkMembers(grp,members);
  Tree tree=root.getTree(grp.getPath());
  assertEquals("rep:members property must have correct number of references",SIZE_TH,tree.getProperty(UserConstants.REP_MEMBERS).count());
  Tree membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertTrue("rep:memberList must exist",membersList.exists());
  assertEquals("rep:memberList must have correct primary type.",UserConstants.NT_REP_MEMBER_REFERENCES_LIST,membersList.getProperty(JcrConstants.JCR_PRIMARYTYPE).getValue(Type.STRING));
  assertEquals("rep:memberList must have correct number of child nodes.",(NUM_USERS / SIZE_TH) - 1,membersList.getChildrenCount(Long.MAX_VALUE));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  Set<String> declaredMembers=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < 10; i++) {
    Group g1=createGroup();
    grp.addMember(g1);
    members.add(g1.getID());
    declaredMembers.add(g1.getID());
    for (int j=0; j < 10; j++) {
      Group g2=createGroup();
      g1.addMember(g2);
      members.add(g2.getID());
      for (int k=0; k < 10; k++) {
        User usr=createUser();
        g2.addMember(usr);
        members.add(usr.getID());
      }
    }
  }
  root.commit();
  checkMembers(grp,members);
  Iterator<Authorizable> iter=grp.getDeclaredMembers();
  while (iter.hasNext()) {
    Authorizable member=iter.next();
    Assert.assertTrue(declaredMembers.remove(member.getID()));
  }
  assertEquals(0,declaredMembers.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  String[] users=new String[NUM_USERS];
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    members.add(usr.getID());
    users[i]=usr.getID();
  }
  root.commit();
  for (int i=0; i < SIZE_TH; i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.remove(users[i]);
    grp.removeMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  Tree tree=root.getTree(grp.getPath());
  assertNull("rep:members property not exist",tree.getProperty(UserConstants.REP_MEMBERS));
  for (int i=0; i < SIZE_TH / 2; i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.add(users[i]);
    grp.addMember(auth);
  }
  root.commit();
  assertEquals("rep:members property must have correct number of references",SIZE_TH / 2,tree.getProperty(UserConstants.REP_MEMBERS).count());
  checkMembers(grp,members);
  for (int i=2 * SIZE_TH; i < (3 * SIZE_TH); i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.remove(users[i]);
    grp.removeMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  Tree membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertFalse("the first overflow node must not exist",membersList.getChild("1").exists());
  for (int i=2 * SIZE_TH; i < (3 * SIZE_TH); i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.add(users[i]);
    grp.addMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertTrue("the first overflow node must not exist",membersList.getChild("1").exists());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedMemberships() throws Exception {
  Set<String> memberships=new HashSet<String>();
  User user=createUser();
  Group grp=createGroup();
  memberships.add(grp.getID());
  for (int i=0; i < 10; i++) {
    Group g1=createGroup();
    grp.addMember(g1);
    memberships.add(g1.getID());
    for (int j=0; j < 10; j++) {
      Group g2=createGroup();
      g1.addMember(g2);
      memberships.add(g2.getID());
      g2.addMember(user);
    }
  }
  root.commit();
  Iterator<Group> iter=user.memberOf();
  while (iter.hasNext()) {
    Group group=iter.next();
    Assert.assertTrue(memberships.remove(group.getID()));
  }
  assertEquals(0,memberships.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordExpiryAndForceInitialChangeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangePasswordReset() throws Exception {
  User user=getTestUser();
  user.changePassword(userId);
  root.commit();
  PropertyState p=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  long newModTime=p.getValue(Type.LONG);
  assertTrue(newModTime > 0);
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  a.authenticate(new SimpleCredentials(userId,userId.toCharArray()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCreateUser() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    assertFalse(root.getTree(user.getPath()).hasChild(UserConstants.REP_PWD));
    assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordExpiryHistoryTest </h4><pre class="type-9 type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticatePasswordExpiredAndValidationFailure() throws Exception {
  User user=getTestUser();
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).setProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED,0);
  root.commit();
  try {
    a.authenticate(new SimpleCredentials(userId,userId.toCharArray()));
    fail("Credentials should be expired");
  }
 catch (  CredentialExpiredException e) {
    SimpleCredentials pwChangeCreds=new SimpleCredentials(userId,userId.toCharArray());
    try {
      pwChangeCreds.setAttribute(UserConstants.CREDENTIALS_ATTRIBUTE_NEWPASSWORD,"2");
      a.authenticate(pwChangeCreds);
      fail("User password changed in spite of expected validation failure");
    }
 catch (    CredentialExpiredException c) {
      assertNull(pwChangeCreds.getAttribute(PasswordHistoryException.class.getSimpleName()));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticatePasswordExpiredAndSame() throws Exception {
  User user=getTestUser();
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).setProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED,0);
  root.commit();
  try {
    a.authenticate(new SimpleCredentials(userId,userId.toCharArray()));
    fail("Credentials should be expired");
  }
 catch (  CredentialExpiredException e) {
    SimpleCredentials pwChangeCreds=new SimpleCredentials(userId,userId.toCharArray());
    try {
      pwChangeCreds.setAttribute(UserConstants.CREDENTIALS_ATTRIBUTE_NEWPASSWORD,user.getID());
      a.authenticate(pwChangeCreds);
      fail("User password changed in spite of enabled pw history");
    }
 catch (    CredentialExpiredException c) {
      Object attr=pwChangeCreds.getAttribute(PasswordHistoryException.class.getSimpleName());
      assertEquals("credentials should contain pw change failure reason","New password is identical to the current password.",attr);
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticatePasswordExpiredAndInHistory() throws Exception {
  User user=getTestUser();
  user.changePassword("pw12345678");
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).setProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED,0);
  root.commit();
  try {
    a.authenticate(new SimpleCredentials(userId,"pw12345678".toCharArray()));
    fail("Credentials should be expired");
  }
 catch (  CredentialExpiredException e) {
    SimpleCredentials pwChangeCreds=new SimpleCredentials(userId,"pw12345678".toCharArray());
    try {
      pwChangeCreds.setAttribute(UserConstants.CREDENTIALS_ATTRIBUTE_NEWPASSWORD,user.getID());
      a.authenticate(pwChangeCreds);
      fail("User password changed in spite of enabled pw history");
    }
 catch (    CredentialExpiredException c) {
      Object attr=pwChangeCreds.getAttribute(PasswordHistoryException.class.getSimpleName());
      assertEquals("credentials should contain pw change failure reason","New password was found in password history.",attr);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordExpiryTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangePassword() throws Exception {
  User user=getTestUser();
  PropertyState p1=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  long oldModTime=p1.getValue(Type.LONG,0);
  assertTrue(oldModTime > 0);
  waitForSystemTimeIncrement(oldModTime);
  user.changePassword(userId);
  root.commit();
  PropertyState p2=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  long newModTime=p2.getValue(Type.LONG,0);
  assertTrue(newModTime > oldModTime);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    Tree pwdTree=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD);
    assertTrue(pwdTree.exists());
    assertTrue(TreeUtil.isNodeType(pwdTree,UserConstants.NT_REP_PASSWORD,root.getTree(NodeTypeConstants.NODE_TYPES_PATH)));
    ReadOnlyNodeTypeManager ntMgr=ReadOnlyNodeTypeManager.getInstance(root,getNamePathMapper());
    assertTrue(ntMgr.getDefinition(pwdTree.getParent(),pwdTree).isProtected());
    PropertyState property=pwdTree.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
    assertNotNull(property);
    assertEquals(Type.LONG,property.getType());
    assertTrue(property.getValue(Type.LONG,0) > 0);
    assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordForceInitialPasswordChangeTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCreateUser() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    assertFalse(root.getTree(user.getPath()).hasChild(UserConstants.REP_PWD));
    assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePassword() throws Exception {
  User user=getTestUser();
  PropertyState p1=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  assertNull(p1);
  user.changePassword(userId);
  root.commit();
  PropertyState p2=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  assertNotNull(p2);
  assertTrue(p2.getValue(Type.LONG) > 0);
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  a.authenticate(new SimpleCredentials(userId,userId.toCharArray()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordHistoryTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHistoryMaxSize() throws Exception {
  User user=getTestUser();
  for (  String pw : PASSWORDS) {
    user.changePassword(pw);
    root.commit();
  }
  assertEquals(10,getHistory(user).size());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSingleTypeHistoryProperty() throws Exception {
  Tree userTree=root.getTree(getTestUser().getPath());
  Tree pwdNode=new NodeUtil(userTree).getOrAddChild(REP_PWD,NT_REP_PASSWORD).getTree();
  pwdNode.setProperty(REP_PWD_HISTORY,"singleValuedProperty");
  assertFalse(pwdNode.getProperty(REP_PWD_HISTORY).isArray());
  assertFalse(pwdNode.getProperty(REP_PWD_HISTORY).getType().isArray());
  PasswordHistory history=new PasswordHistory(CONFIG);
  assertTrue(history.updatePasswordHistory(userTree,"anyOtherPassword"));
  assertTrue(pwdNode.getProperty(REP_PWD_HISTORY).isArray());
  assertTrue(pwdNode.getProperty(REP_PWD_HISTORY).getType().isArray());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDisabledPasswordHistory() throws Exception {
  User user=getTestUser();
  Tree userTree=root.getTree(user.getPath());
  List<ConfigurationParameters> configs=ImmutableList.of(ConfigurationParameters.EMPTY,ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,PASSWORD_HISTORY_DISABLED_SIZE),ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,-1),ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,Integer.MIN_VALUE));
  for (  ConfigurationParameters config : configs) {
    PasswordHistory disabledHistory=new PasswordHistory(config);
    assertFalse(isEnabled(disabledHistory));
    assertFalse(disabledHistory.updatePasswordHistory(userTree,user.getID()));
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoHistoryUpdateOnViolation() throws Exception {
  User user=getTestUser();
  try {
    user.changePassword("abc");
    user.changePassword("def");
    user.changePassword("abc");
    fail("history violation not detected");
  }
 catch (  ConstraintViolationException e) {
    String[] expected=new String[]{user.getID(),"abc"};
    int i=0;
    for (    String pwHash : getHistory(user)) {
      assertTrue(PasswordUtil.isSame(pwHash,expected[i++]));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigurationChange() throws Exception {
  User user=getTestUser();
  Tree userTree=root.getTree(user.getPath());
  PasswordHistory history=new PasswordHistory(CONFIG);
  for (  String pw : PASSWORDS) {
    assertTrue(history.updatePasswordHistory(userTree,pw));
  }
  assertEquals(10,getHistory(user).size());
  history=new PasswordHistory(ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,5));
  List<String> oldPwds=getHistory(user);
  assertEquals(10,oldPwds.size());
  Iterables.skip(oldPwds,6);
  history.updatePasswordHistory(userTree,oldPwds.iterator().next());
  assertEquals(5,getHistory(user).size());
  history=new PasswordHistory(CONFIG);
  history.updatePasswordHistory(userTree,"newPwd");
  assertEquals(6,getHistory(user).size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHistoryWithSinglePasswordChange() throws Exception {
  User user=getTestUser();
  String oldPassword=TreeUtil.getString(root.getTree(user.getPath()),REP_PASSWORD);
  user.changePassword("newPwd");
  root.commit();
  assertTrue(root.getTree(user.getPath()).hasChild(REP_PWD));
  Tree pwTree=root.getTree(user.getPath()).getChild(REP_PWD);
  assertTrue(pwTree.hasProperty(REP_PWD_HISTORY));
  List<String> history=getHistory(user);
  assertEquals(1,history.size());
  assertEquals(oldPassword,history.iterator().next());
  String currentPw=TreeUtil.getString(root.getTree(user.getPath()),REP_PASSWORD);
  assertNotSame(currentPw,oldPassword);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEnableDisable() throws Exception {
  User user=getTestUser();
  Tree userTree=root.getTree(user.getPath());
  PasswordHistory history=new PasswordHistory(CONFIG);
  for (  String pw : PASSWORDS) {
    assertTrue(history.updatePasswordHistory(userTree,pw));
  }
  assertEquals(10,getHistory(user).size());
  history=new PasswordHistory(ConfigurationParameters.EMPTY);
  history.updatePasswordHistory(userTree,PASSWORDS[8]);
  assertEquals(10,getHistory(user).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RandomAuthorizableNodeNameTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGenerateNodeName(){
  String nodeName=nameGenerator.generateNodeName(id);
  assertFalse("id".equals(nodeName));
  assertEquals(RandomAuthorizableNodeName.DEFAULT_LENGTH,nodeName.length());
  assertFalse(nodeName.equals(nameGenerator.generateNodeName(id)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.ResetExpiredPasswordTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeWithNonStringAttribute() throws Exception {
  try {
    authenticate(userId,new Long(1));
    fail("Authentication with non-string attribute should fail.");
  }
 catch (  CredentialExpiredException e) {
  }
 finally {
    Tree userTree=root.getTree(getTestUser().getPath());
    assertTrue(PasswordUtil.isSame(userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING),userId));
    assertEquals(0,userTree.getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getValue(Type.LONG).longValue());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeWithWrongPw() throws Exception {
  try {
    authenticate("wrongPw","newPw");
    fail("Authentication with wrong expired password should fail and should not reset pw.");
  }
 catch (  LoginException e) {
  }
 finally {
    Tree userTree=root.getTree(getTestUser().getPath());
    assertTrue(PasswordUtil.isSame(userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING),userId));
    assertEquals(0,userTree.getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getValue(Type.LONG).longValue());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPasswordChangePersisted() throws Exception {
  authenticate(userId,"newPw");
  Root rootBasedOnSeparateSession=login(getAdminCredentials()).getLatestRoot();
  Tree userTree=rootBasedOnSeparateSession.getTree(getTestUser().getPath());
  assertTrue(PasswordUtil.isSame(userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING),"newPw"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.SystemUserImplTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasNoPassword() throws Exception {
  user=createUser(null);
  Tree userTree=root.getTree(user.getPath());
  assertFalse(userTree.hasProperty(UserConstants.REP_PASSWORD));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentials() throws Exception {
  user=createUser(null);
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof UserIdCredentials);
  UserIdCredentials impl=(UserIdCredentials)creds;
  assertEquals(uid,impl.getUserId());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserTree() throws Exception {
  user=createUser(null);
  Tree t=root.getTree(user.getPath());
  assertFalse(t.hasProperty(UserConstants.REP_PASSWORD));
  assertEquals(UserConstants.NT_REP_SYSTEM_USER,TreeUtil.getPrimaryTypeName(t));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithRelativePath2() throws Exception {
  user=createUser(UserConstants.DEFAULT_SYSTEM_RELATIVE_PATH + "/any/path");
  assertNotNull(user.getID());
  assertTrue(user.getPath().contains("any/path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddToGroup() throws Exception {
  user=createUser(null);
  Group g=null;
  try {
    g=userMgr.createGroup("testGroup");
    g.addMember(user);
    root.commit();
    assertTrue(g.isMember(user));
    assertTrue(g.isDeclaredMember(user));
    boolean isMemberOfG=false;
    Iterator<Group> groups=user.declaredMemberOf();
    while (groups.hasNext() && !isMemberOfG) {
      if (g.getID().equals(groups.next().getID())) {
        isMemberOfG=true;
      }
    }
    assertTrue(isMemberOfG);
  }
  finally {
    if (g != null) {
      g.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test asserting that {@link AuthorizableAction#onCreate(User,String,Root,NamePathMapper)}is omitted upon calling {@link UserManager#createSystemUser(String,String)}.
 */
@Test public void testOnCreateOmitted() throws Exception {
  user=createUser(null);
  Tree t=root.getTree(user.getPath());
  assertFalse(t.hasChild(AccessControlConstants.REP_POLICY));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserAuthenticationFactoryImplTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthentication() throws Exception {
  Authentication authentication=factory.getAuthentication(getUserConfiguration(),root,userId);
  assertNotNull(authentication);
  assertTrue(authentication instanceof UserAuthentication);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserAuthenticationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAuthenticateCannotResolveUser() throws Exception {
  SimpleCredentials sc=new SimpleCredentials("unknownUser","pw".toCharArray());
  Authentication a=new UserAuthentication(getUserConfiguration(),root,sc.getUserID());
  assertFalse(a.authenticate(sc));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserConfigurationImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidators(){
  UserConfigurationImpl configuration=new UserConfigurationImpl(getSecurityProvider());
  List<? extends ValidatorProvider> validators=configuration.getValidators(adminSession.getWorkspaceName(),Collections.<Principal>emptySet(),new MoveTracker());
  assertEquals(2,validators.size());
  List<String> clNames=Lists.newArrayList(UserValidatorProvider.class.getName(),CacheValidatorProvider.class.getName());
  for (  ValidatorProvider vp : validators) {
    clNames.remove(vp.getClass().getName());
  }
  assertTrue(clNames.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentialsUserWithoutPassword() throws Exception {
  user=userMgr.createUser(uid,null);
  root.commit();
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof UserIdCredentials);
  assertEquals(uid,((UserIdCredentials)creds).getUserId());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentials() throws Exception {
  user=userMgr.createUser(uid,uid);
  root.commit();
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof CredentialsImpl);
  CredentialsImpl cImpl=(CredentialsImpl)creds;
  assertEquals(uid,cImpl.getUserId());
  assertTrue(PasswordUtil.isSame(cImpl.getPasswordHash(),uid));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserInitializerTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnonymous() throws Exception {
  Authorizable a=userMgr.getAuthorizable(UserUtil.getAnonymousId(config));
  assertFalse(a.isGroup());
  User anonymous=(User)a;
  assertFalse(anonymous.isAdmin());
  assertFalse(anonymous.getPrincipal() instanceof AdminPrincipal);
  assertTrue(anonymous.getPrincipal() instanceof TreeBasedPrincipal);
  assertEquals(anonymous.getID(),anonymous.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserIndexDefinitions() throws Exception {
  Tree oakIndex=root.getTree('/' + IndexConstants.INDEX_DEFINITIONS_NAME);
  assertTrue(oakIndex.exists());
  Tree id=oakIndex.getChild("authorizableId");
  assertIndexDefinition(id,UserConstants.REP_AUTHORIZABLE_ID,true);
  Tree princName=oakIndex.getChild("principalName");
  assertIndexDefinition(princName,UserConstants.REP_PRINCIPAL_NAME,true);
  Iterable<String> declaringNtNames=TreeUtil.getStrings(princName,IndexConstants.DECLARING_NODE_TYPES);
  assertArrayEquals(new String[]{UserConstants.NT_REP_AUTHORIZABLE},Iterables.toArray(declaringNtNames,String.class));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdminUser() throws Exception {
  Authorizable a=userMgr.getAuthorizable(UserUtil.getAdminId(config));
  assertFalse(a.isGroup());
  User admin=(User)a;
  assertTrue(admin.isAdmin());
  assertTrue(admin.getPrincipal() instanceof AdminPrincipal);
  assertTrue(admin.getPrincipal() instanceof TreeBasedPrincipal);
  assertEquals(admin.getID(),admin.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 The anonymous user is optional.
 */
@Test public void testAnonymousConfiguration() throws Exception {
  Map<String,Object> userParams=new HashMap();
  userParams.put(UserConstants.PARAM_ANONYMOUS_ID,"");
  ConfigurationParameters params=ConfigurationParameters.of(UserConfiguration.NAME,ConfigurationParameters.of(userParams));
  SecurityProvider sp=new SecurityProviderImpl(params);
  final ContentRepository repo=new Oak().with(new InitialContent()).with(new PropertyIndexEditorProvider()).with(new PropertyIndexProvider()).with(new TypeEditorProvider()).with(sp).createContentRepository();
  ContentSession cs=Subject.doAs(SystemSubject.INSTANCE,new PrivilegedExceptionAction<ContentSession>(){
    @Override public ContentSession run() throws Exception {
      return repo.login(null,null);
    }
  }
);
  try {
    Root root=cs.getLatestRoot();
    UserConfiguration uc=sp.getConfiguration(UserConfiguration.class);
    UserManager umgr=uc.getUserManager(root,NamePathMapper.DEFAULT);
    Authorizable anonymous=umgr.getAuthorizable(UserConstants.DEFAULT_ANONYMOUS_ID);
    assertNull(anonymous);
  }
  finally {
    cs.close();
  }
  ContentSession anonymousSession=null;
  try {
    anonymousSession=repo.login(new GuestCredentials(),null);
    fail();
  }
 catch (  LoginException e) {
  }
 finally {
    if (anonymousSession != null) {
      anonymousSession.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserContent() throws Exception {
  Authorizable a=userMgr.getAuthorizable(UserUtil.getAdminId(config));
  assertTrue(root.getTree(a.getPath()).exists());
  a=userMgr.getAuthorizable(UserUtil.getAnonymousId(config));
  assertTrue(root.getTree(a.getPath()).exists());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 The configuration defines if the password of the
 * admin user is being set.
 */
@Test public void testAdminConfiguration() throws Exception {
  Map<String,Object> userParams=new HashMap();
  userParams.put(UserConstants.PARAM_ADMIN_ID,"admin");
  userParams.put(UserConstants.PARAM_OMIT_ADMIN_PW,true);
  ConfigurationParameters params=ConfigurationParameters.of(UserConfiguration.NAME,ConfigurationParameters.of(userParams));
  SecurityProvider sp=new SecurityProviderImpl(params);
  final ContentRepository repo=new Oak().with(new InitialContent()).with(new PropertyIndexEditorProvider()).with(new PropertyIndexProvider()).with(new TypeEditorProvider()).with(sp).createContentRepository();
  ContentSession cs=Subject.doAs(SystemSubject.INSTANCE,new PrivilegedExceptionAction<ContentSession>(){
    @Override public ContentSession run() throws Exception {
      return repo.login(null,null);
    }
  }
);
  try {
    Root root=cs.getLatestRoot();
    UserConfiguration uc=sp.getConfiguration(UserConfiguration.class);
    UserManager umgr=uc.getUserManager(root,NamePathMapper.DEFAULT);
    Authorizable adminUser=umgr.getAuthorizable("admin");
    assertNotNull(adminUser);
    Tree adminTree=root.getTree(adminUser.getPath());
    assertTrue(adminTree.exists());
    assertNull(adminTree.getProperty(UserConstants.REP_PASSWORD));
  }
  finally {
    cs.close();
  }
  ContentSession adminSession=null;
  try {
    adminSession=repo.login(new SimpleCredentials("admin",new char[0]),null);
    fail();
  }
 catch (  LoginException e) {
  }
 finally {
    if (adminSession != null) {
      adminSession.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testBuildInUserExist() throws Exception {
  assertNotNull(userMgr.getAuthorizable(UserUtil.getAdminId(config)));
  assertNotNull(userMgr.getAuthorizable(UserUtil.getAnonymousId(config)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserManagerImplTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test related to OAK-1922: Asserting that the default behavior is such that
 * no rep:pwd node is created upon user-creation.
 * @since Oak 1.1
 */
@Test public void testNewUserHasNoPwdNode() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    Assert.assertFalse(root.getTree(user.getPath()).hasChild(UserConstants.REP_PWD));
    Assert.assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindWithNullValue() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null);
  assertTrue(result.hasNext());
  result=userMgr.findAuthorizables("./" + UserConstants.REP_PRINCIPAL_NAME,null);
  assertTrue(result.hasNext());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPassword() throws Exception {
  User user=userMgr.createUser(testUserId,"pw");
  root.commit();
  List<String> pwds=new ArrayList<String>();
  pwds.add("pw");
  pwds.add("");
  pwds.add("{sha1}pw");
  Tree userTree=root.getTree(user.getPath());
  for (  String pw : pwds) {
    userMgr.setPassword(userTree,testUserId,pw,true);
    String pwHash=userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING);
    assertNotNull(pwHash);
    assertTrue(PasswordUtil.isSame(pwHash,pw));
  }
  for (  String pw : pwds) {
    userMgr.setPassword(userTree,testUserId,pw,false);
    String pwHash=userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING);
    assertNotNull(pwHash);
    if (!pw.startsWith("{")) {
      assertTrue(PasswordUtil.isSame(pwHash,pw));
    }
 else {
      assertFalse(PasswordUtil.isSame(pwHash,pw));
      assertEquals(pw,pwHash);
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetPasswordHash() throws Exception {
  User user=userMgr.createUser(testUserId,null);
  root.commit();
  Tree userTree=root.getTree(user.getPath());
  assertNull(userTree.getProperty(UserConstants.REP_PASSWORD));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserPrincipalProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreeBasedUserPrincipal() throws Exception {
  User user=getTestUser();
  Principal principal=principalProvider.getPrincipal(user.getPrincipal().getName());
  assertTrue(principal instanceof TreeBasedPrincipal);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreeBasedGroupPrincipal() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(group.getPrincipal().getName());
    assertTrue(principal instanceof AbstractGroupPrincipal);
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreeBasedSystemUserPrincipal() throws Exception {
  User systemUser=getUserManager(root).createSystemUser("systemUser" + UUID.randomUUID(),null);
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(systemUser.getPrincipal().getName());
    assertTrue(principal instanceof SystemUserPrincipalImpl);
  }
  finally {
    systemUser.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupMembers() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  group.addMember(getTestUser());
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(group.getPrincipal().getName());
    assertTrue(principal instanceof java.security.acl.Group);
    boolean found=false;
    Enumeration<? extends Principal> members=((java.security.acl.Group)principal).members();
    while (members.hasMoreElements() && !found) {
      found=members.nextElement().equals(getTestUser().getPrincipal());
    }
    assertTrue(found);
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupIsMember() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  group.addMember(getTestUser());
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(group.getPrincipal().getName());
    assertTrue(principal instanceof java.security.acl.Group);
    ((java.security.acl.Group)principal).isMember(getTestUser().getPrincipal());
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserPrincipalProviderWithCacheTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLongOverflow() throws Exception {
  long[] maxCache=new long[]{Long.MAX_VALUE,Long.MAX_VALUE - 1,Long.MAX_VALUE - 10000};
  Root systemRoot=getSystemSession().getLatestRoot();
  for (  long exp : maxCache) {
    changeUserConfiguration(ConfigurationParameters.of(UserPrincipalProvider.PARAM_CACHE_EXPIRATION,exp));
    PrincipalProvider pp=createPrincipalProvider(systemRoot);
    pp.getPrincipals(userId);
    Tree userTree=systemRoot.getTree(getTestUser().getPath());
    Tree cache=userTree.getChild(CacheConstants.REP_CACHE);
    assertTrue(cache.exists());
    PropertyState propertyState=cache.getProperty(CacheConstants.REP_EXPIRATION);
    assertNotNull(propertyState);
    assertEquals(Long.MAX_VALUE,propertyState.getValue(Type.LONG).longValue());
    cache.remove();
    systemRoot.commit();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMembershipChange() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  UserManager uMgr=getUserManager(root);
  Group gr=uMgr.getAuthorizable(groupId,Group.class);
  assertTrue(gr.removeMember(uMgr.getAuthorizable(userId)));
  root.commit();
  systemRoot.refresh();
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertEquals(principals,principalsAgain);
  changeUserConfiguration(ConfigurationParameters.EMPTY);
  pp=createPrincipalProvider(systemRoot);
  assertPrincipals(pp.getPrincipals(userId),EveryonePrincipal.getInstance(),getTestUser().getPrincipal());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrincipalsForGroups() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(testGroup.getID());
  assertTrue(principals.isEmpty());
  principals=pp.getPrincipals(testGroup2.getID());
  assertTrue(principals.isEmpty());
  root.refresh();
  Tree principalCache=getCacheTree(root,testGroup.getPath());
  assertFalse(principalCache.exists());
  principalCache=getCacheTree(root,testGroup2.getPath());
  assertFalse(principalCache.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetGroupMembershipForGroups() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getGroupMembership(testGroup.getPrincipal());
  assertPrincipals(principals,EveryonePrincipal.getInstance());
  principals=pp.getGroupMembership(testGroup2.getPrincipal());
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root,testGroup.getPath());
  assertFalse(principalCache.exists());
  principalCache=getCacheTree(root,testGroup2.getPath());
  assertFalse(principalCache.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetGroupMembershipPopulatesCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getGroupMembership(getTestUser().getPrincipal());
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrincipalManagerGetGroupMembershipPopulatesCache() throws Exception {
  PrincipalManager principalManager=getPrincipalManager(systemRoot);
  PrincipalIterator principalIterator=principalManager.getGroupMembership(getTestUser().getPrincipal());
  assertPrincipals(ImmutableSet.copyOf(principalIterator),EveryonePrincipal.getInstance(),testGroup.getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupPrincipalNameEscape() throws Exception {
  String gId=null;
  try {
    Principal groupPrincipal=new PrincipalImpl(groupId + ",,%,%%");
    Group gr=getUserManager(root).createGroup(groupPrincipal);
    gId=gr.getID();
    gr.addMember(getTestUser());
    root.commit();
    systemRoot.refresh();
    PrincipalProvider pp=createPrincipalProvider(systemRoot);
    Set<? extends Principal> principals=pp.getPrincipals(userId);
    assertTrue(principals.contains(groupPrincipal));
    principals=pp.getPrincipals(userId);
    assertTrue(principals.contains(groupPrincipal));
  }
  finally {
    root.refresh();
    if (gId != null) {
      getUserManager(root).getAuthorizable(gId).remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMissingExpiration() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertTrue(getCacheTree(systemRoot).exists());
  Tree cache=getCacheTree(systemRoot);
  cache.removeProperty(CacheConstants.REP_EXPIRATION);
  systemRoot.commit(CacheValidatorProvider.asCommitAttributes());
  assertFalse(getCacheTree(systemRoot).hasProperty(CacheConstants.REP_EXPIRATION));
  pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertTrue(principals.equals(principalsAgain));
  cache=getCacheTree(systemRoot);
  assertTrue(cache.hasProperty(CacheConstants.REP_EXPIRATION));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipalsPopulatesCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCacheUpdate() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertTrue(getCacheTree(systemRoot).exists());
  UserManager uMgr=getUserConfiguration().getUserManager(systemRoot,namePathMapper);
  Group gr=uMgr.getAuthorizable(groupId,Group.class);
  assertTrue(gr.removeMember(uMgr.getAuthorizable(userId)));
  systemRoot.commit();
  Tree cache=getCacheTree(systemRoot);
  cache.setProperty(CacheConstants.REP_EXPIRATION,2);
  systemRoot.commit(CacheValidatorProvider.asCommitAttributes());
  pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertFalse(principals.equals(principalsAgain));
  assertPrincipals(principalsAgain,EveryonePrincipal.getInstance(),getTestUser().getPrincipal());
  cache=getCacheTree(systemRoot);
  assertNotSame(2,new NodeUtil(cache).getLong(CacheConstants.REP_EXPIRATION,2));
  assertEquals("",TreeUtil.getString(cache,CacheConstants.REP_GROUP_PRINCIPAL_NAMES));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExtractPrincipalsFromCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertEquals(principals,principalsAgain);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserProviderTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroup() throws RepositoryException {
  UserProvider up=createUserProvider();
  Tree groupTree=up.createGroup("group1",null);
  assertNotNull(groupTree);
  assertTrue(Text.isDescendant(defaultGroupPath,groupTree.getPath()));
  int level=defaultConfig.getConfigValue(UserConstants.PARAM_DEFAULT_DEPTH,UserConstants.DEFAULT_DEPTH) + 1;
  assertEquals(defaultGroupPath,Text.getRelativeParent(groupTree.getPath(),level));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithPath() throws Exception {
  UserProvider up=createUserProvider(1);
  Tree userTree=up.createUser("nadine","a/b/c");
  assertNotNull(userTree);
  assertTrue(Text.isDescendant(customUserPath,userTree.getPath()));
  String userPath=customUserPath + "/a/b/c/nadine";
  assertEquals(userPath,userTree.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizableByPath() throws Exception {
  UserProvider up=createUserProvider();
  Tree user=up.createUser("shams",null);
  Tree a=up.getAuthorizableByPath(user.getPath());
  assertNotNull(a);
  assertEquals(user.getPath(),a.getPath());
  Tree group=up.createGroup("devs",null);
  a=up.getAuthorizableByPath(group.getPath());
  assertNotNull(a);
  assertEquals(group.getPath(),a.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupWithPath() throws Exception {
  UserProvider up=createUserProvider(4);
  Tree group=up.createGroup("authors","a/b/c");
  assertNotNull(group);
  assertTrue(Text.isDescendant(customGroupPath,group.getPath()));
  String groupPath=customGroupPath + "/a/b/c/authors";
  assertEquals(groupPath,group.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIllegalChars() throws Exception {
  UserProvider userProvider=createUserProvider();
  Map<String,String> m=new HashMap<String,String>();
  m.put("z[x]","/z/" + Text.escapeIllegalJcrChars("z[") + '/'+ Text.escapeIllegalJcrChars("z[x]"));
  m.put("z*x","/z/" + Text.escapeIllegalJcrChars("z*") + '/'+ Text.escapeIllegalJcrChars("z*x"));
  m.put("z/x","/z/" + Text.escapeIllegalJcrChars("z/") + '/'+ Text.escapeIllegalJcrChars("z/x"));
  m.put("%\r|",'/' + Text.escapeIllegalJcrChars("%") + '/'+ Text.escapeIllegalJcrChars("%\r")+ '/'+ Text.escapeIllegalJcrChars("%\r|"));
  for (  String uid : m.keySet()) {
    Tree user=userProvider.createUser(uid,null);
    root.commit();
    assertEquals(defaultUserPath + m.get(uid),user.getPath());
    assertEquals(uid,UserUtil.getAuthorizableId(user));
    Tree ath=userProvider.getAuthorizable(uid);
    assertNotNull("Tree with id " + uid + " must exist.",ath);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateWithCustomDepth() throws Exception {
  UserProvider userProvider=createUserProvider(3);
  Tree userTree=userProvider.createUser("b",null);
  assertEquals(customUserPath + "/b/bb/bbb/b",userTree.getPath());
  Map<String,String> m=new HashMap<String,String>();
  m.put("bb","/b/bb/bbb/bb");
  m.put("bbb","/b/bb/bbb/bbb");
  m.put("bbbb","/b/bb/bbb/bbbb");
  m.put("bL","/b/bL/bLL/bL");
  m.put("bLbh","/b/bL/bLb/bLbh");
  m.put("b_Lb","/b/b_/b_L/b_Lb");
  m.put("basiL","/b/ba/bas/basiL");
  for (  String uid : m.keySet()) {
    userTree=userProvider.createUser(uid,null);
    assertEquals(customUserPath + m.get(uid),userTree.getPath());
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizable() throws Exception {
  UserProvider up=createUserProvider();
  String userID="hannah";
  String groupID="cLevel";
  Tree user=up.createUser(userID,null);
  Tree group=up.createGroup(groupID,null);
  root.commit();
  Tree a=up.getAuthorizable(userID);
  assertNotNull(a);
  assertEquals(user.getPath(),a.getPath());
  a=up.getAuthorizable(groupID);
  assertNotNull(a);
  assertEquals(group.getPath(),a.getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAuthorizableId() throws Exception {
  UserProvider up=createUserProvider();
  String userID="Amanda";
  Tree user=up.createUser(userID,null);
  assertEquals(userID,UserUtil.getAuthorizableId(user));
  String groupID="visitors";
  Tree group=up.createGroup(groupID,null);
  assertEquals(groupID,UserUtil.getAuthorizableId(group));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCollisions() throws Exception {
  ConfigurationParameters config=ConfigurationParameters.of(UserConstants.PARAM_AUTHORIZABLE_NODE_NAME,new AuthorizableNodeName(){
    @Nonnull @Override public String generateNodeName(    @Nonnull String authorizableId){
      return "aaa";
    }
  }
);
  UserProvider up=new UserProvider(root,config);
  try {
    Tree u1=up.createUser("a",null);
    assertEquals("aaa",u1.getName());
    Tree u2=up.createUser("b",null);
    assertEquals("aaa1",u2.getName());
    Tree u3=up.createUser("c",null);
    assertEquals("aaa2",u3.getName());
    Tree u4=up.createUser("d",null);
    assertEquals("aaa3",u4.getName());
  }
  finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws Exception {
  UserProvider up=createUserProvider();
  Tree userTree=up.createUser("user1",null);
  assertNotNull(userTree);
  assertTrue(Text.isDescendant(defaultUserPath,userTree.getPath()));
  int level=defaultConfig.getConfigValue(UserConstants.PARAM_DEFAULT_DEPTH,UserConstants.DEFAULT_DEPTH) + 1;
  assertEquals(defaultUserPath,Text.getRelativeParent(userTree.getPath(),level));
  userTree=up.createUser("b",null);
  assertEquals(defaultUserPath + "/b/bb/b",userTree.getPath());
  Map<String,String> m=new HashMap<String,String>();
  m.put("bb","/b/bb/bb");
  m.put("bbb","/b/bb/bbb");
  m.put("bbbb","/b/bb/bbbb");
  m.put("bh","/b/bh/bh");
  m.put("bHbh","/b/bH/bHbh");
  m.put("b_Hb","/b/b_/b_Hb");
  m.put("basim","/b/ba/basim");
  for (  String uid : m.keySet()) {
    userTree=up.createUser(uid,null);
    assertEquals(defaultUserPath + m.get(uid),userTree.getPath());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserValidatorTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void hiddenNodeChanged() throws CommitFailedException {
  UserValidatorProvider provider=new UserValidatorProvider(getConfig());
  MemoryNodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child(":hidden");
  NodeState root=builder.getNodeState();
  NodeBuilder test=root.builder().child("test");
  NodeBuilder hidden=test.child(":hidden");
  hidden.child("added");
  Validator validator=provider.getRootValidator(root,builder.getNodeState(),CommitInfo.EMPTY);
  Validator childValidator=validator.childNodeChanged("test",root.getChildNode("test"),test.getNodeState());
  assertNotNull(childValidator);
  Validator hiddenValidator=childValidator.childNodeChanged(":hidden",root.getChildNode("test").getChildNode(":hidden"),hidden.getNodeState());
  assertNull(hiddenValidator);
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void hiddenNodeAdded() throws CommitFailedException {
  UserValidatorProvider provider=new UserValidatorProvider(getConfig());
  MemoryNodeStore store=new MemoryNodeStore();
  NodeState root=store.getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder test=builder.child("test");
  NodeBuilder hidden=test.child(":hidden");
  Validator validator=provider.getRootValidator(root,builder.getNodeState(),CommitInfo.EMPTY);
  Validator childValidator=validator.childNodeAdded("test",test.getNodeState());
  assertNotNull(childValidator);
  Validator hiddenValidator=childValidator.childNodeAdded(":hidden",hidden.getNodeState());
  assertNull(hiddenValidator);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak 1.0 cyclic group membership added in a single set of transient
 * modifications must be detected upon save.
 */
@Test public void testDetectCyclicMembership() throws Exception {
  Group group1=null;
  Group group2=null;
  Group group3=null;
  UserManager userMgr=getUserManager(root);
  try {
    group1=userMgr.createGroup("group1");
    group2=userMgr.createGroup("group2");
    group3=userMgr.createGroup("group3");
    group1.addMember(group2);
    group2.addMember(group3);
    assertFalse(group3.addMember(group1));
    Tree group3Tree=root.getTree(group3.getPath());
    Set<String> values=Collections.singleton(root.getTree(group1.getPath()).getProperty(JcrConstants.JCR_UUID).getValue(Type.STRING));
    PropertyState prop=PropertyStates.createProperty(REP_MEMBERS,values,Type.WEAKREFERENCES);
    group3Tree.setProperty(prop);
    root.commit();
    fail("Cyclic group membership must be detected");
  }
 catch (  CommitFailedException e) {
  }
 finally {
    if (group1 != null)     group1.remove();
    if (group2 != null)     group2.remove();
    if (group3 != null)     group3.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void hiddenNodeDeleted() throws CommitFailedException {
  UserValidatorProvider provider=new UserValidatorProvider(getConfig());
  MemoryNodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child(":hidden");
  NodeState root=builder.getNodeState();
  builder=root.builder();
  NodeBuilder test=builder.child("test");
  test.child(":hidden").remove();
  Validator validator=provider.getRootValidator(root,builder.getNodeState(),CommitInfo.EMPTY);
  Validator childValidator=validator.childNodeChanged("test",root.getChildNode("test"),test.getNodeState());
  assertNotNull(childValidator);
  Validator hiddenValidator=childValidator.childNodeDeleted(":hidden",root.getChildNode("test").getChildNode(":hidden"));
  assertNull(hiddenValidator);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.autosave.AuthorizableByTypeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupByIdAndType() throws Exception {
  Group g=mgr.getAuthorizable(group.getID(),Group.class);
  assertTrue(g instanceof GroupImpl);
  Authorizable auth=mgr.getAuthorizable(group.getID(),group.getClass());
  assertTrue(auth instanceof GroupImpl);
  auth=mgr.getAuthorizable(group.getID(),Authorizable.class);
  assertTrue(auth instanceof AuthorizableImpl);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserByIdAndType() throws Exception {
  User u=mgr.getAuthorizable(user.getID(),User.class);
  assertTrue(u instanceof UserImpl);
  Authorizable auth=mgr.getAuthorizable(user.getID(),user.getClass());
  assertTrue(auth instanceof UserImpl);
  auth=mgr.getAuthorizable(user.getID(),Authorizable.class);
  assertTrue(auth instanceof AuthorizableImpl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.autosave.AutoSaveEnabledManagerTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeclaredMemberOf() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  assertTrue(g.addMember(u));
  Iterator<Group> groups=u.declaredMemberOf();
  assertTrue(groups.hasNext());
  Group gAgain=groups.next();
  assertTrue(gAgain instanceof GroupImpl);
  assertTrue(gAgain.removeMember(u));
  assertFalse(root.hasPendingChanges());
  assertFalse(u.declaredMemberOf().hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testImpersonation() throws Exception {
  User u=mgr.createUser("u","u");
  Impersonation imp=u.getImpersonation();
  Principal p=mgr.getAuthorizable("anonymous").getPrincipal();
  assertTrue(imp.grantImpersonation(p));
  assertFalse(root.hasPendingChanges());
  assertTrue(imp.revokeImpersonation(p));
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroup() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  assertTrue(g.addMember(u));
  assertFalse(root.hasPendingChanges());
  assertTrue(g.isDeclaredMember(u));
  Iterator<Authorizable> it=g.getDeclaredMembers();
  if (it.hasNext()) {
    Authorizable a=it.next();
    assertTrue(a instanceof AuthorizableImpl);
    a.setProperty("prop",getValueFactory().createValue("blub"));
    assertFalse(root.hasPendingChanges());
  }
  it=g.getMembers();
  if (it.hasNext()) {
    Authorizable a=it.next();
    assertTrue(a instanceof AuthorizableImpl);
    a.setProperty("prop",getValueFactory().createValue("blub"));
    assertFalse(root.hasPendingChanges());
  }
  assertTrue(g.removeMember(u));
  assertFalse(root.hasPendingChanges());
  assertFalse(g.isDeclaredMember(u));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizable() throws RepositoryException {
  Authorizable a=mgr.getAuthorizable(UserConstants.DEFAULT_ANONYMOUS_ID);
  assertNotNull(a);
  assertTrue(a instanceof AuthorizableImpl);
  assertTrue(a instanceof UserImpl);
  a=mgr.getAuthorizableByPath(a.getPath());
  assertNotNull(a);
  assertTrue(a instanceof AuthorizableImpl);
  assertTrue(a instanceof UserImpl);
  a=mgr.getAuthorizable(a.getPrincipal());
  assertNotNull(a);
  assertTrue(a instanceof AuthorizableImpl);
  assertTrue(a instanceof UserImpl);
  assertNull(mgr.getAuthorizable("unknown"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMemberOf() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  assertTrue(g.addMember(u));
  Iterator<Group> groups=u.memberOf();
  assertTrue(groups.hasNext());
  Group gAgain=groups.next();
  assertTrue(gAgain instanceof GroupImpl);
  assertTrue(gAgain.removeMember(u));
  assertFalse(root.hasPendingChanges());
  assertFalse(u.declaredMemberOf().hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveMembers() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  g.addMember(u);
  assertTrue(g.removeMembers(u.getID()).isEmpty());
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUser() throws Exception {
  User u=mgr.createUser("u","u");
  u.disable("disabled");
  assertTrue(u.isDisabled());
  assertFalse(root.hasPendingChanges());
  u.disable(null);
  assertFalse(u.isDisabled());
  assertFalse(root.hasPendingChanges());
  u.changePassword("t");
  assertFalse(root.hasPendingChanges());
  u.changePassword("tt","t");
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.query.UserQueryManagerTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testFindNodesExact() throws Exception {
  Value vs=valueFactory.createValue("value \\, containing backslash");
  user.setProperty(propertyName,vs);
  root.commit();
  try {
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value \\, containing backslash",AuthorizableType.USER,true);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesNonExactWithApostrophe() throws Exception {
  Value vs=valueFactory.createValue("value ' with apostrophe");
  try {
    user.setProperty(propertyName,vs);
    root.commit();
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value ' with apostrophe",AuthorizableType.USER,false);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesExactWithApostrophe() throws Exception {
  Value vs=valueFactory.createValue("value ' with apostrophe");
  try {
    user.setProperty(propertyName,vs);
    root.commit();
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value ' with apostrophe",AuthorizableType.USER,true);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesNonExact() throws Exception {
  Value vs=valueFactory.createValue("value \\, containing backslash");
  user.setProperty(propertyName,vs);
  root.commit();
  try {
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value \\, containing backslash",AuthorizableType.USER,false);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.AbstractBlobStoreTest </h4><pre class="type-13 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteFile() throws Exception {
  store.setBlockSize(1024 * 1024);
  byte[] data=new byte[4 * 1024 * 1024];
  Random r=new Random(0);
  r.nextBytes(data);
  String tempFileName="target/temp/test";
  File tempFile=new File(tempFileName);
  tempFile.getParentFile().mkdirs();
  OutputStream out=new FileOutputStream(tempFile,false);
  out.write(data);
  out.close();
  String s=store.writeBlob(tempFileName);
  assertEquals(data.length,store.getBlobLength(s));
  byte[] buff=new byte[1];
  for (int i=0; i < data.length; i+=1024) {
    store.readBlob(s,i,buff,0,1);
    assertEquals(data[i],buff[0]);
  }
  try {
    store.writeBlob(tempFileName + "_wrong");
    fail();
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCombinedIdentifier() throws Exception {
  String id=store.writeBlob(new ByteArrayInputStream(new byte[2]));
  assertEquals(2,store.getBlobLength(id));
  String combinedId=id + id;
  assertEquals(4,store.getBlobLength(combinedId));
  doTestRead(new byte[4],4,combinedId);
}

</code></pre>

<br>
<pre class="type-6 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void downloadCallback() throws Exception {
  assumeTrue(supportsStatsCollection());
  TestCollector collector=new TestCollector();
  setupCollector(collector);
  int size=10 * 1024;
  String id=store.writeBlob(randomStream(42,size));
  store.clearCache();
  collector.reset();
  InputStream is=store.getInputStream(id);
  CountingOutputStream cos=new CountingOutputStream(new NullOutputStream());
  IOUtils.copy(is,cos);
  is.close();
  assertEquals(size,cos.getCount());
  assertCollectedSize(collector.size,size);
  assertEquals(1,collector.downloadCount);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteCount() throws Exception {
  Set<String> ids=createArtifacts();
  long count=store.countDeleteChunks(Lists.newArrayList(ids),0);
  Iterator<String> iter=store.getAllChunkIds(0);
  Set<String> ret=Sets.newHashSet();
  while (iter.hasNext()) {
    ret.add(iter.next());
  }
  assertTrue(ret.toString(),ret.isEmpty());
  assertEquals(ids.size(),count);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGarbageCollection() throws Exception {
  HashMap<String,byte[]> map=new HashMap<String,byte[]>();
  ArrayList<String> mem=new ArrayList<String>();
  int count;
  for (int i=1; i <= 1000; i*=10) {
    byte[] data=new byte[i];
    String id;
    id=store.writeBlob(new ByteArrayInputStream(data));
    map.put(new String(id),data);
    mem.add(id);
    data=new byte[i];
    Arrays.fill(data,(byte)1);
    id=store.writeBlob(new ByteArrayInputStream(data));
    map.put(new String(id),data);
    mem.add(id);
  }
  store.startMark();
  store.sweep();
  for (  String id : map.keySet()) {
    byte[] test=readFully(id);
    assertTrue(Arrays.equals(map.get(id),test));
  }
  mem.clear();
  store.clearInUse();
  store.startMark();
  for (  String id : map.keySet()) {
    byte[] d=map.get(id);
    if (d[0] != 0) {
      continue;
    }
    if (store instanceof AbstractBlobStore) {
      ((AbstractBlobStore)store).mark(id);
    }
 else {
      store.getBlobLength(id);
    }
  }
  count=store.sweep();
  store.clearInUse();
  store.clearCache();
  try {
    Thread.sleep(1);
  }
 catch (  InterruptedException e) {
  }
  store.startMark();
  count=store.sweep();
  assertTrue("count: " + count,count > 0);
  int failedCount=0;
  for (  String id : map.keySet()) {
    long length=store.getBlobLength(id);
    try {
      readFully(id);
    }
 catch (    Exception e) {
      assertTrue(id + ":" + length,length > store.getBlockSizeMin());
      failedCount++;
    }
  }
  assertTrue("failedCount: " + failedCount,failedCount > 0);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyIdentifier() throws Exception {
  byte[] data=new byte[1];
  assertEquals(-1,store.readBlob("",0,data,0,1));
  assertEquals(0,store.getBlobLength(""));
}

</code></pre>

<br>
<pre class="type-6 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReference() throws Exception {
  assumeThat(store,instanceOf(AbstractBlobStore.class));
  AbstractBlobStore abs=(AbstractBlobStore)store;
  Random r=new Random();
  byte[] key=new byte[256];
  r.nextBytes(key);
  abs.setReferenceKey(key);
  byte[] data=new byte[1000];
  r.nextBytes(data);
  String blobId=store.writeBlob(new ByteArrayInputStream(data));
  String reference=store.getReference(blobId);
  String blobId2=store.getBlobId(reference);
  assertEquals(blobId,blobId2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.ConcurrentBlobTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-1599") @Test public void test() throws Exception {
  final AtomicInteger id=new AtomicInteger();
  Concurrent.run("blob",new Concurrent.Task(){
    @Override public void call() throws Exception {
      int i=id.getAndIncrement();
      ByteArrayOutputStream out=new ByteArrayOutputStream();
      IOUtils.writeLong(out,i);
      out.write(EMPTY);
      byte[] data=out.toByteArray();
      String id=store.writeBlob(new ByteArrayInputStream(data));
      Assert.assertEquals(58,store.getBlobLength(id));
      byte[] test=out.toByteArray();
      Assert.assertEquals(8,store.readBlob(id,0,test,0,8));
      Assert.assertTrue(Arrays.equals(data,test));
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.split.SplitBlobStoreTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsMigrated() throws IOException {
  for (  String id : oldBlobIds) {
    assertFalse(splitBlobStore.isMigrated(id));
  }
  for (  String id : newBlobIds) {
    assertTrue(splitBlobStore.isMigrated(id));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReferences() throws IOException {
  for (  String id : oldBlobIds) {
    String reference=splitBlobStore.getReference(id);
    assertEquals(id,splitBlobStore.getBlobId(reference));
  }
  for (  String id : newBlobIds) {
    String reference=splitBlobStore.getReference(id);
    assertEquals(id,splitBlobStore.getBlobId(reference));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLength() throws IOException {
  for (  String id : oldBlobIds) {
    assertEquals(LENGTH,splitBlobStore.getBlobLength(id));
  }
  for (  String id : newBlobIds) {
    assertEquals(LENGTH,newBlobStore.getBlobLength(id));
    assertEquals(LENGTH,splitBlobStore.getBlobLength(id));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.commit.MoveTrackerTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotEmpty(){
  MoveTracker mt=new MoveTracker();
  mt.addMove("/a/b/c","/d/e/f");
  assertFalse(mt.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 1.   >/a:/b >/c:/d     =  >/c:/d >/a:b
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 222
 */
@Test public void test1(){
  MoveTracker mt=new MoveTracker();
  mt.addMove("/a","/b");
  mt.addMove("/c","/d");
  assertEquals("/a",mt.getSourcePath("/b"));
  assertEquals("/c",mt.getSourcePath("/d"));
  assertEquals("/b",mt.getDestPath("/a"));
  assertEquals("/d",mt.getDestPath("/c"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIndependantMoves(){
  Map<String,String> m=ImmutableMap.of("/a/b/c","/d/e/f","/aa/bb/cc","/aa/f/cc");
  MoveTracker mt=new MoveTracker();
  for (  String src : m.keySet()) {
    String dest=m.get(src);
    mt.addMove(src,dest);
  }
  for (  String src : m.keySet()) {
    String dest=m.get(src);
    assertEquals(src,mt.getSourcePath(dest));
    assertEquals(dest,mt.getDestPath(src));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 14.  >/a:/b >/c:/b/d   =  >/c:/a/d >/a:/b
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 240
 */
@Test public void test14(){
  MoveTracker mt5=new MoveTracker();
  mt5.addMove("/a","/b");
  mt5.addMove("/c","/b/d");
  assertEquals("/a",mt5.getSourcePath("/b"));
  assertEquals("/c",mt5.getSourcePath("/b/d"));
  assertEquals("/b",mt5.getDestPath("/a"));
  assertEquals("/b/d",mt5.getDestPath("/c"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 11.  >/a:/b >/b:/c     =  >/a:/c
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 236
 */
@Test public void test11(){
  MoveTracker mt=new MoveTracker();
  mt.addMove("/a","/b");
  mt.addMove("/b","/c");
  assertEquals("/a",mt.getSourcePath("/c"));
  assertEquals("/c",mt.getDestPath("/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 7.   >/a:/b >/c:/a        does not commute
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 231
 */
@Test public void test7(){
  MoveTracker mt3=new MoveTracker();
  mt3.addMove("/a","/b");
  mt3.addMove("/c","/a");
  assertEquals("/a",mt3.getSourcePath("/b"));
  assertEquals("/c",mt3.getSourcePath("/a"));
  assertEquals("/b",mt3.getDestPath("/a"));
  assertEquals("/a",mt3.getDestPath("/c"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * 12.  >/a:/b/c >/b:/d   =  >/b:/d >/a:/d/c
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 237
 */
@Test @Ignore("Known Limitation of OAK-710") public void test12(){
  MoveTracker mt4=new MoveTracker();
  mt4.addMove("/a","/b/c");
  mt4.addMove("/b","/d");
  assertEquals("/a",mt4.getSourcePath("/d/c"));
  assertEquals("/b",mt4.getSourcePath("/d"));
  assertEquals("/d/c",mt4.getDestPath("/a"));
  assertEquals("/d",mt4.getDestPath("/b"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleMove(){
  Map<String,String> moves=ImmutableMap.of("/a/b/c","/d/e/f","/aa/bb/cc","/aa/f/cc");
  for (  String src : moves.keySet()) {
    MoveTracker mt=new MoveTracker();
    String dest=moves.get(src);
    mt.addMove(src,dest);
    assertEquals(src,mt.getSourcePath(dest));
    assertEquals(dest,mt.getDestPath(src));
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 10.  >/a:/b >/b/c:/d   =  >/a/c:/d >/a:/b
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 234
 */
@Test public void test10(){
  MoveTracker mt=new MoveTracker();
  mt.addMove("/a","/b");
  mt.addMove("/b/c","/d");
  assertEquals("/a",mt.getSourcePath("/b"));
  assertEquals("/a/c",mt.getSourcePath("/d"));
  assertEquals("/b",mt.getDestPath("/a"));
  assertEquals("/d",mt.getDestPath("/a/c"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 4.   >/a/b:/c >/a:/d   =  >/a:/d >/d/b:/c
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 225
 */
@Test public void test4(){
  MoveTracker mt1=new MoveTracker();
  mt1.addMove("/a/b","/c");
  mt1.addMove("/a","/d");
  assertEquals("/a/b",mt1.getSourcePath("/c"));
  assertEquals("/a",mt1.getSourcePath("/d"));
  assertEquals("/c",mt1.getDestPath("/a/b"));
  assertEquals("/d",mt1.getDestPath("/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 4.   >/a/b:/c >/a:/c/d    does not commute  (q < s)
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 226
 */
@Test public void test4a(){
  MoveTracker mt2=new MoveTracker();
  mt2.addMove("/a/b","/c");
  mt2.addMove("/a","/c/d");
  assertEquals("/a/b",mt2.getSourcePath("/c"));
  assertEquals("/a",mt2.getSourcePath("/c/d"));
  assertEquals("/c",mt2.getDestPath("/a/b"));
  assertEquals("/c/d",mt2.getDestPath("/a"));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * 14.  >/a/b:/b >/a:/b/d    does not commute  (p > r)
 * See http://svn.apache.org/viewvc/jackrabbit/sandbox/jackrabbit-microkernel/src/main/java/org/apache/jackrabbit/state/ChangeLog.java?view=markup
 * Line 241
 */
@Test public void test14a(){
  MoveTracker mt6=new MoveTracker();
  mt6.addMove("/a/b","/b");
  mt6.addMove("/a","/b/d");
  assertEquals("/a/b",mt6.getSourcePath("/b"));
  assertEquals("/a",mt6.getSourcePath("/b/d"));
  assertEquals("/b",mt6.getDestPath("/a/b"));
  assertEquals("/b/d",mt6.getDestPath("/a"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.commit.SubtreeValidatorTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSubtreeValidator() throws CommitFailedException {
  Validator delegate=new FailingValidator();
  Validator validator=new SubtreeValidator(delegate,"one","two");
  assertNull(validator.childNodeAdded("zero",EMPTY_NODE));
  assertNull(validator.childNodeChanged("two",EMPTY_NODE,EMPTY_NODE));
  assertNull(validator.childNodeDeleted("foo",EMPTY_NODE));
  assertNotNull(validator.childNodeAdded("one",EMPTY_NODE));
  assertNotNull(validator.childNodeChanged("one",EMPTY_NODE,EMPTY_NODE));
  assertNotNull(validator.childNodeDeleted("one",EMPTY_NODE));
  validator=validator.childNodeChanged("one",EMPTY_NODE,EMPTY_NODE);
  assertNull(validator.childNodeAdded("zero",EMPTY_NODE));
  assertNull(validator.childNodeChanged("one",EMPTY_NODE,EMPTY_NODE));
  assertNull(validator.childNodeDeleted("foo",EMPTY_NODE));
  assertEquals(delegate,validator.childNodeAdded("two",EMPTY_NODE));
  assertEquals(delegate,validator.childNodeChanged("two",EMPTY_NODE,EMPTY_NODE));
  assertEquals(delegate,validator.childNodeDeleted("two",EMPTY_NODE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.query.PropertyStateValueTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compareDates(){
  Calendar d1, d2;
  PropertyValue v1, v2;
  d1=newCal(null);
  d2=newCal(d1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,GMT,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,GMT,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null);
  d2=newCal(d1,CET,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,CET,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,CET,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null);
  d2=newCal(d1,PST,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,PST,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,PST,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.CompositeConfigurationTest </h4><pre class="type-9 type-6 type-19 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetContext() throws Exception {
  Class cls=Class.forName(CompositeConfiguration.class.getName() + "$CompositeContext");
  Field def=cls.getDeclaredField("defaultCtx");
  def.setAccessible(true);
  Field delegatees=cls.getDeclaredField("delegatees");
  delegatees.setAccessible(true);
  Context ctx=compositeConfiguration.getContext();
  assertSame(cls,ctx.getClass());
  assertNull(delegatees.get(ctx));
  assertSame(Context.DEFAULT,def.get(ctx));
  SecurityConfiguration sc=new TestConfiguration();
  compositeConfiguration.setDefaultConfig(sc);
  ctx=compositeConfiguration.getContext();
  assertNull(delegatees.get(ctx));
  assertSame(sc.getContext(),def.get(ctx));
  assertSame(cls,ctx.getClass());
  compositeConfiguration.addConfiguration(sc);
  ctx=compositeConfiguration.getContext();
  assertNotSame(sc.getContext(),ctx);
  assertEquals(1,((Context[])delegatees.get(ctx)).length);
  SecurityConfiguration defConfig=new SecurityConfiguration.Default();
  compositeConfiguration.addConfiguration(defConfig);
  assertEquals(1,((Context[])delegatees.get(compositeConfiguration.getContext())).length);
  compositeConfiguration.addConfiguration(sc);
  assertEquals(1,((Context[])delegatees.get(compositeConfiguration.getContext())).length);
  SecurityConfiguration sc2=new TestConfiguration();
  compositeConfiguration.addConfiguration(sc2);
  assertEquals(2,((Context[])delegatees.get(compositeConfiguration.getContext())).length);
  compositeConfiguration.removeConfiguration(sc2);
  assertEquals(1,((Context[])delegatees.get(compositeConfiguration.getContext())).length);
  compositeConfiguration.removeConfiguration(sc);
  compositeConfiguration.removeConfiguration(sc);
  compositeConfiguration.removeConfiguration(defConfig);
  assertNull(delegatees.get(compositeConfiguration.getContext()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.ConfigurationParametersTest </h4><pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConversion2(){
  TestObject testObject=new TestObject("t");
  Integer int1000=1000;
  Map<String,Object> m=new HashMap<String,Object>();
  m.put("TEST",testObject);
  m.put("String","1000");
  m.put("Int2",1000);
  m.put("Int3",1000);
  ConfigurationParameters options=ConfigurationParameters.of(m);
  assertNotNull(options.getConfigValue("TEST",null,null));
  assertNotNull(options.getConfigValue("TEST",null,TestObject.class));
  assertEquals(testObject,options.getConfigValue("TEST",null,null));
  assertEquals(testObject,options.getConfigValue("TEST",null,TestObject.class));
  assertEquals(testObject,options.getConfigValue("TEST",testObject,null));
  assertEquals(testObject,options.getConfigValue("TEST",testObject,TestObject.class));
  assertEquals("t",options.getConfigValue("TEST","defaultString",null));
  assertEquals("t",options.getConfigValue("TEST","defaultString",String.class));
  assertEquals("1000",options.getConfigValue("String",null,null));
  assertEquals("1000",options.getConfigValue("String",null,String.class));
  assertEquals(int1000,options.getConfigValue("String",10,null));
  assertEquals(int1000,options.getConfigValue("String",10,Integer.class));
  assertEquals(new Long(1000),options.getConfigValue("String",10l,null));
  assertEquals(new Long(1000),options.getConfigValue("String",10l,Long.class));
  assertEquals("1000",options.getConfigValue("String","10",null));
  assertEquals("1000",options.getConfigValue("String","10",String.class));
  assertEquals(int1000,options.getConfigValue("Int2",null,null));
  assertEquals(int1000,options.getConfigValue("Int2",10,null));
  assertEquals("1000",options.getConfigValue("Int2","1000",null));
  assertEquals(1000,options.getConfigValue("Int3",null,null));
  assertEquals(int1000,options.getConfigValue("Int3",10,null));
  assertEquals("1000",options.getConfigValue("Int3","1000",null));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultValue(){
  TestObject obj=new TestObject("t");
  Integer int1000=1000;
  ConfigurationParameters options=ConfigurationParameters.EMPTY;
  assertEquals(obj,options.getConfigValue("missing",obj));
  assertEquals(int1000,options.getConfigValue("missing",int1000));
  assertNull(options.getConfigValue("missing",null,null));
  assertNull(options.getConfigValue("missing",null,String.class));
  assertEquals(obj,options.getConfigValue("missing",obj,null));
  assertEquals(obj,options.getConfigValue("missing",obj,TestObject.class));
  assertEquals(int1000,options.getConfigValue("missing",int1000,Integer.class));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNullValue2(){
  ConfigurationParameters options=ConfigurationParameters.of(Collections.singletonMap("test",null));
  assertNull(options.getConfigValue("test",null,null));
  assertNull(options.getConfigValue("test",null,TestObject.class));
  assertNull(options.getConfigValue("test","value",null));
  assertNull(options.getConfigValue("test","value",null));
  assertNull(options.getConfigValue("test",new TestObject("t"),null));
  assertNull(options.getConfigValue("test",false,null));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConfigValue(){
  Map<String,String> map=new HashMap<String,String>();
  map.put("o1","v");
  ConfigurationParameters options=ConfigurationParameters.of(map);
  assertEquals("v",options.getConfigValue("o1","v2"));
  assertEquals("v2",options.getConfigValue("missing","v2"));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConversionToSet(){
  String[] stringArray=new String[]{"a","b"};
  Set<String> stringSet=ImmutableSet.copyOf(stringArray);
  TestObject[] testObjectArray=new TestObject[]{new TestObject("a"),new TestObject("b")};
  Set<TestObject> testObjectSet=ImmutableSet.copyOf(testObjectArray);
  Map<Object,Set> configValues=new HashMap<Object,Set>();
  configValues.put("a",ImmutableSet.of("a"));
  configValues.put(stringArray,stringSet);
  configValues.put(stringSet,stringSet);
  configValues.put(testObjectArray,testObjectSet);
  configValues.put(testObjectSet,testObjectSet);
  configValues.put(new String[0],Collections.<String>emptySet());
  configValues.put(new HashSet(),Collections.emptySet());
  configValues.put(ImmutableSet.of(),Collections.emptySet());
  configValues.put(new ArrayList(),Collections.emptySet());
  configValues.put(ConfigurationParameters.EMPTY,Collections.<String>emptySet());
  Set<String> defaultStrings=ImmutableSet.of("abc","def","ghi");
  Set<TestObject> defaultObjects=ImmutableSet.of(new TestObject("abc"),new TestObject("def"));
  for (  Object value : configValues.keySet()) {
    ConfigurationParameters config;
    if (value instanceof ConfigurationParameters) {
      config=ConfigurationParameters.of((ConfigurationParameters)value);
    }
 else {
      config=ConfigurationParameters.of("key",value);
    }
    Set expected=configValues.get(value);
    assertEquals(expected,config.getConfigValue("key",Collections.emptySet()));
    assertEquals(expected,config.getConfigValue("key",Collections.<String>emptySet()));
    assertEquals(expected,config.getConfigValue("key",ImmutableSet.of()));
    assertEquals(expected,config.getConfigValue("key",Collections.emptySet(),Set.class));
    assertEquals(expected,config.getConfigValue("key",Collections.<String>emptySet(),Set.class));
    assertEquals(expected,config.getConfigValue("key",ImmutableSet.of(),Set.class));
    if (!config.containsKey("key")) {
      assertEquals(defaultStrings,config.getConfigValue("key",defaultStrings,Set.class));
      assertEquals(defaultObjects,config.getConfigValue("key",defaultObjects,Set.class));
      assertEquals(null,config.getConfigValue("key",null,Set.class));
      assertEquals(defaultStrings,config.getConfigValue("key",defaultStrings));
      assertEquals(defaultObjects,config.getConfigValue("key",defaultObjects));
    }
 else {
      assertEquals(expected,config.getConfigValue("key",defaultStrings,Set.class));
      assertEquals(expected,config.getConfigValue("key",defaultObjects,Set.class));
      assertEquals(expected,config.getConfigValue("key",null,Set.class));
      assertEquals(expected,config.getConfigValue("key",defaultStrings));
      assertEquals(expected,config.getConfigValue("key",defaultObjects));
    }
    assertEquals(defaultStrings,config.getConfigValue("nonexisting",defaultStrings));
    assertEquals(defaultStrings,config.getConfigValue("nonexisting",defaultStrings,Set.class));
    assertEquals(defaultObjects,config.getConfigValue("nonexisting",defaultObjects));
    assertEquals(defaultObjects,config.getConfigValue("nonexisting",defaultObjects,Set.class));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConversion(){
  TestObject testObject=new TestObject("t");
  Integer int1000=1000;
  Map<String,Object> m=new HashMap<String,Object>();
  m.put("TEST",testObject);
  m.put("String","1000");
  m.put("Int2",1000);
  m.put("Int3",1000);
  m.put("time0","1s");
  m.put("time1",1000);
  ConfigurationParameters options=ConfigurationParameters.of(m);
  assertEquals(testObject,options.getConfigValue("TEST",testObject));
  assertEquals("t",options.getConfigValue("TEST","defaultString"));
  assertTrue(1000 == options.getConfigValue("String",10,int.class));
  assertTrue(1000 == options.getConfigValue("String",10));
  assertEquals(int1000,options.getConfigValue("String",10));
  assertEquals(new Long(1000),options.getConfigValue("String",10l));
  assertEquals("1000",options.getConfigValue("String","10"));
  assertEquals(int1000,options.getConfigValue("Int2",10));
  assertEquals("1000",options.getConfigValue("Int2","1000"));
  assertEquals(int1000,options.getConfigValue("Int3",10));
  assertEquals("1000",options.getConfigValue("Int3","1000"));
  assertEquals(ConfigurationParameters.Milliseconds.of(1000),options.getConfigValue("time0",ConfigurationParameters.Milliseconds.NULL));
  assertEquals(ConfigurationParameters.Milliseconds.of(1000),options.getConfigValue("time1",ConfigurationParameters.Milliseconds.NULL));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConversionToStringArray(){
  String[] stringArray=new String[]{"a","b"};
  Set<String> stringSet=ImmutableSet.copyOf(stringArray);
  TestObject[] testObjectArray=new TestObject[]{new TestObject("a"),new TestObject("b")};
  Set<TestObject> testObjectSet=ImmutableSet.copyOf(testObjectArray);
  String[] defaultStrings=new String[]{"abc","def","ghi"};
  Map<Object,Object[]> configValues=new HashMap<Object,Object[]>();
  configValues.put("a",new String[]{"a"});
  configValues.put(stringArray,stringArray);
  configValues.put(stringSet,stringArray);
  configValues.put(testObjectArray,stringArray);
  configValues.put(testObjectSet,stringArray);
  configValues.put(new String[0],new String[0]);
  configValues.put(new HashSet(),new String[0]);
  configValues.put(ImmutableSet.of(),new String[0]);
  configValues.put(new ArrayList(),new String[0]);
  configValues.put(ConfigurationParameters.EMPTY,new String[0]);
  for (  Object value : configValues.keySet()) {
    ConfigurationParameters config;
    if (value instanceof ConfigurationParameters) {
      config=ConfigurationParameters.of((ConfigurationParameters)value);
    }
 else {
      config=ConfigurationParameters.of("key",value);
    }
    Object[] expected=configValues.get(value);
    assertArrayEquals(expected,config.getConfigValue("key",new String[0]));
    assertArrayEquals(expected,config.getConfigValue("key",new String[0],String[].class));
    if (!config.containsKey("key")) {
      assertArrayEquals(defaultStrings,config.getConfigValue("key",defaultStrings,String[].class));
      assertArrayEquals(null,config.getConfigValue("key",null,String[].class));
      assertArrayEquals(defaultStrings,config.getConfigValue("key",defaultStrings));
    }
 else {
      assertArrayEquals(expected,config.getConfigValue("key",defaultStrings,String[].class));
      assertArrayEquals(expected,config.getConfigValue("key",null,String[].class));
      assertArrayEquals(expected,config.getConfigValue("key",defaultStrings));
    }
    assertArrayEquals(defaultStrings,config.getConfigValue("nonexisting",defaultStrings));
    assertArrayEquals(defaultStrings,config.getConfigValue("nonexisting",defaultStrings,String[].class));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains(){
  ConfigurationParameters params=ConfigurationParameters.EMPTY;
  assertFalse(params.contains("some"));
  assertFalse(params.contains(""));
  Map<String,String> map=new HashMap<String,String>();
  map.put("key1","v");
  map.put("key2","v");
  params=ConfigurationParameters.of(map);
  assertTrue(params.contains("key1"));
  assertTrue(params.contains("key2"));
  assertFalse(params.contains("another"));
  assertFalse(params.contains(""));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreation(){
  ConfigurationParameters params=ConfigurationParameters.of(ConfigurationParameters.EMPTY,null,ConfigurationParameters.of("a","a"));
  assertFalse(params.isEmpty());
  assertEquals(1,params.size());
  assertTrue(params.contains("a"));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNullableConfigValue(){
  Map<String,String> map=new HashMap<String,String>();
  map.put("o1","v");
  ConfigurationParameters options=ConfigurationParameters.of(map);
  assertEquals("v",options.getConfigValue("o1",null,null));
  assertEquals("v",options.getConfigValue("o1",null,String.class));
  assertEquals("v",options.getConfigValue("o1","v2",null));
  assertEquals("v",options.getConfigValue("o1","v2",String.class));
  assertEquals("v2",options.getConfigValue("missing","v2",null));
  assertEquals("v2",options.getConfigValue("missing","v2",String.class));
  assertNull(options.getConfigValue("missing",null,null));
  assertNull(options.getConfigValue("missing",null,TestObject.class));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArrayDefaultValue2(){
  TestObject[] testArray=new TestObject[]{new TestObject("t")};
  TestObject[] result=ConfigurationParameters.EMPTY.getConfigValue("test",new TestObject[0],null);
  assertNotNull(result);
  assertEquals(0,result.length);
  assertArrayEquals(testArray,ConfigurationParameters.EMPTY.getConfigValue("test",testArray,null));
  assertArrayEquals(testArray,ConfigurationParameters.EMPTY.getConfigValue("test",testArray,TestObject[].class));
  ConfigurationParameters options=ConfigurationParameters.of("test",testArray);
  assertArrayEquals(testArray,(TestObject[])options.getConfigValue("test",null,null));
  assertArrayEquals(testArray,options.getConfigValue("test",null,TestObject[].class));
  assertArrayEquals(testArray,options.getConfigValue("test",new TestObject[]{new TestObject("s")},null));
  assertArrayEquals(testArray,options.getConfigValue("test",new TestObject[]{new TestObject("s")},TestObject[].class));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullValue(){
  ConfigurationParameters options=ConfigurationParameters.of(Collections.singletonMap("test",null));
  assertNull(options.getConfigValue("test",null));
  assertEquals("value",options.getConfigValue("test","value"));
  TestObject to=new TestObject("t");
  assertEquals(to,options.getConfigValue("test",to));
  assertFalse(options.getConfigValue("test",false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.PreAuthTest </h4><pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidSubjectWithCredentials() throws Exception {
  Set<SimpleCredentials> publicCreds=Collections.singleton(new SimpleCredentials("testUserId",new char[0]));
  final Subject subject=new Subject(false,principals,publicCreds,Collections.emptySet());
  ContentSession cs=Subject.doAsPrivileged(subject,new PrivilegedAction<ContentSession>(){
    @Override public ContentSession run(){
      try {
        return login(null);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
,null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    assertNotSame(AuthInfo.EMPTY,authInfo);
    assertEquals(principals,authInfo.getPrincipals());
    assertEquals("testUserId",authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidSubject() throws Exception {
  final Subject subject=new Subject(true,principals,Collections.emptySet(),Collections.emptySet());
  ContentSession cs=Subject.doAsPrivileged(subject,new PrivilegedAction<ContentSession>(){
    @Override public ContentSession run(){
      try {
        return login(null);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
,null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    assertNotSame(AuthInfo.EMPTY,authInfo);
    assertEquals(principals,authInfo.getPrincipals());
    assertNull(authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidReadSubjectWithCredentials() throws Exception {
  Set<SimpleCredentials> publicCreds=Collections.singleton(new SimpleCredentials("testUserId",new char[0]));
  final Subject subject=new Subject(true,principals,publicCreds,Collections.emptySet());
  ContentSession cs=Subject.doAsPrivileged(subject,new PrivilegedAction<ContentSession>(){
    @Override public ContentSession run(){
      try {
        return login(null);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
,null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    assertNotSame(AuthInfo.EMPTY,authInfo);
    assertEquals(principals,authInfo.getPrincipals());
    assertEquals("testUserId",authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemSubject() throws Exception {
  ContentSession cs=Subject.doAsPrivileged(SystemSubject.INSTANCE,new PrivilegedAction<ContentSession>(){
    @Override public ContentSession run(){
      try {
        return login(null);
      }
 catch (      Exception e) {
        return null;
      }
    }
  }
,null);
  try {
    AuthInfo authInfo=cs.getAuthInfo();
    assertNotSame(AuthInfo.EMPTY,authInfo);
    assertEquals(SystemSubject.INSTANCE.getPrincipals(),authInfo.getPrincipals());
    assertEquals(null,authInfo.getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.DefaultSyncHandlerTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiresSync() throws Exception {
  login(new SimpleCredentials(userId,new char[0])).close();
  root.refresh();
  ValueFactory valueFactory=new ValueFactoryImpl(root,NamePathMapper.DEFAULT);
  final Calendar nowCal=Calendar.getInstance();
  nowCal.setTimeInMillis(nowCal.getTimeInMillis() - 1000);
  Value nowValue=valueFactory.createValue(nowCal);
  UserManager userManager=getUserManager(root);
  Authorizable a=userManager.getAuthorizable(userId);
  a.setProperty(DefaultSyncContext.REP_LAST_SYNCED,nowValue);
  root.commit();
  SyncHandler mgr=syncManager.getSyncHandler("default");
  SyncedIdentity id=mgr.findIdentity(userManager,userId);
  assertNotNull("known authorizable should exist",id);
  assertTrue("synced id should require sync",mgr.requiresSync(id));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiresNoSync() throws Exception {
  login(new SimpleCredentials(userId,new char[0])).close();
  root.refresh();
  UserManager userManager=getUserManager(root);
  SyncHandler mgr=syncManager.getSyncHandler("default");
  SyncedIdentity id=mgr.findIdentity(userManager,userId);
  assertNotNull("known authorizable should exist",id);
  assertFalse("freshly synced id should not require sync",mgr.requiresSync(id));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testFindMissingIdentity() throws Exception {
  UserManager userManager=getUserManager(root);
  SyncHandler mgr=syncManager.getSyncHandler("default");
  SyncedIdentity id=mgr.findIdentity(userManager,"foobar");
  assertNull("unknown authorizable should not exist",id);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindExternalIdentity() throws Exception {
  login(new SimpleCredentials(userId,new char[0])).close();
  root.refresh();
  UserManager userManager=getUserManager(root);
  SyncHandler mgr=syncManager.getSyncHandler("default");
  SyncedIdentity id=mgr.findIdentity(userManager,userId);
  assertNotNull("known authorizable should exist",id);
  assertEquals("external user should have correct external ref.idp",idp.getName(),id.getExternalIdRef().getProviderName());
  assertEquals("external user should have correct external ref.id",userId,id.getExternalIdRef().getId());
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testFindLocalIdentity() throws Exception {
  UserManager userManager=getUserManager(root);
  SyncHandler mgr=syncManager.getSyncHandler("default");
  SyncedIdentity id=mgr.findIdentity(userManager,"admin");
  assertNotNull("known authorizable should exist",id);
  assertNull("local user should not have external ref",id.getExternalIdRef());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalIdentityRefTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetString(){
  String s=refNullProvider.getString();
  assertNotNull(s);
  assertFalse(USERID.equals(s));
  assertEquals("user%25id",s);
  s=refEmptyProvider.getString();
  assertNotNull(s);
  assertFalse(USERID.equals(s));
  assertEquals("user%25id",s);
  s=ref.getString();
  assertNotNull(s);
  assertEquals("user%25id;provider%3bName",s);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEquals(){
  assertTrue(refNullProvider.equals(refNullProvider));
  assertTrue(refNullProvider.equals(new ExternalIdentityRef(USERID,refNullProvider.getProviderName())));
  assertTrue(refNullProvider.equals(new ExternalIdentityRef(USERID,refEmptyProvider.getProviderName())));
  assertTrue(refNullProvider.equals(refEmptyProvider));
  assertTrue(refEmptyProvider.equals(refNullProvider));
  assertFalse(refNullProvider.equals(ref));
  assertFalse(ref.equals(refNullProvider));
  assertFalse(refNullProvider.equals(null));
  assertFalse(refNullProvider.equals(new ExternalIdentityRef("anotherId",null)));
  assertTrue(ref.equals(ref));
  assertTrue(ref.equals(new ExternalIdentityRef(ref.getId(),ref.getProviderName())));
  assertTrue(ref.equals(new ExternalIdentityRef(USERID,PROVIDER_NAME)));
  assertFalse(ref.equals(new ExternalIdentity(){
    @Nonnull @Override public ExternalIdentityRef getExternalId(){
      return ref;
    }
    @Nonnull @Override public String getId(){
      return ref.getId();
    }
    @Nonnull @Override public String getPrincipalName(){
      return ref.getId();
    }
    @CheckForNull @Override public String getIntermediatePath(){
      return null;
    }
    @Nonnull @Override public Iterable<ExternalIdentityRef> getDeclaredGroups() throws ExternalIdentityException {
      return ImmutableSet.of();
    }
    @Nonnull @Override public Map<String,?> getProperties(){
      return ImmutableMap.of();
    }
  }
));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFromString(){
  ExternalIdentityRef r=ExternalIdentityRef.fromString(refNullProvider.getString());
  assertEquals(refNullProvider,r);
  assertEquals(USERID,r.getId());
  assertEquals(refNullProvider.getString(),r.getString());
  assertNull(r.getProviderName());
  r=ExternalIdentityRef.fromString(refEmptyProvider.getString());
  assertEquals(refEmptyProvider,r);
  assertEquals(USERID,r.getId());
  assertEquals(refEmptyProvider.getString(),r.getString());
  assertNull(r.getProviderName());
  r=ExternalIdentityRef.fromString(ref.getString());
  assertEquals(ref,r);
  assertEquals(USERID,r.getId());
  assertEquals(PROVIDER_NAME,r.getProviderName());
  assertEquals(ref.getString(),r.getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalLoginModuleFactoryTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUser() throws Exception {
  setUpJaasFactoryWithInjection();
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalLoginModuleTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncUpdate() throws Exception {
  UserManager userManager=getUserManager(root);
  ExternalUser externalUser=idp.getUser(userId);
  Authorizable user=userManager.createUser(externalUser.getId(),null);
  user.setProperty("rep:externalId",new ValueFactoryImpl(root,NamePathMapper.DEFAULT).createValue(externalUser.getExternalId().getString()));
  root.commit();
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    for (    String prop : externalUser.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUserCaseInsensitive() throws Exception {
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId.toUpperCase(),new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testSyncCreateGroup() throws Exception {
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    for (    String id : new String[]{"a","b","c"}) {
      assertNotNull(userManager.getAuthorizable(id));
    }
    for (    String id : new String[]{"aa","aaa"}) {
      assertNull(userManager.getAuthorizable(id));
    }
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUser() throws Exception {
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.basic.DefaultSyncContextTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncUserById() throws Exception {
  ExternalIdentity externalId=idp.listUsers().next();
  SyncResult result=syncCtx.sync(externalId.getId());
  assertEquals(SyncResult.Status.NO_SUCH_AUTHORIZABLE,result.getStatus());
  syncCtx.sync(externalId);
  syncCtx.setForceUserSync(true);
  result=syncCtx.sync(externalId.getId());
  assertEquals(SyncResult.Status.UPDATE,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncGroupById() throws Exception {
  ExternalIdentity externalId=idp.listGroups().next();
  SyncResult result=syncCtx.sync(externalId.getId());
  assertEquals(SyncResult.Status.NO_SUCH_AUTHORIZABLE,result.getStatus());
  syncCtx.sync(externalId);
  syncCtx.setForceGroupSync(true);
  result=syncCtx.sync(externalId.getId());
  assertEquals(SyncResult.Status.UPDATE,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncByForeignId2() throws Exception {
  User u=getTestUser();
  setExternalID(u,"differentIDP");
  SyncResult result=syncCtx.sync(u.getID());
  assertEquals(SyncResult.Status.FOREIGN,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncAutoMembershipListsNonExistingGroup() throws Exception {
  config.user().setAutoMembership("nonExistingGroup");
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  assertEquals(SyncResult.Status.ADD,result.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncAutoMembership() throws Exception {
  Group gr=createTestGroup();
  config.user().setAutoMembership(gr.getID());
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  assertEquals(SyncResult.Status.ADD,result.getStatus());
  Authorizable a=getUserManager(root).getAuthorizable(result.getIdentity().getId());
  assertTrue(gr.isDeclaredMember(a));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncRemovedGroupWithMembers() throws Exception {
  Group gr=createTestGroup();
  gr.addMember(getTestUser());
  String groupId=gr.getID();
  setExternalID(gr,idp.getName());
  syncCtx.setKeepMissing(true);
  SyncResult result=syncCtx.sync(groupId);
  assertEquals(SyncResult.Status.NOP,result.getStatus());
  assertNotNull(getUserManager(root).getAuthorizable(groupId));
  syncCtx.setKeepMissing(false);
  result=syncCtx.sync(groupId);
  assertEquals(SyncResult.Status.NOP,result.getStatus());
  assertNotNull(getUserManager(root).getAuthorizable(groupId));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLostMembershipDifferentIDP() throws Exception {
  Group gr=createTestGroup();
  setExternalID(gr,"differentIDP");
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  User user=getUserManager(root).getAuthorizable(result.getIdentity().getId(),User.class);
  gr.addMember(user);
  root.commit();
  syncCtx.setForceUserSync(true);
  config.user().setMembershipExpirationTime(-1);
  config.user().setMembershipNestingDepth(1);
  assertEquals(SyncResult.Status.UPDATE,syncCtx.sync(user.getID()).getStatus());
  assertTrue(gr.isDeclaredMember(user));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncExternalUser() throws Exception {
  ExternalUser user=idp.listUsers().next();
  assertNotNull(user);
  SyncResult result=syncCtx.sync(user);
  assertEquals(SyncResult.Status.ADD,result.getStatus());
  result=syncCtx.sync(user);
  assertEquals(SyncResult.Status.NOP,result.getStatus());
  syncCtx.setForceUserSync(true);
  result=syncCtx.sync(user);
  assertEquals(SyncResult.Status.UPDATE,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncRemovedUserById() throws Exception {
  User u=getUserManager(root).createUser("test" + UUID.randomUUID(),null);
  String userId=u.getID();
  authorizableIds.add(userId);
  setExternalID(u,idp.getName());
  syncCtx.setKeepMissing(true);
  SyncResult result=syncCtx.sync(userId);
  assertEquals(SyncResult.Status.MISSING,result.getStatus());
  assertNotNull(getUserManager(root).getAuthorizable(userId));
  syncCtx.setKeepMissing(false);
  result=syncCtx.sync(userId);
  assertEquals(SyncResult.Status.DELETE,result.getStatus());
  assertNull(getUserManager(root).getAuthorizable(userId));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLostMembership() throws Exception {
  Group gr=createTestGroup();
  setExternalID(gr,idp.getName());
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  User user=getUserManager(root).getAuthorizable(result.getIdentity().getId(),User.class);
  gr.addMember(user);
  root.commit();
  syncCtx.setForceUserSync(true);
  config.user().setMembershipExpirationTime(-1);
  config.user().setMembershipNestingDepth(-1);
  syncCtx.sync(user.getID()).getStatus();
  assertTrue(gr.isDeclaredMember(user));
  config.user().setMembershipNestingDepth(1);
  assertEquals(SyncResult.Status.UPDATE,syncCtx.sync(user.getID()).getStatus());
  assertFalse(gr.isDeclaredMember(user));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncRemovedGroupById() throws Exception {
  Group gr=createTestGroup();
  String groupId=gr.getID();
  setExternalID(gr,idp.getName());
  syncCtx.setKeepMissing(true);
  SyncResult result=syncCtx.sync(groupId);
  assertEquals(SyncResult.Status.MISSING,result.getStatus());
  assertNotNull(getUserManager(root).getAuthorizable(groupId));
  syncCtx.setKeepMissing(false);
  result=syncCtx.sync(groupId);
  assertEquals(SyncResult.Status.DELETE,result.getStatus());
  assertNull(getUserManager(root).getAuthorizable(groupId));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncExternalGroup() throws Exception {
  ExternalGroup gr=idp.listGroups().next();
  assertNotNull(gr);
  SyncResult result=syncCtx.sync(gr);
  assertEquals(SyncResult.Status.ADD,result.getStatus());
  result=syncCtx.sync(gr);
  assertEquals(SyncResult.Status.NOP,result.getStatus());
  syncCtx.setForceGroupSync(true);
  result=syncCtx.sync(gr);
  assertEquals(SyncResult.Status.UPDATE,result.getStatus());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSyncByForeignId() throws Exception {
  SyncResult result=syncCtx.sync(getTestUser().getID());
  assertEquals(SyncResult.Status.FOREIGN,result.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.impl.jmx.SyncMBeanImplTest </h4><pre class="type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidSyncHandlerName(){
  SyncMBeanImpl syncMBean=new SyncMBeanImpl(REPOSITORY,syncMgr,"invalid",idpMgr,idp.getName());
  assertEquals("invalid",syncMBean.getSyncHandlerName());
  try {
    syncMBean.syncAllExternalUsers();
    fail("syncAllExternalUsers with invalid SyncHandlerName must fail");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.ACETest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAggregatePrivileges() throws Exception {
  ACE ace=createEntry(PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES);
  assertEquals(getBitsProvider().getBits(PrivilegeConstants.JCR_READ),ace.getPrivilegeBits());
  assertArrayEquals(privilegesFromNames(PrivilegeConstants.JCR_READ),ace.getPrivileges());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since OAK 1.0: support for multi-value restrictions
 */
@Test public void testGetRestrictionForMultiValued2() throws Exception {
  Restriction singleNameRestr=createRestriction(AccessControlConstants.REP_NT_NAMES,new Value[]{nameValue});
  ACE ace=createEntry(ImmutableSet.of(singleNameRestr));
  Value val=ace.getRestriction(AccessControlConstants.REP_NT_NAMES);
  assertEquals(nameValue,val);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivileges() throws RepositoryException {
  ACE entry=createEntry(new String[]{PrivilegeConstants.JCR_READ},true);
  Privilege[] privs=entry.getPrivileges();
  assertNotNull(privs);
  assertEquals(1,privs.length);
  assertEquals(privs[0],acMgr.privilegeFromName(PrivilegeConstants.JCR_READ));
  entry=createEntry(new String[]{PrivilegeConstants.REP_WRITE},true);
  privs=entry.getPrivileges();
  assertNotNull(privs);
  assertEquals(1,privs.length);
  assertEquals(privs[0],acMgr.privilegeFromName(PrivilegeConstants.REP_WRITE));
  entry=createEntry(new String[]{PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES},true);
  privs=entry.getPrivileges();
  assertNotNull(privs);
  assertEquals(2,privs.length);
  Privilege[] expected=AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES);
  assertEquals(ImmutableSet.copyOf(expected),ImmutableSet.copyOf(privs));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegeBits() throws RepositoryException {
  ACE entry=createEntry(new String[]{PrivilegeConstants.JCR_READ},true);
  PrivilegeBits bits=entry.getPrivilegeBits();
  assertNotNull(bits);
  assertEquals(bits,getBitsProvider().getBits(PrivilegeConstants.JCR_READ));
  entry=createEntry(new String[]{PrivilegeConstants.REP_WRITE},true);
  bits=entry.getPrivilegeBits();
  assertNotNull(bits);
  assertEquals(bits,getBitsProvider().getBits(PrivilegeConstants.REP_WRITE));
  entry=createEntry(new String[]{PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES},true);
  bits=entry.getPrivilegeBits();
  assertNotNull(bits);
  PrivilegeBits expected=getBitsProvider().getBits(PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES);
  assertEquals(expected,bits);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since oak 1.0 ACE doesn't validate privileges.
 */
@Test public void testUnknownPrivilege() throws Exception {
  Privilege invalidPriv=new Privilege(){
    public String getName(){
      return "";
    }
    public boolean isAbstract(){
      return false;
    }
    public boolean isAggregate(){
      return false;
    }
    public Privilege[] getDeclaredAggregatePrivileges(){
      return new Privilege[0];
    }
    public Privilege[] getAggregatePrivileges(){
      return new Privilege[0];
    }
  }
;
  Privilege[] privs=new Privilege[]{invalidPriv,acMgr.privilegeFromName(PrivilegeConstants.JCR_READ)};
  ACE entry=createEntry(testPrincipal,privs,true);
  assertEquals(getBitsProvider().getBits(PrivilegeConstants.JCR_READ),entry.getPrivilegeBits());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0: support for multi-value restrictions
 */
@Test public void testGetRestrictionsForSingleValue() throws Exception {
  Restriction globRestr=createRestriction(AccessControlConstants.REP_GLOB,globValue);
  ACE ace=createEntry(ImmutableSet.of(globRestr));
  Value[] vs=ace.getRestrictions(AccessControlConstants.REP_GLOB);
  assertNotNull(vs);
  assertArrayEquals(new Value[]{globValue},vs);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionForSingleValued() throws Exception {
  Restriction globRestr=createRestriction(AccessControlConstants.REP_GLOB,globValue);
  ACE ace=createEntry(ImmutableSet.of(globRestr));
  Value val=ace.getRestriction(AccessControlConstants.REP_GLOB);
  assertNotNull(val);
  assertEquals(globValue,val);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since OAK 1.0: support for multi-value restrictions
 */
@Test public void testGetRestrictionsForMultiValued2() throws Exception {
  Restriction singleNameRestr=createRestriction(AccessControlConstants.REP_NT_NAMES,new Value[]{nameValue});
  ACE ace=createEntry(ImmutableSet.of(singleNameRestr));
  Value[] vs=ace.getRestrictions(AccessControlConstants.REP_NT_NAMES);
  assertEquals(1,vs.length);
  assertEquals(nameValue,vs[0]);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @since OAK 1.0: support for multi-value restrictions
 */
@Test public void testGetRestrictionsForMultiValued() throws Exception {
  Restriction nameRestr=createRestriction(AccessControlConstants.REP_NT_NAMES,nameValues);
  ACE ace=createEntry(ImmutableSet.of(nameRestr));
  Value[] vs=ace.getRestrictions(AccessControlConstants.REP_NT_NAMES);
  assertEquals(2,vs.length);
  assertArrayEquals(nameValues,vs);
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipal() throws RepositoryException {
  ACE tmpl=createEntry(new String[]{PrivilegeConstants.JCR_READ},true);
  assertNotNull(tmpl.getPrincipal());
  assertEquals(testPrincipal.getName(),tmpl.getPrincipal().getName());
  assertSame(testPrincipal,tmpl.getPrincipal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.AbstractAccessControlListTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyAcl() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  assertNotNull(acl.getAccessControlEntries());
  assertNotNull(acl.getEntries());
  assertTrue(acl.getAccessControlEntries().length == 0);
  assertEquals(acl.getAccessControlEntries().length,acl.getEntries().size());
  assertEquals(0,acl.size());
  assertTrue(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionNames() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  String[] restrNames=acl.getRestrictionNames();
  assertNotNull(restrNames);
  List<String> names=Lists.newArrayList(restrNames);
  for (  RestrictionDefinition def : getRestrictionProvider().getSupportedRestrictions(getTestPath())) {
    assertTrue(names.remove(namePathMapper.getJcrName(def.getName())));
  }
  assertTrue(names.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEntries() throws RepositoryException {
  List<ACE> aces=createTestEntries();
  AbstractAccessControlList acl=createACL(aces);
  assertNotNull(acl.getEntries());
  assertNotNull(acl.getAccessControlEntries());
  assertEquals(aces.size(),acl.getEntries().size());
  assertEquals(aces.size(),acl.getAccessControlEntries().length);
  assertTrue(acl.getEntries().containsAll(aces));
  assertTrue(Arrays.asList(acl.getAccessControlEntries()).containsAll(aces));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionType() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  for (  RestrictionDefinition def : getRestrictionProvider().getSupportedRestrictions(getTestPath())) {
    int reqType=acl.getRestrictionType(namePathMapper.getJcrName(def.getName()));
    assertTrue(reqType > PropertyType.UNDEFINED);
    assertEquals(def.getRequiredType().tag(),reqType);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.ImmutableACLTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHashCode() throws Exception {
  RestrictionProvider rp=getRestrictionProvider();
  ACE ace1=createEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
  ACE ace2=createEntry(testPrincipal,testPrivileges,true);
  ACE ace2b=createEntry(testPrincipal,getAggregatedPrivileges(testPrivileges),true);
  JackrabbitAccessControlList acl=createACL(ace1,ace2);
  JackrabbitAccessControlList repoAcl=createACL((String)null,ace1,ace2);
  int hc=acl.hashCode();
  assertTrue(hc == createACL(ace1,ace2).hashCode());
  assertTrue(hc == createACL(ace1,ace2b).hashCode());
  assertTrue(repoAcl.hashCode() == createACL((String)null,ace1,ace2b).hashCode());
  assertFalse(hc == createACL(ace2,ace1).hashCode());
  assertFalse(hc == repoAcl.hashCode());
  assertFalse(hc == createEmptyACL().hashCode());
  assertFalse(hc == createACL("/anotherPath",ace1,ace2).hashCode());
  assertFalse(hc == new TestACL("/anotherPath",rp,ace1,ace2).hashCode());
  assertFalse(hc == new TestACL("/anotherPath",rp,ace1,ace2).hashCode());
  assertFalse(hc == new TestACL("/anotherPath",rp).hashCode());
  assertFalse(hc == new TestACL(getTestPath(),rp,ace1,ace2).hashCode());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsForEmpty() throws Exception {
  JackrabbitAccessControlList acl=createEmptyACL();
  assertEquals(acl,createEmptyACL());
  ACE entry=createEntry(testPrincipal,testPrivileges,true);
  assertFalse(acl.equals(createACL(entry)));
  assertFalse(acl.equals(new TestACL(getTestPath(),getRestrictionProvider(),Collections.<JackrabbitAccessControlEntry>emptyList())));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals() throws Exception {
  RestrictionProvider rp=getRestrictionProvider();
  ACE ace1=createEntry(testPrincipal,false,null,PrivilegeConstants.JCR_VERSION_MANAGEMENT);
  ACE ace2=createEntry(testPrincipal,testPrivileges,true);
  ACE ace2b=createEntry(testPrincipal,getAggregatedPrivileges(testPrivileges),true);
  JackrabbitAccessControlList acl=createACL(ace1,ace2);
  JackrabbitAccessControlList repoAcl=createACL((String)null,ace1,ace2);
  assertEquals(acl,createACL(ace1,ace2));
  assertEquals(acl,createACL(ace1,ace2b));
  assertEquals(repoAcl,createACL((String)null,ace1,ace2b));
  assertFalse(acl.equals(createACL(ace2,ace1)));
  assertFalse(acl.equals(repoAcl));
  assertFalse(acl.equals(createEmptyACL()));
  assertFalse(acl.equals(createACL("/anotherPath",ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp,ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp,ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp)));
  assertFalse(acl.equals(new TestACL(getTestPath(),rp,ace1,ace2)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyIsImmutable() throws Exception {
  JackrabbitAccessControlList acl=createEmptyACL();
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
  assertEquals(getTestPath(),acl.getPath());
  assertImmutable(acl);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImmutable() throws Exception {
  List<ACE> entries=new ArrayList<ACE>();
  entries.add(createEntry(testPrincipal,testPrivileges,true));
  entries.add(createEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false));
  JackrabbitAccessControlList acl=createACL(entries);
  assertFalse(acl.isEmpty());
  assertEquals(2,acl.size());
  assertEquals(getTestPath(),acl.getPath());
  assertImmutable(acl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.AccessControlTest </h4><pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCombinedSetup() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/content");
  acl.addAccessControlEntry(getTestGroupPrincipal(),AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  PermissionProvider combined=getConfig(AuthorizationConfiguration.class).getPermissionProvider(root,root.getContentSession().getWorkspaceName(),ImmutableSet.of(getTestGroupPrincipal()));
  for (  String acPath : acPaths) {
    boolean canReadAc=Text.isDescendantOrEqual("/content",acPath);
    Tree acTree=root.getTree(acPath);
    assertEquals(canReadAc,combined.hasPrivileges(acTree,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
    assertEquals(canReadAc,combined.getPrivileges(acTree).contains(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
    assertEquals(canReadAc,combined.isGranted(acPath,JackrabbitSession.ACTION_READ_ACCESS_CONTROL));
    assertEquals(canReadAc,combined.isGranted(acTree,null,Permissions.READ_ACCESS_CONTROL));
    Tree t=root.getTree("/");
    TreePermission tp=combined.getTreePermission(t,TreePermission.EMPTY);
    for (    String name : PathUtils.elements(acPath)) {
      t=t.getChild(name);
      tp=combined.getTreePermission(t,tp);
    }
    assertEquals(canReadAc,tp.canRead());
    assertEquals(canReadAc,tp.isGranted(Permissions.READ_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermission(){
  for (  String acPath : acPaths) {
    Tree t=root.getTree("/");
    TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
    for (    String name : PathUtils.elements(acPath)) {
      t=t.getChild(name);
      tp=pp.getTreePermission(t,tp);
    }
    assertSame(TreePermission.NO_RECOURSE,tp);
    assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(tp,null,Permissions.READ));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugAccessControlManagerTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePoliciesUnsupportedPath() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getEffectivePolicies(UNSUPPORTED_PATH);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePoliciesNullPath() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getEffectivePolicies((String)null);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPolicies() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetApplicablePolicies() throws Exception {
  AccessControlPolicyIterator it=cugAccessControlManager.getApplicablePolicies(SUPPORTED_PATH);
  assertTrue(it.hasNext());
  AccessControlPolicy policy=cugAccessControlManager.getApplicablePolicies(SUPPORTED_PATH).nextAccessControlPolicy();
  assertTrue(policy instanceof CugPolicyImpl);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPoliciesNullPath() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies((String)null);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPoliciesUnsupportedPath() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(UNSUPPORTED_PATH);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicy() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cug.addPrincipals(EveryonePrincipal.getInstance());
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  AccessControlPolicy policy=policies[0];
  assertTrue(policy instanceof CugPolicyImpl);
  Set<Principal> principals=((CugPolicy)policy).getPrincipals();
  assertEquals(1,principals.size());
  assertEquals(EveryonePrincipal.getInstance(),principals.iterator().next());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyPersisted() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cug.addPrincipals(EveryonePrincipal.getInstance());
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  root.commit();
  Tree tree=root.getTree(SUPPORTED_PATH);
  assertTrue(TreeUtil.isNodeType(tree,CugConstants.MIX_REP_CUG_MIXIN,root.getTree(NodeTypeConstants.NODE_TYPES_PATH)));
  Tree cugTree=tree.getChild(CugConstants.REP_CUG_POLICY);
  assertTrue(cugTree.exists());
  assertEquals(CugConstants.NT_REP_CUG_POLICY,TreeUtil.getPrimaryTypeName(cugTree));
  PropertyState prop=cugTree.getProperty(CugConstants.REP_PRINCIPAL_NAMES);
  assertNotNull(prop);
  assertTrue(prop.isArray());
  assertEquals(Type.STRINGS,prop.getType());
  assertEquals(1,prop.count());
  assertEquals(EveryonePrincipal.NAME,prop.getValue(Type.STRING,0));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectivePoliciesByPrincipal() throws Exception {
  AccessControlPolicy[] applicable=cugAccessControlManager.getEffectivePolicies(ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesByPrincipal() throws Exception {
  AccessControlPolicy[] applicable=cugAccessControlManager.getApplicablePolicies(EveryonePrincipal.getInstance());
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetApplicablePoliciesAfterSet() throws Exception {
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,getApplicableCug(SUPPORTED_PATH));
  AccessControlPolicyIterator it=cugAccessControlManager.getApplicablePolicies(SUPPORTED_PATH);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePolicies() throws Exception {
  AccessControlPolicy[] policies=cugAccessControlManager.getEffectivePolicies(SUPPORTED_PATH);
  assertEquals(0,policies.length);
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,createCug(SUPPORTED_PATH));
  root.commit();
  policies=cugAccessControlManager.getEffectivePolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  AccessControlPolicy[] effectiveOnChild=cugAccessControlManager.getEffectivePolicies(SUPPORTED_PATH + "/subtree");
  assertEquals(1,policies.length);
  assertEquals(policies.length,effectiveOnChild.length);
  assertEquals(((JackrabbitAccessControlPolicy)policies[0]).getPath(),((JackrabbitAccessControlPolicy)effectiveOnChild[0]).getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemovePolicy() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  cugAccessControlManager.removePolicy(SUPPORTED_PATH,cugAccessControlManager.getPolicies(SUPPORTED_PATH)[0]);
  assertArrayEquals(new AccessControlPolicy[0],cugAccessControlManager.getPolicies(SUPPORTED_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetApplicablePoliciesUnsupportedPath() throws Exception {
  AccessControlPolicyIterator it=cugAccessControlManager.getApplicablePolicies(UNSUPPORTED_PATH);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetEffectivePoliciesNotEnabled() throws Exception {
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,createCug(SUPPORTED_PATH));
  root.commit();
  ConfigurationParameters config=ConfigurationParameters.of(AuthorizationConfiguration.NAME,ConfigurationParameters.of(CugConstants.PARAM_CUG_SUPPORTED_PATHS,SUPPORTED_PATHS,CugConstants.PARAM_CUG_ENABLED,false));
  CugAccessControlManager acMgr=new CugAccessControlManager(root,NamePathMapper.DEFAULT,new CugSecurityProvider(config));
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(SUPPORTED_PATH);
  assertEquals(0,policies.length);
  AccessControlPolicy[] effectiveOnChild=acMgr.getEffectivePolicies(SUPPORTED_PATH + "/subtree");
  assertEquals(0,policies.length);
  assertEquals(policies.length,effectiveOnChild.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterSet() throws Exception {
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,getApplicableCug(SUPPORTED_PATH));
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof CugPolicyImpl);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetApplicablePoliciesNullPath() throws Exception {
  AccessControlPolicyIterator it=cugAccessControlManager.getApplicablePolicies((String)null);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterManualCreation() throws Exception {
  NodeUtil n=new NodeUtil(root.getTree(SUPPORTED_PATH));
  NodeUtil cug=n.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof CugPolicy);
  CugPolicy cugPolicy=(CugPolicy)policies[0];
  assertTrue(cugPolicy.getPrincipals().isEmpty());
  cug.setStrings(REP_PRINCIPAL_NAMES,"unknownPrincipalName",EveryonePrincipal.NAME);
  policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  cugPolicy=(CugPolicy)policies[0];
  assertEquals(2,cugPolicy.getPrincipals().size());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesByPrincipal() throws Exception {
  AccessControlPolicy[] applicable=cugAccessControlManager.getPolicies(EveryonePrincipal.getInstance());
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugConfigurationTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAccessControlManagerSupportedPaths(){
  ConfigurationParameters params=ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,true,CugConstants.PARAM_CUG_SUPPORTED_PATHS,"/content");
  CugConfiguration cc=createConfiguration(params);
  AccessControlManager acMgr=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertTrue(acMgr instanceof CugAccessControlManager);
}

</code></pre>

<br>
<pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetPermissionProviderDisabled(){
  CugConfiguration cc=createConfiguration(ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,false));
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
  assertSame(EmptyPermissionProvider.getInstance(),pp);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAccessControlManagerNoSupportedPaths(){
  CugConfiguration cc=createConfiguration(ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,true));
  AccessControlManager acMgr=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertTrue(acMgr instanceof CugAccessControlManager);
}

</code></pre>

<br>
<pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetPermissionProviderNoSupportedPaths(){
  CugConfiguration cc=createConfiguration(ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,true));
  PermissionProvider pp=cc.getPermissionProvider(root,"default",ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
  assertSame(EmptyPermissionProvider.getInstance(),pp);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAccessControlManagerDisabled(){
  CugConfiguration cc=createConfiguration(ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,false));
  AccessControlManager acMgr=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertTrue(acMgr instanceof CugAccessControlManager);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetPermissionProviderDisabled2(){
  ConfigurationParameters params=ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,false,CugConstants.PARAM_CUG_SUPPORTED_PATHS,"/content");
  CugConfiguration cc=createConfiguration(params);
  PermissionProvider pp=cc.getPermissionProvider(root,"default",ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
  assertSame(EmptyPermissionProvider.getInstance(),pp);
}

</code></pre>

<br>
<pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetPermissionProviderDisabled3(){
  CugConfiguration cc=createConfiguration(ConfigurationParameters.EMPTY);
  PermissionProvider pp=cc.getPermissionProvider(root,"default",ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
  assertSame(EmptyPermissionProvider.getInstance(),pp);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPermissionProviderSupportedPaths(){
  ConfigurationParameters params=ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,true,CugConstants.PARAM_CUG_SUPPORTED_PATHS,"/content");
  CugConfiguration cc=createConfiguration(params);
  PermissionProvider pp=cc.getPermissionProvider(root,"default",ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
  assertTrue(pp instanceof CugPermissionProvider);
}

</code></pre>

<br>
<pre class="type-9 type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testExcludedPrincipals(){
  ConfigurationParameters params=ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,true,CugConstants.PARAM_CUG_SUPPORTED_PATHS,"/content");
  CugConfiguration cc=createConfiguration(params);
  List<Principal> excluded=ImmutableList.of(SystemPrincipal.INSTANCE,new AdminPrincipal(){
    @Override public String getName(){
      return "admin";
    }
  }
,new SystemUserPrincipal(){
    @Override public String getName(){
      return "systemUser";
    }
  }
);
  for (  Principal p : excluded) {
    Set<Principal> principals=ImmutableSet.of(p,EveryonePrincipal.getInstance());
    PermissionProvider pp=cc.getPermissionProvider(root,"default",principals);
    assertSame(EmptyPermissionProvider.getInstance(),pp);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugContextTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDefinesProperty(){
  Tree cugTree=root.getTree(CUG_PATH);
  PropertyState repPrincipalNames=cugTree.getProperty(CugConstants.REP_PRINCIPAL_NAMES);
  assertTrue(CugContext.INSTANCE.definesProperty(cugTree,repPrincipalNames));
  assertFalse(CugContext.INSTANCE.definesProperty(cugTree,cugTree.getProperty(JcrConstants.JCR_PRIMARYTYPE)));
  for (  String path : NO_CUG_PATH) {
    assertFalse(path,CugContext.INSTANCE.definesProperty(root.getTree(path),repPrincipalNames));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInvalidCug() throws Exception {
  PropertyState ps=PropertyStates.createProperty(CugConstants.REP_PRINCIPAL_NAMES,ImmutableSet.of(getTestUser().getPrincipal().getName()),Type.STRINGS);
  Tree invalidCug=new NodeUtil(root.getTree(UNSUPPORTED_PATH)).addChild(CugConstants.REP_CUG_POLICY,CugConstants.NT_REP_CUG_POLICY).getTree();
  invalidCug.setProperty(ps);
  assertTrue(CugContext.INSTANCE.definesContextRoot(invalidCug));
  assertTrue(CugContext.INSTANCE.definesTree(invalidCug));
  assertTrue(CugContext.INSTANCE.definesProperty(invalidCug,invalidCug.getProperty(CugConstants.REP_PRINCIPAL_NAMES)));
  invalidCug=new NodeUtil(root.getTree(UNSUPPORTED_PATH)).addChild(CugConstants.REP_CUG_POLICY,NT_OAK_UNSTRUCTURED).getTree();
  invalidCug.setProperty(ps);
  assertFalse(CugContext.INSTANCE.definesContextRoot(invalidCug));
  assertFalse(CugContext.INSTANCE.definesTree(invalidCug));
  assertFalse(CugContext.INSTANCE.definesProperty(invalidCug,invalidCug.getProperty(CugConstants.REP_PRINCIPAL_NAMES)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugEvaluationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrivilegesEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(EveryonePrincipal.getInstance());
  assertTrue(pp.getPrivileges(content).isEmpty());
  assertTrue(pp.getPrivileges(content2).isEmpty());
  assertTrue(pp.getPrivileges(a).isEmpty());
  assertTrue(pp.getPrivileges(c).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedTestGroup() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertTrue(pp.isGranted(content,null,Permissions.READ));
  assertTrue(pp.isGranted(a,null,Permissions.READ));
  assertFalse(pp.isGranted(c,null,Permissions.READ));
  assertTrue(pp.isGranted(content,null,Permissions.READ_ACCESS_CONTROL));
  assertTrue(pp.isGranted(a,null,Permissions.READ_ACCESS_CONTROL));
  assertTrue(pp.isGranted(c,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedTestUserEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  assertTrue(pp.isGranted(content,null,Permissions.READ));
  assertFalse(pp.isGranted(a,null,Permissions.READ));
  assertTrue(pp.isGranted(c,null,Permissions.READ));
  assertFalse(pp.isGranted(content,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(a,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(c,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRead() throws Exception {
  List<String> noAccess=ImmutableList.of("/",UNSUPPORTED_PATH,"/content/a","/content/a/b","/content/aa/bb","/content2");
  for (  String p : noAccess) {
    assertFalse(p,testRoot.getTree(p).exists());
  }
  List<String> readAccess=ImmutableList.of("/content","/content/subtree","/content/a/b/c","/content/aa");
  for (  String p : readAccess) {
    assertTrue(p,testRoot.getTree(p).exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(EveryonePrincipal.getInstance());
  assertFalse(pp.isGranted(content,null,Permissions.READ));
  assertFalse(pp.isGranted(content2,null,Permissions.READ));
  assertFalse(pp.isGranted(a,null,Permissions.READ));
  assertFalse(pp.isGranted(c,null,Permissions.READ));
  assertFalse(pp.isGranted(content,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(content2,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(a,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(c,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadCug2() throws Exception {
  ContentSession cs=createTestSession2();
  try {
    Root r=cs.getLatestRoot();
    assertTrue(r.getTree("/content/a/rep:cugPolicy").exists());
    assertFalse(r.getTree("/content2/rep:cugPolicy").exists());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWrite2() throws Exception {
  ContentSession cs=createTestSession2();
  Root r=cs.getLatestRoot();
  try {
    PermissionProvider pp=createPermissionProvider(cs);
    assertTrue(pp.isGranted(root.getTree("/content/writeTest"),null,Permissions.ADD_NODE));
    assertTrue(pp.isGranted(root.getTree("/content/a/b/c/writeTest"),null,Permissions.ADD_NODE));
    List<String> paths=ImmutableList.of("/content","/content/a/b/c");
    for (    String p : paths) {
      NodeUtil content=new NodeUtil(r.getTree(p));
      content.addChild("writeTest",NT_OAK_UNSTRUCTURED);
      r.commit();
    }
  }
  finally {
    r.refresh();
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedTestGroupEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal,EveryonePrincipal.getInstance());
  assertTrue(pp.isGranted(content,null,Permissions.READ));
  assertTrue(pp.isGranted(a,null,Permissions.READ));
  assertTrue(pp.isGranted(c,null,Permissions.READ));
  assertTrue(pp.isGranted(content,null,Permissions.READ_ACCESS_CONTROL));
  assertTrue(pp.isGranted(a,null,Permissions.READ_ACCESS_CONTROL));
  assertTrue(pp.isGranted(c,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAllPrivileges() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertFalse(pp.hasPrivileges(content,PrivilegeConstants.JCR_ALL));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.JCR_ALL));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.JCR_ALL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadAcl2() throws Exception {
  ContentSession cs=createTestSession2();
  try {
    Root r=cs.getLatestRoot();
    assertTrue(r.getTree("/content/rep:policy").exists());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestGroupEveryone() throws Exception {
  Set<String> r_w_rac=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal,EveryonePrincipal.getInstance());
  assertEquals(r_w_rac,pp.getPrivileges(content));
  assertEquals(r_w_rac,pp.getPrivileges(a));
  assertEquals(r_w_rac,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestUserEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  Set<String> r=ImmutableSet.of(PrivilegeConstants.JCR_READ);
  assertEquals(r,pp.getPrivileges(content));
  assertEquals(r,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(a).isEmpty());
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestGroup() throws Exception {
  Set<String> w_rac=ImmutableSet.of(PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  Set<String> r_w_rac=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertEquals(r_w_rac,pp.getPrivileges(content));
  assertEquals(r_w_rac,pp.getPrivileges(a));
  assertEquals(w_rac,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(EveryonePrincipal.getInstance());
  assertFalse(pp.hasPrivileges(content,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(content2,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(content,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(content2,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesTestUserEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(content,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAllPrivileges2() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  AccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/content/a");
  acl.addAccessControlEntry(testGroupPrincipal,privilegesFromNames(PrivilegeConstants.JCR_ALL));
  acMgr.setPolicy("/content/a",acl);
  root.commit();
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertFalse(pp.hasPrivileges(root.getTree("/content"),PrivilegeConstants.JCR_ALL));
  assertTrue(pp.hasPrivileges(root.getTree("/content/a"),PrivilegeConstants.JCR_ALL));
  assertTrue(pp.hasPrivileges(root.getTree("/content/a/b"),PrivilegeConstants.JCR_ALL));
  assertFalse(pp.hasPrivileges(root.getTree("/content/a/b/c"),PrivilegeConstants.JCR_ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesTestGroup() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAllPrivilegesAdmin() throws Exception {
  PermissionProvider pp=createPermissionProvider(adminSession);
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.JCR_ALL));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.JCR_ALL));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.JCR_ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesTestGroupEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal,EveryonePrincipal.getInstance());
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugExcludeDefaultTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPrincipals(){
  Set<Principal> principals=new HashSet<Principal>();
  principals.add(new PrincipalImpl("test"));
  principals.add(new ItemBasedPrincipal(){
    @Override public String getPath(){
      return "/path";
    }
    @Override public String getName(){
      return "test";
    }
  }
);
  assertFalse(exclude.isExcluded(principals));
  for (  Principal p : principals) {
    assertFalse(exclude.isExcluded(ImmutableSet.of(p)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugImportBaseTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCugValidPrincipalsNoMixin() throws Exception {
  testGroup=((JackrabbitSession)adminSession).getUserManager().createGroup(new PrincipalImpl(TEST_GROUP_PRINCIPAL_NAME));
  adminSession.save();
  doImport(getTargetPath(),XML_CUG_POLICY);
  try {
    adminSession.save();
    fail();
  }
 catch (  AccessControlException e) {
    Throwable cause=e.getCause();
    assertTrue(cause instanceof CommitFailedException);
    assertTrue(((CommitFailedException)cause).isAccessControlViolation());
    assertEquals(22,((CommitFailedException)cause).getCode());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNestedCugSave() throws Exception {
  getTargetNode().addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),XML_NESTED_CUG_POLICY);
  assertTrue(getTargetNode().hasNode(CugConstants.REP_CUG_POLICY));
  Node cugPolicy=getTargetNode().getNode(CugConstants.REP_CUG_POLICY);
  assertTrue(cugPolicy.hasProperty(CugConstants.REP_PRINCIPAL_NAMES));
  assertFalse(cugPolicy.hasNode(CugConstants.REP_CUG_POLICY));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNestedCugWithMixin() throws Exception {
  getTargetNode().addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),XML_NESTED_CUG_POLICY);
  assertTrue(getTargetNode().hasNode(CugConstants.REP_CUG_POLICY));
  Node cugPolicy=getTargetNode().getNode(CugConstants.REP_CUG_POLICY);
  assertTrue(cugPolicy.hasProperty(CugConstants.REP_PRINCIPAL_NAMES));
  assertFalse(cugPolicy.hasNode(CugConstants.REP_CUG_POLICY));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugPermissionProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#isGranted(String,String)
 */
@Test public void testIsGrantedJcrActionsNonExistingPath(){
  String p="/path/to/non/existing/tree";
  assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ));
  assertFalse(cugPermProvider.isGranted(p,Permissions.getString(Permissions.READ_NODE)));
  assertFalse(cugPermProvider.isGranted(p,Permissions.getString(Permissions.READ_PROPERTY)));
  assertFalse(cugPermProvider.isGranted(p,Session.ACTION_ADD_NODE));
  assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ + ',' + Session.ACTION_ADD_NODE));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see PermissionProvider#getPrivileges(org.apache.jackrabbit.oak.api.Tree)
 */
@Test public void testGetPrivilegesAtCug2(){
  PermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH),testGroupPrincipal);
  Set<String> expected=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES);
  assertEquals(expected,pp.getPrivileges(root.getTree("/content/a")));
  assertEquals(expected,pp.getPrivileges(root.getTree("/content/aa/bb")));
  assertTrue(pp.getPrivileges(root.getTree("/content/a/b/c")).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#isGranted(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testIsGrantedRead(){
  for (  String p : NOT_READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertFalse(cugPermProvider.isGranted(tree,null,Permissions.READ));
      assertFalse(cugPermProvider.isGranted(tree,tree.getProperty(JCR_PRIMARYTYPE),Permissions.READ_PROPERTY));
    }
  }
  for (  String p : READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertTrue(cugPermProvider.isGranted(tree,null,Permissions.READ));
      assertTrue(cugPermProvider.isGranted(tree,null,Permissions.READ_NODE));
      assertTrue(cugPermProvider.isGranted(tree,tree.getProperty(JCR_PRIMARYTYPE),Permissions.READ_PROPERTY));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#hasPrivileges(org.apache.jackrabbit.oak.api.Tree,String)
 */
@Test public void testHasReadPrivilegesAtCug(){
  for (  String p : READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertTrue(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_READ));
      assertTrue(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES));
      assertTrue(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_PROPERTIES));
      assertTrue(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see PermissionProvider#getPrivileges(org.apache.jackrabbit.oak.api.Tree)
 */
@Test public void testGetPrivilegesAtCug(){
  Set<String> expected=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES);
  for (  String p : READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertEquals(expected,cugPermProvider.getPrivileges(tree));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see PermissionProvider#getTreePermission(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.spi.security.authorization.permission.TreePermission)
 */
@Test public void testGetTreePermissions() throws AccessDeniedException {
  TreePermission rootTp=cugPermProvider.getTreePermission(root.getTree("/"),TreePermission.EMPTY);
  assertTrue(rootTp instanceof EmptyCugTreePermission);
  TreePermission contentTp=cugPermProvider.getTreePermission(root.getTree(SUPPORTED_PATH),rootTp);
  assertTrue(contentTp instanceof CugTreePermission);
  TreePermission aTp=cugPermProvider.getTreePermission(root.getTree("/content/a"),contentTp);
  assertTrue(aTp instanceof CugTreePermission);
  TreePermission bTp=cugPermProvider.getTreePermission(root.getTree("/content/a/b"),aTp);
  assertTrue(bTp instanceof CugTreePermission);
  TreePermission cTp=cugPermProvider.getTreePermission(root.getTree("/content/a/b/c"),bTp);
  assertTrue(cTp instanceof CugTreePermission);
  TreePermission aaTp=cugPermProvider.getTreePermission(root.getTree("/content/aa"),contentTp);
  assertTrue(aaTp instanceof CugTreePermission);
  TreePermission bbTp=cugPermProvider.getTreePermission(root.getTree("/content/aa/bb"),aaTp);
  assertTrue(bbTp instanceof CugTreePermission);
  TreePermission ccTp=cugPermProvider.getTreePermission(root.getTree("/content/aa/bb/cc"),bbTp);
  assertTrue(ccTp instanceof CugTreePermission);
  Tree aaTree=root.getTree("/content/aa");
  new NodeUtil(aaTree).addChild(CugConstants.REP_CUG_POLICY,NT_OAK_UNSTRUCTURED);
  TreePermission aaTp2=cugPermProvider.getTreePermission(root.getTree("/content/aa"),contentTp);
  assertTrue(aaTp2 instanceof CugTreePermission);
  TreePermission falseCugTp=cugPermProvider.getTreePermission(root.getTree("/content/aa/rep:cugPolicy"),aaTp2);
  assertNotSame(TreePermission.EMPTY,falseCugTp);
  TreePermission cugTp=cugPermProvider.getTreePermission(root.getTree("/content/a/rep:cugPolicy"),aTp);
  assertSame(TreePermission.NO_RECOURSE,cugTp);
  TreePermission jcrSystemTp=cugPermProvider.getTreePermission(root.getTree("/jcr:system"),rootTp);
  assertTrue(jcrSystemTp instanceof EmptyCugTreePermission);
  assertSame(TreePermission.NO_RECOURSE,cugPermProvider.getTreePermission(root.getTree(NodeTypeConstants.NODE_TYPES_PATH),jcrSystemTp));
  TreePermission unsupportedPathTp=cugPermProvider.getTreePermission(root.getTree(UNSUPPORTED_PATH),rootTp);
  assertSame(TreePermission.NO_RECOURSE,unsupportedPathTp);
  try {
    cugPermProvider.getTreePermission(root.getTree(UNSUPPORTED_PATH + "/child"),unsupportedPathTp);
    fail();
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPermissions(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testSupportedPermissionsByNullTree(){
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ_NODE));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ_PROPERTY));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.ALL));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.WRITE));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.ADD_NODE | Permissions.REMOVE));
  assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions((Tree)null,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPermissions(org.apache.jackrabbit.oak.spi.security.authorization.permission.TreePermission,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testSupportedPermissionsByTreePermission(){
  TreePermission rootTp=cugPermProvider.getTreePermission(root.getTree("/"),TreePermission.EMPTY);
  Map<TreePermission,Boolean> tpMap=new HashMap<TreePermission,Boolean>();
  TreePermission contentTp=cugPermProvider.getTreePermission(root.getTree(SUPPORTED_PATH),rootTp);
  tpMap.put(contentTp,false);
  TreePermission aTp=cugPermProvider.getTreePermission(root.getTree("/content/a"),contentTp);
  tpMap.put(aTp,true);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree("/content/a/rep:cugPolicy"),aTp),true);
  TreePermission bTp=cugPermProvider.getTreePermission(root.getTree("/content/a/b"),aTp);
  tpMap.put(bTp,true);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree("/content/a/b/c"),bTp),true);
  TreePermission aaTp=cugPermProvider.getTreePermission(root.getTree("/content/aa"),contentTp);
  tpMap.put(aaTp,false);
  TreePermission bbTp=cugPermProvider.getTreePermission(root.getTree("/content/aa/bb"),aaTp);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree("/content/aa/bb/cc"),bbTp),true);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree("/jcr:system"),rootTp),false);
  tpMap.put(rootTp,false);
  tpMap.put(cugPermProvider.getTreePermission(root.getTree(UNSUPPORTED_PATH),rootTp),false);
  for (  TreePermission tp : tpMap.keySet()) {
    boolean isInCug=tpMap.get(tp);
    if (isInCug) {
      assertEquals(Permissions.READ,cugPermProvider.supportedPermissions(tp,null,Permissions.READ));
      assertEquals(Permissions.READ_NODE,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_NODE));
      assertEquals(Permissions.READ_PROPERTY,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_PROPERTY));
      assertEquals(Permissions.READ,cugPermProvider.supportedPermissions(tp,null,Permissions.ALL));
      assertEquals(Permissions.READ_NODE,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
 else {
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.READ));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_NODE));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_PROPERTY));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.ALL));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
    assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tp,null,Permissions.ADD_NODE | Permissions.REMOVE));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#isGranted(org.apache.jackrabbit.oak.plugins.tree.TreeLocation,long)
 */
@Test public void testIsGrantedByLocation() throws Exception {
  for (  String p : NOT_READABLE_PATHS) {
    TreeLocation location=TreeLocation.create(root,p);
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ));
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ_NODE));
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ_PROPERTY));
    assertFalse(cugPermProvider.isGranted(location,Permissions.ALL));
    assertFalse(cugPermProvider.isGranted(location,Permissions.ADD_NODE));
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ_ACCESS_CONTROL));
  }
  for (  String p : READABLE_PATHS) {
    TreeLocation location=TreeLocation.create(root,p);
    assertTrue(cugPermProvider.isGranted(location,Permissions.READ));
    assertTrue(cugPermProvider.isGranted(location,Permissions.READ_NODE));
    assertTrue(cugPermProvider.isGranted(location,Permissions.READ_PROPERTY));
    assertFalse(cugPermProvider.isGranted(location,Permissions.ALL));
    assertFalse(cugPermProvider.isGranted(location,Permissions.ADD_NODE));
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPermissions(org.apache.jackrabbit.oak.plugins.tree.TreeLocation,long)
 */
@Test public void testSupportedPermissionsByLocation(){
  for (  String path : PATH_INCUG_MAP.keySet()) {
    boolean isInCug=PATH_INCUG_MAP.get(path);
    TreeLocation location=TreeLocation.create(root,path);
    if (isInCug) {
      assertEquals(path,Permissions.READ,cugPermProvider.supportedPermissions(location,Permissions.READ));
      assertEquals(path,Permissions.READ_NODE,cugPermProvider.supportedPermissions(location,Permissions.READ_NODE));
      assertEquals(path,Permissions.READ_PROPERTY,cugPermProvider.supportedPermissions(location,Permissions.READ_PROPERTY));
      assertEquals(path,Permissions.READ,cugPermProvider.supportedPermissions(location,Permissions.ALL));
      assertEquals(path,Permissions.READ_NODE,cugPermProvider.supportedPermissions(location,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
 else {
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ));
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ_NODE));
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ_PROPERTY));
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.ALL));
      assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.READ_ACCESS_CONTROL));
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.MODIFY_ACCESS_CONTROL));
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.ADD_NODE));
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(location,Permissions.WRITE));
    assertEquals(path,Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(TreeLocation.create(root,"/path/to/no-existing/tree"),Permissions.READ));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#isGranted(org.apache.jackrabbit.oak.plugins.tree.TreeLocation,long)
 */
@Test public void testIsGrantedNonExistingLocation() throws Exception {
  ContentSession anonymous=login(new GuestCredentials());
  try {
    Root anonymousRoot=anonymous.getLatestRoot();
    for (    Root r : new Root[]{anonymousRoot,root}) {
      TreeLocation location=TreeLocation.create(r,"/path/to/non/existing/tree");
      assertFalse(cugPermProvider.isGranted(location,Permissions.READ));
      assertFalse(cugPermProvider.isGranted(location,Permissions.READ_NODE));
      assertFalse(cugPermProvider.isGranted(location,Permissions.READ_PROPERTY));
      assertFalse(cugPermProvider.isGranted(location,Permissions.ALL));
      assertFalse(cugPermProvider.isGranted(location,Permissions.ADD_NODE));
      assertFalse(cugPermProvider.isGranted(location,Permissions.READ_ACCESS_CONTROL));
    }
  }
  finally {
    anonymous.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPrivileges(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBits)
 */
@Test public void testSupportedPrivileges(){
  PrivilegeBits readBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_READ);
  PrivilegeBits readNodeBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES);
  PrivilegeBits readPropBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_PROPERTIES);
  PrivilegeBitsProvider provider=new PrivilegeBitsProvider(root);
  for (  String path : PATH_INCUG_MAP.keySet()) {
    boolean isInCug=PATH_INCUG_MAP.get(path);
    Tree tree=root.getTree(path);
    if (isInCug) {
      assertPrivilegeBits(readBits,cugPermProvider.supportedPrivileges(tree,readBits));
      assertPrivilegeBits(readNodeBits,cugPermProvider.supportedPrivileges(tree,readNodeBits));
      assertPrivilegeBits(readPropBits,cugPermProvider.supportedPrivileges(tree,readPropBits));
      assertPrivilegeBits(readBits,cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.JCR_ALL)));
      assertPrivilegeBits(readNodeBits,cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)));
    }
 else {
      assertTrue(cugPermProvider.supportedPrivileges(tree,readBits).isEmpty());
      assertTrue(cugPermProvider.supportedPrivileges(tree,readNodeBits).isEmpty());
      assertTrue(cugPermProvider.supportedPrivileges(tree,readPropBits).isEmpty());
      assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.JCR_ALL)).isEmpty());
      assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)).isEmpty());
    }
    assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.REP_WRITE)).isEmpty());
    assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_NODE)).isEmpty());
    assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.JCR_READ_ACCESS_CONTROL)).isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPrivileges(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBits)
 */
@Test public void testSupportedPrivilegesForNullTree(){
  PrivilegeBits readBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_READ);
  PrivilegeBits readNodeBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES);
  PrivilegeBits readPropBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_PROPERTIES);
  PrivilegeBitsProvider provider=new PrivilegeBitsProvider(root);
  assertTrue(cugPermProvider.supportedPrivileges(null,readBits).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,readNodeBits).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,readPropBits).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.JCR_ALL)).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.REP_WRITE)).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_NODE)).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.JCR_READ_ACCESS_CONTROL)).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPermissions(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testSupportedPermissionsByTree(){
  for (  String path : PATH_INCUG_MAP.keySet()) {
    boolean isInCug=PATH_INCUG_MAP.get(path);
    Tree tree=root.getTree(path);
    if (isInCug) {
      assertEquals(Permissions.READ,cugPermProvider.supportedPermissions(tree,null,Permissions.READ));
      assertEquals(Permissions.READ_NODE,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_NODE));
      assertEquals(Permissions.READ_PROPERTY,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_PROPERTY));
      assertEquals(Permissions.READ,cugPermProvider.supportedPermissions(tree,null,Permissions.ALL));
      assertEquals(Permissions.READ_NODE,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
 else {
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_NODE));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_PROPERTY));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.ALL));
      assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_NODE | Permissions.READ_ACCESS_CONTROL));
    }
    assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.WRITE));
    assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.ADD_NODE | Permissions.REMOVE));
    assertEquals(Permissions.NO_PERMISSION,cugPermProvider.supportedPermissions(tree,null,Permissions.READ_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#hasPrivileges(org.apache.jackrabbit.oak.api.Tree,String)
 */
@Test public void testHasNonReadPrivileges(){
  for (  String p : Iterables.concat(READABLE_PATHS,NOT_READABLE_PATHS)) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_WRITE));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_ALL));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#hasPrivileges(org.apache.jackrabbit.oak.api.Tree,String)
 */
@Test public void testHasReadPrivileges(){
  for (  String p : NOT_READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_READ));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_PROPERTIES));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#isGranted(String,String)
 */
@Test public void testIsGrantedJcrActions(){
  for (  String p : NOT_READABLE_PATHS) {
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ));
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_ADD_NODE));
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ + ',' + Session.ACTION_ADD_NODE));
  }
  for (  String p : READABLE_PATHS) {
    assertTrue(cugPermProvider.isGranted(p,Session.ACTION_READ));
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_ADD_NODE));
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ + ',' + Session.ACTION_ADD_NODE));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#isGranted(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testIsGrantedNonRead(){
  for (  String p : Iterables.concat(READABLE_PATHS,NOT_READABLE_PATHS)) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertFalse(cugPermProvider.isGranted(tree,null,Permissions.ALL));
      assertFalse(cugPermProvider.isGranted(tree,null,Permissions.READ | Permissions.READ_ACCESS_CONTROL));
      assertFalse(cugPermProvider.isGranted(tree,null,Permissions.REMOVE_NODE));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugPolicyImplTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddNullPrincipal() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.ABORT,principals);
  assertTrue(cug.addPrincipals(EveryonePrincipal.getInstance(),null));
  assertTrue(cug.getPrincipals().contains(EveryonePrincipal.getInstance()));
  assertTrue(cug.getPrincipals().contains(testPrincipal));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipals(){
  CugPolicyImpl cug=createCugPolicy(principals);
  Set<Principal> principalSet=cug.getPrincipals();
  assertFalse(principalSet.isEmpty());
  assertEquals(principals,principalSet);
  assertNotSame(principals,principalSet);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddInvalidPrincipalsBestEffort() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT,principals);
  assertTrue(cug.addPrincipals(EveryonePrincipal.getInstance(),new PrincipalImpl("unknown")));
  Set<Principal> principalSet=cug.getPrincipals();
  assertEquals(3,principalSet.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipalNames(){
  CugPolicyImpl cug=createCugPolicy(principals);
  Iterator<String> it=cug.getPrincipalNames().iterator();
  assertTrue(it.hasNext());
  assertEquals("test",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddContainedPrincipal() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT,principals);
  assertFalse(cug.addPrincipals(new PrincipalImpl("test")));
  assertEquals(principals,cug.getPrincipals());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddPrincipals() throws Exception {
  CugPolicy empty=createEmptyCugPolicy();
  assertTrue(empty.addPrincipals(EveryonePrincipal.getInstance()));
  assertFalse(empty.addPrincipals(EveryonePrincipal.getInstance()));
  CugPolicy cug=createCugPolicy(principals);
  assertTrue(cug.addPrincipals(EveryonePrincipal.getInstance()));
  assertFalse(cug.addPrincipals(EveryonePrincipal.getInstance()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveNullPrincipal() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.ABORT,principals);
  assertTrue(cug.removePrincipals(testPrincipal,null));
  assertTrue(cug.getPrincipals().isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddInvalidPrincipalsIgnore() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.IGNORE,principals);
  assertTrue(cug.addPrincipals(new PrincipalImpl("unknown"),EveryonePrincipal.getInstance()));
  Set<Principal> principalSet=cug.getPrincipals();
  assertEquals(2,principalSet.size());
  assertFalse(principalSet.contains(new PrincipalImpl("unknown")));
  assertFalse(principalSet.contains(new PrincipalImpl("")));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemovePrincipals() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT,ImmutableSet.of(testPrincipal,EveryonePrincipal.getInstance()));
  assertFalse(cug.removePrincipals(new PrincipalImpl("unknown")));
  assertTrue(cug.removePrincipals(testPrincipal,EveryonePrincipal.getInstance(),new PrincipalImpl("unknown")));
  assertTrue(cug.getPrincipals().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugTreePermissionTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted(){
  assertFalse(allowedTp.isGranted(Permissions.ALL));
  assertFalse(allowedTp.isGranted(Permissions.WRITE));
  assertTrue(allowedTp.isGranted(Permissions.READ_NODE));
  assertFalse(deniedTp.isGranted(Permissions.ALL));
  assertFalse(deniedTp.isGranted(Permissions.WRITE));
  assertFalse(deniedTp.isGranted(Permissions.READ_NODE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty(){
  PropertyState ps=PropertyStates.createProperty("prop","val");
  assertFalse(allowedTp.isGranted(Permissions.ALL,ps));
  assertFalse(allowedTp.isGranted(Permissions.WRITE,ps));
  assertTrue(allowedTp.isGranted(Permissions.READ_PROPERTY,ps));
  assertFalse(deniedTp.isGranted(Permissions.ALL,ps));
  assertFalse(deniedTp.isGranted(Permissions.WRITE,ps));
  assertFalse(deniedTp.isGranted(Permissions.READ_PROPERTY,ps));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsInCugSupportedPathWithoutCug() throws Exception {
  NodeUtil node=new NodeUtil(root.getTree(SUPPORTED_PATH2));
  Tree c1=node.addChild("c1",NT_OAK_UNSTRUCTURED).getTree();
  Tree c2=node.addChild("c2",NT_OAK_UNSTRUCTURED).getTree();
  String cugPath=c2.getPath();
  createCug(cugPath,getTestGroupPrincipal());
  root.commit();
  assertTrue(getCugTreePermission(cugPath).isInCug());
  assertFalse(getCugTreePermission(c1.getPath()).isInCug());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildPermission() throws Exception {
  NodeState ns=((AbstractTree)root.getTree(SUPPORTED_PATH + "/subtree")).getNodeState();
  TreePermission child=allowedTp.getChildPermission("subtree",ns);
  assertTrue(child instanceof CugTreePermission);
  child=deniedTp.getChildPermission("subtree",ns);
  assertTrue(child instanceof CugTreePermission);
  NodeState cugNs=((AbstractTree)root.getTree(PathUtils.concat(SUPPORTED_PATH,REP_CUG_POLICY))).getNodeState();
  TreePermission cugChild=allowedTp.getChildPermission(REP_CUG_POLICY,cugNs);
  assertSame(TreePermission.NO_RECOURSE,cugChild);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugValidatorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingMixin() throws Exception {
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(22,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidPrimaryType() throws Exception {
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(21,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCugPolicyWithDifferentName() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild("anotherName",NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(23,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryType(){
  try {
    node.setName(JcrConstants.JCR_PRIMARYTYPE,NT_REP_CUG_POLICY);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(20,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryTypeOfCug() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  root.commit();
  try {
    cug.setName(JcrConstants.JCR_PRIMARYTYPE,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(21,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMixin() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  root.commit();
  try {
    node.removeProperty(JcrConstants.JCR_MIXINTYPES);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(22,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.EmptyCugTreePermissionTest </h4><pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testJcrSystemPermissions() throws Exception {
  NodeState system=rootState.getChildNode(JcrConstants.JCR_SYSTEM);
  TreePermission systemTp=tp.getChildPermission(JcrConstants.JCR_SYSTEM,system);
  assertCugPermission(systemTp,false);
  assertCugPermission(pp.getTreePermission(root.getTree("/jcr:system"),tp),false);
  NodeState versionStore=system.getChildNode(VersionConstants.JCR_VERSIONSTORAGE);
  TreePermission versionStoreTp=systemTp.getChildPermission(VersionConstants.JCR_VERSIONSTORAGE,versionStore);
  assertCugPermission(versionStoreTp,false);
  assertCugPermission(pp.getTreePermission(root.getTree(VersionConstants.VERSION_STORE_PATH),systemTp),false);
  NodeState nodeTypes=system.getChildNode(NodeTypeConstants.JCR_NODE_TYPES);
  TreePermission nodeTypesTp=systemTp.getChildPermission(NodeTypeConstants.JCR_NODE_TYPES,nodeTypes);
  assertSame(TreePermission.NO_RECOURSE,nodeTypesTp);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildPermission() throws Exception {
  String name=Text.getName(SUPPORTED_PATH2);
  NodeState ns=rootState.getChildNode(name);
  TreePermission child=tp.getChildPermission(name,ns);
  assertSame(TreePermission.NO_RECOURSE,child);
  name=Text.getName(SUPPORTED_PATH);
  ns=rootState.getChildNode(name);
  child=tp.getChildPermission(name,ns);
  assertCugPermission(child,true);
  assertTrue(((CugTreePermission)child).isInCug());
  TreePermission subtree=child.getChildPermission("subtree",ns.getChildNode("subtree"));
  assertCugPermission(subtree,true);
  assertTrue(((CugTreePermission)subtree).isInCug());
  name=Text.getName(UNSUPPORTED_PATH);
  ns=rootState.getChildNode(name);
  TreePermission child2=tp.getChildPermission(name,ns);
  assertFalse(child2 instanceof EmptyCugTreePermission);
  assertSame(child2,TreePermission.NO_RECOURSE);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted(){
  assertFalse(tp.isGranted(Permissions.ALL));
  assertFalse(tp.isGranted(Permissions.WRITE));
  assertFalse(tp.isGranted(Permissions.READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty(){
  PropertyState ps=PropertyStates.createProperty("prop","val");
  assertFalse(tp.isGranted(Permissions.ALL,ps));
  assertFalse(tp.isGranted(Permissions.WRITE,ps));
  assertFalse(tp.isGranted(Permissions.READ,ps));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.HiddenTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges(){
  assertTrue(pp.hasPrivileges(readOnlyRoot.getTree(SUPPORTED_PATH),PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(readOnlyRoot.getTree(SUPPORTED_PATH + "/:hidden"),PrivilegeConstants.JCR_READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedHiddenBelowCug(){
  assertTrue(pp.isGranted(readOnlyRoot.getTree(SUPPORTED_PATH),null,Permissions.READ));
  assertFalse(pp.isGranted(readOnlyRoot.getTree(SUPPORTED_PATH + "/:hidden"),null,Permissions.READ));
}

</code></pre>

<br>
<pre class="type-2 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void before() throws Exception {
  super.before();
  createCug(SUPPORTED_PATH,EveryonePrincipal.getInstance());
  root.commit();
  readOnlyRoot=RootFactory.createReadOnlyRoot(root);
  hiddenTree=readOnlyRoot.getTree("/oak:index/acPrincipalName/:index");
  assertTrue(hiddenTree.exists());
  pp=createCugPermissionProvider(ImmutableSet.of("/"),EveryonePrincipal.getInstance());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCombinedSetup() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  try {
    AccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/");
    acl.addAccessControlEntry(EveryonePrincipal.getInstance(),AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_READ));
    acMgr.setPolicy("/",acl);
    root.commit();
    PermissionProvider combined=getConfig(AuthorizationConfiguration.class).getPermissionProvider(readOnlyRoot,root.getContentSession().getWorkspaceName(),ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
    assertFalse(combined.hasPrivileges(hiddenTree,PrivilegeConstants.JCR_READ));
    assertTrue(combined.getPrivileges(hiddenTree).isEmpty());
    assertTrue(combined.isGranted(hiddenTree,null,Permissions.ALL));
    assertTrue(combined.isGranted(hiddenTree.getPath(),Permissions.getString(Permissions.ALL)));
    Tree t=readOnlyRoot.getTree("/");
    TreePermission tp=combined.getTreePermission(t,TreePermission.EMPTY);
    for (    String name : PathUtils.elements(hiddenTree.getPath())) {
      t=t.getChild(name);
      tp=combined.getTreePermission(t,tp);
    }
    assertTrue(tp.isGranted(Permissions.ALL));
  }
  finally {
    AccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/");
    acl.addAccessControlEntry(EveryonePrincipal.getInstance(),AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_READ));
    acMgr.removePolicy("/",acl);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermission(){
  Tree t=readOnlyRoot.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  for (  String name : PathUtils.elements(hiddenTree.getPath())) {
    assertCugPermission(tp,true);
    t=t.getChild(name);
    tp=pp.getTreePermission(t,tp);
  }
  assertSame(TreePermission.NO_RECOURSE,tp);
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(tp,null,Permissions.READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrivileges(){
  assertFalse(pp.getPrivileges(readOnlyRoot.getTree(SUPPORTED_PATH)).isEmpty());
  assertTrue(pp.getPrivileges(readOnlyRoot.getTree(SUPPORTED_PATH + "/:hidden")).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedPath(){
  assertTrue(pp.isGranted(SUPPORTED_PATH,Permissions.getString(Permissions.READ)));
  assertFalse(pp.isGranted(SUPPORTED_PATH + "/:hidden",Permissions.getString(Permissions.READ)));
  assertFalse(pp.isGranted(SUPPORTED_PATH + "/:hidden/child",Permissions.getString(Permissions.READ)));
  assertFalse(pp.isGranted(hiddenTree.getPath(),Permissions.getString(Permissions.READ)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.SupportedPathsTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEmpty(){
  SupportedPaths supportedPaths=new SupportedPaths(ImmutableSet.<String>of());
  List<String> paths=ImmutableList.of("/","/content","/jcr:system","/testRoot","/some/other/path","/content/a","/content/a/b");
  for (  String path : paths) {
    assertFalse(path,supportedPaths.includes(path));
    assertFalse(path,supportedPaths.mayContainCug(path));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRootPath(){
  SupportedPaths supportedPaths=new SupportedPaths(ImmutableSet.of("/"));
  List<String> paths=ImmutableList.of("/","/content","/jcr:system","/testRoot","/some/other/path","/content/a","/content/a/b");
  for (  String path : paths) {
    assertTrue(path,supportedPaths.includes(path));
    assertTrue(path,supportedPaths.mayContainCug(path));
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIncludes(){
  SupportedPaths supportedPaths=new SupportedPaths(ImmutableSet.of("/content"));
  Map<String,Boolean> pathMap=new HashMap<String,Boolean>();
  pathMap.put("/content",true);
  pathMap.put("/content/a",true);
  pathMap.put("/content/a/rep:cugPolicy",true);
  pathMap.put("/content/a/b",true);
  pathMap.put("/content/a/b/c/jcr:primaryType",true);
  pathMap.put("/content/aa",true);
  pathMap.put("/content/aa/bb/cc",true);
  pathMap.put("/jcr:system",false);
  pathMap.put("/",false);
  pathMap.put("/testRoot",false);
  pathMap.put("/some/other/path",false);
  for (  String path : pathMap.keySet()) {
    boolean expected=pathMap.get(path);
    assertEquals(path,expected,supportedPaths.includes(path));
    assertEquals(path,expected,supportedPaths.includes(path + '/'));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.TopLevelPathTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContainsWithCugAtRoot() throws Exception {
  createCug(root,ROOT_PATH,EveryonePrincipal.NAME);
  root.commit();
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertTrue(tlp.contains(ROOT_PATH));
  assertFalse(tlp.contains(SUPPORTED_PATH));
  assertFalse(tlp.contains(SUPPORTED_PATH2));
  assertFalse(tlp.contains(SUPPORTED_PATH3));
  assertFalse(tlp.contains(UNSUPPORTED_PATH));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMayContainWithCug2() throws Exception {
  String cugPath=SUPPORTED_PATH + "/subtree";
  createCug(cugPath,EveryonePrincipal.getInstance());
  root.commit();
  Root readOnlyRoot=RootFactory.createReadOnlyRoot(root);
  TopLevelPaths tlp=new TopLevelPaths(readOnlyRoot);
  assertTrue(tlp.contains(PathUtils.ROOT_PATH));
  assertTrue(tlp.contains(SUPPORTED_PATH));
  assertTrue(tlp.contains(cugPath));
  assertFalse(tlp.contains(SUPPORTED_PATH3));
  CugPermissionProvider cugPermProvider=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2,SUPPORTED_PATH3),getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  Tree t=readOnlyRoot.getTree(PathUtils.ROOT_PATH);
  TreePermission rootTp=cugPermProvider.getTreePermission(t,TreePermission.EMPTY);
  assertTrue(rootTp instanceof EmptyCugTreePermission);
  TreePermission tp=rootTp;
  for (  String segm : PathUtils.elements(cugPath)) {
    t=t.getChild(segm);
    tp=cugPermProvider.getTreePermission(t,tp);
    assertCugPermission(tp,Text.isDescendantOrEqual(SUPPORTED_PATH,t.getPath()));
  }
  tp=getTreePermission(readOnlyRoot,Text.getAbsoluteParent(SUPPORTED_PATH3,0),cugPermProvider);
  assertSame(TreePermission.NO_RECOURSE,tp);
  for (  String p : new String[]{SUPPORTED_PATH2,UNSUPPORTED_PATH}) {
    tp=getTreePermission(readOnlyRoot,p,cugPermProvider);
    assertSame(p,TreePermission.NO_RECOURSE,tp);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMayContainWithCug() throws Exception {
  String cugPath=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree().getPath();
  createCug(cugPath,EveryonePrincipal.getInstance());
  root.commit();
  Root readOnlyRoot=RootFactory.createReadOnlyRoot(root);
  TopLevelPaths tlp=new TopLevelPaths(readOnlyRoot);
  for (  String p : PATHS) {
    assertEquals(p,Text.isDescendantOrEqual(p,cugPath),tlp.contains(p));
  }
  assertTrue(tlp.contains(Text.getAbsoluteParent(SUPPORTED_PATH3,0)));
  assertTrue(tlp.contains(cugPath));
  CugPermissionProvider cugPermProvider=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2,SUPPORTED_PATH3),getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  Tree t=readOnlyRoot.getTree(ROOT_PATH);
  TreePermission rootTp=cugPermProvider.getTreePermission(t,TreePermission.EMPTY);
  assertTrue(rootTp instanceof EmptyCugTreePermission);
  TreePermission tp=rootTp;
  for (  String segm : PathUtils.elements(cugPath)) {
    t=t.getChild(segm);
    tp=cugPermProvider.getTreePermission(t,tp);
    assertCugPermission(tp,Text.isDescendantOrEqual(SUPPORTED_PATH3,t.getPath()));
  }
  for (  String p : new String[]{SUPPORTED_PATH,SUPPORTED_PATH2,UNSUPPORTED_PATH}) {
    tp=getTreePermission(readOnlyRoot,p,cugPermProvider);
    assertSame(p,TreePermission.NO_RECOURSE,tp);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAnyNoCug(){
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertFalse(tlp.hasAny());
  assertFalse(tlp.hasAny());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContainsWithCug() throws Exception {
  String cugPath=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree().getPath();
  createCug(cugPath,EveryonePrincipal.getInstance());
  root.commit();
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertTrue(tlp.contains(ROOT_PATH));
  assertTrue(tlp.contains(SUPPORTED_PATH3));
  assertTrue(tlp.contains(cugPath));
  assertFalse(tlp.contains(cugPath + "/subtree"));
  assertFalse(tlp.contains(SUPPORTED_PATH));
  assertFalse(tlp.contains(UNSUPPORTED_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAnyWithCug() throws Exception {
  Tree tree=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree();
  createCug(tree.getPath(),EveryonePrincipal.getInstance());
  root.commit();
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertTrue(tlp.hasAny());
  assertTrue(tlp.hasAny());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContainsMany() throws Exception {
  NodeUtil n=new NodeUtil(root.getTree(SUPPORTED_PATH3));
  for (int i=0; i <= TopLevelPaths.MAX_CNT; i++) {
    Tree c=n.addChild("c" + i,NT_OAK_UNSTRUCTURED).getTree();
    createCug(c.getPath(),EveryonePrincipal.getInstance());
  }
  root.commit();
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertTrue(tlp.contains(ROOT_PATH));
  assertTrue(tlp.contains(SUPPORTED_PATH));
  assertTrue(tlp.contains(SUPPORTED_PATH2));
  assertTrue(tlp.contains(SUPPORTED_PATH3));
  assertTrue(tlp.contains(UNSUPPORTED_PATH));
  assertTrue(tlp.contains(Text.getRelativeParent(SUPPORTED_PATH3,1)));
  assertTrue(tlp.contains(SUPPORTED_PATH3 + "/c0"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.VersionTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionAtVersionableAboveSupported() throws Exception {
  Tree vh=checkNotNull(versionManager.getVersionHistory(root.getTree(SUPPORTED_PATH)));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH + "/a"));
  TreePermission tp=getTreePermission(root,vh.getPath(),pp);
  assertTrue(tp instanceof EmptyCugTreePermission);
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionVersionableUnsupportedPath() throws Exception {
  Tree versionable=root.getTree(UNSUPPORTED_PATH);
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  Tree t=root.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  for (  String segm : PathUtils.elements(vh.getPath())) {
    t=t.getChild(segm);
    tp=pp.getTreePermission(t,tp);
    if (JCR_SYSTEM.equals(segm) || ReadOnlyVersionManager.isVersionStoreTree(t)) {
      assertTrue(t.getPath(),tp instanceof EmptyCugTreePermission);
    }
 else {
      assertSame(t.getPath(),TreePermission.NO_RECOURSE,tp);
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionVersionable() throws Exception {
  Tree versionable=root.getTree("/content/a");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2),EveryonePrincipal.getInstance());
  Tree t=root.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  String path=PathUtils.concat(vh.getPath(),"1.0",JCR_FROZENNODE,"b/c");
  for (  String segm : PathUtils.elements(path)) {
    t=t.getChild(segm);
    tp=pp.getTreePermission(t,tp);
    if (JCR_SYSTEM.equals(segm) || ReadOnlyVersionManager.isVersionStoreTree(t)) {
      assertTrue(t.getPath(),tp instanceof EmptyCugTreePermission);
    }
 else {
      assertTrue(t.getPath(),tp instanceof CugTreePermission);
      assertEquals(t.getPath(),"c".equals(segm),tp.canRead());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadVersionContent() throws Exception {
  IdentifierManager idMgr=new IdentifierManager(testRoot);
  ReadOnlyVersionManager vMgr=ReadOnlyVersionManager.getInstance(testRoot,NamePathMapper.DEFAULT);
  for (  String path : readAccess) {
    Tree t=testRoot.getTree(path);
    assertTrue(path,t.exists());
    PropertyState ps=t.getProperty(JCR_VERSIONHISTORY);
    assertNotNull(ps);
    String vhUUID=ps.getValue(Type.STRING);
    assertEquals(vhUUID,ps.getValue(Type.STRING));
    Tree versionHistory=vMgr.getVersionHistory(t);
    assertNotNull(versionHistory);
    assertTrue(versionHistory.exists());
    assertTrue(versionHistory.getChild(JCR_ROOTVERSION).exists());
    assertFalse(versionHistory.getParent().exists());
    Tree vhTree=testRoot.getTree(versionHistory.getPath());
    assertTrue(vhTree.exists());
    String vhPath=idMgr.resolveUUID(vhUUID);
    assertNotNull(vhPath);
    assertEquals(versionHistory.getPath(),vhPath);
    assertTrue(testRoot.getTree(vhPath).exists());
    assertTrue(testRoot.getTree(vhPath + '/' + JCR_ROOTVERSION).exists());
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVersionableWithUnsupportedType() throws Exception {
  Tree versionable=root.getTree("/content");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  Tree frozen=vh.getChild("1.0").getChild(JCR_FROZENNODE).getChild("a").getChild("b").getChild("c");
  Tree invalidFrozen=frozen.addChild(REP_CUG_POLICY);
  invalidFrozen.setProperty(JCR_PRIMARYTYPE,NT_REP_CUG_POLICY);
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  TreePermission tp=getTreePermission(root,PathUtils.concat(vh.getPath(),"1.0",JCR_FROZENNODE,"a/b/c"),pp);
  TreePermission tpForUnsupportedType=pp.getTreePermission(invalidFrozen,TreeType.VERSION,tp);
  assertEquals(TreePermission.NO_RECOURSE,tpForUnsupportedType);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCugAtRoot() throws Exception {
  Tree versionable=root.getTree(UNSUPPORTED_PATH);
  String vhPath=checkNotNull(versionManager.getVersionHistory(versionable)).getPath();
  try {
    createCug(root,PathUtils.ROOT_PATH,EveryonePrincipal.NAME);
    root.commit();
    CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of("/"));
    Tree t=root.getTree("/");
    TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
    assertTrue(tp instanceof CugTreePermission);
    for (    String segm : PathUtils.elements(vhPath)) {
      t=t.getChild(segm);
      tp=pp.getTreePermission(t,tp);
      assertTrue(tp instanceof CugTreePermission);
    }
  }
  finally {
    root.getTree("/").removeProperty(JCR_MIXINTYPES);
    Tree cug=root.getTree("/rep:cugPolicy");
    if (cug.exists()) {
      cug.remove();
    }
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersionableRemoved2() throws Exception {
  Tree versionable=root.getTree("/content/a");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  assertFalse(testRoot.getTree(vh.getPath()).exists());
  versionable.remove();
  root.commit();
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(vh,null,Permissions.READ));
  assertFalse(pp.isGranted(vh,null,Permissions.READ));
  testRoot.refresh();
  assertTrue(testRoot.getTree(vh.getPath()).exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadVersionContentNoAccess() throws Exception {
  IdentifierManager idMgr=new IdentifierManager(testRoot);
  for (  String path : noReadAccess) {
    String vhUUID=checkNotNull(TreeUtil.getString(root.getTree(path),JCR_VERSIONHISTORY));
    String vhPath=PathUtils.concat(VERSION_STORE_PATH,versionManager.getVersionHistoryPath(vhUUID));
    Tree vHistory=testRoot.getTree(vhPath);
    assertFalse(vHistory.exists());
    assertFalse(vHistory.getParent().exists());
    assertFalse(vHistory.getChild(JCR_ROOTVERSION).exists());
    assertFalse(testRoot.getTree(vhPath + '/' + JCR_ROOTVERSION).exists());
    String vh=idMgr.resolveUUID(vhUUID);
    assertNull(path,vh);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersionableRemoved() throws Exception {
  Tree versionable=addVersionContent("/content/a/b/c");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  assertTrue(testRoot.getTree(vh.getPath()).exists());
  versionable.remove();
  root.commit();
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  assertEquals(Permissions.READ,pp.supportedPermissions(vh,null,Permissions.READ));
  assertFalse(pp.isGranted(vh,null,Permissions.READ));
  testRoot.refresh();
  assertFalse(testRoot.getTree(vh.getPath()).exists());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionVersionable2() throws Exception {
  Tree versionable=root.getTree("/content");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  Tree t=root.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  String path=PathUtils.concat(vh.getPath(),"1.0",JCR_FROZENNODE,"aa");
  for (  String segm : PathUtils.elements(path)) {
    t=t.getChild(segm);
    tp=pp.getTreePermission(t,tp);
    if (JCR_SYSTEM.equals(segm) || ReadOnlyVersionManager.isVersionStoreTree(t)) {
      assertTrue(t.getPath(),tp instanceof EmptyCugTreePermission);
    }
 else {
      assertTrue(t.getPath(),tp instanceof CugTreePermission);
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSupportedPermissions() throws Exception {
  Tree versionable=addVersionContent("/content/a/b/c");
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  Tree versionStorage=root.getTree(VersionConstants.VERSION_STORE_PATH);
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(versionStorage,null,Permissions.READ));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(versionStorage.getParent(),null,Permissions.READ));
  Tree vh=versionManager.getVersionHistory(versionable);
  assertEquals(Permissions.READ,pp.supportedPermissions(vh,null,Permissions.READ));
  vh=versionManager.getVersionHistory(root.getTree("/content2"));
  assertEquals(Permissions.READ,pp.supportedPermissions(vh,null,Permissions.READ));
  vh=versionManager.getVersionHistory(root.getTree(UNSUPPORTED_PATH));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(vh,null,Permissions.READ));
  vh=versionManager.getVersionHistory(root.getTree(SUPPORTED_PATH));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(vh,null,Permissions.READ));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testVersionableWithCugParent() throws Exception {
  addVersionContent("/content/aa/bb/cc");
  Tree cc=root.getTree("/content/aa/bb/cc");
  assertFalse(CugUtil.hasCug(cc));
  Tree vh=checkNotNull(versionManager.getVersionHistory(cc));
  Tree t=root.getTree("/");
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2),getTestGroupPrincipal());
  TreePermission tp=getTreePermission(root,vh.getPath(),pp);
  assertTrue(tp instanceof CugTreePermission);
  assertTrue(((CugTreePermission)tp).isInCug());
  assertTrue(((CugTreePermission)tp).isAllow());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.permission.PermissionsTest </h4><pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testActionSetProperty(){
  TreeLocation treeLocation=TreeLocation.create(root.getTree("/"));
  assertNull(treeLocation.getProperty());
  assertEquals(Permissions.ADD_PROPERTY,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,treeLocation,false));
  assertEquals(Permissions.MODIFY_ACCESS_CONTROL,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,treeLocation,true));
  TreeLocation nonExistingTree=TreeLocation.create(root.getTree("/nonExisting"));
  assertNull(nonExistingTree.getProperty());
  assertEquals(Permissions.ADD_PROPERTY,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,nonExistingTree,false));
  assertEquals(Permissions.MODIFY_ACCESS_CONTROL,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,nonExistingTree,true));
  TreeLocation nonExistingProp=TreeLocation.create(root,"/nonExisting");
  assertNull(nonExistingProp.getProperty());
  assertEquals(Permissions.ADD_PROPERTY,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,nonExistingProp,false));
  assertEquals(Permissions.MODIFY_ACCESS_CONTROL,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,nonExistingProp,true));
  TreeLocation existingProp=TreeLocation.create(root,"/jcr:primaryType");
  assertNotNull(existingProp.getProperty());
  assertEquals(Permissions.MODIFY_PROPERTY,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,existingProp,false));
  assertEquals(Permissions.MODIFY_ACCESS_CONTROL,Permissions.getPermissions(Session.ACTION_SET_PROPERTY,existingProp,true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.AbstractRestrictionProviderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteRestrictions() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  Tree aceTree=getAceTree();
  restrictionProvider.writeRestrictions(testPath,aceTree,ImmutableSet.<Restriction>of(r));
  assertTrue(aceTree.hasChild(REP_RESTRICTIONS));
  Tree restr=aceTree.getChild(REP_RESTRICTIONS);
  assertEquals(r.getProperty(),restr.getProperty(REP_GLOB));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,valueFactory.createValue("nt:folder",PropertyType.NAME),valueFactory.createValue("nt:file",PropertyType.NAME));
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  PropertyState ps=r.getProperty();
  assertTrue(ps.isArray());
  assertEquals(Type.NAMES,ps.getType());
  List<Value> vs=ValueFactoryImpl.createValues(ps,namePathMapper);
  assertArrayEquals(nameValues,vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction3() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,nameValue);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertArrayEquals(new Value[]{nameValue},vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadRestrictions() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  Tree aceTree=getAceTree(r);
  Set<Restriction> restrictions=restrictionProvider.readRestrictions(testPath,aceTree);
  assertEquals(1,restrictions.size());
  assertTrue(restrictions.contains(r));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction2() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,nameValues);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  PropertyState ps=r.getProperty();
  assertTrue(ps.isArray());
  assertEquals(Type.NAMES,ps.getType());
  List<Value> vs=ValueFactoryImpl.createValues(ps,namePathMapper);
  assertArrayEquals(nameValues,vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateEmptyMvRestriction() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertNotNull(vs);
  assertEquals(0,vs.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateRestriction() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  assertNotNull(r);
  assertEquals(REP_GLOB,r.getDefinition().getName());
  assertEquals(globValue.getString(),r.getProperty().getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedRestrictions() throws Exception {
  Set<RestrictionDefinition> defs=restrictionProvider.getSupportedRestrictions(testPath);
  assertNotNull(defs);
  assertEquals(supported.size(),defs.size());
  for (  RestrictionDefinition def : supported.values()) {
    assertTrue(defs.contains(def));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadRestrictionsForUnsupportedPath() throws Exception {
  Set<Restriction> restrictions=restrictionProvider.readRestrictions(unsupportedPath,getAceTree());
  assertTrue(restrictions.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedRestrictionsForUnsupportedPath() throws Exception {
  Set<RestrictionDefinition> defs=restrictionProvider.getSupportedRestrictions(unsupportedPath);
  assertNotNull(defs);
  assertTrue(defs.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateEmptyMvRestriction2() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,new Value[0]);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertNotNull(vs);
  assertEquals(0,vs.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteInvalidRestrictions() throws Exception {
  PropertyState ps=PropertyStates.createProperty(REP_GLOB,valueFactory.createValue(false));
  Tree aceTree=getAceTree();
  restrictionProvider.writeRestrictions(testPath,aceTree,ImmutableSet.<Restriction>of(new RestrictionImpl(ps,false)));
  assertTrue(aceTree.hasChild(REP_RESTRICTIONS));
  Tree restr=aceTree.getChild(REP_RESTRICTIONS);
  assertEquals(ps,restr.getProperty(REP_GLOB));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.CompositeRestrictionProviderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedRestrictions(){
  String[] paths=new String[]{null,"/testPath"};
  for (  String path : paths) {
    Set<RestrictionDefinition> defs=provider.getSupportedRestrictions(path);
    int expectedSize=rp1.getSupportedRestrictions(path).size() + rp2.getSupportedRestrictions(path).size();
    assertEquals(expectedSize,defs.size());
    assertTrue(defs.containsAll(rp1.getSupportedRestrictions(path)));
    assertTrue(defs.containsAll(rp2.getSupportedRestrictions(path)));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetRestrictionPattern() throws Exception {
  NodeUtil aceNode=new NodeUtil(root.getTree("/")).addChild("test",NT_REP_GRANT_ACE);
  NodeUtil rNode=aceNode.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS);
  rNode.setString(REP_GLOB,"*");
  assertFalse(provider.getPattern("/test",aceNode.getTree()) instanceof CompositePattern);
  rNode.setBoolean("boolean",true);
  rNode.setValues("longs",new Value[]{vf.createValue(10),vf.createValue(290)});
  assertTrue(provider.getPattern("/test",rNode.getTree()) instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-12 type-5 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadRestrictions() throws Exception {
  NodeUtil aceNode=new NodeUtil(root.getTree("/")).addChild("test",NT_REP_GRANT_ACE);
  aceNode.setBoolean("boolean",true);
  aceNode.setValues("longs",new Value[]{vf.createValue(10),vf.createValue(290)});
  aceNode.setString(REP_GLOB,"*");
  aceNode.setNames(REP_NT_NAMES);
  aceNode.setString("invalid","val");
  aceNode.setStrings("invalid2","val1","val2","val3");
  Set<Restriction> restrictions=provider.readRestrictions("/test",aceNode.getTree());
  assertEquals(4,restrictions.size());
  for (  Restriction r : restrictions) {
    String name=r.getDefinition().getName();
    if (!supported.contains(name)) {
      fail("read unsupported restriction");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.principal.AbstractPrincipalProviderTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testFindUserPrincipal() throws Exception {
  User testUser=null;
  try {
    UserManager userMgr=getUserManager(root);
    testUser=userMgr.createUser("TestUser","pw");
    root.commit();
    String principalName=testUser.getPrincipal().getName();
    assertNotNull(principalProvider.getPrincipal(principalName));
    List<String> nameHints=new ArrayList<String>();
    nameHints.add("TestUser");
    nameHints.add("Test");
    nameHints.add("User");
    nameHints.add("stUs");
    assertResult(principalProvider,nameHints,principalName,PrincipalManager.SEARCH_TYPE_NOT_GROUP,true);
    assertResult(principalProvider,nameHints,principalName,PrincipalManager.SEARCH_TYPE_ALL,true);
    assertResult(principalProvider,nameHints,principalName,PrincipalManager.SEARCH_TYPE_GROUP,false);
  }
  finally {
    if (testUser != null) {
      testUser.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testFindGroupPrincipal() throws Exception {
  Group testGroup=null;
  try {
    UserManager userMgr=getUserManager(root);
    testGroup=userMgr.createGroup("TestGroup");
    root.commit();
    String principalName=testGroup.getPrincipal().getName();
    assertNotNull(principalProvider.getPrincipal(principalName));
    List<String> nameHints=new ArrayList<String>();
    nameHints.add("TestGroup");
    nameHints.add("Test");
    nameHints.add("Group");
    nameHints.add("stGr");
    assertResult(principalProvider,nameHints,principalName,PrincipalManager.SEARCH_TYPE_GROUP,true);
    assertResult(principalProvider,nameHints,principalName,PrincipalManager.SEARCH_TYPE_ALL,true);
    assertResult(principalProvider,nameHints,principalName,PrincipalManager.SEARCH_TYPE_NOT_GROUP,false);
  }
  finally {
    if (testGroup != null) {
      testGroup.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testUserPrincipal() throws Exception {
  User user=getTestUser();
  Principal principal=principalProvider.getPrincipal(user.getPrincipal().getName());
  assertNotNull(principal);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupPrincipal() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(group.getPrincipal().getName());
    assertNotNull(principal);
    assertTrue(principal instanceof java.security.acl.Group);
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserPrincipal() throws Exception {
  User user=getUserManager(root).createSystemUser("testSystemUser" + UUID.randomUUID(),null);
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(user.getPrincipal().getName());
    assertNotNull(principal);
    assertTrue(principal instanceof SystemUserPrincipal);
  }
  finally {
    user.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipals() throws Exception {
  String adminId=adminSession.getAuthInfo().getUserID();
  Set<? extends Principal> principals=principalProvider.getPrincipals(adminId);
  assertNotNull(principals);
  assertFalse(principals.isEmpty());
  assertTrue(principals.contains(EveryonePrincipal.getInstance()));
  for (  Principal principal : principals) {
    assertNotNull(principalProvider.getPrincipal(principal.getName()));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAdminPrincipal() throws Exception {
  String userId=adminSession.getAuthInfo().getUserID();
  Authorizable admin=getUserManager(root).getAuthorizable(userId);
  if (admin != null && admin.getPrincipal() instanceof AdminPrincipal) {
    Principal principal=principalProvider.getPrincipal(admin.getPrincipal().getName());
    assertTrue(principal instanceof AdminPrincipal);
    Set<? extends Principal> principals=principalProvider.getPrincipals(userId);
    boolean containsAdminPrincipal=false;
    for (    Principal p : principals) {
      if (p instanceof AdminPrincipal) {
        containsAdminPrincipal=true;
        break;
      }
    }
    assertTrue(containsAdminPrincipal);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEveryone() throws Exception {
  Principal everyone=principalProvider.getPrincipal(EveryonePrincipal.NAME);
  assertTrue(everyone instanceof EveryonePrincipal);
  Group everyoneGroup=null;
  try {
    UserManager userMgr=getUserManager(root);
    everyoneGroup=userMgr.createGroup(EveryonePrincipal.NAME);
    root.commit();
    Principal ep=principalProvider.getPrincipal(EveryonePrincipal.NAME);
    assertFalse(ep instanceof EveryonePrincipal);
  }
  finally {
    if (everyoneGroup != null) {
      everyoneGroup.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBitsProviderTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAggregation() throws RepositoryException {
  PrivilegeBits writeBits=bitsProvider.getBits(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_MODIFY_PROPERTIES);
  Set<String> names=bitsProvider.getPrivilegeNames(writeBits);
  assertEquals(1,names.size());
  assertEquals(JCR_WRITE,names.iterator().next());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPrivilegeNames() throws RepositoryException {
  PrivilegeBits bits=bitsProvider.getBits(JCR_READ_ACCESS_CONTROL);
  Set<String> names=bitsProvider.getPrivilegeNames(bits);
  assertEquals(1,names.size());
  assertEquals(JCR_READ_ACCESS_CONTROL,names.iterator().next());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTree(){
  assertNotNull(bitsProvider.getPrivilegesTree());
  assertEquals(PRIVILEGES_PATH,bitsProvider.getPrivilegesTree().getPath());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetBitsFromEmpty(){
  assertEquals(PrivilegeBits.EMPTY,bitsProvider.getBits());
  assertEquals(PrivilegeBits.EMPTY,bitsProvider.getBits(new String[0]));
  assertEquals(PrivilegeBits.EMPTY,bitsProvider.getBits(""));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAll(){
  PrivilegeBits all=bitsProvider.getBits(JCR_ALL);
  assertFalse(all.isEmpty());
  assertEquals(Collections.singleton(JCR_ALL),bitsProvider.getPrivilegeNames(all));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllAggregation() throws Exception {
  PrivilegeBits all=bitsProvider.getBits(JCR_ALL);
  PrivilegeManager pMgr=getSecurityProvider().getConfiguration(PrivilegeConfiguration.class).getPrivilegeManager(root,NamePathMapper.DEFAULT);
  Iterable<Privilege> declaredAggr=Arrays.asList(pMgr.getPrivilege(JCR_ALL).getDeclaredAggregatePrivileges());
  String[] allAggregates=Iterables.toArray(Iterables.transform(declaredAggr,new Function<Privilege,String>(){
    @Override public String apply(    @Nullable Privilege privilege){
      return checkNotNull(privilege).getName();
    }
  }
),String.class);
  PrivilegeBits all2=bitsProvider.getBits(allAggregates);
  assertEquals(all,all2);
  assertEquals(Collections.singleton(JCR_ALL),bitsProvider.getPrivilegeNames(all2));
  PrivilegeBits bits=PrivilegeBits.getInstance();
  for (  String name : allAggregates) {
    bits.add(bitsProvider.getBits(name));
  }
  assertEquals(all,bits.unmodifiable());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRedundantAggregation() throws RepositoryException {
  PrivilegeBits writeBits=bitsProvider.getBits(REP_WRITE);
  Set<String> names=bitsProvider.getPrivilegeNames(writeBits);
  assertEquals(1,names.size());
  assertEquals(REP_WRITE,names.iterator().next());
  writeBits=bitsProvider.getBits(REP_WRITE,JCR_WRITE);
  names=bitsProvider.getPrivilegeNames(writeBits);
  assertEquals(1,names.size());
  assertEquals(REP_WRITE,names.iterator().next());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAggregatedNames() throws Exception {
  assertFalse(bitsProvider.getAggregatedPrivilegeNames().iterator().hasNext());
  assertFalse(bitsProvider.getAggregatedPrivilegeNames("unknown").iterator().hasNext());
  for (  String nonAggregate : PrivilegeConstants.NON_AGGREGATE_PRIVILEGES) {
    assertEquals(Collections.singleton(nonAggregate),bitsProvider.getAggregatedPrivilegeNames(nonAggregate));
  }
  Map<String[],Set<String>> testMap=Maps.newHashMap();
  testMap.put(new String[]{JCR_READ},ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES));
  testMap.put(new String[]{JCR_MODIFY_PROPERTIES},ImmutableSet.of(REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES));
  testMap.put(new String[]{JCR_WRITE},ImmutableSet.of(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES));
  testMap.put(new String[]{REP_WRITE},ImmutableSet.of(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_NODE_TYPE_MANAGEMENT));
  testMap.put(new String[]{JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},ImmutableSet.of(JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL));
  testMap.put(new String[]{JCR_READ,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL));
  testMap.put(new String[]{JCR_ALL},NON_AGGREGATE_PRIVILEGES);
  testMap.put(new String[]{JCR_READ,JCR_WRITE,JCR_ALL},NON_AGGREGATE_PRIVILEGES);
  for (  String[] prvNames : testMap.keySet()) {
    Set<String> expected=testMap.get(prvNames);
    assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(prvNames)));
    assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(prvNames)));
  }
  PrivilegeManager pMgr=getPrivilegeManager(root);
  pMgr.registerPrivilege("test1",true,null);
  assertEquals(ImmutableSet.of("test1"),ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames("test1")));
  Set<String> expected=Sets.newHashSet(NON_AGGREGATE_PRIVILEGES);
  expected.add("test1");
  assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(JCR_ALL)));
  assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(JCR_ALL)));
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnknownAggregation() throws RepositoryException {
  PrivilegeBits bits=bitsProvider.getBits(REP_WRITE,JCR_LIFECYCLE_MANAGEMENT);
  Set<String> names=bitsProvider.getPrivilegeNames(bits);
  assertEquals(2,names.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBits(){
  PrivilegeBits bits=bitsProvider.getBits(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES);
  assertFalse(bits.isEmpty());
  PrivilegeBits mod=PrivilegeBits.getInstance(bitsProvider.getBits(JCR_ADD_CHILD_NODES)).add(bitsProvider.getBits(JCR_REMOVE_CHILD_NODES));
  assertEquals(bits,mod.unmodifiable());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBitsTest </h4><pre class="type-13 type-9 type-5 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNextBits(){
  assertSame(PrivilegeBits.EMPTY,PrivilegeBits.EMPTY.nextBits());
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  long l=getLongValue(pb);
  while (l < Long.MAX_VALUE / 2) {
    l=l << 1;
    pb=pb.nextBits();
    assertEquals(l,getLongValue(pb));
  }
  for (int i=0; i < 10; i++) {
    PrivilegeBits nxt=pb.nextBits();
    assertEquals(nxt,pb.nextBits());
    assertFalse(pb.equals(nxt));
    pb=nxt;
  }
  pb=READ_NODES_PRIVILEGE_BITS;
  for (int i=0; i < 100; i++) {
    PrivilegeBits modifiable=PrivilegeBits.getInstance(pb);
    try {
      modifiable.nextBits();
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    pb=pb.nextBits();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdd(){
  try {
    PrivilegeBits.EMPTY.add(PrivilegeBits.EMPTY);
    fail("UnsupportedOperation expected");
  }
 catch (  UnsupportedOperationException e) {
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    try {
      pb.add(PrivilegeBits.EMPTY);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.add(mod);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    PrivilegeBits nxt=pb.nextBits();
    try {
      pb.add(nxt);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    long before=getLongValue(mod);
    long nxtLong=getLongValue(nxt);
    mod.add(nxt);
    if (getLongValue(nxt) != 0) {
      assertEquals(before | nxtLong,getLongValue(mod));
    }
    assertTrue(mod.includes(nxt));
    PrivilegeBits tmp=PrivilegeBits.getInstance(pb);
    assertTrue(tmp.includes(pb));
    assertFalse(tmp.includes(nxt));
    if (READ_NODES_PRIVILEGE_BITS.equals(pb)) {
      assertTrue(tmp.includes(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES)));
    }
 else {
      assertFalse(tmp.includes(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES)));
    }
    tmp.add(nxt);
    assertTrue(tmp.includes(pb) && tmp.includes(nxt));
    if (READ_NODES_PRIVILEGE_BITS.equals(pb)) {
      assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    }
 else {
      assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    }
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRetain(){
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  List<PrivilegeBits> pbs=new ArrayList<PrivilegeBits>();
  pbs.add(pb);
  Random random=new Random();
  for (int i=0; i < 100; i++) {
    PrivilegeBits nxt=pb.nextBits();
    PrivilegeBits mod=PrivilegeBits.getInstance(nxt,pb);
    mod.retain(nxt);
    assertEquivalent(nxt,mod);
    mod=PrivilegeBits.getInstance(nxt);
    mod.retain(pb);
    assertTrue(nxt.toString(),mod.isEmpty());
    mod=PrivilegeBits.getInstance(nxt);
    mod.retain(READ_NODES_PRIVILEGE_BITS);
    assertTrue(nxt.toString(),mod.isEmpty());
    mod=PrivilegeBits.getInstance(nxt,READ_NODES_PRIVILEGE_BITS);
    mod.retain(nxt);
    assertEquivalent(nxt,mod);
    mod=PrivilegeBits.getInstance(nxt,pb,READ_NODES_PRIVILEGE_BITS);
    mod.retain(READ_NODES_PRIVILEGE_BITS);
    assertEquivalent(READ_NODES_PRIVILEGE_BITS,mod);
    mod=PrivilegeBits.getInstance(nxt);
    PrivilegeBits other=PrivilegeBits.getInstance();
    for (int j=0; j < pbs.size() / 2; j++) {
      other.add(pbs.get(random.nextInt(pbs.size() - 1)));
    }
    mod.add(other);
    mod.retain(other);
    assertEquivalent(other,mod);
    other.retain(nxt);
    assertTrue(other.isEmpty());
    pbs.add(nxt);
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCalculatePermissions(){
  PrivilegeBitsProvider provider=new PrivilegeBitsProvider(root);
  Map<PrivilegeBits,Long> simple=new HashMap<PrivilegeBits,Long>();
  simple.put(PrivilegeBits.EMPTY,Permissions.NO_PERMISSION);
  simple.put(provider.getBits(JCR_READ),Permissions.READ);
  simple.put(provider.getBits(JCR_LOCK_MANAGEMENT),Permissions.LOCK_MANAGEMENT);
  simple.put(provider.getBits(JCR_VERSION_MANAGEMENT),Permissions.VERSION_MANAGEMENT);
  simple.put(provider.getBits(JCR_READ_ACCESS_CONTROL),Permissions.READ_ACCESS_CONTROL);
  simple.put(provider.getBits(JCR_MODIFY_ACCESS_CONTROL),Permissions.MODIFY_ACCESS_CONTROL);
  simple.put(provider.getBits(REP_READ_NODES),Permissions.READ_NODE);
  simple.put(provider.getBits(REP_READ_PROPERTIES),Permissions.READ_PROPERTY);
  simple.put(provider.getBits(REP_USER_MANAGEMENT),Permissions.USER_MANAGEMENT);
  simple.put(provider.getBits(JCR_MODIFY_PROPERTIES),Permissions.SET_PROPERTY);
  simple.put(provider.getBits(REP_ADD_PROPERTIES),Permissions.ADD_PROPERTY);
  simple.put(provider.getBits(REP_ALTER_PROPERTIES),Permissions.MODIFY_PROPERTY);
  simple.put(provider.getBits(REP_REMOVE_PROPERTIES),Permissions.REMOVE_PROPERTY);
  simple.put(provider.getBits(REP_INDEX_DEFINITION_MANAGEMENT),Permissions.INDEX_DEFINITION_MANAGEMENT);
  for (  PrivilegeBits pb : simple.keySet()) {
    long expected=simple.get(pb).longValue();
    assertTrue(expected == PrivilegeBits.calculatePermissions(pb,PrivilegeBits.EMPTY,true));
    assertTrue(expected == PrivilegeBits.calculatePermissions(pb,pb,true));
  }
  PrivilegeBits add_change=provider.getBits(REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES);
  long permissions=(Permissions.ADD_PROPERTY | Permissions.MODIFY_PROPERTY);
  assertTrue(permissions == PrivilegeBits.calculatePermissions(add_change,PrivilegeBits.EMPTY,true));
  assertTrue(permissions == PrivilegeBits.calculatePermissions(add_change,add_change,true));
  PrivilegeBits add_rm=provider.getBits(REP_ADD_PROPERTIES,REP_REMOVE_PROPERTIES);
  permissions=(Permissions.ADD_PROPERTY | Permissions.REMOVE_PROPERTY);
  assertTrue(permissions == PrivilegeBits.calculatePermissions(add_rm,PrivilegeBits.EMPTY,true));
  assertTrue(permissions == PrivilegeBits.calculatePermissions(add_rm,add_rm,true));
  PrivilegeBits ch_rm=provider.getBits(REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES);
  permissions=(Permissions.MODIFY_PROPERTY | Permissions.REMOVE_PROPERTY);
  assertTrue(permissions == PrivilegeBits.calculatePermissions(ch_rm,PrivilegeBits.EMPTY,true));
  assertTrue(permissions == PrivilegeBits.calculatePermissions(ch_rm,add_rm,true));
  PrivilegeBits all=provider.getBits(JCR_ALL);
  assertFalse(Permissions.ALL == PrivilegeBits.calculatePermissions(all,PrivilegeBits.EMPTY,true));
  assertTrue(Permissions.ALL == PrivilegeBits.calculatePermissions(all,all,true));
  PrivilegeBits addChild=provider.getBits(JCR_ADD_CHILD_NODES);
  assertFalse(Permissions.ADD_NODE == PrivilegeBits.calculatePermissions(addChild,PrivilegeBits.EMPTY,true));
  assertTrue(Permissions.ADD_NODE == PrivilegeBits.calculatePermissions(PrivilegeBits.EMPTY,addChild,true));
  PrivilegeBits removeChild=provider.getBits(JCR_REMOVE_CHILD_NODES);
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(removeChild,PrivilegeBits.EMPTY,true));
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(PrivilegeBits.EMPTY,removeChild,true));
  PrivilegeBits removeNode=provider.getBits(JCR_REMOVE_NODE);
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(removeNode,PrivilegeBits.EMPTY,true));
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(PrivilegeBits.EMPTY,removeNode,true));
  PrivilegeBits remove=provider.getBits(JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE);
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(remove,PrivilegeBits.EMPTY,true));
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(PrivilegeBits.EMPTY,remove,true));
  assertTrue(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(remove,remove,true));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnmodifiable(){
  assertSame(PrivilegeBits.EMPTY,PrivilegeBits.EMPTY.unmodifiable());
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    PrivilegeBits nxt=pb.nextBits();
    assertSame(nxt,nxt.unmodifiable());
    assertEquals(nxt,nxt.unmodifiable());
    mod.add(nxt);
    assertNotSame(mod,mod.unmodifiable());
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsEmpty(){
  assertTrue(PrivilegeBits.EMPTY.isEmpty());
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    assertFalse(pb.isEmpty());
    assertFalse(PrivilegeBits.getInstance(pb).isEmpty());
    pb=pb.nextBits();
    mod.add(pb);
    assertFalse(mod.isEmpty());
    PrivilegeBits tmp=PrivilegeBits.getInstance(pb);
    tmp.diff(pb);
    assertTrue(tmp.toString(),tmp.isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDiff(){
  try {
    PrivilegeBits.EMPTY.diff(PrivilegeBits.EMPTY);
    fail("UnsupportedOperation expected");
  }
 catch (  UnsupportedOperationException e) {
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    PrivilegeBits nxt=pb.nextBits();
    try {
      pb.diff(nxt);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.diff(mod);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    PrivilegeBits before=PrivilegeBits.getInstance(mod);
    mod.diff(nxt);
    assertEquivalent(before,mod);
    mod.add(nxt);
    assertFalse(before.equals(mod));
    mod.diff(nxt);
    assertEquivalent(before,mod);
    mod.add(nxt);
    PrivilegeBits tmp=PrivilegeBits.getInstance(pb);
    tmp.add(nxt);
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    tmp.diff(tmp);
    assertEquivalent(PrivilegeBits.EMPTY,tmp);
    tmp=PrivilegeBits.getInstance(pb);
    tmp.add(nxt);
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    tmp.diff(PrivilegeBits.getInstance(tmp));
    assertEquivalent(PrivilegeBits.EMPTY,tmp);
    tmp=PrivilegeBits.getInstance(pb);
    tmp.diff(nxt);
    assertEquivalent(PrivilegeBits.getInstance(pb),tmp);
    tmp=PrivilegeBits.getInstance(nxt);
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    assertTrue(tmp.includes(nxt));
    tmp.diff(nxt);
    assertEquivalent(READ_NODES_PRIVILEGE_BITS,tmp);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    assertFalse(tmp.includes(nxt));
    tmp=PrivilegeBits.getInstance(pb);
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    PrivilegeBits tmp2=PrivilegeBits.getInstance(pb);
    tmp2.add(nxt);
    PrivilegeBits tmp3=PrivilegeBits.getInstance(tmp2);
    assertEquivalent(tmp2,tmp3);
    tmp.diff(tmp2);
    if (READ_NODES_PRIVILEGE_BITS.equals(pb)) {
      assertEquivalent(PrivilegeBits.EMPTY,tmp);
    }
 else {
      assertEquivalent(READ_NODES_PRIVILEGE_BITS,tmp);
    }
    assertEquivalent(tmp3,tmp2);
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIncludes(){
  assertTrue(PrivilegeBits.EMPTY.includes(PrivilegeBits.EMPTY));
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance();
  for (int i=0; i < 100; i++) {
    assertFalse(PrivilegeBits.EMPTY.includes(pb));
    assertTrue(pb.includes(PrivilegeBits.EMPTY));
    mod.add(pb);
    assertTrue(mod.includes(pb));
    PrivilegeBits nxt=pb.nextBits();
    assertTrue(nxt.includes(nxt));
    assertTrue(nxt.includes(PrivilegeBits.getInstance(nxt)));
    assertFalse(pb + " should not include " + nxt,pb.includes(nxt));
    assertFalse(nxt + " should not include " + pb,nxt.includes(pb));
    assertFalse(mod.includes(nxt));
    assertFalse(nxt.includes(mod));
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLongValue(){
  assertEquals(NO_PRIVILEGE,getLongValue(PrivilegeBits.EMPTY));
  for (  long l : LONGS) {
    PrivilegeBits bits=PrivilegeBits.getInstance(createPropertyState(l));
    assertEquals(l,getLongValue(bits));
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  long l=getLongValue(pb);
  while (l < Long.MAX_VALUE / 2) {
    l=l << 1;
    pb=pb.nextBits();
    assertEquals(l,getLongValue(pb));
  }
  for (int i=0; i < 10; i++) {
    pb=pb.nextBits();
    assertEquals(0,getLongValue(pb));
  }
  pb=READ_NODES_PRIVILEGE_BITS;
  for (int i=0; i < 100; i++) {
    PrivilegeBits modifiable=PrivilegeBits.getInstance(pb);
    assertEquals(getLongValue(pb),getLongValue(modifiable));
    pb=pb.nextBits();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetainSimple(){
  PrivilegeBits pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  assertEquals(pb,pb.retain(pb));
  assertEquals(pb,pb.retain(READ_NODES_PRIVILEGE_BITS));
  pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  pb.retain(PrivilegeBits.getInstance());
  assertTrue(pb.isEmpty());
  pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  pb.retain(PrivilegeBits.EMPTY);
  assertTrue(pb.isEmpty());
  PrivilegeBits write=PrivilegeBits.BUILT_IN.get(PrivilegeBits.REP_WRITE);
  pb=PrivilegeBits.getInstance().add(write);
  assertEquals(pb,pb.retain(pb));
  assertEquals(pb,pb.retain(write));
  pb.retain(READ_NODES_PRIVILEGE_BITS);
  assertTrue(pb.isEmpty());
  pb.add(READ_NODES_PRIVILEGE_BITS).add(write);
  pb.retain(write);
  assertEquivalent(write,pb);
  assertFalse(pb.includes(READ_NODES_PRIVILEGE_BITS));
  PrivilegeBits lock=PrivilegeBits.BUILT_IN.get(PrivilegeBits.JCR_LOCK_MANAGEMENT);
  PrivilegeBits lw=PrivilegeBits.getInstance(write,lock);
  pb.add(READ_NODES_PRIVILEGE_BITS).add(write).add(lock);
  pb.retain(lw);
  assertEquivalent(lw,pb);
  assertFalse(pb.includes(READ_NODES_PRIVILEGE_BITS));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetInstanceFromPropertyState(){
  for (  long l : LONGS) {
    PropertyState property=createPropertyState(l);
    PrivilegeBits pb=PrivilegeBits.getInstance(property);
    assertEquivalent(pb,PrivilegeBits.getInstance(property));
    assertSame(pb,pb.unmodifiable());
    assertEquivalent(pb,PrivilegeBits.getInstance(pb));
    assertEquivalent(PrivilegeBits.getInstance(pb),pb);
    assertNotSame(pb,PrivilegeBits.getInstance(pb));
    try {
      pb.add(READ_NODES_PRIVILEGE_BITS);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.addDifference(READ_NODES_PRIVILEGE_BITS,READ_NODES_PRIVILEGE_BITS);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.diff(READ_NODES_PRIVILEGE_BITS);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddDifference(){
  try {
    PrivilegeBits.EMPTY.addDifference(PrivilegeBits.EMPTY,PrivilegeBits.EMPTY);
    fail("UnsupportedOperation expected");
  }
 catch (  UnsupportedOperationException e) {
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    PrivilegeBits nxt=pb.nextBits();
    try {
      pb.addDifference(nxt,mod);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.addDifference(nxt,READ_NODES_PRIVILEGE_BITS);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    PrivilegeBits tmp=PrivilegeBits.getInstance(mod);
    tmp.addDifference(nxt,READ_NODES_PRIVILEGE_BITS);
    mod.add(nxt);
    assertEquivalent(mod,tmp);
    if (!pb.equals(READ_NODES_PRIVILEGE_BITS)) {
      tmp=PrivilegeBits.getInstance(nxt);
      PrivilegeBits mod2=PrivilegeBits.getInstance(mod);
      tmp.addDifference(mod2,READ_NODES_PRIVILEGE_BITS);
      assertFalse(nxt.equals(tmp));
      assertEquivalent(mod2,mod);
      assertTrue(tmp.includes(pb));
      assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
      assertFalse(tmp.includes(mod));
    }
    tmp=PrivilegeBits.getInstance(nxt);
    PrivilegeBits mod2=PrivilegeBits.getInstance(mod);
    tmp.addDifference(READ_NODES_PRIVILEGE_BITS,mod2);
    assertEquivalent(nxt,tmp);
    assertEquivalent(mod2,mod);
    assertFalse(tmp.includes(pb));
    assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    assertFalse(tmp.includes(mod));
    tmp=PrivilegeBits.getInstance(nxt);
    tmp.addDifference(READ_NODES_PRIVILEGE_BITS,READ_NODES_PRIVILEGE_BITS);
    assertEquivalent(nxt,tmp);
    assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    tmp=PrivilegeBits.getInstance(mod);
    tmp.addDifference(READ_NODES_PRIVILEGE_BITS,READ_NODES_PRIVILEGE_BITS);
    assertEquivalent(mod,tmp);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    pb=nxt;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.action.AccessControlActionTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAdministrativePrincipals() throws Exception {
  UserManager userMgr=getUserManager(root);
  Group gr=null;
  try {
    gr=userMgr.createGroup("administrativePrincipalName");
    root.commit();
    AccessControlManager acMgr=getAccessControlManager(root);
    AccessControlPolicy[] policies=acMgr.getPolicies(gr.getPath());
    assertEquals(0,policies.length);
  }
  finally {
    root.refresh();
    if (gr != null) {
      gr.remove();
    }
    root.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.action.PasswordValidationActionTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPasswordValidationActionOnCreate() throws Exception {
  String hashed=PasswordUtil.buildPasswordHash("DWkej32H");
  testUser=getUserManager(root).createUser("testuser",hashed);
  root.commit();
  String pwValue=root.getTree(testUser.getPath()).getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING);
  assertFalse(PasswordUtil.isPlainTextPassword(pwValue));
  assertTrue(PasswordUtil.isSame(pwValue,hashed));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.AbstractRebaseDiffTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void addExistingNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setChildNode("n");
  headBuilder.setChildNode("m").setChildNode("m1");
  headBuilder.getChildNode("m").setProperty("a",1);
  headBuilder.getChildNode("m").setProperty("p",1);
  headBuilder.getChildNode("m").setChildNode("mm").setChildNode("mm1");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setChildNode("n");
  branchBuilder.setChildNode("m").setChildNode("m2");
  branchBuilder.getChildNode("m").setProperty("a",1);
  branchBuilder.getChildNode("m").setProperty("q",1);
  branchBuilder.getChildNode("m").setChildNode("mm").setChildNode("mm2");
  NodeState branch=branchBuilder.getNodeState();
  NodeBuilder builder=head.builder();
  RebaseDiff rebaseDiff=new RebaseDiff(builder);
  branch.compareAgainstBaseState(base,rebaseDiff);
  NodeBuilder expectedBuilder=base.builder();
  expectedBuilder.setChildNode("n");
  expectedBuilder.setChildNode("n");
  expectedBuilder.setChildNode("m").setChildNode("m1");
  expectedBuilder.getChildNode("m").setChildNode("m2");
  expectedBuilder.getChildNode("m").setProperty("a",1);
  expectedBuilder.getChildNode("m").setProperty("p",1);
  expectedBuilder.getChildNode("m").setProperty("q",1);
  expectedBuilder.getChildNode("m").setChildNode("mm").setChildNode("mm1");
  expectedBuilder.getChildNode("m").getChildNode("mm").setChildNode("mm2");
  assertEquals(expectedBuilder.getNodeState(),builder.getNodeState());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteDeletedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.removeProperty("x");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.removeProperty("x");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteDeletedProperty(    NodeBuilder builder,    PropertyState before){
      assertEquals(createProperty("x",1),before);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeDeletedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.removeProperty("x");
  headBuilder.removeProperty("y");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("x",1);
  branchBuilder.setProperty("y",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeDeletedProperty(    NodeBuilder builder,    PropertyState after){
      assertEquals(createProperty("y",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("p",1);
  headBuilder.setProperty("p",1);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("p",1);
  branchBuilder.setProperty("p",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void addExistingProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("p",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingNodeWithConflict(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setChildNode("n");
  headBuilder.setChildNode("m").setChildNode("m1");
  headBuilder.getChildNode("m").setProperty("p",1);
  headBuilder.getChildNode("m").setChildNode("mm").setChildNode("mmm").setProperty("pp",1);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setChildNode("n");
  branchBuilder.setChildNode("m").setChildNode("m2");
  branchBuilder.getChildNode("m").setProperty("q",1);
  branchBuilder.getChildNode("m").setChildNode("mm").setChildNode("mmm").setProperty("pp",2);
  NodeState branch=branchBuilder.getNodeState();
  NodeBuilder builder=head.builder();
class ConflictResolver extends RebaseDiff {
    private final ConflictResolver parent;
    private ConflictResolver(    NodeBuilder builder){
      this(null,builder);
    }
    public ConflictResolver(    ConflictResolver parent,    NodeBuilder builder){
      super(builder);
      this.parent=parent;
    }
    @Override protected void resolve(){
      if (parent == null) {
        super.resolve();
      }
 else {
        parent.resolve();
      }
    }
    @Override protected AbstractRebaseDiff createDiff(    NodeBuilder builder,    String name){
      return new ConflictResolver(this,builder.getChildNode(name));
    }
    @Override protected void addExistingProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("pp",1),before);
      assertEquals(createProperty("pp",2),after);
      resolve();
    }
  }
  RebaseDiff rebaseDiff=new ConflictResolver(builder);
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeChangedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("x",11);
  headBuilder.setProperty("y",22);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("x",11);
  branchBuilder.setProperty("y",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeChangedProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("y",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteDeletedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").remove();
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").remove();
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteDeletedNode(    NodeBuilder builder,    String name,    NodeState before){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeDeletedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").remove();
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").setChildNode("aa");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeDeletedNode(    NodeBuilder builder,    String name,    NodeState after){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteChangedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("x",11);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.removeProperty("x");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteChangedProperty(    NodeBuilder builder,    PropertyState before){
      assertEquals(createProperty("x",1),before);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteChangedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").setChildNode("aa");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").remove();
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteChangedNode(    NodeBuilder builder,    String name,    NodeState before){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.CheckpointTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkpoint() throws CommitFailedException {
  String cp=store.checkpoint(Long.MAX_VALUE);
  NodeBuilder builder=store.getRoot().builder();
  builder.setChildNode("new");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertFalse(root.equals(store.getRoot()));
  assertEquals(root,store.retrieve(cp));
  assertTrue(store.release(cp));
  assertNull(store.retrieve(cp));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.LargeNodeStateTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildNode(){
  assertTrue(state.getChildNode("x0").exists());
  assertTrue(state.getChildNode("x1").exists());
  assertTrue(state.getChildNode("x" + N).exists());
  assertFalse(state.getChildNode("x" + (N + 1)).exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeBuilderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void rebasePreservesNew(){
  NodeBuilder root=store.getRoot().builder();
  NodeBuilder added=root.setChildNode("added");
  assertTrue(root.hasChildNode("added"));
  assertTrue(added.isNew());
  store.rebase(root);
  assertTrue(added.exists());
  assertTrue(root.hasChildNode("added"));
  assertTrue(added.isNew());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void rebaseInvariant(){
  NodeBuilder root=store.getRoot().builder();
  NodeBuilder added=root.setChildNode("added");
  NodeState base=root.getBaseState();
  store.rebase(root);
  assertEquals(base,root.getBaseState());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void deletes() throws CommitFailedException {
  NodeBuilder builder=store.getRoot().builder();
  builder.child("x").child("y").child("z");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=store.getRoot().builder();
  assertTrue("child node x should be present",builder.hasChildNode("x"));
  assertTrue("child node x/y should be present",builder.child("x").hasChildNode("y"));
  assertTrue("child node x/y/z should be present",builder.child("x").child("y").hasChildNode("z"));
  builder.getChildNode("x").remove();
  assertFalse("child node x not should be present",builder.hasChildNode("x"));
  assertFalse("child node x/y not should be present",builder.child("x").hasChildNode("y"));
  assertFalse("child node x/y/z not should not be present",builder.child("x").child("y").hasChildNode("z"));
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeStateTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperty(){
  assertEquals("a",state.getProperty("a").getName());
  assertEquals(1,(long)state.getProperty("a").getValue(LONG));
  assertEquals("b",state.getProperty("b").getName());
  assertEquals(2,(long)state.getProperty("b").getValue(LONG));
  assertEquals("c",state.getProperty("c").getName());
  assertEquals(3,(long)state.getProperty("c").getValue(LONG));
  assertNull(state.getProperty("x"));
  assertFalse(state.hasProperty("x"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildNode(){
  assertTrue(state.getChildNode("x").exists());
  assertTrue(state.getChildNode("y").exists());
  assertTrue(state.getChildNode("z").exists());
  assertFalse(state.getChildNode("a").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeStoreTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void move(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  NodeBuilder y=test.getChildNode("y");
  assertTrue(x.moveTo(y,"xx"));
  assertFalse(x.exists());
  assertTrue(y.exists());
  assertFalse(test.hasChildNode("x"));
  assertTrue(y.hasChildNode("xx"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void beforeCommitHook() throws CommitFailedException {
  NodeState root=store.getRoot();
  NodeBuilder rootBuilder=root.builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  newNodeBuilder.setProperty("n",42);
  testBuilder.getChildNode("a").remove();
  store.merge(rootBuilder,new CommitHook(){
    @Nonnull @Override public NodeState processCommit(    NodeState before,    NodeState after,    CommitInfo info){
      NodeBuilder rootBuilder=after.builder();
      NodeBuilder testBuilder=rootBuilder.child("test");
      testBuilder.child("fromHook");
      return rootBuilder.getNodeState();
    }
  }
,CommitInfo.EMPTY);
  NodeState test=store.getRoot().getChildNode("test");
  assertTrue(test.getChildNode("newNode").exists());
  assertTrue(test.getChildNode("fromHook").exists());
  assertFalse(test.getChildNode("a").exists());
  assertEquals(42,(long)test.getChildNode("newNode").getProperty("n").getValue(LONG));
  assertEquals(test,store.getRoot().getChildNode("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveNonExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder any=test.getChildNode("any");
  NodeBuilder y=test.getChildNode("y");
  assertFalse(any.moveTo(y,"xx"));
  assertFalse(any.exists());
  assertTrue(y.exists());
  assertFalse(y.hasChildNode("xx"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rebaseWithFailedMerge() throws CommitFailedException {
  NodeBuilder rootBuilder=store.getRoot().builder();
  rootBuilder.child("foo");
  NodeBuilder b=store.getRoot().builder();
  b.child("bar");
  store.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  try {
    store.merge(rootBuilder,new CommitHook(){
      @Nonnull @Override public NodeState processCommit(      NodeState before,      NodeState after,      CommitInfo info) throws CommitFailedException {
        throw new CommitFailedException("",0,"commit rejected");
      }
    }
,CommitInfo.EMPTY);
    fail("must throw CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  NodeState root=store.merge(rootBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(root.hasChildNode("bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToSelfNonExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder any=test.getChildNode("any");
  assertFalse(any.moveTo(test,"any"));
  assertFalse(any.exists());
  assertFalse(test.hasChildNode("any"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void afterCommitHook() throws CommitFailedException, InterruptedException {
  assumeTrue(store instanceof Observable);
  final AtomicReference<NodeState> observedRoot=new AtomicReference<NodeState>(null);
  final CountDownLatch latch=new CountDownLatch(2);
  ((Observable)store).addObserver(new Observer(){
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      if (root.getChildNode("test").hasChildNode("newNode")) {
        observedRoot.set(checkNotNull(root));
        latch.countDown();
      }
    }
  }
);
  NodeState root=store.getRoot();
  NodeBuilder rootBuilder=root.builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  newNodeBuilder.setProperty("n",42);
  testBuilder.getChildNode("a").remove();
  store.merge(rootBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState newRoot=store.getRoot();
  latch.await(2,TimeUnit.SECONDS);
  NodeState after=observedRoot.get();
  assertNotNull(after);
  assertTrue(after.getChildNode("test").getChildNode("newNode").exists());
  assertFalse(after.getChildNode("test").getChildNode("a").exists());
  assertEquals(42,(long)after.getChildNode("test").getChildNode("newNode").getProperty("n").getValue(LONG));
  assertEquals(newRoot,after);
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getRoot(){
  assertEquals(root,store.getRoot());
  assertEquals(root.getChildNode("test"),store.getRoot().getChildNode("test"));
  assertEquals(root.getChildNode("test").getChildNode("x"),store.getRoot().getChildNode("test").getChildNode("x"));
  assertEquals(root.getChildNode("test").getChildNode("any"),store.getRoot().getChildNode("test").getChildNode("any"));
  assertEquals(root.getChildNode("test").getProperty("a"),store.getRoot().getChildNode("test").getProperty("a"));
  assertEquals(root.getChildNode("test").getProperty("any"),store.getRoot().getChildNode("test").getProperty("any"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleMerge() throws CommitFailedException {
  NodeBuilder rootBuilder=store.getRoot().builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  testBuilder.getChildNode("x").remove();
  newNodeBuilder.setProperty("n",42);
  NodeState testState=rootBuilder.getNodeState().getChildNode("test");
  assertTrue(testState.getChildNode("newNode").exists());
  assertFalse(testState.getChildNode("x").exists());
  assertEquals(42,(long)testState.getChildNode("newNode").getProperty("n").getValue(LONG));
  testState=store.getRoot().getChildNode("test");
  assertFalse(testState.getChildNode("newNode").exists());
  assertTrue(testState.getChildNode("x").exists());
  store.merge(rootBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  testState=store.getRoot().getChildNode("test");
  assertTrue(testState.getChildNode("newNode").exists());
  assertFalse(testState.getChildNode("x").exists());
  assertEquals(42,(long)testState.getChildNode("newNode").getProperty("n").getValue(LONG));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToSelf(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  assertFalse(x.moveTo(test,"x"));
  assertTrue(x.exists());
  assertTrue(test.hasChildNode("x"));
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToDescendant(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  if (fixture == NodeStoreFixtures.SEGMENT_MK || fixture == NodeStoreFixtures.MEMORY_NS) {
    assertTrue(x.moveTo(x,"xx"));
    assertFalse(x.exists());
    assertFalse(test.hasChildNode("x"));
  }
 else {
    assertFalse(x.moveTo(x,"xx"));
    assertTrue(x.exists());
    assertTrue(test.hasChildNode("x"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void renameToExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  assertFalse(x.moveTo(test,"y"));
  assertTrue(x.exists());
  assertTrue(test.hasChildNode("x"));
  assertTrue(test.hasChildNode("y"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  assertFalse(x.moveTo(test,"y"));
  assertTrue(x.exists());
  assertTrue(test.hasChildNode("x"));
  assertTrue(test.hasChildNode("y"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void renameNonExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder any=test.getChildNode("any");
  assertFalse(any.moveTo(test,"xx"));
  assertFalse(any.exists());
  assertFalse(test.hasChildNode("xx"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void rename(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  assertTrue(x.moveTo(test,"xx"));
  assertFalse(x.exists());
  assertFalse(test.hasChildNode("x"));
  assertTrue(test.hasChildNode("xx"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.whiteboard.WhiteboardUserAuthenticationFactoryTest </h4><pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testDefault() throws Exception {
  WhiteboardUserAuthenticationFactory factory=createFactory(new TestUserAuthenticationFactory("abc"));
  assertNotNull(factory.getAuthentication(getUserConfiguration(),root,"abc"));
  assertNull(factory.getAuthentication(getUserConfiguration(),root,"test"));
  assertNull(factory.getAuthentication(getUserConfiguration(),root,"test2"));
  assertNull(factory.getAuthentication(getUserConfiguration(),root,"another"));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testSingleService() throws Exception {
  WhiteboardUserAuthenticationFactory factory=createFactory(null,"test");
  assertNotNull(factory.getAuthentication(getUserConfiguration(),root,"test"));
  assertNull(factory.getAuthentication(getUserConfiguration(),root,"another"));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMultipleServiceAndDefault() throws Exception {
  WhiteboardUserAuthenticationFactory factory=createFactory(new TestUserAuthenticationFactory("abc"),"test","test2");
  assertNull(factory.getAuthentication(getUserConfiguration(),root,"abc"));
  assertNotNull(factory.getAuthentication(getUserConfiguration(),root,"test"));
  assertNotNull(factory.getAuthentication(getUserConfiguration(),root,"test2"));
  assertNull(factory.getAuthentication(getUserConfiguration(),root,"another"));
}

</code></pre>

<br>
<pre class="type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMultipleService() throws Exception {
  WhiteboardUserAuthenticationFactory factory=createFactory(null,"test","test2");
  assertNotNull(factory.getAuthentication(getUserConfiguration(),root,"test"));
  assertNotNull(factory.getAuthentication(getUserConfiguration(),root,"test2"));
  assertNull(factory.getAuthentication(getUserConfiguration(),root,"another"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.stats.DefaultStatisticsProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void metricOnly() throws Exception {
  MeterStats meterStats=statsProvider.getMeter("test",StatsOptions.METRICS_ONLY);
  assertFalse(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timer() throws Exception {
  TimerStats timerStats=statsProvider.getTimer("test",StatsOptions.DEFAULT);
  assertNotNull(timerStats);
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(TimeUnit.SECONDS.toMillis(100),statsImpl(statsProvider).getCounter("test",false).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void meter() throws Exception {
  MeterStats meterStats=statsProvider.getMeter("test",StatsOptions.DEFAULT);
  assertNotNull(meterStats);
  meterStats.mark();
  assertEquals(1,statsImpl(statsProvider).getCounter("test",true).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counter() throws Exception {
  CounterStats counterStats=statsProvider.getCounterStats("test",StatsOptions.DEFAULT);
  assertNotNull(counterStats);
  counterStats.inc();
  assertEquals(1,statsImpl(statsProvider).getCounter("test",false).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicSetup() throws Exception {
  assertNotNull(statsProvider.getStats());
  CounterStats stats=statsProvider.getCounterStats(RepositoryStatistics.Type.SESSION_COUNT.name(),StatsOptions.DEFAULT);
  stats.inc();
  assertEquals(1,statsImpl(statsProvider).getCounter(RepositoryStatistics.Type.SESSION_COUNT).get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.stats.SimpleStatsTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void usageTest() throws Exception {
  AtomicLong counter=new AtomicLong();
  SimpleStats stats=new SimpleStats(counter,SimpleStats.Type.COUNTER);
  stats.mark();
  assertEquals(1,counter.get());
  assertEquals(1,stats.getCount());
  stats.inc();
  assertEquals(2,counter.get());
  stats.dec();
  assertEquals(1,counter.get());
  stats.inc(7);
  assertEquals(8,counter.get());
  stats.dec(7);
  assertEquals(1,counter.get());
  stats.mark(2);
  assertEquals(3,counter.get());
  counter.set(0);
  stats.update(100,TimeUnit.SECONDS);
  assertEquals(TimeUnit.MILLISECONDS.convert(100,TimeUnit.SECONDS),counter.get());
  counter.set(0);
  TimerStats.Context context=stats.time();
  long delta=context.stop();
  TimeUnit.MILLISECONDS.sleep(42);
  assertEquals(TimeUnit.NANOSECONDS.toMillis(delta),counter.get());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noopTest() throws Exception {
  NoopStats noop=NoopStats.INSTANCE;
  assertEquals(0,noop.getCount());
  noop.mark();
  assertEquals(0,noop.getCount());
  noop.mark(10);
  assertEquals(0,noop.getCount());
  noop.dec();
  assertEquals(0,noop.getCount());
  noop.inc();
  assertEquals(0,noop.getCount());
  noop.inc(5);
  assertEquals(0,noop.getCount());
  noop.dec(7);
  assertEquals(0,noop.getCount());
  noop.update(100,TimeUnit.SECONDS);
  assertEquals(0,noop.getCount());
  TimerStats.Context context=noop.time();
  assertEquals(0,context.stop());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void meterResetAndCount() throws Exception {
  AtomicLong counter=new AtomicLong();
  MeterStats stats=new SimpleStats(counter,SimpleStats.Type.METER);
  stats.mark();
  assertEquals(1,stats.getCount());
  stats.mark();
  assertEquals(2,stats.getCount());
  stats.mark(5);
  assertEquals(7,stats.getCount());
  counter.set(0);
  assertEquals(7,stats.getCount());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noopRepoStatsTest() throws Exception {
  RepositoryStatistics stats=StatisticsProvider.NOOP.getStats();
  assertNotNull(stats);
  assertNotNull(stats.getTimeSeries("foo",false));
  assertNotNull(stats.getTimeSeries(RepositoryStatistics.Type.QUERY_COUNT));
  TimeSeries ts=stats.getTimeSeries("foo",false);
  assertNotNull(ts.getValuePerHour());
  assertNotNull(ts.getValuePerMinute());
  assertNotNull(ts.getValuePerSecond());
  assertNotNull(ts.getValuePerWeek());
  assertEquals(0,ts.getMissingValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.CopyNodeTypesUpgradeTest </h4><pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void customNodeTypesAreRegistered() throws RepositoryException {
  final JackrabbitSession adminSession=createAdminSession();
  final NodeTypeManager nodeTypeManager=adminSession.getWorkspace().getNodeTypeManager();
  final NodeType testFolderNodeType=nodeTypeManager.getNodeType("test:Folder");
  final NodeDefinition[] cnd=testFolderNodeType.getChildNodeDefinitions();
  final PropertyDefinition[] pd=testFolderNodeType.getPropertyDefinitions();
  assertEquals("More than one child node definition",1,cnd.length);
  assertEquals("Incorrect default primary type","test:Folder",cnd[0].getDefaultPrimaryTypeName());
  assertEquals("More than two property definitions",4,pd.length);
  adminSession.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.LongNameTest </h4><pre class="type-9 type-7 type-6 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void longNameOnSegmentStoreWorksFine() throws RepositoryException, IOException {
  SegmentStore memoryStore=new MemoryStore();
  try {
    SegmentNodeStore nodeStore=SegmentNodeStore.newSegmentNodeStore(memoryStore).create();
    upgrade(nodeStore,false);
    NodeState parent=getParent(nodeStore.getRoot());
    Assert.assertTrue(parent.hasChildNode(NOT_TOO_LONG_NAME));
    Assert.assertTrue(parent.hasChildNode(TOO_LONG_NAME));
  }
  finally {
    memoryStore.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void longNameShouldBeSkipped() throws RepositoryException, IOException {
  DocumentNodeStore nodeStore=new DocumentMK.Builder().getNodeStore();
  try {
    upgrade(nodeStore,true);
    NodeState parent=getParent(nodeStore.getRoot());
    Assert.assertTrue(parent.hasChildNode(NOT_TOO_LONG_NAME));
    Assert.assertEquals(1,parent.getChildNodeCount(10));
  }
  finally {
    nodeStore.dispose();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.PrivilegeUpgradeTest </h4><pre class="type-9 type-12 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void verifyCustomPrivilegeBits() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    Node privilegeRoot=session.getNode(PrivilegeConstants.PRIVILEGES_PATH);
    Node testPrivilegeNode=privilegeRoot.getNode("test:privilege");
    long l=getLong(testPrivilegeNode);
    PrivilegeBits pb=readBits(testPrivilegeNode,PrivilegeConstants.REP_BITS);
    Node testPrivilege2Node=privilegeRoot.getNode("test:privilege2");
    long l2=getLong(testPrivilege2Node);
    PrivilegeBits pb2=readBits(testPrivilege2Node,PrivilegeConstants.REP_BITS);
    PrivilegeBits nextExpected;
    if (l < l2) {
      assertEquals(PrivilegeBits.NEXT_AFTER_BUILT_INS,pb);
      assertEquals(pb.nextBits(),pb2);
      nextExpected=pb2.nextBits();
    }
 else {
      assertEquals(PrivilegeBits.NEXT_AFTER_BUILT_INS,pb2);
      assertEquals(pb2.nextBits(),pb);
      nextExpected=pb.nextBits();
    }
    PrivilegeBits nextBits=readBits(privilegeRoot,PrivilegeConstants.REP_NEXT);
    assertEquals(nextExpected,nextBits);
    Node testAggregateNode=privilegeRoot.getNode("test:aggregate");
    PrivilegeBits aggrPb=readBits(testAggregateNode,PrivilegeConstants.REP_BITS);
    PrivilegeBits expected=PrivilegeBits.getInstance(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_READ),pb).unmodifiable();
    assertEquals(expected,aggrPb);
    Node testAggregate2Node=privilegeRoot.getNode("test:aggregate2");
    PrivilegeBits aggr2Pb=readBits(testAggregate2Node,PrivilegeConstants.REP_BITS);
    PrivilegeBits expected2=PrivilegeBits.getInstance(aggrPb,pb2).unmodifiable();
    assertEquals(expected2,aggr2Pb);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyPrivileges() throws RepositoryException {
  Set<String> nonAggregatePrivileges=newHashSet(REP_READ_NODES,REP_READ_PROPERTIES,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL,JCR_NODE_TYPE_MANAGEMENT,JCR_VERSION_MANAGEMENT,JCR_LOCK_MANAGEMENT,JCR_LIFECYCLE_MANAGEMENT,JCR_RETENTION_MANAGEMENT,JCR_WORKSPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT,JCR_NAMESPACE_MANAGEMENT,REP_PRIVILEGE_MANAGEMENT,REP_USER_MANAGEMENT,REP_INDEX_DEFINITION_MANAGEMENT,"test:privilege","test:privilege2");
  Map<String,Set<String>> aggregatePrivileges=Maps.newHashMap();
  aggregatePrivileges.put(JCR_READ,ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES));
  aggregatePrivileges.put(JCR_MODIFY_PROPERTIES,ImmutableSet.of(REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES));
  aggregatePrivileges.put(JCR_WRITE,ImmutableSet.of(JCR_MODIFY_PROPERTIES,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE));
  aggregatePrivileges.put(REP_WRITE,ImmutableSet.of(JCR_WRITE,JCR_MODIFY_PROPERTIES,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_NODE_TYPE_MANAGEMENT));
  aggregatePrivileges.put(JCR_ALL,ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL,JCR_NODE_TYPE_MANAGEMENT,JCR_VERSION_MANAGEMENT,JCR_LOCK_MANAGEMENT,JCR_LIFECYCLE_MANAGEMENT,JCR_RETENTION_MANAGEMENT,JCR_WORKSPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT,JCR_NAMESPACE_MANAGEMENT,REP_PRIVILEGE_MANAGEMENT,REP_USER_MANAGEMENT,REP_INDEX_DEFINITION_MANAGEMENT,JCR_READ,JCR_MODIFY_PROPERTIES,JCR_WRITE,REP_WRITE,"test:privilege","test:privilege2","test:aggregate","test:aggregate2"));
  aggregatePrivileges.put("test:aggregate",ImmutableSet.of(JCR_READ,REP_READ_NODES,REP_READ_PROPERTIES,"test:privilege"));
  aggregatePrivileges.put("test:aggregate2",ImmutableSet.of(JCR_READ,REP_READ_NODES,REP_READ_PROPERTIES,"test:privilege","test:privilege2","test:aggregate"));
  JackrabbitSession session=createAdminSession();
  try {
    JackrabbitWorkspace workspace=(JackrabbitWorkspace)session.getWorkspace();
    PrivilegeManager manager=workspace.getPrivilegeManager();
    Privilege[] privileges=manager.getRegisteredPrivileges();
    for (    Privilege privilege : privileges) {
      if (privilege.isAggregate()) {
        Set<String> expected=aggregatePrivileges.remove(privilege.getName());
        if (expected != null) {
          String[] actual=getNames(privilege.getAggregatePrivileges());
          assertTrue("Miss match in aggregate privilege " + privilege.getName() + " expected "+ expected+ " actual "+ Arrays.toString(actual),newHashSet(expected).equals(newHashSet(actual)));
        }
      }
 else {
        nonAggregatePrivileges.remove(privilege.getName());
      }
    }
    assertTrue("Missing non aggregate privileges: " + nonAggregatePrivileges,nonAggregatePrivileges.isEmpty());
    assertTrue("Missing aggregate privileges: " + aggregatePrivileges.keySet(),aggregatePrivileges.isEmpty());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomPrivileges() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    JackrabbitWorkspace workspace=(JackrabbitWorkspace)session.getWorkspace();
    PrivilegeManager manager=workspace.getPrivilegeManager();
    Privilege privilege=manager.getPrivilege("test:privilege");
    assertNotNull(privilege);
    assertFalse(privilege.isAbstract());
    assertFalse(privilege.isAggregate());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    Privilege privilege2=manager.getPrivilege("test:privilege2");
    assertNotNull(privilege2);
    assertTrue(privilege2.isAbstract());
    assertFalse(privilege2.isAggregate());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    Privilege aggregate=manager.getPrivilege("test:aggregate");
    assertNotNull(aggregate);
    assertFalse(aggregate.isAbstract());
    assertTrue(aggregate.isAggregate());
    List<Privilege> agg=ImmutableList.copyOf(aggregate.getDeclaredAggregatePrivileges());
    assertEquals(2,agg.size());
    assertTrue(agg.contains(privilege));
    assertTrue(agg.contains(manager.getPrivilege(JCR_READ)));
    Privilege aggregate2=manager.getPrivilege("test:aggregate2");
    assertNotNull(aggregate2);
    assertTrue(aggregate2.isAbstract());
    assertTrue(aggregate2.isAggregate());
    List<Privilege> agg2=ImmutableList.copyOf(aggregate2.getDeclaredAggregatePrivileges());
    assertEquals(2,agg2.size());
    assertTrue(agg2.contains(aggregate));
    assertTrue(agg2.contains(privilege2));
    Privilege jcrAll=manager.getPrivilege("jcr:all");
    List<Privilege> privileges=asList(jcrAll.getAggregatePrivileges());
    assertTrue(privileges.contains(privilege));
    assertTrue(privileges.contains(privilege2));
    assertTrue(privileges.contains(aggregate));
    assertTrue(privileges.contains(aggregate2));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositoryGroupMemberUpgradeTest </h4><pre class="type-13 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGroupNodeTypes() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumGroups(); i++) {
      Group grp=(Group)userMgr.getAuthorizable(TEST_GROUP_PREFIX + i);
      assertNotNull(grp);
      Node grpNode=session.getNode(grp.getPath());
      NodeType nt=grpNode.getPrimaryNodeType();
      assertEquals("Migrated group needs to be rep:Group",UserConstants.NT_REP_GROUP,nt.getName());
      assertTrue("Migrated group needs to be new node type",nt.isNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyMemberOf() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumUsers(); i++) {
      User user=(User)userMgr.getAuthorizable(TEST_USER_PREFIX + i);
      assertNotNull(user);
      Set<String> groups=new HashSet<String>();
      for (int j=0; j < getNumGroups(); j++) {
        groups.add(TEST_GROUP_PREFIX + j);
      }
      Iterator<Group> groupIterator=user.declaredMemberOf();
      while (groupIterator.hasNext()) {
        Group grp=groupIterator.next();
        assertTrue("user must be member of group " + grp.getID(),groups.remove(grp.getID()));
      }
      assertEquals("user " + user.getID() + " must be member of all groups",0,groups.size());
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyMembers() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumGroups(); i++) {
      Group grp=(Group)userMgr.getAuthorizable(TEST_GROUP_PREFIX + i);
      assertNotNull(grp);
      Set<String> testUsers=new HashSet<String>();
      for (int j=0; j < getNumUsers(); j++) {
        testUsers.add(TEST_USER_PREFIX + j);
      }
      Iterator<Authorizable> declaredMembers=grp.getDeclaredMembers();
      while (declaredMembers.hasNext()) {
        Authorizable auth=declaredMembers.next();
        assertTrue("group must have member " + auth.getID(),testUsers.remove(auth.getID()));
      }
      assertEquals("group must have all members",0,testUsers.size());
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositorySidegradeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyVersionHistory() throws RepositoryException {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/versionable"));
    Node versionable=session.getNode("/versionable");
    assertTrue(versionable.hasNode("child"));
    Node child=versionable.getNode("child");
    assertTrue(child.hasNode("child2"));
    Node child2=child.getNode("child2");
    assertFalse(versionable.isCheckedOut());
    assertTrue(versionable.hasProperty(JCR_UUID));
    assertFalse(child.isCheckedOut());
    assertTrue(child.hasProperty(JCR_UUID));
    assertFalse(child2.isCheckedOut());
    assertFalse(child2.hasProperty(JCR_UUID));
    VersionManager manager=session.getWorkspace().getVersionManager();
    Version version=manager.getBaseVersion("/versionable");
    Node frozen=version.getFrozenNode();
    assertEquals(versionable.getPrimaryNodeType().getName(),frozen.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertEquals(versionable.getMixinNodeTypes()[0].getName(),frozen.getProperty(JCR_FROZENMIXINTYPES).getValues()[0].getString());
    assertEquals(versionable.getIdentifier(),frozen.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild=frozen.getNode("child");
    assertEquals(child.getPrimaryNodeType().getName(),frozenChild.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child.getIdentifier(),frozenChild.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild2=frozenChild.getNode("child2");
    assertEquals(child2.getPrimaryNodeType().getName(),frozenChild2.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild2.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child2.getIdentifier(),frozenChild2.getProperty(JCR_FROZENUUID).getString());
    VersionHistory history=manager.getVersionHistory("/versionable");
    assertTrue(history.isNodeType("rep:VersionablePaths"));
    Property versionablePath=history.getProperty("default");
    assertEquals("/versionable",versionablePath.getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGenericProperties() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.BOOLEAN,properties.getProperty("boolean").getType());
    assertEquals(true,properties.getProperty("boolean").getBoolean());
    assertEquals(PropertyType.BINARY,properties.getProperty("binary").getType());
    Binary binary=properties.getProperty("binary").getBinary();
    try {
      InputStream stream=binary.getStream();
      try {
        for (        byte aBINARY : BINARY) {
          assertEquals(aBINARY,(byte)stream.read());
        }
        assertEquals(-1,stream.read());
      }
  finally {
        stream.close();
      }
    }
  finally {
      binary.dispose();
    }
    assertEquals(PropertyType.DATE,properties.getProperty("date").getType());
    assertEquals(DATE.getTimeInMillis(),properties.getProperty("date").getDate().getTimeInMillis());
    assertEquals(PropertyType.DECIMAL,properties.getProperty("decimal").getType());
    assertEquals(new BigDecimal(123),properties.getProperty("decimal").getDecimal());
    assertEquals(PropertyType.DOUBLE,properties.getProperty("double").getType());
    assertEquals(Math.PI,properties.getProperty("double").getDouble());
    assertEquals(PropertyType.LONG,properties.getProperty("long").getType());
    assertEquals(9876543210L,properties.getProperty("long").getLong());
    assertEquals(PropertyType.STRING,properties.getProperty("string").getType());
    assertEquals("test",properties.getProperty("string").getString());
    assertEquals(PropertyType.STRING,properties.getProperty("multiple").getType());
    Value[] values=properties.getProperty("multiple").getValues();
    assertEquals(3,values.length);
    assertEquals("a",values[0].getString());
    assertEquals("b",values[1].getString());
    assertEquals("c",values[2].getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyReplacedBuiltinNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    NodeType nt=manager.getNodeType(UserConstants.NT_REP_GROUP);
    assertTrue("Migrated repository must have new nodetype definitions",nt.isNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyNewBuiltinNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
    assertTrue(manager.hasNodeType(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyAsync() throws Exception {
  NodeState state=targetNodeStore.getRoot().getChildNode(":async");
  assertFalse(state.hasProperty("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReferencePropertiesContent() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/referenceable"));
    String testNodeIdentifier=session.getNode("/referenceable").getIdentifier();
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.REFERENCE,properties.getProperty("reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("reference").getString());
    assertEquals("/referenceable",properties.getProperty("reference").getNode().getPath());
    PropertyIterator refs=session.getNode("/referenceable").getReferences();
    assertTrue(refs.hasNext());
    assertEquals(properties.getPath() + "/reference",refs.nextProperty().getPath());
    assertFalse(refs.hasNext());
    PropertyIterator refs2=session.getNode("/versionable").getReferences();
    assertTrue(refs2.hasNext());
    assertEquals(properties.getPath() + "/mv_reference",refs2.nextProperty().getPath());
    assertFalse(refs2.hasNext());
    assertEquals(PropertyType.WEAKREFERENCE,properties.getProperty("weak_reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("weak_reference").getString());
    assertEquals("/referenceable",properties.getProperty("weak_reference").getNode().getPath());
    PropertyIterator weakRefs=session.getNode("/referenceable").getWeakReferences();
    assertTrue(weakRefs.hasNext());
    assertEquals(properties.getPath() + "/weak_reference",weakRefs.nextProperty().getPath());
    assertFalse(weakRefs.hasNext());
    PropertyIterator weakRefs2=session.getNode("/versionable").getWeakReferences();
    assertTrue(weakRefs2.hasNext());
    assertEquals(properties.getPath() + "/mv_weak_reference",weakRefs2.nextProperty().getPath());
    assertFalse(weakRefs2.hasNext());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType("test:unstructured"));
    NodeType type=manager.getNodeType("test:unstructured");
    assertFalse(type.isMixin());
    assertTrue(type.isNodeType("nt:unstructured"));
    boolean foundDefaultString=false;
    boolean foundDefaultPath=false;
    for (    PropertyDefinition pDef : type.getPropertyDefinitions()) {
      if ("defaultString".equals(pDef.getName())) {
        assertEquals(PropertyType.STRING,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("stringValue",pDef.getDefaultValues()[0].getString());
        foundDefaultString=true;
      }
 else       if ("defaultPath".equals(pDef.getName())) {
        assertEquals(PropertyType.PATH,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("/jcr:path/nt:value",pDef.getDefaultValues()[0].getString());
        foundDefaultPath=true;
      }
    }
    assertTrue("Expected property definition with name \"defaultString\"",foundDefaultString);
    assertTrue("Expected property definition with name \"defaultPath\"",foundDefaultPath);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositoryUpgradeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyVersionHistory() throws RepositoryException {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/versionable"));
    Node versionable=session.getNode("/versionable");
    assertTrue(versionable.hasNode("child"));
    Node child=versionable.getNode("child");
    assertTrue(child.hasNode("child2"));
    Node child2=child.getNode("child2");
    assertFalse(versionable.isCheckedOut());
    assertTrue(versionable.hasProperty(JCR_UUID));
    assertFalse(child.isCheckedOut());
    assertTrue(child.hasProperty(JCR_UUID));
    assertFalse(child2.isCheckedOut());
    assertFalse(child2.hasProperty(JCR_UUID));
    VersionManager manager=session.getWorkspace().getVersionManager();
    Version version=manager.getBaseVersion("/versionable");
    Node frozen=version.getFrozenNode();
    assertEquals(versionable.getPrimaryNodeType().getName(),frozen.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertEquals(versionable.getMixinNodeTypes()[0].getName(),frozen.getProperty(JCR_FROZENMIXINTYPES).getValues()[0].getString());
    assertEquals(versionable.getIdentifier(),frozen.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild=frozen.getNode("child");
    assertEquals(child.getPrimaryNodeType().getName(),frozenChild.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child.getIdentifier(),frozenChild.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild2=frozenChild.getNode("child2");
    assertEquals(child2.getPrimaryNodeType().getName(),frozenChild2.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild2.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child2.getIdentifier(),frozenChild2.getProperty(JCR_FROZENUUID).getString());
    VersionHistory history=manager.getVersionHistory("/versionable");
    assertTrue(history.isNodeType("rep:VersionablePaths"));
    Property versionablePath=history.getProperty("default");
    assertEquals("/versionable",versionablePath.getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType("test:unstructured"));
    NodeType type=manager.getNodeType("test:unstructured");
    assertFalse(type.isMixin());
    assertTrue(type.isNodeType("nt:unstructured"));
    boolean foundDefaultString=false;
    boolean foundDefaultPath=false;
    for (    PropertyDefinition pDef : type.getPropertyDefinitions()) {
      if ("defaultString".equals(pDef.getName())) {
        assertEquals(PropertyType.STRING,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("stringValue",pDef.getDefaultValues()[0].getString());
        foundDefaultString=true;
      }
 else       if ("defaultPath".equals(pDef.getName())) {
        assertEquals(PropertyType.PATH,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("/jcr:path/nt:value",pDef.getDefaultValues()[0].getString());
        foundDefaultPath=true;
      }
    }
    assertTrue("Expected property definition with name \"defaultString\"",foundDefaultString);
    assertTrue("Expected property definition with name \"defaultPath\"",foundDefaultPath);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifySNS() throws RepositoryException {
  Set<String> nodeNames=Sets.newHashSet("sibling","sibling[2]","sibling[3]");
  Session session=createAdminSession();
  try {
    Node sns=session.getNode("/sns");
    NodeIterator ns=sns.getNodes();
    int c=0;
    while (ns.hasNext()) {
      Node node=ns.nextNode();
      String name=node.getName();
      assertTrue("Unexpected node: " + name,nodeNames.remove(name));
    }
    assertTrue("Missing nodes: " + nodeNames,nodeNames.isEmpty());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGenericProperties() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.BOOLEAN,properties.getProperty("boolean").getType());
    assertEquals(true,properties.getProperty("boolean").getBoolean());
    assertEquals(PropertyType.BINARY,properties.getProperty("binary").getType());
    Binary binary=properties.getProperty("binary").getBinary();
    try {
      InputStream stream=binary.getStream();
      try {
        for (        byte aBINARY : BINARY) {
          assertEquals(aBINARY,(byte)stream.read());
        }
        assertEquals(-1,stream.read());
      }
  finally {
        stream.close();
      }
    }
  finally {
      binary.dispose();
    }
    assertEquals(PropertyType.DATE,properties.getProperty("date").getType());
    assertEquals(DATE.getTimeInMillis(),properties.getProperty("date").getDate().getTimeInMillis());
    assertEquals(PropertyType.DECIMAL,properties.getProperty("decimal").getType());
    assertEquals(new BigDecimal(123),properties.getProperty("decimal").getDecimal());
    assertEquals(PropertyType.DOUBLE,properties.getProperty("double").getType());
    assertEquals(Math.PI,properties.getProperty("double").getDouble());
    assertEquals(PropertyType.LONG,properties.getProperty("long").getType());
    assertEquals(9876543210L,properties.getProperty("long").getLong());
    assertEquals(PropertyType.STRING,properties.getProperty("string").getType());
    assertEquals("test",properties.getProperty("string").getString());
    assertEquals(PropertyType.STRING,properties.getProperty("multiple").getType());
    Value[] values=properties.getProperty("multiple").getValues();
    assertEquals(3,values.length);
    assertEquals("a",values[0].getString());
    assertEquals("b",values[1].getString());
    assertEquals("c",values[2].getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReferencePropertiesContent() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/referenceable"));
    String testNodeIdentifier=session.getNode("/referenceable").getIdentifier();
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.REFERENCE,properties.getProperty("reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("reference").getString());
    assertEquals("/referenceable",properties.getProperty("reference").getNode().getPath());
    PropertyIterator refs=session.getNode("/referenceable").getReferences();
    assertTrue(refs.hasNext());
    assertEquals(properties.getPath() + "/reference",refs.nextProperty().getPath());
    assertFalse(refs.hasNext());
    PropertyIterator refs2=session.getNode("/versionable").getReferences();
    assertTrue(refs2.hasNext());
    assertEquals(properties.getPath() + "/mv_reference",refs2.nextProperty().getPath());
    assertFalse(refs2.hasNext());
    assertEquals(PropertyType.WEAKREFERENCE,properties.getProperty("weak_reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("weak_reference").getString());
    assertEquals("/referenceable",properties.getProperty("weak_reference").getNode().getPath());
    PropertyIterator weakRefs=session.getNode("/referenceable").getWeakReferences();
    assertTrue(weakRefs.hasNext());
    assertEquals(properties.getPath() + "/weak_reference",weakRefs.nextProperty().getPath());
    assertFalse(weakRefs.hasNext());
    PropertyIterator weakRefs2=session.getNode("/versionable").getWeakReferences();
    assertTrue(weakRefs2.hasNext());
    assertEquals(properties.getPath() + "/mv_weak_reference",weakRefs2.nextProperty().getPath());
    assertFalse(weakRefs2.hasNext());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyNewBuiltinNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
    assertTrue(manager.hasNodeType(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyReplacedBuiltinNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    NodeType nt=manager.getNodeType(UserConstants.NT_REP_GROUP);
    assertTrue("Migrated repository must have new nodetype definitions",nt.isNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.blob.LengthCachingDataStoreTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void delegateRecordTest() throws Exception {
  FileDataStore ds=new FileDataStore();
  byte[] data=bytes(ds.getMinRecordLength() + 10);
  ds.init(tempFolder.getRoot().getAbsolutePath());
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  File mappingFile=new File(tempFolder.getRoot(),"mapping.txt");
  String text=String.format("%s|%s",data.length,dr.getIdentifier().toString());
  Files.write(text,mappingFile,Charset.defaultCharset());
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.setMappingFilePath(mappingFile.getAbsolutePath());
  fds.init(tempFolder.getRoot().getAbsolutePath());
  DataRecord dr2=fds.getRecordIfStored(dr.getIdentifier());
  assertEquals(dr,dr2);
  assertEquals(dr.getLength(),dr2.getLength());
  assertTrue(ByteStreams.equal(supplier(dr),supplier(dr2)));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void referenceHandling() throws Exception {
  int minSize=new FileDataStore().getMinRecordLength();
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.init(tempFolder.newFolder().getAbsolutePath());
  fds.setReadOnly(false);
  DataRecord dr1=fds.addRecord(byteStream(minSize + 10));
  assertNotNull(fds.getRecordFromReference(dr1.getReference()));
  assertEquals(dr1.getIdentifier(),fds.getRecordFromReference(dr1.getReference()).getIdentifier());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void configDelegate() throws Exception {
  Properties p=new Properties();
  p.setProperty("minRecordLength","4972");
  File configFile=tempFolder.newFile();
  FileOutputStream fos=new FileOutputStream(configFile);
  p.store(fos,null);
  fos.close();
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.setDelegateConfigFilePath(configFile.getAbsolutePath());
  fds.init(tempFolder.getRoot().getAbsolutePath());
  assertEquals(4972,fds.getMinRecordLength());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mappingFileData() throws Exception {
  File root=tempFolder.getRoot();
  File mappingFile=new File(root,"mapping.txt");
  String text="1000|foo\n2000|bar";
  Files.write(text,mappingFile,Charset.defaultCharset());
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.setMappingFilePath(mappingFile.getAbsolutePath());
  fds.init(tempFolder.getRoot().getAbsolutePath());
  DataRecord dr=fds.getRecord(new DataIdentifier("foo"));
  assertNotNull(dr);
  assertEquals(1000,dr.getLength());
  assertEquals(2000,fds.getRecord(new DataIdentifier("bar")).getLength());
}

</code></pre>

<br>
<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void writeBackNewEntries() throws Exception {
  FileDataStore fds1=new FileDataStore();
  File fds1Dir=tempFolder.newFolder();
  int minSize=fds1.getMinRecordLength();
  fds1.init(fds1Dir.getAbsolutePath());
  DataRecord dr1=fds1.addRecord(byteStream(minSize + 10));
  DataRecord dr2=fds1.addRecord(byteStream(minSize + 100));
  LengthCachingDataStore fds2=new LengthCachingDataStore();
  fds2.setDelegateClass(FileDataStore.class.getName());
  fds2.init(fds1Dir.getAbsolutePath());
  fds2.getRecord(new DataIdentifier(dr1.getIdentifier().toString()));
  fds2.getRecord(new DataIdentifier(dr2.getIdentifier().toString()));
  File mappingFile=fds2.getMappingFile();
  fds2.close();
  LengthCachingDataStore fds3=new LengthCachingDataStore();
  fds3.setDelegateClass(FileDataStore.class.getName());
  fds3.setMappingFilePath(mappingFile.getAbsolutePath());
  fds3.init(tempFolder.newFolder().getAbsolutePath());
  fds3.setReadOnly(false);
  assertEquals(dr1.getLength(),fds3.getRecord(dr1.getIdentifier()).getLength());
  assertEquals(dr2.getLength(),fds3.getRecord(dr2.getIdentifier()).getLength());
  DataRecord dr3=fds3.addRecord(byteStream(minSize + 200));
  fds3.close();
  LengthCachingDataStore fds4=new LengthCachingDataStore();
  fds4.setDelegateClass(FileDataStore.class.getName());
  fds4.setMappingFilePath(mappingFile.getAbsolutePath());
  fds4.init(tempFolder.newFolder().getAbsolutePath());
  assertEquals(dr3.getLength(),fds4.getRecord(dr3.getIdentifier()).getLength());
  assertEquals(dr2.getLength(),fds4.getRecord(dr2.getIdentifier()).getLength());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.nodestate.FilteringNodeStateTest </h4><pre class="type-9 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void shouldDelegateGetProperty(){
  final NodeState decorated=wrap("/",rootNodeState,null,of("/content/foo"));
  final NodeState content=getNodeState(decorated,"/content");
  assertNotNull(content.getProperty(OAK_CHILD_ORDER));
  assertNull(content.getProperty("nonexisting"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldHaveCorrectChildOrderProperty() throws CommitFailedException {
  final NodeState content=rootNodeState.getChildNode("content");
  final NodeState decorated=wrap("/content",content,null,of("/content/foo"));
  assertTrue(decorated.hasProperty(OAK_CHILD_ORDER));
{
    final PropertyState childOrder=decorated.getProperty(OAK_CHILD_ORDER);
    final Iterable<String> values=childOrder.getValue(Type.STRINGS);
    assertEquals(newArrayList("football"),newArrayList(values));
  }
{
    final Predicate<PropertyState> isChildOrderProperty=new Predicate<PropertyState>(){
      @Override public boolean apply(      PropertyState propertyState){
        return OAK_CHILD_ORDER.equals(propertyState.getName());
      }
    }
;
    final PropertyState childOrder=Iterables.find(decorated.getProperties(),isChildOrderProperty);
    final Iterable<String> values=childOrder.getValue(Type.STRINGS);
    assertEquals(newArrayList("football"),newArrayList(values));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.nodestate.report.PeriodicReporterTest </h4><pre class="type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void callbackEveryTenNodes(){
  final AssertingPeriodicReporter reporter=new AssertingPeriodicReporter(10,-1);
  final NodeState counter=ReportingNodeState.wrap(EmptyNodeState.EMPTY_NODE,reporter).getChildNode("counter");
  reporter.reset();
  for (int i=1; i < 40; i++) {
    counter.getChildNode(Integer.toString(i));
  }
  assertThat(reporter,hasReportedNode(10,"/counter/10"));
  assertThat(reporter,hasReportedNode(20,"/counter/20"));
  assertThat(reporter,hasReportedNode(30,"/counter/30"));
}

</code></pre>

<br>
<pre class="type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void callbackEveryTenProperties(){
  final NodeBuilder builder=EmptyNodeState.EMPTY_NODE.builder();
  for (int i=1; i < 40; i++) {
    builder.child("counter").setProperty(Integer.toString(i),i);
  }
  final AssertingPeriodicReporter reporter=new AssertingPeriodicReporter(-1,10);
  final NodeState counter=ReportingNodeState.wrap(builder.getNodeState(),reporter).getChildNode("counter");
  reporter.reset();
  for (int i=1; i < 40; i++) {
    counter.getProperty(Integer.toString(i));
  }
  assertThat(reporter,hasReportedProperty(10,"/counter/10"));
  assertThat(reporter,hasReportedProperty(20,"/counter/20"));
  assertThat(reporter,hasReportedProperty(30,"/counter/30"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.nodestate.report.ReportingNodeStateTest </h4><pre class="type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getChildNodeEntriesReportsNode(){
  final NodeBuilder builder=EmptyNodeState.EMPTY_NODE.builder();
  for (int i=1; i < 20; i++) {
    builder.child("a" + i);
  }
  final AssertingPeriodicReporter reporter=new AssertingPeriodicReporter(10,10);
  final NodeState nodeState=ReportingNodeState.wrap(builder.getNodeState(),reporter);
  reporter.reset();
  int counter=0;
  String name="<none>";
  for (  final ChildNodeEntry child : nodeState.getChildNodeEntries()) {
    if (++counter == 10) {
      name=child.getName();
      break;
    }
  }
  assertThat(reporter,hasReportedNode(10,"/" + name));
}

</code></pre>

<br>
<pre class="type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void compareAgainstBaseState(){
  final NodeBuilder root=EmptyNodeState.EMPTY_NODE.builder();
  root.child("a").child("aa");
  final NodeState before=root.getNodeState();
  root.child("a").child("ab");
  root.child("b");
  final AssertingPeriodicReporter reporter=new AssertingPeriodicReporter(1,-1);
  final NodeState after=ReportingNodeState.wrap(root.getNodeState(),reporter);
  reporter.reset();
  NodeStateTestUtils.expectDifference().childNodeAdded("/a/ab","/b").childNodeChanged("/a").strict().verify(before,after);
  assertThat(reporter,hasReportedNodes("/a","/a/ab","/b"));
}

</code></pre>

<br>
<pre class="type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getPropertyReportsProperty(){
  final NodeBuilder builder=EmptyNodeState.EMPTY_NODE.builder();
  final String name="meaningOfLife";
  builder.setProperty(name,"42");
  final AssertingPeriodicReporter reporter=new AssertingPeriodicReporter(1,1);
  final NodeState nodeState=ReportingNodeState.wrap(builder.getNodeState(),reporter);
  reporter.reset();
  nodeState.getProperty(name);
  nodeState.getBoolean(name);
  nodeState.getLong(name);
  nodeState.getString(name);
  nodeState.getStrings(name);
  nodeState.getName(name);
  nodeState.getNames(name);
  assertThat(reporter,not(hasReportedProperty(0,"/meaningOfLife")));
  assertThat(reporter,hasReportedProperty(1,"/meaningOfLife"));
  assertThat(reporter,hasReportedProperty(2,"/meaningOfLife"));
  assertThat(reporter,hasReportedProperty(3,"/meaningOfLife"));
  assertThat(reporter,hasReportedProperty(4,"/meaningOfLife"));
  assertThat(reporter,hasReportedProperty(5,"/meaningOfLife"));
  assertThat(reporter,hasReportedProperty(6,"/meaningOfLife"));
  assertThat(reporter,hasReportedProperty(7,"/meaningOfLife"));
  assertThat(reporter,not(hasReportedProperty(8,"/meaningOfLife")));
}

</code></pre>

<br>
<pre class="type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getPropertiesReportsProperty(){
  final NodeBuilder builder=EmptyNodeState.EMPTY_NODE.builder();
  for (int i=0; i < 20; i++) {
    builder.setProperty("a" + i,"foo");
  }
  final AssertingPeriodicReporter reporter=new AssertingPeriodicReporter(10,10);
  final NodeState nodeState=ReportingNodeState.wrap(builder.getNodeState(),reporter);
  reporter.reset();
  int counter=0;
  for (  final PropertyState property : nodeState.getProperties()) {
    if (++counter == 10) {
      break;
    }
  }
  assertThat(reporter,hasReportedProperty(10,any(String.class)));
}

</code></pre>

<br>
<pre class="type-6 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getChildNodeReportsNode(){
  final AssertingPeriodicReporter reporter=new AssertingPeriodicReporter(10,10);
  final NodeState nodeState=ReportingNodeState.wrap(EmptyNodeState.EMPTY_NODE,reporter);
  reporter.reset();
  for (int i=1; i <= 20; i++) {
    nodeState.getChildNode("a" + i);
  }
  assertThat(reporter,hasReportedNode(10,"/a10"));
  assertThat(reporter,hasReportedNode(20,"/a20"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.util.NodeUtilTest </h4><pre class="type-6 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testGetOrAddTree() throws Exception {
  NodeUtil result=node.getOrAddTree(".",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  assertSame(node,result);
  NodeUtil child=node.getOrAddTree("child",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  assertEqualNodeUtil(new NodeUtil(root.getTree("/child")),child);
  NodeUtil parent=child.getOrAddTree("..",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  assertEqualNodeUtil(node,parent);
  Map<String,String> map=ImmutableMap.of("a/b/c","/a/b/c","a/../b/c","/b/c","a/b/c/../..","/a","a/././././b/c","/a/b/c");
  for (  String relPath : map.keySet()) {
    NodeUtil n=node.getOrAddTree(relPath,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    assertEqualNodeUtil(new NodeUtil(root.getTree(map.get(relPath))),n);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
