<h3><span class=" glyphicon glyphicon-tag"/>&nbspBooleanVerifier</h3><kbd>Verifies boolean conditions</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.jackrabbit.oak.OakTest </h4><pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void closeAsyncIndexers() throws Exception {
  final AtomicReference<AsyncIndexUpdate> async=new AtomicReference<AsyncIndexUpdate>();
  Whiteboard wb=new DefaultWhiteboard(){
    @Override public <T>Registration register(    Class<T> type,    T service,    Map<?,?> properties){
      if (service instanceof AsyncIndexUpdate) {
        async.set((AsyncIndexUpdate)service);
      }
      return super.register(type,service,properties);
    }
  }
;
  Oak oak=new Oak().with(new OpenSecurityProvider()).with(wb).withAsyncIndexing("foo",5);
  ContentRepository repo=oak.createContentRepository();
  ((Closeable)repo).close();
  assertNotNull(async.get());
  assertTrue(async.get().isClosed());
  assertNull(WhiteboardUtils.getService(wb,AsyncIndexUpdate.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.api.TreeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void orderBefore() throws Exception {
  ContentSession s=repository.login(null,null);
  try {
    Root r=s.getLatestRoot();
    Tree t=r.getTree("/");
    t.addChild("node1");
    t.addChild("node2");
    t.addChild("node3");
    r.commit();
    t.getChild("node1").orderBefore("node2");
    t.getChild("node3").orderBefore(null);
    assertSequence(t.getChildren(),"node1","node2","node3");
    r.commit();
    assertSequence(t.getChildren(),"node1","node2","node3");
    t.getChild("node3").orderBefore("node2");
    assertSequence(t.getChildren(),"node1","node3","node2");
    r.commit();
    assertSequence(t.getChildren(),"node1","node3","node2");
    t.getChild("node1").orderBefore(null);
    assertSequence(t.getChildren(),"node3","node2","node1");
    r.commit();
    assertSequence(t.getChildren(),"node3","node2","node1");
    assertTrue(t.getProperty(":childOrder") == null);
    assertEquals("must not have any properties",0,t.getPropertyCount());
  }
  finally {
    s.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeWithConcurrentOrderBefore() throws Exception {
  ContentSession s1=repository.login(null,null);
  try {
    Root r1=s1.getLatestRoot();
    Tree t1=r1.getTree("/").addChild("c");
    t1.addChild("node1").orderBefore(null);
    t1.addChild("node2");
    r1.commit();
    ContentSession s2=repository.login(null,null);
    try {
      Root r2=s2.getLatestRoot();
      Tree t2=r2.getTree("/c");
      t1=r1.getTree("/c");
      t1.getChild("node2").orderBefore("node1");
      r1.commit();
      assertSequence(t1.getChildren(),"node2","node1");
      t2.remove();
      r2.commit();
      assertFalse(r2.getTree("/").hasChild("c"));
    }
  finally {
      s2.close();
    }
  }
  finally {
    s1.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.cache.CacheTest </h4><pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void evictionCallback() throws ExecutionException {
  final Set<String> evictedKeys=newHashSet();
  final Set<Integer> evictedValues=newHashSet();
  CacheLIRS<String,Integer> cache=CacheLIRS.<String,Integer>newBuilder().maximumSize(100).evictionCallback(new EvictionCallback<String,Integer>(){
    @Override public void evicted(    String key,    Integer value){
      evictedKeys.add(key);
      if (value != null) {
        assertEquals(key,valueOf(value));
        evictedValues.add(value);
      }
    }
  }
).build();
  for (int k=0; k < 200; k++) {
    cache.put(valueOf(k),k);
  }
  assertTrue(evictedKeys.size() <= evictedValues.size());
  for (  String key : evictedKeys) {
    assertFalse(cache.containsKey(key));
  }
  cache.invalidateAll();
  assertEquals(200,evictedKeys.size());
  assertEquals(200,evictedValues.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPutPeekRemove(){
  CacheLIRS<Integer,Integer> test=createCache(4);
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  assertNull(test.peek(4));
  assertNull(test.getIfPresent(4));
  test.put(4,40);
  verify(test,"mem: 4 stack: 4 3 2 1 cold: non-resident:");
  assertEquals(30,test.getUnchecked(3).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(20,test.peek(2).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(10,test.peek(1).intValue());
  assertEquals(10,test.getUnchecked(1).intValue());
  verify(test,"mem: 4 stack: 1 2 3 4 cold: non-resident:");
  test.put(3,30);
  verify(test,"mem: 4 stack: 3 1 2 4 cold: non-resident:");
  test.put(5,50);
  verify(test,"mem: 4 stack: 5 3 1 2 cold: 5 non-resident: 4");
  assertEquals(1,test.getMemory(1));
  assertEquals(1,test.getMemory(5));
  assertEquals(0,test.getMemory(4));
  assertEquals(0,test.getMemory(100));
  assertNull(test.peek(4));
  assertNull(test.getIfPresent(4));
  assertEquals(10,test.getUnchecked(1).intValue());
  assertEquals(20,test.getUnchecked(2).intValue());
  assertEquals(30,test.getUnchecked(3).intValue());
  verify(test,"mem: 4 stack: 3 2 1 cold: 5 non-resident: 4");
  assertEquals(50,test.getUnchecked(5).intValue());
  verify(test,"mem: 4 stack: 5 3 2 1 cold: 5 non-resident: 4");
  assertEquals(50,test.getUnchecked(5).intValue());
  verify(test,"mem: 4 stack: 5 3 2 cold: 1 non-resident: 4");
  assertEquals(50,test.remove(5).intValue());
  assertNull(test.remove(5));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident: 4");
  assertNull(test.remove(4));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident:");
  assertNull(test.remove(4));
  verify(test,"mem: 3 stack: 3 2 1 cold: non-resident:");
  test.put(4,40);
  test.put(5,50);
  verify(test,"mem: 4 stack: 5 4 3 2 cold: 5 non-resident: 1");
  test.getUnchecked(5);
  test.getUnchecked(2);
  test.getUnchecked(3);
  test.getUnchecked(4);
  verify(test,"mem: 4 stack: 4 3 2 5 cold: 2 non-resident: 1");
  assertEquals(50,test.remove(5).intValue());
  verify(test,"mem: 3 stack: 4 3 2 cold: non-resident: 1");
  assertEquals(20,test.remove(2).intValue());
  assertFalse(test.containsKey(1));
  assertNull(test.remove(1));
  assertFalse(test.containsKey(1));
  verify(test,"mem: 2 stack: 4 3 cold: non-resident:");
  test.put(1,10);
  test.put(2,20);
  verify(test,"mem: 4 stack: 2 1 4 3 cold: non-resident:");
  test.getUnchecked(1);
  test.getUnchecked(3);
  test.getUnchecked(4);
  verify(test,"mem: 4 stack: 4 3 1 2 cold: non-resident:");
  assertEquals(10,test.remove(1).intValue());
  verify(test,"mem: 3 stack: 4 3 2 cold: non-resident:");
  test.remove(2);
  test.remove(3);
  test.remove(4);
  test.clear();
  verify(test,"mem: 0 stack: cold: non-resident:");
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  test.put(4,40);
  test.put(5,50);
  assertTrue(test.containsValue(50));
  verify(test,"mem: 4 stack: 5 4 3 2 cold: 5 non-resident: 1");
  test.put(1,10);
  verify(test,"mem: 4 stack: 1 5 4 3 2 cold: 1 non-resident: 5");
  assertFalse(test.containsValue(50));
  test.remove(2);
  test.remove(3);
  test.remove(4);
  verify(test,"mem: 1 stack: 1 cold: non-resident: 5");
  assertTrue(test.containsKey(1));
  test.remove(1);
  assertFalse(test.containsKey(1));
  verify(test,"mem: 0 stack: cold: non-resident: 5");
  assertFalse(test.containsKey(5));
  assertTrue(test.isEmpty());
  test.clear();
  test.put(1,10);
  test.put(2,20);
  test.put(3,30);
  test.put(4,40);
  test.put(5,50);
  test.getUnchecked(4);
  test.getUnchecked(3);
  verify(test,"mem: 4 stack: 3 4 5 2 cold: 5 non-resident: 1");
  test.put(6,60);
  verify(test,"mem: 4 stack: 6 3 4 5 2 cold: 6 non-resident: 5 1");
  test.getUnchecked(6);
  verify(test,"mem: 4 stack: 6 3 4 cold: 2 non-resident: 5 1");
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefresh() throws ExecutionException {
  CacheLIRS<Integer,String> cache=new CacheLIRS.Builder<Integer,String>().maximumWeight(100).weigher(new Weigher<Integer,String>(){
    @Override public int weigh(    Integer key,    String value){
      return key + value.length();
    }
  }
).build(new CacheLoader<Integer,String>(){
    @Override public String load(    Integer key) throws Exception {
      if (key < 0 || key >= 100) {
        throw new Exception("Out of range");
      }
      return "n" + key;
    }
    @Override public ListenableFuture<String> reload(    Integer key,    String oldValue){
      assertTrue(oldValue != null);
      SettableFuture<String> f=SettableFuture.create();
      f.set(oldValue);
      return f;
    }
  }
);
  assertEquals("n1",cache.get(1));
  cache.refresh(1);
  cache.refresh(2);
  try {
    cache.get(-1);
    fail();
  }
 catch (  Exception e) {
  }
  cache.refresh(-1);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClear(){
  CacheLIRS<Integer,Integer> test=createCache(40,10);
  for (int i=0; i < 5; i++) {
    test.put(i,10 * i,9);
  }
  verify(test,"mem: 36 stack: 4 3 2 1 cold: 4 non-resident: 0");
  for (  Entry<Integer,Integer> e : test.entrySet()) {
    assertTrue(e.getKey() >= 1 && e.getKey() <= 4);
    assertTrue(e.getValue() >= 10 && e.getValue() <= 40);
  }
  for (  int x : test.asMap().values()) {
    assertTrue(x >= 10 && x <= 40);
  }
  for (  int x : test.keySet()) {
    assertTrue(x >= 1 && x <= 4);
  }
  assertEquals(40,test.getMaxMemory());
  assertEquals(10,test.getAverageMemory());
  assertEquals(36,test.getUsedMemory());
  assertEquals(4,test.size());
  assertEquals(3,test.sizeHot());
  assertEquals(1,test.sizeNonResident());
  assertFalse(test.isEmpty());
  test.setMaxMemory(10);
  assertEquals(10,test.getMaxMemory());
  test.setMaxMemory(40);
  test.setAverageMemory(1);
  assertEquals(1,test.getAverageMemory());
  test.setAverageMemory(10);
  verify(test,"mem: 36 stack: 4 3 2 1 cold: 4 non-resident: 0");
  test.asMap().putAll(test.asMap());
  verify(test,"mem: 40 stack: 4 3 2 1 cold: non-resident: 0");
  test.clear();
  verify(test,"mem: 0 stack: cold: non-resident:");
  assertEquals(40,test.getMaxMemory());
  assertEquals(10,test.getAverageMemory());
  assertEquals(0,test.getUsedMemory());
  assertEquals(0,test.size());
  assertEquals(0,test.sizeHot());
  assertEquals(0,test.sizeNonResident());
  assertTrue(test.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testZeroSizeCache(){
  CacheLIRS<Integer,String> cache=createCache(0,100);
  cache.put(1,"Hello",100);
  cache.put(2,"World",100);
  cache.put(3,"!",100);
  assertFalse(cache.containsKey(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsMap(){
  CacheLIRS<Integer,String> cache=createCache(10,1);
  ConcurrentMap<Integer,String> map=cache.asMap();
  assertNull(map.putIfAbsent(1,"Hello"));
  assertEquals(1,map.size());
  assertEquals("Hello",cache.getIfPresent(1));
  assertEquals("Hello",map.putIfAbsent(1,"Hallo"));
  assertEquals("Hello",cache.getIfPresent(1));
  assertEquals("Hello",map.replace(1,"Hallo"));
  assertEquals("Hallo",cache.getIfPresent(1));
  assertFalse(map.replace(1,"x","y"));
  assertTrue(map.replace(1,"Hallo","Hi!"));
  assertFalse(map.remove(1,"Hello"));
  assertTrue(map.remove(1,"Hi!"));
  assertEquals(0,map.size());
  map.put(1,"Hello");
  assertEquals("[1]",map.keySet().toString());
  assertEquals("[1=Hello]",cache.entrySet().toString());
  assertEquals("Hello",map.get(1));
  assertTrue(map.containsKey(1));
  assertFalse(map.containsKey(2));
  assertTrue(map.containsValue("Hello"));
  assertFalse(map.containsValue("Hallo"));
  assertFalse(map.isEmpty());
  map.remove(1);
  assertTrue(map.isEmpty());
  map.put(1,"Hello");
  map.clear();
  assertTrue(map.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanResistance(){
  boolean log=false;
  int size=20;
  CacheLIRS<Integer,Integer> test=createCache(size / 2 + 1);
  for (int i=0; i < size; i++) {
    test.put(-i,-i * 10);
  }
  verify(test,null);
  for (int i=0; i < size / 2; i++) {
    test.put(i,i * 10);
    test.getUnchecked(i);
    if (log) {
      System.out.println("get " + i + " -> "+ test);
    }
  }
  verify(test,null);
  for (int i=0; i < size; i++) {
    Integer x=test.getIfPresent(i);
    Integer y=test.peek(i);
    if (i < size / 2) {
      assertTrue("i: " + i,x != null);
      assertTrue("i: " + i,y != null);
      assertEquals(i * 10,x.intValue());
      assertEquals(i * 10,y.intValue());
    }
 else {
      assertNull(x);
      assertNull(y);
      test.put(i,i * 10);
      assertEquals(i * 10,test.peek(i).intValue());
    }
    if (log) {
      System.out.println("get " + i + " -> "+ test);
    }
    verify(test,null);
  }
  for (int i=0; i < size; i++) {
    Integer x=test.getIfPresent(i);
    if (i < size / 2 || i == size - 1) {
      assertTrue("i: " + i,x != null);
      assertEquals(i * 10,x.intValue());
    }
 else {
      assertNull(x);
    }
    verify(test,null);
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void evictionCallbackRandomized() throws ExecutionException {
  final HashMap<Integer,Integer> evictedMap=new HashMap<Integer,Integer>();
  final HashSet<Integer> evictedNonResidentSet=new HashSet<Integer>();
  CacheLIRS<Integer,Integer> cache=CacheLIRS.<Integer,Integer>newBuilder().maximumSize(10).evictionCallback(new EvictionCallback<Integer,Integer>(){
    @Override public void evicted(    Integer key,    Integer value){
      if (value == null) {
        assertTrue(evictedNonResidentSet.add(key));
      }
 else {
        assertEquals(null,evictedMap.put(key,value));
      }
    }
  }
).build();
  Random r=new Random(1);
  for (int k=0; k < 10000; k++) {
    if (r.nextInt(20) == 0) {
      evictedMap.clear();
      evictedNonResidentSet.clear();
      long size=cache.size();
      long sizeNonResident=cache.sizeNonResident();
      cache.invalidateAll();
      assertEquals(evictedMap.size(),size);
      assertEquals(evictedNonResidentSet.size(),sizeNonResident);
    }
    evictedMap.clear();
    evictedNonResidentSet.clear();
    int key=r.nextInt(20);
    if (r.nextBoolean()) {
      cache.put(key,k);
    }
 else {
      cache.get(key);
    }
    for (    Entry<Integer,Integer> ev : evictedMap.entrySet()) {
      int ek=ev.getKey();
      if (ek == key) {
      }
 else {
        assertFalse(cache.containsKey(ek));
      }
    }
    for (    Entry<Integer,Integer> ev : evictedMap.entrySet()) {
      int ek=ev.getKey();
      Integer v=ev.getValue();
      assertTrue(v < k);
      if (ek == key) {
      }
 else {
        assertFalse(cache.containsKey(ek));
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.cache.ConcurrentTest </h4><pre class="type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testCacheAccessInLoaderDeadlock() throws Exception {
  final Random r=new Random(1);
  final CacheLIRS<Integer,Integer> cache=new CacheLIRS.Builder<Integer,Integer>().maximumWeight(100).averageWeight(10).build();
  final Exception[] ex=new Exception[1];
  final int entryCount=10;
  int size=3;
  Thread[] threads=new Thread[size];
  final AtomicBoolean stop=new AtomicBoolean();
  for (int i=0; i < size; i++) {
    Thread t=new Thread(){
      @Override public void run(){
        Callable<Integer> callable=new Callable<Integer>(){
          @Override public Integer call() throws ExecutionException {
            if (r.nextBoolean()) {
              cache.get(r.nextInt(entryCount),this);
            }
 else {
              cache.get(r.nextInt(entryCount));
            }
            return 1;
          }
        }
;
        while (!stop.get()) {
          Integer key=r.nextInt(entryCount);
          try {
            cache.get(key,callable);
          }
 catch (          Exception e) {
            ex[0]=e;
          }
          cache.remove(key);
        }
      }
    }
;
    t.start();
    threads[i]=t;
  }
  Thread.sleep(100);
  stop.set(true);
  for (  Thread t : threads) {
    t.join(1000);
    if (t.isAlive()) {
      assertFalse("Deadlock detected!",t.isAlive());
    }
  }
  if (ex[0] != null) {
    throw ex[0];
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testLoaderBlock() throws Exception {
  final CacheLIRS<Integer,Integer> cache=new CacheLIRS.Builder<Integer,Integer>().maximumWeight(100).averageWeight(10).build();
  final Exception[] ex=new Exception[1];
  int threadCount=10;
  Thread[] threads=new Thread[threadCount];
  final AtomicBoolean stop=new AtomicBoolean();
  final AtomicInteger nextKey=new AtomicInteger();
  final AtomicLong additionalWait=new AtomicLong();
  for (int i=0; i < threadCount; i++) {
    Thread t=new Thread(){
      @Override public void run(){
        while (!stop.get()) {
          final int key=nextKey.getAndIncrement();
          final int wait=Math.min(key,100);
          Callable<Integer> callable=new Callable<Integer>(){
            @Override public Integer call() throws ExecutionException {
              try {
                Thread.sleep(wait);
              }
 catch (              InterruptedException e) {
              }
              cache.get(key * 10);
              return 1;
            }
          }
;
          long start=System.currentTimeMillis();
          try {
            cache.get(key,callable);
          }
 catch (          Exception e) {
            ex[0]=e;
          }
          long time=System.currentTimeMillis() - start;
          additionalWait.addAndGet(time - wait);
          cache.remove(key);
        }
      }
    }
;
    t.start();
    threads[i]=t;
  }
  Thread.sleep(1000);
  stop.set(true);
  for (  Thread t : threads) {
    t.join(1000);
    if (t.isAlive()) {
      assertFalse("Deadlock detected!",t.isAlive());
    }
  }
  if (ex[0] != null) {
    throw ex[0];
  }
  long add=additionalWait.get();
  assertTrue("Had to wait unexpectedly long for other threads: " + add,add < 1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.PropertiesUtilTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPopulate(){
  Map<String,Object> props=new HashMap<String,Object>();
  props.put("string","foo");
  props.put("bool","true");
  props.put("integer","7");
  props.put("aLong","11");
  TestBeanA bean=new TestBeanA();
  PropertiesUtil.populate(bean,props,false);
  assertEquals("foo",bean.getString());
  assertTrue(bean.getBool());
  assertEquals(7,bean.getInteger());
  assertEquals(11,bean.getaLong());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.concurrent.ExecutorCloserTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void simple() throws Exception {
  ExecutorService executorService=Executors.newSingleThreadExecutor();
  assertFalse(executorService.isTerminated());
  new ExecutorCloser(executorService).close();
  assertTrue(executorService.isTerminated());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void timeoutHandling() throws Exception {
  ExecutorService executorService=Executors.newSingleThreadExecutor();
  final CountDownLatch latch=new CountDownLatch(1);
  executorService.submit(new Callable<Void>(){
    @Override public Void call() throws Exception {
      latch.await();
      return null;
    }
  }
);
  new ExecutorCloser(executorService,100,TimeUnit.MILLISECONDS).close();
  assertTrue(executorService.isShutdown());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.io.LazyInputStreamTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws IOException {
  createFile();
  LazyInputStream in=new LazyInputStream(asByteSource(file));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(0,in.read());
  assertEquals(-1,in.read());
  assertEquals(-1,in.read());
  assertEquals(-1,in.read());
  in.close();
  in.close();
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertFalse(in.markSupported());
  in.mark(1);
  assertEquals(0,in.read());
  try {
    in.reset();
    fail();
  }
 catch (  IOException e) {
  }
  assertEquals(-1,in.read());
  in.close();
  in=new LazyInputStream(asByteSource(file));
  byte[] test=new byte[2];
  assertEquals(1,in.read(test));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(1,in.read(test,0,2));
  in.close();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(2,in.skip(2));
  assertEquals(-1,in.read(test));
  in.close();
  createFile();
  in=new LazyInputStream(asByteSource(file));
  assertEquals(0,in.read());
  assertEquals(-1,in.read());
  in.close();
  file.delete();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.jmx.JmxUtilTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void quotation() throws Exception {
  assertEquals("text",JmxUtil.quoteValueIfRequired("text"));
  TestCase.assertEquals("",JmxUtil.quoteValueIfRequired(""));
  assertTrue(JmxUtil.quoteValueIfRequired("text*with?chars").startsWith("\""));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void quoteAndComma() throws Exception {
  assertTrue(JmxUtil.quoteValueIfRequired("text,withComma").startsWith("\""));
  assertTrue(JmxUtil.quoteValueIfRequired("text=withEqual").startsWith("\""));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.junit.LogCustomizerTest </h4><pre class="type-7 type-6 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogs1(){
  LogCustomizer custom=LogCustomizer.forLogger("org.apache.jackrabbit.oak.commons.junit.LogCustomizerTest").enable(Level.DEBUG).create();
  try {
    custom.starting();
    LOG.debug("test message");
    List<String> logs=custom.getLogs();
    assertTrue(logs.size() == 1);
    assertThat("logs were recorded by custom logger",logs.toString(),containsString("test message"));
  }
  finally {
    custom.finished();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLogs2(){
  LogCustomizer custom=LogCustomizer.forLogger("org.apache.jackrabbit.oak.commons.junit.LogCustomizerTest").enable(Level.DEBUG).filter(Level.INFO).create();
  try {
    custom.starting();
    LOG.debug("test message");
    List<String> logs=custom.getLogs();
    assertTrue(logs.isEmpty());
  }
  finally {
    custom.finished();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.sort.EscapeUtilsTest </h4><pre class="type-13 type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void randomized() throws Exception {
  Random r=new Random(1);
  for (int i=0; i < 100000; i++) {
    int len=r.nextInt(10);
    StringBuilder buff=new StringBuilder();
    for (int j=0; j < len; j++) {
switch (r.nextInt(3)) {
case 0:
        String s="\\\r\nrnRN ";
      buff.append(s.charAt(r.nextInt(s.length())));
    break;
case 1:
  buff.append(RandomStringUtils.random(4,true,false));
break;
case 2:
buff.append((char)r.nextInt(65000));
break;
}
}
String original=buff.toString();
String escaped=EscapeUtils.escapeLineBreak(original);
String unescaped=EscapeUtils.unescapeLineBreaks(escaped);
assertTrue(escaped.indexOf('\n') < 0);
assertTrue(escaped.indexOf('\r') < 0);
assertEquals(original,unescaped);
}
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.sort.ExternalSortTest </h4><pre class="type-9 type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortAndSave() throws Exception {
  File f;
  String line;
  List<String> result;
  BufferedReader bf;
  List<String> sample=Arrays.asList(SAMPLE);
  Comparator<String> cmp=new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      return o1.compareTo(o2);
    }
  }
;
  f=ExternalSort.sortAndSave(sample,cmp,Charset.defaultCharset(),null,false,false);
  assertNotNull(f);
  assertTrue(f.exists());
  assertTrue(f.length() > 0);
  bf=new BufferedReader(new FileReader(f));
  result=new ArrayList<String>();
  while ((line=bf.readLine()) != null) {
    result.add(line);
  }
  bf.close();
  assertArrayEquals(Arrays.toString(result.toArray()),EXPECTED_SORT_RESULTS,result.toArray());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortAndSaveDistinct() throws Exception {
  File f;
  String line;
  List<String> result;
  BufferedReader bf;
  List<String> sample=Arrays.asList(SAMPLE);
  Comparator<String> cmp=new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      return o1.compareTo(o2);
    }
  }
;
  f=ExternalSort.sortAndSave(sample,cmp,Charset.defaultCharset(),null,true,false);
  assertNotNull(f);
  assertTrue(f.exists());
  assertTrue(f.length() > 0);
  bf=new BufferedReader(new FileReader(f));
  result=new ArrayList<String>();
  while ((line=bf.readLine()) != null) {
    result.add(line);
  }
  bf.close();
  assertArrayEquals(Arrays.toString(result.toArray()),EXPECTED_DISTINCT_RESULTS,result.toArray());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.commons.sort.StringSortTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Test for the case where sorting order should not be affected by escaping
 * "aa", "aa\n1", "aa\r2", "aa\\" -> "aa", "aa\n1", "aa\r2", "aa\\"
 * "aa", "aa\\n1", "aa\\r2", "aa\\\\" -> "aa", "aa\\", "aa\n1", "aa\r2",
 * In above case the sorting order for escaped string is different. So
 * it needs to be ensured that sorting order remain un affected by escaping
 * @throws Exception
 */
@Test public void sortWithEntriesHavingLineBreaks2() throws Exception {
  List<String> paths=Lists.newArrayList("/a","/a/a\nc","/a/a\rd","/a/a\r\ne","/a/a\\");
  collector=new StringSort(0,comparator);
  addPathsToCollector(paths);
  assertTrue(collector.usingFile());
  assertConstraints(paths);
  collector.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void overflowToDisk() throws Exception {
  List<String> paths=createTestPaths(10,true);
  collector=new StringSort(1000,comparator);
  addPathsToCollector(paths);
  assertTrue(collector.usingFile());
  assertConstraints(paths);
  collector.close();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void sortWithEntriesHavingLineBreaks() throws Exception {
  List<String> paths=Lists.newArrayList("/a","/a/b\nc","/a/b\rd","/a/b\r\ne","/a/c");
  collector=new StringSort(0,comparator);
  addPathsToCollector(paths);
  assertTrue(collector.usingFile());
  assertConstraints(paths);
  collector.close();
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void inMemory() throws Exception {
  List<String> paths=createTestPaths(5,false);
  collector=new StringSort(paths.size() + 1,comparator);
  addPathsToCollector(paths);
  assertConstraints(paths);
  assertFalse(collector.usingFile());
  collector.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.DefaultConflictHandlerOursTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddExistingNode() throws CommitFailedException {
  theirRoot.getTree("/").addChild("n").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/").addChild("n").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/n");
  assertTrue(n.exists());
  assertEquals(OUR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeleteChangedNode() throws CommitFailedException {
  theirRoot.getTree("/x").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/x").remove();
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertFalse(n.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeDeletedNode() throws CommitFailedException {
  theirRoot.getTree("/x").remove();
  ourRoot.getTree("/x").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertTrue(n.exists());
  assertEquals(OUR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.DefaultConflictHandlerTheirsTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteChangedNode() throws CommitFailedException {
  theirRoot.getTree("/x").setProperty("p",THEIR_VALUE);
  ourRoot.getTree("/x").remove();
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertTrue(n.exists());
  assertEquals(THEIR_VALUE,n.getProperty("p").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangeDeletedNode() throws CommitFailedException {
  theirRoot.getTree("/x").remove();
  ourRoot.getTree("/x").setProperty("p",OUR_VALUE);
  theirRoot.commit();
  ourRoot.commit();
  Tree n=ourRoot.getTree("/x");
  assertFalse(n.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.ImmutableRootTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPendingChanges(){
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.MutableTreeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getChild(){
  Tree tree=root.getTree("/");
  Tree child=tree.getChild("any");
  assertFalse(child.exists());
  child=tree.getChild("x");
  assertTrue(child.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBlob() throws CommitFailedException, IOException {
  Blob expected=new StringBasedBlob("test blob");
  root.getTree("/x").setProperty("blob",expected);
  root.commit();
  Blob actual=root.getTree("/x").getProperty("blob").getValue(Type.BINARY);
  assertEquals(expected,actual);
  assertTrue(expected.getNewStream().available() >= 0);
  assertTrue(actual.getNewStream().available() >= 0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setProperty() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasProperty("new"));
  tree.setProperty("new","value");
  PropertyState property=tree.getProperty("new");
  assertNotNull(property);
  assertEquals("new",property.getName());
  assertEquals("value",property.getValue(STRING));
  root.commit();
  property=tree.getProperty("new");
  assertNotNull(property);
  assertEquals("new",property.getName());
  assertEquals("value",property.getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeStatus() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.addChild("new");
  assertEquals(Tree.Status.NEW,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  Tree added=tree.getChild("new");
  added.addChild("another");
  assertEquals(Tree.Status.MODIFIED,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  tree.getChild("new").getChild("another").remove();
  assertEquals(Tree.Status.MODIFIED,tree.getChild("new").getStatus());
  root.commit();
  assertEquals(Tree.Status.UNCHANGED,tree.getChild("new").getStatus());
  assertFalse(tree.getChild("new").getChild("another").exists());
  Tree x=root.getTree("/x");
  Tree y=x.addChild("y");
  x.remove();
  assertFalse(x.exists());
  assertFalse(y.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisconnectAfterRefresh(){
  Tree x=root.getTree("/x");
  x.setProperty("p","any");
  Tree xx=x.addChild("xx");
  xx.setProperty("q","any");
  assertEquals(Status.MODIFIED,x.getStatus());
  assertEquals(Status.NEW,x.getPropertyStatus("p"));
  assertEquals(Status.NEW,xx.getStatus());
  assertEquals(Status.NEW,xx.getPropertyStatus("q"));
  root.refresh();
  assertEquals(Status.UNCHANGED,x.getStatus());
  assertNull(x.getPropertyStatus("p"));
  assertFalse(xx.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperty(){
  Tree tree=root.getTree("/");
  PropertyState propertyState=tree.getProperty("any");
  assertNull(propertyState);
  propertyState=tree.getProperty("a");
  assertNotNull(propertyState);
  assertFalse(propertyState.isArray());
  assertEquals(LONG,propertyState.getType());
  assertEquals(1,(long)propertyState.getValue(LONG));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeNew(){
  Tree tree=root.getTree("/");
  Tree t=tree.addChild("new");
  tree.getChild("new").remove();
  assertFalse(t.exists());
  assertFalse(tree.getChild("new").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisconnectAfterRemove(){
  Tree x=root.getTree("/x");
  x.setProperty("p","any");
  Tree xx=x.addChild("xx");
  xx.setProperty("q","any");
  assertEquals(Status.MODIFIED,x.getStatus());
  assertEquals(Status.NEW,x.getPropertyStatus("p"));
  assertEquals(Status.NEW,xx.getStatus());
  assertEquals(Status.NEW,xx.getPropertyStatus("q"));
  root.getTree("/x").remove();
  assertFalse(x.exists());
  assertFalse(xx.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeChild() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertTrue(tree.hasChild("x"));
  tree.getChild("x").remove();
  assertFalse(tree.hasChild("x"));
  root.commit();
  assertFalse(tree.hasChild("x"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getChildren(){
  Tree tree=root.getTree("/");
  Iterable<Tree> children=tree.getChildren();
  Set<String> expectedPaths=new HashSet<String>();
  Collections.addAll(expectedPaths,"/x","/y","/z");
  for (  Tree child : children) {
    assertTrue(expectedPaths.remove(child.getPath()));
  }
  assertTrue(expectedPaths.isEmpty());
  assertEquals(3,tree.getChildrenCount(4));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addChild() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasChild("new"));
  Tree added=tree.addChild("new");
  assertTrue(added.exists());
  assertEquals("new",added.getName());
  assertTrue(tree.hasChild("new"));
  root.commit();
  assertTrue(tree.hasChild("new"));
  tree.getChild("new").addChild("more");
  assertTrue(tree.getChild("new").hasChild("more"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void largeChildList() throws CommitFailedException {
  Tree tree=root.getTree("/");
  Set<String> added=new HashSet<String>();
  Tree large=tree.addChild("large");
  for (int c=0; c < 10000; c++) {
    String name="n" + c;
    added.add(name);
    large.addChild(name);
  }
  root.commit();
  for (  Tree child : large.getChildren()) {
    assertTrue(added.remove(child.getName()));
  }
  assertTrue(added.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperties(){
  Tree tree=root.getTree("/");
  Set<PropertyState> expectedProperties=Sets.newHashSet(LongPropertyState.createLongProperty("a",1L),LongPropertyState.createLongProperty("b",2L),LongPropertyState.createLongProperty("c",3L));
  Iterable<? extends PropertyState> properties=tree.getProperties();
  for (  PropertyState property : properties) {
    assertTrue(expectedProperties.remove(property));
  }
  assertTrue(expectedProperties.isEmpty());
  assertEquals(3,tree.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSetOrderableChildrenSetsProperty() throws Exception {
  Tree tree=root.getTree("/").addChild("test");
  tree.setOrderableChildren(true);
  assertTrue(((MutableTree)tree).getNodeState().hasProperty(TreeConstants.OAK_CHILD_ORDER));
  tree.setOrderableChildren(false);
  assertFalse(((MutableTree)tree).getNodeState().hasProperty(TreeConstants.OAK_CHILD_ORDER));
  tree.setOrderableChildren(true);
  root.commit();
  assertTrue(((MutableTree)tree).getNodeState().hasProperty(TreeConstants.OAK_CHILD_ORDER));
  tree.setOrderableChildren(false);
  root.commit();
  assertFalse(((MutableTree)tree).getNodeState().hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeProperty() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertTrue(tree.hasProperty("a"));
  tree.removeProperty("a");
  assertFalse(tree.hasProperty("a"));
  root.commit();
  assertFalse(tree.hasProperty("a"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addAndRemoveProperty() throws CommitFailedException {
  Tree tree=root.getTree("/");
  tree.setProperty("P0","V1");
  root.commit();
  assertTrue(tree.hasProperty("P0"));
  tree.removeProperty("P0");
  root.commit();
  assertFalse(tree.hasProperty("P0"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingChild() throws CommitFailedException {
  Tree tree=root.getTree("/");
  assertFalse(tree.hasChild("new"));
  tree.addChild("new");
  root.commit();
  assertTrue(tree.hasChild("new"));
  Tree added=tree.addChild("new");
  assertTrue(added.exists());
  assertEquals("new",added.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.core.RootTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToSelf() throws CommitFailedException {
  Root root=session.getLatestRoot();
  root.getTree("/").addChild("s");
  root.commit();
  assertTrue(root.move("/s","/s"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToDescendant() throws CommitFailedException {
  Root root=session.getLatestRoot();
  root.getTree("/").addChild("s");
  root.commit();
  assertFalse(root.move("/s","/s/t"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveNew(){
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree t=tree.addChild("new");
  root.move("/new","/y/new");
  assertEquals("/y/new",t.getPath());
  assertFalse(tree.getChild("new").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getTree(){
  Root root=session.getLatestRoot();
  List<String> validPaths=new ArrayList<String>();
  validPaths.add("/");
  validPaths.add("/x");
  validPaths.add("/x/xx");
  validPaths.add("/y");
  validPaths.add("/z");
  for (  String treePath : validPaths) {
    Tree tree=root.getTree(treePath);
    assertTrue(tree.exists());
    assertEquals(treePath,tree.getPath());
  }
  List<String> invalidPaths=new ArrayList<String>();
  invalidPaths.add("/any");
  invalidPaths.add("/x/any");
  for (  String treePath : invalidPaths) {
    assertFalse(root.getTree(treePath).exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveRemoveAdd(){
  Root root=session.getLatestRoot();
  Tree x=root.getTree("/x");
  Tree z=root.getTree("/z");
  z.setProperty("p","1");
  root.move("/z","/x/z");
  root.getTree("/x/z").remove();
  assertFalse(z.exists());
  x.addChild("z");
  assertEquals(Status.NEW,z.getStatus());
  x.getChild("z").setProperty("p","2");
  PropertyState p=z.getProperty("p");
  assertNotNull(p);
  assertEquals("2",p.getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rebasePreservesStatus() throws CommitFailedException {
  Root root1=session.getLatestRoot();
  Root root2=session.getLatestRoot();
  Tree x=root1.getTree("/x");
  Tree added=x.addChild("added");
  assertEquals(NEW,added.getStatus());
  root2.getTree("/x").addChild("bar");
  root2.commit();
  root1.rebase();
  assertTrue(x.hasChild("added"));
  assertEquals(NEW,x.getChild("added").getStatus());
  assertTrue(x.hasChild("bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rename() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree x=tree.getChild("x");
  assertTrue(x.exists());
  root.move("/x","/xx");
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("xx"));
  assertEquals("/xx",x.getPath());
  root.commit();
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("xx"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void move() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree tree=root.getTree("/");
  Tree y=tree.getChild("y");
  Tree x=tree.getChild("x");
  assertTrue(x.exists());
  assertFalse(root.hasPendingChanges());
  root.move("/x","/y/xx");
  assertTrue(root.hasPendingChanges());
  assertFalse(tree.hasChild("x"));
  assertTrue(y.hasChild("xx"));
  assertEquals("/y/xx",x.getPath());
  root.commit();
  assertFalse(root.hasPendingChanges());
  assertFalse(tree.hasChild("x"));
  assertTrue(tree.hasChild("y"));
  assertTrue(tree.getChild("y").hasChild("xx"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Regression test for OAK-208
 */
@Test public void removeMoved() throws CommitFailedException {
  Root root=session.getLatestRoot();
  Tree r=root.getTree("/");
  r.addChild("a");
  r.addChild("b");
  root.move("/a","/b/c");
  assertFalse(r.hasChild("a"));
  assertTrue(r.hasChild("b"));
  r.getChild("b").remove();
  assertFalse(r.hasChild("a"));
  assertFalse(r.hasChild("b"));
  root.commit();
  assertFalse(r.hasChild("a"));
  assertFalse(r.hasChild("b"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AsyncConflictsIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void updates() throws Exception {
  final Map<String,Exception> exceptions=Collections.synchronizedMap(new HashMap<String,Exception>());
  final Random generator=new Random(3);
  final ListAppender<ILoggingEvent> logAppender=subscribeAppender();
  setUpCluster(this.getClass(),mks,repos,NOT_PROVIDED);
  defineIndex(repos.get(0));
  final int numberNodes=10000;
  LOG.info("adding {} nodes",numberNodes);
  Session s=repos.get(0).login(ADMIN);
  Node test=s.getRootNode().addNode("test");
  test.setPrimaryType(NT_OAK_UNSTRUCTURED);
  try {
    for (int i=0; i < numberNodes; i++) {
      test.addNode("node" + i);
      test.setProperty(INDEX_PROPERTY,generator.nextInt(numberNodes / 3));
      if (i % 1024 == 0) {
        s.save();
      }
    }
    s.save();
  }
 catch (  Exception e) {
    exceptions.put(Thread.currentThread().getName(),e);
  }
 finally {
    s.logout();
  }
  LOG.info("Nodes added.");
  LOG.info("issuing re-index and wait for finish");
  s=repos.get(0).login(ADMIN);
  try {
    Node index=s.getNode("/oak:index/" + INDEX_DEF_NODE);
    index.setProperty(REINDEX_PROPERTY_NAME,true);
    s.save();
  }
 catch (  Exception e) {
    exceptions.put(Thread.currentThread().getName(),e);
  }
 finally {
    s.logout();
  }
  while (!isReindexFinished()) {
    Thread.sleep(5000);
  }
  raiseExceptions(exceptions,LOG);
  assertTrue(String.format("We should have not any '%s' in the logs",AsyncLogFilter.MESSAGE),logAppender.list.isEmpty());
  unsubscribe(logAppender);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AtomicCounterClusterIT </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void increments() throws Exception {
  setUpCluster(this.getClass(),mks,repos,NOT_PROVIDED);
  assertEquals("repositories and executors should match",repos.size(),executors.size());
  final String counterPath;
  final Random rnd=new Random(14);
  final AtomicLong expected=new AtomicLong(0);
  final Map<String,Exception> exceptions=Collections.synchronizedMap(new HashMap<String,Exception>());
  Repository repo=repos.get(0);
  Session session=repo.login(ADMIN);
  Node counter;
  try {
    counter=session.getRootNode().addNode("counter");
    counter.addMixin(MIX_ATOMIC_COUNTER);
    session.save();
    counterPath=counter.getPath();
  }
  finally {
    session.logout();
  }
  alignCluster(mks);
  assertFalse("Path to the counter node should be set",Strings.isNullOrEmpty(counterPath));
  for (  Repository r : repos) {
    try {
      session=r.login(ADMIN);
      counter=session.getNode(counterPath);
      assertEquals("Nothing should have touched the `expected`",0,expected.get());
      assertEquals("Wrong initial counter",expected.get(),counter.getProperty(PROP_COUNTER).getLong());
    }
  finally {
      session.logout();
    }
  }
  final int numIncrements=Integer.getInteger("oak.test.it.atomiccounter.threads",100);
  LOG.debug("pushing {} increments per each of the {} cluster nodes for a total of {} concurrent updates",numIncrements,repos.size(),numIncrements * repos.size());
  long start=LOG_PERF.start("Firing the threads");
  List<ListenableFutureTask<Void>> tasks=Lists.newArrayList();
  for (  Repository rep : repos) {
    final Repository r=rep;
    for (int i=0; i < numIncrements; i++) {
      ListenableFutureTask<Void> task=ListenableFutureTask.create(new Callable<Void>(){
        @Override public Void call() throws Exception {
          Session s=r.login(ADMIN);
          try {
            try {
              Node n=s.getNode(counterPath);
              int increment=rnd.nextInt(10) + 1;
              n.setProperty(PROP_INCREMENT,increment);
              expected.addAndGet(increment);
              s.save();
            }
  finally {
              s.logout();
            }
          }
 catch (          Exception e) {
            exceptions.put(Thread.currentThread().getName(),e);
          }
          return null;
        }
      }
);
      new Thread(task).start();
      tasks.add(task);
    }
  }
  LOG_PERF.end(start,-1,"Firing threads completed","");
  Futures.allAsList(tasks).get();
  LOG_PERF.end(start,-1,"Futures completed","");
  waitForTaskCompletion();
  LOG_PERF.end(start,-1,"All tasks completed","");
  Thread.sleep(5000);
  raiseExceptions(exceptions,LOG);
  for (int i=0; i < repos.size(); i++) {
    Repository r=repos.get(i);
    try {
      session=r.login(ADMIN);
      counter=session.getNode(counterPath);
      LOG.debug("Cluster node: {}, actual counter: {}, expected counter: {}",i + 1,expected.get(),counter.getProperty(PROP_COUNTER).getLong());
      assertEquals("Wrong counter on node " + (i + 1),expected.get(),counter.getProperty(PROP_COUNTER).getLong());
    }
  finally {
      session.logout();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AtomicCounterTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void incrementRootNode() throws RepositoryException {
  Session session=getAdminSession();
  try {
    Node root=session.getRootNode();
    Node node=root.addNode("normal node");
    session.save();
    node.setProperty(PROP_INCREMENT,1L);
    session.save();
    assertTrue("for normal nodes we expect the increment property to be treated as normal",node.hasProperty(PROP_INCREMENT));
    node=root.addNode("counterNode");
    node.addMixin(MIX_ATOMIC_COUNTER);
    session.save();
    assertCounter(node,0);
    node.setProperty(PROP_INCREMENT,1L);
    session.save();
    assertCounter(node,1);
    node.setProperty(PROP_INCREMENT,1L);
    session.save();
    assertCounter(node,2);
    node.setProperty(PROP_INCREMENT,-2L);
    session.save();
    assertCounter(node,0);
    node.setProperty(PROP_INCREMENT,5L);
    session.save();
    assertCounter(node,5);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.AutoCreatedItemsTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void autoCreatedItems() throws Exception {
  Session s=getAdminSession();
  new TestContentLoader().loadTestContent(s);
  Node test=s.getRootNode().addNode("test","test:autoCreate");
  assertTrue(test.hasProperty("test:property"));
  assertEquals("default value",test.getProperty("test:property").getString());
  assertTrue(test.hasProperty("test:propertyMulti"));
  assertArrayEquals(new Value[]{s.getValueFactory().createValue("value1"),s.getValueFactory().createValue("value2")},test.getProperty("test:propertyMulti").getValues());
  assertTrue(test.hasNode("test:folder"));
  Node folder=test.getNode("test:folder");
  assertEquals("nt:folder",folder.getPrimaryNodeType().getName());
  assertTrue(folder.hasProperty("jcr:created"));
  assertTrue(folder.hasProperty("jcr:createdBy"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CRUDTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCRUD() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("world","hello world");
  session.save();
  assertEquals("hello world",session.getProperty("/hello/world").getString());
  session.getNode("/hello").setProperty("world","Hello, World!");
  session.save();
  assertEquals("Hello, World!",session.getProperty("/hello/world").getString());
  session.getNode("/hello").remove();
  session.save();
  assertTrue(!session.propertyExists("/hello/world"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CompatibilityIssuesTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBinaryCoercion() throws RepositoryException, IOException {
  Session session=getAdminSession();
  String ntName="binaryCoercionTest";
  NodeTypeManager ntm=session.getWorkspace().getNodeTypeManager();
  NodeTypeTemplate ntt=ntm.createNodeTypeTemplate();
  ntt.setName(ntName);
  PropertyDefinitionTemplate propertyWithType=ntm.createPropertyDefinitionTemplate();
  propertyWithType.setName("javaObject");
  propertyWithType.setRequiredType(PropertyType.STRING);
  PropertyDefinitionTemplate unnamed=ntm.createPropertyDefinitionTemplate();
  unnamed.setName("*");
  unnamed.setRequiredType(PropertyType.UNDEFINED);
  List<PropertyDefinition> properties=ntt.getPropertyDefinitionTemplates();
  properties.add(propertyWithType);
  properties.add(unnamed);
  ntm.registerNodeType(ntt,false);
  Node node=session.getRootNode().addNode("testNodeForBinary",ntName);
  ByteArrayOutputStream bos=serializeObject("testValue");
  node.setProperty("javaObject",session.getValueFactory().createBinary(new ByteArrayInputStream(bos.toByteArray())));
  Assert.assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(bos.toByteArray()),node.getProperty("javaObject").getStream()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSearchDescendentUsingXPath() throws Exception {
  Session adminSession=getAdminSession();
  String testNodePath="/home/users/geometrixx-outdoors/emily.andrews@mailinator.com/social/relationships/following/aaron.mcdonald@mailinator.com";
  Node testNode=JcrUtils.getOrCreateByPath(testNodePath,null,adminSession);
  testNode.setProperty("id","aaron.mcdonald@mailinator.com");
  AccessControlManager acMgr=adminSession.getAccessControlManager();
  JackrabbitAccessControlList tmpl=AccessControlUtils.getAccessControlList(acMgr,"/home/users/geometrixx-outdoors");
  ValueFactory vf=adminSession.getValueFactory();
  Map<String,Value> restrictions=new HashMap<String,Value>();
  restrictions.put("rep:glob",vf.createValue("*/social/relationships/following/*"));
  tmpl.addEntry(EveryonePrincipal.getInstance(),new Privilege[]{acMgr.privilegeFromName(Privilege.JCR_READ)},true,restrictions);
  acMgr.setPolicy(tmpl.getPath(),tmpl);
  adminSession.save();
  Session anonymousSession=getRepository().login(new GuestCredentials());
  QueryManager qm=anonymousSession.getWorkspace().getQueryManager();
  Query q=qm.createQuery("/jcr:root/home//social/relationships/following//*[@id='aaron.mcdonald@mailinator.com']",Query.XPATH);
  QueryResult r=q.execute();
  RowIterator it=r.getRows();
  Assert.assertTrue(it.hasNext());
  anonymousSession.logout();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * OAK-939 - Change in behaviour from JR2. Following test case leads to
 * CommitFailedException but it passes in JR2
 */
@Test public void removeNodeInDifferentSession() throws Throwable {
  final String testNode="test_node";
  final String testNodePath='/' + testNode;
  Session session=getAdminSession();
  session.getRootNode().addNode(testNode);
  session.save();
  boolean refreshIntervalZero=false;
  Session s3=newSession(refreshIntervalZero);
  Session s2=newSession(refreshIntervalZero);
  s2.getNode(testNodePath).setProperty("foo","bar");
  s2.save();
  s3.getNode(testNodePath).remove();
  try {
    s3.save();
  }
 catch (  InvalidItemStateException e) {
    assertTrue(e.getCause() instanceof CommitFailedException);
  }
  s2.logout();
  s3.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentAddNodesClusterIT </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void rebaseVisibility() throws Exception {
  for (int i=0; i < 2; i++) {
    DocumentMK mk=new DocumentMK.Builder().setMongoDB(createConnection().getDB()).setAsyncDelay(0).setClusterId(i + 1).open();
    mks.add(mk);
  }
  final DocumentMK mk1=mks.get(0);
  final DocumentMK mk2=mks.get(1);
  Repository r1=new Jcr(mk1.getNodeStore()).createRepository();
  repos.add(r1);
  Repository r2=new Jcr(mk2.getNodeStore()).createRepository();
  repos.add(r2);
  Session s1=r1.login(new SimpleCredentials("admin","admin".toCharArray()));
  Session s2=r2.login(new SimpleCredentials("admin","admin".toCharArray()));
  Node root1=s1.getRootNode().addNode("session-1");
  s1.save();
  Node root2=s2.getRootNode().addNode("session-2");
  s2.save();
  runBackgroundOps(mk1);
  runBackgroundOps(mk2);
  runBackgroundOps(mk1);
  createNodes(root1,"nodes");
  createNodes(root2,"nodes");
  s2.save();
  runBackgroundOps(mk2);
  runBackgroundOps(mk1);
  assertFalse(s1.getRootNode().hasNode("session-2/nodes"));
  s1.refresh(true);
  assertTrue(s1.getRootNode().hasNode("session-2/nodes"));
  s1.logout();
  s2.logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConcurrentFileOperationsTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void interleavingOperations2() throws Exception {
  Node folder1=testRootNode.addNode("folder1","nt:unstructured");
  Node folder2=testRootNode.addNode("folder2","nt:unstructured");
  addFile(testRootNode,"dummy");
  session.save();
  Session s1=createAdminSession();
  Session s2=createAdminSession();
  try {
    Node file1=addFile(s1.getNode(folder1.getPath()),"file1.tmp");
    Node file2=addFile(s2.getNode(folder2.getPath()),"file2.tmp");
    s1.save();
    s2.save();
    rename(file1,"file1.bin");
    rename(file2,"file2.bin");
    s1.save();
    s2.save();
  }
  finally {
    s1.logout();
    s2.logout();
  }
  session.refresh(false);
  assertTrue(session.nodeExists(folder1.getPath() + "/file1.bin"));
  assertFalse(session.nodeExists(folder1.getPath() + "/file1.tmp"));
  assertTrue(session.nodeExists(folder2.getPath() + "/file2.bin"));
  assertFalse(session.nodeExists(folder2.getPath() + "/file2.tmp"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ConflictResolutionTest </h4><pre class="type-7 type-6 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteChangedNode() throws RepositoryException {
  deleteChangedNodeOps("node0");
  Set<String> mnsdLogs;
  Set<String> cvLogs;
  try {
    logMergingNodeStateDiff.starting();
    logConflictValidator.starting();
    deleteChangedNodeOps("node1");
  }
  finally {
    mnsdLogs=Sets.newHashSet(logMergingNodeStateDiff.getLogs());
    cvLogs=Sets.newHashSet(logConflictValidator.getLogs());
    logMergingNodeStateDiff.finished();
    logConflictValidator.finished();
  }
  assertTrue(mnsdLogs.size() == 1);
  assertThat("MergingNodeStateDiff log message must contain a reference to the handler",mnsdLogs.toString(),containsString("NodeConflictHandler<DELETE_CHANGED_NODE>"));
  assertThat("MergingNodeStateDiff log message must contain a reference to the resolution",mnsdLogs.toString(),containsString("DELETE_CHANGED_NODE with resolution THEIRS"));
  assertThat("MergingNodeStateDiff log message must contain a reference to the modified property",mnsdLogs.toString(),containsString("^\"/metadata/updated\":\"myself\"]"));
  assertTrue(cvLogs.size() == 1);
  assertThat("ConflictValidator log message must contain a reference to the path",cvLogs.toString(),containsString("/node1 = {deleteChangedNode = {jcr:content}}"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.CopyTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyNode() throws RepositoryException {
  Session session=getAdminSession();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopyVersionableNodeCreatesJcrCopiedFrom() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_VERSIONABLE);
  session.save();
  Version baseV=toCopy.getBaseVersion();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  Node copy=testNode.getNode("target/copied");
  VersionHistory copiedVh=copy.getVersionHistory();
  assertTrue(copiedVh.hasProperty(VersionConstants.JCR_COPIED_FROM));
  Property prop=copiedVh.getProperty(VersionConstants.JCR_COPIED_FROM);
  assertEquals(PropertyType.WEAKREFERENCE,prop.getType());
  Node copiedFrom=prop.getNode();
  assertTrue(baseV.isSame(copiedFrom));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyReferenceableChildNode() throws Exception {
  Session session=getAdminSession();
  session.getNode(TEST_PATH + "/source/node").addNode("child").addMixin(JcrConstants.MIX_REFERENCEABLE);
  session.save();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
  Node childCopy=testNode.getNode("target/copied/child");
  assertTrue(childCopy.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  assertFalse(childCopy.getUUID().equals(testNode.getNode("source/node/child").getUUID()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyReferenceableNode() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_REFERENCEABLE);
  session.save();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
  Node copy=testNode.getNode("target/copied");
  assertTrue(copy.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  assertFalse(copy.getUUID().equals(testNode.getNode("source/node").getUUID()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyVersionableNode() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_VERSIONABLE);
  session.save();
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
  Node copy=testNode.getNode("target/copied");
  assertTrue(copy.isNodeType(JcrConstants.MIX_VERSIONABLE));
  assertFalse(copy.getVersionHistory().isSame(toCopy.getVersionHistory()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyLockedNode() throws Exception {
  Session session=getAdminSession();
  Node toCopy=session.getNode(TEST_PATH + "/source/node");
  toCopy.addMixin(JcrConstants.MIX_LOCKABLE);
  session.save();
  session.getWorkspace().getLockManager().lock(toCopy.getPath(),true,true,Long.MAX_VALUE,"my");
  assertTrue(toCopy.isLocked());
  assertTrue(toCopy.hasProperty(JcrConstants.JCR_LOCKISDEEP));
  assertTrue(toCopy.hasProperty(JcrConstants.JCR_LOCKOWNER));
  session.getWorkspace().copy(TEST_PATH + "/source/node",TEST_PATH + "/target/copied");
  assertTrue(testNode.hasNode("source/node"));
  assertTrue(testNode.hasNode("target/copied"));
  Node copy=testNode.getNode("target/copied");
  assertTrue(copy.isNodeType(JcrConstants.MIX_LOCKABLE));
  assertFalse(copy.isLocked());
  assertFalse(copy.hasProperty(JcrConstants.JCR_LOCKISDEEP));
  assertFalse(copy.hasProperty(JcrConstants.JCR_LOCKOWNER));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ItemSaveTest </h4><pre class="type-5 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveMissesProperty() throws RepositoryException {
  assumeTrue(!NodeImpl.SAVE_SESSION);
  try {
    prop1.setValue("changed");
    prop2.setValue("changed");
    prop1.save();
    fail("Expected UnsupportedRepositoryOperationException");
  }
 catch (  UnsupportedRepositoryOperationException e) {
    assertTrue(e.getCause() instanceof CommitFailedException);
  }
 finally {
    session.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveOnNewNode() throws RepositoryException {
  assumeTrue(!NodeImpl.SAVE_SESSION);
  try {
    foo.addNode("child").save();
    fail("Expected UnsupportedRepositoryOperationException");
  }
 catch (  UnsupportedRepositoryOperationException e) {
    assertTrue(e.getCause() instanceof CommitFailedException);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveOnNewProperty() throws RepositoryException {
  assumeTrue(!NodeImpl.SAVE_SESSION);
  try {
    foo.setProperty("p3","v3").save();
    fail("Expected UnsupportedRepositoryOperationException");
  }
 catch (  UnsupportedRepositoryOperationException e) {
    assertTrue(e.getCause() instanceof CommitFailedException);
  }
 finally {
    session.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveMissesNode() throws RepositoryException {
  assumeTrue(!NodeImpl.SAVE_SESSION);
  try {
    root.addNode("child1");
    foo.addNode("child2");
    foo.save();
    fail("Expected UnsupportedRepositoryOperationException");
  }
 catch (  UnsupportedRepositoryOperationException e) {
    assertTrue(e.getCause() instanceof CommitFailedException);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.ManyChildrenIT </h4><pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sizeTest() throws Exception {
  Session session=getAdminSession();
  int count=5000;
  String nodeType="nt:folder";
  Node many=session.getRootNode().addNode("many",nodeType);
  for (int i=0; i < count; i++) {
    many.addNode("test" + i,nodeType);
  }
  session.save();
  Session session2=getAdminSession();
  many=session2.getRootNode().getNode("many");
  NodeIterator it=many.getNodes();
  long size=it.getSize();
  assertTrue("size: " + size,size == -1 || size == count);
  for (int i=0; i < count; i++) {
    assertTrue(it.hasNext());
    it.next();
  }
  assertFalse(it.hasNext());
  session2.logout();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addRemoveNodes() throws Exception {
  int numNodes=101;
  Session writer=getAdminSession();
  Node test=writer.getRootNode().addNode("test","nt:unstructured");
  for (int i=0; i < numNodes; i++) {
    test.addNode("node-" + i,"nt:unstructured");
  }
  writer.save();
  for (int i=0; i < numNodes; i++) {
    if (i % 2 == 0) {
      test.getNode("node-" + i).remove();
    }
  }
  writer.save();
  test.addNode("node-x");
  writer.save();
  assertTrue(test.hasNode("node-x"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.MoveTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMoveNewReferenceable() throws Exception {
  Node node1=testRootNode.addNode(nodeName1);
  node1.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node1.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  Node node2=testRootNode.addNode(nodeName2);
  String destPath=node2.getPath() + '/' + nodeName1;
  move(node1.getPath(),destPath,false);
  assertEquals(destPath,node1.getPath());
  superuser.save();
  assertEquals(destPath,node1.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Simulate a 'rename' call using 3 sessions:
 * - 1st create a node that has a '.tmp' extension 
 * - 2nd remove the '.tmp' by issuing a Session#move call on a new session
 * - 3rd verify the move by issuing a #getNode call on the destination path using a new session
 */
@Test public void testOak898() throws Exception {
  String name="testMove";
  Node node=testRootNode.addNode(name + ".tmp");
  superuser.save();
  String destPath=testRootNode.getPath() + '/' + name;
  Session session2=getHelper().getSuperuserSession();
  try {
    assertFalse(session2.hasPendingChanges());
    session2.move(node.getPath(),destPath);
    assertTrue(session2.hasPendingChanges());
    session2.save();
  }
  finally {
    session2.logout();
  }
  Session session3=getHelper().getSuperuserSession();
  try {
    assertNotNull(session3.getNode(destPath));
  }
  finally {
    session3.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.OrderableNodesTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-612
 */
@Test public void testAddNode() throws Exception {
  new TestContentLoader().loadTestContent(getAdminSession());
  Session session=getAdminSession();
  Node test=session.getRootNode().addNode("test","test:orderableFolder");
  assertTrue(test.getPrimaryNodeType().hasOrderableChildNodes());
  test.addNode("a");
  test.addNode("b");
  session.save();
  NodeIterator it=test.getNodes();
  assertEquals("a",it.nextNode().getName());
  assertEquals("b",it.nextNode().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.RefreshOnGCTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void compactionCausesRefresh() throws RepositoryException, InterruptedException, ExecutionException, IOException {
  Session session=repository.login(new SimpleCredentials("admin","admin".toCharArray()));
  try {
    Node root=session.getRootNode();
    root.addNode("one");
    session.save();
    addNode(repository,"two");
    fileStore.compact();
    assertTrue(root.hasNode("one"));
    assertTrue("Node two must be visible as compaction should cause the session to refresh",root.hasNode("two"));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.RepositoryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDouble() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(42.1d);
  values[1]=getAdminSession().getValueFactory().createValue(99.0d);
  parentNode.setProperty("multi double",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi double");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DOUBLE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void largeMultiValueProperty() throws Exception {
  final List<String> logMessages=Lists.newArrayList();
  Appender<ILoggingEvent> a=new AppenderBase<ILoggingEvent>(){
    @Override protected void append(    ILoggingEvent e){
      if (Level.WARN.isGreaterOrEqual(e.getLevel())) {
        logMessages.add(e.getFormattedMessage());
      }
    }
  }
;
  a.start();
  rootLogger().addAppender(a);
  Session session=getAdminSession();
  Node node=session.getRootNode().addNode("largeMultiValueProperty","nt:unstructured");
  String[] largeArray=new String[1000 + 1];
  Arrays.fill(largeArray,"x");
  Property p=node.setProperty("fooProp",largeArray);
  Property p2=node.setProperty("barProp",new String[]{"x"});
  p2.setValue(largeArray);
  session.save();
  rootLogger().detachAppender(a);
  a.stop();
  assertTrue(logMessages.size() >= 2);
  assertThat("Warn log message must contains a reference to the large array property path",logMessages.toString(),containsString(p.getPath()));
  assertThat("Warn log message must contains a reference to the large array property path",logMessages.toString(),containsString(p2.getPath()));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-118") @Test public void getWorkspaceNames() throws RepositoryException {
  String[] workspaces=getAdminSession().getWorkspace().getAccessibleWorkspaceNames();
  Set<String> names=new HashSet<String>(){
{
      add("default");
    }
  }
;
  assertTrue(asList(workspaces).containsAll(names));
  assertTrue(names.containsAll(asList(workspaces)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeFromNode() throws RepositoryException {
  Node root=getNode("/");
  Node node=root.getNode("foo");
  assertNotNull(node);
  assertEquals("foo",node.getName());
  assertEquals("/foo",node.getPath());
  Node nodeAgain=getNode("/foo");
  assertTrue(node.isSame(nodeAgain));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDecimal() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(BigDecimal.valueOf(42));
  values[1]=getAdminSession().getValueFactory().createValue(BigDecimal.valueOf(99));
  parentNode.setProperty("multi decimal",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi decimal");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DECIMAL,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void move() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  Node source=node.addNode("source").addNode("node");
  node.addNode("target");
  session.save();
  session.refresh(true);
  session.move(TEST_PATH + "/source/node",TEST_PATH + "/target/moved");
  assertEquals(TEST_PATH + "/target/moved",source.getPath());
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
  session.save();
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void workspaceCopyWithReferences() throws RepositoryException {
  Session session=getAdminSession();
  ValueFactory vf=session.getValueFactory();
  Node root=session.getRootNode();
  Node other=root.addNode("other");
  other.addMixin("mix:referenceable");
  Node src=root.addNode("src");
  Node test=src.addNode("test");
  test.addMixin("mix:referenceable");
  src.setProperty("test",test);
  src.setProperty("other",other);
  src.setProperty("multi",new Value[]{vf.createValue(test),vf.createValue(other)});
  session.save();
  session.getWorkspace().copy("/src","/dest");
  Node dest=root.getNode("dest");
  assertEquals("/dest/test",dest.getProperty("test").getNode().getPath());
  assertEquals("/other",dest.getProperty("other").getNode().getPath());
  Value[] refs=dest.getProperty("multi").getValues();
  assertEquals(2,refs.length);
  Set<String> paths=new HashSet<String>();
  for (  Value v : refs) {
    paths.add(session.getNodeByIdentifier(v.getString()).getPath());
  }
  assertTrue(paths.contains("/other"));
  assertTrue(paths.contains("/dest/test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void importNodeType() throws RepositoryException, IOException, ParseException {
  Session session=getAdminSession();
  NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
  if (!manager.hasNodeType("myNodeType")) {
    StringBuilder defs=new StringBuilder();
    defs.append("[\"myNodeType\"]\n");
    defs.append("  - prop1\n");
    defs.append("  + * (nt:base) = nt:unstructured \n");
    Reader cndReader=new InputStreamReader(new ByteArrayInputStream(defs.toString().getBytes()));
    CndImporter.registerNodeTypes(cndReader,session);
  }
  NodeType myNodeType=manager.getNodeType("myNodeType");
  assertTrue(myNodeType.isNodeType("nt:base"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNamedWeakReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  Value value=session.getValueFactory().createValue(referee,true);
  getNode(TEST_PATH).setProperty("weak-reference1",value);
  getNode("/bar").setProperty("weak-reference2",value);
  session.save();
  PropertyIterator refs=referee.getWeakReferences("weak-reference1");
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("weak-reference1",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedBinary() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  InputStream is=new ByteArrayInputStream("foo".getBytes());
  Binary bin=getAdminSession().getValueFactory().createBinary(is);
  values[0]=getAdminSession().getValueFactory().createValue(bin);
  is=new ByteArrayInputStream("bar".getBytes());
  bin=getAdminSession().getValueFactory().createBinary(is);
  values[1]=getAdminSession().getValueFactory().createValue(bin);
  parentNode.setProperty("multi binary",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi binary");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BINARY,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionRemappedNamespace() throws RepositoryException {
  NamespaceRegistry nsReg=getAdminSession().getWorkspace().getNamespaceRegistry();
  nsReg.registerNamespace("foo","file:///foo");
  getAdminSession().getRootNode().addNode("foo:test");
  getAdminSession().save();
  Session s=createAdminSession();
  s.setNamespacePrefix("bar","file:///foo");
  assertTrue(s.getRootNode().hasNode("bar:test"));
  Node n=s.getRootNode().getNode("bar:test");
  assertEquals("bar:test",n.getName());
  s.logout();
  getAdminSession().getRootNode().getNode("foo:test").remove();
  getAdminSession().save();
  nsReg.unregisterNamespace("foo");
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeDot() throws RepositoryException {
  Node node=getNode("/foo");
  Node same=node.getNode(".");
  assertNotNull(same);
  assertEquals("foo",same.getName());
  assertTrue(same.isSame(node));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void expandedName() throws RepositoryException {
  Session session=getAdminSession();
  session.setNamespacePrefix("foo","http://example.com/");
  session.getRootNode().addNode("{0} test");
  session.save();
  assertTrue(session.nodeExists("/{0} test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsNew() throws RepositoryException, InterruptedException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node node1=root.addNode("node1");
  session.save();
  node1.remove();
  Node node2=root.addNode("node2");
  assertTrue("The Node is just added",node2.isNew());
  Node node1Again=root.addNode("node1");
  assertTrue("The Node is just added but has a remove in same commit",node1Again.isNew());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedStringWithNull() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[3];
  values[0]=getAdminSession().getValueFactory().createValue(true);
  values[2]=getAdminSession().getValueFactory().createValue(false);
  parentNode.setProperty("multi with null",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi with null");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BOOLEAN,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length - 1,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void hasNodeDotDot() throws RepositoryException {
  Node root=getNode("/");
  assertFalse(root.hasNode(".."));
  Node node=getNode("/foo");
  assertTrue(node.hasNode(".."));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveReferenceable() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  node.addNode("source").addNode("node").addMixin("mix:referenceable");
  node.addNode("target");
  session.save();
  session.refresh(true);
  session.move(TEST_PATH + "/source/node",TEST_PATH + "/target/moved");
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
  session.save();
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNamespaceRegistry() throws RepositoryException {
  NamespaceRegistry nsReg=getAdminSession().getWorkspace().getNamespaceRegistry();
  assertFalse(asList(nsReg.getPrefixes()).contains("foo"));
  assertFalse(asList(nsReg.getURIs()).contains("file:///foo"));
  nsReg.registerNamespace("foo","file:///foo");
  assertTrue(asList(nsReg.getPrefixes()).contains("foo"));
  assertTrue(asList(nsReg.getURIs()).contains("file:///foo"));
  nsReg.unregisterNamespace("foo");
  assertFalse(asList(nsReg.getPrefixes()).contains("foo"));
  assertFalse(asList(nsReg.getURIs()).contains("file:///foo"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addNode() throws RepositoryException {
  Session session=getAdminSession();
  String newNode=TEST_PATH + "/new";
  assertFalse(session.nodeExists(newNode));
  Node node=getNode(TEST_PATH);
  Node added=node.addNode("new");
  assertFalse(node.isNew());
  assertTrue(node.isModified());
  assertTrue(added.isNew());
  assertFalse(added.isModified());
  session.save();
  Session session2=createAnonymousSession();
  try {
    assertTrue(session2.nodeExists(newNode));
    added=session2.getNode(newNode);
    assertFalse(added.isNew());
    assertFalse(added.isModified());
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addNodeToRootNode() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  String newNode="newNodeBelowRoot";
  assertFalse(root.hasNode(newNode));
  root.addNode(newNode);
  session.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValueName() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi name",values,PropertyType.NAME);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi name");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.NAME,property.getType());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedURI() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("http://www.day.com",PropertyType.URI);
  values[1]=getAdminSession().getValueFactory().createValue("file://var/dam",PropertyType.URI);
  parentNode.setProperty("multi uri",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi uri");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.URI,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getNodeByIdentifier() throws RepositoryException {
  Node node=getNode("/foo");
  String id=node.getIdentifier();
  Node node2=getAdminSession().getNodeByIdentifier(id);
  assertTrue(node.isSame(node2));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveRefreshConflict() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getRootNode().addNode("node").setProperty("p","v1");
    session2.getRootNode().addNode("node").setProperty("p","v2");
    assertTrue(session1.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().hasNode("node"));
    session1.save();
    assertTrue(session1.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().hasNode("node"));
    session2.refresh(true);
    assertTrue(session1.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().hasNode("node"));
    try {
      session2.save();
      fail("Expected InvalidItemStateException");
    }
 catch (    InvalidItemStateException expected) {
    }
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renameNonOrderable() throws RepositoryException {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node parent=root.addNode("parent",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  parent.addNode("fo");
  Node foo=parent.addNode("foo");
  session.save();
  ((JackrabbitNode)foo).rename("renamed");
  assertEquals("renamed",foo.getName());
  assertFalse(session.nodeExists("/parent/foo"));
  assertTrue(session.nodeExists("/parent/renamed"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void setDoubleNaNProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"NaN",getAdminSession().getValueFactory().createValue(Double.NaN));
  Session session2=createAnonymousSession();
  try {
    Property property2=session2.getProperty(TEST_PATH + "/NaN");
    assertTrue(Double.isNaN(property2.getDouble()));
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedLong() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(42L);
  values[1]=getAdminSession().getValueFactory().createValue(84L);
  parentNode.setProperty("multi long",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi long");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.LONG,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void nullProperty() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  parentNode.setProperty("newProperty","some value");
  parentNode.getSession().save();
  Session session2=createAdminSession();
  try {
    session2.getProperty(TEST_PATH + "/newProperty").setValue((String)null);
    session2.save();
  }
  finally {
    session2.logout();
  }
  Session session3=createAnonymousSession();
  try {
    assertFalse(session3.propertyExists(TEST_PATH + "/newProperty"));
  }
  finally {
    session3.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedString() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("one");
  values[1]=getAdminSession().getValueFactory().createValue("two");
  parentNode.setProperty("multi string",values);
  parentNode.getSession().save();
  Session session2=createAdminSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi string");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.STRING,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sessionRefreshTrue() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    Node foo=session1.getNode("/foo");
    Node added=foo.addNode("added");
    assertTrue(added.isNew());
    session2.getNode("/foo").addNode("bar");
    session2.save();
    session1.refresh(true);
    assertTrue(foo.hasNode("added"));
    assertTrue(foo.getNode("added").isNew());
    assertTrue(foo.hasNode("bar"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValue() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi value",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi value");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.STRING,property.getType());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeWithSpecialChars() throws RepositoryException {
  Session session=getAdminSession();
  String nodeName="foo{";
  String newNode=TEST_PATH + '/' + nodeName;
  assertFalse(session.nodeExists(newNode));
  Node node=getNode(TEST_PATH);
  node.addNode(nodeName);
  session.save();
  Session session2=createAnonymousSession();
  try {
    assertTrue(session2.nodeExists(newNode));
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-118") @Test public void createDeleteWorkspace() throws RepositoryException {
  getAdminSession().getWorkspace().createWorkspace("new");
  Session session2=createAdminSession();
  try {
    String[] workspaces=session2.getWorkspace().getAccessibleWorkspaceNames();
    assertTrue(asList(workspaces).contains("new"));
    Session session3=getRepository().login("new");
    assertEquals("new",session3.getWorkspace().getName());
    session3.logout();
    session2.getWorkspace().deleteWorkspace("new");
  }
  finally {
    session2.logout();
  }
  Session session4=createAdminSession();
  try {
    String[] workspaces=session4.getWorkspace().getAccessibleWorkspaceNames();
    assertFalse(asList(workspaces).contains("new"));
  }
  finally {
    session4.logout();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeNode() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  parentNode.addNode("newNode");
  parentNode.getSession().save();
  Session session2=createAdminSession();
  try {
    Node removeNode=session2.getNode(TEST_PATH + "/newNode");
    removeNode.remove();
    try {
      removeNode.getParent();
      fail("Cannot retrieve the parent from a transiently removed item.");
    }
 catch (    InvalidItemStateException expected) {
    }
    assertTrue(session2.getNode(TEST_PATH).isModified());
    session2.save();
  }
  finally {
    session2.logout();
  }
  Session session3=createAnonymousSession();
  try {
    assertFalse(session3.nodeExists(TEST_PATH + "/newNode"));
    assertFalse(session3.getNode(TEST_PATH).isModified());
  }
  finally {
    session3.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setMultiValuedProperty() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("one");
  values[1]=getAdminSession().getValueFactory().createValue("two");
  parentNode.setProperty("multi string2",values);
  parentNode.getSession().save();
  values[0]=getAdminSession().getValueFactory().createValue("eins");
  values[1]=getAdminSession().getValueFactory().createValue("zwei");
  parentNode.setProperty("multi string2",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi string2");
    assertTrue(property.isMultiple());
    Value[] values2=property.getValues();
    assertEquals(2,values.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionRefresh() throws RepositoryException {
  Session session=getAdminSession();
  session.getNode("/").addNode("node1");
  session.getNode("/node1").addNode("node2");
  session.getNode("/").addNode("node1/node3");
  Node node1=session.getNode("/node1");
  assertEquals("/node1",node1.getPath());
  Node node2=session.getNode("/node1/node2");
  assertEquals("/node1/node2",node2.getPath());
  Node node3=session.getNode("/node1/node3");
  assertEquals("/node1/node3",node3.getPath());
  node3.setProperty("property1","value1");
  Item property1=session.getProperty("/node1/node3/property1");
  assertFalse(property1.isNode());
  assertEquals("value1",((Property)property1).getString());
  session.refresh(true);
  assertTrue(session.itemExists("/node1"));
  assertTrue(session.itemExists("/node1/node2"));
  assertTrue(session.itemExists("/node1/node3"));
  assertTrue(session.itemExists("/node1/node3/property1"));
  session.refresh(false);
  assertFalse(session.itemExists("/node1"));
  assertFalse(session.itemExists("/node1/node2"));
  assertFalse(session.itemExists("/node1/node3"));
  assertFalse(session.itemExists("/node1/node3/property1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void liveNodes() throws RepositoryException {
  Session session=getAdminSession();
  Node n1=(Node)session.getItem(TEST_PATH);
  Node n2=(Node)session.getItem(TEST_PATH);
  Node c1=n1.addNode("c1");
  Node c2=n2.addNode("c2");
  assertTrue(n1.hasNode("c1"));
  assertTrue(n1.hasNode("c2"));
  assertTrue(n2.hasNode("c1"));
  assertTrue(n2.hasNode("c2"));
  c1.remove();
  assertFalse(n1.hasNode("c1"));
  assertTrue(n1.hasNode("c2"));
  assertFalse(n2.hasNode("c1"));
  assertTrue(n2.hasNode("c2"));
  c2.remove();
  assertFalse(n1.hasNode("c1"));
  assertFalse(n1.hasNode("c2"));
  assertFalse(n2.hasNode("c1"));
  assertFalse(n2.hasNode("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedBoolean() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(true);
  values[1]=getAdminSession().getValueFactory().createValue(false);
  parentNode.setProperty("multi boolean",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi boolean");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.BOOLEAN,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  getNode(TEST_PATH).setProperty("reference",session.getValueFactory().createValue(referee));
  session.save();
  PropertyIterator refs=referee.getReferences();
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("reference",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNamedReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  Value value=session.getValueFactory().createValue(referee);
  getNode(TEST_PATH).setProperty("reference1",value);
  getNode("/bar").setProperty("reference2",value);
  session.save();
  PropertyIterator refs=referee.getReferences("reference1");
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("reference1",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addEmptyMultiValuedProperty() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[0];
  parentNode.setProperty("multi empty",values,PropertyType.BOOLEAN);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi empty");
    assertTrue(property.isMultiple());
    Value[] values2=property.getValues();
    assertEquals(0,values2.length);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeByUUID() throws RepositoryException {
  Node node=getNode("/foo").addNode("boo");
  node.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String uuid=node.getUUID();
  assertNotNull(uuid);
  assertEquals(uuid,node.getIdentifier());
  Node nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
  Node childNode=node.addNode("boohoo");
  childNode.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(childNode.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String childUuid=childNode.getUUID();
  assertNotNull(childUuid);
  assertEquals(childUuid,childNode.getIdentifier());
  nAgain=childNode.getSession().getNodeByUUID(childUuid);
  assertTrue(nAgain.isSame(childNode));
  assertTrue(nAgain.isSame(childNode.getSession().getNodeByIdentifier(childUuid)));
  node.getSession().move("/foo/boo","/foo/boohoo");
  node=getNode("/foo/boohoo");
  nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void liveNode() throws RepositoryException {
  Session session=getAdminSession();
  Node n1=session.getNode(TEST_PATH);
  Node n2=session.getNode(TEST_PATH);
  assertTrue(n1.isSame(n2));
  Node c1=n1.addNode("c1");
  n1.setProperty("p1","v1");
  c1.setProperty("pc1","vc1");
  Node c2=n2.addNode("c2");
  n2.setProperty("p2","v2");
  c2.setProperty("pc2","vc2");
  assertTrue(c1.isSame(n2.getNode("c1")));
  assertTrue(c2.isSame(n1.getNode("c2")));
  assertTrue(n1.hasNode("c1"));
  assertTrue(n1.hasNode("c2"));
  assertTrue(n1.hasProperty("p1"));
  assertTrue(n1.hasProperty("p2"));
  assertTrue(c1.hasProperty("pc1"));
  assertFalse(c1.hasProperty("pc2"));
  assertTrue(n2.hasNode("c1"));
  assertTrue(n2.hasNode("c2"));
  assertTrue(n2.hasProperty("p1"));
  assertTrue(n2.hasProperty("p2"));
  assertFalse(c2.hasProperty("pc1"));
  assertTrue(c2.hasProperty("pc2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedName() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("jcr:foo",PropertyType.NAME);
  values[1]=getAdminSession().getValueFactory().createValue("bar",PropertyType.NAME);
  parentNode.setProperty("multi name",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi name");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.NAME,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getProperties() throws RepositoryException {
  Set<String> propertyNames=new HashSet<String>(){
{
      add("intProp");
      add("mvProp");
      add("added");
    }
  }
;
  Set<String> values=new HashSet<String>(){
{
      add("added");
      add("1");
      add("2");
      add("3");
      add("42");
    }
  }
;
  Node node=getNode("/foo");
  node.setProperty("added","added");
  node.getProperty("stringProp").remove();
  node.getProperty("intProp").remove();
  node.setProperty("intProp",42);
  PropertyIterator properties=node.getProperties();
  assertEquals(4,properties.getSize());
  while (properties.hasNext()) {
    Property p=properties.nextProperty();
    if (JcrConstants.JCR_PRIMARYTYPE.equals(p.getName())) {
      continue;
    }
    assertTrue(propertyNames.remove(p.getName()));
    if (p.isMultiple()) {
      for (      Value v : p.getValues()) {
        assertTrue(values.remove(v.getString()));
      }
    }
 else {
      assertTrue(values.remove(p.getString()));
    }
  }
  assertTrue(propertyNames.isEmpty());
  assertTrue(values.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRootChildByUUID() throws RepositoryException {
  Node node=getNode("/").addNode("boo");
  node.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(node.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String uuid=node.getUUID();
  assertNotNull(uuid);
  assertEquals(uuid,node.getIdentifier());
  Node nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
  Node childNode=node.addNode("boohoo");
  childNode.addMixin(JcrConstants.MIX_REFERENCEABLE);
  assertTrue(childNode.isNodeType(JcrConstants.MIX_REFERENCEABLE));
  String childUuid=childNode.getUUID();
  assertNotNull(childUuid);
  assertEquals(childUuid,childNode.getIdentifier());
  nAgain=childNode.getSession().getNodeByUUID(childUuid);
  assertTrue(nAgain.isSame(childNode));
  assertTrue(nAgain.isSame(childNode.getSession().getNodeByIdentifier(childUuid)));
  node.getSession().move("/boo","/boohoo");
  node=getNode("/boohoo");
  nAgain=node.getSession().getNodeByUUID(uuid);
  assertTrue(nAgain.isSame(node));
  assertTrue(nAgain.isSame(node.getSession().getNodeByIdentifier(uuid)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetItemReturnsNodeBeforeProperty() throws RepositoryException {
  String snnpSupported=getRepository().getDescriptor(OPTION_NODE_AND_PROPERTY_WITH_SAME_NAME_SUPPORTED);
  assumeTrue(Boolean.valueOf(snnpSupported));
  String newNodeName="getItemTest";
  String nodeAndPropertyName="subnode";
  Session session=getAdminSession();
  Node root=session.getRootNode();
  assertFalse(root.hasNode(newNodeName));
  Node newNode=root.addNode(newNodeName,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  newNode.setProperty(nodeAndPropertyName,"prop value");
  newNode.addNode(nodeAndPropertyName);
  session.save();
  Item item=session.getItem("/" + newNodeName + "/"+ nodeAndPropertyName);
  assertTrue("should retrieve Node before property",item.isNode());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getWeakReferences() throws RepositoryException {
  Session session=getAdminSession();
  Node referee=getNode("/foo");
  referee.addMixin("mix:referenceable");
  getNode(TEST_PATH).setProperty("weak-reference",session.getValueFactory().createValue(referee,true));
  session.save();
  PropertyIterator refs=referee.getWeakReferences();
  assertTrue(refs.hasNext());
  Property p=refs.nextProperty();
  assertEquals("weak-reference",p.getName());
  assertFalse(refs.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sessionIsolation() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getRootNode().addNode("node1");
    session2.getRootNode().addNode("node2");
    assertTrue(session1.getRootNode().hasNode("node1"));
    assertTrue(session2.getRootNode().hasNode("node2"));
    assertFalse(session1.getRootNode().hasNode("node2"));
    assertFalse(session2.getRootNode().hasNode("node1"));
    session1.save();
    session2.save();
    assertTrue(session1.getRootNode().hasNode("node1"));
    assertTrue(session1.getRootNode().hasNode("node2"));
    assertTrue(session2.getRootNode().hasNode("node1"));
    assertTrue(session2.getRootNode().hasNode("node2"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodeDotDot() throws RepositoryException {
  Node node=getNode("/foo");
  Node root=node.getNode("..");
  assertNotNull(root);
  assertEquals("",root.getName());
  assertTrue(root.isSame(node.getParent()));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNodes() throws RepositoryException {
  Node test=getNode(TEST_PATH);
  test.addNode("foo");
  test.addNode("bar");
  test.addNode("baz");
  getAdminSession().save();
  Set<String> nodeNames=new HashSet<String>(){
{
      add("bar");
      add("added");
      add("baz");
    }
  }
;
  test=getNode(TEST_PATH);
  test.addNode("added");
  test.getNode("foo").remove();
  test.getNode("bar").remove();
  test.addNode("bar");
  NodeIterator nodes=test.getNodes();
  assertEquals(3,nodes.getSize());
  while (nodes.hasNext()) {
    String name=nodes.nextNode().getName();
    assertTrue(nodeNames.remove(name));
  }
  assertTrue(nodeNames.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPropertyFromNode() throws RepositoryException {
  Node node=getNode("/foo");
  Property property=node.getProperty("stringProp");
  assertNotNull(property);
  assertEquals("stringProp",property.getName());
  assertEquals("/foo/stringProp",property.getPath());
  Value value=property.getValue();
  assertNotNull(value);
  assertEquals(PropertyType.STRING,value.getType());
  assertEquals("stringVal",value.getString());
  Property propertyAgain=getProperty("/foo/stringProp");
  assertTrue(property.isSame(propertyAgain));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void transientChanges() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Node node=parentNode.addNode("test");
  assertFalse(node.hasProperty("p"));
  node.setProperty("p","pv");
  assertTrue(node.hasProperty("p"));
  assertFalse(node.hasNode("n"));
  node.addNode("n");
  assertTrue(node.hasNode("n"));
  assertTrue(node.hasProperties());
  assertTrue(node.hasNodes());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sessionRefreshFalse() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    Node foo=session1.getNode("/foo");
    foo.addNode("added");
    session2.getNode("/foo").addNode("bar");
    session2.save();
    session1.refresh(false);
    assertFalse(foo.hasNode("added"));
    assertTrue(foo.hasNode("bar"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setStringProperty() throws RepositoryException, IOException {
  Node parentNode=getNode(TEST_PATH);
  addProperty(parentNode,"string",getAdminSession().getValueFactory().createValue("string \" value"));
  Property property=parentNode.getProperty("string");
  property.setValue("new value");
  assertTrue(parentNode.isModified());
  assertTrue(property.isModified());
  assertFalse(property.isNew());
  property.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property2=session2.getProperty(TEST_PATH + "/string");
    assertEquals("new value",property2.getString());
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveConflict() throws RepositoryException {
  getAdminSession().getRootNode().addNode("node");
  getAdminSession().save();
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getNode("/node").remove();
    session2.getNode("/node").addNode("2");
    assertFalse(session1.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().hasNode("node"));
    assertTrue(session2.getRootNode().getNode("node").hasNode("2"));
    session1.save();
    assertFalse(session1.getRootNode().hasNode("node"));
    assertFalse(session2.getRootNode().hasNode("node"));
    try {
      session2.save();
      fail("Expected InvalidItemStateException");
    }
 catch (    InvalidItemStateException expected) {
    }
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedPath() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue("/nt:foo/jcr:bar",PropertyType.PATH);
  values[1]=getAdminSession().getValueFactory().createValue("/",PropertyType.PATH);
  parentNode.setProperty("multi path",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi path");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.PATH,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void workspaceMove() throws RepositoryException {
  Session session=getAdminSession();
  Node node=getNode(TEST_PATH);
  node.addNode("source").addNode("node");
  node.addNode("target");
  session.save();
  session.getWorkspace().move(TEST_PATH + "/source/node",TEST_PATH + "/target/moved");
  assertFalse(node.hasNode("source/node"));
  assertTrue(node.hasNode("source"));
  assertTrue(node.hasNode("target/moved"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void inThreadSessionSynchronisation() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  Session session3=createAdminSession();
  try {
    session1.getRootNode().addNode("newNode");
    session1.save();
    assertTrue(session2.nodeExists("/newNode"));
    assertTrue(session3.nodeExists("/newNode"));
  }
  finally {
    session1.logout();
    session2.logout();
    session3.logout();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test SNS 1-based indexed path.
 * JCR 2.0, Chapter 22.2:
 * <em>
 * A name in a content repository path that does not explicitly specify an index implies an index of 1.
 * For example, /a/b/c is equivalent to /a[1]/b[1]/c[1].
 * </em>
 * @throws RepositoryException
 */
@Test public void getNodeSNS() throws RepositoryException {
  Node node=getNode("/foo[1]");
  assertNotNull(node);
  assertEquals("foo",node.getName());
  assertEquals("/foo",node.getPath());
  node.addNode("bar");
  Node bar=getNode("/foo[1]/bar[1]");
  assertEquals("/foo/bar",bar.getPath());
  try {
    getNode("/foo[1]/bar[2]");
    fail("retrieving wrong SNS index should throw PathNotFoundException");
  }
 catch (  PathNotFoundException e) {
  }
  try {
    getProperty("/foo[1]/bar[2]/jcr:primaryType");
    fail("retrieving wrong SNS index should throw PathNotFoundException");
  }
 catch (  PathNotFoundException e) {
  }
  assertTrue(getAdminSession().nodeExists("/foo[1]/bar[1]"));
  assertTrue(node.hasNode("bar[1]"));
  assertTrue(node.hasProperty("bar[1]/jcr:primaryType"));
  assertTrue(getAdminSession().propertyExists("/foo[1]/bar[1]/jcr:primaryType"));
  assertFalse(getAdminSession().nodeExists("/foo[1]/bar[2]"));
  assertFalse(node.hasNode("bar[2]"));
  assertFalse(node.hasProperty("bar[2]/jcr:primaryType"));
  assertFalse(getAdminSession().propertyExists("/foo[1]/bar[2]/jcr:primaryType"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void hasPropertyDot() throws RepositoryException {
  Node root=getNode("/");
  assertFalse((root.hasProperty(".")));
  Node node=getNode("/foo");
  assertFalse((node.hasProperty(".")));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nodeTypeRegistry() throws RepositoryException {
  NodeTypeManager ntMgr=getAdminSession().getWorkspace().getNodeTypeManager();
  assertFalse(ntMgr.hasNodeType("foo"));
  NodeTypeTemplate ntd=ntMgr.createNodeTypeTemplate();
  ntd.setName("foo");
  ntMgr.registerNodeType(ntd,false);
  assertTrue(ntMgr.hasNodeType("foo"));
  ntMgr.unregisterNodeType("foo");
  assertFalse(ntMgr.hasNodeType("foo"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void importUUIDCreateNew() throws Exception {
  Session session=getAdminSession();
  Node node=session.getRootNode().addNode("node");
  node.addMixin("mix:referenceable");
  session.save();
  String uuid=node.getIdentifier();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  session.exportSystemView("/node",out,true,false);
  node.remove();
  session.save();
  session.importXML("/",new ByteArrayInputStream(out.toByteArray()),IMPORT_UUID_CREATE_NEW);
  session.save();
  node=session.getNode("/node");
  assertFalse(uuid.equals(node.getIdentifier()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedReference() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Node referee=getAdminSession().getNode("/foo");
  referee.addMixin("mix:referenceable");
  getAdminSession().save();
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(referee);
  values[1]=getAdminSession().getValueFactory().createValue(referee);
  parentNode.setProperty("multi reference",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi reference");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.REFERENCE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedWeakReference() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Node referee=getAdminSession().getNode("/foo");
  referee.addMixin("mix:referenceable");
  getAdminSession().save();
  Value[] values=new Value[2];
  values[0]=getAdminSession().getValueFactory().createValue(referee,true);
  values[1]=getAdminSession().getValueFactory().createValue(referee,true);
  parentNode.setProperty("multi weak reference",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi weak reference");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.WEAKREFERENCE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sessionSave() throws RepositoryException {
  Session session1=createAdminSession();
  Session session2=createAdminSession();
  try {
    session1.getNode("/").addNode("node1");
    session1.getNode("/node1").addNode("node2");
    session1.getNode("/").addNode("node1/node3");
    Node node1=session1.getNode("/node1");
    assertEquals("/node1",node1.getPath());
    Node node2=session1.getNode("/node1/node2");
    assertEquals("/node1/node2",node2.getPath());
    Node node3=session1.getNode("/node1/node3");
    assertEquals("/node1/node3",node3.getPath());
    node3.setProperty("property1","value1");
    Item property1=session1.getProperty("/node1/node3/property1");
    assertFalse(property1.isNode());
    assertEquals("value1",((Property)property1).getString());
    assertFalse(session2.itemExists("/node1"));
    assertFalse(session2.itemExists("/node1/node2"));
    assertFalse(session2.itemExists("/node1/node3"));
    assertFalse(session2.itemExists("/node1/node3/property1"));
    session1.save();
    assertTrue(session2.itemExists("/node1"));
    assertTrue(session2.itemExists("/node1/node2"));
    assertTrue(session2.itemExists("/node1/node3"));
    assertTrue(session2.itemExists("/node1/node3/property1"));
    session2.refresh(false);
    assertTrue(session2.itemExists("/node1"));
    assertTrue(session2.itemExists("/node1/node2"));
    assertTrue(session2.itemExists("/node1/node3"));
    assertTrue(session2.itemExists("/node1/node3/property1"));
  }
  finally {
    session1.logout();
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMultiValuedDate() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  Value[] values=new Value[2];
  Calendar calendar=Calendar.getInstance();
  values[0]=getAdminSession().getValueFactory().createValue(calendar);
  calendar.add(Calendar.DAY_OF_MONTH,1);
  values[1]=getAdminSession().getValueFactory().createValue(calendar);
  parentNode.setProperty("multi date",values);
  parentNode.getSession().save();
  Session session2=createAnonymousSession();
  try {
    Property property=session2.getProperty(TEST_PATH + "/multi date");
    assertTrue(property.isMultiple());
    assertEquals(PropertyType.DATE,property.getType());
    Value[] values2=property.getValues();
    assertEquals(values.length,values2.length);
    assertEquals(values[0],values2[0]);
    assertEquals(values[1],values2[1]);
  }
  finally {
    session2.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void removeProperty() throws RepositoryException {
  Node parentNode=getNode(TEST_PATH);
  parentNode.setProperty("newProperty","some value");
  parentNode.getSession().save();
  Session session2=createAdminSession();
  try {
    session2.getProperty(TEST_PATH + "/newProperty").remove();
    session2.save();
  }
  finally {
    session2.logout();
  }
  Session session3=createAnonymousSession();
  try {
    assertFalse(session3.propertyExists(TEST_PATH + "/newProperty"));
  }
  finally {
    session3.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void hasNodeDot() throws RepositoryException {
  Node root=getNode("/");
  assertTrue(root.hasNode("."));
  Node node=getNode("/foo");
  assertTrue(node.hasNode("."));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void hasPropertyDotDot() throws RepositoryException {
  Node root=getNode("/");
  assertFalse((root.hasProperty("..")));
  Node node=getNode("/foo");
  assertFalse((node.hasProperty("..")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.SameNamePropertyNodeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSessionGetNode() throws Exception {
  Node nn=superuser.getNode(n.getPath());
  assertTrue(n.isSame(nn));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNodeExists() throws Exception {
  assertTrue(superuser.nodeExists(n.getPath()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Tests if a nodestore fixture sets the SNNP repository descriptor to true.
 */
@Test public void testNodeStoreSupport() throws Exception {
  NodeStore nodeStore=NodeStoreFixtures.SEGMENT_MK.createNodeStore();
  JackrabbitRepository repository=(JackrabbitRepository)new Jcr(nodeStore).createRepository();
  try {
    assertTrue(repository.getDescriptorValue(Repository.OPTION_NODE_AND_PROPERTY_WITH_SAME_NAME_SUPPORTED).getBoolean());
  }
  finally {
    repository.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetNode() throws Exception {
  assertTrue(n.isSame(testRootNode.getNode(sameName)));
  assertFalse(n.isSame(p));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasNode() throws Exception {
  assertTrue(testRootNode.hasNode(sameName));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testItemExists() throws Exception {
  assertTrue(superuser.itemExists(n.getPath()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsSame() throws Exception {
  assertFalse(n.isSame(p));
  assertFalse(p.isSame(n));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetProperty() throws Exception {
  assertTrue(p.isSame(testRootNode.getProperty(sameName)));
  assertFalse(p.isSame(n));
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetItem() throws Exception {
  Item item=superuser.getItem(n.getPath());
  if (item.isNode()) {
    assertTrue(n.isSame(item));
  }
 else {
    assertTrue(p.isSame(item));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSessionGetProperty() throws Exception {
  Property pp=superuser.getProperty(p.getPath());
  assertTrue(p.isSame(pp));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPropertyExists() throws Exception {
  assertTrue(superuser.propertyExists(p.getPath()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasProperty() throws Exception {
  assertTrue(testRootNode.hasProperty(sameName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.SameNameSiblingTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void modifySiblings() throws RepositoryException {
  for (  String name : SIBLINGS) {
    Node sib=sns.getNode(name);
    sib.addNode("node");
    sib.setProperty("prop",42);
  }
  session.save();
  for (  String name : asList(SIBLING,SIBLINGS)) {
    Node sib=sns.getNode(name);
    assertTrue(sib.hasNode("node"));
    assertEquals(42L,sib.getProperty("prop").getLong());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveSiblings() throws RepositoryException {
  Node target=session.getRootNode().addNode("target");
  session.save();
  for (  String name : SIBLINGS) {
    session.move(sns.getPath() + '/' + name,target.getPath() + '/' + rename(name));
  }
  session.save();
  for (  String name : SIBLINGS) {
    assertFalse(sns.hasNode(name));
    assertTrue(target.hasNode(rename(name)));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void iterateSiblings() throws RepositoryException {
  Set<String> expected=newHashSet(SIBLINGS);
  expected.add(SIBLING);
  expected.remove(SIBLINGS[0]);
  NodeIterator siblings=sns.getNodes();
  while (siblings.hasNext()) {
    Node sib=siblings.nextNode();
    assertTrue("Unexpected node: " + sib.getPath(),expected.remove(sib.getName()));
  }
  assertTrue("Missing nodes: " + expected,expected.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void renameSiblings() throws RepositoryException {
  for (  String name : SIBLINGS) {
    JackrabbitNode sib=(JackrabbitNode)sns.getNode(name);
    sib.rename(rename(name));
  }
  session.save();
  for (  String name : SIBLINGS) {
    assertFalse(sns.hasNode(name));
    assertTrue(sns.hasNode(rename(name)));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void getSiblings() throws RepositoryException {
  for (  String name : asList(SIBLING,SIBLINGS)) {
    assertTrue(sns.hasNode(name));
    Node sib=sns.getNode(name);
    session.getNode(sns.getPath() + '/' + name);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.cluster.ObservationTest </h4><pre class="type-13 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void externalEvents() throws Throwable {
  final Set<String> externallyAdded=synchronizedSet(new LinkedHashSet<String>());
  final List<Throwable> exceptions=Lists.newArrayList();
  ObservationManager obsMgr=s1.getWorkspace().getObservationManager();
  final AtomicLong localEvents=new AtomicLong();
  final AtomicLong externalEvents=new AtomicLong();
  EventListener listener=new EventListener(){
    @Override public void onEvent(    EventIterator events){
      try {
        Set<String> paths=Sets.newHashSet();
        while (events.hasNext()) {
          Event event=events.nextEvent();
          String external="";
          AtomicLong counter=localEvents;
          if (event instanceof JackrabbitEvent) {
            if (((JackrabbitEvent)event).isExternal()) {
              external=" (external)";
              counter=externalEvents;
              paths.add(event.getPath());
            }
          }
          System.out.println(event.getPath() + external);
          counter.incrementAndGet();
        }
        while (!paths.isEmpty()) {
          Iterator<String> it=externallyAdded.iterator();
          String p=it.next();
          assertTrue("missing event for " + p,paths.remove(p));
          it.remove();
        }
      }
 catch (      Throwable e) {
        exceptions.add(e);
      }
    }
  }
;
  obsMgr.addEventListener(listener,Event.NODE_ADDED,"/",true,null,null,false);
  Future f1=executor.submit(new Worker(s1,exceptions,new HashSet<String>()));
  Future f2=executor.submit(new Worker(s2,exceptions,externallyAdded));
  f1.get();
  f2.get();
  Thread.sleep(10 * 1000);
  System.out.println("local events: " + localEvents.get());
  System.out.println("external events: " + externalEvents.get());
  for (  Throwable t : exceptions) {
    throw t;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.observation.ObservationRefreshTest </h4><pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void observation() throws RepositoryException, InterruptedException, ExecutionException {
  final MyListener listener=new MyListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getAdminSession().getNode(TEST_PATH);
    for (int i=0; i < 1000; i++) {
      n.addNode("n" + i);
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numAdded == 1000;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("added nodes",1000,listener.numAdded);
    for (int i=0; i < 1000; i++) {
      n.getNode("n" + i).remove();
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numRemoved == 1000;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("removed nodes",1000,listener.numRemoved);
    for (int i=0; i < 100; i++) {
      n.setProperty("test" + i,"foo");
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsAdded == 1100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties added",1100,listener.numPropsAdded);
    for (int i=0; i < 100; i++) {
      n.setProperty("test" + i,i);
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsModified == 100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties modified",100,listener.numPropsModified);
    for (int i=0; i < 10; i++) {
      n.setProperty("test100","foo");
      n.getSession().save();
      assertTrue("Gave up waiting for events",listener.waitFor(CONDITION_TIMEOUT,new Condition(){
        @Override public boolean evaluate(){
          return listener.test100Exists;
        }
      }
));
      n.getProperty("test100").remove();
      n.getSession().save();
      assertTrue("Gave up waiting for events",listener.waitFor(CONDITION_TIMEOUT,new Condition(){
        @Override public boolean evaluate(){
          return !listener.test100Exists;
        }
      }
));
    }
    assertEquals("",listener.error);
    for (int i=0; i < 100; i++) {
      n.getProperty("test" + i).remove();
      n.getSession().save();
    }
    listener.waitFor(CONDITION_TIMEOUT,new Condition(){
      @Override public boolean evaluate(){
        return listener.numPropsRemoved == 1100;
      }
    }
);
    assertEquals("",listener.error);
    assertEquals("properties removed",1100,listener.numPropsRemoved);
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.observation.ObservationTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeSubtree() throws RepositoryException, ExecutionException, InterruptedException {
  Node n=getNode(TEST_PATH);
  n.addNode("a").addNode("b").addNode("c");
  getAdminSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  listener.expectRemove(n.getNode("a")).remove();
  getAdminSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void moveSubtree() throws RepositoryException, ExecutionException, InterruptedException {
  Node n=getNode(TEST_PATH);
  n.addNode("a").addNode("b").addNode("c");
  getAdminSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  getAdminSession().move(TEST_PATH + "/a",TEST_PATH + "/t");
  listener.expect(TEST_PATH + "/t",NODE_MOVED);
  listener.expect(TEST_PATH + "/a",NODE_REMOVED);
  listener.expect(TEST_PATH + "/a/jcr:primaryType",PROPERTY_REMOVED);
  listener.expect(TEST_PATH + "/t",NODE_ADDED);
  getAdminSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void disjunctPaths() throws ExecutionException, InterruptedException, RepositoryException {
  assumeTrue(observationManager instanceof JackrabbitObservationManager);
  JackrabbitObservationManager oManager=(JackrabbitObservationManager)observationManager;
  ExpectationListener listener=new ExpectationListener();
  JackrabbitEventFilter filter=new JackrabbitEventFilter().setAdditionalPaths(TEST_PATH + "/a",TEST_PATH + "/x").setEventTypes(NODE_ADDED);
  oManager.addEventListener(listener,filter);
  Node testNode=getNode(TEST_PATH);
  Node b=testNode.addNode("a").addNode("b");
  b.addNode("c");
  Node y=testNode.addNode("x").addNode("y");
  y.addNode("z");
  listener.expect(b.getPath(),NODE_ADDED);
  listener.expect(y.getPath(),NODE_ADDED);
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void observation() throws RepositoryException, ExecutionException, InterruptedException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getNode(TEST_PATH);
    listener.expectAdd(n.setProperty("p0","v0"));
    Node n1=listener.expectAdd(n.addNode("n1"));
    listener.expectAdd(n1.setProperty("p1","v1"));
    listener.expectAdd(n1.setProperty("p2","v2"));
    listener.expectAdd(n.addNode("n2"));
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    listener.expectAdd(n.setProperty("property",42));
    Node n3=listener.expectAdd(n.addNode("n3"));
    listener.expectAdd(n3.setProperty("p3","v3"));
    listener.expectChange(n1.setProperty("p1","v1.1"));
    listener.expectRemove(n1.getProperty("p2")).remove();
    listener.expectRemove(n.getNode("n2")).remove();
    listener.expectAdd(n.addNode("{4}"));
    getAdminSession().save();
    missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void typeFilter() throws RepositoryException, InterruptedException, ExecutionException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,new String[]{TEST_TYPE},false);
  try {
    Node n=getNode(TEST_PATH);
    Property p=n.setProperty("p","v");
    listener.expectAdd(p);
    Node n1=n.addNode("n1");
    listener.expect(n1.getPath(),NODE_ADDED);
    n1.addNode("n2");
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    listener.expectChange(p).setValue("v2");
    getAdminSession().save();
    missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    listener.expectRemove(p).remove();
    getAdminSession().save();
    missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void pathFilterWithTrailingSlash() throws Exception {
  final String path="/events/only/here";
  ExpectationListener listener=new ExpectationListener();
  listener.expect(new Expectation(path){
    @Override public boolean onEvent(    Event event) throws Exception {
      return PathUtils.isAncestor(path,event.getPath());
    }
  }
);
  observationManager.addEventListener(listener,NODE_ADDED,path + '/',true,null,null,false);
  try {
    Node root=getNode("/");
    root.addNode("events").addNode("only").addNode("here").addNode("at");
    root.getSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addSubtreeFilter() throws RepositoryException, ExecutionException, InterruptedException {
  assumeTrue(observationManager instanceof ObservationManagerImpl);
  ObservationManagerImpl oManager=(ObservationManagerImpl)observationManager;
  ExpectationListener listener=new ExpectationListener();
  FilterBuilder builder=new FilterBuilder();
  builder.condition(builder.addSubtree());
  oManager.addEventListener(listener,builder.build());
  Node testNode=getNode(TEST_PATH);
  Node a=listener.expectAdd(testNode.addNode("a"));
  a.addNode("c");
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeSubtreeFilter() throws RepositoryException, ExecutionException, InterruptedException {
  assumeTrue(observationManager instanceof ObservationManagerImpl);
  Node testNode=getNode(TEST_PATH);
  testNode.addNode("a").addNode("c");
  testNode.getSession().save();
  ObservationManagerImpl oManager=(ObservationManagerImpl)observationManager;
  ExpectationListener listener=new ExpectationListener();
  FilterBuilder builder=new FilterBuilder();
  builder.condition(builder.deleteSubtree());
  oManager.addEventListener(listener,builder.build());
  listener.expectRemove(testNode.getNode("a")).remove();
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void uuidFilter() throws RepositoryException, InterruptedException, ExecutionException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,new String[]{test_uuid},null,false);
  try {
    Node nonRefNode=getNode(TEST_PATH);
    Node refNode=nonRefNode.getNode(REFERENCEABLE_NODE);
    nonRefNode.addNode("n");
    listener.expect(refNode.addNode("r").getPath(),NODE_ADDED);
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyValues() throws RepositoryException, ExecutionException, InterruptedException {
  Node n=getNode(TEST_PATH);
  n.setProperty("toChange",new String[]{"one","two"},PropertyType.STRING);
  n.setProperty("toDelete",new String[]{"three","four"},PropertyType.STRING);
  getAdminSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    n.setProperty("added",new String[]{"five","six"},PropertyType.STRING);
    listener.expectValues(null,n.getProperty("added").getValues());
    Value[] before=n.getProperty("toChange").getValues();
    n.getProperty("toChange").setValue(new String[]{"1","2"});
    listener.expectValues(before,n.getProperty("toChange").getValues());
    before=n.getProperty("toDelete").getValues();
    n.getProperty("toDelete").remove();
    listener.expectValues(before,null);
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMove() throws RepositoryException, ExecutionException, InterruptedException {
  Node testNode=getNode(TEST_PATH);
  Session session=testNode.getSession();
  Node nodeA=testNode.addNode("a");
  Node nodeAA=nodeA.addNode("aa");
  Node nodeT=testNode.addNode("t");
  Node nodeS=testNode.addNode("s");
  session.save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,NODE_MOVED,"/",true,null,null,false);
  String src1=nodeA.getPath();
  String dst1=nodeT.getPath() + "/b";
  session.move(src1,dst1);
  listener.expectMove(src1,dst1);
  String src2=nodeT.getPath() + "/b/aa";
  String dst2=nodeS.getPath() + "/bb";
  session.move(src2,dst2);
  listener.expectMove(src1 + "/aa",dst2);
  session.save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noDuplicates() throws ExecutionException, InterruptedException, RepositoryException {
  assumeTrue(observationManager instanceof JackrabbitObservationManager);
  JackrabbitObservationManager oManager=(JackrabbitObservationManager)observationManager;
  ExpectationListener listener=new ExpectationListener();
  JackrabbitEventFilter filter=new JackrabbitEventFilter().setAdditionalPaths(TEST_PATH + "/a",TEST_PATH + "/a").setEventTypes(NODE_ADDED);
  oManager.addEventListener(listener,filter);
  Node testNode=getNode(TEST_PATH);
  Node b=testNode.addNode("a").addNode("b");
  b.addNode("c");
  Node y=testNode.addNode("x").addNode("y");
  y.addNode("z");
  listener.expect(b.getPath(),NODE_ADDED);
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRename() throws RepositoryException, ExecutionException, InterruptedException {
  Node testNode=getNode(TEST_PATH);
  Session session=testNode.getSession();
  Node nodeA=testNode.addNode("a");
  String parentPath=testNode.getPath();
  session.save();
  assumeTrue(nodeA instanceof JackrabbitNode);
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,NODE_MOVED,"/",true,null,null,false);
  ((JackrabbitNode)nodeA).rename("b");
  listener.expectMove(parentPath + "/a",parentPath + "/b");
  session.save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void parentPathExclude() throws ExecutionException, InterruptedException, RepositoryException {
  assumeTrue(observationManager instanceof JackrabbitObservationManager);
  Node n=getNode(TEST_PATH).addNode("n");
  getAdminSession().save();
  JackrabbitObservationManager oManager=(JackrabbitObservationManager)observationManager;
  ExpectationListener listener=new ExpectationListener();
  JackrabbitEventFilter filter=new JackrabbitEventFilter().setAbsPath(n.getPath()).setIsDeep(true).setExcludedPaths(n.getParent().getPath()).setEventTypes(ALL_EVENTS);
  oManager.addEventListener(listener,filter);
  n.addNode("n1");
  getAdminSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void identifier() throws RepositoryException, InterruptedException, ExecutionException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,NODE_ADDED,TEST_PATH,true,null,null,false);
  try {
    Node n=getNode(TEST_PATH);
    listener.expect(new Expectation("Has correct id"){
      @Override public boolean onEvent(      Event event) throws Exception {
        return (TEST_PATH + "/newNode").equals(event.getIdentifier());
      }
    }
);
    n.addNode("newNode");
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void filterPropertyOfChild() throws RepositoryException, ExecutionException, InterruptedException {
  assumeTrue(observationManager instanceof ObservationManagerImpl);
  ObservationManagerImpl oManager=(ObservationManagerImpl)observationManager;
  ExpectationListener listener=new ExpectationListener();
  FilterBuilder builder=new FilterBuilder();
  builder.condition(builder.property(Selectors.fromThis("b/c"),"foo",new Predicate<PropertyState>(){
    @Override public boolean apply(    PropertyState property){
      return "bar".equals(property.getValue(STRING));
    }
  }
));
  oManager.addEventListener(listener,builder.build());
  Node testNode=getNode(TEST_PATH);
  Node a=testNode.addNode("a");
  a.addNode("b").addNode("c").setProperty("foo","bar");
  a.addNode("d");
  Node x=testNode.addNode("x");
  x.addNode("b").addNode("c").setProperty("foo","baz");
  x.addNode("d");
  listener.expect(a.getPath(),NODE_ADDED);
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addSubtree() throws RepositoryException, ExecutionException, InterruptedException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  Node n=getNode(TEST_PATH);
  Node a=listener.expectAdd(n.addNode("a"));
  Node b=listener.expectAdd(a.addNode("b"));
  listener.expectAdd(b.addNode("c"));
  getAdminSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void infoMap() throws RepositoryException, ExecutionException, InterruptedException {
  Node n=getNode(TEST_PATH);
  Node n3=n.addNode("n3");
  n3.setProperty("p1","q1");
  n3.setProperty("p2","q2");
  getAdminSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    n.addNode("n1","oak:Unstructured");
    n.addNode("n2");
    n.getNode("n2").addMixin(TEST_TYPE);
    n3.setProperty("p1","changed");
    n3.setProperty("p2",(String)null);
    listener.expect(new Expectation("infoMap for n1"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == NODE_ADDED && event.getPath().endsWith("n1")) {
          Map<?,?> info=event.getInfo();
          return info != null && "oak:Unstructured".equals(info.get(JCR_PRIMARYTYPE));
        }
 else {
          return false;
        }
      }
    }
);
    listener.expect(new Expectation("infoMap for n1/jcr:primaryType"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == PROPERTY_ADDED && event.getPath().endsWith("n1/jcr:primaryType")) {
          Map<?,?> info=event.getInfo();
          return info != null && "oak:Unstructured".equals(info.get(JCR_PRIMARYTYPE));
        }
 else {
          return false;
        }
      }
    }
);
    listener.expect(new Expectation("infoMap for n2"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == NODE_ADDED && event.getPath().endsWith("n2")) {
          Map<?,?> info=event.getInfo();
          if (info == null) {
            return false;
          }
          Object mixinTypes=info.get(JCR_MIXINTYPES);
          if (!(mixinTypes instanceof String[])) {
            return false;
          }
          Object primaryType=info.get(JCR_PRIMARYTYPE);
          String[] mixins=(String[])mixinTypes;
          return NT_UNSTRUCTURED.equals(primaryType) && mixins.length == 1 && TEST_TYPE.equals(mixins[0]);
        }
 else {
          return false;
        }
      }
    }
);
    listener.expect(new Expectation("n2/jcr:primaryType"){
      @Override public boolean onEvent(      Event event) throws Exception {
        return event.getType() == PROPERTY_ADDED && event.getPath().endsWith("n2/jcr:primaryType");
      }
    }
);
    listener.expect(new Expectation("n2/jcr:mixinTypes"){
      @Override public boolean onEvent(      Event event) throws Exception {
        return event.getType() == PROPERTY_ADDED && event.getPath().endsWith("n2/jcr:mixinTypes");
      }
    }
);
    listener.expect(new Expectation("infoMap for n3/p1"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == PROPERTY_CHANGED && event.getPath().endsWith("n3/p1")) {
          Map<?,?> info=event.getInfo();
          return info != null && NT_UNSTRUCTURED.equals(info.get(JCR_PRIMARYTYPE));
        }
 else {
          return false;
        }
      }
    }
);
    listener.expect(new Expectation("infoMap for n3/p2"){
      @Override public boolean onEvent(      Event event) throws Exception {
        if (event.getType() == PROPERTY_REMOVED && event.getPath().endsWith("n3/p2")) {
          Map<?,?> info=event.getInfo();
          return info != null && NT_UNSTRUCTURED.equals(info.get(JCR_PRIMARYTYPE));
        }
 else {
          return false;
        }
      }
    }
);
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void filterPropertyOfParent() throws RepositoryException, ExecutionException, InterruptedException {
  assumeTrue(observationManager instanceof ObservationManagerImpl);
  ObservationManagerImpl oManager=(ObservationManagerImpl)observationManager;
  ExpectationListener listener=new ExpectationListener();
  FilterBuilder builder=new FilterBuilder();
  builder.condition(builder.property(Selectors.PARENT,"foo",new Predicate<PropertyState>(){
    @Override public boolean apply(    PropertyState property){
      return "bar".equals(property.getValue(STRING));
    }
  }
));
  oManager.addEventListener(listener,builder.build());
  Node testNode=getNode(TEST_PATH);
  Node a=testNode.addNode("a");
  Node x=testNode.addNode("x");
  a.setProperty("foo","bar");
  x.setProperty("foo","baz");
  a.addNode("b");
  x.addNode("y");
  listener.expect(a.getPath() + "/jcr:primaryType",PROPERTY_ADDED);
  listener.expect(a.getPath() + "/foo",PROPERTY_ADDED);
  listener.expect(a.getPath() + "/b",NODE_ADDED);
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void pathFilter() throws Exception {
  final String path="/events/only/here";
  for (  boolean deep : new boolean[]{false,true}) {
    Node root=getNode("/");
    if (root.hasNode("events")) {
      root.getNode("events").remove();
      root.getSession().save();
    }
    ExpectationListener listener=new ExpectationListener();
    observationManager.addEventListener(listener,NODE_ADDED,path,deep,null,null,false);
    try {
      root.addNode("events").addNode("only").addNode("here").addNode("below").addNode("this");
      listener.expect("/events/only/here/below",NODE_ADDED);
      if (deep) {
        listener.expect("/events/only/here/below/this",NODE_ADDED);
      }
      root.getSession().save();
      List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
      assertTrue("Missing events: " + missing,missing.isEmpty());
      List<Event> unexpected=listener.getUnexpected();
      assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    }
  finally {
      observationManager.removeEventListener(listener);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReorder() throws RepositoryException, InterruptedException, ExecutionException {
  Node testNode=getNode(TEST_PATH);
  Node nodeA=testNode.addNode("a","nt:unstructured");
  Node nodeB=testNode.addNode("b","nt:unstructured");
  testNode.getSession().save();
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,NODE_MOVED,"/",true,null,null,false);
  listener.expect(new Expectation("orderBefore"){
    @Override public boolean onEvent(    Event event) throws Exception {
      if (event.getType() != NODE_MOVED || event.getInfo() == null) {
        return false;
      }
      Map<?,?> info=event.getInfo();
      if (PathUtils.concat(TEST_PATH,"a").equals(event.getPath())) {
        return "a".equals(info.get("srcChildRelPath")) && "b".equals(info.get("destChildRelPath"));
      }
 else       if (PathUtils.concat(TEST_PATH,"b").equals(event.getPath())) {
        return "b".equals(info.get("srcChildRelPath")) && "a".equals(info.get("destChildRelPath"));
      }
 else {
        return false;
      }
    }
  }
);
  testNode.orderBefore(nodeA.getName(),null);
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void pathExclude() throws ExecutionException, InterruptedException, RepositoryException {
  assumeTrue(observationManager instanceof JackrabbitObservationManager);
  JackrabbitObservationManager oManager=(JackrabbitObservationManager)observationManager;
  ExpectationListener listener=new ExpectationListener();
  JackrabbitEventFilter filter=new JackrabbitEventFilter().setAbsPath(TEST_PATH).setIsDeep(true).setExcludedPaths(TEST_PATH + "/c",TEST_PATH + "/d","/x/y").setEventTypes(ALL_EVENTS);
  oManager.addEventListener(listener,filter);
  Node n=getNode(TEST_PATH);
  listener.expectAdd(listener.expectAdd(listener.expectAdd(n.addNode("a")).addNode("a1")).setProperty("p","q"));
  listener.expectAdd(listener.expectAdd(n.addNode("b")).setProperty("p","q"));
  n.addNode("c").addNode("c1").setProperty("p","q");
  n.addNode("d").setProperty("p","q");
  getAdminSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void observation2() throws RepositoryException, InterruptedException, ExecutionException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getNode(TEST_PATH);
    listener.expectAdd(n.addNode("n1"));
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
    listener.expectAdd(n.addNode("n2"));
    listener.expectRemove(n.getNode("n1")).remove();
    getAdminSession().save();
    missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void observationDispose() throws RepositoryException, InterruptedException, ExecutionException, TimeoutException {
  final ExpectationListener listener=new ExpectationListener();
  Expectation hasEvents=listener.expect(new Expectation("has events after registering"));
  final Expectation noEvents=listener.expect(new Expectation("has no more events after unregistering",false));
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  final Session s=getAdminSession();
  ScheduledExecutorService service=newSingleThreadScheduledExecutor();
  service.scheduleWithFixedDelay(new Runnable(){
    private int c;
    @Override public void run(){
      try {
        s.getNode(TEST_PATH).addNode("c" + c++).getSession().save();
      }
 catch (      RepositoryException e) {
        throw new RuntimeException(e);
      }
    }
  }
,10,10,TimeUnit.MILLISECONDS);
  assertNotNull(hasEvents.get(TIME_OUT,TimeUnit.SECONDS));
  Executors.newSingleThreadExecutor().submit(new Callable<Void>(){
    @Override public Void call() throws Exception {
      observationManager.removeEventListener(listener);
      noEvents.enable(true);
      return null;
    }
  }
).get(10,TimeUnit.SECONDS);
  assertFalse(noEvents.wait(4,TimeUnit.SECONDS));
  service.shutdown();
  service.awaitTermination(10,TimeUnit.SECONDS);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void observationOnRootNode() throws Exception {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,PROPERTY_ADDED,"/",true,null,null,false);
  try {
    Node root=getNode("/");
    listener.expectAdd(root.setProperty("prop","value"));
    root.getSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyValue() throws RepositoryException, ExecutionException, InterruptedException {
  ExpectationListener listener=new ExpectationListener();
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  try {
    Node n=getNode(TEST_PATH);
    n.setProperty("added",42);
    listener.expectValue(null,n.getProperty("added").getValue());
    Value before=n.getProperty("test_property1").getValue();
    n.getProperty("test_property1").setValue(43);
    listener.expectValue(before,n.getProperty("test_property1").getValue());
    before=n.getProperty("test_property2").getValue();
    n.getProperty("test_property2").remove();
    listener.expectValue(before,null);
    getAdminSession().save();
    List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
    assertTrue("Missing events: " + missing,missing.isEmpty());
    List<Event> unexpected=listener.getUnexpected();
    assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
  }
  finally {
    observationManager.removeEventListener(listener);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void filterDisjunctPaths() throws ExecutionException, InterruptedException, RepositoryException {
  assumeTrue(observationManager instanceof JackrabbitObservationManager);
  ObservationManagerImpl oManager=(ObservationManagerImpl)observationManager;
  ExpectationListener listener=new ExpectationListener();
  FilterBuilder builder=new FilterBuilder();
  builder.condition(builder.any(builder.path(TEST_PATH + "/a/b"),builder.path(TEST_PATH + "/x/y")));
  oManager.addEventListener(listener,builder.build());
  Node testNode=getNode(TEST_PATH);
  Node b=testNode.addNode("a").addNode("b");
  b.addNode("c");
  Node y=testNode.addNode("x").addNode("y");
  y.addNode("z");
  listener.expect(b.getPath(),NODE_ADDED);
  listener.expect(y.getPath(),NODE_ADDED);
  testNode.getSession().save();
  List<Expectation> missing=listener.getMissing(TIME_OUT,TimeUnit.SECONDS);
  assertTrue("Missing events: " + missing,missing.isEmpty());
  List<Event> unexpected=listener.getUnexpected();
  assertTrue("Unexpected events: " + unexpected,unexpected.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void observationDisposeFromListener() throws RepositoryException, InterruptedException, ExecutionException, TimeoutException {
  final ExpectationListener listener=new ExpectationListener();
  Expectation unregistered=listener.expect(new Expectation("Unregistering listener from event handler should not block"){
    @Override public boolean onEvent(    Event event) throws Exception {
      observationManager.removeEventListener(listener);
      return true;
    }
  }
);
  observationManager.addEventListener(listener,ALL_EVENTS,"/",true,null,null,false);
  assertTrue(observationManager.getRegisteredEventListeners().hasNext());
  Node n=getNode(TEST_PATH);
  n.addNode("c");
  n.getSession().save();
  assertNotNull(unregistered.get(TIME_OUT,TimeUnit.SECONDS));
  assertFalse(observationManager.getRegisteredEventListeners().hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.osgi.RepositoryManagerTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void executorSetup() throws Exception {
  context.registerService(SecurityProvider.class,new OpenSecurityProvider());
  context.registerService(NodeStore.class,new MemoryNodeStore());
  context.registerInjectActivateService(new RepositoryManager());
  Executor executor=context.getService(Executor.class);
  assertNotNull("Repository initialization should have registered an Executor",executor);
  final AtomicBoolean invoked=new AtomicBoolean();
  final CountDownLatch latch=new CountDownLatch(1);
  executor.execute(new Runnable(){
    @Override public void run(){
      invoked.set(true);
      latch.countDown();
    }
  }
);
  latch.await(5,TimeUnit.SECONDS);
  assertTrue(invoked.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.PrefetchIteratorTest </h4><pre class="type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test(){
  for (  int size : seq(0,100)) {
    for (    int readBefore : seq(0,30)) {
      final long testTimeout=size % 3 == 0 ? 100 : 0;
      Iterable<Integer> s=seq(0,size);
      PrefetchIterator<Integer> it=new PrefetchIterator<Integer>(s.iterator(),new PrefetchOptions(){
{
          min=20;
          timeout=testTimeout;
          max=30;
          size=-1;
        }
      }
);
      for (      int x : seq(0,readBefore)) {
        boolean hasNext=it.hasNext();
        if (!hasNext) {
          assertEquals(x,size);
          break;
        }
        String m="s:" + size + " b:"+ readBefore+ " x:"+ x;
        assertTrue(m,hasNext);
        assertEquals(m,x,it.next().intValue());
      }
      String m="s:" + size + " b:"+ readBefore;
      int max=testTimeout <= 0 ? 20 : 30;
      if (size > max && readBefore <= size) {
        assertEquals(m,-1,it.size());
        assertEquals(m,-1,it.size());
      }
 else {
        assertEquals(m,size,it.size());
        assertEquals(m,size,it.size());
      }
      for (      int x : seq(readBefore,size)) {
        m="s:" + size + " b:"+ readBefore+ " x:"+ x;
        assertTrue(m,it.hasNext());
        assertEquals(m,x,it.next().intValue());
      }
      assertFalse(it.hasNext());
      try {
        it.next();
        fail();
      }
 catch (      NoSuchElementException e) {
      }
      try {
        it.remove();
        fail();
      }
 catch (      UnsupportedOperationException e) {
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryFulltextTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void excerpt() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n1=testRootNode.addNode("node1");
  n1.setProperty("text","hello world");
  n1.setProperty("desc","description");
  Node n2=testRootNode.addNode("node2");
  n2.setProperty("text","Hello World");
  n2.setProperty("desc","Description");
  session.save();
  Query q;
  RowIterator it;
  Row row;
  String s;
  String xpath="//*[jcr:contains(., 'hello')]/rep:excerpt(.) order by @jcr:path";
  q=qm.createQuery(xpath,"xpath");
  it=q.execute().getRows();
  row=it.nextRow();
  String path=row.getPath();
  s=row.getValue("rep:excerpt(.)").getString();
  assertTrue(path + ":" + s+ " (1)",s.indexOf("<strong>hello</strong> world") >= 0);
  assertTrue(path + ":" + s+ " (2)",s.indexOf("description") >= 0);
  row=it.nextRow();
  path=row.getPath();
  s=row.getValue("rep:excerpt(.)").getString();
  assertTrue(path + ":" + s+ " (3)",s.indexOf("Hello World") >= 0);
  assertTrue(path + ":" + s+ " (4)",s.indexOf("Description") >= 0);
  xpath="//*[jcr:contains(., 'hello')]/rep:excerpt(.) order by @jcr:path";
  q=qm.createQuery(xpath,"xpath");
  it=q.execute().getRows();
  row=it.nextRow();
  path=row.getPath();
  s=row.getValue("rep:excerpt(text)").getString();
  assertTrue(path + ":" + s+ " (5)",s.indexOf("<strong>hello</strong> world") >= 0);
  assertTrue(path + ":" + s+ " (6)",s.indexOf("description") < 0);
  row=it.nextRow();
  path=row.getPath();
  s=row.getValue("rep:excerpt(text)").getString();
  assertTrue(path + ":" + s+ " (7)",s.indexOf("Hello World") >= 0);
  assertTrue(path + ":" + s+ " (8)",s.indexOf("Description") < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryPlanTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void uuidIndex() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n=testRootNode.addNode("node");
  n.addMixin("mix:referenceable");
  session.save();
  String xpath="/jcr:root/testroot/node[@jcr:uuid]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* traverse \"/testroot/node\" where " + "([a].[jcr:uuid] is not null) " + "and (issamenode([a], [/testroot/node])) */",plan);
  q=qm.createQuery(xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getPath();
  assertEquals("/testroot/node",path);
  assertFalse(it.hasNext());
  xpath="/jcr:root/testroot/*[@jcr:uuid]";
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property uuid IS NOT NULL " + "where ([a].[jcr:uuid] is not null) " + "and (ischildnode([a], [/testroot])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-1372") public void pathAndPropertyRestrictions() throws Exception {
  ;
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node b=testRootNode.addNode("b");
  Node c=b.addNode("c");
  Node d=c.addNode("d");
  Node e1=d.addNode("e1");
  e1.setProperty("type","1");
  Node e2=d.addNode("e2");
  e2.setProperty("type","2");
  Node e3=d.addNode("e3");
  e3.setProperty("type","3");
  session.save();
  String xpath="/jcr:root/testroot//b/c/d/*[@jcr:uuid='1' or @jcr:uuid='2'] ";
  String sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as a inner join [nt:base] as b on ischildnode(b, a) " + "inner join [nt:base] as c on ischildnode(c, b) "+ "inner join [nt:base] as d on ischildnode(d, c) "+ "where name(a) = 'b' "+ "and isdescendantnode(a, '/testroot') "+ "and name(b) = 'c' "+ "and name(c) = 'd' "+ "and (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as d " + "where (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  sql2="select d.[jcr:path] as [jcr:path], d.[jcr:score] as [jcr:score], d.* " + "from [nt:base] as d " + "inner join [nt:base] as c on ischildnode(d, c) "+ "inner join [nt:base] as b on ischildnode(c, b) "+ "inner join [nt:base] as a on ischildnode(b, a) "+ "where name(a) = 'b' "+ "and isdescendantnode(a, '/testroot') "+ "and name(b) = 'c' "+ "and name(c) = 'd' "+ "and (d.[jcr:uuid] = '1' or d.[jcr:uuid] = '2')";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("",plan);
  q=qm.createQuery(xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/b/c/d/e1",path);
  path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/b/c/d/e2",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyEqualsVersusPropertyNotNull() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  createPropertyIndex(session,"notNull");
  createPropertyIndex(session,"equals");
  for (int i=0; i < 100; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    if (i % 2 == 0) {
      n.setProperty("notNull",i);
    }
    n.setProperty("equals",1);
  }
  session.save();
  String xpath="/jcr:root//*[@notNull and @equals=1]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property notNull IS NOT NULL " + "where ([a].[notNull] is not null) " + "and ([a].[equals] = 1) "+ "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void correctPropertyIndexUsage() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  createPropertyIndex(session,"fiftyPercent");
  createPropertyIndex(session,"tenPercent");
  createPropertyIndex(session,"hundredPercent");
  for (int i=0; i < 300; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    if (i % 10 == 0) {
      n.setProperty("tenPercent",i);
    }
    if (i % 2 == 0) {
      n.setProperty("fiftyPercent",i);
    }
    n.setProperty("hundredPercent",i);
  }
  session.save();
  String xpath="/jcr:root//*[@tenPercent and @fiftyPercent and @hundredPercent]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property tenPercent IS NOT NULL " + "where ([a].[tenPercent] is not null) " + "and ([a].[fiftyPercent] is not null) "+ "and ([a].[hundredPercent] is not null) "+ "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeType() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node nodetype=session.getRootNode().getNode("oak:index").getNode("nodetype");
  nodetype.setProperty("entryCount",100000);
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n1=testRootNode.addNode("node1");
  Node n2=n1.addNode("node2");
  n2.addNode("node3");
  session.save();
  String sql2="select [jcr:path] as [path] from [nt:base] " + "where [node2/node3/jcr:primaryType] is not null " + "and isdescendantnode('/testroot')";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [nt:base] /* traverse \"/testroot//*\" " + "where ([nt:base].[node2/node3/jcr:primaryType] is not null) " + "and (isdescendantnode([nt:base], [/testroot])) "+ "*/",plan);
  q=qm.createQuery(sql2,Query.JCR_SQL2);
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String path=it.nextRow().getValue("path").getString();
  assertEquals("/testroot/node1",path);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void traversalVersusPropertyIndex() throws Exception {
  Session session=getAdminSession();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Node testRootNode=session.getRootNode().addNode("testroot");
  Node n=testRootNode;
  for (int i=0; i < 20; i++) {
    n.setProperty("depth",i + 2);
    n=n.addNode("n","oak:Unstructured");
    n.addMixin("mix:referenceable");
  }
  session.save();
  String xpath="/jcr:root/testroot/n/n/n/n/n/n/n//*[jcr:uuid]";
  Query q;
  QueryResult result;
  RowIterator it;
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[nt:base] as [a] /* property uuid IS NOT NULL " + "where ([a].[jcr:uuid] is not null) and " + "(isdescendantnode([a], [/testroot/n/n/n/n/n/n/n])) */",plan);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyIndexVersusNodeTypeIndex() throws Exception {
  Session session=getAdminSession();
  Node nt=session.getRootNode().getNode("oak:index").getNode("nodetype");
  nt.setProperty("entryCount",200);
  Node uuid=session.getRootNode().getNode("oak:index").getNode("uuid");
  uuid.setProperty("entryCount",100);
  QueryManager qm=session.getWorkspace().getQueryManager();
  if (session.getRootNode().hasNode("testroot")) {
    session.getRootNode().getNode("testroot").remove();
    session.save();
  }
  Node testRootNode=session.getRootNode().addNode("testroot");
  for (int i=0; i < 100; i++) {
    Node n=testRootNode.addNode("n" + i,"oak:Unstructured");
    n.addMixin("mix:referenceable");
  }
  session.save();
  Query q;
  QueryResult result;
  RowIterator it;
  String xpath="/jcr:root//element(*, oak:Unstructured)";
  q=qm.createQuery("explain " + xpath,"xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  String plan=it.nextRow().getValue("plan").getString();
  assertEquals("[oak:Unstructured] as [a] " + "/* nodeType Filter(query=explain select [jcr:path], [jcr:score], * " + "from [oak:Unstructured] as a "+ "where isdescendantnode(a, '/') "+ "/* xpath: /jcr:root//element(*, oak:Unstructured) */"+ ", path=//*) where isdescendantnode([a], [/]) */",plan);
  String xpath2="/jcr:root//element(*, oak:Unstructured)[@jcr:uuid]";
  q=qm.createQuery("explain " + xpath2 + "","xpath");
  result=q.execute();
  it=result.getRows();
  assertTrue(it.hasNext());
  plan=it.nextRow().getValue("plan").getString();
  assertEquals("[oak:Unstructured] as [a] " + "/* property uuid IS NOT NULL where ([a].[jcr:uuid] is not null) " + "and (isdescendantnode([a], [/])) */",plan);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.query.QueryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOak1354() throws Exception {
  Session session=createAdminSession();
  NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
  if (!manager.hasNodeType("mymixinOak1354")) {
    StringBuilder defs=new StringBuilder();
    defs.append("[mymixinOak1354]\n");
    defs.append("  mixin");
    Reader cndReader=new InputStreamReader(new ByteArrayInputStream(defs.toString().getBytes()));
    CndImporter.registerNodeTypes(cndReader,session);
  }
  Node p=session.getRootNode().addNode("one");
  p.addMixin("mymixinOak1354");
  session.save();
  Query q=session.getWorkspace().getQueryManager().createQuery("SELECT * FROM [mymixinOak1354]",Query.JCR_SQL2);
  QueryResult qr=q.execute();
  NodeIterator ni=qr.getNodes();
  assertTrue(ni.hasNext());
  Node n=ni.nextNode();
  assertEquals("/one",n.getPath());
  assertFalse(ni.hasNext());
  session.logout();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void unicode() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  String[][] list={{"three","\u00e4\u00f6\u00fc"},{"two","123456789"},{"one","\u3360\u3361\u3362\u3363\u3364\u3365\u3366\u3367\u3368\u3369"}};
  for (  String[] pair : list) {
    content.addNode(pair[0]).setProperty("prop","propValue testSearch " + pair[1] + " data");
  }
  session.save();
  for (  String[] pair : list) {
    String query="//*[jcr:contains(., '" + pair[1] + "')]";
    QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
    NodeIterator it=r.getNodes();
    assertTrue(it.hasNext());
    String path=it.nextNode().getPath();
    assertEquals("/test/" + pair[0],path);
    assertFalse(it.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void skip() throws RepositoryException {
  Session session=getAdminSession();
  Node hello1=session.getRootNode().addNode("hello1");
  hello1.setProperty("id","1");
  hello1.setProperty("data","x");
  session.save();
  Node hello3=hello1.addNode("hello3");
  hello3.setProperty("id","3");
  hello3.setProperty("data","z");
  session.save();
  Node hello2=hello3.addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("data","y");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select id from [nt:base] where data >= $data order by id",Query.JCR_SQL2);
  q.bindValue("data",vf.createValue("x"));
  for (int i=-1; i < 5; i++) {
    QueryResult r=q.execute();
    RowIterator it=r.getRows();
    assertEquals(3,r.getRows().getSize());
    assertEquals(3,r.getNodes().getSize());
    Row row;
    try {
      it.skip(i);
      assertTrue(i >= 0 && i <= 3);
    }
 catch (    IllegalArgumentException e) {
      assertEquals(-1,i);
    }
catch (    NoSuchElementException e) {
      assertTrue(i >= 2);
    }
    if (i <= 0) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("1",row.getValue("id").getString());
    }
    if (i <= 1) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("2",row.getValue("id").getString());
    }
    if (i <= 2) {
      assertTrue(it.hasNext());
      row=it.nextRow();
      assertEquals("3",row.getValue("id").getString());
    }
    assertFalse(it.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noDeclaringNodeTypesIndex() throws Exception {
  Session session=getAdminSession();
  Node root=session.getRootNode();
  Node nodeTypeIndex=root.getNode("oak:index").getNode("nodetype");
  nodeTypeIndex.setProperty("declaringNodeTypes",new String[]{},PropertyType.NAME);
  session.save();
  Node test=root.addNode("test");
  test.addNode("testNode","oak:Unstructured");
  session.save();
  String query="/jcr:root/test//*[@jcr:primaryType='oak:Unstructured']";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  assertEquals("/test/testNode",it.nextNode().getPath());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void relativeNotExistsProperty() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  content.addNode("one").addNode("child").setProperty("prop","hello");
  content.addNode("two").addNode("child");
  session.save();
  String query="//*[not(child/@prop)]";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  String path=it.nextNode().getPath();
  assertEquals("/test/two",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noLiterals() throws RepositoryException {
  Session session=getAdminSession();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  try {
    Query q=qm.createQuery("select text from [nt:base] where password = 'x'",Query.JCR_SQL2 + "-noLiterals");
    q.execute();
    fail();
  }
 catch (  InvalidQueryException e) {
    assertTrue(e.toString(),e.toString().indexOf("literals of this type not allowed") > 0);
  }
  Query q=qm.createQuery("select text from [nt:base] where password = $p",Query.JCR_SQL2 + "-noLiterals");
  q.bindValue("p",vf.createValue("x"));
  q.execute();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nodeType() throws Exception {
  Session session=createAdminSession();
  String xpath="/jcr:root//element(*,rep:User)[xyz/@jcr:primaryType]";
  assertTrue(getPlan(session,xpath).startsWith("[rep:User] as [a] /* nodeType"));
  session.getNode("/oak:index/nodetype").setProperty("declaringNodeTypes",new String[]{"oak:Unstructured"},PropertyType.NAME);
  session.save();
  assertTrue(getPlan(session,xpath).startsWith("[rep:User] as [a] /* traverse "));
  xpath="/jcr:root//element(*,oak:Unstructured)[xyz/@jcr:primaryType]";
  assertTrue(getPlan(session,xpath).startsWith("[oak:Unstructured] as [a] /* nodeType "));
  session.logout();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOak1171() throws RepositoryException {
  Session session=createAdminSession();
  Node p=session.getRootNode().addNode("etc");
  p.addNode("p1").setProperty("title","test");
  p.addNode("p2").setProperty("title",1);
  session.save();
  Query q=session.getWorkspace().getQueryManager().createQuery("//*[@title = 'test']","xpath");
  QueryResult qr=q.execute();
  NodeIterator ni=qr.getNodes();
  assertTrue(ni.hasNext());
  Node n=ni.nextNode();
  assertEquals("/etc/p1",n.getPath());
  assertFalse(ni.hasNext());
  session.logout();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-1215") public void anyChildNodeProperty() throws Exception {
  Session session=getAdminSession();
  Node content=session.getRootNode().addNode("test");
  content.addNode("one").addNode("child").setProperty("prop","hello");
  content.addNode("two").addNode("child").setProperty("prop","hi");
  session.save();
  String query="//*[*/@prop = 'hello']";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertTrue(it.hasNext());
  String path=it.nextNode().getPath();
  assertEquals("/test/one",path);
  assertFalse(it.hasNext());
  query="//*[*/*/@prop = 'hello']";
  r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  it=r.getNodes();
  assertTrue(it.hasNext());
  path=it.nextNode().getPath();
  assertEquals("/test",path);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void simple() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("id","1");
  hello.setProperty("text","hello_world");
  session.save();
  Node hello2=session.getRootNode().addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("text","hello world");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select text from [nt:base] where id = $id",Query.JCR_SQL2);
  q.bindValue("id",vf.createValue("1"));
  QueryResult r=q.execute();
  RowIterator it=r.getRows();
  assertTrue(it.hasNext());
  Row row=it.nextRow();
  assertEquals("hello_world",row.getValue("text").getString());
  String[] columns=r.getColumnNames();
  assertEquals(1,columns.length);
  assertEquals("text",columns[0]);
  assertFalse(it.hasNext());
  r=q.execute();
  NodeIterator nodeIt=r.getNodes();
  assertTrue(nodeIt.hasNext());
  Node n=nodeIt.nextNode();
  assertEquals("hello_world",n.getProperty("text").getString());
  assertFalse(it.hasNext());
  q=qm.createQuery("select text from [nt:base] where text like 'hello\\_world' escape '\\'",Query.SQL);
  r=q.execute();
  columns=r.getColumnNames();
  assertEquals(3,columns.length);
  assertEquals("text",columns[0]);
  assertEquals("jcr:path",columns[1]);
  assertEquals("jcr:score",columns[2]);
  nodeIt=r.getNodes();
  assertTrue(nodeIt.hasNext());
  n=nodeIt.nextNode();
  assertEquals("hello_world",n.getProperty("text").getString());
  assertFalse(nodeIt.hasNext());
  q=qm.createQuery("//*[@id=1]",Query.XPATH);
  r=q.execute();
  assertEquals(newHashSet("jcr:path","jcr:score","jcr:primaryType"),newHashSet(r.getColumnNames()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-1093
 */
@Test public void getValuesOnMvp() throws RepositoryException {
  Session session=getAdminSession();
  Node hello=session.getRootNode().addNode("hello");
  hello.setProperty("id","1");
  hello.setProperty("properties",new String[]{"p1","p2"});
  session.save();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select properties from [nt:base] where id = 1",Query.JCR_SQL2);
  QueryResult r=q.execute();
  RowIterator it=r.getRows();
  assertTrue(it.hasNext());
  Row row=it.nextRow();
  assertEquals("p1 p2",row.getValues()[0].getString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void approxCount() throws Exception {
  Session session=createAdminSession();
  double c=getCost(session,"//*[@x=1]");
  assertTrue("cost: " + c,c > 0 && c < 100000);
  session.getNode("/oak:index/counter").remove();
  session.save();
  double c2=getCost(session,"//*[@x=1]");
  assertTrue("cost: " + c2,c2 > 1000000);
  session.logout();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void date() throws Exception {
  Session session=getAdminSession();
  Node t1=session.getRootNode().addNode("t1");
  t1.setProperty("x","22.06.07");
  Node t2=session.getRootNode().addNode("t2");
  t2.setProperty("x","2007-06-22T01:02:03.000Z",PropertyType.DATE);
  session.save();
  String query="//*[x='a' or x='b']";
  QueryResult r=session.getWorkspace().getQueryManager().createQuery(query,"xpath").execute();
  NodeIterator it=r.getNodes();
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void limit() throws RepositoryException {
  Session session=getAdminSession();
  Node hello1=session.getRootNode().addNode("hello1");
  hello1.setProperty("id","1");
  hello1.setProperty("data","x");
  session.save();
  Node hello3=session.getRootNode().addNode("hello3");
  hello3.setProperty("id","3");
  hello3.setProperty("data","z");
  session.save();
  Node hello2=session.getRootNode().addNode("hello2");
  hello2.setProperty("id","2");
  hello2.setProperty("data","y");
  session.save();
  ValueFactory vf=session.getValueFactory();
  QueryManager qm=session.getWorkspace().getQueryManager();
  Query q=qm.createQuery("select id from [nt:base] where data >= $data order by id",Query.JCR_SQL2);
  q.bindValue("data",vf.createValue("x"));
  for (int limit=0; limit < 5; limit++) {
    q.setLimit(limit);
    for (int offset=0; offset < 3; offset++) {
      q.setOffset(offset);
      QueryResult r=q.execute();
      RowIterator it=r.getRows();
      int l=Math.min(Math.max(0,3 - offset),limit);
      assertEquals(l,r.getRows().getSize());
      assertEquals(l,r.getNodes().getSize());
      Row row;
      for (int x=offset + 1, i=0; i < limit && x < 4; i++, x++) {
        assertTrue(it.hasNext());
        row=it.nextRow();
        assertEquals("" + x,row.getValue("id").getString());
      }
      assertFalse(it.hasNext());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.AbstractMoveTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveNodeWithGlobRestriction() throws Exception {
  deny(childNPath,readPrivileges,createGlobRestriction('/' + nodeName3));
  assertFalse(testSession.nodeExists(nodePath3));
  assertHasPrivileges(nodePath3,readPrivileges,false);
  String movedChildNPath=path + "/movedNode";
  String movedNode3Path=movedChildNPath + '/' + nodeName3;
  move(childNPath,movedChildNPath,superuser);
  assertFalse(testSession.nodeExists(movedNode3Path));
  assertHasPrivileges(movedNode3Path,readPrivileges,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveAccessControlledNodeInSubtree() throws Exception {
  deny(nodePath3,readPrivileges);
  assertFalse(testSession.nodeExists(nodePath3));
  assertHasPrivileges(nodePath3,readPrivileges,false);
  String movedChildNPath=path + "/movedNode";
  String movedNode3Path=movedChildNPath + '/' + nodeName3;
  move(childNPath,movedChildNPath,superuser);
  assertFalse(testSession.nodeExists(movedNode3Path));
  assertHasPrivileges(movedNode3Path,readPrivileges,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveAccessControlledNode() throws Exception {
  deny(childNPath,readPrivileges);
  assertFalse(testSession.nodeExists(childNPath));
  assertHasPrivileges(childNPath,readPrivileges,false);
  assertFalse(testSession.nodeExists(nodePath3));
  assertHasPrivileges(nodePath3,readPrivileges,false);
  String movedChildNPath=path + "/movedNode";
  String movedNode3Path=movedChildNPath + '/' + nodeName3;
  move(childNPath,movedChildNPath,superuser);
  assertFalse(testSession.nodeExists(movedChildNPath));
  assertHasPrivileges(movedChildNPath,readPrivileges,false);
  assertFalse(testSession.nodeExists(movedNode3Path));
  assertHasPrivileges(movedNode3Path,readPrivileges,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveWithDifferentEffectiveAc() throws Exception {
  deny(path,readPrivileges);
  allow(childNPath,readPrivileges);
  assertTrue(testSession.nodeExists(nodePath3));
  assertTrue(testAcMgr.hasPrivileges(nodePath3,readPrivileges));
  String movedPath=path + "/movedNode";
  move(nodePath3,movedPath,superuser);
  assertFalse(testSession.nodeExists(movedPath));
  assertHasPrivileges(movedPath,readPrivileges,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveNodeWithGlobRestriction2() throws Exception {
  deny(childNPath,readPrivileges,createGlobRestriction('/' + nodeName3));
  assertHasPrivileges(nodePath3,readPrivileges,false);
  String movedChildNPath=path + "/movedNode";
  String movedNode3Path=movedChildNPath + '/' + nodeName3;
  move(childNPath,movedChildNPath,superuser);
  assertFalse(testSession.nodeExists(movedNode3Path));
  assertHasPrivileges(movedNode3Path,readPrivileges,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.AccessControlManagementTest </h4><pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlModificationWithoutPrivilege() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_MODIFY_PROPERTIES});
  JackrabbitAccessControlList tmpl=allow(path,privileges);
  String policyPath=tmpl.getPath() + "/rep:policy";
  assertTrue(superuser.itemExists(policyPath));
  try {
    testAcMgr.setPolicy(tmpl.getPath(),tmpl);
    fail("test user must not have MODIFY_AC privilege.");
  }
 catch (  AccessDeniedException e) {
  }
  try {
    testAcMgr.removePolicy(tmpl.getPath(),tmpl);
    fail("test user must not have MODIFY_AC privilege.");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlModification() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_READ_ACCESS_CONTROL,Privilege.JCR_MODIFY_ACCESS_CONTROL});
  JackrabbitAccessControlList tmpl=allow(path,privileges);
  assertTrue(superuser.itemExists(tmpl.getPath() + "/rep:policy"));
  assertTrue(testAcMgr.hasPrivileges(path,privilegesFromName(Privilege.JCR_MODIFY_ACCESS_CONTROL)));
  AccessControlPolicy[] policies=testAcMgr.getPolicies(path);
  testAcMgr.getPolicies(childNPath);
  try {
    testAcMgr.getPolicies(siblingPath);
    fail("READ_AC privilege must not apply outside of the tree it has applied to.");
  }
 catch (  AccessDeniedException e) {
  }
  assertFalse(testAcMgr.hasPrivileges(siblingPath,privilegesFromName(Privilege.JCR_MODIFY_ACCESS_CONTROL)));
  AccessControlList acl=(AccessControlList)policies[0];
  acl.addAccessControlEntry(testUser.getPrincipal(),repWritePrivileges);
  testAcMgr.setPolicy(path,acl);
  testSession.save();
  assertTrue(testAcMgr.hasPrivileges(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES)));
  testAcMgr.removePolicy(path,policies[0]);
  testSession.save();
  try {
    testAcMgr.getEffectivePolicies(childNPath);
    fail("READ_AC privilege has been revoked -> must throw again.");
  }
 catch (  AccessDeniedException e) {
  }
  assertReadOnly(path);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadAccessControlContent() throws Exception {
  allow(path,privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL));
  deny(path,privilegesFromName(Privilege.JCR_READ));
  assertTrue(testSession.nodeExists(path + "/rep:policy"));
  assertTrue(testSession.propertyExists(path + "/rep:policy/jcr:primaryType"));
  assertFalse(testSession.nodeExists(path));
  assertFalse(testSession.propertyExists(path + "/jcr:primaryType"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemovePolicy() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_READ,Privilege.JCR_READ_ACCESS_CONTROL,Privilege.JCR_MODIFY_ACCESS_CONTROL});
  allow(path,privileges);
  assertTrue(testAcMgr.hasPrivileges(path,privilegesFromName(Privilege.JCR_MODIFY_ACCESS_CONTROL)));
  testAcMgr.removePolicy(path,testAcMgr.getPolicies(path)[0]);
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveMixin() throws Exception {
  Node n=superuser.getNode(path);
  deny(path,readPrivileges);
  assertTrue(n.hasNode("rep:policy"));
  assertTrue(n.isNodeType("rep:AccessControllable"));
  n.removeMixin("rep:AccessControllable");
  superuser.save();
  assertFalse(n.hasNode("rep:policy"));
  assertFalse(n.isNodeType("rep:AccessControllable"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadAccessControl() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL);
  allow(path,privileges);
  assertTrue(testAcMgr.hasPrivileges(path,privileges));
  assertTrue(testSession.nodeExists(path + "/rep:policy"));
  testAcMgr.getPolicies(path);
  assertTrue(testAcMgr.hasPrivileges(childNPath,privileges));
  assertEquals(0,testAcMgr.getPolicies(childNPath).length);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadAccessControlWithRestriction() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL);
  allow(path,privileges,createGlobRestriction('/' + nodeName2));
  assertFalse(testAcMgr.hasPrivileges(path,privileges));
  assertFalse(testSession.nodeExists(path + "/rep:policy"));
  try {
    testAcMgr.getPolicies(path);
    fail("AccessDeniedException expected");
  }
 catch (  AccessDeniedException e) {
  }
  assertTrue(testAcMgr.hasPrivileges(childNPath,privileges));
  assertEquals(0,testAcMgr.getPolicies(childNPath).length);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetModifiedPolicy() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{REP_WRITE,Privilege.JCR_READ_ACCESS_CONTROL,Privilege.JCR_MODIFY_ACCESS_CONTROL});
  JackrabbitAccessControlList acl=allow(path,privileges);
  AccessControlPolicy[] policies=testAcMgr.getPolicies(path);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlList policy=(AccessControlList)policies[0];
  if (policy.addAccessControlEntry(testUser.getPrincipal(),privilegesFromName(Privilege.JCR_LOCK_MANAGEMENT))) {
    testAcMgr.setPolicy(path,acl);
    testSession.save();
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAcContentIsProtected() throws Exception {
  Node policyNode=findPolicyNode(superuser.getRootNode());
  if (policyNode == null) {
    throw new NotExecutableException("no policy node found.");
  }
  assertTrue("The rep:Policy node must be protected",policyNode.getDefinition().isProtected());
  try {
    policyNode.remove();
    fail("rep:Policy node must be protected.");
  }
 catch (  ConstraintViolationException e) {
  }
  for (NodeIterator it=policyNode.getNodes(); it.hasNext(); ) {
    Node n=it.nextNode();
    if (n.isNodeType("rep:ACE")) {
      try {
        n.remove();
        fail("ACE node must be protected.");
      }
 catch (      ConstraintViolationException e) {
      }
      break;
    }
  }
  try {
    policyNode.setProperty("test","anyvalue");
    fail("rep:policy node must be protected.");
  }
 catch (  ConstraintViolationException e) {
  }
  try {
    policyNode.addNode("test","rep:ACE");
    fail("rep:policy node must be protected.");
  }
 catch (  ConstraintViolationException e) {
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetrievePrivilegesOnAcNodes() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL);
  allow(path,privileges);
  assertTrue(testAcMgr.hasPrivileges(path,privileges));
  AccessControlPolicy[] policies=testAcMgr.getPolicies(path);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof JackrabbitAccessControlList);
  String aclNodePath=null;
  Node n=superuser.getNode(path);
  for (NodeIterator itr=n.getNodes(); itr.hasNext(); ) {
    Node child=itr.nextNode();
    if (child.isNodeType("rep:Policy")) {
      aclNodePath=child.getPath();
    }
  }
  if (aclNodePath == null) {
    fail("Expected node at " + path + " to have an ACL child node.");
  }
  assertTrue(testAcMgr.hasPrivileges(aclNodePath,privileges));
  assertTrue(testSession.hasPermission(aclNodePath,Session.ACTION_READ));
  for (NodeIterator aceNodes=superuser.getNode(aclNodePath).getNodes(); aceNodes.hasNext(); ) {
    String aceNodePath=aceNodes.nextNode().getPath();
    assertTrue(testAcMgr.hasPrivileges(aceNodePath,privileges));
    assertTrue(testSession.hasPermission(aceNodePath,Session.ACTION_READ));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadAccessControlWithoutPrivilege() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ);
  JackrabbitAccessControlList tmpl=allow(path,privileges);
  String policyPath=tmpl.getPath() + "/rep:policy";
  assertTrue(superuser.itemExists(policyPath));
  assertFalse(testAcMgr.hasPrivileges(path,privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL)));
  assertFalse(testSession.itemExists(policyPath));
  assertFalse(testSession.nodeExists(policyPath));
  try {
    testSession.getNode(policyPath);
    fail("Accessing the rep:policy node must throw PathNotFoundException.");
  }
 catch (  PathNotFoundException e) {
  }
  try {
    testAcMgr.getPolicies(tmpl.getPath());
    fail("test user must not have READ_AC privilege.");
  }
 catch (  AccessDeniedException e) {
  }
  try {
    testAcMgr.getEffectivePolicies(tmpl.getPath());
    fail("test user must not have READ_AC privilege.");
  }
 catch (  AccessDeniedException e) {
  }
  for (NodeIterator aceNodes=superuser.getNode(policyPath).getNodes(); aceNodes.hasNext(); ) {
    Node aceNode=aceNodes.nextNode();
    String aceNodePath=aceNode.getPath();
    assertFalse(testSession.nodeExists(aceNodePath));
    for (PropertyIterator it=aceNode.getProperties(); it.hasNext(); ) {
      assertFalse(testSession.propertyExists(it.nextProperty().getPath()));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePolicyWithoutPrivilege() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_READ);
  AccessControlPolicy policy=allow(path,privileges);
  assertFalse(testAcMgr.hasPrivileges(path,privilegesFromName(Privilege.JCR_MODIFY_ACCESS_CONTROL)));
  try {
    testAcMgr.removePolicy(path,policy);
    fail("Test user must not be allowed to remove the access control policy.");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testAccessControlPrivileges() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{REP_WRITE,Privilege.JCR_READ_ACCESS_CONTROL,Privilege.JCR_MODIFY_ACCESS_CONTROL});
  JackrabbitAccessControlList acl=allow(path,privileges);
  assertTrue(testSession.itemExists(acl.getPath() + "/rep:policy"));
  testAcMgr.getPolicies(acl.getPath());
  testAcMgr.removePolicy(acl.getPath(),acl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.CopyTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyInvisibleSubTree() throws Exception {
  deny(childNPath,privilegesFromName(Privilege.JCR_READ));
  allow(targetPath,privilegesFromName(Privilege.JCR_ALL));
  assertFalse(testSession.nodeExists(childNPath));
  testSession.getWorkspace().copy(path,destPath);
  Node copiedNode=testSession.getNode(destPath);
  String childName=Text.getName(childNPath);
  assertFalse(copiedNode.hasNode(childName));
  assertTrue(copiedNode.hasNode(Text.getName(childNPath2)));
  superuser.refresh(false);
  assertFalse(superuser.nodeExists(destPath + '/' + childName));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyInvisibleProperty() throws Exception {
  deny(childNPath,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  allow(targetPath,privilegesFromName(Privilege.JCR_ALL));
  testSession.getWorkspace().copy(path,destPath);
  Node copiedNode=testSession.getNode(destPath);
  String childName=Text.getName(childNPath);
  assertTrue(copiedNode.hasNode(childName));
  assertFalse(copiedNode.hasProperty(childName + '/' + propertyName1));
  superuser.refresh(false);
  assertFalse(superuser.nodeExists(destPath + '/' + childName+ '/'+ propertyName1));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2810">OAK-2810</a>
 */
@Test public void testCopyFromNonAccessibleSourceParent() throws Exception {
  deny(path,privilegesFromName(PrivilegeConstants.JCR_ALL));
  Privilege[] readWrite=privilegesFromNames(new String[]{PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE});
  allow(childNPath,readWrite);
  allow(targetPath,readWrite);
  testSession.getWorkspace().copy(childNPath,destPath);
  assertTrue(testSession.nodeExists(destPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCopyWithFullPermissions() throws Exception {
  allow(targetPath,privilegesFromName(Privilege.JCR_ALL));
  testSession.getWorkspace().copy(path,destPath);
  assertTrue(testSession.nodeExists(destPath));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCopyInvisibleAcContent() throws Exception {
  deny(childNPath,privilegesFromName(Privilege.JCR_READ_ACCESS_CONTROL));
  allow(targetPath,privilegesFromName(PrivilegeConstants.JCR_ALL));
  testSession.getWorkspace().copy(path,destPath);
  Node copiedNode=testSession.getNode(destPath);
  String childName=Text.getName(childNPath);
  assertTrue(copiedNode.hasNode(childName));
  Node child=copiedNode.getNode(childName);
  assertFalse(child.hasNode(AccessControlConstants.REP_POLICY));
  superuser.refresh(false);
  assertFalse(superuser.nodeExists(targetPath + '/' + childName+ "/rep:policy"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ImportBesteffortTest </h4><pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUnknownPrincipal() throws Exception {
  runImport();
  AccessControlManager acMgr=adminSession.getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(target.getPath());
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof JackrabbitAccessControlList);
  AccessControlEntry[] entries=((JackrabbitAccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,entries.length);
  AccessControlEntry entry=entries[0];
  assertEquals("unknownprincipal",entry.getPrincipal().getName());
  assertEquals(1,entry.getPrivileges().length);
  assertEquals(acMgr.privilegeFromName(Privilege.JCR_WRITE),entry.getPrivileges()[0]);
  if (entry instanceof JackrabbitAccessControlEntry) {
    assertTrue(((JackrabbitAccessControlEntry)entry).isAllow());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.InheritanceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testInheritanceAndMixedUserGroupPermissions() throws Exception {
  allow(path,testGroup.getPrincipal(),modPropPrivileges);
  deny(path,testUser.getPrincipal(),modPropPrivileges);
  assertFalse(testAcMgr.hasPrivileges(path,modPropPrivileges));
  allow(childNPath,testGroup.getPrincipal(),modPropPrivileges);
  assertFalse(testAcMgr.hasPrivileges(childNPath,modPropPrivileges));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReorderGroupPermissions() throws Exception {
  deny(path,testGroup.getPrincipal(),modPropPrivileges);
  allow(path,group2.getPrincipal(),modPropPrivileges);
  String actions=getActions(Session.ACTION_SET_PROPERTY,Session.ACTION_READ);
  assertTrue(testSession.hasPermission(path,actions));
  Privilege[] privs=privilegesFromName(Privilege.JCR_MODIFY_PROPERTIES);
  assertTrue(testAcMgr.hasPrivileges(path,privs));
  AccessControlEntry srcEntry=null;
  AccessControlEntry destEntry=null;
  JackrabbitAccessControlList acl=(JackrabbitAccessControlList)acMgr.getPolicies(path)[0];
  for (  AccessControlEntry entry : acl.getAccessControlEntries()) {
    Principal princ=entry.getPrincipal();
    if (testGroup.getPrincipal().equals(princ)) {
      destEntry=entry;
    }
 else     if (group2.getPrincipal().equals(princ)) {
      srcEntry=entry;
    }
  }
  acl.orderBefore(srcEntry,destEntry);
  acMgr.setPolicy(path,acl);
  superuser.save();
  testSession.refresh(false);
  assertFalse(testSession.hasPermission(path,actions));
  assertFalse(testAcMgr.hasPrivileges(path,privs));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMultipleGroupPermissionsOnNode() throws Exception {
  allow(path,testGroup.getPrincipal(),modPropPrivileges);
  deny(path,group2.getPrincipal(),modPropPrivileges);
  String actions=getActions(Session.ACTION_SET_PROPERTY,Session.ACTION_READ);
  assertFalse(testSession.hasPermission(path,actions));
  assertFalse(testAcMgr.hasPrivileges(path,modPropPrivileges));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritance() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_REMOVE_NODE,Privilege.JCR_MODIFY_PROPERTIES});
  allow(path,privileges);
  privileges=privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_CHILD_NODES});
  allow(childNPath,privileges);
  Privilege[] expectedPrivileges=privilegesFromNames(new String[]{Privilege.JCR_READ,Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_REMOVE_NODE,Privilege.JCR_MODIFY_PROPERTIES});
  assertTrue(testAcMgr.hasPrivileges(childNPath,expectedPrivileges));
  String aActions=javax.jcr.Session.ACTION_SET_PROPERTY + ',' + javax.jcr.Session.ACTION_READ;
  assertTrue(testSession.hasPermission(childNPath,aActions));
  String dActions=javax.jcr.Session.ACTION_REMOVE + ',' + javax.jcr.Session.ACTION_ADD_NODE;
  assertFalse(testSession.hasPermission(childNPath,dActions));
  String nonExistingItemPath=childNPath + "/anyItem";
  assertTrue(testSession.hasPermission(nonExistingItemPath,aActions + ',' + dActions));
  Node childN=testSession.getNode(childNPath);
  String testPath=childN.addNode(nodeName2).getPath();
  assertTrue(testAcMgr.hasPrivileges(testPath,expectedPrivileges));
  testSession.save();
  assertTrue(testAcMgr.hasPrivileges(testPath,expectedPrivileges));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCancelInheritanceRestriction() throws Exception {
  allow(path,repWritePrivileges,createGlobRestriction(""));
  assertTrue(testAcMgr.hasPrivileges(path,repWritePrivileges));
  assertTrue(testSession.hasPermission(path,Session.ACTION_SET_PROPERTY));
  assertFalse(testAcMgr.hasPrivileges(childNPath,repWritePrivileges));
  assertFalse(testSession.hasPermission(childNPath,Session.ACTION_SET_PROPERTY));
  assertFalse(testAcMgr.hasPrivileges(childNPath2,repWritePrivileges));
  assertFalse(testSession.hasPermission(childNPath2,Session.ACTION_SET_PROPERTY));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testInheritedGroupPermissions() throws Exception {
  allow(path,testGroup.getPrincipal(),modPropPrivileges);
  deny(childNPath,EveryonePrincipal.getInstance(),modPropPrivileges);
  assertFalse(testAcMgr.hasPrivileges(childNPath,modPropPrivileges));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMultipleGroupPermissionsOnNode2() throws Exception {
  deny(path,testGroup.getPrincipal(),modPropPrivileges);
  allow(path,group2.getPrincipal(),modPropPrivileges);
  String actions=getActions(Session.ACTION_SET_PROPERTY,Session.ACTION_READ);
  assertTrue(testSession.hasPermission(path,actions));
  assertTrue(testAcMgr.hasPrivileges(path,modPropPrivileges));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritance2() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_WRITE});
  allow(path,privileges);
  deny(childNPath,privileges);
  assertFalse(testAcMgr.hasPrivileges(childNPath,privileges));
  String actions=getActions(Session.ACTION_SET_PROPERTY,Session.ACTION_REMOVE,Session.ACTION_ADD_NODE);
  String nonExistingItemPath=childNPath + "/anyItem";
  assertFalse(testSession.hasPermission(nonExistingItemPath,actions));
  Node grandChild=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  testSession.refresh(false);
  String gcPath=grandChild.getPath();
  allow(gcPath,privileges);
  assertTrue(testAcMgr.hasPrivileges(gcPath,privileges));
  assertTrue(testSession.hasPermission(gcPath + "/anyProp",Session.ACTION_SET_PROPERTY));
  assertFalse(testSession.hasPermission(gcPath,Session.ACTION_REMOVE));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testInheritedGroupPermissions2() throws Exception {
  allow(path,EveryonePrincipal.getInstance(),modPropPrivileges);
  deny(childNPath,testGroup.getPrincipal(),modPropPrivileges);
  assertFalse(testAcMgr.hasPrivileges(childNPath,modPropPrivileges));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ItemModifiedTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testModified() throws Exception {
  Node child=superuser.getNode(path).addNode("child");
  superuser.save();
  allow(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  Node n=testSession.getNode(path);
  assertFalse(n.isModified());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testModified4() throws Exception {
  deny(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  Node n=testSession.getNode(childNPath);
  assertFalse(n.isModified());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testModified2() throws Exception {
  Node child=superuser.getNode(path).addNode("child");
  superuser.save();
  deny(child.getPath(),privilegesFromName(PrivilegeConstants.JCR_READ));
  Node n=testSession.getNode(path);
  assertFalse(n.isModified());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testModified3() throws Exception {
  Node child=superuser.getNode(path).addNode("child",JcrConstants.NT_UNSTRUCTURED);
  child.addNode("a");
  child.addNode("b");
  superuser.save();
  Node n=testSession.getNode(child.getPath());
  assertFalse(n.isModified());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.JackrabbitAccessControlListTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetRestrictionType() throws RepositoryException {
  String[] names=acl.getRestrictionNames();
  for (  String name : names) {
    int type=acl.getRestrictionType(name);
    assertTrue(type > PropertyType.UNDEFINED);
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSize() throws RepositoryException {
  if (acl.addAccessControlEntry(testPrincipal,testPrivileges)) {
    assertTrue(acl.size() > 0);
  }
 else {
    assertEquals(0,acl.size());
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsEmpty() throws RepositoryException {
  if (acl.addAccessControlEntry(testPrincipal,testPrivileges)) {
    assertFalse(acl.isEmpty());
  }
 else {
    assertTrue(acl.isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApplicablePolicyIsEmpty(){
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveEntry() throws NotExecutableException, RepositoryException {
  Principal princ=getValidPrincipal();
  Privilege[] grPriv=privilegesFromName("rep:write");
  acl.addEntry(princ,grPriv,true,Collections.<String,Value>emptyMap());
  AccessControlEntry[] entries=acl.getAccessControlEntries();
  int length=entries.length;
  assertTrue("Grant was both successful -> at least 1 entry.",length > 0);
  for (  AccessControlEntry entry : entries) {
    acl.removeAccessControlEntry(entry);
    length=length - 1;
    assertEquals(length,acl.size());
    assertEquals(length,acl.getAccessControlEntries().length);
  }
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
  assertEquals(0,acl.getAccessControlEntries().length);
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddEntry() throws NotExecutableException, RepositoryException {
  List<AccessControlEntry> entriesBefore=Arrays.asList(acl.getAccessControlEntries());
  if (acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap())) {
    AccessControlEntry[] entries=acl.getAccessControlEntries();
    AccessControlEntry ace=null;
    for (    AccessControlEntry entry : entries) {
      if (testPrincipal.equals(entry.getPrincipal())) {
        ace=entry;
      }
    }
    assertNotNull("addEntry was successful -> expected entry for tesPrincipal.",ace);
    assertTrue("addEntry was successful -> at least 1 entry.",entries.length > 0);
  }
 else {
    AccessControlEntry[] entries=acl.getAccessControlEntries();
    assertEquals("Grant ALL not successful -> entries must not have changed.",entriesBefore,Arrays.asList(entries));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.NodeTypeManagementTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCanAddMixin() throws Exception {
  assertFalse(childNode.canAddMixin(mixinName));
  modify(childNode.getPath(),Privilege.JCR_NODE_TYPE_MANAGEMENT,true);
  assertTrue(childNode.canAddMixin(mixinName));
  modify(childNode.getPath(),Privilege.JCR_NODE_TYPE_MANAGEMENT,false);
  assertFalse(childNode.canAddMixin(mixinName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadPropertyTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDenyReadProperties() throws Exception {
  allow(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  deny(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  assertTrue(testSession.nodeExists(path));
  assertTrue(testSession.itemExists(path));
  assertTrue(testSession.nodeExists(childNPath));
  List<String> propertyPaths=new ArrayList<String>();
  propertyPaths.add(childPPath);
  propertyPaths.add(childchildPPath);
  propertyPaths.add(path + "/jcr:primaryType");
  for (  String pPath : propertyPaths) {
    assertFalse(testSession.itemExists(pPath));
    assertFalse(testSession.propertyExists(pPath));
  }
  Node target=testSession.getNode(path);
  assertFalse(target.getProperties().hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadProperty() throws Exception {
  deny(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  allow(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  assertFalse(testSession.nodeExists(path));
  assertFalse(testSession.itemExists(path));
  assertFalse(testSession.nodeExists(childNPath));
  List<String> propertyPaths=new ArrayList<String>();
  propertyPaths.add(childPPath);
  propertyPaths.add(childchildPPath);
  propertyPaths.add(path + "/jcr:primaryType");
  for (  String pPath : propertyPaths) {
    assertTrue(testSession.itemExists(pPath));
    assertTrue(testSession.propertyExists(pPath));
    Property p=testSession.getProperty(pPath);
    assertEquals(pPath,p.getPath());
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadProperty2() throws Exception {
  deny(path,privilegesFromName(PrivilegeConstants.REP_READ_NODES));
  assertFalse(testSession.nodeExists(path));
  assertFalse(testSession.itemExists(path));
  assertFalse(testSession.nodeExists(childNPath));
  List<String> propertyPaths=new ArrayList<String>();
  propertyPaths.add(childPPath);
  propertyPaths.add(childchildPPath);
  propertyPaths.add(path + "/jcr:primaryType");
  for (  String pPath : propertyPaths) {
    assertTrue(testSession.itemExists(pPath));
    assertTrue(testSession.propertyExists(pPath));
    Property p=testSession.getProperty(pPath);
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDenySingleProperty() throws Exception {
  allow(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  deny(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES),createGlobRestriction("*/" + propertyName1));
  assertTrue(testSession.nodeExists(path));
  assertTrue(testSession.itemExists(path));
  assertTrue(testSession.nodeExists(childNPath));
  List<String> allowed=new ArrayList<String>();
  allowed.add(path + "/jcr:primaryType");
  allowed.add(childNPath + "/jcr:primaryType");
  for (  String pPath : allowed) {
    assertTrue(testSession.itemExists(pPath));
    assertTrue(testSession.propertyExists(pPath));
  }
  List<String> denied=new ArrayList<String>();
  denied.add(childPPath);
  denied.add(childchildPPath);
  for (  String pPath : denied) {
    assertFalse(testSession.itemExists(pPath));
    assertFalse(testSession.propertyExists(pPath));
  }
  Node target=testSession.getNode(path);
  PropertyIterator pit=target.getProperties();
  while (pit.hasNext()) {
    assertFalse(propertyName1.equals(pit.nextProperty().getName()));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetStatus() throws Exception {
  deny(path,privilegesFromName(PrivilegeConstants.JCR_READ));
  allow(path,privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  List<String> propertyPaths=new ArrayList<String>();
  propertyPaths.add(childPPath);
  propertyPaths.add(childchildPPath);
  propertyPaths.add(path + "/jcr:primaryType");
  for (  String pPath : propertyPaths) {
    Property p=testSession.getProperty(pPath);
    assertFalse(p.isModified());
    assertFalse(p.isNew());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction() throws Exception {
  Node grandchild=superuser.getNode(childNPath).addNode("child");
  String ccPath=grandchild.getPath();
  superuser.save();
  deny(path,readPrivileges);
  assertFalse(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  allow(childNPath,readPrivileges,createGlobRestriction(""));
  assertFalse(canReadNode(testSession,path));
  assertTrue(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  assertFalse(testSession.propertyExists(childNPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
  allow(ccPath,readPrivileges);
  assertTrue(canReadNode(testSession,ccPath));
  assertTrue(testSession.propertyExists(ccPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeniedReadOnSubTree() throws Exception {
  deny(childNPath,readPrivileges);
  assertTrue(testSession.hasPermission(path,Session.ACTION_READ));
  Node n=testSession.getNode(path);
  testSession.getNode(childNPath2);
  assertTrue(n.getProperties().hasNext());
  assertFalse(testSession.itemExists(childNPath));
  try {
    testSession.getNode(childNPath);
    fail("Read access has been denied -> cannot retrieve child node.");
  }
 catch (  PathNotFoundException e) {
  }
  assertFalse(testSession.itemExists(childchildPPath));
  try {
    testSession.getItem(childchildPPath);
    fail("Read access has been denied -> cannot retrieve prop below child node.");
  }
 catch (  PathNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAllowWriteDenyRead() throws Exception {
  allow(path,repWritePrivileges);
  deny(path,readPrivileges);
  assertFalse(testSession.nodeExists(path));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAllowUserDenyGroup() throws Exception {
  allow(path,testUser.getPrincipal(),readPrivileges);
  deny(path,getTestGroup().getPrincipal(),readPrivileges);
  assertTrue(testSession.nodeExists(path));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAllowEveryoneDenyGroup() throws Exception {
  allow(path,EveryonePrincipal.getInstance(),readPrivileges);
  deny(path,getTestGroup().getPrincipal(),readPrivileges);
  assertFalse(testSession.nodeExists(path));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadDenied() throws Exception {
  deny(path,readPrivileges);
  allow(childNPath,readPrivileges);
  assertFalse(testSession.nodeExists(path));
  assertTrue(testSession.nodeExists(childNPath));
  Node n=testSession.getNode(childNPath);
  n.getDefinition();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction3() throws Exception {
  Group group2=getUserManager(superuser).createGroup(generateId("group2_"));
  Group group3=getUserManager(superuser).createGroup(generateId("group3_"));
  superuser.save();
  try {
    Privilege[] readPrivs=privilegesFromName(Privilege.JCR_READ);
    allow(path,group2.getPrincipal(),readPrivs);
    deny(path,group3.getPrincipal(),readPrivs);
    modify(path,getTestGroup().getPrincipal(),readPrivs,true,createGlobRestriction("/*"));
    Set<Principal> principals=new HashSet<Principal>();
    principals.add(getTestGroup().getPrincipal());
    principals.add(group2.getPrincipal());
    principals.add(group3.getPrincipal());
    assertFalse(((JackrabbitAccessControlManager)acMgr).hasPrivileges(path,principals,readPrivs));
    assertTrue(((JackrabbitAccessControlManager)acMgr).hasPrivileges(childNPath,principals,readPrivs));
  }
  finally {
    group2.remove();
    group3.remove();
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDenyUserPathAllowGroupChildPath() throws Exception {
  deny(path,testUser.getPrincipal(),readPrivileges);
  allow(path,getTestGroup().getPrincipal(),readPrivileges);
  assertFalse(testSession.nodeExists(childNPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAllowUserPathDenyGroupChildPath() throws Exception {
  allow(path,testUser.getPrincipal(),readPrivileges);
  deny(path,getTestGroup().getPrincipal(),readPrivileges);
  assertTrue(testSession.nodeExists(childNPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDenyUserAllowGroup() throws Exception {
  deny(path,testUser.getPrincipal(),readPrivileges);
  allow(path,getTestGroup().getPrincipal(),readPrivileges);
  assertFalse(testSession.nodeExists(path));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDenyGroupPathAllowEveryoneChildPath() throws Exception {
  deny(path,getTestGroup().getPrincipal(),readPrivileges);
  allow(path,EveryonePrincipal.getInstance(),readPrivileges);
  assertTrue(testSession.nodeExists(childNPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testChildNodesWithAccessCheck() throws Exception {
  Node nodeToDeny=superuser.getNode(path).addNode("nodeToDeny");
  superuser.save();
  deny(nodeToDeny.getPath(),privilegesFromName(PrivilegeConstants.JCR_READ));
  NodeIterator it=testSession.getNode(path).getNodes();
  Set<String> childNodeNames=new HashSet<String>();
  while (it.hasNext()) {
    Node n=it.nextNode();
    childNodeNames.add(n.getName());
  }
  assertFalse(childNodeNames.contains("nodeToDeny"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAllowGroupDenyUser() throws Exception {
  allow(path,getTestGroup().getPrincipal(),readPrivileges);
  deny(path,testUser.getPrincipal(),readPrivileges);
  assertFalse(testSession.nodeExists(path));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction2() throws Exception {
  Group group2=getUserManager(superuser).createGroup(generateId("group2_"));
  Group group3=getUserManager(superuser).createGroup(generateId("group3_"));
  superuser.save();
  try {
    Privilege[] readPrivs=privilegesFromName(Privilege.JCR_READ);
    modify(path,getTestGroup().getPrincipal(),readPrivs,true,createGlobRestriction("/*"));
    allow(path,group2.getPrincipal(),readPrivs);
    deny(path,group3.getPrincipal(),readPrivs);
    Set<Principal> principals=new HashSet<Principal>();
    principals.add(getTestGroup().getPrincipal());
    principals.add(group2.getPrincipal());
    principals.add(group3.getPrincipal());
    assertFalse(((JackrabbitAccessControlManager)acMgr).hasPrivileges(path,principals,readPrivs));
    assertFalse(((JackrabbitAccessControlManager)acMgr).hasPrivileges(childNPath,principals,readPrivs));
  }
  finally {
    group2.remove();
    group3.remove();
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testItemExists() throws Exception {
  deny(path,readPrivileges);
  allow(childNPath,readPrivileges);
  assertFalse(testSession.itemExists(path));
  assertTrue(testSession.itemExists(childNPath));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGlobRestriction5() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,readPrivileges);
  deny(path,readPrivileges,createGlobRestriction("*/anotherpath"));
  allow(a.getPath(),repWritePrivileges);
  String aPath=a.getPath();
  assertTrue(testSession.nodeExists(aPath));
  Node n=testSession.getNode(aPath);
  Node test=testSession.getNode(path);
  assertTrue(test.hasNode("a"));
  Node n2=test.getNode("a");
  assertTrue(n.isSame(n2));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDenyGroupPathAllowUserChildPath() throws Exception {
  deny(path,getTestGroup().getPrincipal(),readPrivileges);
  allow(path,testUser.getPrincipal(),readPrivileges);
  assertTrue(testSession.nodeExists(childNPath));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction2() throws Exception {
  Node grandchild=superuser.getNode(childNPath).addNode("child");
  String ccPath=grandchild.getPath();
  superuser.save();
  deny(path,readPrivileges);
  assertFalse(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  allow(path,readPrivileges,createGlobRestriction(""));
  assertTrue(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  assertFalse(testSession.propertyExists(childNPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGlobRestriction4() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,readPrivileges);
  deny(path,readPrivileges,createGlobRestriction("*/anotherpath"));
  String aPath=a.getPath();
  assertTrue(testSession.nodeExists(aPath));
  Node n=testSession.getNode(aPath);
  Node test=testSession.getNode(path);
  assertTrue(test.hasNode("a"));
  Node n2=test.getNode("a");
  assertTrue(n.isSame(n2));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction() throws Exception {
  deny(path,readPrivileges,createGlobRestriction("*/" + jcrPrimaryType));
  assertTrue(testAcMgr.hasPrivileges(path,readPrivileges));
  assertTrue(testSession.hasPermission(path,javax.jcr.Session.ACTION_READ));
  testSession.getNode(path);
  assertTrue(testAcMgr.hasPrivileges(childNPath,readPrivileges));
  assertTrue(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_READ));
  testSession.getNode(childNPath);
  String propPath=path + '/' + jcrPrimaryType;
  assertFalse(testSession.hasPermission(propPath,javax.jcr.Session.ACTION_READ));
  assertFalse(testSession.propertyExists(propPath));
  propPath=childNPath + '/' + jcrPrimaryType;
  assertFalse(testSession.hasPermission(propPath,javax.jcr.Session.ACTION_READ));
  assertFalse(testSession.propertyExists(propPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDenyGroupAllowEveryone() throws Exception {
  deny(path,getTestGroup().getPrincipal(),readPrivileges);
  allow(path,EveryonePrincipal.getInstance(),readPrivileges);
  assertTrue(testSession.nodeExists(path));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction3() throws Exception {
  Group group1=getTestGroup();
  Group group2=getUserManager(superuser).createGroup(generateId("group2_"));
  group2.addMember(testUser);
  Group group3=getUserManager(superuser).createGroup(generateId("group3_"));
  superuser.save();
  try {
    assertTrue(group1.isDeclaredMember(testUser));
    assertTrue(group2.isDeclaredMember(testUser));
    assertFalse(group3.isDeclaredMember(testUser));
    deny(path,group1.getPrincipal(),readPrivileges);
    modify(path,group1.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    deny(childNPath,group2.getPrincipal(),readPrivileges);
    modify(childNPath,group2.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    deny(childNPath2,group3.getPrincipal(),readPrivileges);
    modify(childNPath2,group3.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    Session userSession=getHelper().getRepository().login(creds);
    assertTrue(canReadNode(userSession,path));
    assertTrue(canReadNode(userSession,childNPath));
    assertFalse(canReadNode(userSession,childNPath2));
  }
  finally {
    group2.remove();
    group3.remove();
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAllowGroupPathDenyUserChildPath() throws Exception {
  allow(path,getTestGroup().getPrincipal(),readPrivileges);
  deny(path,testUser.getPrincipal(),readPrivileges);
  assertFalse(testSession.nodeExists(childNPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAllowEveryonePathDenyGroupChildPath() throws Exception {
  allow(path,EveryonePrincipal.getInstance(),readPrivileges);
  deny(childNPath,getTestGroup().getPrincipal(),readPrivileges);
  assertFalse(testSession.nodeExists(childNPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction6() throws Exception {
  Privilege[] readPrivs=privilegesFromName(Privilege.JCR_READ);
  allow(path,readPrivs);
  deny(path,readPrivs,createGlobRestriction("/*"));
  assertTrue(testSession.nodeExists(path));
  assertFalse(testSession.propertyExists(path + '/' + JcrConstants.JCR_PRIMARYTYPE));
  assertFalse(testSession.nodeExists(childNPath));
  assertFalse(testSession.propertyExists(childPPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDenyGroupAllowUser() throws Exception {
  deny(path,getTestGroup().getPrincipal(),readPrivileges);
  allow(path,testUser.getPrincipal(),readPrivileges);
  assertTrue(testSession.nodeExists(path));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadVersionContentTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetVersion() throws Exception {
  Node testNode=testSession.getNode(versionablePath);
  VersionHistory vh=testNode.getVersionHistory();
  Version version=vh.getVersion(v.getName());
  assertTrue(v.isSame(version));
  assertTrue(vh.isSame(version.getContainingHistory()));
  version=vh.getVersion(v2.getName());
  assertTrue(v2.isSame(version));
  assertTrue(vh.isSame(version.getContainingHistory()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetVersionHistoryNode() throws Exception {
  Node testNode=testSession.getNode(versionablePath);
  String vhPath=vh.getPath();
  String vhUUID=vh.getIdentifier();
  assertTrue(vh.isSame(testNode.getSession().getNode(vhPath)));
  assertTrue(vh.isSame(testNode.getSession().getNodeByIdentifier(vhUUID)));
  assertTrue(vh.isSame(testNode.getSession().getNodeByUUID(vhUUID)));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testAccessVersionHistoryVersionableNodeNotAccessible() throws Exception {
  modify(versionablePath,Privilege.JCR_READ,false);
  assertFalse(testSession.nodeExists(versionablePath));
  try {
    VersionHistory history=(VersionHistory)testSession.getNode(vh.getPath());
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  PathNotFoundException e) {
  }
  try {
    VersionHistory history=(VersionHistory)testSession.getNodeByIdentifier(vh.getIdentifier());
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  ItemNotFoundException e) {
  }
  try {
    VersionHistory history=(VersionHistory)testSession.getNodeByUUID(vh.getUUID());
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  ItemNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetVersionHistoryParentNode() throws Exception {
  String vhParentPath=Text.getRelativeParent(vh.getPath(),1);
  assertFalse(testSession.nodeExists(vhParentPath));
  try {
    testSession.getNode(vhParentPath);
    fail("version storage intermediate node must not be accessible");
  }
 catch (  PathNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testAccessVersionHistoryVersionableNodeRemoved() throws Exception {
  superuser.getNode(versionablePath).remove();
  superuser.save();
  testSession.refresh(false);
  assertTrue(testSession.nodeExists(path));
  assertFalse(testSession.nodeExists(versionablePath));
  VersionHistory history=(VersionHistory)testSession.getNode(vh.getPath());
  history=(VersionHistory)testSession.getNodeByIdentifier(vh.getIdentifier());
  history=(VersionHistory)testSession.getNodeByUUID(vh.getUUID());
  modify(path,Privilege.JCR_READ,false);
  assertFalse(testSession.nodeExists(vh.getPath()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * @since oak
 */
@Test public void testHasVersionContentNodes() throws Exception {
  assertTrue(testSession.nodeExists(v.getPath()));
  assertTrue(testSession.nodeExists(v2.getPath()));
  assertTrue(testSession.nodeExists(vh.getPath()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.ReadWithGlobRestrictionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction2() throws Exception {
  Group group2=getUserManager(superuser).createGroup(generateId("group2_"));
  Group group3=getUserManager(superuser).createGroup(generateId("group3_"));
  superuser.save();
  try {
    Privilege[] readPrivs=privilegesFromName(Privilege.JCR_READ);
    modify(path,getTestGroup().getPrincipal(),readPrivs,true,createGlobRestriction("/*"));
    allow(path,group2.getPrincipal(),readPrivs);
    deny(path,group3.getPrincipal(),readPrivs);
    Set<Principal> principals=new HashSet<Principal>();
    principals.add(getTestGroup().getPrincipal());
    principals.add(group2.getPrincipal());
    principals.add(group3.getPrincipal());
    assertFalse(((JackrabbitAccessControlManager)acMgr).hasPrivileges(path,principals,readPrivs));
    assertFalse(((JackrabbitAccessControlManager)acMgr).hasPrivileges(childNPath,principals,readPrivs));
  }
  finally {
    group2.remove();
    group3.remove();
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction2() throws Exception {
  Node grandchild=superuser.getNode(childNPath).addNode("child");
  String ccPath=grandchild.getPath();
  superuser.save();
  deny(path,readPrivileges);
  assertFalse(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  allow(path,readPrivileges,createGlobRestriction(""));
  assertTrue(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  assertFalse(testSession.propertyExists(childNPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction() throws Exception {
  Node grandchild=superuser.getNode(childNPath).addNode("child");
  String ccPath=grandchild.getPath();
  superuser.save();
  deny(path,readPrivileges);
  assertFalse(canReadNode(testSession,path));
  assertFalse(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  allow(childNPath,readPrivileges,createGlobRestriction(""));
  assertFalse(canReadNode(testSession,path));
  assertTrue(canReadNode(testSession,childNPath));
  assertFalse(canReadNode(testSession,ccPath));
  assertFalse(testSession.propertyExists(childchildPPath));
  assertFalse(testSession.propertyExists(childNPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
  allow(ccPath,readPrivileges);
  assertTrue(canReadNode(testSession,ccPath));
  assertTrue(testSession.propertyExists(ccPath + '/' + JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2412">OAK-2412</a>
 */
@Test public void testEmptyGlobRestriction3() throws Exception {
  Group group1=getTestGroup();
  Group group2=getUserManager(superuser).createGroup(generateId("group2_"));
  group2.addMember(testUser);
  Group group3=getUserManager(superuser).createGroup(generateId("group3_"));
  superuser.save();
  try {
    assertTrue(group1.isDeclaredMember(testUser));
    assertTrue(group2.isDeclaredMember(testUser));
    assertFalse(group3.isDeclaredMember(testUser));
    deny(path,group1.getPrincipal(),readPrivileges);
    modify(path,group1.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    deny(childNPath,group2.getPrincipal(),readPrivileges);
    modify(childNPath,group2.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    deny(childNPath2,group3.getPrincipal(),readPrivileges);
    modify(childNPath2,group3.getPrincipal(),readPrivileges,true,createGlobRestriction(""));
    Session userSession=getHelper().getRepository().login(creds);
    assertTrue(canReadNode(userSession,path));
    assertTrue(canReadNode(userSession,childNPath));
    assertFalse(canReadNode(userSession,childNPath2));
  }
  finally {
    group2.remove();
    group3.remove();
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGlobRestriction5() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,readPrivileges);
  deny(path,readPrivileges,createGlobRestriction("*/anotherpath"));
  allow(a.getPath(),repWritePrivileges);
  String aPath=a.getPath();
  assertTrue(testSession.nodeExists(aPath));
  Node n=testSession.getNode(aPath);
  Node test=testSession.getNode(path);
  assertTrue(test.hasNode("a"));
  Node n2=test.getNode("a");
  assertTrue(n.isSame(n2));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTwoWildCards() throws Exception {
  Node n=superuser.getNode(childNPath);
  Node n100=n.addNode("100");
  Node n110=n100.addNode("110");
  Node n120=n100.addNode("120");
  Node n111=n110.addNode("111");
  Node n112=n110.addNode("112");
  Node n121=n120.addNode("121");
  Node n122=n120.addNode("122");
  deny(childNPath,privilegesFromName(Privilege.JCR_ALL),createGlobRestriction("/*/110/*"));
  superuser.save();
  assertTrue(canReadNode(testSession,n100.getPath()));
  assertTrue(canReadNode(testSession,n110.getPath()));
  assertFalse(canReadNode(testSession,n111.getPath()));
  assertFalse(canReadNode(testSession,n112.getPath()));
  assertTrue(canReadNode(testSession,n120.getPath()));
  assertTrue(canReadNode(testSession,n121.getPath()));
  assertTrue(canReadNode(testSession,n122.getPath()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction6() throws Exception {
  Privilege[] readPrivs=privilegesFromName(Privilege.JCR_READ);
  allow(path,readPrivs);
  deny(path,readPrivs,createGlobRestriction("/*"));
  assertTrue(testSession.nodeExists(path));
  assertFalse(testSession.propertyExists(path + '/' + JcrConstants.JCR_PRIMARYTYPE));
  assertFalse(testSession.nodeExists(childNPath));
  assertFalse(testSession.propertyExists(childPPath));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction3() throws Exception {
  Group group2=getUserManager(superuser).createGroup(generateId("group2_"));
  Group group3=getUserManager(superuser).createGroup(generateId("group3_"));
  superuser.save();
  try {
    Privilege[] readPrivs=privilegesFromName(Privilege.JCR_READ);
    allow(path,group2.getPrincipal(),readPrivs);
    deny(path,group3.getPrincipal(),readPrivs);
    modify(path,getTestGroup().getPrincipal(),readPrivs,true,createGlobRestriction("/*"));
    Set<Principal> principals=new HashSet<Principal>();
    principals.add(getTestGroup().getPrincipal());
    principals.add(group2.getPrincipal());
    principals.add(group3.getPrincipal());
    assertFalse(((JackrabbitAccessControlManager)acMgr).hasPrivileges(path,principals,readPrivs));
    assertTrue(((JackrabbitAccessControlManager)acMgr).hasPrivileges(childNPath,principals,readPrivs));
  }
  finally {
    group2.remove();
    group3.remove();
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGlobRestriction4() throws Exception {
  Node a=superuser.getNode(path).addNode("a");
  allow(path,readPrivileges);
  deny(path,readPrivileges,createGlobRestriction("*/anotherpath"));
  String aPath=a.getPath();
  assertTrue(testSession.nodeExists(aPath));
  Node n=testSession.getNode(aPath);
  Node test=testSession.getNode(path);
  assertTrue(test.hasNode("a"));
  Node n2=test.getNode("a");
  assertTrue(n.isSame(n2));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction() throws Exception {
  deny(path,readPrivileges,createGlobRestriction("*/" + jcrPrimaryType));
  assertTrue(testAcMgr.hasPrivileges(path,readPrivileges));
  assertTrue(testSession.hasPermission(path,javax.jcr.Session.ACTION_READ));
  testSession.getNode(path);
  assertTrue(testAcMgr.hasPrivileges(childNPath,readPrivileges));
  assertTrue(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_READ));
  testSession.getNode(childNPath);
  String propPath=path + '/' + jcrPrimaryType;
  assertFalse(testSession.hasPermission(propPath,javax.jcr.Session.ACTION_READ));
  assertFalse(testSession.propertyExists(propPath));
  propPath=childNPath + '/' + jcrPrimaryType;
  assertFalse(testSession.hasPermission(propPath,javax.jcr.Session.ACTION_READ));
  assertFalse(testSession.propertyExists(propPath));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.SessionMoveTest </h4><pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMoveRemoveSubTreeWithRestriction2() throws Exception {
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(path,privilegesFromName(PrivilegeConstants.JCR_REMOVE_CHILD_NODES),createGlobRestriction("*/" + Text.getName(childNPath)));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testSession.hasPermission(childNPath2,Session.ACTION_ADD_NODE));
  testSession.move(childNPath,childNPath2 + "/dest");
  Node dest=testSession.getNode(childNPath2 + "/dest");
  dest.getNode(nodeName3).remove();
  try {
    testSession.save();
    fail("Removing child node must be denied.");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMoveRemoveSubTreeWithRestriction() throws Exception {
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(path,privilegesFromName(PrivilegeConstants.JCR_REMOVE_NODE),createGlobRestriction("*/" + nodeName3));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testSession.hasPermission(childNPath2,Session.ACTION_ADD_NODE));
  testSession.move(childNPath,childNPath2 + "/dest");
  Node dest=testSession.getNode(childNPath2 + "/dest");
  dest.getNode(nodeName3).remove();
  try {
    testSession.save();
    fail("Removing child node must be denied.");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveAndModifyPropertyAtSource2() throws Exception {
  setupMovePermissions();
  allow(childNPath,privilegesFromName(PrivilegeConstants.REP_ALTER_PROPERTIES));
  testSession.move(nodePath3,siblingDestPath);
  Node n=testSession.getNode(childNPath);
  assertTrue(n.hasProperty(propertyName1));
  n.setProperty(propertyName1,"modified");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveAndRemovePropertyAtSource2() throws Exception {
  setupMovePermissions();
  allow(childNPath,privilegesFromName(PrivilegeConstants.REP_REMOVE_PROPERTIES));
  testSession.move(nodePath3,siblingDestPath);
  Node n=testSession.getNode(childNPath);
  assertTrue(n.hasProperty(propertyName1));
  n.getProperty(propertyName1).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMoveAndRemovePropertyAtSource() throws Exception {
  setupMovePermissions();
  testSession.move(nodePath3,siblingDestPath);
  Node n=testSession.getNode(childNPath);
  assertTrue(n.hasProperty(propertyName1));
  n.getProperty(propertyName1).remove();
  try {
    testSession.save();
    fail("Missing REMOVE_PROPERTY permission.");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMoveAndModifyPropertyAtSource() throws Exception {
  setupMovePermissions();
  testSession.move(nodePath3,siblingDestPath);
  Node n=testSession.getNode(childNPath);
  assertTrue(n.hasProperty(propertyName1));
  n.setProperty(propertyName1,"modified");
  try {
    testSession.save();
    fail("Missing MODIFY_PROPERTY permission.");
  }
 catch (  AccessDeniedException e) {
  }
  allow(childNPath,privilegesFromName(PrivilegeConstants.REP_ALTER_PROPERTIES));
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.UserManagementTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/JCR-3412">JCR-3412 :
     *      UserManager.findAuthorizables() does not work, if session does not have
     *      read access to common root of all user and groups. </a>
 */
@Test public void testFindAuthorizables() throws Exception {
  String home=Text.getRelativeParent(UserConstants.DEFAULT_USER_PATH,1);
  deny(home,privilegesFromName(PrivilegeConstants.JCR_READ));
  allow(getUserManager(superuser).getAuthorizable(testSession.getUserID()).getPath(),privilegesFromName(PrivilegeConstants.JCR_ALL));
  UserManager testUserMgr=getUserManager(testSession);
  Iterator<Authorizable> result=testUserMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
  Set<String> ids=new HashSet<String>();
  while (result.hasNext()) {
    ids.add(result.next().getID());
  }
  assertFalse(ids.isEmpty());
  NodeIterator nodeIterator=testSession.getWorkspace().getQueryManager().createQuery("/jcr:root//element(*,rep:User)",Query.XPATH).execute().getNodes();
  assertTrue(nodeIterator.hasNext());
  while (nodeIterator.hasNext()) {
    String userId=nodeIterator.nextNode().getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString();
    if (!ids.remove(userId)) {
      fail("UserId " + userId + " missing in result set.");
    }
  }
  assertTrue("Result mismatch",ids.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.VersionManagementTest </h4><pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak (DIFF: jr required jcr:versionManagement privilege on the version store)
 */
@Test public void testRemoveVersion3() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  Version v=n.checkin();
  n.checkout();
  n.checkin();
  testSession.refresh(false);
  assertFalse(testAcMgr.hasPrivileges(n.getPath(),versionPrivileges));
  AccessControlList acl=allow(SYSTEM,versionPrivileges);
  try {
    Node testNode=testSession.getNode(n.getPath());
    testNode.getVersionHistory().removeVersion(v.getName());
    fail("Missing jcr:versionManagement privilege -> remove a version must fail.");
  }
 catch (  AccessDeniedException e) {
  }
 finally {
    for (    AccessControlEntry entry : acl.getAccessControlEntries()) {
      if (entry.getPrincipal().equals(testUser.getPrincipal())) {
        acl.removeAccessControlEntry(entry);
      }
    }
    acMgr.setPolicy(SYSTEM,acl);
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddMixVersionable() throws Exception {
  modify(path,REP_WRITE,true);
  modify(path,Privilege.JCR_VERSION_MANAGEMENT,false);
  Node testNode=testSession.getNode(path);
  try {
    createVersionableNode(testNode);
    fail("Test session does not have permission to add mixins -> no version content should be created.");
  }
 catch (  AccessDeniedException e) {
    assertFalse(testNode.isNodeType(mixVersionable));
    assertFalse(testNode.hasProperty("jcr:isCheckedOut"));
    assertFalse(testNode.hasProperty(jcrVersionHistory));
  }
}

</code></pre>

<br>
<pre class="type-2 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Before protected void setUp() throws Exception {
  super.setUp();
  versionPrivileges=privilegesFromName(Privilege.JCR_VERSION_MANAGEMENT);
  assertTrue(!testSession.nodeExists(VERSIONSTORE) || !testAcMgr.hasPrivileges(VERSIONSTORE,versionPrivileges));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionableChildNode2() throws Exception {
  Node testNode=superuser.getNode(path).addNode("n1").addNode("n2").addNode("n3").addNode("jcr:content");
  testNode.addMixin("mix:versionable");
  superuser.save();
  testNode.remove();
  testNode=superuser.getNode(path).getNode("n1").getNode("n2").getNode("n3").addNode("jcr:content");
  testNode.addMixin("mix:versionable");
  superuser.save();
  assertTrue(testNode.isNodeType("mix:versionable"));
  VersionHistory vh=testNode.getVersionHistory();
  Property versionablePath=vh.getProperty(superuser.getWorkspace().getName());
  assertEquals(testNode.getPath(),versionablePath.getString());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testVersionableChildNode() throws Exception {
  Node testNode=superuser.getNode(path).addNode("n1").addNode("n2").addNode("n3").addNode("jcr:content");
  superuser.save();
  testNode.addMixin("mix:versionable");
  superuser.save();
  assertTrue(testNode.isNodeType("mix:versionable"));
  VersionHistory vh=testNode.getVersionHistory();
  Property versionablePath=vh.getProperty(superuser.getWorkspace().getName());
  assertEquals(testNode.getPath(),versionablePath.getString());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testAccessVersionHistoryVersionableNodeRemoved() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  allow(n.getPath(),versionPrivileges);
  n.checkin();
  n.checkout();
  String versionablePath=n.getPath();
  VersionHistory vh=n.getVersionHistory();
  String vhPath=vh.getPath();
  String vhUUID=vh.getIdentifier();
  n.remove();
  superuser.save();
  testSession.refresh(false);
  assertTrue(testSession.nodeExists(path));
  assertFalse(testSession.nodeExists(versionablePath));
  VersionHistory history=(VersionHistory)testSession.getNode(vhPath);
  history=(VersionHistory)testSession.getNodeByIdentifier(vhUUID);
  history=(VersionHistory)testSession.getNodeByUUID(vhUUID);
  modify(path,Privilege.JCR_READ,false);
  assertFalse(testSession.nodeExists(vhPath));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak (DIFF: jr required jcr:versionManagement privilege on the version store)
 */
@Test public void testAccessVersionHistory() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  allow(n.getPath(),versionPrivileges);
  Node testNode=testSession.getNode(n.getPath());
  testNode.checkin();
  testNode.checkout();
  VersionHistory vh=testNode.getVersionHistory();
  String vhPath=vh.getPath();
  String vhUUID=vh.getIdentifier();
  assertTrue(vh.isSame(testNode.getSession().getNode(vhPath)));
  assertTrue(vh.isSame(testNode.getSession().getNodeByIdentifier(vhUUID)));
  assertTrue(vh.isSame(testNode.getSession().getNodeByUUID(vhUUID)));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak (DIFF: jr required jcr:versionManagement privilege on the version store)
 */
@Test public void testAccessVersionHistoryVersionableNodeNotAccessible() throws Exception {
  Node n=createVersionableNode(superuser.getNode(path));
  allow(n.getPath(),versionPrivileges);
  Node testNode=testSession.getNode(n.getPath());
  testNode.checkin();
  testNode.checkout();
  VersionHistory vh=testNode.getVersionHistory();
  String vhPath=vh.getPath();
  String vhUUID=vh.getIdentifier();
  modify(n.getPath(),Privilege.JCR_READ,false);
  assertFalse(testSession.nodeExists(n.getPath()));
  try {
    VersionHistory history=(VersionHistory)testSession.getNode(vhPath);
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  PathNotFoundException e) {
  }
  try {
    VersionHistory history=(VersionHistory)testSession.getNodeByIdentifier(vhUUID);
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  ItemNotFoundException e) {
  }
  try {
    VersionHistory history=(VersionHistory)testSession.getNodeByUUID(vhUUID);
    fail("Access to version history should be denied if versionable node is not accessible");
  }
 catch (  ItemNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckInCheckout() throws Exception {
  modify(path,REP_WRITE,true);
  modify(path,Privilege.JCR_VERSION_MANAGEMENT,false);
  Node n=createVersionableNode(superuser.getNode(path));
  try {
    testSession.refresh(false);
    Node testNode=testSession.getNode(n.getPath());
    testNode.checkin();
    fail("Missing jcr:versionManagement privilege -> checkin/checkout must fail.");
  }
 catch (  AccessDeniedException e) {
    Property p=n.getProperty("jcr:isCheckedOut");
    assertFalse(p.isModified());
    assertTrue(n.getProperty("jcr:isCheckedOut").getValue().getBoolean());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.VersionTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNodeIsCheckedOut() throws RepositoryException {
  Session s=repository.login(new GuestCredentials());
  sessions.add(s);
  assertFalse(s.nodeExists("/"));
  assertTrue(s.nodeExists("/testNode"));
  assertTrue(s.getWorkspace().getVersionManager().isCheckedOut("/testNode"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.WritePropertyTest </h4><pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveProperty() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{"rep:removeProperties"});
  allow(path,privileges);
  assertHasPrivilege(path,Privilege.JCR_MODIFY_PROPERTIES,false);
  assertHasPrivilege(path,"rep:addProperties",false);
  assertHasPrivilege(path,"rep:removeProperties",true);
  assertHasPrivilege(path,"rep:alterProperties",false);
  String propertyPath=path + "/newProperty";
  assertFalse(testSession.hasPermission(propertyPath,Session.ACTION_SET_PROPERTY));
  Node testN=testSession.getNode(path);
  try {
    testN.setProperty("newProperty","value");
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
    testSession.refresh(false);
  }
  superuser.getNode(path).setProperty("newProperty","value");
  superuser.save();
  testSession.refresh(false);
  assertFalse(testSession.hasPermission(propertyPath,Session.ACTION_SET_PROPERTY));
  assertTrue(testSession.hasPermission(propertyPath,Session.ACTION_REMOVE));
  try {
    testN.setProperty("newProperty","modified");
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
  }
  try {
    testN.getProperty("newProperty").setValue("modified");
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
  }
  testN.getProperty("newProperty").remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyProperty() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{"rep:alterProperties"});
  allow(path,privileges);
  assertHasPrivilege(path,Privilege.JCR_MODIFY_PROPERTIES,false);
  assertHasPrivilege(path,"rep:addProperties",false);
  assertHasPrivilege(path,"rep:removeProperties",false);
  assertHasPrivilege(path,"rep:alterProperties",true);
  String propertyPath=path + "/newProperty";
  assertFalse(testSession.hasPermission(propertyPath,Session.ACTION_SET_PROPERTY));
  Node testN=testSession.getNode(path);
  try {
    testN.setProperty("newProperty","value");
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
    testSession.refresh(false);
  }
  superuser.getNode(path).setProperty("newProperty","value");
  superuser.save();
  testSession.refresh(false);
  assertTrue(testSession.hasPermission(propertyPath,Session.ACTION_SET_PROPERTY));
  assertFalse(testSession.hasPermission(propertyPath,Session.ACTION_REMOVE));
  testN.setProperty("newProperty","modified");
  testSession.save();
  testN.getProperty("newProperty").setValue("modified2");
  testSession.save();
  try {
    testN.setProperty("newProperty",(String)null);
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
    testSession.refresh(false);
  }
  try {
    testN.getProperty("newProperty").remove();
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
    testSession.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddProperty() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{"rep:addProperties"});
  allow(path,privileges);
  assertHasPrivilege(path,Privilege.JCR_MODIFY_PROPERTIES,false);
  assertHasPrivilege(path,"rep:addProperties",true);
  assertHasPrivilege(path,"rep:removeProperties",false);
  assertHasPrivilege(path,"rep:alterProperties",false);
  String propertyPath=path + "/newProperty";
  assertTrue(testSession.hasPermission(propertyPath,Session.ACTION_SET_PROPERTY));
  Node testN=testSession.getNode(path);
  testN.setProperty("newProperty","value");
  testSession.save();
  assertFalse(testSession.hasPermission(propertyPath,Session.ACTION_SET_PROPERTY));
  assertFalse(testSession.hasPermission(propertyPath,Session.ACTION_REMOVE));
  try {
    testN.setProperty("newProperty","modified");
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
  }
  try {
    testN.getProperty("newProperty").setValue("modified");
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
  }
  try {
    testN.setProperty("newProperty",(String)null);
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
    testSession.refresh(false);
  }
  try {
    testN.getProperty("newProperty").remove();
    testSession.save();
    fail();
  }
 catch (  AccessDeniedException e) {
    testSession.refresh(false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.WriteRestrictionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction4() throws Exception {
  Privilege[] addNode=privilegesFromName(Privilege.JCR_ADD_CHILD_NODES);
  allow(path,repWritePrivileges,createGlobRestriction("/*" + nodeName3));
  deny(childNPath2,addNode);
  assertFalse(testAcMgr.hasPrivileges(path,repWritePrivileges));
  assertFalse(testSession.hasPermission(path,javax.jcr.Session.ACTION_REMOVE));
  assertFalse(testAcMgr.hasPrivileges(childNPath,repWritePrivileges));
  assertFalse(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_REMOVE));
  assertFalse(testAcMgr.hasPrivileges(childNPath2,repWritePrivileges));
  assertTrue(testAcMgr.hasPrivileges(nodePath3,repWritePrivileges));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction2() throws Exception {
  Privilege[] addNode=privilegesFromName(Privilege.JCR_ADD_CHILD_NODES);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  allow(path,repWritePrivileges,createGlobRestriction("/*/" + nodeName3));
  assertFalse(testAcMgr.hasPrivileges(path,repWritePrivileges));
  assertFalse(testAcMgr.hasPrivileges(path,rmNode));
  assertFalse(testAcMgr.hasPrivileges(childNPath,addNode));
  assertFalse(testAcMgr.hasPrivileges(childNPath2,repWritePrivileges));
  assertTrue(testAcMgr.hasPrivileges(nodePath3,repWritePrivileges));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction() throws Exception {
  String writeActions=getActions(Session.ACTION_ADD_NODE,Session.ACTION_REMOVE,Session.ACTION_SET_PROPERTY);
  allow(path,repWritePrivileges,createGlobRestriction("/*" + nodeName3));
  assertFalse(testAcMgr.hasPrivileges(path,repWritePrivileges));
  assertFalse(testSession.hasPermission(path,javax.jcr.Session.ACTION_SET_PROPERTY));
  assertFalse(testAcMgr.hasPrivileges(childNPath,repWritePrivileges));
  assertFalse(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_SET_PROPERTY));
  assertTrue(testAcMgr.hasPrivileges(childNPath2,repWritePrivileges));
  assertTrue(testSession.hasPermission(childNPath2,Session.ACTION_SET_PROPERTY));
  assertFalse(testSession.hasPermission(childNPath2,writeActions));
  assertTrue(testAcMgr.hasPrivileges(nodePath3,repWritePrivileges));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGlobRestriction3() throws Exception {
  Privilege[] addNode=privilegesFromName(Privilege.JCR_ADD_CHILD_NODES);
  allow(path,repWritePrivileges,createGlobRestriction("/*/" + nodeName3));
  allow(path,addNode);
  assertFalse(testAcMgr.hasPrivileges(path,repWritePrivileges));
  assertTrue(testAcMgr.hasPrivileges(path,addNode));
  assertFalse(testAcMgr.hasPrivileges(childNPath,repWritePrivileges));
  assertTrue(testAcMgr.hasPrivileges(childNPath,addNode));
  assertFalse(testAcMgr.hasPrivileges(childNPath2,repWritePrivileges));
  assertTrue(testAcMgr.hasPrivileges(nodePath3,repWritePrivileges));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.WriteTest </h4><pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove5() throws Exception {
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  allow(childNPath,rmNode);
  assertFalse(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  try {
    testSession.getNode(childNPath).remove();
    testSession.save();
    fail("Removal must fail");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * the ADD_CHILD_NODES privileges assigned on a node to a specific principal
 * grants the corresponding user the permission to add nodes below the
 * target node but not 'at' the target node.
 * @throws Exception If an error occurs.
 */
@Test public void testAddChildNodePrivilege() throws Exception {
  Privilege[] privileges=privilegesFromName(Privilege.JCR_ADD_CHILD_NODES);
  allow(path,privileges);
  assertFalse(testSession.hasPermission(path,Session.ACTION_ADD_NODE));
  assertTrue(testSession.hasPermission(path + "/anychild",Session.ACTION_ADD_NODE));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_ADD_NODE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since OAK 1.0 : removal of node doesn't require remove permission on
 * all child items (diff to jackrabbit core)
 */
@Test public void testRemoveNodeWithNonRemovableProperty() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  subtree.setProperty("property","visibleButNotRemovable");
  superuser.save();
  String subtreePath=subtree.getPath();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(subtreePath,testUser.getPrincipal(),privilegesFromName(PrivilegeConstants.REP_REMOVE_PROPERTIES));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testSession.nodeExists(subtreePath));
  assertTrue(testSession.propertyExists(subtreePath + "/property"));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove6() throws Exception {
  Privilege[] privs=privilegesFromNames(new String[]{Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_REMOVE_NODE});
  allow(path,privs);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  deny(childNPath,rmNode);
  assertFalse(testSession.hasPermission(path,Session.ACTION_REMOVE));
  assertFalse(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testAcMgr.hasPrivileges(childNPath,privilegesFromNames(new String[]{Privilege.JCR_READ,Privilege.JCR_REMOVE_CHILD_NODES})));
  assertFalse(testAcMgr.hasPrivileges(childNPath,privilegesFromName(Privilege.JCR_REMOVE_NODE)));
  try {
    testSession.getNode(childNPath).remove();
    testSession.save();
    fail("Removal must fail");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMixedUserGroupPermissions() throws Exception {
  deny(path,testUser.getPrincipal(),modPropPrivileges);
  allow(path,testGroup.getPrincipal(),modPropPrivileges);
  assertFalse(testSession.hasPermission(path,Session.ACTION_SET_PROPERTY));
  assertFalse(testAcMgr.hasPrivileges(path,modPropPrivileges));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSingleDenyAfterAllAllowed() throws Exception {
  Privilege[] allPrivileges=privilegesFromName(Privilege.JCR_ALL);
  allow(path,allPrivileges);
  Privilege[] lockPrivileges=privilegesFromName(Privilege.JCR_LOCK_MANAGEMENT);
  deny(path,lockPrivileges);
  assertFalse(testAcMgr.hasPrivileges(path,allPrivileges));
  assertFalse(testAcMgr.hasPrivileges(path,lockPrivileges));
  List<Privilege> remainingprivs=new ArrayList<Privilege>(Arrays.asList(allPrivileges[0].getAggregatePrivileges()));
  remainingprivs.remove(lockPrivileges[0]);
  assertTrue(testAcMgr.hasPrivileges(path,remainingprivs.toArray(new Privilege[remainingprivs.size()])));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemove3() throws Exception {
  Privilege[] privs=privilegesFromNames(new String[]{Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_REMOVE_NODE});
  allow(path,privs);
  assertFalse(testSession.hasPermission(path,javax.jcr.Session.ACTION_REMOVE));
  assertTrue(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_REMOVE));
  assertTrue(testAcMgr.hasPrivileges(path,privs));
  assertTrue(testAcMgr.hasPrivileges(childNPath,privs));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testWriteIfReadingParentIsDenied() throws Exception {
  deny(path,testUser.getPrincipal(),readWritePrivileges);
  allow(childNPath,testUser.getPrincipal(),readWritePrivileges);
  assertFalse(testSession.nodeExists(path));
  assertTrue(testSession.nodeExists(childNPath));
  Node n=testSession.getNode(childNPath);
  n.addNode("someChild");
  n.save();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemove4() throws Exception {
  Privilege[] rmChildNodes=privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  allow(path,rmChildNodes);
  allow(childNPath,rmNode);
  assertFalse(testSession.hasPermission(path,javax.jcr.Session.ACTION_REMOVE));
  assertTrue(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_REMOVE));
  assertTrue(testAcMgr.hasPrivileges(childNPath,new Privilege[]{rmChildNodes[0],rmNode[0]}));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/JCR-2420">JCR-2420</a>
 */
@Test public void testRemovalJCR242() throws Exception {
  Privilege[] allPriv=privilegesFromNames(new String[]{Privilege.JCR_ALL});
  allow(path,testUser.getPrincipal(),allPriv);
  allow(childNPath,testUser.getPrincipal(),allPriv);
  AccessControlManager acMgr=testSession.getAccessControlManager();
  assertTrue(acMgr.hasPrivileges(path,allPriv));
  assertTrue(acMgr.hasPrivileges(childNPath,allPriv));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  Node child=testSession.getNode(childNPath);
  child.remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveNodeWithPolicy() throws Exception {
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  allow(childNPath,testUser.getPrincipal(),readWritePrivileges);
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  Node n=testSession.getNode(childNPath);
  n.remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove51() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  allow(childNPath,rmNode);
  String subtreePath=subtree.getPath();
  assertFalse(testSession.hasPermission(subtreePath,Session.ACTION_REMOVE));
  try {
    testSession.getNode(subtreePath).remove();
    testSession.save();
    fail("Removal must fail");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGroupPermissions() throws Exception {
  allow(path,testGroup.getPrincipal(),modPropPrivileges);
  String actions=getActions(Session.ACTION_SET_PROPERTY,Session.ACTION_READ);
  assertTrue(testSession.hasPermission(path,actions));
  assertTrue(testAcMgr.hasPrivileges(path,modPropPrivileges));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemove9() throws Exception {
  Privilege[] rmChildNodes=privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  allow(path,rmChildNodes);
  allow(childNPath,rmNode);
  String policyPath=childNPath + "/rep:policy";
  assertFalse(testSession.hasPermission(policyPath,Session.ACTION_REMOVE));
  assertHasPrivileges(policyPath,new Privilege[]{rmChildNodes[0],rmNode[0]},false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * @since OAK 1.0 : removal of node doesn't require remove permission on
 * all child nodes (diff to jackrabbit core)
 */
@Test public void testRemoveNodeWithInvisibleNonRemovableChild() throws Exception {
  Node invisible=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(invisible.getPath(),testUser.getPrincipal(),readWritePrivileges);
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove61() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  Privilege[] privs=privilegesFromNames(new String[]{Privilege.JCR_REMOVE_CHILD_NODES,Privilege.JCR_REMOVE_NODE});
  allow(path,privs);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  deny(childNPath,rmNode);
  String subtreePath=subtree.getPath();
  assertFalse(testSession.hasPermission(subtreePath,Session.ACTION_REMOVE));
  assertTrue(testAcMgr.hasPrivileges(subtreePath,privilegesFromNames(new String[]{Privilege.JCR_READ,Privilege.JCR_REMOVE_CHILD_NODES})));
  assertFalse(testAcMgr.hasPrivileges(subtreePath,privilegesFromName(Privilege.JCR_REMOVE_NODE)));
  try {
    testSession.getNode(subtreePath).remove();
    testSession.save();
    fail("Removal must fail");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemove2() throws Exception {
  Privilege[] rmChildNodes=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  allow(path,rmChildNodes);
  assertFalse(testSession.hasPermission(path,javax.jcr.Session.ACTION_REMOVE));
  assertFalse(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_REMOVE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveNodeWithInvisibleProperty() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  subtree.setProperty("invisible",14);
  superuser.save();
  String subtreePath=subtree.getPath();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(subtreePath,testUser.getPrincipal(),privilegesFromName(PrivilegeConstants.REP_READ_PROPERTIES));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testSession.nodeExists(subtreePath));
  assertFalse(testSession.propertyExists(subtreePath + "/invisible"));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveNodeWithInvisibleChild() throws Exception {
  Node invisible=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(invisible.getPath(),testUser.getPrincipal(),readPrivileges);
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddChildNodeAndSetProperty() throws Exception {
  Privilege[] privileges=privilegesFromNames(new String[]{Privilege.JCR_ADD_CHILD_NODES,Privilege.JCR_MODIFY_PROPERTIES});
  allow(path,privileges);
  String nonExChildPath=path + "/anyItem";
  String actions=getActions(Session.ACTION_READ,Session.ACTION_ADD_NODE,Session.ACTION_SET_PROPERTY);
  assertTrue(testSession.hasPermission(nonExChildPath,actions));
  assertFalse(testSession.hasPermission(nonExChildPath,Session.ACTION_REMOVE));
  Node testN=testSession.getNode(path);
  testN.addNode(nodeName4);
  testSession.save();
  testSession.getProperty(childPPath).remove();
  testSession.save();
  testN.setProperty(Text.getName(childPPath),"othervalue");
  testSession.save();
  try {
    testSession.getNode(childNPath).remove();
    testSession.save();
    fail("test-user is not allowed to remove a node below " + path);
  }
 catch (  AccessDeniedException e) {
  }
  assertTrue(testSession.hasPermission(path,Session.ACTION_READ));
  assertFalse(testSession.hasPermission(path,getActions(Session.ACTION_ADD_NODE,Session.ACTION_SET_PROPERTY,Session.ACTION_REMOVE)));
  assertReadOnly(siblingPath);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since OAK 1.0 : removal of node doesn't require remove permission on
 * all child items (diff to jackrabbit core)
 */
@Test public void testRemoveNodeWithInvisibleNonRemovableProperty() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  subtree.setProperty("invisible",14);
  superuser.save();
  String subtreePath=subtree.getPath();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(subtreePath,testUser.getPrincipal(),privilegesFromNames(new String[]{PrivilegeConstants.REP_READ_PROPERTIES,PrivilegeConstants.REP_REMOVE_PROPERTIES}));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  assertTrue(testSession.nodeExists(subtreePath));
  assertFalse(testSession.propertyExists(subtreePath + "/invisible"));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemove71() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  Privilege[] rmChildNodes=privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  deny(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES));
  allow(childNPath,rmNode);
  String subtreePath=subtree.getPath();
  assertFalse(testSession.hasPermission(subtreePath,Session.ACTION_REMOVE));
  allow(childNPath,rmChildNodes);
  assertTrue(testSession.hasPermission(subtreePath,javax.jcr.Session.ACTION_REMOVE));
  assertTrue(testAcMgr.hasPrivileges(subtreePath,new Privilege[]{rmChildNodes[0],rmNode[0]}));
  testSession.getNode(subtreePath).remove();
  superuser.save();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * @since OAK 1.0 : removal of node doesn't require remove permission on
 * all child nodes (diff to jackrabbit core)
 */
@Test public void testRemoveNodeWithNonRemovableChild() throws Exception {
  Node subtree=superuser.getNode(childNPath).addNode(nodeName3);
  superuser.save();
  allow(path,testUser.getPrincipal(),readWritePrivileges);
  deny(subtree.getPath(),testUser.getPrincipal(),repWritePrivileges);
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  testSession.getNode(childNPath).remove();
  testSession.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove7() throws Exception {
  Privilege[] rmChildNodes=privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES);
  Privilege[] rmNode=privilegesFromName(Privilege.JCR_REMOVE_NODE);
  deny(path,privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES));
  allow(childNPath,rmNode);
  assertFalse(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  allow(childNPath,rmChildNodes);
  assertFalse(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_REMOVE));
  assertTrue(testAcMgr.hasPrivileges(childNPath,new Privilege[]{rmChildNodes[0],rmNode[0]}));
  try {
    testSession.getNode(childNPath).remove();
    testSession.save();
    fail("Removal must fail");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveIfReadingParentIsDenied() throws Exception {
  deny(path,testUser.getPrincipal(),readPrivileges);
  allow(path,testUser.getPrincipal(),repWritePrivileges);
  allow(childNPath,testUser.getPrincipal(),readWritePrivileges);
  assertFalse(testSession.nodeExists(path));
  assertTrue(testSession.nodeExists(childNPath));
  assertTrue(testSession.hasPermission(childNPath,Session.ACTION_REMOVE));
  Node n=testSession.getNode(childNPath);
  n.remove();
  superuser.save();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemove() throws Exception {
  Privilege[] rmChildNodes=privilegesFromName(Privilege.JCR_REMOVE_CHILD_NODES);
  allow(path,rmChildNodes);
  assertFalse(testSession.hasPermission(path,javax.jcr.Session.ACTION_REMOVE));
  assertFalse(testSession.hasPermission(childNPath,javax.jcr.Session.ACTION_REMOVE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.authorization.WriteWithCustomPrivilege </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testWriteAndCustomPrivilege() throws Exception {
  Privilege[] privs=privilegesFromNames(new String[]{Privilege.JCR_VERSION_MANAGEMENT,Privilege.JCR_LOCK_MANAGEMENT,"replicate","rep:write"});
  allow(path,testGroup.getPrincipal(),privs);
  assertTrue(testAcMgr.hasPrivileges(path,privilegesFromName("replicate")));
  assertTrue(testSession.hasPermission(path + "/newNode",Session.ACTION_ADD_NODE));
  assertTrue(testSession.hasPermission(childPPath,Session.ACTION_SET_PROPERTY));
  assertTrue(testSession.hasPermission(path + "/newProperty",Session.ACTION_SET_PROPERTY));
  assertTrue(testSession.hasPermission(path + "/newProperty",Permissions.getString(Permissions.ADD_PROPERTY)));
  testSession.getNode(path).setProperty("newProperty","value");
  testSession.save();
  deny(path,testUser.getPrincipal(),privilegesFromName("replicate"));
  assertFalse(testAcMgr.hasPrivileges(path,privilegesFromName("replicate")));
  assertTrue(testSession.hasPermission(childPPath,Session.ACTION_SET_PROPERTY));
  assertTrue(testSession.hasPermission(path + "/newProperty2",Session.ACTION_SET_PROPERTY));
  assertTrue(testSession.hasPermission(path + "/newProperty2",Permissions.getString(Permissions.ADD_PROPERTY)));
  testSession.getNode(path).setProperty("newProperty2","value");
  testSession.save();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testWriteAndCustomPrivilege2() throws Exception {
  Privilege[] privs=privilegesFromNames(new String[]{Privilege.JCR_VERSION_MANAGEMENT,Privilege.JCR_LOCK_MANAGEMENT,"replicate","rep:write"});
  allow(path,testGroup.getPrincipal(),privs);
  assertTrue(testAcMgr.hasPrivileges(path,privilegesFromName("replicate")));
  assertTrue(testSession.hasPermission(path + "/newNode",Session.ACTION_ADD_NODE));
  testSession.getNode(path).addNode("newNode");
  testSession.save();
  deny(path,testUser.getPrincipal(),privilegesFromName("replicate"));
  assertFalse(testAcMgr.hasPrivileges(path,privilegesFromName("replicate")));
  assertTrue(testSession.hasPermission(path + "/newNode2",Session.ACTION_ADD_NODE));
  testSession.getNode(path).addNode("newNode2");
  testSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.principal.PrincipalManagerTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetEveryone(){
  Principal principal=principalMgr.getEveryone();
  assertTrue(principal != null);
  assertTrue(isGroup(principal));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindPrincipal(){
  for (  Principal pcpl : adminPrincipals) {
    if (pcpl.equals(everyone)) {
      continue;
    }
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
    PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName());
    assertTrue("findPrincipals does not find principal with filter '" + pcpl.getName() + '\'',it.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetGroupPrincipals(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    assertTrue(isGroup(p));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindPrincipalByTypeAll(){
  for (  Principal pcpl : adminPrincipals) {
    if (pcpl.equals(everyone)) {
      continue;
    }
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
    PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName(),PrincipalManager.SEARCH_TYPE_ALL);
    PrincipalIterator it2=principalMgr.findPrincipals(pcpl.getName());
    assertTrue("Principal " + pcpl.getName() + " not found",it.hasNext());
    assertTrue("Principal " + pcpl.getName() + " not found",it2.hasNext());
    assertTrue(it.getSize() == it2.getSize());
    Set<Principal> s1=new HashSet<Principal>();
    Set<Principal> s2=new HashSet<Principal>();
    while (it.hasNext() && it2.hasNext()) {
      s1.add(it.nextPrincipal());
      s2.add(it2.nextPrincipal());
    }
    assertEquals(s1,s2);
    assertFalse(it.hasNext() && it2.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembers(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.equals(principalMgr.getEveryone())) {
      continue;
    }
    if (isGroup(p)) {
      Enumeration<? extends Principal> en=((java.security.acl.Group)p).members();
      while (en.hasMoreElements()) {
        Principal memb=en.nextElement();
        assertTrue(principalMgr.hasPrincipal(memb.getName()));
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindPrincipalByType(){
  for (  Principal pcpl : adminPrincipals) {
    if (pcpl.equals(everyone)) {
      continue;
    }
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
    if (isGroup(pcpl)) {
      PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName(),PrincipalManager.SEARCH_TYPE_GROUP);
      assertTrue("findPrincipals does not find principal with filter " + pcpl.getName(),it.hasNext());
    }
 else {
      PrincipalIterator it=principalMgr.findPrincipals(pcpl.getName(),PrincipalManager.SEARCH_TYPE_NOT_GROUP);
      assertTrue("findPrincipals does not find principal with filter '" + pcpl.getName() + "' and type "+ PrincipalManager.SEARCH_TYPE_NOT_GROUP,it.hasNext());
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEveryoneGroupMembership(){
  Principal everyone=EveryonePrincipal.getInstance();
  for (PrincipalIterator membership=principalMgr.getGroupMembership(everyone); membership.hasNext(); ) {
    Principal gr=membership.nextPrincipal();
    assertTrue(isGroup(gr));
    if (gr.equals(everyone)) {
      fail("Everyone must never be a member of the EveryOne group.");
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrincipals(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_NOT_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    assertFalse(isGroup(p));
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAllPrincipals(){
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    assertTrue(principalMgr.hasPrincipal(p.getName()));
    assertEquals(principalMgr.getPrincipal(p.getName()),p);
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testReadOnlyIsEveryOne() throws Exception {
  Session s=getHelper().getReadOnlySession();
  try {
    Principal[] pcpls=getPrincipals(getHelper().getReadOnlyCredentials());
    for (    Principal pcpl : pcpls) {
      if (!(pcpl.equals(everyone))) {
        assertTrue(everyone.isMember(pcpl));
      }
    }
  }
  finally {
    s.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindEveryone(){
  Principal everyone=principalMgr.getEveryone();
  assertTrue(principalMgr.hasPrincipal(everyone.getName()));
  boolean containedInResult=false;
  PrincipalIterator it=principalMgr.findPrincipals(everyone.getName());
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.getName().equals(everyone.getName())) {
      containedInResult=true;
    }
  }
  assertTrue(containedInResult);
  containedInResult=false;
  it=principalMgr.findPrincipals(everyone.getName(),PrincipalManager.SEARCH_TYPE_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.getName().equals(everyone.getName())) {
      containedInResult=true;
    }
  }
  assertTrue(containedInResult);
  containedInResult=false;
  it=principalMgr.findPrincipals(everyone.getName(),PrincipalManager.SEARCH_TYPE_NOT_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.getName().equals(everyone.getName())) {
      containedInResult=true;
    }
  }
  assertFalse(containedInResult);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMembersConsistentWithMembership(){
  Principal everyone=principalMgr.getEveryone();
  PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_GROUP);
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (p.equals(everyone)) {
      continue;
    }
    assertTrue(isGroup(p));
    Enumeration<? extends Principal> members=((java.security.acl.Group)p).members();
    while (members.hasMoreElements()) {
      Principal memb=members.nextElement();
      Principal group=null;
      PrincipalIterator mship=principalMgr.getGroupMembership(memb);
      while (mship.hasNext() && group == null) {
        Principal gr=mship.nextPrincipal();
        if (p.equals(gr)) {
          group=gr;
        }
      }
      assertNotNull("Group member " + memb.getName() + "does not reveal group upon getGroupMembership",p.getName());
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembers2() throws Exception {
  Authorizable gr=null;
  try {
    gr=((JackrabbitSession)superuser).getUserManager().createGroup(getClass().getName());
    superuser.save();
    PrincipalIterator it=principalMgr.getPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
    while (it.hasNext()) {
      Principal p=it.nextPrincipal();
      if (p.equals(principalMgr.getEveryone())) {
        continue;
      }
      if (isGroup(p)) {
        Enumeration<? extends Principal> en=((java.security.acl.Group)p).members();
        while (en.hasMoreElements()) {
          Principal memb=en.nextElement();
          assertTrue(principalMgr.hasPrincipal(memb.getName()));
        }
      }
    }
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrincipal(){
  assertTrue(principalMgr.hasPrincipal(everyone.getName()));
  for (  Principal pcpl : adminPrincipals) {
    assertTrue(principalMgr.hasPrincipal(pcpl.getName()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testGetEveryoneByName(){
  assertTrue(principalMgr.hasPrincipal(EveryonePrincipal.NAME));
  assertNotNull(principalMgr.getPrincipal(EveryonePrincipal.NAME));
  assertEquals(EveryonePrincipal.getInstance(),principalMgr.getPrincipal(EveryonePrincipal.NAME));
}

</code></pre>

<br>
<pre class="type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testSuperUserIsEveryOne(){
  for (  Principal pcpl : adminPrincipals) {
    if (!(pcpl.equals(everyone))) {
      assertTrue(everyone.isMember(pcpl));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.privilege.PrivilegeManagerTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegeFromName() throws AccessControlException, RepositoryException {
  Privilege p=privilegeManager.getPrivilege(Privilege.JCR_VERSION_MANAGEMENT);
  assertTrue(p != null);
  assertEquals(PrivilegeConstants.JCR_VERSION_MANAGEMENT,p.getName());
  assertFalse(p.isAggregate());
  p=privilegeManager.getPrivilege(Privilege.JCR_WRITE);
  assertTrue(p != null);
  assertEquals(PrivilegeConstants.JCR_WRITE,p.getName());
  assertTrue(p.isAggregate());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testJcrAll() throws RepositoryException {
  Privilege all=privilegeManager.getPrivilege(Privilege.JCR_ALL);
  assertPrivilege(all,"jcr:all",true,false);
  List<Privilege> decl=Arrays.asList(all.getDeclaredAggregatePrivileges());
  List<Privilege> aggr=new ArrayList<Privilege>(Arrays.asList(all.getAggregatePrivileges()));
  assertFalse(decl.contains(all));
  assertFalse(aggr.contains(all));
  assertTrue(decl.containsAll(aggr));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_READ)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_ADD_CHILD_NODES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_REMOVE_CHILD_NODES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_MODIFY_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_REMOVE_NODE)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_READ_ACCESS_CONTROL)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_MODIFY_ACCESS_CONTROL)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_LIFECYCLE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_LOCK_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_NODE_TYPE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_RETENTION_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_VERSION_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(Privilege.JCR_WRITE)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_WRITE)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_READ_NODES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_READ_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_ADD_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_ALTER_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_REMOVE_PROPERTIES)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.JCR_NODE_TYPE_DEFINITION_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.JCR_WORKSPACE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_PRIVILEGE_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_USER_MANAGEMENT)));
  assertTrue(aggr.remove(privilegeManager.getPrivilege(PrivilegeConstants.REP_INDEX_DEFINITION_MANAGEMENT)));
  assertTrue(aggr.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetRegisteredPrivileges() throws RepositoryException {
  Privilege[] registered=privilegeManager.getRegisteredPrivileges();
  Set<Privilege> set=new HashSet<Privilege>();
  Privilege all=privilegeManager.getPrivilege(Privilege.JCR_ALL);
  set.add(all);
  set.addAll(Arrays.asList(all.getAggregatePrivileges()));
  for (  Privilege p : registered) {
    assertTrue(p.getName(),set.remove(p));
  }
  assertTrue(set.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.privilege.PrivilegeRegistrationTest </h4><pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testRegisterPrivilegeWithPendingChanges() throws RepositoryException {
  try {
    session.getRootNode().addNode("test");
    assertTrue(session.hasPendingChanges());
    privilegeManager.registerPrivilege("new",true,new String[0]);
    fail("Privileges may not be registered while there are pending changes.");
  }
 catch (  InvalidItemStateException e) {
  }
 finally {
    superuser.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testCustomPrivilegeVisibleAfterRefresh() throws RepositoryException {
  Session s2=getAdminSession();
  PrivilegeManager pm=getPrivilegeManager(s2);
  try {
    boolean isAbstract=false;
    String privName="testCustomPrivilegeVisibleAfterRefresh";
    privilegeManager.registerPrivilege(privName,isAbstract,new String[0]);
    try {
      Privilege priv=pm.getPrivilege(privName);
      fail("Custom privilege will show up after Session#refresh()");
    }
 catch (    AccessControlException e) {
    }
    s2.refresh(true);
    Privilege priv=pm.getPrivilege(privName);
    assertEquals(privName,priv.getName());
    assertEquals(isAbstract,priv.isAbstract());
    assertFalse(priv.isAggregate());
  }
  finally {
    s2.logout();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2015">OAK-2015</a>
 */
@Test public void testJcrAllWithCustomPrivileges() throws Exception {
  Node testNode=session.getRootNode().addNode("test");
  String testPath=testNode.getPath();
  AccessControlUtils.grantAllToEveryone(session,testPath);
  session.save();
  JackrabbitAccessControlManager acMgr=(JackrabbitAccessControlManager)session.getAccessControlManager();
  Privilege[] allPrivileges=AccessControlUtils.privilegesFromNames(session,Privilege.JCR_ALL);
  Set<Principal> principalSet=ImmutableSet.<Principal>of(EveryonePrincipal.getInstance());
  assertTrue(acMgr.hasPrivileges(testPath,principalSet,allPrivileges));
  privilegeManager.registerPrivilege("customPriv",false,null);
  assertTrue(acMgr.hasPrivileges(testPath,principalSet,allPrivileges));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterPrivilegeAggregatingJcrAll() throws Exception {
  privilegeManager.registerPrivilege("customPriv",false,null);
  try {
    privilegeManager.registerPrivilege("customPriv2",false,new String[]{"customPriv",Privilege.JCR_ALL});
    fail("Aggregation containing jcr:all is invalid.");
  }
 catch (  RepositoryException e) {
    Throwable cause=e.getCause();
    assertTrue(cause instanceof CommitFailedException);
    assertEquals(53,((CommitFailedException)cause).getCode());
  }
 finally {
    superuser.refresh(false);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since oak
 */
@Test public void testRegisterCustomPrivilegesVisibleInContent() throws RepositoryException {
  Workspace workspace=session.getWorkspace();
  workspace.getNamespaceRegistry().registerNamespace("test","http://www.apache.org/jackrabbit/test");
  Map<String,String[]> newCustomPrivs=new HashMap<String,String[]>();
  newCustomPrivs.put("new",new String[0]);
  newCustomPrivs.put("test:new",new String[0]);
  for (  String name : newCustomPrivs.keySet()) {
    boolean isAbstract=true;
    String[] aggrNames=newCustomPrivs.get(name);
    Privilege registered=privilegeManager.registerPrivilege(name,isAbstract,aggrNames);
    Node privilegeRoot=session.getNode(PrivilegeConstants.PRIVILEGES_PATH);
    assertTrue(privilegeRoot.hasNode(name));
    Node privNode=privilegeRoot.getNode(name);
    assertTrue(privNode.getProperty(PrivilegeConstants.REP_IS_ABSTRACT).getBoolean());
    assertFalse(privNode.hasProperty(PrivilegeConstants.REP_AGGREGATES));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterCustomPrivileges() throws RepositoryException {
  Workspace workspace=session.getWorkspace();
  workspace.getNamespaceRegistry().registerNamespace("test","http://www.apache.org/jackrabbit/test");
  Map<String,String[]> newCustomPrivs=new HashMap<String,String[]>();
  newCustomPrivs.put("new",new String[0]);
  newCustomPrivs.put("test:new",new String[0]);
  for (  String name : newCustomPrivs.keySet()) {
    boolean isAbstract=true;
    String[] aggrNames=newCustomPrivs.get(name);
    Privilege registered=privilegeManager.registerPrivilege(name,isAbstract,aggrNames);
    Privilege privilege=privilegeManager.getPrivilege(name);
    assertNotNull(privilege);
    assertEquals(name,privilege.getName());
    assertTrue(privilege.isAbstract());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    assertContainsDeclared(privilegeManager.getPrivilege(PrivilegeConstants.JCR_ALL),name);
  }
  Map<String,String[]> newAggregates=new HashMap<String,String[]>();
  newAggregates.put("newA2",getAggregateNames("test:new","new"));
  newAggregates.put("newA1",getAggregateNames("new",PrivilegeConstants.JCR_READ));
  newAggregates.put("aggrBuiltIn",getAggregateNames(PrivilegeConstants.JCR_MODIFY_PROPERTIES,PrivilegeConstants.JCR_READ));
  for (  String name : newAggregates.keySet()) {
    boolean isAbstract=false;
    String[] aggrNames=newAggregates.get(name);
    privilegeManager.registerPrivilege(name,isAbstract,aggrNames);
    Privilege p=privilegeManager.getPrivilege(name);
    assertNotNull(p);
    assertEquals(name,p.getName());
    assertFalse(p.isAbstract());
    for (    String n : aggrNames) {
      assertContainsDeclared(p,n);
    }
    assertContainsDeclared(privilegeManager.getPrivilege(PrivilegeConstants.JCR_ALL),name);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak
 */
@Test public void testCustomPrivilegeVisibleToNewSession() throws RepositoryException {
  boolean isAbstract=false;
  String privName="testCustomPrivilegeVisibleToNewSession";
  privilegeManager.registerPrivilege(privName,isAbstract,new String[0]);
  Session s2=getAdminSession();
  try {
    PrivilegeManager pm=getPrivilegeManager(s2);
    Privilege priv=pm.getPrivilege(privName);
    assertEquals(privName,priv.getName());
    assertEquals(isAbstract,priv.isAbstract());
    assertFalse(priv.isAggregate());
  }
  finally {
    s2.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.AdministratorTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsAdmin() throws NotExecutableException, RepositoryException {
  assertTrue(admin.isAdmin());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.AuthorizablePropertyTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testSetPropertyByRelPath() throws NotExecutableException, RepositoryException {
  Value[] v=new Value[]{superuser.getValueFactory().createValue("Super User")};
  List<String> relPaths=new ArrayList<String>();
  relPaths.add("testing/Fullname");
  relPaths.add("testing/Email");
  relPaths.add("testing/testing/testing/Fullname");
  relPaths.add("testing/testing/testing/Email");
  for (  String relPath : relPaths) {
    try {
      user.setProperty(relPath,v);
      superuser.save();
      assertTrue(user.hasProperty(relPath));
      String propName=Text.getName(relPath);
      assertFalse(user.hasProperty(propName));
    }
  finally {
      user.removeProperty(relPath);
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupGetProperties() throws RepositoryException, NotExecutableException {
  Node n=getNode(group,superuser);
  for (PropertyIterator it=n.getProperties(); it.hasNext(); ) {
    Property prop=it.nextProperty();
    if (prop.getDefinition().isProtected()) {
      assertFalse(group.hasProperty(prop.getName()));
      assertNull(group.getProperty(prop.getName()));
    }
 else {
      assertTrue(group.hasProperty(prop.getName()));
      assertNotNull(group.getProperty(prop.getName()));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetMultiValueProperty() throws NotExecutableException, RepositoryException {
  String propName="Fullname";
  Value[] v=new Value[]{superuser.getValueFactory().createValue("Super User")};
  try {
    user.setProperty(propName,v);
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  try {
    boolean found=false;
    for (Iterator<String> it=user.getPropertyNames(); it.hasNext() && !found; ) {
      found=propName.equals(it.next());
    }
    assertTrue(found);
    found=false;
    for (Iterator<String> it=user.getPropertyNames("."); it.hasNext() && !found; ) {
      found=propName.equals(it.next());
    }
    assertTrue(found);
    assertTrue(user.hasProperty(propName));
    assertTrue(user.hasProperty("./" + propName));
    assertEquals(Arrays.asList(v),Arrays.asList(user.getProperty(propName)));
    assertEquals(Arrays.asList(v),Arrays.asList(user.getProperty("./" + propName)));
    assertTrue(user.removeProperty(propName));
    assertFalse(user.hasProperty(propName));
    superuser.save();
  }
  finally {
    user.removeProperty(propName);
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNotExistingProperty() throws RepositoryException, NotExecutableException {
  String hint="Fullname";
  String propName=hint;
  int i=0;
  while (user.hasProperty(propName)) {
    propName=hint + i;
    i++;
  }
  assertNull(user.getProperty(propName));
  assertFalse(user.hasProperty(propName));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSingleValueToMultiValue() throws RepositoryException, NotExecutableException {
  Value v=superuser.getValueFactory().createValue("testValue");
  try {
    user.setProperty("testProperty",v);
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  user.setProperty("testProperty",new Value[]{v});
  Property p=superuser.getProperty(user.getPath() + "/testProperty");
  assertTrue(p.isMultiple());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMultiValueToSingleValue() throws RepositoryException, NotExecutableException {
  Value v=superuser.getValueFactory().createValue("testValue");
  try {
    user.setProperty("testProperty",new Value[]{v});
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  user.setProperty("testProperty",v);
  Property p=superuser.getProperty(user.getPath() + "/testProperty");
  assertFalse(p.isMultiple());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSetNullPropertyRemoves() throws RepositoryException, NotExecutableException {
  Value v=superuser.getValueFactory().createValue("testValue");
  try {
    user.setProperty("testProperty",v);
    user.setProperty("testMvProperty",new Value[]{v});
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  user.setProperty("testProperty",(Value)null);
  assertFalse(user.hasProperty("testProperty"));
  user.setProperty("testMvProperty",(Value[])null);
  assertFalse(user.hasProperty("testMvProperty"));
}

</code></pre>

<br>
<pre class="type-13 type-12 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserGetProperties() throws RepositoryException, NotExecutableException {
  Node n=getNode(user,superuser);
  for (PropertyIterator it=n.getProperties(); it.hasNext(); ) {
    Property p=it.nextProperty();
    if (p.getDefinition().isProtected()) {
      assertFalse(user.hasProperty(p.getName()));
      assertNull(user.getProperty(p.getName()));
    }
 else {
      assertTrue(user.hasProperty(p.getName()));
      assertNotNull(user.getProperty(p.getName()));
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyNamesByRelPath() throws NotExecutableException, RepositoryException {
  String relPath="testing/Fullname";
  Value v=superuser.getValueFactory().createValue("Super User");
  try {
    user.setProperty(relPath,v);
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  try {
    for (Iterator<String> it=user.getPropertyNames(); it.hasNext(); ) {
      String name=it.next();
      assertFalse("Fullname".equals(name));
    }
    for (Iterator<String> it=user.getPropertyNames("testing"); it.hasNext(); ) {
      String name=it.next();
      String rp="testing/" + name;
      assertFalse(user.hasProperty(name));
      assertNull(user.getProperty(name));
      assertTrue(user.hasProperty(rp));
      assertNotNull(user.getProperty(rp));
    }
    for (Iterator<String> it=user.getPropertyNames("./testing"); it.hasNext(); ) {
      String name=it.next();
      String rp="testing/" + name;
      assertFalse(user.hasProperty(name));
      assertNull(user.getProperty(name));
      assertTrue(user.hasProperty(rp));
      assertNotNull(user.getProperty(rp));
    }
  }
  finally {
    user.removeProperty(relPath);
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPropertyByInvalidRelativePath() throws NotExecutableException, RepositoryException {
  List<String> wrongPaths=new ArrayList<String>();
  wrongPaths.add("../jcr:primaryType");
  wrongPaths.add("../../jcr:primaryType");
  wrongPaths.add("../testing/jcr:primaryType");
  for (  String path : wrongPaths) {
    assertFalse(user.hasProperty(path));
  }
  List<String> invalidPaths=new ArrayList<String>();
  invalidPaths.add("..");
  invalidPaths.add(".");
  invalidPaths.add(null);
  for (  String invalidPath : invalidPaths) {
    try {
      assertFalse(user.hasProperty(invalidPath));
    }
 catch (    RepositoryException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyNames() throws NotExecutableException, RepositoryException {
  String propName="Fullname";
  Value v=superuser.getValueFactory().createValue("Super User");
  try {
    user.setProperty(propName,v);
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  try {
    for (Iterator<String> it=user.getPropertyNames(); it.hasNext(); ) {
      String name=it.next();
      assertTrue(user.hasProperty(name));
      assertNotNull(user.getProperty(name));
    }
  }
  finally {
    user.removeProperty(propName);
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveNotExistingProperty() throws RepositoryException, NotExecutableException {
  String hint="Fullname";
  String propName=hint;
  int i=0;
  while (user.hasProperty(propName)) {
    propName=hint + i;
    i++;
  }
  assertFalse(user.removeProperty(propName));
  superuser.save();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetProperty() throws NotExecutableException, RepositoryException {
  String propName="Fullname";
  Value v=superuser.getValueFactory().createValue("Super User");
  try {
    user.setProperty(propName,v);
    superuser.save();
  }
 catch (  RepositoryException e) {
    throw new NotExecutableException("Cannot test 'Authorizable.setProperty'.");
  }
  try {
    boolean found=false;
    for (Iterator<String> it=user.getPropertyNames(); it.hasNext() && !found; ) {
      found=propName.equals(it.next());
    }
    assertTrue(found);
    found=false;
    for (Iterator<String> it=user.getPropertyNames("."); it.hasNext() && !found; ) {
      found=propName.equals(it.next());
    }
    assertTrue(found);
    assertTrue(user.hasProperty(propName));
    assertTrue(user.hasProperty("./" + propName));
    assertTrue(user.getProperty(propName).length == 1);
    assertEquals(v,user.getProperty(propName)[0]);
    assertEquals(v,user.getProperty("./" + propName)[0]);
    assertTrue(user.removeProperty(propName));
    assertFalse(user.hasProperty(propName));
    superuser.save();
  }
  finally {
    user.removeProperty(propName);
    superuser.save();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.AuthorizableTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testObjectMethods() throws Exception {
  final Authorizable user=getTestUser(superuser);
  Authorizable user2=getTestUser(superuser);
  assertEquals(user,user2);
  assertEquals(user.hashCode(),user2.hashCode());
  Set<Authorizable> s=new HashSet<Authorizable>();
  s.add(user);
  assertFalse(s.add(user2));
  Authorizable user3=new Authorizable(){
    public String getID() throws RepositoryException {
      return user.getID();
    }
    public boolean isGroup(){
      return user.isGroup();
    }
    public Principal getPrincipal() throws RepositoryException {
      return user.getPrincipal();
    }
    public Iterator<Group> declaredMemberOf() throws RepositoryException {
      return user.declaredMemberOf();
    }
    public Iterator<Group> memberOf() throws RepositoryException {
      return user.memberOf();
    }
    public void remove() throws RepositoryException {
      user.remove();
    }
    public Iterator<String> getPropertyNames() throws RepositoryException {
      return user.getPropertyNames();
    }
    public Iterator<String> getPropertyNames(    String relPath) throws RepositoryException {
      return user.getPropertyNames(relPath);
    }
    public boolean hasProperty(    String name) throws RepositoryException {
      return user.hasProperty(name);
    }
    public void setProperty(    String name,    Value value) throws RepositoryException {
      user.setProperty(name,value);
    }
    public void setProperty(    String name,    Value[] values) throws RepositoryException {
      user.setProperty(name,values);
    }
    public Value[] getProperty(    String name) throws RepositoryException {
      return user.getProperty(name);
    }
    public boolean removeProperty(    String name) throws RepositoryException {
      return user.removeProperty(name);
    }
    public String getPath() throws RepositoryException {
      return user.getPath();
    }
  }
;
  assertFalse(user.equals(user3));
  assertTrue(s.add(user3));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.CreateGroupTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroup() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  Group gr=createGroup(p);
  createdGroups.add(gr);
  assertNotNull(gr.getID());
  assertEquals(p.getName(),gr.getPrincipal().getName());
  assertFalse("A new group must not have members.",gr.getMembers().hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testCreateGroupWithAbsolutePath2() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String groupRoot=UserConstants.DEFAULT_GROUP_PATH;
  String path=groupRoot + "/any/path/to/the/new/group";
  Group gr=createGroup(p,path);
  createdGroups.add(gr);
  assertTrue(gr.getPath().startsWith(path));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupWithRelativePath() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  Group gr=createGroup(p,"any/path");
  createdGroups.add(gr);
  assertNotNull(gr.getID());
  assertTrue(gr.getPath().contains("any/path"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.CreateUserTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testCreateUserWithAbsolutePath2() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=p.getName();
  String userRoot=UserConstants.DEFAULT_USER_PATH;
  String path=userRoot + "/any/path/to/the/new/user";
  User user=createUser(uid,"pw",p,path);
  createdUsers.add(user);
  assertTrue(user.getPath().startsWith(path));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithRelativePath() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=p.getName();
  User user=createUser(uid,"pw",p,"any/path");
  createdUsers.add(user);
  assertNotNull(user.getID());
  assertTrue(user.getPath().contains("any/path"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.EveryoneGroupTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupPrincipal() throws Exception {
  Principal everyonePrincipal=everyone.getPrincipal();
  assertTrue(everyonePrincipal instanceof java.security.acl.Group);
  assertTrue(everyonePrincipal.equals(EveryonePrincipal.getInstance()));
  assertTrue(EveryonePrincipal.getInstance().equals(everyonePrincipal));
  java.security.acl.Group gr=(java.security.acl.Group)everyonePrincipal;
  assertFalse(gr.isMember(everyonePrincipal));
  assertTrue(gr.isMember(getTestUser(superuser).getPrincipal()));
  assertTrue(gr.isMember(new PrincipalImpl("test")));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserMemberOfContainsEveryone() throws Exception {
  User testUser=getTestUser(superuser);
  boolean memberOfEveryone=false;
  Iterator<Group> groups=testUser.memberOf();
  while (groups.hasNext() && !memberOfEveryone) {
    Group g=groups.next();
    memberOfEveryone=(EveryonePrincipal.NAME.equals(g.getPrincipal().getName()));
  }
  assertTrue(memberOfEveryone);
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembers() throws RepositoryException, NotExecutableException {
  assertTrue(everyone.isDeclaredMember(getTestUser(superuser)));
  assertTrue(everyone.isMember(getTestUser(superuser)));
  Iterator<Authorizable> it=everyone.getDeclaredMembers();
  assertTrue(it.hasNext());
  Set<Authorizable> members=new HashSet<Authorizable>();
  while (it.hasNext()) {
    members.add(it.next());
  }
  it=everyone.getMembers();
  assertTrue(it.hasNext());
  while (it.hasNext()) {
    assertTrue(members.contains(it.next()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEditMembers() throws RepositoryException, NotExecutableException {
  assertFalse(everyone.addMember(getTestUser(superuser)));
  assertFalse(everyone.removeMember(getTestUser(superuser)));
  Group anotherGroup=null;
  try {
    anotherGroup=userMgr.createGroup("testGroup");
    superuser.save();
    assertFalse(everyone.addMember(anotherGroup));
    assertFalse(everyone.removeMember(anotherGroup));
    assertFalse(anotherGroup.addMember(everyone));
    assertFalse(anotherGroup.removeMember(everyone));
  }
  finally {
    if (anotherGroup != null) {
      anotherGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.FindAuthorizablesTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindGroupInAllGroups() throws RepositoryException, NotExecutableException {
  Group gr=null;
  try {
    Principal p=getTestPrincipal();
    gr=userMgr.createGroup(p);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_GROUP);
    while (it.hasNext() && !found) {
      Group ng=(Group)it.next();
      found=ng.getPrincipal().getName().equals(p.getName());
    }
    assertTrue("Searching for 'null' must find the created group.",found);
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindGroupByPrinicpalName() throws RepositoryException, NotExecutableException {
  Group gr=null;
  try {
    Principal p=getTestPrincipal();
    gr=userMgr.createGroup(p);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,p.getName(),UserManager.SEARCH_TYPE_GROUP);
    assertTrue(it.hasNext());
    Group ng=(Group)it.next();
    assertEquals("Searching for principal-name must find the created group.",p.getName(),ng.getPrincipal().getName());
    assertFalse("Only a single group must be found for a given principal name.",it.hasNext());
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testFindAllGroupsDoesNotContainUser() throws RepositoryException {
  Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_GROUP);
  while (it.hasNext()) {
    assertTrue(it.next().isGroup());
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws RepositoryException, NotExecutableException {
  Set<Principal> principals=new HashSet<Principal>();
  PrincipalManager pMgr=((JackrabbitSession)superuser).getPrincipalManager();
  Principal p=pMgr.getPrincipal(superuser.getUserID());
  if (p != null) {
    principals.add(p);
    PrincipalIterator principalIterator=pMgr.getGroupMembership(p);
    while (principalIterator.hasNext()) {
      principals.add(principalIterator.nextPrincipal());
    }
  }
  Authorizable auth;
  for (  Principal principal : principals) {
    auth=userMgr.getAuthorizable(principal);
    if (auth != null) {
      if (!auth.isGroup() && auth.hasProperty(UserConstants.REP_PRINCIPAL_NAME)) {
        String val=auth.getProperty(UserConstants.REP_PRINCIPAL_NAME)[0].getString();
        Iterator<Authorizable> users=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,val);
        assertTrue(users.hasNext());
        Authorizable first=users.next();
        assertEquals(first.getID(),val);
        assertFalse(users.hasNext());
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizableByRelativePath() throws NotExecutableException, RepositoryException {
  Principal p=getTestPrincipal();
  Authorizable auth=null;
  try {
    auth=userMgr.createGroup(p);
    Value[] vs=new Value[]{superuser.getValueFactory().createValue("v1"),superuser.getValueFactory().createValue("v2")};
    String relPath="relPath/" + propertyName1;
    String relPath2="another/" + propertyName1;
    String relPath3="relPath/relPath/" + propertyName1;
    auth.setProperty(relPath,vs);
    auth.setProperty(relPath2,vs);
    auth.setProperty(relPath3,superuser.getValueFactory().createValue("v3"));
    superuser.save();
    Iterator<Authorizable> result=userMgr.findAuthorizables(propertyName1,"v1");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables(propertyName1,"v3");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables(relPath,"v1");
    assertTrue("expected result",result.hasNext());
    assertEquals(auth.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
    result=userMgr.findAuthorizables("./" + propertyName1,"v1");
    assertFalse("expected result",result.hasNext());
  }
  finally {
    if (auth != null) {
      auth.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindUserByPrincipalName() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,p.getName(),UserManager.SEARCH_TYPE_USER);
    while (it.hasNext() && !found) {
      User nu=(User)it.next();
      found=nu.getPrincipal().getName().equals(p.getName());
    }
    assertTrue("Searching for principal-name must find the created user.",found);
    it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,p.getName(),UserManager.SEARCH_TYPE_GROUP);
    assertFalse(it.hasNext());
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testFindUserWithGroupType() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,p.getName(),UserManager.SEARCH_TYPE_GROUP);
    assertFalse("Searching for Groups should not find the user",it.hasNext());
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testFindGroupWithUserType() throws RepositoryException, NotExecutableException {
  Group gr=null;
  try {
    Principal p=getTestPrincipal();
    gr=userMgr.createGroup(p);
    superuser.save();
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,p.getName(),UserManager.SEARCH_TYPE_USER);
    assertFalse(it.hasNext());
  }
  finally {
    if (gr != null) {
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindUserWithSpecialCharIdByPrincipalName() throws RepositoryException {
  List<String> ids=Lists.newArrayList("'","]","']",Text.escapeIllegalJcrChars("']"),Text.escape("']"));
  for (  String id : ids) {
    User user=null;
    try {
      user=userMgr.createUser(id,"pw");
      superuser.save();
      boolean found=false;
      Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,id,UserManager.SEARCH_TYPE_USER);
      while (it.hasNext() && !found) {
        Authorizable a=it.next();
        found=id.equals(a.getID());
      }
      assertTrue(found);
    }
  finally {
      if (user != null) {
        user.remove();
        superuser.save();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindUserInAllUsers2() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
    while (it.hasNext() && !found) {
      User nu=(User)it.next();
      found=nu.getID().equals(uid);
    }
    assertTrue("Searching for 'null' must find the created user.",found);
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testFindAllUsersDoesNotContainGroup() throws RepositoryException {
  Iterator<Authorizable> it=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
  while (it.hasNext()) {
    assertFalse(it.next().isGroup());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindUserInAllUsers() throws RepositoryException, NotExecutableException {
  User u=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> it=userMgr.findAuthorizables("./" + UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
    while (it.hasNext() && !found) {
      User nu=(User)it.next();
      found=nu.getID().equals(uid);
    }
    assertTrue("Searching for 'null' must find the created user.",found);
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testFindAuthorizableByAddedProperty() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  Authorizable auth=null;
  try {
    auth=userMgr.createGroup(p);
    auth.setProperty("E-Mail",new Value[]{superuser.getValueFactory().createValue("anyVal")});
    superuser.save();
    boolean found=false;
    Iterator<Authorizable> result=userMgr.findAuthorizables("E-Mail","anyVal");
    while (result.hasNext()) {
      Authorizable a=result.next();
      if (a.getID().equals(auth.getID())) {
        found=true;
      }
    }
    assertTrue(found);
  }
  finally {
    if (auth != null) {
      auth.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupImportBestEffortTest </h4><pre class="type-12 type-5 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportNonExistingMemberBestEffort() throws Exception {
  List<String> invalid=new ArrayList<String>();
  invalid.add(UUID.randomUUID().toString());
  invalid.add(getExistingUUID());
  Session s=getImportSession();
  for (  String id : invalid) {
    String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "<sv:node sv:name=\"g1\"><sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>" + id + "</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
    try {
      doImport(getTargetPath(),xml);
      Authorizable a=getUserManager().getAuthorizable("g1");
      if (a.isGroup()) {
        boolean found=false;
        Node grNode=s.getNode(a.getPath());
        for (        Value memberValue : grNode.getProperty(UserConstants.REP_MEMBERS).getValues()) {
          assertEquals(PropertyType.WEAKREFERENCE,memberValue.getType());
          if (id.equals(memberValue.getString())) {
            found=true;
            break;
          }
        }
        assertTrue("ImportBehavior.BESTEFFORT must import non-existing members.",found);
        assertNotDeclaredMember((Group)a,id,s);
      }
 else {
        fail("'g1' was not imported as Group.");
      }
    }
  finally {
      s.refresh(false);
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportNonExistingMemberBestEffort2() throws Exception {
  String g1Id="0120a4f9-196a-3f9e-b9f5-23f31f914da7";
  String nonExistingId="b2f5ff47-4366-31b6-a533-d8dc3614845d";
  if (getUserManager().getAuthorizable("g") != null) {
    throw new NotExecutableException();
  }
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "<sv:node sv:name=\"g1\"><sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>" + g1Id + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>"+ nonExistingId+ "</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable g1=getUserManager().getAuthorizable("g1");
  if (g1.isGroup()) {
    boolean found=false;
    Node grNode=getImportSession().getNode(g1.getPath());
    for (    Value memberValue : grNode.getProperty(UserConstants.REP_MEMBERS).getValues()) {
      assertEquals(PropertyType.WEAKREFERENCE,memberValue.getType());
      if (nonExistingId.equals(memberValue.getString())) {
        found=true;
        break;
      }
    }
    assertTrue("ImportBehavior.BESTEFFORT must import non-existing members.",found);
  }
 else {
    fail("'g1' was not imported as Group.");
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testImportNewMembersLateSave() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "<sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "   <sv:value>rep:AuthorizableFolder</sv:value>"+ "</sv:property>"+ "<sv:node sv:name=\"g1\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>a468b64f-b1df-377c-b325-20d97aaa1ad9</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  User user=getUserManager().createUser("angi","pw");
  getImportSession().save();
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertTrue(g1.isMember(user));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupImportTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportNewMembers() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "<sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "   <sv:value>rep:AuthorizableFolder</sv:value>"+ "</sv:property>"+ "<sv:node sv:name=\"g\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>"+ "<sv:node sv:name=\"g1\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Group g=(Group)getUserManager().getAuthorizable("g");
  assertNotNull(g);
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertNotNull(g1);
  Session s=getImportSession();
  Node n=s.getNode(g1.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_MEMBERS) || n.hasNode(UserConstants.NT_REP_MEMBERS));
  s.save();
  assertTrue(g1.isMember(g));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportGroupWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getID());
  assertTrue(s.propertyExists(newGroup.getPath() + "/rep:authorizableId"));
  assertEquals("g",s.getProperty(newGroup.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportMembers() throws Exception {
  Session s=getImportSession();
  Authorizable admin=checkNotNull(getUserManager().getAuthorizable(UserConstants.DEFAULT_ADMIN_ID));
  String uuid=s.getNode(admin.getPath()).getUUID();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:node sv:name=\"g1\">"+ "       <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "       <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>" + uuid + "</sv:value></sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertNotNull(g1);
  s.save();
  assertTrue(g1.isMember(admin));
  boolean found=false;
  for (Iterator<Group> it=admin.declaredMemberOf(); it.hasNext() && !found; ) {
    found="g1".equals(it.next().getID());
  }
  assertTrue(found);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportGroup() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  Session s=getImportSession();
  assertTrue(s.hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getPrincipal().getName());
  assertEquals("g",newGroup.getID());
  Node n=s.getNode(newGroup.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("g",n.getName());
  assertEquals("g",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testImportNewMembersLateSave() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "<sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "   <sv:value>rep:AuthorizableFolder</sv:value>"+ "</sv:property>"+ "<sv:node sv:name=\"g1\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>a468b64f-b1df-377c-b325-20d97aaa1ad9</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  User user=getUserManager().createUser("angi","pw");
  getImportSession().save();
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertFalse(g1.isMember(user));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportGroupMembersFromNodes() throws Exception {
  List<String> createdUsers=new LinkedList<String>();
  Session s=getImportSession();
  UserManager uMgr=getUserManager();
  try {
    String[] users={"angi","adi","hansi","lisi","luzi","susi","pipi","hari","gabi","eddi","debbi","cati","admin","anonymous"};
    for (    String user : users) {
      if (uMgr.getAuthorizable(user) == null) {
        uMgr.createUser(user,user);
        createdUsers.add(user);
      }
    }
    if (!uMgr.isAutoSave()) {
      s.save();
    }
    doImport(getTargetPath(),"GroupImportTest-testImportGroupMembersFromNodes.xml");
    if (!uMgr.isAutoSave()) {
      s.save();
    }
    Authorizable aShrimps=uMgr.getAuthorizable("shrimps");
    assertNotNull("Shrimps authorizable must exist",aShrimps);
    assertTrue("Shrimps authorizable must be a group",aShrimps.isGroup());
    Group gShrimps=(Group)aShrimps;
    for (    String user : users) {
      assertTrue(user + " should be member of " + gShrimps,gShrimps.isMember(uMgr.getAuthorizable(user)));
    }
  }
  finally {
    for (    String user : createdUsers) {
      Authorizable a=uMgr.getAuthorizable(user);
      if (a != null && !a.isGroup()) {
        a.remove();
      }
    }
    for (NodeIterator it=s.getNode(getTargetPath()).getNodes(); it.hasNext(); ) {
      Node n=it.nextNode();
      if (!n.getDefinition().isProtected()) {
        n.remove();
      }
    }
    s.save();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportNewMembersReverseOrder() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:node sv:name=\"g1\">"+ "       <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "       <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   </sv:node>"+ "   <sv:node sv:name=\"g\">"+ "       <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "       <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Group g=(Group)getUserManager().getAuthorizable("g");
  assertNotNull(g);
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertNotNull(g1);
  Session s=getImportSession();
  Node n=s.getNode(g1.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_MEMBERS) || n.hasNode(UserConstants.NT_REP_MEMBERS));
  s.save();
  assertTrue(g1.isMember(g));
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing new rep:MembershipReferences structure
 */
@Test public void testImportGroupMembersFromOakNodes() throws Exception {
  List<String> createdUsers=new LinkedList<String>();
  Session s=getImportSession();
  UserManager uMgr=getUserManager();
  try {
    for (int i=0; i < 32; i++) {
      String user="testUser" + i;
      if (uMgr.getAuthorizable(user) == null) {
        uMgr.createUser(user,user);
        createdUsers.add(user);
      }
    }
    if (!uMgr.isAutoSave()) {
      s.save();
    }
    doImport(getTargetPath(),"GroupImportTest-testImportGroupMembersFromOakNodes.xml");
    if (!uMgr.isAutoSave()) {
      s.save();
    }
    Authorizable authorizable=uMgr.getAuthorizable("testGroup");
    assertNotNull("testGroup authorizable must exist",authorizable);
    assertTrue("testGroup authorizable must be a group",authorizable.isGroup());
    Group testGroup=(Group)authorizable;
    for (int i=0; i < 32; i++) {
      String user="testUser" + i;
      assertTrue(user + " should be member of " + testGroup,testGroup.isMember(uMgr.getAuthorizable(user)));
    }
    authorizable=uMgr.getAuthorizable("shrimps");
    assertNotNull("shrimps authorizable must exist",authorizable);
    assertTrue("shrimps authorizable must be a group",authorizable.isGroup());
    testGroup=(Group)authorizable;
    for (int i=0; i < 32; i++) {
      String user="testUser" + i;
      assertTrue(user + " should be member of " + testGroup,testGroup.isMember(uMgr.getAuthorizable(user)));
    }
  }
  finally {
    for (    String user : createdUsers) {
      Authorizable a=uMgr.getAuthorizable(user);
      if (a != null && !a.isGroup()) {
        a.remove();
      }
    }
    for (NodeIterator it=s.getNode(getTargetPath()).getNodes(); it.hasNext(); ) {
      Node n=it.nextNode();
      if (!n.getDefinition().isProtected()) {
        n.remove();
      }
    }
    s.save();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportMembersWithIdDifferentFromNodeName() throws Exception {
  Session s=getImportSession();
  Authorizable admin=checkNotNull(getUserManager().getAuthorizable(UserConstants.DEFAULT_ADMIN_ID));
  String uuid=s.getNode(admin.getPath()).getUUID();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"gFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:node sv:name=\"g_different\">"+ "       <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "       <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0120a4f9-196a-3f9e-b9f5-23f31f914da7</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:members\" sv:type=\"WeakReference\"><sv:value>" + uuid + "</sv:value></sv:property>"+ "       <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>g1</sv:value></sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Group g1=(Group)getUserManager().getAuthorizable("g1");
  assertNotNull(g1);
  s.save();
  assertTrue(g1.isMember(admin));
  boolean found=false;
  for (Iterator<Group> it=admin.declaredMemberOf(); it.hasNext() && !found; ) {
    found="g1".equals(it.next().getID());
  }
  assertTrue(found);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValuedPrincipalName() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value><sv:value>g2</sv:value><sv:value>g</sv:value></sv:property></sv:node>";
  Session s=getImportSession();
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(target.hasNode("g"));
  assertTrue(target.hasProperty("g/rep:principalName"));
  assertFalse(target.getProperty("g/rep:principalName").getDefinition().isProtected());
  try {
    s.save();
    fail("Import must be incomplete. Saving changes must fail.");
  }
 catch (  ConstraintViolationException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupImportWithPoliciesTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportGroupWithPolicies() throws Exception {
  Node target=getTargetNode();
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(newGroup.isGroup());
  assertEquals("g",newGroup.getPrincipal().getName());
  assertEquals("g",newGroup.getID());
  Node n=getImportSession().getNode(newGroup.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("g",n.getName());
  assertEquals("g",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  AccessControlList acl=AccessControlUtils.getAccessControlList(getImportSession(),newGroup.getPath());
  assertNotNull(acl);
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("administrators",aces[0].getPrincipal().getName());
  assertEquals(PrivilegeConstants.JCR_READ,aces[0].getPrivileges()[0].getName());
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.GroupTest </h4><pre class="type-13 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testGetMembersAgainstIsMember() throws NotExecutableException, RepositoryException {
  Iterator<Authorizable> it=group.getMembers();
  while (it.hasNext()) {
    Authorizable auth=it.next();
    assertTrue(group.isMember(auth));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritedMembers() throws Exception {
  Set<Authorizable> authorizables=new HashSet<Authorizable>();
  try {
    User testUser=userMgr.createUser(createUserId(),"pw");
    authorizables.add(testUser);
    Group group1=userMgr.createGroup(createGroupId());
    authorizables.add(group1);
    Group group2=userMgr.createGroup(createGroupId());
    authorizables.add(group2);
    Group group3=userMgr.createGroup(createGroupId());
    group1.addMember(testUser);
    group2.addMember(testUser);
    group3.addMember(group1);
    group3.addMember(group2);
    Iterator<Authorizable> members=group3.getMembers();
    while (members.hasNext()) {
      Authorizable a=members.next();
      assertTrue(authorizables.contains(a));
      assertTrue(authorizables.remove(a));
    }
    assertTrue(authorizables.isEmpty());
  }
  finally {
    for (    Authorizable a : authorizables) {
      a.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMembers() throws NotExecutableException, RepositoryException {
  Iterator<Authorizable> it=group.getMembers();
  assertNotNull(it);
  while (it.hasNext()) {
    assertTrue(it.next() != null);
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveMembership() throws RepositoryException {
  String grId2=createGroupId();
  Group gr2=null;
  try {
    gr2=userMgr.createGroup(grId2);
    gr2.addMember(user);
    superuser.save();
    Iterator<Group> groups=user.declaredMemberOf();
    while (groups.hasNext()) {
      Group group=groups.next();
      group.removeMember(user);
      superuser.save();
    }
    assertFalse(userMgr.getAuthorizable(group.getID(),Group.class).isDeclaredMember(user));
    assertFalse(userMgr.getAuthorizable(grId2,Group.class).isDeclaredMember(user));
    groups=user.declaredMemberOf();
    while (groups.hasNext()) {
      String id=groups.next().getID();
      assertFalse(group.getID().equals(id));
      assertFalse(grId2.equals(id));
    }
  }
  finally {
    if (gr2 != null) {
      gr2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetDeclaredMembers() throws NotExecutableException, RepositoryException {
  Iterator<Authorizable> it=group.getDeclaredMembers();
  assertNotNull(it);
  while (it.hasNext()) {
    Authorizable a=it.next();
    assertNotNull(a);
    members.remove(a.getID());
  }
  assertTrue(members.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMemberModifiesMemberOf() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalseMemberOfContainsGroup(auth.memberOf(),newGroup);
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertTrueMemberOfContainsGroup(auth.declaredMemberOf(),newGroup);
    assertTrueMemberOfContainsGroup(auth.memberOf(),newGroup);
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveMemberTwice() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertTrue(newGroup.removeMember(userMgr.getAuthorizable(auth.getID())));
    superuser.save();
    assertFalse(newGroup.removeMember(auth));
    superuser.save();
  }
  finally {
    if (newGroup != null) {
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMembers() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  int size=100;
  List<User> users=new ArrayList<User>(size);
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    for (int k=0; k < size; k++) {
      users.add(userMgr.createUser("user_" + k,"pass_" + k));
    }
    superuser.save();
    for (    User user : users) {
      assertTrue(newGroup.addMember(user));
    }
    superuser.save();
    for (    User user : users) {
      assertTrue(newGroup.isMember(user));
    }
    for (    User user : users) {
      assertTrue(newGroup.removeMember(user));
    }
    superuser.save();
    for (    User user : users) {
      assertFalse(newGroup.isMember(user));
    }
  }
  finally {
    for (    User user : users) {
      user.remove();
      superuser.save();
    }
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddRemoveMember() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup1=null;
  Group newGroup2=null;
  try {
    newGroup1=userMgr.createGroup(createGroupId());
    newGroup2=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalse(newGroup1.isMember(auth));
    assertFalse(newGroup1.removeMember(auth));
    superuser.save();
    assertFalse(newGroup2.isMember(auth));
    assertFalse(newGroup2.removeMember(auth));
    superuser.save();
    assertTrue(newGroup1.addMember(auth));
    superuser.save();
    assertTrue(newGroup1.isMember(auth));
    assertTrue(newGroup1.isMember(userMgr.getAuthorizable(auth.getID())));
    assertTrue(newGroup2.addMember(auth));
    superuser.save();
    assertTrue(newGroup2.isMember(auth));
    assertTrue(newGroup2.isMember(userMgr.getAuthorizable(auth.getID())));
    assertTrue(newGroup1.removeMember(auth));
    superuser.save();
    assertTrue(newGroup2.removeMember(auth));
    superuser.save();
    assertTrue(newGroup1.addMember(auth));
    superuser.save();
    assertTrue(newGroup1.isMember(auth));
    assertTrue(newGroup1.isMember(userMgr.getAuthorizable(auth.getID())));
    assertTrue(newGroup1.removeMember(auth));
    superuser.save();
  }
  finally {
    if (newGroup1 != null) {
      newGroup1.removeMember(auth);
      newGroup1.remove();
      superuser.save();
    }
    if (newGroup2 != null) {
      newGroup2.removeMember(auth);
      newGroup2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testGetMembersContainsDeclaredMembers() throws NotExecutableException, RepositoryException {
  List<String> l=new ArrayList<String>();
  for (Iterator<Authorizable> it=group.getMembers(); it.hasNext(); ) {
    l.add(it.next().getID());
  }
  for (Iterator<Authorizable> it=group.getDeclaredMembers(); it.hasNext(); ) {
    assertTrue("All declared members must also be part of the Iterator " + "returned upon getMembers()",l.contains(it.next().getID()));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveMembershipWithDifferentSessions() throws Exception {
  String grId2=createGroupId();
  Group gr2=null;
  Session s2=null;
  Session s3=null;
  try {
    gr2=userMgr.createGroup(grId2);
    gr2.addMember(user);
    superuser.save();
    s2=getHelper().getReadWriteSession();
    Authorizable u2=getUserManager(s2).getAuthorizable(user.getID());
    Iterator<Group> groups=u2.declaredMemberOf();
    while (groups.hasNext()) {
      Group group=groups.next();
      group.removeMember(u2);
    }
    s2.save();
    s3=getHelper().getReadWriteSession();
    Authorizable u3=getUserManager(s3).getAuthorizable(user.getID());
    assertFalse(getUserManager(s3).getAuthorizable(group.getID(),Group.class).isDeclaredMember(u3));
    assertFalse(getUserManager(s3).getAuthorizable(grId2,Group.class).isDeclaredMember(u3));
    groups=u3.declaredMemberOf();
    while (groups.hasNext()) {
      String id=groups.next().getID();
      assertFalse(group.getID().equals(id));
      assertFalse(grId2.equals(id));
    }
  }
  finally {
    if (gr2 != null) {
      gr2.remove();
      superuser.save();
    }
    if (s2 != null) {
      s2.logout();
    }
    if (s3 != null) {
      s3.logout();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembersInPrincipal() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  Group newGroup2=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    newGroup2=userMgr.createGroup(createGroupId());
    superuser.save();
    newGroup.addMember(newGroup2);
    superuser.save();
    newGroup2.addMember(auth);
    superuser.save();
    java.security.acl.Group ngPrincipal=(java.security.acl.Group)newGroup.getPrincipal();
    java.security.acl.Group ng2Principal=(java.security.acl.Group)newGroup2.getPrincipal();
    assertFalse(ng2Principal.isMember(ngPrincipal));
    assertTrue(ngPrincipal.isMember(newGroup2.getPrincipal()));
    assertTrue(ng2Principal.isMember(auth.getPrincipal()));
    assertTrue(ngPrincipal.isMember(auth.getPrincipal()));
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(newGroup2);
      newGroup.remove();
      superuser.save();
    }
    if (newGroup2 != null) {
      newGroup2.removeMember(auth);
      newGroup2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsDeclaredMember() throws RepositoryException, NotExecutableException {
  User auth=getTestUser(superuser);
  Group newGroup1=null;
  Group newGroup2=null;
  try {
    newGroup1=userMgr.createGroup(createGroupId());
    newGroup2=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalse(newGroup1.isDeclaredMember(auth));
    assertFalse(newGroup2.isDeclaredMember(auth));
    assertTrue(newGroup2.addMember(auth));
    superuser.save();
    assertTrue(newGroup2.isDeclaredMember(auth));
    assertTrue(newGroup2.isDeclaredMember(userMgr.getAuthorizable(auth.getID())));
    assertTrue(newGroup1.addMember(newGroup2));
    superuser.save();
    assertTrue(newGroup1.isDeclaredMember(newGroup2));
    assertTrue(newGroup1.isDeclaredMember(userMgr.getAuthorizable(newGroup2.getID())));
    assertTrue(newGroup1.isMember(auth));
    assertTrue(newGroup1.isMember(userMgr.getAuthorizable(auth.getID())));
    assertFalse(newGroup1.isDeclaredMember(auth));
    assertFalse(newGroup1.isDeclaredMember(userMgr.getAuthorizable(auth.getID())));
  }
  finally {
    if (newGroup1 != null) {
      newGroup1.remove();
      superuser.save();
    }
    if (newGroup2 != null) {
      newGroup2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMember() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalse(newGroup.isMember(auth));
    assertFalse(newGroup.removeMember(auth));
    superuser.save();
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertTrue(newGroup.isMember(auth));
    assertTrue(newGroup.isMember(userMgr.getAuthorizable(auth.getID())));
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMemberTwice() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertFalse(newGroup.addMember(auth));
    superuser.save();
    assertTrue(newGroup.isMember(auth));
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testGetDeclaredMembersWithMemberRemoved() throws RepositoryException {
  String uid=user.getID();
  user.remove();
  superuser.save();
  user=null;
  Iterator<Authorizable> it=group.getDeclaredMembers();
  while (it.hasNext()) {
    Authorizable a=it.next();
    assertFalse(uid.equals(a.getID()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCyclicGroups2() throws AuthorizableExistsException, RepositoryException, NotExecutableException {
  Group group1=null;
  Group group2=null;
  Group group3=null;
  try {
    group1=userMgr.createGroup(createGroupId());
    group2=userMgr.createGroup(createGroupId());
    group3=userMgr.createGroup(createGroupId());
    assertTrue(group1.addMember(group2));
    assertTrue(group2.addMember(group3));
    assertFalse("Cyclic group membership must be detected.",group3.addMember(group1));
  }
 catch (  RepositoryException e) {
  }
 finally {
    if (group1 != null)     group1.remove();
    if (group2 != null)     group2.remove();
    if (group3 != null)     group3.remove();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCyclicGroups() throws AuthorizableExistsException, RepositoryException, NotExecutableException {
  Group group1=null;
  Group group2=null;
  Group group3=null;
  try {
    group1=userMgr.createGroup(createGroupId());
    group2=userMgr.createGroup(createGroupId());
    group3=userMgr.createGroup(createGroupId());
    assertTrue(group1.addMember(group2));
    superuser.save();
    assertTrue(group2.addMember(group3));
    superuser.save();
    assertFalse(group3.addMember(group1));
    superuser.save();
  }
  finally {
    if (group1 != null)     group1.remove();
    if (group2 != null)     group2.remove();
    if (group3 != null)     group3.remove();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGroup() throws NotExecutableException, RepositoryException {
  assertTrue(group.isGroup());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeeplyNestedGroups() throws NotExecutableException, RepositoryException {
  Set<Group> groups=new HashSet<Group>();
  try {
    User auth=getTestUser(superuser);
    Group topGroup=userMgr.createGroup(createGroupId());
    Group bottomGroup=topGroup;
    for (int k=0; k < 100; k++) {
      Group g=userMgr.createGroup(createGroupId());
      groups.add(g);
      bottomGroup.addMember(g);
      bottomGroup=g;
    }
    bottomGroup.addMember(auth);
    for (    Group g : groups) {
      Iterator<Authorizable> declaredMembers=g.getDeclaredMembers();
      assertTrue(declaredMembers.hasNext());
      declaredMembers.next();
      assertFalse(declaredMembers.hasNext());
    }
    HashSet<Group> allGroups=new HashSet<Group>(groups);
    for (Iterator<Authorizable> it=topGroup.getMembers(); it.hasNext(); ) {
      Authorizable a=it.next();
      assertTrue(a.equals(auth) || allGroups.remove(a));
    }
    assertTrue(allGroups.isEmpty());
  }
  finally {
    for (    Group g : groups) {
      g.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAddItselfAsMember() throws RepositoryException, NotExecutableException {
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalse(newGroup.addMember(newGroup));
    superuser.save();
    newGroup.removeMember(newGroup);
    superuser.save();
  }
  finally {
    if (newGroup != null) {
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIndirectMembers() throws NotExecutableException, RepositoryException {
  User user=getTestUser(superuser);
  Group newGroup=null;
  Group newGroup2=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    newGroup2=userMgr.createGroup(createGroupId());
    superuser.save();
    newGroup.addMember(newGroup2);
    superuser.save();
    assertTrue(newGroup.isMember(newGroup2));
    newGroup2.addMember(user);
    superuser.save();
    assertFalseIsMember(newGroup.getDeclaredMembers(),user);
    assertFalseMemberOfContainsGroup(user.declaredMemberOf(),newGroup);
    assertTrueIsMember(newGroup.getMembers(),user);
    assertTrueMemberOfContainsGroup(user.memberOf(),newGroup);
    assertFalse(newGroup.removeMember(user));
    superuser.save();
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(newGroup2);
      newGroup.remove();
      superuser.save();
    }
    if (newGroup2 != null) {
      newGroup2.removeMember(user);
      newGroup2.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveGroupClearsMembership() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  String groupId;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    groupId=newGroup.getID();
    superuser.save();
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    boolean isMember=false;
    Iterator<Group> it=auth.declaredMemberOf();
    while (it.hasNext() && !isMember) {
      isMember=groupId.equals(it.next().getID());
    }
    assertTrue(isMember);
  }
  finally {
    if (newGroup != null) {
      newGroup.remove();
      superuser.save();
    }
  }
  Iterator<Group> it=auth.declaredMemberOf();
  while (it.hasNext()) {
    assertFalse(groupId.equals(it.next().getID()));
  }
  it=auth.memberOf();
  while (it.hasNext()) {
    assertFalse(groupId.equals(it.next().getID()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMemberModifiesGetMembers() throws NotExecutableException, RepositoryException {
  User auth=getTestUser(superuser);
  Group newGroup=null;
  try {
    newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    assertFalseIsMember(newGroup.getMembers(),auth);
    assertFalseIsMember(newGroup.getDeclaredMembers(),auth);
    assertTrue(newGroup.addMember(auth));
    superuser.save();
    assertTrueIsMember(newGroup.getMembers(),auth);
    assertTrueIsMember(newGroup.getDeclaredMembers(),auth);
  }
  finally {
    if (newGroup != null) {
      newGroup.removeMember(auth);
      newGroup.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveGroupIfMemberExist() throws RepositoryException, NotExecutableException {
  User auth=getTestUser(superuser);
  String newGroupId=null;
  try {
    Group newGroup=userMgr.createGroup(createGroupId());
    superuser.save();
    newGroupId=newGroup.getID();
    assertTrue(newGroup.addMember(auth));
    newGroup.remove();
    superuser.save();
  }
  finally {
    Group gr=(Group)userMgr.getAuthorizable(newGroupId);
    if (gr != null) {
      gr.removeMember(auth);
      gr.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.ImpersonationTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testImpersonation() throws RepositoryException, NotExecutableException {
  Principal user2Principal=user2.getPrincipal();
  Subject subject=new Subject(true,Collections.singleton(user2Principal),Collections.emptySet(),Collections.emptySet());
  Impersonation impers=user.getImpersonation();
  assertFalse(impers.allows(subject));
  assertTrue(impers.grantImpersonation(user2Principal));
  assertFalse(impers.grantImpersonation(user2Principal));
  superuser.save();
  assertTrue(impers.allows(subject));
  assertTrue(impers.revokeImpersonation(user2Principal));
  assertFalse(impers.revokeImpersonation(user2Principal));
  superuser.save();
  assertFalse(impers.allows(subject));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAdminAsImpersonator() throws RepositoryException, NotExecutableException {
  String adminId=superuser.getUserID();
  Authorizable admin=userMgr.getAuthorizable(adminId);
  if (admin == null || admin.isGroup() || !((User)admin).isAdmin()) {
    throw new NotExecutableException(adminId + " is not administators ID");
  }
  Principal adminPrincipal=admin.getPrincipal();
  Impersonation impersonation=user.getImpersonation();
  assertFalse(impersonation.grantImpersonation(adminPrincipal));
  assertFalse(impersonation.revokeImpersonation(adminPrincipal));
  assertTrue(impersonation.allows(buildSubject(adminPrincipal)));
  Impersonation adminImpersonation=((User)admin).getImpersonation();
  assertFalse(adminImpersonation.grantImpersonation(adminPrincipal));
  assertFalse(adminImpersonation.revokeImpersonation(adminPrincipal));
  assertTrue(impersonation.allows(buildSubject(adminPrincipal)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.NestedGroupTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddGroupAsMember() throws NotExecutableException, RepositoryException {
  Group gr1=null;
  Group gr2=null;
  try {
    gr1=createGroup(getTestPrincipal());
    gr2=createGroup(getTestPrincipal());
    assertFalse(gr1.isMember(gr2));
    assertTrue(addMember(gr1,gr2));
    assertTrue(gr1.isMember(gr2));
  }
  finally {
    if (gr1 != null) {
      removeMember(gr1,gr2);
      removeGroup(gr1);
    }
    if (gr2 != null) {
      removeGroup(gr2);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritedMembership() throws NotExecutableException, RepositoryException {
  Group gr1=null;
  Group gr2=null;
  Group gr3=null;
  if (!(superuser instanceof JackrabbitSession)) {
    throw new NotExecutableException();
  }
  try {
    gr1=createGroup(getTestPrincipal());
    gr2=createGroup(getTestPrincipal());
    gr3=createGroup(getTestPrincipal());
    assertTrue(addMember(gr1,gr2));
    assertTrue(addMember(gr2,gr3));
    boolean isMember=false;
    PrincipalManager pmgr=((JackrabbitSession)superuser).getPrincipalManager();
    for (PrincipalIterator it=pmgr.getGroupMembership(gr3.getPrincipal()); it.hasNext() && !isMember; ) {
      isMember=it.nextPrincipal().equals(gr1.getPrincipal());
    }
    assertTrue(isMember);
  }
  finally {
    if (gr1 != null && gr1.isMember(gr2)) {
      removeMember(gr1,gr2);
    }
    if (gr2 != null && gr2.isMember(gr3)) {
      removeMember(gr2,gr3);
    }
    if (gr1 != null)     removeGroup(gr1);
    if (gr2 != null)     removeGroup(gr2);
    if (gr3 != null)     removeGroup(gr3);
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAddCircularMembers() throws NotExecutableException, RepositoryException {
  Group gr1=null;
  Group gr2=null;
  try {
    gr1=createGroup(getTestPrincipal());
    gr2=createGroup(getTestPrincipal());
    assertTrue(addMember(gr1,gr2));
    assertFalse(addMember(gr2,gr1));
  }
  finally {
    if (gr1 != null && gr1.isMember(gr2)) {
      removeMember(gr1,gr2);
    }
    if (gr2 != null && gr2.isMember(gr1)) {
      removeMember(gr2,gr1);
    }
    if (gr1 != null)     removeGroup(gr1);
    if (gr2 != null)     removeGroup(gr2);
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCyclicMembers2() throws RepositoryException, NotExecutableException {
  Group gr1=null;
  Group gr2=null;
  Group gr3=null;
  try {
    gr1=createGroup(getTestPrincipal());
    gr2=createGroup(getTestPrincipal());
    gr3=createGroup(getTestPrincipal());
    assertTrue(addMember(gr1,gr2));
    assertTrue(addMember(gr2,gr3));
    assertFalse(addMember(gr3,gr1));
  }
  finally {
    if (gr1 != null) {
      removeMember(gr1,gr2);
    }
    if (gr2 != null) {
      removeMember(gr2,gr3);
      removeGroup(gr2);
    }
    if (gr3 != null) {
      removeMember(gr3,gr1);
      removeGroup(gr3);
    }
    if (gr1 != null)     removeGroup(gr1);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.RemappingTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuery() throws Exception {
  Iterator<Authorizable> result=getUserManager(session).findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.eq("@my:property",vf.createValue("value")));
    }
  }
);
  assertTrue(result.hasNext());
  assertEquals(user.getID(),result.next().getID());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable2() throws Exception {
  for (  String relPath : unmappedPaths) {
    user.setProperty(relPath,nameValue);
  }
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("my:property","my:value","my:node/my:property2","my:value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyNames2() throws Exception {
  Iterator it=authorizable.getPropertyNames("my:node");
  assertTrue(it.hasNext());
  assertEquals("my:property2",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable3() throws Exception {
  for (  String relPath : unmappedPaths) {
    user.setProperty(relPath,nameValue);
  }
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("my:property","my:value","my:node/my:property2","my:value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value,UserManager.SEARCH_TYPE_USER);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAuthorizablePath() throws Exception {
  assertTrue(user.getPath().startsWith(UserConstants.DEFAULT_USER_PATH));
  String path=authorizable.getPath();
  assertFalse(path.startsWith(UserConstants.DEFAULT_USER_PATH));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasProperty() throws Exception {
  for (  String relPath : mappedPaths) {
    assertTrue(authorizable.hasProperty(relPath));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyNames() throws Exception {
  Iterator it=authorizable.getPropertyNames();
  assertTrue(it.hasNext());
  assertEquals("my:property",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws Exception {
  user.setProperty("prop",superuser.getValueFactory().createValue(true));
  superuser.save();
  session.refresh(false);
  Map<String,String> m=ImmutableMap.of("prop","true","my:property","value","my:node/my:property2","value");
  for (  String relPath : m.keySet()) {
    String value=m.get(relPath);
    Iterator<Authorizable> result=getUserManager(session).findAuthorizables(relPath,value);
    assertTrue(result.hasNext());
    assertEquals(user.getID(),result.next().getID());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.SystemUserImportTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUser() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertTrue(((User)newUser).isSystemUser());
  assertEquals("t",newUser.getPrincipal().getName());
  assertEquals("t",newUser.getID());
  assertTrue(((User)newUser).isDisabled());
  assertEquals("disabledUser",((User)newUser).getDisabledReason());
  Node n=s.getNode(newUser.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("t",n.getName());
  assertEquals("t",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  assertEquals("disabledUser",n.getProperty(UserConstants.REP_DISABLED).getString());
  assertFalse(n.hasProperty(UserConstants.REP_PASSWORD));
  s.save();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : constraintviolation is no longer detected during import
 * but only upon save.
 */
@Test public void testImportIntoNonSystemPath() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  Session s=getImportSession();
  Node target=s.getNode(USERPATH);
  doImport(USERPATH,xml);
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable user=getUserManager().getAuthorizable("t");
  assertNotNull(user);
  assertTrue(target.hasNode("t"));
  assertTrue(target.hasProperty("t/rep:principalName"));
  try {
    s.save();
    fail("Import must be incomplete. Saving changes must fail.");
  }
 catch (  ConstraintViolationException e) {
  }
 finally {
    s.refresh(false);
    if (target.hasNode("t")) {
      target.getNode("t").remove();
      target.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : importing User without password must succeed.
 */
@Test public void testUserWithoutPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable user=getUserManager().getAuthorizable("t");
  assertNotNull(user);
  assertFalse(user.isGroup());
  assertFalse(getImportSession().propertyExists(user.getPath() + "/rep:password"));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportImpersonation() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"uFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "<sv:node sv:name=\"t\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:impersonators\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>"+ "<sv:node sv:name=\"g\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  Authorizable u2=getUserManager().getAuthorizable("g");
  assertNotNull(u2);
  Subject subj=new Subject();
  subj.getPrincipals().add(u2.getPrincipal());
  Impersonation imp=((User)newUser).getImpersonation();
  assertTrue(imp.allows(subj));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Same as {@link #testImportUserWithIdDifferentFromNodeName} but with
 * different order of properties.
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUuidMismatch() throws Exception {
  String mismatchUUID="a358efa4-89f5-3062-b10d-d7316b65649e";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>" + mismatchUUID + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property></sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  assertTrue(target.hasNode("t"));
  Node n=target.getNode("t");
  assertEquals(mismatchUUID,n.getUUID());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNull(newUser);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportWithIntermediatePath() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"some\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d5433be9-68d0-4fba-bf96-efc29f461993</sv:value></sv:property>"+ "<sv:node sv:name=\"intermediate\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d87354a4-037e-4756-a8fb-deb2eb7c5149</sv:value></sv:property>"+ "<sv:node sv:name=\"path\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>24263272-b789-4568-957a-3bcaf99dbab3</sv:value></sv:property>"+ "<sv:node sv:name=\"t3\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0b8854ad-38f0-36c6-9807-928d28195609</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}4358694eeb098c6708ae914a10562ce722bbbc34</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t3</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t3");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t3",newUser.getPrincipal().getName());
  assertEquals("t3",newUser.getID());
  Node n=getImportSession().getNode(newUser.getPath());
  assertTrue(n.isNew());
  Node parent=n.getParent();
  assertFalse(n.isSame(target));
  assertTrue(parent.isNodeType(UserConstants.NT_REP_AUTHORIZABLE_FOLDER));
  assertFalse(parent.getDefinition().isProtected());
  assertTrue(target.hasNode("some"));
  assertTrue(target.hasNode("some/intermediate/path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : password property is not longer mandatory -> multivalued
 * property will just be ignored (instead of throwing ConstraintViolationException
 * upon save).
 */
@Test public void testMultiValuedPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertTrue(target.hasNode("t"));
  assertTrue(target.hasProperty("t/rep:password"));
  assertFalse(target.getProperty("t/rep:password").getDefinition().isProtected());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Node target=getTargetNode();
  assertFalse(target.hasProperty(UserConstants.REP_PASSWORD));
  Authorizable user=getUserManager().getAuthorizable("t");
  assertNotNull(user);
  assertFalse(user.isGroup());
  assertTrue(((User)user).isSystemUser());
  getImportSession().save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.SystemUserTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisable() throws Exception {
  user=createUser(uid);
  user.disable("gone");
  superuser.save();
  assertTrue(user.isDisabled());
  assertEquals("gone",user.getDisabledReason());
  user.disable(null);
  assertFalse(user.isDisabled());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws Exception {
  user=createUser(uid);
  Iterator<Authorizable> iterator=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,user.getPrincipal().getName());
  assertTrue(iterator.hasNext());
  Authorizable authorizable=iterator.next();
  assertNotNull(authorizable);
  assertFalse(authorizable.isGroup());
  assertTrue(((User)authorizable).isSystemUser());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws RepositoryException, NotExecutableException {
  user=createUser(uid);
  assertNotNull(user.getID());
  assertTrue(user.isSystemUser());
  assertFalse(user.isAdmin());
  assertFalse(user.isGroup());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByID() throws RepositoryException, NotExecutableException {
  user=createUser(uid);
  Authorizable authorizable=userMgr.getAuthorizable(user.getID());
  assertNotNull(authorizable);
  assertFalse(authorizable.isGroup());
  assertFalse(((User)authorizable).isAdmin());
  assertTrue(((User)authorizable).isSystemUser());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByPrincipal() throws Exception {
  user=createUser(uid);
  Authorizable authorizable=userMgr.getAuthorizable(user.getPrincipal());
  assertNotNull(authorizable);
  assertFalse(authorizable.isGroup());
  assertFalse(((User)authorizable).isAdmin());
  assertTrue(((User)authorizable).isSystemUser());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportBestEffortTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testImportNonExistingImpersonationBestEffort() throws Exception {
  String principalName="anybody";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:impersonators\" sv:type=\"String\"><sv:value>" + principalName + "</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertFalse(a.isGroup());
  boolean found=false;
  PrincipalIterator it=((User)a).getImpersonation().getImpersonators();
  while (it.hasNext()) {
    Principal p=it.nextPrincipal();
    if (principalName.equals(p.getName())) {
      found=true;
      break;
    }
  }
  assertTrue(found);
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportImpersonationBestEffort() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"uFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "<sv:node sv:name=\"t\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:impersonators\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>"+ "<sv:node sv:name=\"g\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  Authorizable u2=getUserManager().getAuthorizable("g");
  assertNotNull(u2);
  Subject subj=new Subject();
  subj.getPrincipals().add(u2.getPrincipal());
  Impersonation imp=((User)newUser).getImpersonation();
  assertTrue(imp.allows(subj));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportCacheTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since Oak 1.3.4
 */
@Test public void testImportUserWithCache() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"y\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>41529076-9594-360e-ae48-5922904f345d</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>yPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"rep:cache\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>rep:Cache</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\"rep:expiration\" sv:type=\"Long\">"+ "         <sv:value>123456789</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\"rep:groupPrincipalNames\" sv:type=\"String\" sv:multiple=\"true\">"+ "         <sv:value>\"testGroup\"</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  getImportSession().save();
  Authorizable authorizable=getUserManager().getAuthorizable("y");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertFalse(userNode.hasNode("rep:cache"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportFromJackrabbit </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testImportCreatesAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(uid,newUser.getID());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed2() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",movedPath,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0022"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed3() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String originalPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  String expectedPath=Text.getRelativeParent(originalPath,1) + '/' + randomNodeName;
  assertEquals("user path",expectedPath,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplaceFromRenamed() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",Text.getRelativeParent(initialPath,1) + '/' + uid,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,newUser.getID());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",getTargetPath() + '/' + uid,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,uid,newUser.getID());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed3() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String originalPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  String expectedPath=getTargetPath() + '/' + randomNodeName;
  assertEquals("user path",expectedPath,newUser.getPath());
  assertFalse((Text.getRelativeParent(originalPath,1) + '/' + randomNodeName).equals(newUser.getPath()));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemove() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(getTargetPath(),Text.getRelativeParent(newUser.getPath(),1));
  assertFalse(initialPath.equals(newUser.getPath()));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorRemoveFromRenamed2() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl(uid),intermediatePath);
  String initialPath=u.getPath();
  String movedPath=Text.getRelativeParent(initialPath,1) + '/' + randomNodeName;
  importSession.move(initialPath,movedPath);
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + randomNodeName + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals("user path",getTargetPath() + '/' + randomNodeName,newUser.getPath());
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(UserConstants.REP_AUTHORIZABLE_ID,randomNodeName,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  try {
    importSession.save();
    fail("Importing an authorizable with mismatch between authorizableId and uuid must fail.");
  }
 catch (  ConstraintViolationException e) {
    assertTrue(e.getMessage().contains("OakConstraint0021"));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.2
 */
@Test public void testUUIDBehaviorReplace() throws Exception {
  User u=getUserManager().createUser(uid,null,new PrincipalImpl("t"),getTargetPath() + "/foo/bar/test");
  String initialPath=u.getPath();
  importSession.save();
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml,ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING);
  Authorizable newUser=getUserManager().getAuthorizable(uid);
  assertEquals(initialPath,newUser.getPath());
  assertFalse(getTargetPath().equals(Text.getRelativeParent(newUser.getPath(),1)));
  Node n=importSession.getNode(newUser.getPath());
  assertTrue(n.hasProperty(UserConstants.REP_AUTHORIZABLE_ID));
  assertEquals(uid,n.getProperty(UserConstants.REP_AUTHORIZABLE_ID).getString());
  importSession.save();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportHistoryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.3.3
 */
@Test public void testImportUserWithPwdHistory() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"y\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>41529076-9594-360e-ae48-5922904f345d</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>yPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"" + UserConstants.REP_PWD + "\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>"+ UserConstants.NT_REP_PASSWORD+ "</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\""+ UserConstants.REP_PWD_HISTORY+ "\" sv:type=\"String\" sv:multiple=\"true\">"+ "         <sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("y");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PWD_HISTORY));
  assertEquals("{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375",pwdNode.getProperty(UserConstants.REP_PWD_HISTORY).getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportIgnoreTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportInvalidImpersonationIgnore() throws Exception {
  List<String> invalid=new ArrayList<String>();
  invalid.add("anybody");
  invalid.add("administrators");
  invalid.add("t");
  for (  String principalName : invalid) {
    String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property><sv:property sv:name=\"rep:impersonators\" sv:type=\"String\"><sv:value>" + principalName + "</sv:value></sv:property>"+ "</sv:node>";
    Subject subj=new Subject();
    subj.getPrincipals().add(new PrincipalImpl(principalName));
    try {
      doImport(getTargetPath(),xml);
      Authorizable a=getUserManager().getAuthorizable("t");
      if (!a.isGroup()) {
        Impersonation imp=((User)a).getImpersonation();
        Subject s=new Subject();
        s.getPrincipals().add(new PrincipalImpl(principalName));
        assertFalse(imp.allows(s));
        for (PrincipalIterator it=imp.getImpersonators(); it.hasNext(); ) {
          assertFalse(principalName.equals(it.nextPrincipal().getName()));
        }
      }
 else {
        fail("Importing 't' didn't create a User.");
      }
    }
  finally {
      getImportSession().refresh(false);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportPwExpiryTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportExistingUserWithoutExpiryProperty() throws Exception {
  String uid="existing";
  User user=getUserManager().createUser(uid,uid);
  Session s=getImportSession();
  user.changePassword(uid);
  s.save();
  Node userNode=s.getNode(user.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"" + uid + "\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>"+ uid+ "</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>"+ uid+ "Principal</sv:value>"+ "   </sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable(uid);
  userNode=s.getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportUserCreatesPasswordLastModified2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"x\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>9dd4e461-268c-3034-b5c8-564e155c67a6</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>xPrincipal</sv:value>"+ "   </sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("x");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.getDefinition().isProtected());
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  assertTrue(pwdNode.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getDefinition().isProtected());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportUserCreatesPasswordLastModified() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"x\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>9dd4e461-268c-3034-b5c8-564e155c67a6</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>xPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"" + UserConstants.REP_PWD + "\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>"+ UserConstants.NT_REP_PASSWORD+ "</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("x");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.getDefinition().isProtected());
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  assertTrue(pwdNode.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getDefinition().isProtected());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since Oak 1.1
 */
@Test public void testImportUserWithPwdProperties() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"y\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "      <sv:value>rep:User</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\">"+ "      <sv:value>41529076-9594-360e-ae48-5922904f345d</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\">"+ "      <sv:value>pw</sv:value>"+ "   </sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\">"+ "      <sv:value>yPrincipal</sv:value>"+ "   </sv:property>"+ "   <sv:node sv:name=\"" + UserConstants.REP_PWD + "\">"+ "      <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\">"+ "         <sv:value>"+ UserConstants.NT_REP_PASSWORD+ "</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\""+ UserConstants.REP_PASSWORD_LAST_MODIFIED+ "\" sv:type=\"Long\">"+ "         <sv:value>1404036716000</sv:value>"+ "      </sv:property>"+ "      <sv:property sv:name=\"customProp\" sv:type=\"String\">"+ "         <sv:value>abc</sv:value>"+ "      </sv:property>"+ "   </sv:node>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable authorizable=getUserManager().getAuthorizable("y");
  Node userNode=getImportSession().getNode(authorizable.getPath());
  assertTrue(userNode.hasNode(UserConstants.REP_PWD));
  Node pwdNode=userNode.getNode(UserConstants.REP_PWD);
  assertTrue(pwdNode.hasProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED));
  assertEquals(1404036716000L,pwdNode.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getLong());
  assertTrue(pwdNode.hasProperty("customProp"));
  Property custom=pwdNode.getProperty("customProp");
  assertTrue(custom.getDefinition().isProtected());
  assertEquals("abc",custom.getString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : password property is not longer mandatory -> multivalued
 * property will just be ignored (instead of throwing ConstraintViolationException
 * upon save).
 */
@Test public void testMultiValuedPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertTrue(target.hasNode("t"));
  assertTrue(target.hasProperty("t/rep:password"));
  assertFalse(target.getProperty("t/rep:password").getDefinition().isProtected());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportUser() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:disabled\" sv:type=\"String\"><sv:value>disabledUser</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getPrincipal().getName());
  assertEquals("t",newUser.getID());
  assertTrue(((User)newUser).isDisabled());
  assertEquals("disabledUser",((User)newUser).getDisabledReason());
  Node n=getImportSession().getNode(newUser.getPath());
  assertTrue(n.isNew());
  assertTrue(n.getParent().isSame(target));
  assertEquals("t",n.getName());
  assertEquals("t",n.getProperty(UserConstants.REP_PRINCIPAL_NAME).getString());
  assertEquals("{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375",n.getProperty(UserConstants.REP_PASSWORD).getString());
  assertEquals("disabledUser",n.getProperty(UserConstants.REP_DISABLED).getString());
  getImportSession().save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Same as {@link #testImportUserWithIdDifferentFromNodeName} but with
 * different order of properties.
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithIdDifferentFromNodeName2() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t_diff\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Session s=getImportSession();
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportAuthorizableId() throws Exception {
  String mismatchUUID="a358efa4-89f5-3062-b10d-d7316b65649e";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>" + mismatchUUID + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property></sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  assertTrue(target.hasNode("t"));
  Node n=target.getNode("t");
  assertEquals(mismatchUUID,n.getUUID());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNull(newUser);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportWithIntermediatePath() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"some\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d5433be9-68d0-4fba-bf96-efc29f461993</sv:value></sv:property>"+ "<sv:node sv:name=\"intermediate\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>d87354a4-037e-4756-a8fb-deb2eb7c5149</sv:value></sv:property>"+ "<sv:node sv:name=\"path\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>24263272-b789-4568-957a-3bcaf99dbab3</sv:value></sv:property>"+ "<sv:node sv:name=\"t3\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>0b8854ad-38f0-36c6-9807-928d28195609</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}4358694eeb098c6708ae914a10562ce722bbbc34</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t3</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  assertTrue(target.isModified());
  assertTrue(s.hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t3");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t3",newUser.getPrincipal().getName());
  assertEquals("t3",newUser.getID());
  Node n=s.getNode(newUser.getPath());
  assertTrue(n.isNew());
  Node parent=n.getParent();
  assertFalse(n.isSame(target));
  assertTrue(parent.isNodeType(UserConstants.NT_REP_AUTHORIZABLE_FOLDER));
  assertFalse(parent.getDefinition().isProtected());
  assertTrue(target.hasNode("some"));
  assertTrue(target.hasNode("some/intermediate/path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : Importing rep:authorizableId
 */
@Test public void testImportUserWithAuthorizableId() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:authorizableId\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Session s=getImportSession();
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  assertFalse(newUser.isGroup());
  assertEquals("t",newUser.getID());
  assertTrue(s.propertyExists(newUser.getPath() + "/rep:authorizableId"));
  assertEquals("t",s.getProperty(newUser.getPath() + "/rep:authorizableId").getString());
  s.save();
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportImpersonation() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"uFolder\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:AuthorizableFolder</sv:value></sv:property>"+ "<sv:node sv:name=\"t\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:impersonators\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>"+ "<sv:node sv:name=\"g\">"+ "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable newUser=getUserManager().getAuthorizable("t");
  assertNotNull(newUser);
  Authorizable u2=getUserManager().getAuthorizable("g");
  assertNotNull(u2);
  Subject subj=new Subject();
  subj.getPrincipals().add(u2.getPrincipal());
  Impersonation imp=((User)newUser).getImpersonation();
  assertTrue(imp.allows(subj));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : constraintviolation is no longer detected during import
 * but only upon save.
 */
@Test public void testImportGroupIntoUsersTree() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>g</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newGroup=getUserManager().getAuthorizable("g");
  assertNotNull(newGroup);
  assertTrue(target.hasNode("g"));
  assertTrue(target.hasProperty("g/rep:principalName"));
  try {
    getImportSession().save();
    fail("Import must be incomplete. Saving changes must fail.");
  }
 catch (  ConstraintViolationException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 : importing User without password must succeed.
 */
@Test public void testUserWithoutPassword() throws Exception {
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xml);
  Authorizable user=getUserManager().getAuthorizable("t");
  assertNotNull(user);
  assertFalse(user.isGroup());
  assertFalse(getImportSession().propertyExists(user.getPath() + "/rep:password"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPlainTextPassword() throws Exception {
  String plainPw="myPassword";
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>" + plainPw + "</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>t</sv:value></sv:property>"+ "</sv:node>";
  Node target=getTargetNode();
  doImport(getTargetPath(),xml);
  assertTrue(target.isModified());
  assertTrue(getImportSession().hasPendingChanges());
  Authorizable newUser=getUserManager().getAuthorizable("t");
  Node n=getImportSession().getNode(newUser.getPath());
  String pwValue=n.getProperty(UserConstants.REP_PASSWORD).getString();
  assertFalse(plainPw.equals(pwValue));
  assertTrue(pwValue.toLowerCase().startsWith("{sha"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserImportWithActionsTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForSystemUser() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:SystemUser</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tSystemPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  assertTrue(((User)a).isSystemUser());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForUser2() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tPrincipal</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("tPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForUser() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.USER_PRIVILEGE_NAMES,new String[]{Privilege.JCR_ALL}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"t\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:User</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>e358efa4-89f5-3062-b10d-d7316b65649e</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:password\" sv:type=\"String\"><sv:value>{sha1}8efd86fb78a56a5145ed7739dcb00c78581c5375</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>tPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(USERPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("t");
  assertNotNull(a);
  assertFalse(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("tPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessControlActionExecutionForGroup() throws Exception {
  AccessControlAction a1=new AccessControlAction();
  a1.init(securityProvider,ConfigurationParameters.of(AccessControlAction.GROUP_PRIVILEGE_NAMES,new String[]{Privilege.JCR_READ}));
  setAuthorizableActions(a1);
  String xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<sv:node sv:name=\"g\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "   <sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:Group</sv:value></sv:property>"+ "   <sv:property sv:name=\"jcr:uuid\" sv:type=\"String\"><sv:value>b2f5ff47-4366-31b6-a533-d8dc3614845d</sv:value></sv:property>"+ "   <sv:property sv:name=\"rep:principalName\" sv:type=\"String\"><sv:value>gPrincipal</sv:value></sv:property>"+ "</sv:node>";
  doImport(GROUPPATH,xml);
  Authorizable a=getUserManager().getAuthorizable("g");
  assertNotNull(a);
  assertTrue(a.isGroup());
  AccessControlManager acMgr=getImportSession().getAccessControlManager();
  AccessControlPolicy[] policies=acMgr.getPolicies(a.getPath());
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] aces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertEquals(1,aces.length);
  assertEquals("gPrincipal",aces[0].getPrincipal().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserManagerTest </h4><pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupWithExistingPrincipal3() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=createUserId();
  assertFalse(uid.equals(p.getName()));
  User u=null;
  try {
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    Group gr=null;
    try {
      gr=userMgr.createGroup(createGroupId(),p,null);
      fail("Principal " + p.getName() + " is already in use -> must throw AuthorizableExistsException.");
    }
 catch (    AuthorizableExistsException e) {
    }
 finally {
      if (gr != null) {
        gr.remove();
        superuser.save();
      }
    }
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupWithExistingPrincipal2() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=createUserId();
  assertFalse(uid.equals(p.getName()));
  User u=null;
  try {
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    Group gr=null;
    try {
      gr=userMgr.createGroup(p);
      fail("Principal " + p.getName() + " is already in use -> must throw AuthorizableExistsException.");
    }
 catch (    AuthorizableExistsException e) {
    }
 finally {
      if (gr != null) {
        gr.remove();
        superuser.save();
      }
    }
  }
  finally {
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak 1.0 : if collision is added within the same set of transient
 * modifications it will only be detected upon save. in this case RepositoryException
 * is thrown instead of AuthorizableExistsException as the violation is
 * detected by the uniqueness constraint on the corresponding property index.
 */
@Test public void testCreateGroupWithExistingPrincipal4() throws RepositoryException, NotExecutableException {
  Principal p=getTestPrincipal();
  String uid=createUserId();
  assertFalse(uid.equals(p.getName()));
  User u=null;
  Group gr=null;
  try {
    u=userMgr.createUser(uid,"pw",p,null);
    gr=userMgr.createGroup(createGroupId(),p,null);
    superuser.save();
    fail("Principal " + p.getName() + " is already in use -> must throw AuthorizableExistsException.");
  }
 catch (  RepositoryException e) {
  }
 finally {
    if (gr != null) {
      gr.remove();
    }
    if (u != null) {
      u.remove();
    }
    if (superuser.hasPendingChanges()) {
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testCreateWithAbsoluteIntermediatePath() throws Exception {
  Principal p=getTestPrincipal();
  String uid=p.getName();
  User test=null;
  try {
    test=userMgr.createUser(uid,"pw",p,UserConstants.DEFAULT_USER_PATH + "/test");
    superuser.save();
    assertTrue(test.getPath().startsWith(UserConstants.DEFAULT_USER_PATH + "/test"));
  }
  finally {
    if (test != null) {
      test.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserIdDifferentFromPrincipalName() throws RepositoryException, NotExecutableException {
  User u=null;
  Session uSession=null;
  try {
    Principal p=getTestPrincipal();
    String uid=createUserId();
    u=userMgr.createUser(uid,"pw",p,null);
    superuser.save();
    String msg="Creating a User with principal-name distinct from Principal-name must succeed as long as both are unique.";
    assertEquals(msg,u.getID(),uid);
    assertEquals(msg,p.getName(),u.getPrincipal().getName());
    assertFalse(msg,u.getID().equals(u.getPrincipal().getName()));
    uSession=superuser.getRepository().login(new SimpleCredentials(uid,"pw".toCharArray()));
    assertEquals(uid,uSession.getUserID());
  }
  finally {
    if (uSession != null) {
      uSession.logout();
    }
    if (u != null) {
      u.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupIdDifferentFromPrincipalName() throws RepositoryException, NotExecutableException {
  Group g=null;
  try {
    Principal p=getTestPrincipal();
    g=userMgr.createGroup("testGroup",p,null);
    superuser.save();
    String msg="Creating a Group with principal-name distinct from Principal-name must succeed as long as both are unique.";
    assertEquals(msg,g.getID(),"testGroup");
    assertEquals(msg,p.getName(),g.getPrincipal().getName());
    assertFalse(msg,g.getID().equals(g.getPrincipal().getName()));
  }
  finally {
    if (g != null) {
      g.remove();
      superuser.save();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserQueryTest </h4><pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyLike() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.like("profile/@food","m%"));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] food=user.getProperty("profile/food");
        if (food == null || food.length != 1) {
          return false;
        }
 else {
          String value=food[0].getString();
          return value.startsWith("m");
        }
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameMatch() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("a%"));
    }
  }
);
  Iterator<Authorizable> expected=Iterators.filter(authorizables.iterator(),new Predicate<Authorizable>(){
    public boolean apply(    Authorizable authorizable){
      try {
        String name=authorizable.getID();
        Principal principal=authorizable.getPrincipal();
        return name.startsWith("a") || principal != null && principal.getName().startsWith("a");
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyExistence() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@poisonous"));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] poisonous=user.getProperty("poisonous");
        return poisonous != null && poisonous.length == 1;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains3() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.contains("profile/.","grass"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(kangaroo);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-19 type-4 type-8 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetBound() throws RepositoryException {
  List<User> sortedUsers=new ArrayList<User>(users);
  sortedUsers.removeAll(systemDefined);
  Comparator<? super User> comp=new Comparator<User>(){
    public int compare(    User user1,    User user2){
      try {
        Value[] weight1=user1.getProperty("profile/weight");
        assertNotNull(weight1);
        assertEquals(1,weight1.length);
        Value[] weight2=user2.getProperty("profile/weight");
        assertNotNull(weight2);
        assertEquals(1,weight2.length);
        return weight1[0].getDouble() < weight2[0].getDouble() ? -1 : 1;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
        return 0;
      }
    }
  }
;
  Collections.sort(sortedUsers,comp);
  long[] counts={4,0,100000};
  for (  final long count : counts) {
    Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setCondition(builder.eq("profile/@cute",vf.createValue(true)));
        builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING,false);
        builder.setLimit(vf.createValue(1000.0),count);
      }
    }
);
    Iterator<User> expected=Iterators.filter(sortedUsers.iterator(),new Predicate<User>(){
      public boolean apply(      User user){
        try {
          Value[] cute=user.getProperty("profile/cute");
          Value[] weight=user.getProperty("profile/weight");
          return cute != null && cute.length == 1 && cute[0].getBoolean() && weight != null && weight.length == 1 && weight[0].getDouble() > 1000.0;
        }
 catch (        RepositoryException e) {
          fail(e.getMessage());
        }
        return false;
      }
    }
);
    assertSame(expected,result,count);
    assertFalse(result.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCondition1() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.and(builder.eq("profile/@cute",vf.createValue(true)),builder.not(builder.eq("@color",vf.createValue("black")))));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] cute=user.getProperty("profile/cute");
        Value[] black=user.getProperty("color");
        return cute != null && cute.length == 1 && cute[0].getBoolean() && !(black != null && black.length == 1 && black[0].getString().equals("black"));
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderRespectCaseAscendingDoubleValue() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("profile/@weight"));
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING,false);
    }
  }
);
  assertTrue(result.hasNext());
  double prev=Double.MIN_VALUE;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] weight=authorizable.getProperty("profile/weight");
    assertNotNull(weight);
    assertEquals(1,weight.length);
    assertTrue(prev <= weight[0].getDouble());
    prev=weight[0].getDouble();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxCountWithScope() throws Exception {
  final long count=Long.MAX_VALUE;
  final long countjr2=-1;
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setScope("vertebrates",false);
      builder.setLimit(0,countjr2);
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setScope("vertebrates",false);
      builder.setLimit(0,count);
    }
  }
);
  assertSame(expected,result,count);
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * The name matching condition must not only search for node-name and
 * principal name but also needs to take the new rep:authoriableId into
 * account that has been introduced as of Oak 1.0
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2243">OAK-2243</a>
 */
@Test public void testNameMatch2() throws RepositoryException {
  User user=userMgr.createUser("moloch",null,new PrincipalImpl("MolochHorridus"),"reptiles");
  String userPath=user.getPath();
  superuser.move(userPath,Text.getRelativeParent(userPath,1) + "/thorny_dragon");
  superuser.save();
  authorizables.add(user);
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("moloch"));
    }
  }
);
  assertTrue(result.hasNext());
  Authorizable a=result.next();
  assertEquals("moloch",a.getID());
  assertFalse(result.hasNext());
  result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("MolochHorridus"));
    }
  }
);
  assertTrue(result.hasNext());
  a=result.next();
  assertEquals("MolochHorridus",a.getPrincipal().getName());
  assertFalse(result.hasNext());
  result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.nameMatches("thorny_dragon"));
    }
  }
);
  assertTrue(result.hasNext());
  a=result.next();
  assertEquals("thorny_dragon",Text.getName(a.getPath()));
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains4() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.contains("profile/@food","grass"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(kangaroo);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testQueryUserWithSpecialCharId() throws Exception {
  List<String> ids=Lists.newArrayList("'","]");
  for (  String id : ids) {
    User user=null;
    try {
      user=userMgr.createUser(id,"pw");
      superuser.save();
      boolean found=false;
      String query="{\"condition\":[{\"named\":\"" + id + "\"}]}";
      AuthorizableQueryManager queryManager=new AuthorizableQueryManager(userMgr,superuser.getValueFactory());
      Iterator<Authorizable> it=queryManager.execute(query);
      while (it.hasNext() && !found) {
        Authorizable a=it.next();
        found=id.equals(a.getID());
      }
      assertTrue(found);
    }
  finally {
      if (user != null) {
        user.remove();
        superuser.save();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOffset() throws RepositoryException {
  long[] offsets={2,0,3,0,100000};
  long[] counts={4,4,0,100000,100000};
  for (int k=0; k < offsets.length; k++) {
    final long offset=offsets[k];
    final long count=counts[k];
    Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
        builder.setLimit(offset,count);
      }
    }
);
    Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
      public <T>void build(      QueryBuilder<T> builder){
        builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      }
    }
);
    skip(expected,offset);
    assertSame(expected,result,count);
    assertFalse(result.hasNext());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAdminImpersonation() throws Exception {
  final String adminPrincipalName=userMgr.getAuthorizable(superuser.getUserID()).getPrincipal().getName();
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.impersonates(adminPrincipalName));
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null,UserManager.SEARCH_TYPE_USER);
  assertTrue(result.hasNext());
  assertSameElements(expected,result);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindProperty3() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.eq("@numberOfLegs",vf.createValue(8)));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] numberOfLegs=user.getProperty("numberOfLegs");
        return numberOfLegs != null && numberOfLegs.length == 1 && numberOfLegs[0].getLong() == 8;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testScopeWithMax() throws RepositoryException {
  final int offset=0;
  final int count=22;
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setScope("vertebrates",false);
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setLimit(offset,count);
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setScope("vertebrates",false);
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
    }
  }
);
  assertSameElements(expected,result);
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains1() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.contains(".","gold"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(goldenToad);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindProperty2() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.gt("profile/@weight",vf.createValue(2000.0)));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] weight=user.getProperty("profile/weight");
        return weight != null && weight.length == 1 && weight[0].getDouble() > 2000.0;
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains2() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.contains("@color","gold"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(goldenToad);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScopeWithOffset() throws RepositoryException {
  final int offset=5;
  final int count=10000;
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setScope("vertebrates",false);
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setLimit(offset,count);
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setScope("vertebrates",false);
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
    }
  }
);
  skip(expected,offset);
  assertSame(expected,result,count);
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCondition2() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.or(builder.eq("profile/@food",vf.createValue("mice")),builder.eq("profile/@food",vf.createValue("nectar"))));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] food=user.getProperty("profile/food");
        return food != null && food.length == 1 && (food[0].getString().equals("mice") || food[0].getString().equals("nectar"));
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindProperty1() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.eq("@canFly",vf.createValue(true)));
    }
  }
);
  Iterator<User> expected=Iterators.filter(users.iterator(),new Predicate<User>(){
    public boolean apply(    User user){
      try {
        Value[] canFly=user.getProperty("canFly");
        return canFly != null && canFly.length == 1 && canFly[0].getBoolean();
      }
 catch (      RepositoryException e) {
        fail(e.getMessage());
      }
      return false;
    }
  }
);
  assertTrue(result.hasNext());
  assertSameElements(result,expected);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderIgnoreCaseDescending() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@color"));
      builder.setSortOrder("@color",QueryBuilder.Direction.DESCENDING,true);
    }
  }
);
  assertTrue(result.hasNext());
  String prev=null;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] color=authorizable.getProperty("color");
    assertNotNull(color);
    assertEquals(1,color.length);
    assertTrue(prev == null || prev.compareToIgnoreCase(color[0].getString()) >= 0);
    prev=color[0].getString();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxCount() throws Exception {
  final long count=Long.MAX_VALUE;
  final long countjr2=-1;
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setLimit(0,countjr2);
    }
  }
);
  Iterator<Authorizable> expected=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setSortOrder("profile/@weight",QueryBuilder.Direction.ASCENDING);
      builder.setLimit(0,count);
    }
  }
);
  assertSame(expected,result,count);
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortOrderRespectCaseDescending() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.exists("@color"));
      builder.setSortOrder("@color",QueryBuilder.Direction.DESCENDING,false);
    }
  }
);
  assertTrue(result.hasNext());
  String prev=null;
  while (result.hasNext()) {
    Authorizable authorizable=result.next();
    Value[] color=authorizable.getProperty("color");
    assertNotNull(color);
    assertEquals(1,color.length);
    assertTrue(prev == null || prev.compareTo(color[0].getString()) >= 0);
    prev=color[0].getString();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testImpersonation() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(new Query(){
    public <T>void build(    QueryBuilder<T> builder){
      builder.setCondition(builder.impersonates("jackrabbit"));
    }
  }
);
  Iterator<User> expected=Iterators.singletonIterator(elephant);
  assertTrue(result.hasNext());
  assertSameElements(expected,result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.security.user.UserTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsUser() throws RepositoryException {
  Authorizable authorizable=userMgr.getAuthorizable(user.getID());
  assertTrue(authorizable instanceof User);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testChangePasswordWithOldPassword() throws RepositoryException, NotExecutableException {
  try {
    String hash=getNode(user,superuser).getProperty(UserConstants.REP_PASSWORD).getString();
    user.changePassword("changed",testPw);
    superuser.save();
    assertFalse(hash.equals(getNode(user,superuser).getProperty(UserConstants.REP_PASSWORD).getString()));
  }
  finally {
    user.changePassword(testPw);
    superuser.save();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGroup() throws RepositoryException {
  assertFalse(user.isGroup());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisable() throws Exception {
  String reason="readonly user is disabled!";
  user.disable(reason);
  superuser.save();
  assertTrue(user.isDisabled());
  assertEquals(reason,user.getDisabledReason());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testChangePassword() throws RepositoryException, NotExecutableException {
  try {
    String hash=getNode(user,superuser).getProperty(UserConstants.REP_PASSWORD).getString();
    user.changePassword("changed");
    superuser.save();
    assertFalse(hash.equals(getNode(user,superuser).getProperty(UserConstants.REP_PASSWORD).getString()));
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessDisabledUser() throws Exception {
  user.disable("readonly user is disabled!");
  superuser.save();
  assertNotNull(getUserManager(superuser).getAuthorizable(user.getID()));
  assertTrue(((JackrabbitSession)superuser).getPrincipalManager().hasPrincipal(user.getPrincipal().getName()));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessPrincipalOfDisabledUser() throws Exception {
  user.disable("readonly user is disabled!");
  superuser.save();
  Principal principal=user.getPrincipal();
  assertTrue(((JackrabbitSession)superuser).getPrincipalManager().hasPrincipal(principal.getName()));
  assertEquals(principal,((JackrabbitSession)superuser).getPrincipalManager().getPrincipal(principal.getName()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsAdmin() throws NotExecutableException, RepositoryException {
  assertFalse(user.isAdmin());
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEnabledByDefault() throws Exception {
  assertFalse(user.isDisabled());
  assertNull(user.getDisabledReason());
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEnableUser() throws Exception {
  user.disable("readonly user is disabled!");
  superuser.save();
  user.disable(null);
  superuser.save();
  assertFalse(user.isDisabled());
  assertNull(user.getDisabledReason());
  getHelper().getRepository().login(new SimpleCredentials(user.getID(),"pw".toCharArray())).logout();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.jcr.version.HiddenNodeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenChildNode() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addMixin("mix:versionable");
  test.addNode("child");
  session.save();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder testBuilder=builder.getChildNode("test").getChildNode("child");
  testBuilder.child(":hidden").setProperty("property","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode("jcr:frozenNode").getChildNode("child");
  assertTrue(state.exists());
  assertFalse(state.hasChildNode(":hidden"));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test").getChildNode("child");
  assertFalse(state.hasChildNode(":hidden"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenChildProperty() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addMixin("mix:versionable");
  test.addNode("child");
  session.save();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder testBuilder=builder.getChildNode("test").getChildNode("child");
  testBuilder.setProperty(":hiddenProperty","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode(VersionConstants.JCR_FROZENNODE).getChildNode("child");
  assertTrue(state.exists());
  assertFalse(state.hasProperty(":hiddenProperty"));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test").getChildNode("child");
  assertFalse(state.hasProperty(":hiddenProperty"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenProperty() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addMixin("mix:versionable");
  session.save();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder testBuilder=builder.getChildNode("test");
  testBuilder.setProperty(":hiddenProperty","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode(VersionConstants.JCR_FROZENNODE);
  assertTrue(state.exists());
  assertFalse(state.hasProperty(":hiddenProperty"));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test");
  assertFalse(state.hasProperty(":hiddenProperty"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenChildOrderProperty() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  Node child=test.addNode("child");
  child.addNode("a");
  child.addNode("b");
  child.addNode("c");
  test.addMixin("mix:versionable");
  session.save();
  NodeBuilder testBuilder=store.getRoot().builder().getChildNode("test").getChildNode("child");
  assertTrue(testBuilder.hasProperty(TreeConstants.OAK_CHILD_ORDER));
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode(VersionConstants.JCR_FROZENNODE).getChildNode("child");
  assertTrue(state.exists());
  assertTrue(state.hasProperty(TreeConstants.OAK_CHILD_ORDER));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test").getChildNode("child");
  assertTrue(state.hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenTree() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addMixin("mix:versionable");
  session.save();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child(":hidden").setProperty("property","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode("jcr:frozenNode");
  assertTrue(state.exists());
  assertFalse(state.hasChildNode(":hidden"));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test");
  assertTrue(state.hasChildNode(":hidden"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hiddenOrderProperty() throws Exception {
  Node test=session.getRootNode().addNode("test","nt:unstructured");
  test.addNode("a");
  test.addNode("b");
  test.addNode("c");
  test.addMixin("mix:versionable");
  session.save();
  NodeBuilder testBuilder=store.getRoot().builder().getChildNode("test");
  assertTrue(testBuilder.hasProperty(TreeConstants.OAK_CHILD_ORDER));
  session.refresh(false);
  Version v1=vMgr.checkpoint("/test");
  Version v2=vMgr.checkpoint("/test");
  NodeState state=store.getRoot();
  for (  String name : PathUtils.elements(v2.getPath())) {
    state=state.getChildNode(name);
  }
  state=state.getChildNode(VersionConstants.JCR_FROZENNODE);
  assertTrue(state.exists());
  assertTrue(state.hasProperty(TreeConstants.OAK_CHILD_ORDER));
  vMgr.restore(v1,true);
  state=store.getRoot().getChildNode("test");
  assertTrue(state.hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.management.ManagementOperationTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void running() throws InterruptedException {
  final LinkedBlockingDeque<Thread> thread=new LinkedBlockingDeque<Thread>(1);
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      thread.add(currentThread());
      sleep(100000);
      return null;
    }
  }
);
  executor.execute(op);
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(RUNNING,status.getCode());
  thread.poll(5,SECONDS).interrupt();
  try {
    op.get();
    fail("Expected InterruptedException");
  }
 catch (  ExecutionException e) {
    assertTrue(e.getCause() instanceof InterruptedException);
  }
  assertTrue(op.isDone());
  status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertTrue(status.getMessage().contains("test failed: "));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void succeeded() throws InterruptedException, ExecutionException, TimeoutException {
  ManagementOperation<Long> op=newManagementOperation("test",new Callable<Long>(){
    @Override public Long call() throws Exception {
      return 42L;
    }
  }
);
  executor.execute(op);
  assertEquals(42L,(long)op.get(5,SECONDS));
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(SUCCEEDED,status.getCode());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalStateException.class) public void notStarted() throws ExecutionException, InterruptedException {
  ManagementOperation<Integer> op=ManagementOperation.done("test",42);
  assertTrue(op.isDone());
  assertEquals(42,(int)op.get());
  sameThreadExecutor().execute(op);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void failed() throws InterruptedException, TimeoutException {
  final Exception failure=new Exception("fail");
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      throw failure;
    }
  }
);
  executor.execute(op);
  try {
    assertEquals(null,op.get(5,SECONDS));
    fail("Expected " + failure);
  }
 catch (  ExecutionException e) {
    assertEquals(failure,e.getCause());
  }
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertEquals("test failed: " + failure.getMessage(),status.getMessage());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cancelled(){
  ManagementOperation<Void> op=newManagementOperation("test",new Callable<Void>(){
    @Override public Void call() throws Exception {
      return null;
    }
  }
);
  op.cancel(false);
  executor.execute(op);
  assertTrue(op.isDone());
  Status status=op.getStatus();
  assertEquals(op.getId(),status.getId());
  assertEquals(FAILED,status.getCode());
  assertEquals("test cancelled",status.getMessage());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.namepath.NamePathMapperImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testValidateInvalidPaths(){
  assertFalse(JcrPathParser.validate("//"));
  assertFalse(JcrPathParser.validate("/foo//"));
  assertFalse(JcrPathParser.validate("/..//"));
  assertFalse(JcrPathParser.validate("/.."));
  assertFalse(JcrPathParser.validate("/foo/../.."));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.osgi.ObserverTrackerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void unregisterWhenEmpty(){
  tracker.removedService(ref1,null);
  assertTrue(observers.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void registerUnregister(){
  tracker.addingService(ref1);
  assertEquals(ImmutableSet.of(observer1),observers);
  tracker.addingService(ref2);
  assertEquals(ImmutableSet.of(observer1,observer2),observers);
  tracker.removedService(ref1,null);
  assertEquals(ImmutableSet.of(observer2),observers);
  tracker.removedService(ref2,null);
  assertTrue(observers.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void unregisterTwice(){
  tracker.addingService(ref1);
  assertEquals(ImmutableSet.of(observer1),observers);
  tracker.removedService(ref1,null);
  assertTrue(observers.isEmpty());
  tracker.removedService(ref1,null);
  assertTrue(observers.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.osgi.OsgiWhiteboardTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * OAK-3409
 */
@Test public void testDoubleUnregister(){
  BundleContext bundleContext=mock(BundleContext.class);
  OsgiWhiteboard w=new OsgiWhiteboard(bundleContext);
  Runnable r=new Runnable(){
    @Override public void run(){
    }
  }
;
  final AtomicBoolean unregistered=new AtomicBoolean();
  ServiceRegistration sr=new ServiceRegistration(){
    @Override public void unregister(){
      if (unregistered.get()) {
        throw new IllegalStateException("Service already unregistered.");
      }
      unregistered.set(true);
    }
    @Override public void setProperties(    Dictionary properties){
    }
    @Override public ServiceReference getReference(){
      return null;
    }
  }
;
  when(bundleContext.registerService(Runnable.class.getName(),r,new Hashtable<Object,Object>())).thenReturn(sr);
  Registration reg=w.register(Runnable.class,r,new HashMap<String,Object>());
  reg.unregister();
  assertTrue(unregistered.get());
  reg.unregister();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.atomic.AtomicCounterEditorTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void isTimeOut(){
  assertFalse(AtomicCounterEditor.ConsolidatorTask.isTimedOut(0));
  assertFalse(AtomicCounterEditor.ConsolidatorTask.isTimedOut(1));
  assertFalse(AtomicCounterEditor.ConsolidatorTask.isTimedOut(2));
  assertFalse(AtomicCounterEditor.ConsolidatorTask.isTimedOut(4));
  assertFalse(AtomicCounterEditor.ConsolidatorTask.isTimedOut(8));
  assertFalse(AtomicCounterEditor.ConsolidatorTask.isTimedOut(16));
  assertFalse(AtomicCounterEditor.ConsolidatorTask.isTimedOut(32));
  assertTrue(AtomicCounterEditor.ConsolidatorTask.isTimedOut(AtomicCounterEditor.ConsolidatorTask.MAX_TIMEOUT + 1));
  assertTrue(AtomicCounterEditor.ConsolidatorTask.isTimedOut(Long.MAX_VALUE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void checkRevision(){
  NodeBuilder b=EMPTY_NODE.builder();
  PropertyState r=LongPropertyState.createLongProperty("r",10L);
  assertTrue(AtomicCounterEditor.checkRevision(b,null));
  assertFalse(AtomicCounterEditor.checkRevision(b,r));
  b.setProperty(LongPropertyState.createLongProperty(r.getName(),1L));
  assertFalse(AtomicCounterEditor.checkRevision(b,r));
  b.setProperty(LongPropertyState.createLongProperty(r.getName(),10L));
  assertTrue(AtomicCounterEditor.checkRevision(b,r));
  b.setProperty(LongPropertyState.createLongProperty(r.getName(),20L));
  assertTrue(AtomicCounterEditor.checkRevision(b,r));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noHookInWhiteboard() throws CommitFailedException, InterruptedException, ExecutionException {
  NodeStore store=new MemoryNodeStore();
  MyExecutor exec1=new MyExecutor();
  Whiteboard board=new DefaultWhiteboard();
  EditorHook hook1=new EditorHook(new TestableACEProvider(CLUSTER_1,exec1,store,board));
  NodeBuilder builder, root;
  PropertyState p;
  root=store.getRoot().builder();
  builder=root.child("c");
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  store.merge(root,hook1,CommitInfo.EMPTY);
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue(builder.exists());
  p=builder.getProperty(PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PROP_COUNTER);
  assertEquals(1,p.getValue(LONG).longValue());
  assertTrue("without a registered hook it should have fell to sync",exec1.isEmpty());
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue("the counter node should exists",builder.exists());
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId(),PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId()),1);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleNodeAsync() throws CommitFailedException, InterruptedException, ExecutionException {
  NodeStore store=new MemoryNodeStore();
  MyExecutor exec1=new MyExecutor();
  Whiteboard board=new DefaultWhiteboard();
  EditorHook hook1=new EditorHook(new TestableACEProvider(CLUSTER_1,exec1,store,board));
  NodeBuilder builder, root;
  PropertyState p;
  board.register(CommitHook.class,EmptyHook.INSTANCE,null);
  root=store.getRoot().builder();
  builder=root.child("c");
  builder=setMixin(builder);
  builder=incrementBy(builder,INCREMENT_BY_1);
  store.merge(root,hook1,CommitInfo.EMPTY);
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue(builder.exists());
  p=builder.getProperty(PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId());
  assertNotNull(p);
  assertEquals(1,p.getValue(LONG).longValue());
  p=builder.getProperty(PROP_COUNTER);
  assertNull(p);
  exec1.execute();
  builder=store.getRoot().builder().getChildNode("c");
  assertTrue("the counter node should exists",builder.exists());
  assertCounterNodeState(builder,ImmutableSet.of(PREFIX_PROP_COUNTER + CLUSTER_1.getInstanceId(),PREFIX_PROP_REVISION + CLUSTER_1.getInstanceId()),1);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isConsolidate(){
  NodeBuilder b=EMPTY_NODE.builder();
  PropertyState counter, hidden1, hidden2;
  String hidden1Name=PREFIX_PROP_COUNTER + "1";
  String hidden2Name=PREFIX_PROP_COUNTER + "2";
  assertFalse(AtomicCounterEditor.isConsolidate(b));
  counter=LongPropertyState.createLongProperty(PROP_COUNTER,0);
  hidden1=LongPropertyState.createLongProperty(hidden1Name,1);
  b.setProperty(counter);
  b.setProperty(hidden1);
  assertTrue(AtomicCounterEditor.isConsolidate(b));
  counter=LongPropertyState.createLongProperty(PROP_COUNTER,1);
  hidden1=LongPropertyState.createLongProperty(hidden1Name,1);
  hidden2=LongPropertyState.createLongProperty(hidden2Name,1);
  b.setProperty(counter);
  b.setProperty(hidden1);
  b.setProperty(hidden2);
  assertTrue(AtomicCounterEditor.isConsolidate(b));
  counter=LongPropertyState.createLongProperty(PROP_COUNTER,2);
  hidden1=LongPropertyState.createLongProperty(hidden1Name,1);
  hidden2=LongPropertyState.createLongProperty(hidden2Name,1);
  b.setProperty(counter);
  b.setProperty(hidden1);
  b.setProperty(hidden2);
  assertFalse(AtomicCounterEditor.isConsolidate(b));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.SharedDataStoreUtilsTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  dataStore=DataStoreUtils.getBlobStore();
  String repoId1=UUID.randomUUID().toString();
  String repoId2=UUID.randomUUID().toString();
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REPOSITORY.getNameFromId(repoId1));
  DataRecord repo1=dataStore.getMetadataRecord(SharedStoreRecordType.REPOSITORY.getNameFromId(repoId1));
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REPOSITORY.getNameFromId(repoId2));
  DataRecord repo2=dataStore.getMetadataRecord(SharedStoreRecordType.REPOSITORY.getNameFromId(repoId2));
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.MARKED_START_MARKER.getNameFromId(repoId1));
  DataRecord markerRec1=dataStore.getMetadataRecord(SharedStoreRecordType.MARKED_START_MARKER.getNameFromId(repoId1));
  Assert.assertEquals(SharedStoreRecordType.MARKED_START_MARKER.getIdFromName(markerRec1.getIdentifier().toString()),repoId1);
  long lastModifiedMarkerRec1=markerRec1.getLastModified();
  TimeUnit.MILLISECONDS.sleep(100);
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REFERENCES.getNameFromId(repoId1));
  DataRecord rec1=dataStore.getMetadataRecord(SharedStoreRecordType.REFERENCES.getNameFromId(repoId1));
  long lastModifiedRec1=rec1.getLastModified();
  TimeUnit.MILLISECONDS.sleep(25);
  dataStore.addMetadataRecord(new ByteArrayInputStream(new byte[0]),SharedStoreRecordType.REFERENCES.getNameFromId(repoId2));
  DataRecord rec2=dataStore.getMetadataRecord(SharedStoreRecordType.REFERENCES.getNameFromId(repoId2));
  long lastModifiedRec2=rec2.getLastModified();
  Assert.assertEquals(SharedStoreRecordType.REPOSITORY.getIdFromName(repo1.getIdentifier().toString()),repoId1);
  Assert.assertEquals(SharedStoreRecordType.REPOSITORY.getIdFromName(repo2.getIdentifier().toString()),repoId2);
  Assert.assertEquals(SharedStoreRecordType.REFERENCES.getIdFromName(rec1.getIdentifier().toString()),repoId1);
  Assert.assertEquals(SharedStoreRecordType.REFERENCES.getIdFromName(rec2.getIdentifier().toString()),repoId2);
  Assert.assertTrue(SharedDataStoreUtils.refsNotAvailableFromRepos(dataStore.getAllMetadataRecords(SharedStoreRecordType.REPOSITORY.getType()),dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType())).isEmpty());
  long minRefTime=(lastModifiedRec1 <= lastModifiedRec2 ? lastModifiedRec1 : lastModifiedRec2);
  Assert.assertEquals(SharedDataStoreUtils.getEarliestRecord(dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType())).getLastModified(),minRefTime);
  long minMarkerTime=SharedDataStoreUtils.getEarliestRecord(dataStore.getAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType())).getLastModified();
  Assert.assertTrue(minRefTime >= minMarkerTime);
  dataStore.deleteAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType());
  Assert.assertTrue(dataStore.getAllMetadataRecords(SharedStoreRecordType.REFERENCES.getType()).isEmpty());
  dataStore.deleteAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType());
  Assert.assertTrue(dataStore.getAllMetadataRecords(SharedStoreRecordType.MARKED_START_MARKER.getType()).isEmpty());
  Assert.assertEquals(2,dataStore.getAllMetadataRecords(SharedStoreRecordType.REPOSITORY.getType()).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreBlobStoreTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEncodedBlobId() throws Exception {
  BlobId blobId=new BlobId("abc" + BlobId.SEP + "123");
  assertEquals("abc",blobId.blobId);
  assertEquals(123,blobId.length);
  blobId=new BlobId("abc" + BlobId.SEP + "abc"+ BlobId.SEP+ "123");
  assertEquals("abc" + BlobId.SEP + "abc",blobId.blobId);
  assertEquals(123,blobId.length);
  blobId=new BlobId("abc",123);
  assertEquals("abc" + BlobId.SEP + "123",blobId.encodedValue());
  assertTrue(BlobId.isEncoded("abc" + BlobId.SEP + "123"));
  assertFalse(BlobId.isEncoded("abc"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExternalBinary() throws DataStoreException, IOException {
  int maxInlineSize=300;
  int actualSize=maxInlineSize + 10;
  byte[] data=new byte[actualSize];
  new Random().nextBytes(data);
  DataIdentifier testDI=new DataIdentifier("test");
  DataRecord testDR=new ByteArrayDataRecord(data,testDI,"testReference");
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getMinRecordLength()).thenReturn(maxInlineSize);
  when(mockedDS.getRecord(testDI)).thenReturn(testDR);
  when(mockedDS.getRecordIfStored(testDI)).thenReturn(testDR);
  when(mockedDS.addRecord(any(InputStream.class))).thenReturn(testDR);
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  assertFalse(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  assertEquals(testDI,dr.getIdentifier());
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),dr.getStream()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),new BlobStoreInputStream(ds,dr.getIdentifier().toString(),0)));
  assertEquals(dr,ds.getRecordIfStored(dr.getIdentifier()));
  assertEquals(dr,ds.getRecord(dr.getIdentifier()));
  assertEquals(actualSize,ds.getBlobLength(dr.getIdentifier().toString()));
  assertEquals(testDI.toString(),BlobId.of(ds.writeBlob(new ByteArrayInputStream(data))).blobId);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInlineBinary() throws DataStoreException, IOException {
  int maxInlineSize=300;
  DataStore mockedDS=mock(DataStore.class);
  when(mockedDS.getMinRecordLength()).thenReturn(maxInlineSize);
  DataStoreBlobStore ds=new DataStoreBlobStore(mockedDS);
  byte[] data=new byte[maxInlineSize];
  new Random().nextBytes(data);
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  assertTrue(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),dr.getStream()));
  assertTrue(IOUtils.contentEquals(new ByteArrayInputStream(data),new BlobStoreInputStream(ds,dr.getIdentifier().toString(),0)));
  assertEquals(dr,ds.getRecordIfStored(dr.getIdentifier()));
  assertEquals(dr,ds.getRecord(dr.getIdentifier()));
  assertEquals(maxInlineSize,ds.getBlobLength(dr.getIdentifier().toString()));
  assertEquals(dr.getIdentifier().toString(),BlobId.of(ds.writeBlob(new ByteArrayInputStream(data))).blobId);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreServiceTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test @CachingFDS is returned when cacheSize > 0
 */
@Test public void configCachingFDS() throws Exception {
  String nasPath=folder.getRoot().getAbsolutePath() + "/NASPath";
  String cachePath=folder.getRoot().getAbsolutePath() + "/cachePath";
  long cacheSize=100l;
  Map<String,Object> config=new HashMap<String,Object>();
  config.put("repository.home",folder.getRoot().getAbsolutePath());
  config.put(FileDataStoreService.CACHE_SIZE,cacheSize);
  config.put(FileDataStoreService.PATH,nasPath);
  config.put(FileDataStoreService.CACHE_PATH,cachePath);
  FileDataStoreService fdsSvc=new FileDataStoreService();
  DataStore ds=fdsSvc.createDataStore(context.componentContext(),config);
  PropertiesUtil.populate(ds,config,false);
  ds.init(folder.getRoot().getAbsolutePath());
  assertTrue("not instance of CachingFDS",ds instanceof CachingFDS);
  CachingFDS cds=(CachingFDS)ds;
  assertEquals("cachesize not equal",cacheSize,cds.getCacheSize());
  assertEquals("cachepath not equal",cachePath,cds.getPath());
  Backend backend=cds.getBackend();
  Properties props=(Properties)getField(backend,"properties");
  assertEquals("path not equal",nasPath,props.getProperty(FSBackend.FS_BACKEND_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test to verify @FileDataStore is returned if cacheSize is not configured.
 */
@Test public void configFileDataStore() throws Exception {
  String nasPath=folder.getRoot().getAbsolutePath() + "/NASPath";
  String cachePath=folder.getRoot().getAbsolutePath() + "/cachePath";
  Map<String,Object> config=new HashMap<String,Object>();
  config.put("repository.home",folder.getRoot().getAbsolutePath());
  config.put(FileDataStoreService.PATH,nasPath);
  config.put(FileDataStoreService.CACHE_PATH,cachePath);
  FileDataStoreService fdsSvc=new FileDataStoreService();
  DataStore ds=fdsSvc.createDataStore(context.componentContext(),config);
  PropertiesUtil.populate(ds,config,false);
  ds.init(folder.getRoot().getAbsolutePath());
  assertTrue("not instance of FileDataStore",ds instanceof FileDataStore);
  FileDataStore fds=(FileDataStore)ds;
  assertEquals("path not equal",nasPath,fds.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.DataStoreTextWriterTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonExistingEntry() throws Exception {
  File fdsDir=temporaryFolder.newFolder();
  FileDataStore fds=DataStoreUtils.createFDS(fdsDir,0);
  ByteArrayInputStream is=new ByteArrayInputStream("hello".getBytes());
  DataRecord dr=fds.addRecord(is);
  File writerDir=temporaryFolder.newFolder();
  DataStoreTextWriter w=new DataStoreTextWriter(writerDir,false);
  String id=dr.getIdentifier().toString();
  assertFalse(w.isProcessed(id));
  assertNull(w.getText("/a",new IdBlob("foo",id)));
  w.write(id,"foo");
  assertTrue(w.isProcessed(id));
  ExtractedText et=w.getText("/a",new IdBlob("foo",id));
  assertEquals("foo",et.getExtractedText());
  assertEquals(ExtractionResult.SUCCESS,et.getExtractionResult());
  w.markEmpty("a");
  assertTrue(w.isProcessed("a"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void basicOperation() throws Exception {
  File fdsDir=temporaryFolder.newFolder();
  FileDataStore fds=DataStoreUtils.createFDS(fdsDir,0);
  ByteArrayInputStream is=new ByteArrayInputStream("hello".getBytes());
  DataRecord dr=fds.addRecord(is);
  File writerDir=temporaryFolder.newFolder();
  TextWriter writer=new DataStoreTextWriter(writerDir,false);
  writer.write(dr.getIdentifier().toString(),"hello");
  FileDataStore fds2=DataStoreUtils.createFDS(writerDir,0);
  DataRecord dr2=fds2.getRecordIfStored(dr.getIdentifier());
  is.reset();
  assertTrue(IOUtils.contentEquals(is,dr2.getStream()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.InMemoryDataRecordTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetInstance() throws Exception {
  int length=400;
  byte[] data=new byte[length];
  new Random().nextBytes(data);
  DataRecord dr=InMemoryDataRecord.getInstance(data);
  assertTrue(InMemoryDataRecord.isInstance(dr.getIdentifier().toString()));
  DataRecord dr2=InMemoryDataRecord.getInstance(dr.getIdentifier().toString());
  assertTrue(IOUtils.contentEquals(dr.getStream(),dr2.getStream()));
  assertTrue(IOUtils.contentEquals(dr.getStream(),new ByteArrayInputStream(data)));
  assertEquals(length,dr.getLength());
  assertEquals(dr2.getLength(),dr.getLength());
  assertEquals(dr,dr2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.blob.datastore.OakFileDataStoreTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNoOpMap() throws Exception {
  Map<String,String> noop=new OakFileDataStore.NoOpMap<String,String>();
  noop.put("a","b");
  noop.remove("foo");
  assertTrue(noop.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BasicDocumentStoreTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreatePartialFailure(){
  String bid=this.getClass().getName() + ".testCreatePartialFailure-";
  int cnt=10;
  assertTrue(cnt > 8);
  for (int i=0; i < cnt; i++) {
    super.ds.remove(Collection.NODES,bid + i);
    removeMe.add(bid + i);
  }
  int pre=cnt / 2;
  UpdateOp up=new UpdateOp(bid + pre,true);
  up.set("_id",bid + pre);
  up.set("foo","bar");
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  Set<String> toCreate=new HashSet<String>();
  Set<String> toCreateFailEarly=new HashSet<String>();
  List<UpdateOp> ups=new ArrayList<UpdateOp>();
  for (int i=0; i < cnt; i++) {
    UpdateOp op=new UpdateOp(bid + i,true);
    op.set("_id",bid + i);
    op.set("foo","qux");
    ups.add(op);
    if (i != pre) {
      toCreate.add(bid + i);
    }
    if (i < pre) {
      toCreateFailEarly.add(bid + i);
    }
  }
  assertFalse(super.ds.create(Collection.NODES,ups));
  Set<String> created=new HashSet<String>();
  for (int i=0; i < cnt; i++) {
    boolean present=null != super.ds.find(Collection.NODES,bid + i,0);
    if (i == pre && !present) {
      fail(super.dsname + ": batch update removed previously existing node " + (bid + i));
    }
 else     if (present && i != pre) {
      created.add(bid + i);
    }
  }
  toCreate.removeAll(created);
  if (created.isEmpty()) {
    LOG.info(super.dsname + ": create() apparently is atomic");
  }
 else   if (created.size() == toCreate.size()) {
    LOG.info(super.dsname + ": create() apparently is best-effort");
  }
 else   if (created.equals(toCreateFailEarly)) {
    LOG.info(super.dsname + ": create() stops at first failure");
  }
 else {
    LOG.info(super.dsname + ": create() created: " + created+ ", missing: "+ toCreate);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeleteNonExistingMultiple(){
  String id=this.getClass().getName() + ".testDeleteNonExistingMultiple-" + UUID.randomUUID();
  UpdateOp up=new UpdateOp(id + "-2",true);
  up.set("_id",id + "-2");
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  List<String> todelete=new ArrayList<String>();
  todelete.add(id + "-2");
  todelete.add(id);
  ds.remove(Collection.NODES,todelete);
  Document d=ds.find(Collection.NODES,id + "-2");
  assertTrue(d == null);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddAndRemove(){
  String id=this.getClass().getName() + ".testAddAndRemove";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConditionalUpdate(){
  String id=this.getClass().getName() + ".testConditionalUpdate";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  String existingProp="_recoverylock";
  String existingRevisionProp="recoverylock";
  String nonExistingProp="_qux";
  String nonExistingRevisionProp="qux";
  Revision r=new Revision(1,1,1);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set(existingProp,"lock");
  up.setMapEntry(existingRevisionProp,r,"lock");
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.notEquals(nonExistingProp,"none");
  NodeDocument result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(nonExistingProp,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.notEquals(nonExistingRevisionProp,r,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(nonExistingRevisionProp,r,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingProp,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingProp,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingRevisionProp,r,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingRevisionProp,r,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.notEquals(existingProp,"lock");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingProp,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.notEquals(existingRevisionProp,r,"lock");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingRevisionProp,r,null);
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingProp,"lock");
  up.set(existingProp,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.equals(existingRevisionProp,r,"lock");
  up.setMapEntry(existingRevisionProp,r,"none");
  result=super.ds.findAndUpdate(Collection.NODES,up);
  assertNotNull(result);
  removeMe.add(id);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuery(){
  String base=this.getClass().getName() + ".testQuery-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "A",5));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "4"));
  assertFalse(result.contains(base + "5"));
  result=getKeys(ds.query(Collection.NODES,base,base + "A",20));
  assertEquals(10,result.size());
  assertTrue(result.contains(base + "0"));
  assertTrue(result.contains(base + "9"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateMultiple(){
  String id=this.getClass().getName() + ".testUpdateMultiple";
  super.ds.remove(Collection.NODES,id);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  List<String> toupdate=new ArrayList<String>();
  toupdate.add(id + "-" + UUID.randomUUID());
  toupdate.add(id);
  UpdateOp up2=new UpdateOp(id,false);
  up2.set("foo","bar");
  ds.update(Collection.NODES,toupdate,up2);
  ds.invalidateCache();
  Document d=ds.find(Collection.NODES,id);
  assertNotNull(d);
  assertEquals(id,d.getId());
  assertEquals("bar",d.get("foo").toString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterestingStrings(){
  String[] tests=new String[]{"simple:foo","cr:a\n\b","dquote:a\"b","bs:a\\b","euro:a\u201c","gclef:\uD834\uDD1E","tab:a\tb","nul:a\u0000b","brokensurrogate:\ud800"};
  for (  String t : tests) {
    int pos=t.indexOf(":");
    String testname=t.substring(0,pos);
    String test=t.substring(pos + 1);
    String id=this.getClass().getName() + ".testInterestingStrings-" + testname;
    super.ds.remove(Collection.NODES,id);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("foo",test);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("failed to insert a document with property value of " + test + " ("+ testname+ ") in "+ super.dsname,success);
    super.ds.invalidateCache();
    NodeDocument nd=super.ds.find(Collection.NODES,id);
    assertEquals("failure to round-trip " + testname + " through "+ super.dsname,test,nd.get("foo"));
    super.ds.remove(Collection.NODES,id);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifiedMaxUpdateQuery(){
  String id=this.getClass().getName() + ".testModifiedMaxUpdate";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",1000L);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  UpdateOp up2=new UpdateOp(id,true);
  up2.set("_id",id);
  up2.max("_modified",100L);
  super.ds.findAndUpdate(Collection.NODES,up2);
  super.ds.invalidateCache();
  String startId=this.getClass().getName() + ".testModifiedMaxUpdatd";
  String endId=this.getClass().getName() + ".testModifiedMaxUpdatf";
  List<NodeDocument> results=super.ds.query(Collection.NODES,startId,endId,"_modified",1000,1);
  assertEquals("document not found, maybe indexed _modified property not properly updated",1,results.size());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyDeletedOnce(){
  String id=this.getClass().getName() + ".testModifyDeletedOnce";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set(NodeDocument.DELETED_ONCE,Boolean.FALSE);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  NodeDocument nd=super.ds.find(Collection.NODES,id,0);
  assertNotNull(nd);
  Boolean dovalue=(Boolean)nd.get(NodeDocument.DELETED_ONCE);
  if (dovalue != null) {
    assertEquals(dovalue.booleanValue(),Boolean.FALSE);
  }
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set(NodeDocument.DELETED_ONCE,Boolean.TRUE);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  nd=super.ds.find(Collection.NODES,id,0);
  assertNotNull(nd);
  assertNotNull(nd.get(NodeDocument.DELETED_ONCE));
  assertEquals(((Boolean)nd.get(NodeDocument.DELETED_ONCE)).booleanValue(),Boolean.TRUE);
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterestingPropLengths() throws UnsupportedEncodingException {
  int lengths[]={1,10,100,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000,11000,12000,13000,14000,15000,16000,20000};
  for (  int test : lengths) {
    String id=this.getClass().getName() + ".testInterestingPropLengths-" + test;
    String pval=generateString(test,true);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("foo",pval);
    super.ds.remove(Collection.NODES,id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("failed to insert a document with property of length " + test + "(ASCII) in "+ super.dsname,success);
    super.ds.remove(Collection.NODES,id);
  }
  for (  int test : lengths) {
    String id=this.getClass().getName() + ".testInterestingPropLengths-" + test;
    String pval=generateString(test,false);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("foo",pval);
    super.ds.remove(Collection.NODES,id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("failed to insert a document with property of length " + test + " (potentially non-ASCII, actual octet length with UTF-8 encoding: "+ pval.getBytes("UTF-8").length+ ") in "+ super.dsname,success);
    if (success) {
      try {
        super.ds.findAndUpdate(Collection.NODES,up);
      }
 catch (      Exception ex) {
        ex.printStackTrace(System.err);
        fail("failed to update a document with property of length " + test + " (potentially non-ASCII, actual octet length with UTF-8 encoding: "+ pval.getBytes("UTF-8").length+ ") in "+ super.dsname);
      }
    }
    super.ds.remove(Collection.NODES,id);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConditionalUpdateForbidden(){
  String id=this.getClass().getName() + ".testConditionalupdateForbidden";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  try {
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.equals("foo","bar");
    super.ds.create(Collection.NODES,Collections.singletonList(up));
    fail("conditional create should fail");
  }
 catch (  IllegalStateException expected) {
  }
  UpdateOp cup=new UpdateOp(id,true);
  cup.set("_id",id);
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(cup)));
  removeMe.add(id);
  try {
    UpdateOp up=new UpdateOp(id,false);
    up.set("_id",id);
    up.equals("foo","bar");
    super.ds.createOrUpdate(Collection.NODES,up);
    fail("conditional createOrUpdate should fail");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    UpdateOp up=new UpdateOp(id,false);
    up.set("_id",id);
    up.equals("foo","bar");
    super.ds.createOrUpdate(Collection.NODES,Collections.singletonList(up));
    fail("conditional createOrUpdate should fail");
  }
 catch (  IllegalArgumentException expected) {
  }
  try {
    UpdateOp up=new UpdateOp(id,false);
    up.set("_id",id);
    up.equals("foo","bar");
    super.ds.update(Collection.NODES,Collections.singletonList(id),up);
    fail("conditional update should fail");
  }
 catch (  IllegalArgumentException expected) {
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryBinary(){
  String base=this.getClass().getName() + ".testQueryBinary-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set(NodeDocument.HAS_BINARY_FLAG,i % 2L);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "Z",NodeDocument.HAS_BINARY_FLAG,NodeDocument.HAS_BINARY_VAL,1000));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "1"));
  assertFalse(result.contains(base + "0"));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryCollation(){
  String base="2:/" + this.getClass().getName() + ".testQueryCollation";
  List<UpdateOp> creates=new ArrayList<UpdateOp>();
  List<String> expected=new ArrayList<String>();
  for (  char c : "!\"#$%&'()*+,-./0123456789:;<=>?@AZ[\\]^_`az{|}~".toCharArray()) {
    String id=base + c;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    creates.add(up);
    removeMe.add(id);
    id=base + "/" + c;
    up=new UpdateOp(id,true);
    up.set("_id",id);
    creates.add(up);
    expected.add(id);
    removeMe.add(id);
  }
  boolean success=super.ds.create(Collection.NODES,creates);
  assertTrue("documents not created",success);
  List<String> result=getKeys(ds.query(Collection.NODES,base + "/",base + "0",1000));
  List<String> diff=new ArrayList<String>();
  diff.addAll(result);
  diff.removeAll(expected);
  if (!diff.isEmpty()) {
    fail("unexpected query results (broken collation handling in persistence?): " + diff);
  }
  diff=new ArrayList<String>();
  diff.addAll(expected);
  diff.removeAll(result);
  if (!diff.isEmpty()) {
    fail("missing query results (broken collation handling in persistence?): " + diff);
  }
  assertEquals("incorrect result ordering in query result (broken collation handling in persistence?)",expected,result);
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCollisionsModCount(){
  String id=this.getClass().getName() + ".testCollisionsModCount";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  Revision revision=Revision.fromString("r0-0-1");
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.setMapEntry("_collisions",revision,"foo");
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  nd=super.ds.find(Collection.NODES,id);
  assertNotNull(nd);
  Number cmc=(Number)nd.get("_collisionsModCount");
  if (cmc == null) {
  }
 else {
    Revision revision2=Revision.fromString("r0-0-2");
    UpdateOp up2=new UpdateOp(id,false);
    up2.set("_id",id);
    up2.setMapEntry("_collisions",revision2,"foobar");
    NodeDocument old=super.ds.findAndUpdate(Collection.NODES,up2);
    assertNotNull(old);
    nd=super.ds.find(Collection.NODES,id,0);
    assertNotNull(nd);
    Number cmc2=(Number)nd.get("_collisionsModCount");
    assertNotNull(cmc2);
    assertTrue(cmc2.longValue() > cmc.longValue());
    UpdateOp up3=new UpdateOp(id,false);
    up3.set("_id",id);
    up3.set("foo","bar");
    old=super.ds.findAndUpdate(Collection.NODES,up3);
    assertNotNull(old);
    nd=super.ds.find(Collection.NODES,id,0);
    assertNotNull(nd);
    Number cmc3=(Number)nd.get("_collisionsModCount");
    assertNotNull(cmc3);
    assertTrue(cmc2.longValue() == cmc3.longValue());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyModified(){
  String id=this.getClass().getName() + ".testModifyModified";
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",1000L);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.max("_modified",2000L);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  NodeDocument nd=super.ds.find(Collection.NODES,id,0);
  assertEquals(((Number)nd.get("_modified")).longValue(),2000L);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set("_modified",1500L);
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  nd=super.ds.find(Collection.NODES,id,0);
  assertEquals(((Number)nd.get("_modified")).longValue(),1500L);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateModified(){
  String id=this.getClass().getName() + ".testUpdateModified";
  super.ds.remove(Collection.NODES,id);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
  assertTrue(success);
  removeMe.add(id);
  ds.invalidateCache();
  Document d=super.ds.find(Collection.NODES,id);
  Object m=d.get("_modified");
  assertNull("_modified should be null until set",m);
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_modified",123L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("123",m.toString());
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.max("_modified",122L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("123",m.toString());
  up=new UpdateOp(id,true);
  up.set("_id",id);
  up.max("_modified",124L);
  super.ds.findAndUpdate(Collection.NODES,up);
  ds.invalidateCache();
  d=super.ds.find(Collection.NODES,id);
  m=d.get("_modified");
  assertNotNull("_modified should now be != null",m);
  assertEquals("124",m.toString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepeatingUpdatesOnSQLServer(){
  String id=this.getClass().getName() + ".testRepeatingUpdatesOnSQLServer";
  NodeDocument nd=super.ds.find(Collection.NODES,id);
  if (nd != null) {
    super.ds.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  assertTrue(super.ds.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set("f0",generateConstantString(3000));
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  up=new UpdateOp(id,false);
  up.set("_id",id);
  up.set("f1",generateConstantString(967));
  super.ds.update(Collection.NODES,Collections.singletonList(id),up);
  NodeDocument doc=super.ds.find(Collection.NODES,id,0);
  assertNotNull(doc);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryDeletedOnce(){
  String base=this.getClass().getName() + ".testQueryDeletedOnce-";
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set(NodeDocument.DELETED_ONCE,Boolean.valueOf(i % 2 == 0));
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  List<String> result=getKeys(ds.query(Collection.NODES,base,base + "Z",NodeDocument.DELETED_ONCE,1L,1000));
  assertEquals(5,result.size());
  assertTrue(result.contains(base + "0"));
  assertFalse(result.contains(base + "1"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMaxIdAscii(){
  int result=testMaxId(true);
  assertTrue("needs to support keys of 512 bytes length, but only supports " + result,result >= 512);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BlobReferenceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test() throws Exception {
  DocumentNodeStore s=new DocumentMK.Builder().getNodeStore();
  NodeBuilder a=s.getRoot().builder();
  HashSet<String> set=new HashSet<String>();
  for (int i=0; i < 100; i++) {
    Blob b=a.createBlob(randomStream(i,10));
    set.add(new ReferencedBlob(b,"/c" + i).toString());
    a.child("c" + i).setProperty("x",b);
  }
  s.merge(a,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Iterator<ReferencedBlob> it=s.getReferencedBlobsIterator();
  while (it.hasNext()) {
    ReferencedBlob b=it.next();
    set.remove(b.toString());
  }
  assertTrue(set.isEmpty());
  s.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.BulkCreateOrUpdateTest </h4><pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This method adds a few updateOperations modifying the same document.
 */
@Test public void testUpdateSameDocument(){
  final int amount=5;
  List<UpdateOp> updates=new ArrayList<UpdateOp>(amount);
  String id=this.getClass().getName() + ".testUpdateSameDocument";
  removeMe.add(id);
  for (int i=0; i < amount; i++) {
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("update_id",i);
    up.set("prop_" + i,100);
    updates.add(up);
  }
  List<NodeDocument> docs=ds.createOrUpdate(Collection.NODES,updates);
  assertEquals(amount,docs.size());
  assertNull("The old value should be null for the first update",docs.get(0));
  Long prevModCount=null;
  for (int i=1; i < amount; i++) {
    Long modCount=docs.get(i).getModCount();
    if (prevModCount != null) {
      assertNotNull(modCount);
      assertTrue("_modCount, when present, must be increasing, but changed from " + prevModCount + " to "+ modCount,prevModCount.longValue() < modCount.longValue());
    }
    prevModCount=modCount;
    assertEquals("The old value is not correct",Long.valueOf(i - 1),docs.get(i).get("update_id"));
  }
  NodeDocument newDoc=ds.find(Collection.NODES,id);
  if (newDoc.getModCount() != null) {
    assertEquals("The final mod count is not correct",Long.valueOf(5),newDoc.getModCount());
  }
  for (int i=0; i < amount; i++) {
    assertEquals("The value is not correct",100l,newDoc.get("prop_" + i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CacheConsistencyRDBTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void cacheConsistency() throws Exception {
  mk.commit("/","+\"node\":{}",null,null);
  mk.commit("/node","+\"child\":{}",null,null);
  store.invalidateNodeDocument(Utils.getIdFromPath("/node"));
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      store.query(NODES,Utils.getKeyLowerLimit("/"),Utils.getKeyUpperLimit("/"),10);
    }
  }
,"query");
  store.semaphores.put(t,new Semaphore(0));
  t.start();
  while (!store.semaphores.get(t).hasQueuedThreads()) {
    Thread.sleep(10);
  }
  final Semaphore done=new Semaphore(0);
  new Thread(new Runnable(){
    @Override public void run(){
      mk.runBackgroundOperations();
      done.release();
    }
  }
,"mkbg").start();
  done.tryAcquire(1,TimeUnit.SECONDS);
  store.invalidateNodeDocument(Utils.getIdFromPath("/node"));
  store.semaphores.get(t).release();
  t.join();
  NodeState root=mk.getNodeStore().getRoot();
  assertTrue(root.getChildNode("node").getChildNode("child").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CacheConsistencyTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void cacheConsistency() throws Exception {
  mk.commit("/","+\"node\":{}",null,null);
  mk.commit("/node","+\"child\":{}",null,null);
  store.invalidateCache(NODES,Utils.getIdFromPath("/node"));
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      store.query(NODES,Utils.getKeyLowerLimit("/"),Utils.getKeyUpperLimit("/"),10);
    }
  }
);
  store.semaphores.put(t,new Semaphore(0));
  t.start();
  while (!store.semaphores.get(t).hasQueuedThreads()) {
    Thread.sleep(10);
  }
  final Semaphore done=new Semaphore(0);
  new Thread(new Runnable(){
    @Override public void run(){
      mk.runBackgroundOperations();
      done.release();
    }
  }
).start();
  done.tryAcquire(1,TimeUnit.SECONDS);
  store.semaphores.get(t).release();
  t.join();
  NodeState root=mk.getNodeStore().getRoot();
  assertTrue(root.getChildNode("node").getChildNode("child").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CheckpointsTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void crossClusterCheckpointNewClusterNode() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("foo");
  ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  String checkpoint=ns1.checkpoint(Long.MAX_VALUE);
  b1=ns1.getRoot().builder();
  b1.child("bar");
  ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("baz");
  ns2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState root=ns2.retrieve(checkpoint);
  assertNotNull(root);
  assertTrue(root.hasChildNode("foo"));
  assertFalse(root.hasChildNode("bar"));
  assertFalse(root.hasChildNode("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readOldFormat() throws Exception {
  clock.waitUntil(System.currentTimeMillis());
  DocumentStore docStore=store.getDocumentStore();
  Map<String,String> empty=Collections.emptyMap();
  Revision r=Revision.fromString(store.checkpoint(Integer.MAX_VALUE,empty));
  Document doc=docStore.find(Collection.SETTINGS,"checkpoint");
  assertNotNull(doc);
  @SuppressWarnings("unchecked") Map<Revision,String> data=(Map<Revision,String>)doc.get("data");
  assertNotNull(data);
  assertEquals(1,data.size());
  assertTrue(data.containsKey(r));
  UpdateOp update=new UpdateOp("checkpoint",false);
  long expires=clock.getTime() + 1000 + Integer.MAX_VALUE;
  update.setMapEntry("data",r,String.valueOf(expires));
  assertNotNull(docStore.findAndUpdate(Collection.SETTINGS,update));
  Checkpoints.Info info=store.getCheckpoints().getCheckpoints().get(r);
  assertNotNull(info);
  assertEquals(expires,info.getExpiryTime());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void crossClusterReadOldCheckpoint() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("foo");
  ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  Revision headRev=Revision.fromString(ns1.getHeadRevision().toString());
  long expires=Long.MAX_VALUE;
  String data="{\"expires\":\"" + expires + "\"}";
  UpdateOp update=new UpdateOp("checkpoint",false);
  update.setMapEntry("data",headRev,data);
  store.createOrUpdate(Collection.SETTINGS,update);
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("baz");
  ns2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState root=ns2.retrieve(headRev.toString());
  assertNotNull(root);
  assertTrue(root.hasChildNode("foo"));
  assertFalse(root.hasChildNode("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void crossClusterNodeCheckpoint() throws Exception {
  final int asyncDelay=(int)TimeUnit.MINUTES.toMillis(1);
  DocumentStore store=new MemoryDocumentStore();
  final DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(asyncDelay).getNodeStore();
  final DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(asyncDelay).getNodeStore();
  NodeBuilder builder=ns1.getRoot().builder();
  builder.child("foo");
  ns1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  String cp1=ns1.checkpoint(Long.MAX_VALUE);
  NodeState root=ns2.retrieve(cp1);
  assertNotNull(root);
  assertTrue(root.hasChildNode("foo"));
  ns2.release(cp1);
  builder=ns1.getRoot().builder();
  builder.child("bar");
  ns1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final String cp2=ns1.checkpoint(Long.MAX_VALUE);
  final NodeState state[]=new NodeState[1];
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      state[0]=ns2.retrieve(cp2);
    }
  }
);
  t.start();
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  t.join();
  assertNotNull(state[0]);
  assertTrue(state[0].hasChildNode("bar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterInfoTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renewLease() throws InterruptedException {
  MemoryDocumentStore mem=new MemoryDocumentStore();
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  ClusterNodeInfo.setClock(clock);
  DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(mem).setAsyncDelay(0).setLeaseCheck(false).getNodeStore();
  ClusterNodeInfo info=ns.getClusterInfo();
  assertNotNull(info);
  long leaseEnd=getLeaseEndTime(ns);
  clock.waitUntil(clock.getTime() + ClusterNodeInfo.DEFAULT_LEASE_UPDATE_INTERVAL_MILLIS - 1000);
  ns.renewClusterIdLease();
  assertEquals(leaseEnd,getLeaseEndTime(ns));
  clock.waitUntil(clock.getTime() + 2000);
  ns.renewClusterIdLease();
  assertTrue(getLeaseEndTime(ns) > leaseEnd);
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterNodeRestartTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void restart() throws Exception {
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(1).setAsyncDelay(0).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(2).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns1.getRoot().builder();
  builder.child("foo").child("bar");
  merge(ns1,builder);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  builder=ns2.getRoot().builder();
  builder.child("foo").child("bar").setProperty("p","v");
  merge(ns2,builder);
  assertTrue(ns2.getRoot().getChildNode("foo").getChildNode("bar").hasProperty("p"));
  ns2.dispose();
  ns1.runBackgroundOperations();
  assertTrue(ns1.getRoot().getChildNode("foo").getChildNode("bar").hasProperty("p"));
  ns2=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(2).setAsyncDelay(0).getNodeStore();
  assertTrue(ns2.getRoot().getChildNode("foo").getChildNode("bar").hasProperty("p"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterRevisionComparisonTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void revisionComparisonTwoClusterNodes() throws Exception {
  DocumentNodeStore c1=createNS(1);
  DocumentNodeStore c2=createNS(2);
  createNode(c1,"/a");
  runBgOps(c1,c2);
  createNode(c2,"/a/c2");
  createNode(c1,"/a/c1");
  runBgOps(c2);
  runBgOps(c1);
  DocumentNodeState c1ns1=c1.getRoot();
  NodeState a=c1ns1.getChildNode("a");
  assertTrue("/a/c1 missing",a.hasChildNode("c1"));
  assertTrue("/a/c2 missing",a.hasChildNode("c2"));
  c1.invalidateNodeCache("/a/c1",((DocumentNodeState)a).getLastRevision());
  c1.invalidateNodeCache("/a/c2",((DocumentNodeState)a).getLastRevision());
  runBgOps(c1);
  assertTrue("/a/c1 disappeared",a.hasChildNode("c1"));
  assertTrue("/a/c2 disappeared",a.hasChildNode("c2"));
  c1ns1=c1.getRoot();
  c1.invalidateNodeCache("/",c1ns1.getRevision());
  c1ns1=c1.getRoot();
  c1.invalidateNodeCache("/a",c1ns1.getLastRevision());
  assertTrue("/a missing",c1ns1.hasChildNode("a"));
  a=c1ns1.getChildNode("a");
  c1.invalidateNodeCache("/a/c1",((DocumentNodeState)a).getLastRevision());
  c1.invalidateNodeCache("/a/c2",((DocumentNodeState)a).getLastRevision());
  assertTrue("/a/c1 disappeared",a.hasChildNode("c1"));
  assertTrue("/a/c2 disappeared",a.hasChildNode("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void revisionComparisonMultipleClusterNode() throws Exception {
  DocumentNodeStore c1=createNS(1);
  DocumentNodeStore c2=createNS(2);
  DocumentNodeStore c3=createNS(3);
  createNode(c1,"/a");
  runBgOps(c1,c2,c3);
  createNode(c2,"/a/c2");
  createNode(c3,"/a/c3");
  runBgOps(c3);
  runBgOps(c1);
  runBgOps(c2);
  runBgOps(c1);
  DocumentNodeState c1ns1=c1.getRoot();
  Iterables.size(c1ns1.getChildNode("a").getChildNodeEntries());
  createNode(c1,"/a/c1");
  c1.invalidateNodeCache("/a/c2",((DocumentNodeState)c1ns1.getChildNode("a")).getLastRevision());
  c1.invalidateNodeCache("/a/c3",((DocumentNodeState)c1ns1.getChildNode("a")).getLastRevision());
  runBgOps(c1);
  NodeState a=c1ns1.getChildNode("a");
  assertTrue("/a/c2 disappeared",a.hasChildNode("c2"));
  assertTrue("/a/c3 disappeared",a.hasChildNode("c3"));
  DocumentNodeState c1ns2=c1.getRoot();
  c1ns1.compareAgainstBaseState(c1ns2,new TrackingDiff());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for OAK-1254
 */
@Test public void clusterBranchRebase() throws Exception {
  DocumentMK mk1=createMK(1,0);
  mk1.commit("/","+\"test\":{}",null,null);
  mk1.runBackgroundOperations();
  DocumentMK mk2=createMK(2,0);
  DocumentMK mk3=createMK(3,0);
  DocumentNodeStore ns3=mk3.getNodeStore();
  traverse(ns3.getRoot(),"/");
  String b3=mk3.branch(null);
  b3=mk3.commit("/","+\"mk3\":{}",b3,null);
  assertTrue(mk3.nodeExists("/test",b3));
  mk2.commit("/","+\"test/mk21\":{}",null,null);
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  String base3=mk3.getHeadRevision();
  assertFalse(mk3.nodeExists("/test/mk21",b3));
  b3=mk3.rebase(b3,base3);
  mk2.commit("/","+\"test/mk22\":{}",null,null);
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  DocumentNodeState base=ns3.getNode("/",RevisionVector.fromString(base3));
  assertNotNull(base);
  NodeState branchHead=ns3.getNode("/",RevisionVector.fromString(b3));
  assertNotNull(branchHead);
  TrackingDiff diff=new TrackingDiff();
  branchHead.compareAgainstBaseState(base,diff);
  assertEquals(1,diff.added.size());
  assertEquals(Sets.newHashSet("/mk3"),diff.added);
  assertEquals(new HashSet<String>(),diff.deleted);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fromExternalChange() throws Exception {
  final List<DocumentNodeState> rootStates1=Lists.newArrayList();
  DocumentNodeStore ns1=createMK(1,0).getNodeStore();
  ns1.addObserver(new Observer(){
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      rootStates1.add((DocumentNodeState)root);
    }
  }
);
  final List<DocumentNodeState> rootStates2=Lists.newArrayList();
  DocumentNodeStore ns2=createMK(2,0).getNodeStore();
  ns2.addObserver(new Observer(){
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      rootStates2.add((DocumentNodeState)root);
    }
  }
);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  rootStates1.clear();
  rootStates2.clear();
  NodeBuilder builder=ns1.getRoot().builder();
  builder.child("foo");
  merge(ns1,builder);
  assertEquals(1,rootStates1.size());
  assertEquals(0,rootStates2.size());
  assertFalse(rootStates1.get(0).isFromExternalChange());
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  assertEquals(1,rootStates1.size());
  assertEquals(1,rootStates2.size());
  assertTrue(rootStates2.get(0).isFromExternalChange());
  NodeState foo=rootStates2.get(0).getChildNode("foo");
  assertTrue(foo instanceof DocumentNodeState);
  assertTrue(((DocumentNodeState)foo).isFromExternalChange());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterViewDocumentTest </h4><pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHistory() throws Exception {
  final int localClusterId=1;
  final DocumentNodeStore ns=createMK(localClusterId).nodeStore;
  final Set<Integer> activeIds=new HashSet<Integer>();
  activeIds.add(localClusterId);
  ClusterViewDocument.readOrUpdate(ns,activeIds,null,null);
  final int LOOP_CNT=100;
  for (int i=0; i < LOOP_CNT; i++) {
    activeIds.add(i + 2);
    ClusterViewDocument result=ClusterViewDocument.readOrUpdate(ns,activeIds,null,null);
    assertNotNull(result);
    assertEquals(i + 2,result.getActiveIds().size());
    if (i < 10) {
      assertEquals(i + 1,result.getHistory().size());
    }
 else {
      assertTrue(result.getHistory().size() <= ClusterViewDocument.HISTORY_LIMIT);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructor(){
  ClusterViewDocument doc=new ClusterViewBuilder(1,"2",3).active(3,4).asDoc();
  assertNotNull(doc);
  assertEquals("2",doc.getClusterViewId());
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  doc=new ClusterViewBuilder(1,"2",3).active(3,4).backlogs(5).inactive(5,6).asDoc();
  assertNotNull(doc);
  assertEquals("2",doc.getClusterViewId());
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(2,doc.getInactiveIds().size());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  assertTrue(doc.getInactiveIds().contains(5));
  assertTrue(doc.getInactiveIds().contains(6));
  doc=new ClusterViewBuilder(11,"x",4).active(3,4,5).recovering(6).inactive(7,8).asDoc();
  assertNotNull(doc);
  assertEquals(11,doc.getViewSeqNum());
  assertEquals("x",doc.getClusterViewId());
  assertEquals(1,doc.getRecoveringIds().size());
  assertEquals(2,doc.getInactiveIds().size());
  assertEquals(3,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(3));
  assertTrue(doc.getActiveIds().contains(4));
  assertTrue(doc.getActiveIds().contains(5));
  assertTrue(doc.getRecoveringIds().contains(6));
  assertTrue(doc.getInactiveIds().contains(7));
  assertTrue(doc.getInactiveIds().contains(8));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadUpdate() throws Exception {
  final int localClusterId=11;
  final DocumentNodeStore ns=createMK(localClusterId).nodeStore;
  try {
    ClusterViewDocument.readOrUpdate(ns,null,null,null);
    fail("should complain");
  }
 catch (  Exception ok) {
  }
  try {
    ClusterViewDocument.readOrUpdate(ns,new HashSet<Integer>(),null,null);
    fail("should complain");
  }
 catch (  Exception ok) {
  }
  Set<Integer> activeIds=new HashSet<Integer>();
  activeIds.add(2);
  Set<Integer> recoveringIds=null;
  Set<Integer> inactiveIds=null;
  ClusterViewDocument doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  final String id=doc.getClusterViewId();
  assertTrue(id != null && id.length() > 0);
  String createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  long createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(1,doc.getViewSeqNum());
  assertEquals(1,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(1,doc.getViewSeqNum());
  activeIds.add(3);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(2,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(2,doc.getViewSeqNum());
  recoveringIds=new HashSet<Integer>();
  recoveringIds.add(4);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(3,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(1,doc.getRecoveringIds().size());
  assertTrue(doc.getRecoveringIds().contains(4));
  assertEquals(0,doc.getInactiveIds().size());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(3,doc.getViewSeqNum());
  recoveringIds=new HashSet<Integer>();
  inactiveIds=new HashSet<Integer>();
  inactiveIds.add(4);
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(id,doc.getClusterViewId());
  createdAt=doc.getCreatedAt();
  assertTrue(createdAt != null && createdAt.length() > 0);
  createdBy=doc.getCreatedBy();
  assertEquals(localClusterId,createdBy);
  assertEquals(4,doc.getViewSeqNum());
  assertEquals(2,doc.getActiveIds().size());
  assertTrue(doc.getActiveIds().contains(2));
  assertTrue(doc.getActiveIds().contains(3));
  assertEquals(0,doc.getRecoveringIds().size());
  assertEquals(1,doc.getInactiveIds().size());
  assertTrue(doc.getInactiveIds().contains(4));
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
  doc=ClusterViewDocument.readOrUpdate(ns,activeIds,recoveringIds,inactiveIds);
  assertEquals(4,doc.getViewSeqNum());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ClusterViewTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetters() throws Exception {
  final Integer viewId=3;
  final String clusterViewId=UUID.randomUUID().toString();
  final Set<Integer> instanceIds=new HashSet<Integer>();
  instanceIds.add(1);
  final Integer instanceId=2;
  final Set<Integer> deactivating=new HashSet<Integer>();
  final Set<Integer> inactive=new HashSet<Integer>();
  final ClusterView cv=new ClusterView(viewId,true,clusterViewId,instanceId,instanceIds,deactivating,inactive);
  assertNotNull(cv);
  assertTrue(cv.asDescriptorValue().length() > 0);
  assertTrue(cv.toString().length() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CollisionTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void isConflicting() throws CommitFailedException {
  DocumentNodeStore ns=builderProvider.newBuilder().setAsyncDelay(0).getNodeStore();
  DocumentStore store=ns.getDocumentStore();
  String id=Utils.getIdFromPath("/test");
  NodeBuilder b=ns.getRoot().builder();
  b.child("test").setProperty("p","a");
  Revision r1=merge(ns,b).getRevision(ns.getClusterId());
  assertNotNull(r1);
  NodeDocument doc=getDocument(store,id);
  Revision c=ns.newRevision();
  UpdateOp op=new UpdateOp(id,true);
  NodeDocument.setDeleted(op,c,false);
  Collision col=new Collision(doc,r1,op,c);
  assertTrue(col.isConflicting());
  op=new UpdateOp(id,false);
  op.setMapEntry("p",c,"b");
  col=new Collision(doc,r1,op,c);
  assertTrue(col.isConflicting());
  b=ns.getRoot().builder();
  b.child("test").setProperty("p","b");
  Revision r2=merge(ns,b).getRevision(ns.getClusterId());
  assertNotNull(r2);
  doc=getDocument(store,id);
  c=ns.newRevision();
  op=new UpdateOp(id,false);
  op.setDelete(true);
  NodeDocument.setDeleted(op,c,true);
  col=new Collision(doc,r2,op,c);
  assertTrue(col.isConflicting());
  op=new UpdateOp(id,false);
  op.setMapEntry("p",c,"c");
  col=new Collision(doc,r2,op,c);
  assertTrue(col.isConflicting());
  op=new UpdateOp(id,false);
  op.setMapEntry("q",c,"a");
  col=new Collision(doc,r2,op,c);
  assertFalse(col.isConflicting());
  b=ns.getRoot().builder();
  b.child("test").remove();
  Revision r3=merge(ns,b).getRevision(ns.getClusterId());
  assertNotNull(r3);
  doc=getDocument(store,id);
  c=ns.newRevision();
  op=new UpdateOp(id,false);
  op.setDelete(true);
  NodeDocument.setDeleted(op,c,true);
  col=new Collision(doc,r3,op,c);
  assertTrue(col.isConflicting());
  op=new UpdateOp(id,false);
  op.setMapEntry("p",c,"d");
  col=new Collision(doc,r3,op,c);
  assertTrue(col.isConflicting());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CollisionWithSplitTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void collisionAfterSplit() throws Exception {
  final int NUM_NODES=10;
  NodeBuilder b1=ns1.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    b1.child("node-" + i);
  }
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  Revision conflictRev=null;
  for (int i=0; i < NUM_NODES; i++) {
    b1=ns1.getRoot().builder();
    b1.setProperty("p",i);
    b1.child("node-" + i).remove();
    merge(ns1,b1);
    if (i == 0) {
      conflictRev=ns1.getHeadRevision().getRevision(ns1.getClusterId());
    }
  }
  assertNotNull(conflictRev);
  DocumentStore store=ns1.getDocumentStore();
  NodeDocument doc=Utils.getRootDocument(store);
  List<UpdateOp> ops=SplitOperations.forDocument(doc,ns1,ns1.getHeadRevision(),NUM_NODES);
  assertFalse(ops.isEmpty());
  for (  UpdateOp op : ops) {
    if (!op.isNew() || !store.create(NODES,Collections.singletonList(op))) {
      store.createOrUpdate(NODES,op);
    }
  }
  String id=Utils.getIdFromPath("/node-0");
  UpdateOp op=new UpdateOp(id,false);
  Revision ourRev=ns2.newRevision();
  op.setMapEntry("p",ourRev,"v");
  NodeDocument.setModified(op,ourRev);
  NodeDocument.setCommitRoot(op,ourRev,0);
  ns2.getDocumentStore().findAndUpdate(NODES,op);
  doc=ns2.getDocumentStore().find(NODES,id);
  assertTrue(doc.getLocalCommitRoot().containsKey(conflictRev));
  Collision c=new Collision(doc,conflictRev,op,ourRev);
  assertEquals("Collision must match our revision (" + ourRev + "). "+ "The conflict revision "+ conflictRev+ " is already committed.",ourRev,c.mark(ns2.getDocumentStore()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CommitQueueTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void branchCommitMustNotBlockTrunkCommit() throws Exception {
  final DocumentNodeStore ds=builderProvider.newBuilder().getNodeStore();
  Commit c=ds.newCommit(ds.getHeadRevision().asBranchRevision(ds.getClusterId()),null);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        NodeBuilder builder=ds.getRoot().builder();
        builder.child("foo");
        ds.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      }
 catch (      CommitFailedException e) {
        exceptions.add(e);
      }
    }
  }
);
  t.start();
  t.join(3000);
  assertFalse("Commit did not succeed within 3 seconds",t.isAlive());
  ds.canceled(c);
  assertNoExceptions();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void suspendUntilTimeout() throws Exception {
  final AtomicReference<RevisionVector> headRevision=new AtomicReference<RevisionVector>();
  RevisionContext context=new DummyRevisionContext(){
    @Nonnull @Override public RevisionVector getHeadRevision(){
      return headRevision.get();
    }
  }
;
  headRevision.set(new RevisionVector(context.newRevision()));
  final CommitQueue queue=new CommitQueue(context);
  queue.setSuspendTimeoutMillis(0);
  final Revision r=context.newRevision();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      queue.suspendUntilAll(of(r));
    }
  }
);
  t.start();
  t.join(1000);
  assertFalse(t.isAlive());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void concurrentSuspendUntil() throws Exception {
  final AtomicReference<RevisionVector> headRevision=new AtomicReference<RevisionVector>();
  RevisionContext context=new DummyRevisionContext(){
    @Nonnull @Override public RevisionVector getHeadRevision(){
      return headRevision.get();
    }
  }
;
  headRevision.set(new RevisionVector(context.newRevision()));
  List<Thread> threads=new ArrayList<Thread>();
  List<Revision> allRevisions=new ArrayList<Revision>();
  final CommitQueue queue=new CommitQueue(context);
  for (int i=0; i < 10; i++) {
    final Set<Revision> revisions=new HashSet<Revision>();
    for (int j=0; j < 10; j++) {
      Revision r=queue.createRevision();
      revisions.add(r);
      allRevisions.add(r);
    }
    Thread t=new Thread(new Runnable(){
      public void run(){
        queue.suspendUntilAll(revisions);
      }
    }
);
    threads.add(t);
    t.start();
  }
  for (int i=0; i < 100; i++) {
    if (queue.numSuspendedThreads() == 10) {
      break;
    }
    Thread.sleep(10);
  }
  assertEquals(10,queue.numSuspendedThreads());
  Collections.shuffle(allRevisions);
  for (  Revision r : allRevisions) {
    queue.canceled(r);
    Thread.sleep(10);
  }
  for (int i=0; i < 100; i++) {
    if (queue.numSuspendedThreads() == 0) {
      break;
    }
    Thread.sleep(10);
  }
  assertEquals(0,queue.numSuspendedThreads());
  for (  Thread t : threads) {
    t.join(1000);
    assertFalse(t.isAlive());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.CommitRootUpdateTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void exceptionOnUpdate() throws Exception {
  final AtomicBoolean throwAfterUpdate=new AtomicBoolean(false);
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T findAndUpdate(    Collection<T> collection,    UpdateOp update){
      T doc=super.findAndUpdate(collection,update);
      if (isFinalCommitRootUpdate(update) && throwAfterUpdate.compareAndSet(true,false)) {
        throw new RuntimeException("communication failure");
      }
      return doc;
    }
    private boolean isFinalCommitRootUpdate(    UpdateOp update){
      boolean finalUpdate=true;
      for (      Map.Entry<Key,Operation> op : update.getChanges().entrySet()) {
        String name=op.getKey().getName();
        if (NodeDocument.isRevisionsEntry(name) || NodeDocument.MODIFIED_IN_SECS.equals(name)) {
          continue;
        }
        finalUpdate=false;
        break;
      }
      return finalUpdate;
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b=ns.getRoot().builder();
  b.child("foo");
  b.child("bar");
  merge(ns,b);
  throwAfterUpdate.set(true);
  boolean success=false;
  Commit c=ns.newCommit(ns.getHeadRevision(),null);
  try {
    c.addNode(new DocumentNodeState(ns,"/foo/node",c.getBaseRevision()));
    c.addNode(new DocumentNodeState(ns,"/bar/node",c.getBaseRevision()));
    c.apply();
    success=true;
  }
  finally {
    if (success) {
      ns.done(c,false,null);
    }
 else {
      ns.canceled(c);
    }
  }
  NodeState root=ns.getRoot();
  assertTrue(root.getChildNode("foo").getChildNode("node").exists());
  assertTrue(root.getChildNode("bar").getChildNode("node").exists());
  assertFalse(throwAfterUpdate.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ConflictExceptionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void asCommitFailedException(){
  Revision r=Revision.newRevision(1);
  ConflictException e=new ConflictException("conflict",r);
  CommitFailedException cfe=e.asCommitFailedException();
  assertTrue(cfe instanceof FailedWithConflictException);
  FailedWithConflictException fwce=(FailedWithConflictException)cfe;
  assertEquals(CommitFailedException.MERGE,fwce.getType());
  assertEquals(Collections.singleton(r),fwce.getConflictRevisions());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKBranchTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Creates the following revision history:
 * <pre>
 * + rev1 (first commit with /child1)
 * |\
 * | + branchRev1 (branch from rev1)
 * | + branchRev11 (branch commit /child1/foo:1)
 * |
 * + rev2 (second commit with /child2)
 * |\
 * | + branchRev2 (brach from rev2)
 * </pre>
 * The test reads /child from <code>branchRev2</code> and expects
 * the version from the first commit.
 * @throws ParseException
 */
@Test public void isolatedBranches() throws ParseException {
  String rev1=mk.commit("","+\"/child1\":{}",null,"");
  String branchRev1=mk.branch(rev1);
  mk.commit("/child1","^\"foo\":1",branchRev1,"");
  String rev2=mk.commit("","+\"/child2\":{}",null,"");
  String branchRev2=mk.branch(rev2);
  String json=mk.getNodes("/child1",branchRev2,0,0,-1,null);
  JSONParser parser=new JSONParser();
  JSONObject obj=(JSONObject)parser.parse(json);
  assertFalse(obj.containsKey("foo"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void movesInBranch() throws Exception {
  String branchRev=mk.branch(null);
  branchRev=mk.commit("/","+\"a\":{}",branchRev,null);
  branchRev=mk.commit("/a","^\"foo\":1",branchRev,null);
  branchRev=mk.commit("/",">\"a\" : \"b\"",branchRev,null);
  branchRev=mk.commit("/",">\"b\" : \"a\"",branchRev,null);
  mk.merge(branchRev,null);
  String json=mk.getNodes("/a",null,0,0,-1,null);
  JSONParser parser=new JSONParser();
  JSONObject obj=(JSONObject)parser.parse(json);
  assertTrue(obj.containsKey("foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKCommitAddTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeWithChildren() throws Exception {
  mk.commit("/","+\"a\" : { \"b\": {}, \"c\": {}, \"d\" : {} }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/c",null));
  assertTrue(mk.nodeExists("/a/d",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeWithNestedChildren2() throws Exception {
  mk.commit("/","+\"a\" : {}",null,null);
  mk.commit("/a","+\"b\" : {}",null,null);
  mk.commit("/a/b","+\"c\" : {}",null,null);
  mk.commit("/a","+\"d\" : {}",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/b/c",null));
  assertTrue(mk.nodeExists("/a/d",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addIntermediataryNodes() throws Exception {
  String rev1=mk.commit("/","+\"a\" : { \"b\" : { \"c\": {} }}",null,null);
  String rev2=mk.commit("/","+\"a/d\" : {} +\"a/b/e\" : {}",null,null);
  assertTrue(mk.nodeExists("/a/b/c",rev1));
  assertFalse(mk.nodeExists("/a/b/e",rev1));
  assertFalse(mk.nodeExists("/a/d",rev1));
  assertTrue(mk.nodeExists("/a/b/c",rev2));
  assertTrue(mk.nodeExists("/a/b/e",rev2));
  assertTrue(mk.nodeExists("/a/d",rev2));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeWithNestedChildren() throws Exception {
  mk.commit("/","+\"a\" : { \"b\": { \"c\" : { \"d\" : {} } } }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/b/c",null));
  assertTrue(mk.nodeExists("/a/b/c/d",null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKCommitCopyTest </h4><pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void copyNodeWithProperties() throws Exception {
  mk.commit("/","+\"a\" : { \"key1\" : \"value1\" }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  String nodes=mk.getNodes("/",null,1,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"a/key1","value1");
  mk.commit("/","*\"a\" : \"c\"",null,null);
  assertTrue(mk.nodeExists("/c",null));
  nodes=mk.getNodes("/",null,1,0,-1,null);
  obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"c/key1","value1");
}

</code></pre>

<br>
<pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void removeNodeAndCopyParent(){
  mk.commit("/","+\"a\":{ \"b\" : {} }",null,null);
  mk.commit("/","-\"a/b\"\n" + "*\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a/b",null));
  assertFalse(mk.nodeExists("/c/b",null));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void addNodeWithNestedChildrenAndCopy(){
  mk.commit("/","+\"a\":{ \"b\" : { \"c\" : { } } }",null,null);
  mk.commit("/","+\"a/b/c/d\":{}\n" + "*\"a\":\"e\"",null,null);
  assertTrue(mk.nodeExists("/a/b/c/d",null));
  assertTrue(mk.nodeExists("/e/b/c/d",null));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void addNodeAndCopyParent(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"a/b\":{}\n" + "*\"a\":\"c\"",null,null);
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c/b",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void copyNodeWithChildren() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : {},  \"c\" : {}, \"d\" : {}}",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/c",null));
  assertTrue(mk.nodeExists("/a/d",null));
  mk.commit("/","*\"a\" : \"e\"",null,null);
  assertTrue(mk.nodeExists("/e",null));
  assertTrue(mk.nodeExists("/e/b",null));
  assertTrue(mk.nodeExists("/e/c",null));
  assertTrue(mk.nodeExists("/e/d",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void copyNode() throws Exception {
  mk.commit("/","+\"a\" : {}",null,null);
  assertTrue(mk.nodeExists("/a",null));
  mk.commit("/","*\"a\" : \"b\"",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/b",null));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copyFromNonExistentNode() throws Exception {
  mk.commit("/","+\"a\" : {}",null,null);
  assertTrue(mk.nodeExists("/a",null));
  try {
    mk.commit("/","*\"b\" : \"c\"",null,null);
    fail("Exception expected");
  }
 catch (  Exception expected) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void copyNodeWithChild() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : {} }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  mk.commit("/","*\"a\" : \"c\"",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c",null));
  assertTrue(mk.nodeExists("/c/b",null));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void removeNodeWithNestedChildrenAndCopy(){
  mk.commit("/","+\"a\":{ \"b\" : { \"c\" : { \"d\" : {} } } }",null,null);
  mk.commit("/","-\"a/b/c/d\"\n" + "*\"a\" : \"e\"",null,null);
  assertFalse(mk.nodeExists("/a/b/c/d",null));
  assertTrue(mk.nodeExists("/e/b/c",null));
  assertFalse(mk.nodeExists("/e/b/c/d",null));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void addNodeAndCopy(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"a/b\":{}\n" + "*\"a/b\":\"c\"",null,null);
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeAndCopy2(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"a/b\":{}",null,null);
  mk.commit("/","*\"a/b\":\"c\"",null,null);
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c",null));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void addNodeWithChildrenAndCopy(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"a/b\":{ \"c\" : {}, \"d\" : {} }\n" + "*\"a/b\":\"e\"",null,null);
  assertTrue(mk.nodeExists("/a/b/c",null));
  assertTrue(mk.nodeExists("/a/b/d",null));
  assertTrue(mk.nodeExists("/e/c",null));
  assertTrue(mk.nodeExists("/e/d",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void copyNodeWithNestedChildren() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : { \"c\" : { \"d\" : {} } } }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/b/c",null));
  assertTrue(mk.nodeExists("/a/b/c/d",null));
  mk.commit("/","*\"a\" : \"e\"",null,null);
  assertTrue(mk.nodeExists("/e",null));
  assertTrue(mk.nodeExists("/e/b",null));
  assertTrue(mk.nodeExists("/e/b/c",null));
  assertTrue(mk.nodeExists("/e/b/c/d",null));
  mk.commit("/","*\"e/b\" : \"f\"",null,null);
  assertTrue(mk.nodeExists("/f",null));
  assertTrue(mk.nodeExists("/f/c",null));
  assertTrue(mk.nodeExists("/f/c/d",null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKCommitMoveTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void removePropertyAndMove(){
  mk.commit("/","+\"a\":{ \"b\" : { \"key1\" : \"value1\" } }",null,null);
  mk.commit("/","^\"a/b/key1\": null\n" + ">\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c",null));
  assertTrue(mk.nodeExists("/c/b",null));
  String nodes=mk.getNodes("/c/b",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyNotExists(obj,"key1");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void modifyParentRemovePropertyAndMove(){
  mk.commit("/","+\"a\":{ \"key1\" : \"value1\"}",null,null);
  mk.commit("/","+\"b\" : {}\n" + "^\"a/key1\" : null\n" + ">\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/b",null));
  assertTrue(mk.nodeExists("/c",null));
  String nodes=mk.getNodes("/c",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyNotExists(obj,"key1");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeAndMove2(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"a/b\": {}\n",null,null);
  mk.commit("/",">\"a/b\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/c",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void moveNodeWithProperties() throws Exception {
  mk.commit("/","+\"a\" : { \"key1\" : \"value1\" }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  String nodes=mk.getNodes("/a",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"key1","value1");
  mk.commit("/",">\"a\" : \"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/c",null));
  nodes=mk.getNodes("/c",null,0,0,-1,null);
  obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"key1","value1");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void removeNestedPropertyAndMove(){
  mk.commit("/","+\"a\":{ \"key1\" : \"value1\"}",null,null);
  mk.commit("/","^\"a/key1\" : null\n" + ">\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/c",null));
  String nodes=mk.getNodes("/c",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyNotExists(obj,"key1");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void removeNodeWithNestedChildrenAndMove(){
  mk.commit("/","+\"a\":{ \"b\" : { \"c\" : { \"d\" : {} } } }",null,null);
  mk.commit("/","-\"a/b/c/d\"\n" + ">\"a\" : \"e\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/e/b/c",null));
  assertFalse(mk.nodeExists("/e/b/c/d",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void moveNodeWithChildren() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : {},  \"c\" : {}, \"d\" : {}}",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/c",null));
  assertTrue(mk.nodeExists("/a/d",null));
  mk.commit("/",">\"a\" : \"e\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertFalse(mk.nodeExists("/a/c",null));
  assertFalse(mk.nodeExists("/a/d",null));
  assertTrue(mk.nodeExists("/e",null));
  assertTrue(mk.nodeExists("/e/b",null));
  assertTrue(mk.nodeExists("/e/c",null));
  assertTrue(mk.nodeExists("/e/d",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void moveNodeWithNestedChildren() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : { \"c\" : { \"d\" : {} } } }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/b/c",null));
  assertTrue(mk.nodeExists("/a/b/c/d",null));
  mk.commit("/",">\"a\" : \"e\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertFalse(mk.nodeExists("/a/b/c",null));
  assertFalse(mk.nodeExists("/a/b/c/d",null));
  assertTrue(mk.nodeExists("/e",null));
  assertTrue(mk.nodeExists("/e/b",null));
  assertTrue(mk.nodeExists("/e/b/c",null));
  assertTrue(mk.nodeExists("/e/b/c/d",null));
  mk.commit("/",">\"e/b\" : \"f\"",null,null);
  assertTrue(mk.nodeExists("/e",null));
  assertFalse(mk.nodeExists("/e/b",null));
  assertFalse(mk.nodeExists("/e/b/c",null));
  assertFalse(mk.nodeExists("/e/b/c/d",null));
  assertTrue(mk.nodeExists("/f",null));
  assertTrue(mk.nodeExists("/f/c",null));
  assertTrue(mk.nodeExists("/f/c/d",null));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void moveUnderSourcePath() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : {} }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  try {
    mk.commit("/",">\"b\" : \"a\"",null,null);
    fail("Exception expected");
  }
 catch (  Exception expected) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeWithChildrenAndMove(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"a/b\":{ \"c\" : {}, \"d\" : {} }\n" + ">\"a/b\":\"e\"",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertFalse(mk.nodeExists("/a/b/c",null));
  assertFalse(mk.nodeExists("/a/b/d",null));
  assertTrue(mk.nodeExists("/e",null));
  assertTrue(mk.nodeExists("/e/c",null));
  assertTrue(mk.nodeExists("/e/d",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void moveNodeWithChild() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : {} }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  mk.commit("/",">\"a\" : \"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c",null));
  assertTrue(mk.nodeExists("/c/b",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeWithNestedChildrenAndMove(){
  mk.commit("/","+\"a\":{ \"b\" : { \"c\" : { } } }",null,null);
  mk.commit("/","+\"a/b/c/d\":{}\n" + ">\"a\":\"e\"",null,null);
  assertFalse(mk.nodeExists("/a/b/c/d",null));
  assertTrue(mk.nodeExists("/e/b/c/d",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void setPropertyAndMove(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","^\"a/key1\": \"value1\"\n" + ">\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/c",null));
  String nodes=mk.getNodes("/c",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"key1","value1");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void removeNodeAndMoveParent(){
  mk.commit("/","+\"a\":{ \"b\" : {} }",null,null);
  mk.commit("/","-\"a/b\"\n" + ">\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c",null));
  assertFalse(mk.nodeExists("/c/b",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void modifyParentAddPropertyAndMove(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"b\" : {}\n" + "^\"a/key1\": \"value1\"\n" + ">\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/b",null));
  assertTrue(mk.nodeExists("/c",null));
  String nodes=mk.getNodes("/c",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"key1","value1");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeAndMove(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"a/b\": {}\n" + ">\"a/b\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/c",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void moveNode() throws Exception {
  mk.commit("/","+\"a\" : {}",null,null);
  assertTrue(mk.nodeExists("/a",null));
  mk.commit("/",">\"a\" : \"b\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/b",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addNodeAndMoveParent(){
  mk.commit("/","+\"a\":{}",null,null);
  mk.commit("/","+\"a/b\":{}\n" + ">\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c",null));
  assertTrue(mk.nodeExists("/c/b",null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void setNestedPropertyAndMove(){
  mk.commit("/","+\"a\":{ \"b\" : {} }",null,null);
  mk.commit("/","^\"a/b/key1\": \"value1\"\n" + ">\"a\":\"c\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/c",null));
  assertTrue(mk.nodeExists("/c/b",null));
  String nodes=mk.getNodes("/c/b",null,0,0,-1,null);
  JSONObject obj=parseJSONObject(nodes);
  assertPropertyValue(obj,"key1","value1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKCommitRemoveTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void removeNodeWithChildren() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : {},  \"c\" : {}, \"d\" : {}}",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/c",null));
  assertTrue(mk.nodeExists("/a/d",null));
  mk.commit("/","-\"a/b\"",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/c",null));
  assertTrue(mk.nodeExists("/a/d",null));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void removeNodeTwice() throws Exception {
  String base=mk.commit("","+\"/a\":{}",null,null);
  mk.commit("","-\"/a\"",base,null);
  assertTrue(mk.nodeExists("/a",base));
  mk.commit("","-\"/a\"",base,null);
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void removeAndAddNode() throws Exception {
  String base=mk.commit("","+\"/a\":{}",null,null);
  String rev=mk.commit("","-\"/a\"",base,null);
  assertTrue(mk.nodeExists("/a",base));
  assertFalse(mk.nodeExists("/a",rev));
  mk.commit("","+\"/a\":{}",rev,null);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void removeNodeWithNestedChildren() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : { \"c\" : { \"d\" : {} } } }",null,null);
  assertTrue(mk.nodeExists("/a",null));
  assertTrue(mk.nodeExists("/a/b",null));
  assertTrue(mk.nodeExists("/a/b/c",null));
  assertTrue(mk.nodeExists("/a/b/c/d",null));
  mk.commit("/","-\"a\"",null,null);
  assertFalse(mk.nodeExists("/a",null));
  assertFalse(mk.nodeExists("/a/b",null));
  assertFalse(mk.nodeExists("/a/b/c",null));
  assertFalse(mk.nodeExists("/a/b/c/d",null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKDiffTest </h4><pre class="type-9 type-7 type-8 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("New DocumentMK only supports depth 0") public void movePath(){
  String rev1=mk.commit("/","+\"level1\":{}",null,null);
  rev1=mk.commit("/","+\"level1/level2\":{}",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1/level2",null));
  String rev2=mk.commit("/",">\"level1\" : \"level1new\"",null,null);
  assertFalse(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1new",null));
  assertTrue(mk.nodeExists("/level1new/level2",null));
  String reverseDiff=mk.diff(rev2,rev1,null,1);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1/level2",null));
  assertFalse(mk.nodeExists("/level1new",null));
  assertFalse(mk.nodeExists("/level1new/level2",null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copyPath(){
  String rev1=mk.commit("/","+\"level1\":{}",null,null);
  rev1=mk.commit("/","+\"level1/level2\":{}",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1/level2",null));
  String rev2=mk.commit("/","*\"level1\" : \"level1new\"",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1new",null));
  assertTrue(mk.nodeExists("/level1new/level2",null));
  String reverseDiff=mk.diff(rev2,rev1,null,0);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1/level2",null));
  assertFalse(mk.nodeExists("/level1new",null));
  assertFalse(mk.nodeExists("/level1new/level2",null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("New DocumentMK only supports depth 0") public void removePath(){
  String rev0=mk.commit("/","+\"level1\":{}" + "+\"level1/level2\":{}",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1/level2",null));
  String rev1=mk.commit("/","-\"level1/level2\"",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertFalse(mk.nodeExists("/level1/level2",null));
  String reverseDiff=mk.diff(rev1,rev0,"/level1",0);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1/level2",null));
  String rev2=mk.commit("/","-\"level1\"",null,null);
  assertFalse(mk.nodeExists("/level1",null));
  assertFalse(mk.nodeExists("/level1/level2",null));
  reverseDiff=mk.diff(rev2,rev0,null,1);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1/level2",null));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void diffForChangeBelowManyChildren() throws InterruptedException {
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    sb.append("+\"node-").append(i).append("\":{}");
  }
  String branchRev=mk.branch(null);
  mk.commit("/",sb.toString(),null,null);
  branchRev=mk.commit("/","+\"branch\":{}",branchRev,null);
  branchRev=mk.commit("/branch",sb.toString(),branchRev,null);
  Thread.sleep(TimeUnit.SECONDS.toMillis(6));
  String base=mk.commit("/","+\"foo\":{}",null,null);
  branchRev=mk.commit("/branch","+\"foo\":{}",branchRev,null);
  String branchBase=branchRev;
  String rev=mk.commit("/node-0","+\"foo\":{}",null,null);
  branchRev=mk.commit("/branch/node-0","+\"foo\":{}",branchRev,null);
  String diff=mk.diff(base,rev,"/",0);
  assertTrue(diff,diff.contains("^\"/node-0\""));
  diff=mk.diff(branchBase,branchRev,"/branch",0);
  assertTrue(diff,diff.contains("^\"/branch/node-0\""));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addPathOneLevel(){
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"level1\":{}",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  String reverseDiff=mk.diff(rev1,rev0,null,0);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  assertFalse(mk.nodeExists("/level1",null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setProperty(){
  String rev0=mk.commit("/","+\"level1\":{}",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  String rev1=mk.commit("/","^\"level1/prop1\": \"value1\"",null,null);
  JSONObject obj=parseJSONObject(mk.getNodes("/level1",null,0,0,-1,null));
  assertPropertyExists(obj,"prop1");
  String reverseDiff=mk.diff(rev1,rev0,"/level1",0);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  assertTrue(mk.nodeExists("/level1",null));
  obj=parseJSONObject(mk.getNodes("/level1",null,0,0,-1,null));
  assertPropertyNotExists(obj,"prop1");
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addPathTwoSameLevels(){
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"level1a\":{}",null,null);
  rev1=mk.commit("/","+\"level1b\":{}",null,null);
  assertTrue(mk.nodeExists("/level1a",null));
  assertTrue(mk.nodeExists("/level1b",null));
  String reverseDiff=mk.diff(rev1,rev0,null,0);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  assertFalse(mk.nodeExists("/level1a",null));
  assertFalse(mk.nodeExists("/level1b",null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeProperty(){
  String rev0=mk.commit("/","+\"level1\":{ \"prop1\" : \"value\"}",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  JSONObject obj=parseJSONObject(mk.getNodes("/level1",null,0,0,-1,null));
  assertPropertyExists(obj,"prop1");
  String rev1=mk.commit("/","^\"level1/prop1\" : null",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  obj=parseJSONObject(mk.getNodes("/level1",null,0,0,-1,null));
  assertPropertyNotExists(obj,"prop1");
  String reverseDiff=mk.diff(rev1,rev0,"/level1",0);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  obj=parseJSONObject(mk.getNodes("/level1",null,0,0,-1,null));
  assertPropertyExists(obj,"prop1");
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void oak596(){
  String rev1=mk.commit("/","+\"node1\":{\"node2\":{\"prop1\":\"val1\",\"prop2\":\"val2\"}}",null,null);
  String rev2=mk.commit("/","^\"node1/node2/prop1\":\"val1 new\" ^\"node1/node2/prop2\":null",null,null);
  String diff=mk.diff(rev1,rev2,"/node1/node2",0);
  assertTrue(diff.contains("^\"/node1/node2/prop2\":null"));
  assertTrue(diff.contains("^\"/node1/node2/prop1\":\"val1 new\""));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeProperty(){
  String rev0=mk.commit("/","+\"level1\":{ \"prop1\" : \"value1\"}",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  JSONObject obj=parseJSONObject(mk.getNodes("/level1",null,0,0,-1,null));
  assertPropertyValue(obj,"prop1","value1");
  String rev1=mk.commit("/","^\"level1/prop1\" : \"value2\"",null,null);
  obj=parseJSONObject(mk.getNodes("/level1",null,0,0,-1,null));
  assertPropertyValue(obj,"prop1","value2");
  String reverseDiff=mk.diff(rev1,rev0,"/level1",0);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  obj=parseJSONObject(mk.getNodes("/level1",null,0,0,-1,null));
  assertPropertyValue(obj,"prop1","value1");
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addPathTwoLevels(){
  String rev0=mk.getHeadRevision();
  String rev1=mk.commit("/","+\"level1\":{}",null,null);
  rev1=mk.commit("/","+\"level1/level2\":{}",null,null);
  assertTrue(mk.nodeExists("/level1",null));
  assertTrue(mk.nodeExists("/level1/level2",null));
  String reverseDiff=mk.diff(rev1,rev0,null,0);
  assertNotNull(reverseDiff);
  assertTrue(reverseDiff.length() > 0);
  mk.commit("",reverseDiff,null,null);
  assertFalse(mk.nodeExists("/level1",null));
  assertFalse(mk.nodeExists("/level1/level2",null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKGetHeadRevisionTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simple() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  String rev1=scenario.create();
  String rev2=mk.getHeadRevision();
  assertEquals(rev1,rev2);
  String rev3=scenario.deleteA();
  assertFalse(rev3.equals(rev2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKNodeExistsTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void simple() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  String revisionId=scenario.create();
  boolean exists=mk.nodeExists("/a",revisionId);
  assertTrue(exists);
  exists=mk.nodeExists("/a/b",revisionId);
  assertTrue(exists);
  revisionId=scenario.deleteA();
  exists=mk.nodeExists("/a",revisionId);
  assertFalse(exists);
  exists=mk.nodeExists("/a/b",revisionId);
  assertFalse(exists);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void existsInOldRevNotInNewRev() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  String rev1=scenario.create();
  String rev2=scenario.deleteA();
  boolean exists=mk.nodeExists("/a",rev1);
  assertTrue(exists);
  exists=mk.nodeExists("/a",rev2);
  assertFalse(exists);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void withoutRevisionId() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  scenario.create();
  boolean exists=mk.nodeExists("/a",null);
  assertTrue(exists);
  scenario.deleteA();
  exists=mk.nodeExists("/a",null);
  assertFalse(exists);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void grandParentDelete() throws Exception {
  mk.commit("/","+\"a\" : { \"b\" : { \"c\" : { \"d\" : {} } } }",null,"Add /a/b/c/d");
  mk.commit("/a","-\"b\"",null,"Remove /b");
  boolean exists=mk.nodeExists("/a/b/c/d",null);
  assertFalse(exists);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void siblingDelete() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  scenario.create();
  scenario.deleteB();
  boolean exists=mk.nodeExists("/a/b",null);
  assertFalse(exists);
  exists=mk.nodeExists("/a/c",null);
  assertTrue(exists);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void existsInHeadRevision() throws Exception {
  mk.commit("/","+\"a\" : {}",null,"Add /a");
  mk.commit("/a","+\"b\" : {}",null,"Add /a/b");
  boolean exists=mk.nodeExists("/a",null);
  assertTrue("The node a is not found in the head revision!",exists);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void parentDelete() throws Exception {
  SimpleNodeScenario scenario=new SimpleNodeScenario(mk);
  scenario.create();
  boolean exists=mk.nodeExists("/a/b",null);
  assertTrue(exists);
  scenario.deleteA();
  exists=mk.nodeExists("/a/b",null);
  assertFalse(exists);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKRebaseTest </h4><pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseChangedChangedProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":41",branch,null);
  mk.commit("","^\"/x/y/p\":99",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":99"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"changeChangedProperty\":{\"p\":41,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void rebaseAddProperty(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":42",branch,null);
  mk.commit("","^\"/x/y/q\":99",null,null);
  String rebased=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":42"));
  assertFalse(branchNode.contains("\"q\":99"));
  String rebasedNode=mk.getNodes("/x/y",rebased,0,0,-1,null);
  assertTrue(rebasedNode.contains("\"p\":42"));
  assertTrue(rebasedNode.contains("\"q\":99"));
  String trunkNode=mk.getNodes("/x/y",null,0,0,-1,null);
  assertFalse(trunkNode.contains("\"p\":42"));
  assertTrue(trunkNode.contains("\"q\":99"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseRemoveRemovedProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":null",branch,null);
  mk.commit("","^\"/x/y/p\":null",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertFalse(branchNode.contains("\"p\":42"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"deleteDeletedProperty\":{\"p\":42,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void rebaseChangeProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":41",branch,null);
  mk.commit("","^\"/x/y/q\":99",null,null);
  String rebased=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":41"));
  assertFalse(branchNode.contains("\"q\":99"));
  String rebasedNode=mk.getNodes("/x/y",rebased,0,0,-1,null);
  assertTrue(rebasedNode.contains("\"p\":41"));
  assertTrue(rebasedNode.contains("\"q\":99"));
  String trunkNode=mk.getNodes("/x/y",null,0,0,-1,null);
  assertTrue(trunkNode.contains("\"p\":42"));
  assertTrue(trunkNode.contains("\"q\":99"));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void rebaseChangePropertyWithSameValue(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":99",branch,null);
  mk.commit("","^\"/x/y/p\":99",null,null);
  mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":99"));
  String rebasedNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(rebasedNode.contains("\"p\":99"));
  String trunkNode=mk.getNodes("/x/y",null,0,0,-1,null);
  assertTrue(trunkNode.contains("\"p\":99"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseRemoveRemovedNode(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","-\"/x/y\"",branch,null);
  mk.commit("","-\"/x/y\"",null,null);
  branch=mk.rebase(branch,null);
  assertFalse(mk.nodeExists("/x/y",branch));
  String conflict=mk.getNodes("/x/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"deleteDeletedNode\":{\":childNodeCount\":1,\"y\":{\":childNodeCount\":0}}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rebaseEmptyBranch(){
  String branch=mk.branch(null);
  String trunk=mk.commit("","+\"/a\":{}",null,null);
  String rebased=mk.rebase(branch,null);
  JSONObject json=parseJSONObject(mk.getNodes("/",rebased,0,0,-1,null));
  assertPropertyValue(json,":childNodeCount",1L);
  assertNotNull(json.get("a"));
  json=parseJSONObject(mk.getNodes("/",null,0,0,-1,null));
  assertPropertyValue(json,":childNodeCount",1L);
  assertNotNull(json.get("a"));
  assertEquals(trunk,mk.getHeadRevision());
  assertFalse(trunk.equals(rebased));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseAddExistingNode(){
  mk.commit("","+\"/x\":{}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","+\"/x/a\":{}",branch,null);
  mk.commit("","+\"/x/a\":{\"b\":{}}",null,null);
  branch=mk.rebase(branch,null);
  assertTrue(mk.nodeExists("/x/a/b",branch));
  String conflict=mk.getNodes("/x/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"addExistingNode\":{\":childNodeCount\":1,\"a\":{\":childNodeCount\":0}}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseChangeRemovedProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":99",branch,null);
  mk.commit("","^\"/x/y/p\":null",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertFalse(branchNode.contains("\"p\":99"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"changeDeletedProperty\":{\"p\":99,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseChangeRemovedNode(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/p\":42",branch,null);
  mk.commit("","-\"/x\"",null,null);
  branch=mk.rebase(branch,null);
  assertFalse(mk.nodeExists("/x",branch));
  String conflict=mk.getNodes("/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"changeDeletedNode\":{\":childNodeCount\":1,\"x\":{\"p\":42,\"" + ":childNodeCount\":1,\"y\":{\":childNodeCount\":0}}}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void rebaseRemoveProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":null",branch,null);
  mk.commit("","^\"/x/y/q\":99",null,null);
  String rebased=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertFalse(branchNode.contains("\"p\":42"));
  assertFalse(branchNode.contains("\"q\":99"));
  String rebasedNode=mk.getNodes("/x/y",rebased,0,0,-1,null);
  assertFalse(rebasedNode.contains("\"p\":42"));
  assertTrue(rebasedNode.contains("\"q\":99"));
  String trunkNode=mk.getNodes("/x/y",null,0,0,-1,null);
  assertTrue(trunkNode.contains("\"p\":42"));
  assertTrue(trunkNode.contains("\"q\":99"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseAddExistingProperty(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":42 ^\"/x/y/q\":42",branch,null);
  mk.commit("","^\"/x/y/p\":99 ^\"/x/y/q\":99",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":99"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"addExistingProperty\":{\"q\":42,\"p\":42,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseRemoveChangedProperty(){
  mk.commit("","+\"/x\":{\"y\":{\"p\":42}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","^\"/x/y/p\":null",branch,null);
  mk.commit("","^\"/x/y/p\":99",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":99"));
  String conflict=mk.getNodes("/x/y/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"deleteChangedProperty\":{\"p\":42,\":childNodeCount\":0}}",conflict);
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void mergeRebased(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  mk.commit("","^\"/x/p\":42",null,null);
  branch=mk.commit("","^\"/x/q\":43",branch,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":42"));
  assertTrue(branchNode.contains("\"q\":43"));
  mk.merge(branch,null);
  String trunkNode=mk.getNodes("/x",branch,0,0,-1,null);
  assertTrue(trunkNode.contains("\"p\":42"));
  assertTrue(trunkNode.contains("\"q\":43"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("Conflict handling") public void rebaseRemoveChangedNode(){
  mk.commit("","+\"/x\":{\"y\":{}}",null,null);
  String branch=mk.branch(null);
  branch=mk.commit("","-\"/x/y\"",branch,null);
  mk.commit("","^\"/x/y/p\":42",null,null);
  branch=mk.rebase(branch,null);
  String branchNode=mk.getNodes("/x/y",branch,0,0,-1,null);
  assertTrue(branchNode.contains("\"p\":42"));
  String conflict=mk.getNodes("/x/:conflict",branch,100,0,-1,null);
  assertEquals("{\":childNodeCount\":1,\"deleteChangedNode\":{\":childNodeCount\":1,\"y\":{\":childNodeCount\":0}}}",conflict);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentMKResetTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void resetToCurrentBranchHead(){
  String rev=mk.branch(null);
  rev=addNodes(rev,"/foo");
  String reset=mk.reset(rev,rev);
  assertTrue(mk.diff(rev,reset,"/",0).length() == 0);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resetMultipleCommits(){
  DocumentStore store=mk.getDocumentStore();
  addNodes(null,"/foo");
  String b0=mk.branch(null);
  String b1=mk.commit("","^\"/foo/p1\":1",b0,null);
  String b2=mk.commit("","^\"/foo/p2\":1",b1,null);
  String b3=mk.commit("","^\"/foo/p3\":1",b2,null);
  mk.commit("","^\"/foo/p2\":1^\"/foo/p3\":1",null,null);
  NodeDocument rootDoc=store.find(NODES,getIdFromPath("/"));
  assertNotNull(rootDoc);
  Map<Revision,String> collisions=rootDoc.getValueMap(COLLISIONS);
  assertEquals(2,collisions.size());
  assertTrue(collisions.containsKey(Revision.fromString(b2).asTrunkRevision()));
  assertTrue(collisions.containsKey(Revision.fromString(b3).asTrunkRevision()));
  try {
    mk.merge(b3,null);
    fail("merge with conflict must fail");
  }
 catch (  DocumentStoreException e) {
  }
  String b4=mk.reset(b3,b1);
  String b5=mk.commit("","^\"/foo/p4\":1",b4,null);
  rootDoc=store.find(NODES,getIdFromPath("/"));
  assertNotNull(rootDoc);
  collisions=rootDoc.getValueMap(COLLISIONS);
  assertEquals(0,collisions.size());
  String rev=mk.merge(b5,null);
  assertPropExists(rev,"/foo","p1");
  assertPropExists(rev,"/foo","p2");
  assertPropExists(rev,"/foo","p3");
  assertPropExists(rev,"/foo","p4");
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resetRemovesCommitRootOnParent(){
  DocumentStore store=mk.getDocumentStore();
  addNodes(null,"/foo");
  String b0=mk.branch(null);
  String b1=addNodes(b0,"/foo/bar");
  NodeDocument foo=store.find(NODES,getIdFromPath("/foo"));
  assertNotNull(foo);
  assertTrue(foo.getLocalCommitRoot().containsKey(Revision.fromString(b1).asTrunkRevision()));
  addNodes(null,"/foo/bar");
  mk.reset(b1,b0);
  foo=store.find(NODES,getIdFromPath("/foo"));
  assertNotNull(foo);
  assertFalse(foo.getLocalCommitRoot().containsKey(Revision.fromString(b1).asTrunkRevision()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void readChildrenWithDeletedSiblings() throws Exception {
  final AtomicInteger maxLimit=new AtomicInteger(0);
  DocumentStore docStore=new MemoryDocumentStore(){
    @Nonnull @Override public <T extends Document>List<T> query(    Collection<T> collection,    String fromKey,    String toKey,    int limit){
      if (collection == NODES) {
        maxLimit.set(Math.max(limit,maxLimit.get()));
      }
      return super.query(collection,fromKey,toKey,limit);
    }
  }
;
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < 1000; i++) {
    builder.child("node-" + i);
  }
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < 999; i++) {
    builder=ns.getRoot().builder();
    builder.getChildNode("node-" + i).remove();
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  for (  ChildNodeEntry entry : ns.getRoot().getChildNodeEntries()) {
    entry.getName();
  }
  assertTrue(maxLimit.get() + " > " + (DocumentNodeState.INITIAL_FETCH_SIZE + 1),maxLimit.get() <= DocumentNodeState.INITIAL_FETCH_SIZE + 1);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void lastRevWithRevisionVector() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("parent");
  merge(ns1,b1);
  b1=ns1.getRoot().builder();
  NodeBuilder parent=b1.child("parent");
  parent.setProperty("p",1);
  parent.child("child");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("parent").setProperty("p",2);
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  assertTrue(ns1.getRoot().getChildNode("parent").hasChildNode("child"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void notYetVisibleExceptionMessage() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  ns2.setMaxBackOffMillis(0);
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("test").setProperty("p","v");
  merge(ns1,b1);
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("test").setProperty("q","v");
  try {
    merge(ns2,b2);
    fail("Must throw CommitFailedException");
  }
 catch (  CommitFailedException e) {
    assertNotNull(e.getCause());
    assertTrue(e.getCause().getMessage().contains("not yet visible"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commitHookChangesOnBranch() throws Exception {
  final int NUM_NODES=DocumentRootBuilder.UPDATE_LIMIT / 2;
  final int NUM_PROPS=10;
  DocumentNodeStore ns=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.child("n" + i);
    for (int j=0; j < NUM_PROPS; j++) {
      c.setProperty("q" + j,"value");
      c.setProperty("p" + j,"value");
    }
  }
  try {
    ns.merge(builder,CompositeHook.compose(Arrays.asList(new TestHook("p"),new TestHook("q"),FAILING_HOOK)),CommitInfo.EMPTY);
    fail("merge must fail and reset changes done by commit hooks");
  }
 catch (  CommitFailedException e) {
  }
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.getChildNode("n" + i);
    assertTrue(c.exists());
    for (int j=0; j < NUM_PROPS; j++) {
      PropertyState p=c.getProperty("p" + j);
      assertNotNull(p);
      assertEquals("value",p.getValue(Type.STRING));
      p=c.getProperty("q" + j);
      assertNotNull(p);
      assertEquals("value",p.getValue(Type.STRING));
    }
  }
  ns.merge(builder,CompositeHook.compose(Arrays.<CommitHook>asList(new TestHook("p"),new TestHook("q"))),CommitInfo.EMPTY);
  builder=ns.getRoot().builder();
  for (int i=0; i < NUM_NODES; i++) {
    NodeBuilder c=builder.getChildNode("n" + i);
    assertTrue(c.exists());
    for (int j=0; j < NUM_PROPS; j++) {
      PropertyState p=c.getProperty("p" + j);
      assertNotNull(p);
      assertEquals("test",p.getValue(Type.STRING));
      p=c.getProperty("q" + j);
      assertNotNull(p);
      assertEquals("test",p.getValue(Type.STRING));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dispose() throws CommitFailedException, InterruptedException {
  final BlockingQueue<String> updates=new ArrayBlockingQueue<String>(1);
  final AtomicBoolean throttleUpdates=new AtomicBoolean(true);
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>void update(    Collection<T> collection,    List<String> keys,    UpdateOp updateOp){
      if (throttleUpdates.get()) {
        for (        String k : keys) {
          try {
            updates.put(k);
          }
 catch (          InterruptedException e) {
            throw new RuntimeException(e);
          }
        }
      }
      super.update(collection,keys,updateOp);
    }
  }
;
  final DocumentNodeStore store=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  updates.clear();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").child("node");
  merge(store,builder);
  builder=store.getRoot().builder();
  builder.child("test").child("node").child("child-1");
  merge(store,builder);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      store.dispose();
    }
  }
);
  t.start();
  String p=updates.take();
  assertEquals("2:/test/node",p);
  assertTrue(t.isAlive());
  for (; ; ) {
    if (updates.peek() != null) {
      break;
    }
  }
  try {
    builder=store.getRoot().builder();
    builder.child("test").child("node").child("child-2");
    merge(store,builder);
    fail("Merge must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  while (t.isAlive()) {
    updates.poll(10,TimeUnit.MILLISECONDS);
  }
  updates.clear();
  throttleUpdates.set(false);
  DocumentNodeStore store2=builderProvider.newBuilder().setClusterId(2).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  LastRevRecoveryAgent agent=new LastRevRecoveryAgent(store2);
  if (agent.isRecoveryNeeded()) {
    agent.recover(1);
  }
  builder=store2.getRoot().builder();
  NodeBuilder test=builder.getChildNode("test");
  assertTrue(test.exists());
  NodeBuilder node=test.getChildNode("node");
  assertTrue(node.exists());
  if (!node.hasChildNode("child-2")) {
    node.child("child-2");
    merge(store2,builder);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rootRevision() throws Exception {
  DocumentNodeStore ns=builderProvider.newBuilder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("foo").child("child");
  builder.child("bar").child("child");
  merge(ns,builder);
  builder=ns.getRoot().builder();
  builder.child("foo").child("child").child("node");
  merge(ns,builder);
  RevisionVector head=ns.getHeadRevision();
  NodeState child=ns.getRoot().getChildNode("bar").getChildNode("child");
  assertTrue(child instanceof DocumentNodeState);
  DocumentNodeState state=(DocumentNodeState)child;
  assertEquals(head,state.getRootRevision());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void backgroundLeaseUpdateThread() throws Exception {
  int clusterId=-1;
  Random random=new Random();
  for (int i=0; i < 10; i++) {
    int id=random.nextInt(1000) + 1000;
    if (!backgroundLeaseUpdateThreadRunning(id)) {
      clusterId=id;
      break;
    }
  }
  assertNotEquals(-1,clusterId);
  DocumentNodeStore ns=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(clusterId).getNodeStore();
  for (int i=0; i < 10; i++) {
    if (!backgroundLeaseUpdateThreadRunning(clusterId)) {
      Thread.sleep(100);
    }
  }
  assertTrue(backgroundLeaseUpdateThreadRunning(clusterId));
  assertEquals(clusterId,ns.getClusterId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void readFromPreviousDoc() throws CommitFailedException {
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns=builderProvider.newBuilder().setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.child("test").setProperty("prop","initial");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns.dispose();
  ns=builderProvider.newBuilder().setClusterId(2).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  builder=ns.getRoot().builder();
  builder.child("test").setProperty("prop","value");
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  RevisionVector rev=ns.getHeadRevision();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  DocumentNodeState state=doc.getNodeAtRevision(ns,rev,null);
  assertNotNull(state);
  assertTrue(state.hasProperty("prop"));
  assertEquals("value",state.getProperty("prop").getValue(Type.STRING));
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.child("test").setProperty("prop","v-" + i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns.runBackgroundOperations();
  doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  state=doc.getNodeAtRevision(ns,rev,null);
  assertNotNull(state);
  assertTrue(state.hasProperty("prop"));
  assertEquals("value",state.getProperty("prop").getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void docChildCacheWithIncompatiblDocStoreSort() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  final ConcurrentSkipListMap<String,NodeDocument> nodes=new ConcurrentSkipListMap<String,NodeDocument>(new Comparator<String>(){
    @Override public int compare(    String o1,    String o2){
      int ret=o1.compareTo(o2);
      if (o1.indexOf("child") > 0 && o2.indexOf("child") > 0) {
        ret=(-ret);
      }
      return ret;
    }
  }
);
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override @SuppressWarnings("unchecked") protected <T extends Document>ConcurrentSkipListMap<String,T> getMap(    Collection<T> collection){
      if (collection == Collection.NODES) {
        return (ConcurrentSkipListMap<String,T>)nodes;
      }
 else {
        return super.getMap(collection);
      }
    }
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setUseSimpleRevision(true).setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder parentBuilder=builder.child("parent");
  int numChildren=DocumentNodeState.INITIAL_FETCH_SIZE - 2;
  for (int i=0; i < numChildren; i++) {
    parentBuilder.child("child" + (i + 1));
  }
  merge(store,builder);
  store.invalidateNodeChildrenCache();
  NodeState parentNodeState=store.getRoot().getChildNode("parent");
  Iterables.size(parentNodeState.getChildNodeEntries());
  reads.clear();
  NodeState nonExistingChild=parentNodeState.getChildNode("child501-non-existing-child");
  assertEquals("Fully cached entry in doc child cache should be able to find non existing children" + " even if doc store sort order is incompatible to that of Java",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  store.invalidateNodeCache("/parent/child25",store.getHeadRevision());
  reads.clear();
  NodeState existingChild=parentNodeState.getChildNode("child25");
  assertTrue("Fully cached entry in doc child cache should be able to find existing children" + " even if doc store sort order is incompatible to that of Java",reads.size() > 0);
  assertTrue("Existing children should be reported as such",existingChild.exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rollback() throws Exception {
  final Map<Thread,Semaphore> locks=Collections.synchronizedMap(new HashMap<Thread,Semaphore>());
  final Semaphore created=new Semaphore(0);
  DocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>List<T> createOrUpdate(    Collection<T> collection,    List<UpdateOp> updateOps){
      Semaphore semaphore=locks.get(Thread.currentThread());
      List<T> result=super.createOrUpdate(collection,updateOps);
      if (semaphore != null) {
        created.release();
        semaphore.acquireUninterruptibly();
      }
      return result;
    }
  }
;
  final List<Exception> exceptions=new ArrayList<Exception>();
  final DocumentMK mk=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).open();
  final DocumentNodeStore store=mk.getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("deletedNode");
  builder.child("updateNode").setProperty("foo","bar");
  merge(store,builder);
  builder=store.getRoot().builder();
  builder.child("deletedNode").remove();
  merge(store,builder);
  final RevisionVector head=store.getHeadRevision();
  Thread writer=new Thread(new Runnable(){
    @Override public void run(){
      try {
        Revision r=store.newRevision();
        Commit c=new Commit(store,r,head,null);
        c.addNode(new DocumentNodeState(store,"/newConflictingNode",new RevisionVector(r)));
        c.addNode(new DocumentNodeState(store,"/deletedNode",new RevisionVector(r)));
        c.updateProperty("/updateNode","foo","baz");
        c.apply();
      }
 catch (      DocumentStoreException e) {
        exceptions.add(e);
      }
    }
  }
);
  final Semaphore s=new Semaphore(0);
  locks.put(writer,s);
  writer.start();
  created.acquireUninterruptibly();
  Revision r=store.newRevision();
  Commit c=new Commit(store,r,head,null);
  c.addNode(new DocumentNodeState(store,"/newConflictingNode",new RevisionVector(r)));
  c.addNode(new DocumentNodeState(store,"/newNonConflictingNode",new RevisionVector(r)));
  c.apply();
  s.release();
  writer.join();
  assertEquals("expected exception",1,exceptions.size());
  String id=Utils.getIdFromPath("/newConflictingNode");
  NodeDocument doc=docStore.find(NODES,id);
  assertNotNull("document with id " + id + " does not exist",doc);
  assertTrue("document with id " + id + " should get _deletedOnce marked due to rollback",doc.wasDeletedOnce());
  id=Utils.getIdFromPath("/newNonConflictingNode");
  doc=docStore.find(NODES,id);
  assertNull("document with id " + id + " must not have _deletedOnce",doc.get(NodeDocument.DELETED_ONCE));
  id=Utils.getIdFromPath("/deletedNode");
  doc=docStore.find(NODES,id);
  assertTrue("document with id " + id + " should get _deletedOnce marked due to rollback",doc.wasDeletedOnce());
  id=Utils.getIdFromPath("/updateNode");
  doc=docStore.find(NODES,id);
  assertNull("document with id " + id + " must not have _deletedOnce despite rollback",doc.get(NodeDocument.DELETED_ONCE));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void clusterWithClockDifferences2() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  long now=System.currentTimeMillis();
  Clock c1=new Clock.Virtual();
  c1.waitUntil(now);
  Revision.setClock(c1);
  DocumentNodeStore ns1=builderProvider.newBuilder().clock(c1).setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("node").setProperty("p",1);
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Clock c2=new Clock.Virtual();
  c2.waitUntil(now + 5000);
  Revision.setClock(c2);
  DocumentNodeStore ns2=builderProvider.newBuilder().clock(c2).setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  assertTrue(ns2.getRoot().hasChildNode("node"));
  assertEquals(1,ns2.getRoot().getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").setProperty("p",2);
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c1);
  ns1.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  assertEquals(2,b1.getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
  b1.child("node").setProperty("p",3);
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c2);
  ns2.runBackgroundOperations();
  b2=ns2.getRoot().builder();
  assertEquals(3,b2.getChildNode("node").getProperty("p").getValue(Type.LONG).longValue());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergedBranchVisibility() throws Exception {
  final DocumentNodeStore store=builderProvider.newBuilder().setAsyncDelay(0).getNodeStore();
  DocumentStore docStore=store.getDocumentStore();
  NodeBuilder builder1=store.getRoot().builder();
  builder1.child("test");
  merge(store,builder1);
  builder1=store.getRoot().builder();
  NodeBuilder node=builder1.getChildNode("test").child("node");
  String id=Utils.getIdFromPath("/test/node");
  int i=0;
  while (docStore.find(NODES,id) == null) {
    node.setProperty("foo",i++);
  }
  NodeDocument doc=docStore.find(NODES,id);
  assertNotNull(doc);
  RevisionVector rev=new RevisionVector(doc.getLocalDeleted().firstKey());
  merge(store,builder1);
  assertFalse(store.getRoot(rev).getChildNode("test").getChildNode("node").exists());
  assertTrue(store.getRoot().getChildNode("test").getChildNode("node").exists());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void compareOnBranch() throws Exception {
  long modifiedResMillis=SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION);
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  Revision.setClock(clock);
  DocumentNodeStore ns=builderProvider.newBuilder().clock(clock).setAsyncDelay(0).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  NodeBuilder p=builder.child("parent");
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    p.child("node-" + i);
  }
  p.child("node-x").child("child");
  merge(ns,builder);
  ns.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + modifiedResMillis * 2);
  builder=ns.getRoot().builder();
  builder.child("a");
  merge(ns,builder);
  DocumentNodeState root=ns.getRoot();
  final DocumentNodeStoreBranch b=ns.createBranch(root);
  builder=root.builder();
  builder.child("parent").child("node-x").child("child").child("x");
  b.setRoot(builder.getNodeState());
  builder.child("b");
  b.setRoot(builder.getNodeState());
  builder.child("c");
  b.setRoot(builder.getNodeState());
  DocumentNodeState head=asDocumentNodeState(b.getHead());
  TrackingDiff diff=new TrackingDiff();
  head.compareAgainstBaseState(root,diff);
  assertTrue(diff.modified.contains("/parent/node-x/child"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void branchBaseBeforeClusterJoin() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setClusterId(1).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("parent");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setClusterId(2).setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("parent").child("baz");
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  DocumentNodeState root=ns1.getRoot();
  DocumentNodeStoreBranch b=ns1.createBranch(root);
  NodeBuilder builder=root.builder();
  builder.child("parent").child("foo");
  b.setRoot(builder.getNodeState());
  builder.child("parent").child("bar");
  b.setRoot(builder.getNodeState());
  b.rebase();
  NodeState parent=b.getHead().getChildNode("parent");
  assertTrue(parent.exists());
  assertTrue(parent.hasChildNode("foo"));
  assertTrue(parent.hasChildNode("bar"));
  assertFalse(parent.hasChildNode("baz"));
  ns1.runBackgroundOperations();
  b.merge(EmptyHook.INSTANCE,CommitInfo.EMPTY);
  parent=ns1.getRoot().getChildNode("parent");
  assertTrue(parent.exists());
  assertTrue(parent.hasChildNode("foo"));
  assertTrue(parent.hasChildNode("bar"));
  assertTrue(parent.hasChildNode("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void parentWithUnseenChildrenMustNotBeDeleted() throws Exception {
  final MemoryDocumentStore docStore=new MemoryDocumentStore();
  final DocumentNodeStore store1=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(1).getNodeStore();
  store1.setEnableConcurrentAddRemove(true);
  final DocumentNodeStore store2=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(2).getNodeStore();
  store2.setEnableConcurrentAddRemove(true);
  NodeBuilder builder=store1.getRoot().builder();
  builder.child(":hidden");
  merge(store1,builder);
  store1.runBackgroundOperations();
  store2.runBackgroundOperations();
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent").child("node1");
  merge(store1,builder);
  builder=store2.getRoot().builder();
  builder.child(":hidden").child("parent").child("node2");
  merge(store2,builder);
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent").remove();
  try {
    merge(store1,builder);
    fail("parent node of unseen children must not get deleted");
  }
 catch (  CommitFailedException cfe) {
  }
  String parentPath="/:hidden/parent";
  NodeDocument parentDoc=docStore.find(Collection.NODES,Utils.getIdFromPath(parentPath));
  assertFalse("parent node of unseen children must not get deleted",isDocDeleted(parentDoc));
  builder=store2.getRoot().builder();
  builder.child(":hidden").child("parent").remove();
  try {
    merge(store2,builder);
    fail("parent node of unseen children must not get deleted");
  }
 catch (  CommitFailedException cfe) {
  }
  parentDoc=docStore.find(Collection.NODES,Utils.getIdFromPath(parentPath));
  assertFalse("parent node of unseen children must not get deleted",isDocDeleted(parentDoc));
  store1.runBackgroundOperations();
  store2.runBackgroundOperations();
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent").remove();
  builder.child(":hidden").child("parent1");
  store1.runBackgroundOperations();
  store2.runBackgroundOperations();
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent1").child("node1");
  merge(store1,builder);
  builder=store2.getRoot().builder();
  builder.child(":hidden").child("parent1").child("node2");
  merge(store2,builder);
  builder=store1.getRoot().builder();
  builder.child(":hidden").child("parent1").remove();
  try {
    merge(store1,builder);
  }
 catch (  CommitFailedException cfe) {
  }
  parentPath="/:hidden/parent1";
  parentDoc=docStore.find(Collection.NODES,Utils.getIdFromPath(parentPath));
  assertFalse("parent node of unseen children must not get deleted",isDocDeleted(parentDoc));
  builder=store2.getRoot().builder();
  builder.child(":hidden").child("parent1").remove();
  try {
    merge(store2,builder);
  }
 catch (  CommitFailedException cfe) {
  }
  parentDoc=docStore.find(Collection.NODES,Utils.getIdFromPath(parentPath));
  assertFalse("parent node of unseen children must not get deleted",isDocDeleted(parentDoc));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void backgroundRead() throws Exception {
  final Semaphore semaphore=new Semaphore(1);
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentStore testStore=new TimingDocumentStoreWrapper(docStore){
    @Override public CacheInvalidationStats invalidateCache(    Iterable<String> keys){
      super.invalidateCache(keys);
      semaphore.acquireUninterruptibly();
      semaphore.release();
      return null;
    }
  }
;
  final DocumentNodeStore store1=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(testStore).setClusterId(1).getNodeStore();
  DocumentNodeStore store2=builderProvider.newBuilder().setAsyncDelay(0).setDocumentStore(docStore).setClusterId(2).getNodeStore();
  NodeBuilder builder=store2.getRoot().builder();
  builder.child("node2");
  store2.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store2.runBackgroundOperations();
  assertFalse(store1.getRoot().hasChildNode("node2"));
  builder=store1.getRoot().builder();
  builder.child("node1");
  NodeState root=store1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  semaphore.acquireUninterruptibly();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      store1.runBackgroundOperations();
    }
  }
);
  t.start();
  while (!semaphore.hasQueuedThreads()) {
    Thread.sleep(10);
  }
  try {
    assertFalse(root.hasChildNode("node2"));
  }
  finally {
    semaphore.release();
  }
  t.join();
  root=store1.getRoot();
  assertTrue(root.hasChildNode("node2"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void updateClusterState(){
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(1).setDocumentStore(docStore).getNodeStore();
  int cId1=ns1.getClusterId();
  DocumentNodeStore ns2=builderProvider.newBuilder().setAsyncDelay(0).setClusterId(2).setDocumentStore(docStore).getNodeStore();
  int cId2=ns2.getClusterId();
  ns1.updateClusterState();
  ns2.updateClusterState();
  assertEquals(0,ns1.getMBean().getInactiveClusterNodes().length);
  assertEquals(0,ns2.getMBean().getInactiveClusterNodes().length);
  assertEquals(2,ns1.getMBean().getActiveClusterNodes().length);
  assertEquals(2,ns2.getMBean().getActiveClusterNodes().length);
  ns1.dispose();
  ns2.updateClusterState();
  String[] inactive=ns2.getMBean().getInactiveClusterNodes();
  String[] active=ns2.getMBean().getActiveClusterNodes();
  assertEquals(1,inactive.length);
  assertTrue(inactive[0].startsWith(cId1 + "="));
  assertEquals(1,active.length);
  assertTrue(active[0].startsWith(cId2 + "="));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void useDocChildCacheForFindingNodes() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("a");
  builder.child("b").child("c");
  merge(store,builder);
  NodeState parentState=store.getRoot().getChildNode("b");
  reads.clear();
  NodeState nonExistingChild=parentState.getChildNode("non-existing-node-1");
  assertEquals("Should not go to DocStore::find for a known non-existent child",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  builder=store.getRoot().builder();
  NodeBuilder childPropBuilder=builder.child("a");
  childPropBuilder.setProperty("foo","bar");
  merge(store,builder);
  parentState=store.getRoot().getChildNode("b");
  reads.clear();
  nonExistingChild=parentState.getChildNode("non-existing-node-2");
  assertEquals("Should not go to DocStore::find for a known non-existent child," + " even if another merge has happened (on another sub-tree)",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
  store.invalidateNodeChildrenCache();
  parentState=store.getRoot().getChildNode("b");
  Iterables.size(parentState.getChildNodeEntries());
  reads.clear();
  nonExistingChild=parentState.getChildNode("non-existing-node-3");
  assertEquals("Should not go to DocStore::find when doc child cache is filled by reading",0,reads.size());
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void diffExternalChanges() throws Exception {
  long modifiedResMillis=SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION);
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  Revision.setClock(clock);
  DocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setAsyncDelay(0).clock(clock).setDocumentStore(docStore).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setAsyncDelay(0).clock(clock).setDocumentStore(docStore).setClusterId(2).getNodeStore();
  NodeBuilder builder=ns1.getRoot().builder();
  NodeBuilder test=builder.child("test");
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    test.child("node-" + i);
  }
  ns1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + modifiedResMillis * 2);
  builder=ns2.getRoot().builder();
  builder.child("test").child("foo");
  ns2.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(clock.getTime() + modifiedResMillis * 2);
  builder=ns1.getRoot().builder();
  builder.child("test").child("bar");
  ns1.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState r1=ns1.getRoot();
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  NodeState r2=ns1.getRoot();
  boolean found=false;
  for (  ChildNodeEntry entry : r2.getChildNode("test").getChildNodeEntries()) {
    if (entry.getName().equals("foo")) {
      found=true;
      break;
    }
  }
  assertTrue(found);
  TrackingDiff diff=new TrackingDiff();
  r2.compareAgainstBaseState(r1,diff);
  assertEquals(1,diff.modified.size());
  assertTrue(diff.modified.contains("/test"));
  assertEquals(1,diff.added.size());
  assertTrue(diff.added.contains("/test/foo"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void clusterWithClockDifferences() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  long now=System.currentTimeMillis();
  Clock c1=new Clock.Virtual();
  c1.waitUntil(now);
  Revision.setClock(c1);
  DocumentNodeStore ns1=builderProvider.newBuilder().clock(c1).setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("node");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Clock c2=new Clock.Virtual();
  c2.waitUntil(now + 5000);
  Revision.setClock(c2);
  DocumentNodeStore ns2=builderProvider.newBuilder().clock(c2).setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  assertTrue(ns2.getRoot().hasChildNode("node"));
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").remove();
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c1);
  ns1.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  assertFalse(b1.hasChildNode("node"));
  b1.child("node");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c2);
  ns2.runBackgroundOperations();
  b2=ns2.getRoot().builder();
  assertTrue(b2.hasChildNode("node"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void ignoreDocChildCacheForIncompleteEntry() throws CommitFailedException {
  final Set<String> reads=Sets.newHashSet();
  MemoryDocumentStore docStore=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      reads.add(key);
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore store=builderProvider.newBuilder().setUseSimpleRevision(true).setClusterId(1).setAsyncDelay(0).setDocumentStore(docStore).getNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  NodeBuilder parentBuilder=builder.child("a");
  int numChildren=DocumentNodeState.INITIAL_FETCH_SIZE + 2;
  for (int i=0; i < numChildren; i++) {
    parentBuilder.child("child" + i);
  }
  merge(store,builder);
  store.invalidateNodeChildrenCache();
  NodeState parentNodeState=store.getRoot().getChildNode("a");
  Iterables.size(parentNodeState.getChildNodeEntries());
  reads.clear();
  NodeState nonExistingChild=parentNodeState.getChildNode("non-existing-child-1");
  assertTrue("DocStore should be queried when no doc child cache entry has all children",reads.size() > 0);
  assertFalse("Non existing children should be reported as such",nonExistingChild.exists());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonBlockingReset() throws Exception {
  final List<String> failure=Lists.newArrayList();
  final AtomicReference<ReentrantReadWriteLock> mergeLock=new AtomicReference<ReentrantReadWriteLock>();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T findAndUpdate(    Collection<T> collection,    UpdateOp update){
      for (      Map.Entry<Key,Operation> entry : update.getChanges().entrySet()) {
        if (entry.getKey().getName().equals(NodeDocument.COLLISIONS)) {
          ReentrantReadWriteLock rwLock=mergeLock.get();
          if (rwLock.getReadHoldCount() > 0 || rwLock.getWriteHoldCount() > 0) {
            failure.add("Branch reset still holds merge lock");
            break;
          }
        }
      }
      return super.findAndUpdate(collection,update);
    }
  }
;
  DocumentNodeStore ds=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  ds.setMaxBackOffMillis(0);
  DocumentNodeState root=ds.getRoot();
  final DocumentNodeStoreBranch b=ds.createBranch(root);
  assertTrue(b.getMergeLock() instanceof ReentrantReadWriteLock);
  mergeLock.set((ReentrantReadWriteLock)b.getMergeLock());
  NodeBuilder builder=root.builder();
  builder.child("foo");
  b.setRoot(builder.getNodeState());
  builder.child("bar");
  b.setRoot(builder.getNodeState());
  try {
    b.merge(new CommitHook(){
      @Nonnull @Override public NodeState processCommit(      NodeState before,      NodeState after,      CommitInfo info) throws CommitFailedException {
        NodeBuilder foo=after.builder().child("foo");
        for (int i=0; i <= DocumentRootBuilder.UPDATE_LIMIT; i++) {
          foo.setProperty("prop",i);
        }
        throw new CommitFailedException("Fail",0,"");
      }
    }
,CommitInfo.EMPTY);
  }
 catch (  CommitFailedException e) {
  }
  for (  String s : failure) {
    fail(s);
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void resolveMultipleConflictedRevisions() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  final DocumentNodeStore ds=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  DocumentNodeState root=ds.getRoot();
  final DocumentNodeStoreBranch b=ds.createBranch(root);
  NodeBuilder builder=root.builder();
  builder.child("foo");
  b.setRoot(builder.getNodeState());
  final Set<Revision> revisions=new HashSet<Revision>();
  final List<Commit> commits=new ArrayList<Commit>();
  for (int i=0; i < 10; i++) {
    Revision revision=ds.newRevision();
    Commit commit=ds.newCommit(new RevisionVector(revision),ds.createBranch(root));
    commits.add(commit);
    revisions.add(revision);
  }
  final AtomicBoolean merged=new AtomicBoolean();
  Thread t=new Thread(new Runnable(){
    public void run(){
      try {
        CommitFailedException exception=new ConflictException("Can't merge",revisions).asCommitFailedException();
        b.merge(new HookFailingOnce(exception),CommitInfo.EMPTY);
        merged.set(true);
      }
 catch (      CommitFailedException e) {
        LOG.error("Can't commit",e);
      }
    }
  }
);
  t.start();
  for (int i=0; i < 6; i++) {
    assertFalse("The branch can't be merged yet",merged.get());
    ds.done(commits.get(i),false,CommitInfo.EMPTY);
  }
  for (int i=6; i < 8; i++) {
    assertFalse("The branch can't be merged yet",merged.get());
    ds.canceled(commits.get(i));
  }
  for (int i=8; i < 10; i++) {
    assertFalse("The branch can't be merged yet",merged.get());
    ds.done(commits.get(i),true,CommitInfo.EMPTY);
  }
  for (int i=0; i < 100; i++) {
    if (merged.get()) {
      break;
    }
    Thread.sleep(10);
  }
  assertTrue("The branch should be merged by now",merged.get());
  t.join();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void mergeInternalDocAcrossCluster() throws Exception {
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  final DocumentNodeStore store1=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(1).getNodeStore();
  store1.setEnableConcurrentAddRemove(true);
  final DocumentNodeStore store2=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).setClusterId(2).getNodeStore();
  store2.setEnableConcurrentAddRemove(true);
  NodeState root;
  NodeBuilder builder;
  root=store1.getRoot();
  builder=root.builder();
  builder.child(":hidden").child("deleteDeleted");
  builder.child(":hidden").child("deleteChanged");
  builder.child(":hidden").child("changeDeleted");
  merge(store1,builder);
  store1.runBackgroundOperations();
  store2.runBackgroundOperations();
  root=store1.getRoot();
  builder=root.builder();
  builder.child("visible");
  builder.child(":hidden").child("b");
  builder.child(":hidden").child("deleteDeleted").remove();
  builder.child(":hidden").child("changeDeleted").remove();
  builder.child(":hidden").child("deleteChanged").setProperty("foo","bar");
  builder.child(":dynHidden").child("c");
  builder.child(":dynHidden").child("childWithProp").setProperty("foo","bar");
  merge(store1,builder);
  root=store2.getRoot();
  builder=root.builder();
  builder.child(":hidden").child("b");
  builder.child(":dynHidden").child("c");
  merge(store2,builder);
  builder=root.builder();
  builder.child(":hidden").child("deleteDeleted").remove();
  merge(store2,builder);
  store2.setMaxBackOffMillis(0);
  boolean commitFailed=false;
  try {
    builder=root.builder();
    builder.child("visible");
    merge(store2,builder);
  }
 catch (  CommitFailedException cfe) {
    commitFailed=true;
  }
  assertTrue("Concurrent creation of visible node across cluster must fail",commitFailed);
  commitFailed=false;
  try {
    builder=root.builder();
    builder.child(":dynHidden").child("childWithProp").setProperty("foo","bar");
    merge(store2,builder);
  }
 catch (  CommitFailedException cfe) {
    commitFailed=true;
  }
  assertTrue("Concurrent creation of hidden node with properties across cluster must fail",commitFailed);
  commitFailed=false;
  try {
    builder=root.builder();
    builder.child(":hidden").child("deleteChanged").remove();
    merge(store2,builder);
  }
 catch (  CommitFailedException cfe) {
    commitFailed=true;
  }
  assertTrue("Delete changed merge across cluster must fail even under hidden tree",commitFailed);
  commitFailed=false;
  try {
    builder=root.builder();
    builder.child(":hidden").child("changeDeleted").setProperty("foo","bar");
    merge(store2,builder);
  }
 catch (  CommitFailedException cfe) {
    commitFailed=true;
  }
  assertTrue("Change deleted merge across cluster must fail even under hidden tree",commitFailed);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void recoverBranchCommit() throws Exception {
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore store1=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).clock(clock).setClusterId(1).getNodeStore();
  NodeBuilder builder=store1.getRoot().builder();
  builder.child("test");
  merge(store1,builder);
  store1.runBackgroundOperations();
  builder=store1.getRoot().builder();
  NodeBuilder node=builder.getChildNode("test").child("node");
  String id=Utils.getIdFromPath("/test/node");
  int i=0;
  while (docStore.find(NODES,id) == null) {
    node.setProperty("foo",i++);
  }
  merge(store1,builder);
  clock.waitUntil(clock.getTime() + store1.getClusterInfo().getLeaseTime() + 1000);
  LastRevRecoveryAgent agent=store1.getLastRevRecoveryAgent();
  assertTrue(agent.isRecoveryNeeded());
  agent.recover(store1.getClusterId());
  DocumentNodeStore store2=builderProvider.newBuilder().setDocumentStore(docStore).setAsyncDelay(0).clock(clock).setClusterId(2).getNodeStore();
  assertTrue(store2.getRoot().getChildNode("test").getChildNode("node").exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sameSeenAtRevision2() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("test");
  merge(ns2,b2);
  b2=ns2.getRoot().builder();
  b2.child("test").remove();
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  NodeBuilder b1=ns1.getRoot().builder();
  assertFalse(b1.hasChildNode("test"));
  b1.child("test");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns3=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(3).getNodeStore();
  ns3.setMaxBackOffMillis(0);
  NodeBuilder b3=ns3.getRoot().builder();
  assertTrue(b3.hasChildNode("test"));
  b3.child("test").remove();
  merge(ns3,b3);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void failFastOnBranchConflict() throws Exception {
  final AtomicInteger mergeAttempts=new AtomicInteger();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T findAndUpdate(    Collection<T> collection,    UpdateOp update){
      for (      Key k : update.getConditions().keySet()) {
        if (k.getName().equals(NodeDocument.COLLISIONS)) {
          mergeAttempts.incrementAndGet();
          break;
        }
      }
      return super.findAndUpdate(collection,update);
    }
  }
;
  DocumentNodeStore ds=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  DocumentNodeState root=ds.getRoot();
  DocumentNodeStoreBranch b=ds.createBranch(root);
  NodeBuilder builder=root.builder();
  builder.child("foo");
  b.setRoot(builder.getNodeState());
  builder.child("bar").setProperty("p","foo");
  b.setRoot(builder.getNodeState());
  NodeBuilder nb=ds.getRoot().builder();
  nb.child("bar").setProperty("p","bar");
  merge(ds,nb);
  mergeAttempts.set(0);
  try {
    b.merge(EmptyHook.INSTANCE,CommitInfo.EMPTY);
    fail("must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  assertTrue("too many merge attempts: " + mergeAttempts.get(),mergeAttempts.get() <= 1);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void diffOnce() throws Exception {
  final AtomicInteger numQueries=new AtomicInteger();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Nonnull @Override public <T extends Document>List<T> query(    Collection<T> collection,    String fromKey,    String toKey,    String indexedProperty,    long startValue,    int limit){
      numQueries.getAndIncrement();
      return super.query(collection,fromKey,toKey,indexedProperty,startValue,limit);
    }
  }
;
  final DocumentMK mk=builderProvider.newBuilder().setDocumentStore(store).open();
  final DocumentNodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < DocumentMK.MANY_CHILDREN_THRESHOLD * 2; i++) {
    builder.child("node-" + i);
  }
  merge(ns,builder);
  final RevisionVector head=ns.getHeadRevision();
  Revision localHead=head.getRevision(ns.getClusterId());
  assertNotNull(localHead);
  final RevisionVector to=new RevisionVector(new Revision(localHead.getTimestamp() + 1000,0,localHead.getClusterId()));
  int numReaders=10;
  final CountDownLatch ready=new CountDownLatch(numReaders);
  final CountDownLatch go=new CountDownLatch(1);
  List<Thread> readers=Lists.newArrayList();
  for (int i=0; i < numReaders; i++) {
    Thread t=new Thread(new Runnable(){
      @Override public void run(){
        try {
          ready.countDown();
          go.await();
          mk.diff(head.toString(),to.toString(),"/",0);
        }
 catch (        InterruptedException e) {
        }
      }
    }
);
    readers.add(t);
    t.start();
  }
  ready.await();
  numQueries.set(0);
  go.countDown();
  for (  Thread t : readers) {
    t.join();
  }
  assertTrue(numQueries.get() <= 2);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void conflictDetectionWithClockDifference() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  long now=System.currentTimeMillis();
  Clock c1=new Clock.Virtual();
  c1.waitUntil(now);
  Revision.setClock(c1);
  DocumentNodeStore ns1=builderProvider.newBuilder().clock(c1).setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("node");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  Revision.resetClockToDefault();
  Clock c2=new Clock.Virtual();
  c2.waitUntil(now + 5000);
  Revision.setClock(c2);
  DocumentNodeStore ns2=builderProvider.newBuilder().clock(c2).setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  assertTrue(ns2.getRoot().hasChildNode("node"));
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").child("foo");
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  Revision.resetClockToDefault();
  Revision.setClock(c1);
  ns1.runBackgroundOperations();
  b1=ns1.getRoot().builder();
  assertTrue(b1.getChildNode("node").hasChildNode("foo"));
  b1.child("node").remove();
  merge(ns1,b1);
  Revision.resetClockToDefault();
  Revision.setClock(c2);
  b2=ns2.getRoot().builder();
  b2.child("node").child("bar");
  try {
    merge(ns2,b2);
    fail("must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void modifiedReset() throws Exception {
  Clock clock=new Clock.Virtual();
  clock.waitUntil(System.currentTimeMillis());
  Revision.setClock(clock);
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(1).setAsyncDelay(0).clock(clock).getNodeStore();
  NodeBuilder builder1=ns1.getRoot().builder();
  builder1.child("node");
  ns1.merge(builder1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(docStore).setClusterId(2).setAsyncDelay(0).clock(clock).getNodeStore();
  NodeBuilder builder2=ns2.getRoot().builder();
  builder2.child("node").child("child-2");
  ns2.merge(builder2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  clock.waitUntil(System.currentTimeMillis() + SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION + 1));
  builder1=ns1.getRoot().builder();
  builder1.child("node").child("child-1");
  ns1.merge(builder1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/node"));
  Long mod1=(Long)doc.get(MODIFIED_IN_SECS);
  assertNotNull(mod1);
  ns2.runBackgroundOperations();
  doc=docStore.find(NODES,Utils.getIdFromPath("/node"));
  Long mod2=(Long)doc.get(MODIFIED_IN_SECS);
  assertTrue("" + mod2 + " < "+ mod1,mod2 >= mod1);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void sameSeenAtRevision() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(1).getNodeStore();
  DocumentNodeStore ns2=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(2).getNodeStore();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("test");
  merge(ns2,b2);
  ns2.runBackgroundOperations();
  ns1.runBackgroundOperations();
  NodeBuilder b1=ns1.getRoot().builder();
  assertTrue(b1.hasChildNode("test"));
  b1.child("test").remove();
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns3=builderProvider.newBuilder().setDocumentStore(store).setAsyncDelay(0).setClusterId(3).getNodeStore();
  ns3.setMaxBackOffMillis(0);
  NodeBuilder b3=ns3.getRoot().builder();
  assertFalse(b3.hasChildNode("test"));
  b3.child("test");
  merge(ns3,b3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentSplitTest </h4><pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cascadingWithSplitRatio(){
  String id=Utils.getIdFromPath("/test");
  mk.commit("/","+\"test\":{}",null,null);
  DocumentStore store=mk.getDocumentStore();
  int clusterId=mk.getNodeStore().getClusterId();
  UpdateOp op=new UpdateOp(id,false);
  for (int i=0; i < 1000; i++) {
    Revision r=Revision.newRevision(2);
    op.setMapEntry("prop",r,"some long test value with many characters");
    NodeDocument.setRevision(op,r,"c");
  }
  store.findAndUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,id);
  assertNotNull(doc);
  assertTrue(doc.getMemory() > NodeDocument.DOC_SIZE_THRESHOLD);
  for (int i=0; i < NUM_REVS_THRESHOLD / 2; i++) {
    Revision r=Revision.newRevision(clusterId);
    op.setMapEntry("prop",r,"value");
    NodeDocument.setRevision(op,r,"c");
  }
  TreeSet<Revision> prev=Sets.newTreeSet(StableRevisionComparator.INSTANCE);
  for (int i=0; i < PREV_SPLIT_FACTOR; i++) {
    Revision low=Revision.newRevision(clusterId);
    Revision high=Revision.newRevision(clusterId);
    prev.add(high);
    NodeDocument.setPrevious(op,new Range(high,low,0));
  }
  store.findAndUpdate(NODES,op);
  doc=store.find(NODES,id);
  assertNotNull(doc);
  List<UpdateOp> splitOps=Lists.newArrayList(doc.split(mk.getNodeStore(),mk.getNodeStore().getHeadRevision()));
  assertEquals(2,splitOps.size());
  op=splitOps.get(0);
  String newPrevId=Utils.getPreviousIdFor("/test",prev.last(),1);
  assertEquals(newPrevId,op.getId());
  op=splitOps.get(1);
  assertEquals(id,op.getId());
  for (  Map.Entry<Key,Operation> entry : op.getChanges().entrySet()) {
    Revision r=entry.getKey().getRevision();
    assertNotNull(r);
    assertEquals(clusterId,r.getClusterId());
    if (entry.getKey().getName().equals("_prev")) {
      if (entry.getValue().type == REMOVE_MAP_ENTRY) {
        assertTrue(prev.contains(r));
      }
 else       if (entry.getValue().type == SET_MAP_ENTRY) {
        assertEquals(newPrevId,Utils.getPreviousIdFor("/test",r,1));
      }
 else {
        fail("unexpected update operation " + entry);
      }
    }
 else {
      fail("unexpected update operation " + entry);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitDocWithHasBinary() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  NodeBuilder b1=ns.getRoot().builder();
  b1.child("test").child("foo").setProperty("binaryProp",ns.createBlob(randomStream(1,4096)));
  ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    b1=ns.getRoot().builder();
    b1.child("test").child("foo").setProperty("prop",i);
    ns.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test/foo"));
  List<NodeDocument> prevDocs=ImmutableList.copyOf(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  assertTrue(doc.hasBinary());
  assertTrue(prevDocs.get(0).hasBinary());
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeGarbage() throws Exception {
  final DocumentStore store=mk.getDocumentStore();
  final DocumentNodeStore ns=mk.getNodeStore();
  final List<Exception> exceptions=Lists.newArrayList();
  final List<RevisionVector> revisions=Lists.newArrayList();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        for (int i=0; i < 200; i++) {
          NodeBuilder builder=ns.getRoot().builder();
          builder.child("foo").child("node").child("node").child("node").child("node");
          builder.child("bar").child("node").child("node").child("node").child("node");
          merge(ns,builder);
          revisions.add(ns.getHeadRevision());
          builder=ns.getRoot().builder();
          builder.child("foo").child("node").remove();
          builder.child("bar").child("node").remove();
          merge(ns,builder);
          revisions.add(ns.getHeadRevision());
        }
      }
 catch (      CommitFailedException e) {
        exceptions.add(e);
      }
    }
  }
);
  t.start();
  RevisionContext rc=new TestRevisionContext(ns);
  while (t.isAlive()) {
    for (    String id : ns.getSplitCandidates()) {
      RevisionVector head=ns.getHeadRevision();
      NodeDocument doc=store.find(NODES,id);
      List<UpdateOp> ops=SplitOperations.forDocument(doc,rc,head,NUM_REVS_THRESHOLD);
      Set<Revision> removed=Sets.newHashSet();
      Set<Revision> added=Sets.newHashSet();
      for (      UpdateOp op : ops) {
        for (        Map.Entry<Key,Operation> e : op.getChanges().entrySet()) {
          if (!"_deleted".equals(e.getKey().getName())) {
            continue;
          }
          Revision r=e.getKey().getRevision();
          if (e.getValue().type == Operation.Type.REMOVE_MAP_ENTRY) {
            removed.add(r);
          }
 else           if (e.getValue().type == Operation.Type.SET_MAP_ENTRY) {
            added.add(r);
          }
        }
      }
      removed.removeAll(added);
      assertTrue("SplitOperations must not remove committed changes: " + removed,removed.isEmpty());
    }
    ns.runBackgroundOperations();
  }
  for (  NodeDocument doc : Utils.getAllDocuments(store)) {
    if (doc.isSplitDocument() || Utils.getDepthFromId(doc.getId()) < 2) {
      continue;
    }
    Set<Revision> revs=Sets.newHashSet();
    for (    RevisionVector rv : revisions) {
      Iterables.addAll(revs,rv);
    }
    revs.removeAll(doc.getValueMap("_deleted").keySet());
    assertTrue("Missing _deleted entries on " + doc.getId() + ": "+ revs,revs.isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commitRootForChildrenFlag() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  for (int i=0; i < NUM_REVS_THRESHOLD * 2; i++) {
    NodeBuilder builder=ns.getRoot().builder();
    builder.child("test").child("child-" + i);
    merge(ns,builder);
  }
  ns.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  assertTrue(doc.getLocalCommitRoot().size() < NUM_REVS_THRESHOLD);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitPropertyRevisions() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  mk.commit("/","+\"foo\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Set<Revision> revisions=Sets.newHashSet();
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    revisions.add(Revision.fromString(mk.commit("/","^\"foo/prop\":" + revisions.size(),null,null)));
  }
  mk.runBackgroundOperations();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> localRevs=doc.getLocalRevisions();
  assertEquals(1,localRevs.size());
  for (  Revision rev : revisions) {
    assertTrue(doc.isCommitted(rev));
  }
  Map<Revision,String> valueMap=doc.getValueMap("prop");
  assertEquals((long)revisions.size(),valueMap.size());
  valueMap=doc.getLocalMap("prop");
  assertEquals(1L,valueMap.size());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cluster(){
  MemoryDocumentStore ds=new MemoryDocumentStore();
  MemoryBlobStore bs=new MemoryBlobStore();
  DocumentMK.Builder builder;
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk1=builder.setClusterId(1).open();
  mk1.commit("/","+\"test\":{\"prop1\":0}",null,null);
  mk1.backgroundWrite();
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk2=builder.setClusterId(2).open();
  builder=new DocumentMK.Builder();
  builder.setDocumentStore(ds).setBlobStore(bs).setAsyncDelay(0);
  DocumentMK mk3=builder.setClusterId(3).open();
  for (int i=0; i < NodeDocument.NUM_REVS_THRESHOLD; i++) {
    mk1.commit("/","^\"test/prop1\":" + i,null,null);
    mk2.commit("/","^\"test/prop2\":" + i,null,null);
    mk3.commit("/","^\"test/prop3\":" + i,null,null);
  }
  mk1.runBackgroundOperations();
  mk2.runBackgroundOperations();
  mk3.runBackgroundOperations();
  NodeDocument doc=ds.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Map<Revision,String> revs=doc.getLocalRevisions();
  assertEquals(3,revs.size());
  revs=doc.getValueMap("_revisions");
  assertEquals(3 * NodeDocument.NUM_REVS_THRESHOLD,revs.size());
  Revision previous=null;
  for (  Map.Entry<Revision,String> entry : revs.entrySet()) {
    if (previous != null) {
      assertTrue(previous.compareRevisionTimeThenClusterId(entry.getKey()) > 0);
    }
    previous=entry.getKey();
  }
  mk1.dispose();
  mk2.dispose();
  mk3.dispose();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitCommitRoot() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  mk.commit("/","+\"foo\":{}+\"bar\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Set<Revision> commitRoots=Sets.newHashSet();
  commitRoots.addAll(doc.getLocalCommitRoot().keySet());
  while (commitRoots.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    commitRoots.add(Revision.fromString(mk.commit("/","^\"foo/prop\":" + commitRoots.size() + "^\"bar/prop\":"+ commitRoots.size(),null,null)));
  }
  mk.runBackgroundOperations();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> commits=doc.getLocalCommitRoot();
  assertEquals(2,commits.size());
  for (  Revision rev : commitRoots) {
    assertTrue(doc.isCommitted(rev));
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void purgeAllButMostRecentCommitRoot() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns1=mk.getNodeStore();
  NodeBuilder builder1=ns1.getRoot().builder();
  builder1.child("test");
  merge(ns1,builder1);
  ns1.runBackgroundOperations();
  DocumentNodeStore ns2=new DocumentMK.Builder().setDocumentStore(store).setAsyncDelay(0).setClusterId(ns1.getClusterId() + 1).getNodeStore();
  ns2.setMaxBackOffMillis(0);
  assertTrue(ns2.getRoot().hasChildNode("test"));
  NodeBuilder builder2=ns2.getRoot().builder();
  builder2.child("test").remove();
  for (int i=0; i < NUM_REVS_THRESHOLD * 2; i++) {
    builder1=ns1.getRoot().builder();
    builder1.child("test").child("child-" + i);
    merge(ns1,builder1);
  }
  ns1.runBackgroundOperations();
  try {
    merge(ns2,builder2);
    fail("merge must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitDeleted() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  Set<Revision> revisions=Sets.newHashSet();
  mk.commit("/","+\"foo\":{}",null,null);
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  revisions.addAll(doc.getLocalRevisions().keySet());
  boolean create=false;
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    if (create) {
      revisions.add(Revision.fromString(mk.commit("/","+\"foo\":{}",null,null)));
    }
 else {
      revisions.add(Revision.fromString(mk.commit("/","-\"foo\"",null,null)));
    }
    create=!create;
  }
  mk.runBackgroundOperations();
  String head=mk.getHeadRevision();
  doc=store.find(NODES,Utils.getIdFromPath("/foo"));
  assertNotNull(doc);
  Map<Revision,String> deleted=doc.getLocalDeleted();
  assertEquals(1,deleted.size());
  for (  Revision rev : revisions) {
    assertTrue("document should contain revision (or have revision in commit root path):" + rev,doc.containsRevision(rev) || doc.getCommitRootPath(rev) != null);
    assertTrue(doc.isCommitted(rev));
  }
  DocumentNodeState node=ns.getNode("/foo",RevisionVector.fromString(head));
  if (create) {
    assertNull(node);
  }
 else {
    assertNotNull(node);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void keepCommitRootForMostRecentChanges() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  NodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.setProperty("p",-1);
  NodeBuilder test=builder.child("test");
  test.setProperty("foo",-1);
  test.setProperty("bar",-1);
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.setProperty("p",i);
    test=builder.child("test");
    test.setProperty("foo",i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  mk.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("bar");
  assertFalse(valueMap.isEmpty());
  Revision r=valueMap.keySet().iterator().next();
  assertTrue(doc.getLocalCommitRoot().containsKey(r));
  List<NodeDocument> prevDocs=Lists.newArrayList(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  NodeDocument prev=prevDocs.get(0);
  assertTrue(prev.getLocalCommitRoot().containsKey(r));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void keepRevisionsForMostRecentChanges() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  NodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  builder.setProperty("foo",-1);
  builder.setProperty("bar",-1);
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  for (int i=0; i < NUM_REVS_THRESHOLD; i++) {
    builder=ns.getRoot().builder();
    builder.setProperty("foo",i);
    ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  }
  mk.runBackgroundOperations();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("bar");
  assertFalse(valueMap.isEmpty());
  Revision r=valueMap.keySet().iterator().next();
  assertTrue(doc.getLocalRevisions().containsKey(r));
  List<NodeDocument> prevDocs=Lists.newArrayList(doc.getAllPreviousDocs());
  assertEquals(1,prevDocs.size());
  NodeDocument prev=prevDocs.get(0);
  assertTrue(prev.getLocalRevisions().containsKey(r));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void splitRevisions() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  Set<Revision> revisions=Sets.newHashSet();
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  revisions.addAll(doc.getLocalRevisions().keySet());
  revisions.add(Revision.fromString(mk.commit("/","+\"foo\":{}+\"bar\":{}",null,null)));
  while (revisions.size() <= NodeDocument.NUM_REVS_THRESHOLD) {
    revisions.add(Revision.fromString(mk.commit("/","+\"foo/node-" + revisions.size() + "\":{}"+ "+\"bar/node-"+ revisions.size()+ "\":{}",null,null)));
  }
  mk.runBackgroundOperations();
  String head=mk.getHeadRevision();
  doc=store.find(NODES,Utils.getIdFromPath("/"));
  assertNotNull(doc);
  Map<Revision,String> revs=doc.getLocalRevisions();
  assertEquals(1,revs.size());
  for (  Revision rev : revisions) {
    assertTrue(doc.containsRevision(rev));
    assertTrue(doc.isCommitted(rev));
  }
  assertNotNull(ns.getNode("/",RevisionVector.fromString(head)));
  NodeDocument prevDoc=Iterators.getOnlyElement(doc.getAllPreviousDocs());
  assertEquals(SplitDocType.DEFAULT,prevDoc.getSplitDocType());
  mk.commit("/","+\"baz\":{}",null,null);
  ns.setAsyncDelay(0);
  mk.backgroundWrite();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStorePerformanceTest </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPerfLastRevBatch(){
  String bid=this.getClass().getName() + ".testPerfLastRevBatch";
  int nodecount=100;
  long duration=5000;
  int cnt=0;
  List<String> ids=new ArrayList<String>();
  Revision cr=Revision.fromString("r0-0-1");
  for (int i=0; i < nodecount; i++) {
    String id=bid + "-" + i;
    super.ds.remove(Collection.NODES,id);
    removeMe.add(id);
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    up.set("testprop",generateString(100 * i,true));
    up.setMapEntry("_lastRev",cr,"setup");
    up.set("_modified",NodeDocument.getModifiedInSecs(System.currentTimeMillis()));
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("creation failed for " + id + " in "+ super.dsname,success);
    ids.add(id);
  }
  long end=System.currentTimeMillis() + duration;
  while (System.currentTimeMillis() < end) {
    UpdateOp up=new UpdateOp(bid,true);
    up.setMapEntry("_lastRev",cr,"iteration-" + cnt);
    up.max("_modified",NodeDocument.getModifiedInSecs(System.currentTimeMillis()));
    super.ds.update(Collection.NODES,ids,up);
    cnt+=1;
  }
  super.ds.invalidateCache();
  for (int i=0; i < nodecount; i++) {
    NodeDocument d=super.ds.find(Collection.NODES,bid + "-" + i);
    assertNotNull(d);
    Map<Revision,String> m=(Map<Revision,String>)d.get("_lastRev");
    assertEquals("iteration-" + (cnt - 1),m.get(cr));
  }
  LOG.info("batch update for _lastRev for " + super.dsname + " was "+ cnt+ " in "+ duration+ "ms ("+ (cnt / (duration / 1000f))+ "/s)");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.DocumentStoreStatsIT </h4><pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void query() throws Exception {
  String base=testName.getMethodName();
  for (int i=0; i < 10; i++) {
    String id=base + i;
    UpdateOp up=new UpdateOp(id,true);
    up.set("_id",id);
    boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
    assertTrue("document with " + id + " not created",success);
    removeMe.add(id);
  }
  ds.query(Collection.NODES,base,base + "A",5);
  verify(stats).doneQuery(anyLong(),eq(Collection.NODES),eq(base),eq(base + "A"),eq(false),eq(5),anyLong(),eq(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.JournalEntryTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fillExternalChanges() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  JournalEntry entry=JOURNAL.newDocument(store);
  Set<String> paths=Sets.newHashSet();
  addRandomPaths(paths);
  entry.modified(paths);
  Revision r1=new Revision(1,0,1);
  Revision r2=new Revision(2,0,1);
  Revision r3=new Revision(3,0,1);
  UpdateOp op=entry.asUpdateOp(r2);
  assertTrue(store.create(JOURNAL,Collections.singletonList(op)));
  StringSort sort=JournalEntry.newSorter();
  JournalEntry.fillExternalChanges(sort,r2,r3,store);
  assertEquals(0,sort.getSize());
  JournalEntry.fillExternalChanges(sort,r1,r2,store);
  assertEquals(paths.size(),sort.getSize());
  sort.close();
  sort=JournalEntry.newSorter();
  JournalEntry.fillExternalChanges(sort,r1,r3,store);
  assertEquals(paths.size(),sort.getSize());
  sort.close();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void applyTo() throws Exception {
  DiffCache cache=new MemoryDiffCache(new DocumentMK.Builder());
  List<String> paths=Lists.newArrayList();
  addRandomPaths(paths);
  StringSort sort=JournalEntry.newSorter();
  add(sort,paths);
  RevisionVector from=new RevisionVector(new Revision(1,0,1));
  RevisionVector to=new RevisionVector(new Revision(2,0,1));
  sort.sort();
  JournalEntry.applyTo(sort,cache,from,to);
  for (  String p : paths) {
    String changes=cache.getChanges(from,to,p,null);
    assertNotNull("missing changes for " + p,changes);
    for (    String c : getChildren(changes)) {
      assertTrue(paths.contains(PathUtils.concat(p,c)));
    }
  }
  sort.close();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getRevisionTimestamp() throws Exception {
  DocumentStore store=new MemoryDocumentStore();
  JournalEntry entry=JOURNAL.newDocument(store);
  entry.modified("/foo");
  Revision r=Revision.newRevision(1);
  assertTrue(store.create(JOURNAL,Collections.singletonList(entry.asUpdateOp(r))));
  entry=store.find(JOURNAL,JournalEntry.asId(r));
  assertEquals(r.getTimestamp(),entry.getRevisionTimestamp());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.JournalTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void journalEntryKey() throws Exception {
  DocumentNodeStore ns1=createMK(1,0).getNodeStore();
  DocumentNodeStore ns2=createMK(2,0).getNodeStore();
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("foo");
  ns1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ns1.runBackgroundOperations();
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("bar");
  ns2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Revision h2=ns2.getHeadRevision().getRevision(ns2.getClusterId());
  assertNotNull(h2);
  ns2.runBackgroundReadOperations();
  ns2.runBackgroundOperations();
  String id=JournalEntry.asId(h2);
  assertTrue("Background update did not create a journal entry with id " + id,ns1.getDocumentStore().find(Collection.JOURNAL,id) != null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LargeTreeOperationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeLargeSubtree() throws CommitFailedException {
  DocumentNodeStore ns=new DocumentMK.Builder().setUseSimpleRevision(true).getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  NodeBuilder test=builder.child("test");
  for (int i=0; i < DocumentRootBuilder.UPDATE_LIMIT * 3; i++) {
    test.child("child-" + i);
  }
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=ns.getRoot().builder();
  Revision r1=ns.newRevision();
  builder.getChildNode("test").remove();
  Revision r2=ns.newRevision();
  assertTrue("remove of large subtree must trigger branch commits",r2.getTimestamp() - r1.getTimestamp() > 1);
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevRecoveryAgentTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepeatedRecovery() throws Exception {
  NodeBuilder b1=ds1.getRoot().builder();
  b1.child("x").child("y");
  ds1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  ds2.runBackgroundOperations();
  NodeBuilder b2=ds2.getRoot().builder();
  b2.child("x").child("y").child("z").setProperty("foo","bar");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeDocument z1=getDocument(ds1,"/x/y/z");
  Revision zlastRev2=z1.getLastRev().get(c2Id);
  long leaseTime=ds1.getClusterInfo().getLeaseTime();
  ds1.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + leaseTime + 10);
  ds1.getClusterInfo().renewLease();
  assertTrue(ds1.getLastRevRecoveryAgent().isRecoveryNeeded());
  ds1.getLastRevRecoveryAgent().performRecoveryIfNeeded();
  assertFalse(ds1.getLastRevRecoveryAgent().isRecoveryNeeded());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsRecoveryRequired() throws Exception {
  NodeBuilder b1=ds1.getRoot().builder();
  b1.child("x").child("y");
  ds1.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  ds1.runBackgroundOperations();
  ds2.runBackgroundOperations();
  NodeBuilder b2=ds2.getRoot().builder();
  b2.child("x").child("y").child("z").setProperty("foo","bar");
  ds2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Revision zlastRev2=ds2.getHeadRevision().getRevision(ds2.getClusterId());
  long leaseTime=ds1.getClusterInfo().getLeaseTime();
  ds1.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + leaseTime + 10);
  ds1.getClusterInfo().renewLease();
  assertTrue(ds1.getLastRevRecoveryAgent().isRecoveryNeeded());
  List<Integer> cids=ds1.getLastRevRecoveryAgent().getRecoveryCandidateNodes();
  assertEquals(1,cids.size());
  assertEquals(c2Id,cids.get(0).intValue());
  ds1.getLastRevRecoveryAgent().recover(cids.get(0));
  assertEquals(zlastRev2,getDocument(ds1,"/x/y").getLastRev().get(c2Id));
  assertEquals(zlastRev2,getDocument(ds1,"/x").getLastRev().get(c2Id));
  assertEquals(zlastRev2,getDocument(ds1,"/").getLastRev().get(c2Id));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LastRevRecoveryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void recoveryWithoutRootUpdate() throws Exception {
  String clusterId=String.valueOf(c1Id);
  ClusterNodeInfoDocument doc=sharedStore.find(CLUSTER_NODES,clusterId);
  NodeBuilder builder=ds1.getRoot().builder();
  builder.child("x").child("y").child("z");
  merge(ds1,builder);
  ds1.dispose();
  sharedStore.remove(CLUSTER_NODES,clusterId);
  sharedStore.create(CLUSTER_NODES,newArrayList(updateOpFromDocument(doc)));
  clock.waitUntil(doc.getLeaseEndTime() + 1);
  LastRevRecoveryAgent agent=new LastRevRecoveryAgent(ds2);
  List<Integer> clusterIds=agent.getRecoveryCandidateNodes();
  assertTrue(clusterIds.contains(c1Id));
  assertEquals("must not recover any documents",0,agent.recover(c1Id));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.LocalDiffCacheTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleDiff() throws Exception {
  TestNodeObserver o=new TestNodeObserver("/");
  store=createMK().getNodeStore();
  store.addObserver(o);
  o.reset();
  DiffCache cache=store.getDiffCache();
  Iterable<CacheStats> stats=cache.getStats();
  NodeBuilder builder=store.getRoot().builder();
  builder.child("a").child("a2").setProperty("foo","bar");
  builder.child("b");
  merge(store,builder);
  assertTrue(getHitCount(stats) > 0);
  assertEquals(0,getMissCount(stats));
  assertEquals(3,o.added.size());
  builder=store.getRoot().builder();
  builder.child("a").child("a2").removeProperty("foo");
  o.reset();
  resetStats(stats);
  merge(store,builder);
  assertTrue(getHitCount(stats) > 0);
  assertEquals(0,getMissCount(stats));
  assertEquals(1,o.changed.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ManyChildNodesTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nodeChildrenCache() throws Exception {
  DocumentNodeStore ns=new DocumentMK.Builder().getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < 1000; i++) {
    builder.child("c-" + i);
  }
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(ns.getNodeChildrenCacheStats().getElementCount() < 1000);
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void manyChildNodes() throws Exception {
  TestStore store=new TestStore();
  DocumentMK mk=new DocumentMK.Builder().setDocumentStore(store).open();
  NodeStore ns=mk.getNodeStore();
  NodeBuilder builder=ns.getRoot().builder();
  for (int i=0; i < DocumentNodeState.MAX_FETCH_SIZE * 2; i++) {
    builder.child("c-" + i);
  }
  ns.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  store.queries.clear();
  for (  ChildNodeEntry entry : ns.getRoot().getChildNodeEntries()) {
    entry.getName();
  }
  int maxFetchSize=DocumentNodeState.MAX_FETCH_SIZE + 1;
  for (  Map.Entry<String,Integer> e : store.queries.entrySet()) {
    assertTrue(e.getValue() + " > " + maxFetchSize,e.getValue() <= maxFetchSize);
  }
  mk.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoBlobGCTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void noGc() throws Exception {
  DataStoreState state=setUp(true);
  Set<String> existingAfterGC=gc(86400);
  assertTrue(Sets.symmetricDifference(state.blobsAdded,existingAfterGC).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void gcVersionDelete() throws Exception {
  DataStoreState state=setUp(false);
  Set<String> existingAfterGC=gc(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void consistencyCheckWithGc() throws Exception {
  DataStoreState state=setUp(true);
  Set<String> existingAfterGC=gc(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void gcDirectMongoDeleteWithInlined() throws Exception {
  DataStoreState state=setUp(true);
  addInlined();
  Set<String> existingAfterGC=gc(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void referencedBlobs() throws Exception {
  Iterator<ReferencedBlob> blobs=mk.getNodeStore().getReferencedBlobsIterator();
  assertTrue(blobs instanceof MongoBlobReferenceIterator);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void gcVersionDeleteWithInlined() throws Exception {
  DataStoreState state=setUp(false);
  addInlined();
  Set<String> existingAfterGC=gc(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void gcDirectMongoDelete() throws Exception {
  DataStoreState state=setUp(true);
  Set<String> existingAfterGC=gc(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcLongRunningBlobCollection() throws Exception {
  DataStoreState state=setUp(true);
  log.info("{} Blobs added {}",state.blobsAdded.size(),state.blobsAdded);
  log.info("{} Blobs should be present {}",state.blobsPresent.size(),state.blobsPresent);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  DocumentNodeStore store=mk.getNodeStore();
  String repoId=null;
  if (SharedDataStoreUtils.isShared(store.getBlobStore())) {
    repoId=ClusterRepositoryInfo.createId(store);
    ((SharedDataStore)store.getBlobStore()).addMetadataRecord(new ByteArrayInputStream(new byte[0]),REPOSITORY.getNameFromId(repoId));
  }
  TestGarbageCollector gc=new TestGarbageCollector(new DocumentBlobReferenceRetriever(store),(GarbageCollectableBlobStore)store.getBlobStore(),executor,"./target",5,5000,repoId);
  gc.collectGarbage(false);
  Set<String> existingAfterGC=iterate();
  log.info("{} Blobs existing after gc {}",existingAfterGC.size(),existingAfterGC);
  assertTrue(Sets.difference(state.blobsPresent,existingAfterGC).isEmpty());
  assertEquals(gc.additionalBlobs,Sets.symmetricDifference(state.blobsPresent,existingAfterGC));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreIT </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void create() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  String id=Utils.getIdFromPath("/test");
  UpdateOp updateOp=new UpdateOp(id,true);
  updateOp.set(Document.ID,id);
  Revision r1=Revision.newRevision(1);
  updateOp.setMapEntry("p",r1,"a");
  Revision r2=Revision.newRevision(1);
  updateOp.setMapEntry("p",r2,"b");
  Revision r3=Revision.newRevision(1);
  updateOp.setMapEntry("p",r3,"c");
  assertTrue(store.create(NODES,Collections.singletonList(updateOp)));
  NodeDocument doc=store.find(NODES,id,0);
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(3,valueMap.size());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void modCount() throws Exception {
  DocumentStore docStore=mk.getDocumentStore();
  String head=mk.commit("/","+\"test\":{}",null,null);
  mk.commit("/test","^\"prop\":\"v1\"",head,null);
  mk.runBackgroundOperations();
  NodeDocument doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Long mc1=doc.getModCount();
  assertNotNull(mc1);
  try {
    mk.commit("/test","^\"prop\":\"v2\"",head,null);
    fail();
  }
 catch (  DocumentStoreException e) {
  }
  doc=docStore.find(NODES,Utils.getIdFromPath("/test"));
  assertNotNull(doc);
  Long mc2=doc.getModCount();
  assertNotNull(mc2);
  assertTrue(mc2 > mc1);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createWithNull() throws Exception {
  DocumentStore store=mk.getDocumentStore();
  String id=Utils.getIdFromPath("/test");
  UpdateOp updateOp=new UpdateOp(id,true);
  updateOp.set(Document.ID,id);
  Revision r1=Revision.newRevision(1);
  updateOp.setMapEntry("p",r1,"a");
  Revision r2=Revision.newRevision(1);
  updateOp.setMapEntry("p",r2,null);
  Revision r3=Revision.newRevision(1);
  updateOp.setMapEntry("p",r3,"c");
  assertTrue(store.create(NODES,Collections.singletonList(updateOp)));
  NodeDocument doc=store.find(NODES,id,0);
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(3,valueMap.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MongoDocumentStoreTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addGetAndRemove() throws Exception {
  DocumentStore docStore=openDocumentStore();
  UpdateOp updateOp=new UpdateOp("/",true);
  Revision r1=new Revision(0,0,0);
  updateOp.setMapEntry("property1",r1,"value1");
  updateOp.increment("property2",1);
  updateOp.set("property3","value3");
  docStore.createOrUpdate(Collection.NODES,updateOp);
  NodeDocument doc=docStore.find(Collection.NODES,"/");
  assertNotNull(doc);
  Map<?,?> property1=(Map<?,?>)doc.get("property1");
  assertNotNull(property1);
  String value1=(String)property1.get(r1);
  assertEquals("value1",value1);
  Long value2=(Long)doc.get("property2");
  assertEquals(Long.valueOf(1),value2);
  String value3=(String)doc.get("property3");
  assertEquals("value3",value3);
  docStore.remove(Collection.NODES,"/");
  doc=docStore.find(Collection.NODES,"/");
  assertTrue(doc == null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.MultiDocumentStoreTest </h4><pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangeVisibility(){
  String id=this.getClass().getName() + ".testChangeVisibility";
  super.ds1.remove(Collection.NODES,id);
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_foo",0);
  up.set("_bar",0);
  assertTrue(super.ds1.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  NodeDocument orig=super.ds1.find(Collection.NODES,id);
  if (orig.getModCount() != null) {
    long origMc=orig.getModCount();
    UpdateOp up2=new UpdateOp(id,false);
    up2.set("_id",id);
    up2.increment("_foo",1L);
    super.ds2.update(Collection.NODES,Collections.singletonList(id),up2);
    NodeDocument ds2doc=super.ds2.find(Collection.NODES,id);
    long ds2Mc=ds2doc.getModCount();
    assertTrue("_modCount needs to be > " + origMc + " but was "+ ds2Mc,ds2Mc > origMc);
    UpdateOp up1=new UpdateOp(id,false);
    up1.set("_id",id);
    up1.increment("_bar",1L);
    super.ds1.update(Collection.NODES,Collections.singletonList(id),up1);
    NodeDocument ds1doc=super.ds1.find(Collection.NODES,id);
    long ds1Mc=ds1doc.getModCount();
    assertTrue("_modCount needs to be > " + ds2Mc + " but was "+ ds1Mc,ds1Mc > ds2Mc);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidateCache(){
  String id="1:/" + this.getClass().getName() + ".testInvalidateCache";
  NodeDocument nd=super.ds1.find(Collection.NODES,id);
  if (nd != null) {
    super.ds1.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_foo","bar");
  assertTrue(super.ds1.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  NodeDocument nd1=super.ds1.find(Collection.NODES,id);
  NodeDocument nd2=super.ds2.find(Collection.NODES,id);
  assertNotNull(nd1);
  assertNotNull(nd2);
  long firstVersion=nd1.getModCount();
  assertEquals(firstVersion,nd2.getModCount().longValue());
  UpdateOp upds1=new UpdateOp(id,true);
  upds1.set("_id",id);
  upds1.set("foo","qux");
  super.ds1.update(Collection.NODES,Collections.singletonList(id),upds1);
  nd1=super.ds1.find(Collection.NODES,id);
  assertEquals("modcount should have changed in ds1",firstVersion + 1,nd1.getModCount().longValue());
  nd2=super.ds2.find(Collection.NODES,id);
  assertEquals("ds2 should still be on first version",firstVersion,nd2.getModCount().longValue());
  nd2=super.ds2.find(Collection.NODES,id,0);
  assertEquals("ds2 should now see the second version",firstVersion + 1,nd2.getModCount().longValue());
  NodeDocument nd2b=super.ds2.find(Collection.NODES,id);
  assertEquals("ds2 should now see the second version",firstVersion + 1,nd2b.getModCount().longValue());
  UpdateOp upds2=new UpdateOp(id,true);
  upds2.set("_id",id);
  upds2.set("foo","blub");
  super.ds2.update(Collection.NODES,Collections.singletonList(id),upds1);
  nd2=super.ds2.find(Collection.NODES,id);
  assertEquals("modcount should have incremented again",firstVersion + 2,nd2.getModCount().longValue());
  long ds1checktime=nd1.getLastCheckTime();
  letTimeElapse();
  ds1.invalidateCache();
  nd1=super.ds1.find(Collection.NODES,id);
  assertEquals("modcount should have incremented again",firstVersion + 2,nd1.getModCount().longValue());
  assertTrue(nd1.getLastCheckTime() > ds1checktime);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterleavedUpdate(){
  String id=this.getClass().getName() + ".testInterleavedUpdate";
  NodeDocument nd=super.ds1.find(Collection.NODES,id);
  if (nd != null) {
    super.ds1.remove(Collection.NODES,id);
  }
  UpdateOp up=new UpdateOp(id,true);
  up.set("_id",id);
  up.set("_foo",0);
  assertTrue(super.ds1.create(Collection.NODES,Collections.singletonList(up)));
  removeMe.add(id);
  long increments=10;
  for (int i=0; i < increments; i++) {
    up=new UpdateOp(id,true);
    up.set("_id",id);
    up.increment("_foo",1);
    if (i % 2 == 0) {
      super.ds1.update(Collection.NODES,Collections.singletonList(id),up);
    }
 else {
      super.ds2.update(Collection.NODES,Collections.singletonList(id),up);
    }
  }
  nd=super.ds1.find(Collection.NODES,id,0);
  assertEquals("_foo should have been incremented 10 times",increments,nd.get("_foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.NodeDocumentTest </h4><pre class="type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesAfterGC2() throws Exception {
  int numChanges=200;
  DocumentNodeStore ns=createTestStore(numChanges);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  NodeDocument toRemove=Iterators.getLast(root.getAllPreviousDocs());
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  numChanges-=Iterables.size(toRemove.getAllChanges());
  root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(numChanges + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChanges() throws Exception {
  final int NUM_CHANGES=200;
  DocumentNodeStore ns=createTestStore(NUM_CHANGES);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(NUM_CHANGES + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesCluster() throws Exception {
  final int NUM_CLUSTER_NODES=3;
  final int NUM_CHANGES=500;
  DocumentStore store=new MemoryDocumentStore();
  List<DocumentNodeStore> docStores=Lists.newArrayList();
  for (int i=0; i < NUM_CLUSTER_NODES; i++) {
    DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(store).setAsyncDelay(0).setClusterId(i + 1).getNodeStore();
    docStores.add(ns);
  }
  Random r=new Random(42);
  for (int i=0; i < NUM_CHANGES; i++) {
    int clusterIdx=r.nextInt(NUM_CLUSTER_NODES);
    DocumentNodeStore ns=docStores.get(clusterIdx);
    NodeBuilder builder=ns.getRoot().builder();
    builder.setProperty("p-" + clusterIdx,i);
    merge(ns,builder);
    if (r.nextFloat() < 0.2) {
      RevisionVector head=ns.getHeadRevision();
      for (      UpdateOp op : SplitOperations.forDocument(getRootDocument(store),ns,head,2)) {
        store.createOrUpdate(NODES,op);
      }
    }
  }
  DocumentNodeStore ns=docStores.get(0);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision rev : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTimeThenClusterId(rev) > 0);
    previous=rev;
  }
  assertEquals(NUM_CHANGES + 1,Iterables.size(root.getAllChanges()));
  for (  DocumentNodeStore dns : docStores) {
    dns.dispose();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllChangesAfterGC1() throws Exception {
  int numChanges=200;
  DocumentNodeStore ns=createTestStore(numChanges);
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  NodeDocument toRemove=root.getAllPreviousDocs().next();
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  numChanges-=Iterables.size(toRemove.getAllChanges());
  root=getRootDocument(ns.getDocumentStore());
  Revision previous=ns.newRevision();
  for (  Revision r : root.getAllChanges()) {
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  assertEquals(numChanges + 1,Iterables.size(root.getAllChanges()));
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void getNewestRevisionTooExpensive() throws Exception {
  final int NUM_CHANGES=200;
  final Set<String> prevDocCalls=newHashSet();
  DocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      if (Utils.getPathFromId(key).startsWith("p")) {
        prevDocCalls.add(key);
      }
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore ns=new DocumentMK.Builder().setDocumentStore(store).setAsyncDelay(0).getNodeStore();
  for (int i=0; i < NUM_CHANGES; i++) {
    NodeBuilder builder=ns.getRoot().builder();
    if (builder.hasChildNode("test")) {
      builder.child("test").remove();
      builder.child("foo").remove();
    }
 else {
      builder.child("test");
      builder.child("foo");
    }
    merge(ns,builder);
    if (Math.random() < 0.2) {
      RevisionVector head=ns.getHeadRevision();
      NodeDocument doc=ns.getDocumentStore().find(NODES,Utils.getIdFromPath("/test"));
      for (      UpdateOp op : SplitOperations.forDocument(doc,ns,head,2)) {
        store.createOrUpdate(NODES,op);
      }
    }
  }
  NodeDocument doc=ns.getDocumentStore().find(NODES,Utils.getIdFromPath("/test"));
  NodeDocument prev=doc.getAllPreviousDocs().next();
  Iterable<Revision> changes=prev.getAllChanges();
  Revision baseRev=Iterables.getLast(changes);
  Revision changeRev=new Revision(baseRev.getTimestamp(),1000,ns.getClusterId());
  prevDocCalls.clear();
  doc.getNewestRevision(ns,new RevisionVector(baseRev),changeRev,null,new HashSet<Revision>());
  assertTrue("too many calls for previous documents: " + prevDocCalls,prevDocCalls.size() <= 5);
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void isConflicting() throws Exception {
  final int numChanges=200;
  final Set<String> prevDocCalls=newHashSet();
  MemoryDocumentStore store=new MemoryDocumentStore(){
    @Override public <T extends Document>T find(    Collection<T> collection,    String key){
      if (Utils.getPathFromId(key).startsWith("p")) {
        prevDocCalls.add(key);
      }
      return super.find(collection,key);
    }
  }
;
  DocumentNodeStore ns=createTestStore(store,0,numChanges);
  NodeDocument doc=getRootDocument(store);
  Map<Revision,String> valueMap=doc.getValueMap("p");
  assertEquals(200,valueMap.size());
  RevisionVector baseRev=new RevisionVector(valueMap.keySet().iterator().next());
  Revision commitRev=ns.newRevision();
  UpdateOp op=new UpdateOp(Utils.getIdFromPath("/"),false);
  op.setMapEntry("p",commitRev,"v");
  prevDocCalls.clear();
  assertFalse(doc.isConflicting(op,baseRev,commitRev,false));
  assertTrue("too many calls for previous documents: " + prevDocCalls,prevDocCalls.size() <= 6);
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getConflictsFor(){
  MemoryDocumentStore docStore=new MemoryDocumentStore();
  String id=Utils.getPathFromId("/");
  NodeDocument doc=new NodeDocument(docStore);
  doc.put(Document.ID,id);
  Iterable<Revision> branchCommits=Collections.emptyList();
  Set<Revision> conflicts=doc.getConflictsFor(branchCommits);
  assertTrue(conflicts.isEmpty());
  UpdateOp op=new UpdateOp(id,false);
  Revision r0=Revision.newRevision(1);
  Revision r1=Revision.newRevision(1);
  Revision c1=Revision.newRevision(1);
  Revision r2=Revision.newRevision(1);
  Revision c2=Revision.newRevision(1);
  op.setMapEntry(COLLISIONS,r0,String.valueOf(true));
  NodeDocument.addCollision(op,r1,c1);
  NodeDocument.addCollision(op,r2,c2);
  UpdateUtils.applyChanges(doc,op);
  branchCommits=Collections.singleton(r0);
  conflicts=doc.getConflictsFor(branchCommits);
  assertTrue(conflicts.isEmpty());
  branchCommits=Collections.singleton(r1.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1),conflicts);
  branchCommits=Collections.singleton(r2.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c2),conflicts);
  branchCommits=Lists.newArrayList(r1.asBranchRevision(),r2.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1,c2),conflicts);
  branchCommits=Lists.newArrayList(r2.asBranchRevision(),r1.asBranchRevision());
  conflicts=doc.getConflictsFor(branchCommits);
  assertEquals(newHashSet(c1,c2),conflicts);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPreviousDocLeavesAfterGC1() throws Exception {
  DocumentNodeStore ns=createTestStore(200);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  int numLeaves=Iterators.size(root.getPreviousDocLeaves());
  NodeDocument toRemove=root.getAllPreviousDocs().next();
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  root=getRootDocument(ns.getDocumentStore());
  assertEquals(numLeaves - 1,Iterators.size(root.getPreviousDocLeaves()));
  Iterator<NodeDocument> it=root.getPreviousDocLeaves();
  while (it.hasNext()) {
    NodeDocument leaf=it.next();
    Revision r=leaf.getAllChanges().iterator().next();
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getPreviousDocLeavesAfterGC2() throws Exception {
  DocumentNodeStore ns=createTestStore(200);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  int numLeaves=Iterators.size(root.getPreviousDocLeaves());
  NodeDocument toRemove=Iterators.getLast(root.getAllPreviousDocs());
  int numDeleted=new SplitDocumentCleanUp(ns.store,new VersionGCStats(),Collections.singleton(toRemove)).disconnect().deleteSplitDocuments();
  assertEquals(1,numDeleted);
  root=getRootDocument(ns.getDocumentStore());
  assertEquals(numLeaves - 1,Iterators.size(root.getPreviousDocLeaves()));
  Iterator<NodeDocument> it=root.getPreviousDocLeaves();
  while (it.hasNext()) {
    NodeDocument leaf=it.next();
    Revision r=leaf.getAllChanges().iterator().next();
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  ns.dispose();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNewestRevision() throws Exception {
  MemoryDocumentStore store=new MemoryDocumentStore();
  DocumentNodeStore ns1=createTestStore(store,1,0);
  DocumentNodeStore ns2=createTestStore(store,2,0);
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("test");
  merge(ns1,b1);
  RevisionVector headCreated=ns1.getHeadRevision();
  Revision created=headCreated.getRevision(ns1.getClusterId());
  NodeDocument doc=store.find(NODES,Utils.getIdFromPath("/test"));
  Set<Revision> collisions=newHashSet();
  Revision newest=doc.getNewestRevision(ns1,ns1.getHeadRevision(),ns1.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(0,collisions.size());
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertNull(newest);
  assertEquals(1,collisions.size());
  assertEquals(created,collisions.iterator().next());
  ns1.runBackgroundOperations();
  ns2.runBackgroundOperations();
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(0,collisions.size());
  Revision uncommitted=ns1.newRevision();
  UpdateOp op=new UpdateOp(Utils.getIdFromPath("/test"),false);
  NodeDocument.setCommitRoot(op,uncommitted,0);
  op.setMapEntry("p",uncommitted,"v");
  assertNotNull(store.findAndUpdate(NODES,op));
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns1,ns1.getHeadRevision(),ns1.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(1,collisions.size());
  assertEquals(uncommitted,collisions.iterator().next());
  collisions.clear();
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(1,collisions.size());
  assertEquals(uncommitted,collisions.iterator().next());
  b1=ns1.getRoot().builder();
  b1.child("test").setProperty("q","v");
  merge(ns1,b1);
  Revision committed=ns1.getHeadRevision().getRevision(ns1.getClusterId());
  collisions.clear();
  doc=store.find(NODES,Utils.getIdFromPath("/test"));
  newest=doc.getNewestRevision(ns1,headCreated,ns1.newRevision(),null,collisions);
  assertEquals(committed,newest);
  assertEquals(0,collisions.size());
  newest=doc.getNewestRevision(ns2,ns2.getHeadRevision(),ns2.newRevision(),null,collisions);
  assertEquals(created,newest);
  assertEquals(2,collisions.size());
  assertTrue(collisions.contains(uncommitted));
  assertTrue(collisions.contains(committed));
  ns1.dispose();
  ns2.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getPreviousDocLeaves() throws Exception {
  DocumentNodeStore ns=createTestStore(200);
  Revision previous=ns.newRevision();
  NodeDocument root=getRootDocument(ns.getDocumentStore());
  Iterator<NodeDocument> it=root.getPreviousDocLeaves();
  while (it.hasNext()) {
    NodeDocument leaf=it.next();
    Revision r=leaf.getAllChanges().iterator().next();
    assertTrue(previous.compareRevisionTime(r) > 0);
    previous=r;
  }
  ns.dispose();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.NodeStoreDiffTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This testcase demonstrates that diff logic in merge part traverses node path
 * which are not affected by the commit
 * @throws Exception
 */
@Test public void testDiff() throws Exception {
  createNodes("/oak:index/prop-a","/oak:index/prop-b","/etc/workflow");
  createNodes("/fake/a");
  createNodes("/fake/b");
  NodeBuilder b2=ns.getRoot().builder();
  createNodes(b2,"/etc/workflow/instance1");
  tds.reset();
  ns.merge(b2,new CommitHook(){
    @Nonnull public NodeState processCommit(    NodeState before,    NodeState after,    CommitInfo info) throws CommitFailedException {
      NodeBuilder rb=after.builder();
      createNodes(rb,"/oak:index/prop-a/a1");
      createNodes("/oak:index/prop-b/b1");
      return rb.getNodeState();
    }
  }
,CommitInfo.EMPTY);
  assertFalse(tds.paths.contains("/oak:index/prop-b/b1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.OptimizedChildFetchTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void checkForChildStatusFlag(){
  String head=mk.getHeadRevision();
  mk.commit("","+\"/root\":{}\n" + "+\"/root/a\":{}\n" + "+\"/root/a/b\":{}\n",head,"");
  assertTrue(hasChildren("/root"));
  assertTrue(hasChildren("/root/a"));
  assertFalse(hasChildren("/root/a/b"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkForNoCallsToFetchChildForLeafNodes(){
  String head=mk.getHeadRevision();
  String rev=mk.commit("","+\"/root\":{}\n" + "+\"/root/a\":{}\n" + "+\"/root/c\":{}\n"+ "+\"/root/a/b\":{}\n",head,"");
  ds.paths.clear();
  resetMK();
  mk.getNodes("/root/a",rev,0,0,10,null);
  assertThat(ds.paths,hasItem("3:/root/a/"));
  resetMK();
  ds.paths.clear();
  assertNotNull(mk.getNodes("/root/c",rev,0,0,10,null));
  assertNotNull(mk.getNodes("/root/a/b",rev,0,0,10,null));
  assertTrue(ds.paths.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.OrphanedBranchTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeUncommittedChange() throws Exception {
  String id=Utils.getIdFromPath("/foo");
  NodeBuilder builder=store.getRoot().builder();
  builder.child("foo");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  int count=0;
  while (store.getDocumentStore().find(NODES,id).getPreviousRanges().isEmpty()) {
    builder=store.getRoot().builder();
    builder.child("foo").setProperty("test",count++);
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    store.runBackgroundOperations();
  }
  int numBranches=store.getBranches().size();
  count=0;
  builder=store.getRoot().builder();
  NodeBuilder child=builder.child("foo");
  while (store.getBranches().size() == numBranches) {
    child.setProperty("prop",count++);
  }
  builder=store.getRoot().builder();
  builder.child("foo").setProperty("bar",0);
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeDocument doc=store.getDocumentStore().find(NODES,id);
  assertNotNull(doc);
  Map<Revision,String> valueMap=doc.getLocalMap("prop");
  assertFalse(valueMap.isEmpty());
  UnmergedBranches branches=store.getBranches();
  Revision branchRev=doc.getLocalMap("prop").firstKey();
  Branch b=branches.getBranch(new RevisionVector(branchRev.asBranchRevision()));
  assertNotNull(b);
  branches.remove(b);
  count=0;
  while (store.getDocumentStore().find(NODES,id).getPreviousRanges().size() == 1) {
    builder=store.getRoot().builder();
    builder.child("foo").setProperty("p",count++);
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    store.runBackgroundOperations();
  }
  doc=store.getDocumentStore().find(NODES,id);
  doc.getNodeAtRevision(store,store.getHeadRevision(),null);
  store.dispose();
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void orphanedBranches() throws Exception {
  int numCreated=0;
  for (; ; ) {
    NodeBuilder builder=store.getRoot().builder();
    NodeBuilder child=builder.child("foo");
    int numBranches=store.getBranches().size();
    int count=0;
    while (store.getBranches().size() == numBranches) {
      child.setProperty("prop",count++);
    }
    numCreated++;
    builder=store.getRoot().builder();
    builder.child("bar").setProperty("prop",numCreated);
    store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    numBranches=store.getBranches().size();
    store.runBackgroundOperations();
    String id=Utils.getIdFromPath("/");
    NodeDocument doc=store.getDocumentStore().find(NODES,id);
    assertNotNull(doc);
    Map<Revision,String> collisions=doc.getLocalMap(COLLISIONS);
    assertTrue("too many collisions: " + collisions.size(),collisions.size() <= numBranches);
    int limit=numBranches + NodeDocument.NUM_REVS_THRESHOLD;
    id=Utils.getIdFromPath("/foo");
    doc=store.getDocumentStore().find(NODES,id);
    assertNotNull(doc);
    Map<Revision,String> map=doc.getLocalMap("prop");
    assertTrue("too many orphaned changes: " + map.size() + " > "+ limit,map.size() <= limit);
    map=doc.getLocalCommitRoot();
    assertTrue("too many orphaned commit root entries: " + map.size() + " > "+ limit,map.size() <= limit);
    if (numCreated % NodeDocument.NUM_REVS_THRESHOLD == 0) {
      gc.gc(1,TimeUnit.SECONDS);
    }
    LOG.info("created {}, still considered active: {}",numCreated,store.getBranches().size());
    int collect=fixture instanceof DocumentStoreFixture.MemoryFixture ? 500 : 100;
    if (numCreated - store.getBranches().size() >= collect) {
      break;
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RangeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void includes(){
  Revision lower=new Revision(0xff,0,1);
  Revision low=new Revision(0x100,0,1);
  Revision high=new Revision(0x300,0,1);
  Revision higher=new Revision(0x301,0,1);
  Revision r=new Revision(0x200,0,1);
  Revision other=new Revision(0x200,0,2);
  Range range=new Range(high,low,0);
  assertTrue(range.includes(low));
  assertTrue(range.includes(high));
  assertTrue(range.includes(r));
  assertFalse(range.includes(lower));
  assertFalse(range.includes(higher));
  assertFalse(range.includes(other));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionGCTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void recreateRemovedNodeAfterGC() throws Exception {
  NodeBuilder b=newNodeBuilder();
  b.child("child");
  merge(b);
  b=newNodeBuilder();
  b.child("child").remove();
  merge(b);
  store.runBackgroundOperations();
  clock.waitUntil(clock.getTime() + HOURS.toMillis(2));
  gc.gc(1,HOURS);
  b=newNodeBuilder();
  b.child("child");
  merge(b);
  assertTrue(store.getRoot().hasChildNode("child"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void difference() throws InterruptedException {
  long t0=Revision.getCurrentTimestamp();
  Revision r0=Revision.newRevision(0);
  Revision r1=Revision.newRevision(0);
  long t1=Revision.getCurrentTimestamp();
  assertTrue(Revision.getTimestampDifference(r1,r0) <= (t1 - t0));
  long t2;
  do {
    t2=Revision.getCurrentTimestamp();
  }
 while (t1 == t2);
  Revision r2=Revision.newRevision(0);
  assertTrue(Revision.getTimestampDifference(r2,r1) > 0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void equalsHashCode(){
  Revision a=Revision.newRevision(0);
  Revision b=Revision.newRevision(0);
  assertTrue(a.equals(a));
  assertFalse(a.equals(b));
  assertFalse(b.equals(a));
  assertFalse(a.hashCode() == b.hashCode());
  Revision a1=Revision.fromString(a.toString());
  assertTrue(a.equals(a1));
  assertTrue(a1.equals(a));
  Revision a2=new Revision(a.getTimestamp(),a.getCounter(),a.getClusterId());
  assertTrue(a.equals(a2));
  assertTrue(a2.equals(a));
  assertEquals(a.hashCode(),a1.hashCode());
  assertEquals(a.hashCode(),a2.hashCode());
  Revision x1=new Revision(a.getTimestamp() + 1,a.getCounter(),a.getClusterId());
  assertFalse(a.equals(x1));
  assertFalse(x1.equals(a));
  assertFalse(a.hashCode() == x1.hashCode());
  Revision x2=new Revision(a.getTimestamp(),a.getCounter() + 1,a.getClusterId());
  assertFalse(a.equals(x2));
  assertFalse(x2.equals(a));
  assertFalse(a.hashCode() == x2.hashCode());
  Revision x3=new Revision(a.getTimestamp(),a.getCounter(),a.getClusterId() + 1);
  assertFalse(a.equals(x3));
  assertFalse(x3.equals(a));
  assertFalse(a.hashCode() == x3.hashCode());
}

</code></pre>

<br>
<pre class="type-13 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compare() throws InterruptedException {
  Revision last=Revision.newRevision(0);
  try {
    last.compareRevisionTime(null);
    fail();
  }
 catch (  NullPointerException e) {
  }
  for (int i=0; i < 1000; i++) {
    Revision r=Revision.newRevision(0);
    assertTrue(r.compareRevisionTime(r) == 0);
    assertTrue(r.compareRevisionTime(last) > 0);
    assertTrue(last.compareRevisionTime(r) < 0);
    last=r;
    if (i % 100 == 0) {
      Thread.sleep(1);
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fromStringToString(){
  for (int i=0; i < 10000; i++) {
    Revision r=Revision.newRevision(i);
    Revision r2=Revision.fromString(r.toString());
    assertEquals(r.toString(),r2.toString());
    assertEquals(r.hashCode(),r2.hashCode());
    assertTrue(r.equals(r2));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void uniqueRevision() throws Exception {
  final BlockingQueue<Revision> revisionQueue=Queues.newLinkedBlockingQueue();
  int noOfThreads=60;
  final int noOfLoops=1000;
  List<Thread> workers=new ArrayList<Thread>();
  final AtomicBoolean stop=new AtomicBoolean();
  final CountDownLatch startLatch=new CountDownLatch(1);
  final CountDownLatch stopLatch=new CountDownLatch(noOfThreads);
  for (int i=0; i < noOfThreads; i++) {
    workers.add(new Thread(new Runnable(){
      @Override public void run(){
        Uninterruptibles.awaitUninterruptibly(startLatch);
        for (int j=0; j < noOfLoops && !stop.get(); j++) {
          revisionQueue.add(Revision.newRevision(1));
        }
        stopLatch.countDown();
      }
    }
));
  }
  final List<Revision> duplicates=Lists.newArrayList();
  final Set<Revision> seenRevs=Sets.newHashSet();
  workers.add(new Thread(new Runnable(){
    @Override public void run(){
      startLatch.countDown();
      while (!stop.get()) {
        List<Revision> revs=Lists.newArrayList();
        Queues.drainUninterruptibly(revisionQueue,revs,5,100,TimeUnit.MILLISECONDS);
        record(revs);
      }
      List<Revision> revs=Lists.newArrayList();
      revisionQueue.drainTo(revs);
      record(revs);
    }
    private void record(    List<Revision> revs){
      for (      Revision rev : revs) {
        if (!seenRevs.add(rev)) {
          duplicates.add(rev);
        }
      }
      if (!duplicates.isEmpty()) {
        stop.set(true);
      }
    }
  }
));
  for (  Thread t : workers) {
    t.start();
  }
  stopLatch.await();
  stop.set(true);
  for (  Thread t : workers) {
    t.join();
  }
  assertTrue(String.format("Duplicate rev seen %s %n Seen %s",duplicates,seenRevs),duplicates.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.RevisionVectorTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void asTrunkRevision(){
  RevisionVector rv=new RevisionVector();
  assertFalse(rv.asTrunkRevision().isBranch());
  rv=rv.update(new Revision(1,0,1,true));
  assertTrue(rv.isBranch());
  assertFalse(rv.asTrunkRevision().isBranch());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isNewer(){
  Revision rev1=new Revision(1,0,1);
  Revision rev2=new Revision(1,0,2);
  Revision rev3=new Revision(1,0,3);
  RevisionVector rv=new RevisionVector(rev1,rev2);
  assertFalse(rv.isRevisionNewer(rev1));
  assertFalse(rv.isRevisionNewer(rev2));
  assertTrue(rv.isRevisionNewer(rev3));
  assertTrue(rv.isRevisionNewer(new Revision(2,0,1)));
  assertTrue(rv.isRevisionNewer(new Revision(2,0,2)));
  assertFalse(rv.isRevisionNewer(new Revision(0,0,1)));
  assertFalse(rv.isRevisionNewer(new Revision(0,0,2)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compareTo(){
  RevisionVector rv1=new RevisionVector();
  RevisionVector rv2=new RevisionVector();
  assertEquals(0,rv1.compareTo(rv2));
  Revision r11=new Revision(1,0,1);
  rv1=rv1.update(r11);
  assertTrue(rv1.compareTo(rv2) > 0);
  assertTrue(rv2.compareTo(rv1) < 0);
  Revision r12=new Revision(1,0,2);
  rv2=rv2.update(r12);
  assertTrue(rv1.compareTo(rv2) > 0);
  assertTrue(rv2.compareTo(rv1) < 0);
  rv2=rv2.update(r11);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
  rv1=rv1.update(r12);
  assertEquals(0,rv1.compareTo(rv2));
  assertEquals(0,rv2.compareTo(rv1));
  Revision r22=new Revision(2,0,2);
  rv2=rv2.update(r22);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
  Revision rb22=r22.asBranchRevision();
  rv1=rv1.update(rb22);
  assertTrue(rv1.compareTo(rv2) < 0);
  assertTrue(rv2.compareTo(rv1) > 0);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isBranch(){
  RevisionVector rv=new RevisionVector();
  assertFalse(rv.isBranch());
  Revision r1=new Revision(1,0,1);
  rv=rv.update(r1);
  assertFalse(rv.isBranch());
  Revision r2=new Revision(1,0,2,true);
  rv=rv.update(r2);
  assertTrue(rv.isBranch());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.SharedBlobStoreGCTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRepeatedMarkWithSweep() throws Exception {
  log.debug("Running testRepeatedMarkWithSweep()");
  cluster1.gc.collectGarbage(true);
  cluster2.gc.collectGarbage(true);
  cluster2.gc.collectGarbage(true);
  cluster2.gc.collectGarbage(false);
  Assert.assertTrue(Sets.symmetricDifference(Sets.union(cluster1.getInitBlobs(),cluster2.getInitBlobs()),cluster1.getExistingBlobIds()).isEmpty());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGCStats() throws Exception {
  log.debug("Running testGCStats()");
  cluster1.gc.collectGarbage(true);
  cluster2.gc.collectGarbage(true);
  Set<String> actualRepoIds=Sets.newHashSet();
  actualRepoIds.add(cluster1.repoId);
  actualRepoIds.add(cluster2.repoId);
  Set<Integer> actualNumBlobs=Sets.newHashSet();
  actualNumBlobs.add(cluster1.initBlobs.size());
  actualNumBlobs.add(cluster2.initBlobs.size());
  List<GarbageCollectionRepoStats> statsList=cluster1.gc.getStats();
  Set<Integer> observedNumBlobs=Sets.newHashSet();
  Set<String> observedRepoIds=Sets.newHashSet();
  for (  GarbageCollectionRepoStats stat : statsList) {
    observedNumBlobs.add(stat.getNumLines());
    observedRepoIds.add(stat.getRepositoryId());
    Assert.assertTrue(stat.getStartTime() <= stat.getEndTime());
    if (stat.getRepositoryId().equals(cluster1.repoId)) {
      Assert.assertTrue(stat.isLocal());
    }
  }
  Assert.assertTrue(Sets.difference(actualNumBlobs,observedNumBlobs).isEmpty());
  Assert.assertTrue(Sets.difference(actualRepoIds,observedRepoIds).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testOnly1ClusterMark() throws Exception {
  log.debug("Running testOnly1ClusterMark()");
  cluster1.gc.collectGarbage(true);
  cluster1.gc.collectGarbage(false);
  Set<String> existing=cluster1.getExistingBlobIds();
  log.debug("Existing blobs {}",existing);
  Assert.assertTrue((cluster1.getInitBlobs().size() + cluster2.getInitBlobs().size()) <= existing.size());
  Assert.assertTrue(existing.containsAll(cluster2.getInitBlobs()));
  Assert.assertTrue(existing.containsAll(cluster1.getInitBlobs()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.SimpleTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addAndMove(){
  DocumentMK mk=createMK();
  String head=mk.getHeadRevision();
  head=mk.commit("","+\"/root\":{}\n" + "+\"/root/a\":{}\n" + "+\"/root/a/b\":{}\n",head,"");
  head=mk.commit("",">\"/root/a\":\"/root/c\"\n",head,"");
  assertFalse(mk.nodeExists("/root/a",head));
  assertTrue(mk.nodeExists("/root/c/b",head));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void commitRoot(){
  DocumentMK mk=createMK();
  DocumentStore store=mk.getDocumentStore();
  Revision head=Revision.fromString(mk.getHeadRevision());
  head=Revision.fromString(mk.commit("","+\"/test\":{\"foo\":{}}",head.toString(),null));
  NodeDocument rootDoc=store.find(Collection.NODES,"0:/");
  NodeDocument node=store.find(Collection.NODES,"1:/test");
  NodeDocument foo=store.find(Collection.NODES,"2:/test/foo");
  assertNotNull(foo);
  assertFalse(foo.containsRevision(head));
  assertEquals("/",foo.getCommitRootPath(head));
  head=Revision.fromString(mk.commit("","+\"/bar\":{}+\"/test/foo/bar\":{}",head.toString(),null));
  rootDoc=store.find(Collection.NODES,"0:/");
  assertNotNull(rootDoc);
  assertTrue(rootDoc.containsRevision(head));
  NodeDocument bar=store.find(Collection.NODES,"1:/bar");
  assertNotNull(bar);
  assertEquals("/",bar.getCommitRootPath(head));
  bar=store.find(Collection.NODES,"3:/test/foo/bar");
  assertNotNull(bar);
  assertEquals("/",bar.getCommitRootPath(head));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNodeGetNode(){
  DocumentMK mk=builderProvider.newBuilder().open();
  DocumentStore s=mk.getDocumentStore();
  DocumentNodeStore ns=mk.getNodeStore();
  RevisionVector rev=RevisionVector.fromString(mk.getHeadRevision());
  DocumentNodeState n=new DocumentNodeState(ns,"/test",rev);
  n.setProperty("name","\"Hello\"");
  UpdateOp op=n.asOperation(rev.getRevision(ns.getClusterId()));
  NodeDocument.setRevision(op,rev.getRevision(ns.getClusterId()),"c");
  assertTrue(s.create(Collection.NODES,Lists.newArrayList(op)));
  DocumentNodeState n2=ns.getNode("/test",rev);
  assertNotNull(n2);
  PropertyState p=n2.getProperty("name");
  assertNotNull(p);
  assertEquals("Hello",p.getValue(Type.STRING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.UnmergedBranchTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void purgeUnmergedBranch() throws Exception {
  DocumentStore testStore=new MemoryDocumentStore();
  DocumentMK mk1=create(testStore,1);
  int cId1=mk1.getNodeStore().getClusterId();
  DocumentMK mk2=create(testStore,2);
  int cId2=mk2.getNodeStore().getClusterId();
  String rev1=mk1.commit("","+\"/child1\":{}",null,"");
  String branchRev1=mk1.branch(rev1);
  String brev1=mk1.commit("/child1","^\"foo\":1",branchRev1,"");
  String rev2=mk2.commit("","+\"/child2\":{}",null,"");
  String branchRev2=mk2.branch(rev2);
  String brev2=mk2.commit("/child2","^\"foo\":1",branchRev2,"");
  Map<Revision,RevisionVector> revs1=getUncommittedRevisions(mk1);
  Map<Revision,RevisionVector> revs2=getUncommittedRevisions(mk2);
  assertTrue(revs1.containsKey(RevisionVector.fromString(brev1).asTrunkRevision().getRevision(cId1)));
  assertTrue(revs2.containsKey(RevisionVector.fromString(brev2).asTrunkRevision().getRevision(cId2)));
  mk1.dispose();
  mk1=create(testStore,1);
  revs1=getUncommittedRevisions(mk1);
  revs2=getUncommittedRevisions(mk2);
  assertFalse(revs1.containsKey(RevisionVector.fromString(brev1).asTrunkRevision().getRevision(cId1)));
  assertTrue(revs2.containsKey(RevisionVector.fromString(brev2).asTrunkRevision().getRevision(cId2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.UpdateOpTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void combine(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=new UpdateOp("id",false);
  Revision r=Revision.newRevision(1);
  op2.containsMapEntry("e",r,true);
  UpdateOp combined=UpdateOp.combine("id",newArrayList(op1,op2));
  assertTrue(combined.hasChanges());
  assertEquals(1,combined.getChanges().size());
  assertEquals(1,combined.getConditions().size());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void keyEquals(){
  Revision r1=Revision.newRevision(1);
  Revision r2=Revision.newRevision(1);
  UpdateOp.Key k1=new UpdateOp.Key("foo",null);
  UpdateOp.Key k2=new UpdateOp.Key("bar",null);
  assertFalse(k1.equals(k2));
  assertFalse(k2.equals(k1));
  UpdateOp.Key k3=new UpdateOp.Key("foo",null);
  assertTrue(k1.equals(k3));
  assertTrue(k3.equals(k1));
  UpdateOp.Key k4=new UpdateOp.Key("foo",r1);
  assertFalse(k4.equals(k3));
  assertFalse(k3.equals(k4));
  UpdateOp.Key k5=new UpdateOp.Key("foo",r2);
  assertFalse(k5.equals(k4));
  assertFalse(k4.equals(k5));
  UpdateOp.Key k6=new UpdateOp.Key("foo",r1);
  assertTrue(k6.equals(k4));
  assertTrue(k4.equals(k6));
  UpdateOp.Key k7=new UpdateOp.Key("bar",r1);
  assertFalse(k7.equals(k6));
  assertFalse(k6.equals(k7));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shallowCopy(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=op1.shallowCopy("id");
  assertTrue(op2.hasChanges());
  assertEquals(1,op2.getChanges().size());
  assertEquals(0,op2.getConditions().size());
  Revision r=Revision.newRevision(1);
  op1.containsMapEntry("e",r,true);
  op2=op1.shallowCopy("id");
  assertEquals(1,op2.getConditions().size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getChanges(){
  UpdateOp op=new UpdateOp("id",false);
  assertEquals(0,op.getChanges().size());
  assertTrue(!op.hasChanges());
  op.set("p","value");
  assertEquals(1,op.getChanges().size());
  assertTrue(op.hasChanges());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copy(){
  UpdateOp op1=new UpdateOp("id",false);
  op1.set("p","value");
  UpdateOp op2=op1.copy();
  assertTrue(op2.hasChanges());
  assertEquals(1,op2.getChanges().size());
  assertEquals(0,op2.getConditions().size());
  Revision r=Revision.newRevision(1);
  op1.containsMapEntry("e",r,true);
  op2=op1.copy();
  assertEquals(1,op2.getConditions().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.UpdateUtilsTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void checkConditions(){
  Revision r=Revision.newRevision(1);
  String id=Utils.getIdFromPath("/foo");
  Document d=new Document();
  d.put(Document.ID,id);
  UpdateOp op=newUpdateOp(id);
  op.set("p",42L);
  op.setMapEntry("t",r,"value");
  UpdateUtils.applyChanges(d,op);
  op=newUpdateOp(id);
  op.containsMapEntry("t",r,true);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.containsMapEntry("t",r,false);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.containsMapEntry("q",r,true);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.containsMapEntry("q",r,false);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("t",r,"value");
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("t",r,"value");
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("t",r,"foo");
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("t",r,"foo");
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("t",Revision.newRevision(1),"value");
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("t",Revision.newRevision(1),"value");
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("t","value");
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("t","value");
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("p",r,42L);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("p",r,42L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("p",42L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("p",42L);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("p",7L);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("p",7L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("other",7L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("other",r,7L);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("other",r,null);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.equals("other",r,null);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("p",null);
  assertTrue(UpdateUtils.checkConditions(d,op.getConditions()));
  op=newUpdateOp(id);
  op.notEquals("other",r,null);
  assertFalse(UpdateUtils.checkConditions(d,op.getConditions()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.ValueMapTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void previousDocs1(){
  String rootPath="/";
  String rootId=Utils.getIdFromPath(rootPath);
  Revision r0=new Revision(0,0,1);
  MemoryDocumentStore store=new MemoryDocumentStore();
  UpdateOp op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r0,0),true);
  op.set(ID,op.getId());
  op.setMapEntry("prop",r0,"0");
  NodeDocument.setRevision(op,r0,"c");
  store.createOrUpdate(NODES,op);
  Revision r1low=new Revision(1,0,1);
  Revision r1high=new Revision(1,10,1);
  op=new UpdateOp(Utils.getPreviousIdFor(rootPath,r1high,0),true);
  op.set(ID,op.getId());
  for (int i=r1low.getCounter(); i <= r1high.getCounter(); i++) {
    Revision r=new Revision(1,i,1);
    op.setMapEntry("foo",r,String.valueOf(i));
    NodeDocument.setRevision(op,r,"c");
  }
  store.createOrUpdate(NODES,op);
  op=new UpdateOp(rootId,true);
  op.set(ID,op.getId());
  Revision r2=new Revision(2,0,1);
  op.setMapEntry("prop",r2,"1");
  NodeDocument.setRevision(op,r2,"c");
  NodeDocument.setPrevious(op,new Range(r0,r0,0));
  NodeDocument.setPrevious(op,new Range(r1high,r1low,0));
  store.createOrUpdate(NODES,op);
  NodeDocument doc=store.find(NODES,rootId);
  assertNotNull(doc);
  Set<Revision> revs=doc.getValueMap("prop").keySet();
  assertEquals(2,revs.size());
  assertTrue(revs.contains(r0));
  assertTrue(revs.contains(r2));
  Iterator<Revision> it=revs.iterator();
  assertTrue(it.hasNext());
  assertEquals(r2,it.next());
  assertTrue(it.hasNext());
  assertEquals(r0,it.next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGCWithSplitTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcWithConcurrentSplit() throws Exception {
  Revision.setClock(clock);
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").setProperty("prop",-1);
  merge(store,builder);
  final String id=Utils.getIdFromPath("/test");
  DocumentStore docStore=store.getDocumentStore();
  int count=0;
  while (docStore.find(NODES,id).getPreviousRanges().size() < PREV_SPLIT_FACTOR) {
    builder=store.getRoot().builder();
    builder.child("test").setProperty("prop",count);
    merge(store,builder);
    if (count++ % NUM_REVS_THRESHOLD == 0) {
      store.runBackgroundOperations();
    }
  }
  clock.waitUntil(Revision.getCurrentTimestamp() + HOURS.toMillis(1) + 2 * SECONDS.toMillis(MODIFIED_IN_SECS_RESOLUTION));
  final AtomicReference<VersionGarbageCollector.VersionGCStats> stats=new AtomicReference<VersionGarbageCollector.VersionGCStats>();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        stats.set(gc.gc(1,HOURS));
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
);
  Semaphore gcLock=new Semaphore(0);
  updateLocks.put(t,gcLock);
  t.start();
  while (!gcLock.hasQueuedThreads()) {
    Thread.sleep(1);
  }
  while (docStore.find(NODES,id).getPreviousRanges().size() >= PREV_SPLIT_FACTOR) {
    builder=store.getRoot().builder();
    builder.child("test").setProperty("prop",count);
    merge(store,builder);
    if (count++ % NUM_REVS_THRESHOLD == 0) {
      store.runBackgroundOperations();
    }
  }
  gcLock.release();
  t.join();
  assertEquals(10,stats.get().splitDocGCCount);
  NodeDocument doc=docStore.find(NODES,id);
  assertEquals(1,doc.getStalePrev().size());
  store.addSplitCandidate(id);
  store.runBackgroundOperations();
  doc=docStore.find(NODES,id);
  assertTrue(doc.getStalePrev().isEmpty());
  Map<Revision,String> valueMap=doc.getValueMap("prop");
  assertEquals(NUM_REVS_THRESHOLD + 1,valueMap.size());
  assertEquals(NUM_REVS_THRESHOLD + 1,size(valueMap.entrySet()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.VersionGarbageCollectorIT </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void gcIgnoredForCheckpoint() throws Exception {
  long expiryTime=100, maxAge=20;
  Revision cp=Revision.fromString(store.checkpoint(expiryTime));
  clock.waitUntil(cp.getTimestamp() + expiryTime - maxAge);
  VersionGCStats stats=gc.gc(maxAge,TimeUnit.MILLISECONDS);
  assertTrue(stats.ignoredGCDueToCheckPoint);
  clock.waitUntil(clock.getTime() + expiryTime + 1);
  stats=gc.gc(maxAge,TimeUnit.MILLISECONDS);
  assertFalse("GC should be performed",stats.ignoredGCDueToCheckPoint);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcIntermediateDocs() throws Exception {
  long maxAge=1;
  long delta=TimeUnit.MINUTES.toMillis(10);
  NodeBuilder b1=store.getRoot().builder();
  b1.child("test");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(getDoc("/test").getLocalRevisions().isEmpty());
  b1=store.getRoot().builder();
  b1.child("test").setProperty("test","value");
  store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(!getDoc("/test").getLocalRevisions().isEmpty());
  for (int i=0; i < PREV_SPLIT_FACTOR; i++) {
    for (int j=0; j < NUM_REVS_THRESHOLD; j++) {
      b1=store.getRoot().builder();
      b1.child("test").setProperty("prop",i * NUM_REVS_THRESHOLD + j);
      store.merge(b1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    }
    store.runBackgroundOperations();
  }
  store.addSplitCandidate(Utils.getIdFromPath("/test"));
  store.runBackgroundOperations();
  Map<Revision,Range> prevRanges=getDoc("/test").getPreviousRanges();
  boolean hasIntermediateDoc=false;
  for (  Map.Entry<Revision,Range> entry : prevRanges.entrySet()) {
    if (entry.getValue().getHeight() > 0) {
      hasIntermediateDoc=true;
      break;
    }
  }
  assertTrue("Test data does not have intermediate previous docs",hasIntermediateDoc);
  clock.waitUntil(clock.getTime() + HOURS.toMillis(maxAge) + delta);
  VersionGCStats stats=gc.gc(maxAge,HOURS);
  assertEquals(10,stats.splitDocGCCount);
  DocumentNodeState test=getDoc("/test").getNodeAtRevision(store,store.getHeadRevision(),null);
  assertNotNull(test);
  assertTrue(test.hasProperty("test"));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcDefaultLeafSplitDocs() throws Exception {
  Revision.setClock(clock);
  NodeBuilder builder=store.getRoot().builder();
  builder.child("test").setProperty("prop",-1);
  merge(store,builder);
  String id=Utils.getIdFromPath("/test");
  long start=Revision.getCurrentTimestamp();
  int hours=24;
  if (fixture instanceof DocumentStoreFixture.MongoFixture) {
    hours=6;
  }
  for (int i=0; i < 3600 * hours; i++) {
    clock.waitUntil(start + i * 1000);
    builder=store.getRoot().builder();
    builder.child("test").setProperty("prop",i);
    merge(store,builder);
    if (i % 10 == 0) {
      store.runBackgroundOperations();
    }
    if (i % 1800 == 0) {
      gc.gc(1,HOURS);
      NodeDocument doc=store.getDocumentStore().find(NODES,id);
      assertNotNull(doc);
      int numPrevDocs=Iterators.size(doc.getAllPreviousDocs());
      assertTrue("too many previous docs: " + numPrevDocs,numPrevDocs < 70);
    }
  }
  NodeDocument doc=store.getDocumentStore().find(NODES,id);
  assertNotNull(doc);
  int numRevs=size(doc.getValueMap("prop").entrySet());
  assertTrue("too many revisions: " + numRevs,numRevs < 6000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.blob.RDBBlobStoreTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBigBlob() throws Exception {
  int min=0;
  int max=8 * 1024 * 1024;
  int test=0;
  while (max - min > 256) {
    if (test == 0) {
      test=max;
    }
 else {
      test=(max + min) / 2;
    }
    byte[] data=new byte[test];
    Random r=new Random(0);
    r.nextBytes(data);
    byte[] digest=getDigest(data);
    try {
      RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
      byte[] data2=RDBBlobStoreFriend.readBlockFromBackend(blobStore,digest);
      if (!Arrays.equals(data,data2)) {
        throw new Exception("data mismatch for length " + data.length);
      }
      min=test;
    }
 catch (    Exception ex) {
      max=test;
    }
  }
  LOG.info("max blob length for " + blobStoreName + " was "+ test);
  int expected=Math.max(blobStore.getBlockSize(),2 * 1024 * 1024);
  assertTrue(blobStoreName + ": expected supported block size is " + expected+ ", but measured: "+ test,test >= expected);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateAndDelete() throws Exception {
  byte[] data=new byte[256];
  Random r=new Random(0);
  r.nextBytes(data);
  byte[] digest=getDigest(data);
  RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
  String id=StringUtils.convertBytesToHex(digest);
  long until=System.currentTimeMillis() + 1000;
  while (System.currentTimeMillis() < until) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
    }
  }
  RDBBlobStoreFriend.storeBlock(blobStore,digest,0,data);
  Assert.assertFalse(blobStore.deleteChunks(ImmutableList.of(id),System.currentTimeMillis() - 100));
  Assert.assertNotNull(RDBBlobStoreFriend.readBlockFromBackend(blobStore,digest));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.CacheInvalidationIT </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCacheInvalidationHierarchicalNotExist() throws CommitFailedException {
  NodeBuilder b2=getRoot(c2).builder();
  b2.child("x").child("other");
  b2.child("y");
  c2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  c2.runBackgroundOperations();
  c1.runBackgroundOperations();
  NodeState x=getRoot(c1).getChildNode("x");
  assertTrue(x.exists());
  assertFalse(x.getChildNode("futureX").exists());
  NodeState y=getRoot(c1).getChildNode("y");
  assertTrue(y.exists());
  b2.child("x").child("futureX").setProperty("z","1");
  c2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  b2.child("y").child("futureY").setProperty("z","2");
  c2.merge(b2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  c2.runBackgroundOperations();
  c1.runBackgroundOperations();
  assertTrue(getRoot(c1).getChildNode("y").getChildNode("futureY").exists());
  assertTrue(getRoot(c1).getChildNode("x").getChildNode("futureX").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.CollisionMarkerTest </h4><pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void conditionalCollisionUpdate() throws Exception {
  NodeBuilder b1=ns1.getRoot().builder();
  b1.child("test");
  b1.child("node");
  merge(ns1,b1);
  ns1.runBackgroundOperations();
  ns2=newDocumentMK(connectionFactory.getConnection().getDB(),3).getNodeStore();
  b1=ns1.getRoot().builder();
  b1.child("node").child("foo");
  b1.child("test").setProperty("p",1);
  merge(ns1,b1);
  Revision head=ns1.getHeadRevision().getRevision(ns1.getClusterId());
  NodeBuilder b2=ns2.getRoot().builder();
  b2.child("node").child("bar");
  b2.child("test").setProperty("p",2);
  try {
    merge(ns2,b2);
    fail("must fail with CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  String rootId=Utils.getIdFromPath("/");
  NodeDocument root=ns2.getDocumentStore().find(NODES,rootId);
  assertFalse("root document must not have a collision marker for a" + " committed revision",root.getValueMap(COLLISIONS).containsKey(head));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoConnectionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void hasWriteConcern() throws Exception {
  assertFalse(MongoConnection.hasWriteConcern("mongodb://localhost:27017/foo"));
  assertTrue(MongoConnection.hasWriteConcern("mongodb://localhost:27017/foo?w=1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoDocumentStoreTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timeoutQuery(){
  String fromId=Utils.getKeyLowerLimit("/");
  String toId=Utils.getKeyUpperLimit("/");
  store.setMaxLockedQueryTimeMS(1);
  long index=0;
  for (int i=0; i < 100; i++) {
    StringBuilder sb=new StringBuilder();
    for (int j=0; j < 1000; j++) {
      sb.append("+\"node-").append(index++).append("\":{}");
    }
    mk.commit("/",sb.toString(),null,null);
    store.queriesWithoutLock.set(0);
    store.resetLockAcquisitionCount();
    List<NodeDocument> docs=store.query(Collection.NODES,fromId,toId,"foo",System.currentTimeMillis(),Integer.MAX_VALUE);
    assertTrue(docs.isEmpty());
    if (store.queriesWithoutLock.get() > 0) {
      assertEquals(1,store.getLockAcquisitionCount());
      return;
    }
  }
  fail("No query timeout triggered even after adding " + index + " nodes");
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void defaultIndexes(){
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),Document.ID));
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.SD_TYPE));
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.DELETED_ONCE));
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.HAS_BINARY_FLAG));
  assertTrue(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.MODIFIED_IN_SECS,Document.ID));
  assertFalse(hasIndex(store.getDBCollection(Collection.NODES),NodeDocument.MODIFIED_IN_SECS));
  assertTrue(hasIndex(store.getDBCollection(Collection.JOURNAL),JournalEntry.MODIFIED));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoMissingLastRevSeekerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void missingLastRevSeeker() throws Exception {
  assertTrue(builder.createMissingLastRevSeeker() instanceof MongoMissingLastRevSeeker);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.MongoUtilsTest </h4><pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createIndex(){
  MongoConnection c=connectionFactory.getConnection();
  c.getDB().dropDatabase();
  DBCollection collection=c.getDB().getCollection("test");
  MongoUtils.createIndex(collection,"foo",true,false,true);
  MongoUtils.createIndex(collection,"bar",false,true,false);
  MongoUtils.createIndex(collection,new String[]{"baz","qux"},new boolean[]{true,false},false,false);
  assertTrue(MongoUtils.hasIndex(collection,"_id"));
  assertTrue(MongoUtils.hasIndex(collection,"foo"));
  assertFalse(MongoUtils.hasIndex(collection,"foo","bar"));
  assertTrue(MongoUtils.hasIndex(collection,"baz","qux"));
  assertEquals(4,collection.getIndexInfo().size());
  for (  DBObject info : collection.getIndexInfo()) {
    DBObject key=(DBObject)info.get("key");
    if (key.keySet().contains("foo")) {
      assertEquals(1,key.keySet().size());
      assertEquals(1,key.get("foo"));
      assertEquals(Boolean.TRUE,info.get("sparse"));
    }
 else     if (key.keySet().contains("bar")) {
      assertEquals(1,key.keySet().size());
      assertEquals(-1,key.get("bar"));
      assertEquals(Boolean.TRUE,info.get("unique"));
    }
 else     if (key.keySet().contains("baz")) {
      assertEquals(2,key.keySet().size());
      assertEquals(1,key.get("baz"));
      assertEquals(-1,key.get("qux"));
    }
  }
  c.getDB().dropDatabase();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.QueryHintTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHints() throws Exception {
  assertFalse(mongoDS.getDisableIndexHint());
  long delta=mongoDS.getMaxDeltaForModTimeIdxSecs();
  clock.waitUntil(TimeUnit.SECONDS.toMillis(delta + 10));
  assertFalse(mongoDS.canUseModifiedTimeIdx(1));
  assertTrue(mongoDS.canUseModifiedTimeIdx(10));
  mongoDS.query(Collection.NODES,Utils.getKeyLowerLimit("/"),Utils.getKeyUpperLimit("/"),NodeDocument.MODIFIED_IN_SECS,50,10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.mongo.ReadPreferenceIT </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadWriteMode() throws Exception {
  assertEquals(ReadPreference.primary(),mongoDS.getConfiguredReadPreference(NODES));
  mongoDS.setReadWriteMode("readPreference=secondary&w=2&safe=true&j=true");
  assertEquals(ReadPreference.secondary(),mongoDS.getDBCollection(NODES).getReadPreference());
  assertEquals(2,mongoDS.getDBCollection(NODES).getWriteConcern().getW());
  assertTrue(mongoDS.getDBCollection(NODES).getWriteConcern().getJ());
  assertEquals(ReadPreference.secondary(),mongoDS.getConfiguredReadPreference(NODES));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.persistentCache.CacheTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void closeAlways() throws Exception {
  FileUtils.deleteDirectory(new File("target/cacheTest"));
  PersistentCache cache=new PersistentCache("target/cacheTest,manualCommit");
  CacheMap<String,String> map=cache.openMap(0,"test",null);
  Thread.currentThread().interrupt();
  map.put("hello","world");
  cache.close();
  assertFalse(Thread.interrupted());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void interrupt() throws Exception {
  FileUtils.deleteDirectory(new File("target/cacheTest"));
  PersistentCache cache=new PersistentCache("target/cacheTest,size=1,-compress");
  try {
    CacheMap<String,String> m1=cache.openMap(0,"m1",null);
    CacheMap<String,String> m2=cache.openMap(0,"test",null);
    assertEquals(1,cache.getOpenCount());
    String largeString=new String(new char[1024 * 1024]);
    int count=10;
    for (int i=0; i < count; i++) {
      m1.put("x" + i,largeString);
      m2.put("y" + i,largeString);
    }
    Thread.currentThread().interrupt();
    for (int i=0; i < count; i++) {
      m1.get("x" + i);
      m2.get("y" + i);
    }
    assertEquals(2,cache.getOpenCount());
    assertFalse(Thread.interrupted());
  }
  finally {
    cache.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void recoverIfCorrupt() throws Exception {
  FileUtils.deleteDirectory(new File("target/cacheTest"));
  new File("target/cacheTest").mkdirs();
  FileOutputStream out=new FileOutputStream("target/cacheTest/cache-0.data");
  out.write("corrupt".getBytes());
  out.close();
  PersistentCache pCache=new PersistentCache("target/cacheTest");
  CacheLIRS<PathRev,StringValue> cache=new CacheLIRS.Builder<PathRev,StringValue>().maximumSize(1).build();
  Cache<PathRev,StringValue> map=pCache.wrap(null,null,cache,CacheType.DIFF);
  String largeString=new String(new char[1024 * 1024]);
  for (int counter=0; counter < 10; counter++) {
    long end=System.currentTimeMillis() + 100;
    while (System.currentTimeMillis() < end) {
      Thread.yield();
    }
    for (int i=0; i < 100; i++) {
      PathRev k=new PathRev("/" + counter,new RevisionVector(new Revision(0,0,i)));
      map.getIfPresent(k);
      map.put(k,new StringValue(largeString));
    }
  }
  assertTrue("Exceptions: " + pCache.getExceptionCount(),pCache.getExceptionCount() < 100);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void deleteOldAtStartup() throws Exception {
  FileUtils.deleteDirectory(new File("target/cacheTest"));
  new File("target/cacheTest").mkdirs();
  new File("target/cacheTest/cache-0.data").createNewFile();
  new File("target/cacheTest/cache-1.data").createNewFile();
  new File("target/cacheTest/cache-2.data").createNewFile();
  new File("target/cacheTest/cache-3.data").createNewFile();
  PersistentCache cache=new PersistentCache("target/cacheTest");
  cache.close();
  assertFalse(new File("target/cacheTest/cache-0.data").exists());
  assertFalse(new File("target/cacheTest/cache-1.data").exists());
  assertTrue(new File("target/cacheTest/cache-2.data").exists());
  assertTrue(new File("target/cacheTest/cache-3.data").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentSerializerTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidJsonSimple(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  assertNull(json.parse("null"));
  assertTrue((Boolean)json.parse("true"));
  assertFalse((Boolean)json.parse("false"));
  assertEquals(123.45,(Number)json.parse("123.45"));
  assertEquals("\r\n\t\u00e0",(String)json.parse("\"\r\n\t\u00e0\""));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidJsonMap(){
  RDBJSONSupport json=new RDBJSONSupport(false);
  Map<String,Object> map=(Map<String,Object>)json.parse("{\"a\":true,\"b\":null,\"c\":123,\"d\":\"foobar\"}");
  assertEquals(4,map.size());
  assertTrue((Boolean)map.get("a"));
  assertTrue(map.containsKey("b"));
  assertNull(map.get("b"));
  assertEquals(123l,((Long)map.get("c")).longValue());
  assertEquals("foobar",(String)map.get("d"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentStoreJDBCTest </h4><pre class="type-9 type-12 type-5 type-7 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void batchFailingInsertResult() throws SQLException {
  assumeTrue(super.dsf != DocumentStoreFixture.RDB_PG);
  String table=((RDBDocumentStore)super.ds).getTable(Collection.NODES).getName();
  Connection con=super.rdbDataSource.getConnection();
  con.setReadOnly(false);
  try {
    PreparedStatement st=con.prepareStatement("DELETE FROM " + table + " WHERE ID in (?, ?, ?)");
    setIdInStatement(st,1,"key-1");
    setIdInStatement(st,2,"key-2");
    setIdInStatement(st,3,"key-3");
    st.executeUpdate();
    st.close();
    con.commit();
    removeMe.add("key-3");
    st=con.prepareStatement("INSERT INTO " + table + " (id) VALUES (?)");
    setIdInStatement(st,1,"key-3");
    st.executeUpdate();
    st.close();
    con.commit();
    removeMe.add("key-1");
    removeMe.add("key-2");
    PreparedStatement batchSt=con.prepareStatement("INSERT INTO " + table + " (id) VALUES (?)");
    setIdInStatement(batchSt,1,"key-1");
    batchSt.addBatch();
    setIdInStatement(batchSt,1,"key-2");
    batchSt.addBatch();
    setIdInStatement(batchSt,1,"key-3");
    batchSt.addBatch();
    int[] batchResult=null;
    try {
      batchSt.executeBatch();
      fail("Batch operation should fail");
    }
 catch (    BatchUpdateException e) {
      batchResult=e.getUpdateCounts();
    }
    batchSt.close();
    con.commit();
    assertTrue(batchResult.length >= 2);
    assertTrue("Row should be inserted correctly.",isSuccess(batchResult[0]));
    assertTrue("Row should be inserted correctly.",isSuccess(batchResult[1]));
    if (batchResult.length == 3) {
      assertTrue("Row already exists, shouldn't be inserted.",!isSuccess(batchResult[2]));
    }
    PreparedStatement rst=con.prepareStatement("SELECT id FROM " + table + " WHERE id in (?, ?, ?)");
    setIdInStatement(rst,1,"key-1");
    setIdInStatement(rst,2,"key-2");
    setIdInStatement(rst,3,"key-3");
    ResultSet results=rst.executeQuery();
    Set<String> ids=new HashSet<String>();
    while (results.next()) {
      ids.add(getIdFromRS(results,1));
    }
    results.close();
    rst.close();
    assertEquals("Some of the rows weren't inserted.",of("key-1","key-2","key-3"),ids);
  }
  finally {
    con.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void batchUpdateResult() throws SQLException {
  assumeTrue(super.dsf != DocumentStoreFixture.RDB_ORACLE);
  String table=((RDBDocumentStore)super.ds).getTable(Collection.NODES).getName();
  Connection con=super.rdbDataSource.getConnection();
  con.setReadOnly(false);
  try {
    PreparedStatement st=con.prepareStatement("DELETE FROM " + table + " WHERE ID in (?, ?, ?)");
    setIdInStatement(st,1,"key-1");
    setIdInStatement(st,2,"key-2");
    setIdInStatement(st,3,"key-3");
    st.executeUpdate();
    st.close();
    con.commit();
    st=con.prepareStatement("INSERT INTO " + table + " (id) VALUES (?)");
    setIdInStatement(st,1,"key-3");
    st.executeUpdate();
    st.close();
    con.commit();
    removeMe.add("key-3");
    PreparedStatement batchSt=con.prepareStatement("UPDATE " + table + " SET data = '{}' WHERE id = ?");
    setIdInStatement(batchSt,1,"key-1");
    batchSt.addBatch();
    setIdInStatement(batchSt,1,"key-2");
    batchSt.addBatch();
    setIdInStatement(batchSt,1,"key-3");
    batchSt.addBatch();
    int[] batchResult=batchSt.executeBatch();
    batchSt.close();
    con.commit();
    assertEquals(3,batchResult.length);
    assertFalse("Row was updated although not present, status: " + batchResult[0],isSuccess(batchResult[0]));
    assertFalse("Row was updated although not present, status: " + batchResult[1],isSuccess(batchResult[1]));
    assertTrue("Row should be updated correctly.",isSuccess(batchResult[2]));
  }
  finally {
    con.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.rdb.RDBDocumentStoreTest </h4><pre class="type-13 type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRDBQueryKeyPatterns(){
  if (ds instanceof RDBDocumentStore) {
    RDBDocumentStore rds=(RDBDocumentStore)ds;
    String base=this.getClass().getName() + ".testRDBQuery-";
    for (int i=0; i < 10; i++) {
      String id="1:" + (i % 2 == 1 ? "p" : "") + "/"+ base+ i;
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set("_test",base);
      boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
      assertTrue("document with " + id + " not created",success);
      removeMe.add(id);
    }
    System.out.println(removeMe);
    List<QueryCondition> conditions=new ArrayList<QueryCondition>();
    List<NodeDocument> result=rds.query(Collection.NODES,NodeDocument.MIN_ID_VALUE,NodeDocument.MAX_ID_VALUE,Arrays.asList("_:/%","__:/%","___:/%"),conditions,10000);
    for (    NodeDocument d : result) {
      if (base.equals(d.get("_test"))) {
        assertTrue(d.getId().startsWith("1:p"));
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRDBQueryConditions(){
  if (ds instanceof RDBDocumentStore) {
    RDBDocumentStore rds=(RDBDocumentStore)ds;
    long now=System.currentTimeMillis();
    String base=this.getClass().getName() + ".testRDBQuery-";
    for (int i=0; i < 10; i++) {
      String id=base + i;
      UpdateOp up=new UpdateOp(id,true);
      up.set("_id",id);
      up.set(NodeDocument.DELETED_ONCE,i % 2 == 1);
      up.set(NodeDocument.MODIFIED_IN_SECS,now++);
      boolean success=super.ds.create(Collection.NODES,Collections.singletonList(up));
      assertTrue("document with " + id + " not created",success);
      removeMe.add(id);
    }
    List<QueryCondition> conditions=new ArrayList<QueryCondition>();
    conditions.add(new QueryCondition(NodeDocument.DELETED_ONCE,"=",0));
    conditions.add(new QueryCondition(NodeDocument.MODIFIED_IN_SECS,"<",now - 2));
    List<NodeDocument> result=rds.query(Collection.NODES,base,base + "A",RDBDocumentStore.EMPTY_KEY_PATTERN,conditions,10);
    assertEquals(4,result.size());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.document.util.UtilsTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void leafPreviousDoc() throws Exception {
  Revision r=new Revision(System.currentTimeMillis(),0,0);
  assertTrue(Utils.isLeafPreviousDocId(Utils.getPreviousIdFor("/",r,0)));
  assertTrue(Utils.isLeafPreviousDocId(Utils.getPreviousIdFor("/a/b/c/d/e/f/g/h/i/j/k/l/m",r,0)));
  assertFalse(Utils.isLeafPreviousDocId(Utils.getPreviousIdFor("/a/b/c/d/e/f/g/h/i/j/k/l/m",r,3)));
  assertFalse(Utils.isLeafPreviousDocId(Utils.getIdFromPath("/a/b")));
  assertFalse(Utils.isLeafPreviousDocId("foo"));
  assertFalse(Utils.isLeafPreviousDocId("0:"));
  assertFalse(Utils.isLeafPreviousDocId(":/0"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void previousDoc() throws Exception {
  Revision r=new Revision(System.currentTimeMillis(),0,0);
  assertTrue(Utils.isPreviousDocId(Utils.getPreviousIdFor("/",r,0)));
  assertTrue(Utils.isPreviousDocId(Utils.getPreviousIdFor("/a/b/c/d/e/f/g/h/i/j/k/l/m",r,3)));
  assertFalse(Utils.isPreviousDocId(Utils.getIdFromPath("/a/b")));
  assertFalse(Utils.isPreviousDocId("foo"));
  assertFalse(Utils.isPreviousDocId("0:"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getParentId() throws Exception {
  String longPath=PathUtils.concat("/" + Strings.repeat("p",Utils.PATH_LONG + 1),"foo");
  assertTrue(Utils.isLongPath(longPath));
  assertNull(Utils.getParentId(Utils.getIdFromPath(longPath)));
  assertNull(Utils.getParentId(Utils.getIdFromPath("/")));
  assertEquals("1:/foo",Utils.getParentId("2:/foo/bar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdateLeaseTest </h4><pre class="type-1 type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@After public void cleanup() throws Exception {
  assertTrue("Test method was not executed",executed.get());
  String referenced=getReferenceCp(store,name);
  assertNotNull("Reference checkpoint doesn't exist",referenced);
  assertNotNull("Failed indexer must not clean successful indexer's checkpoint",store.retrieve(referenced));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdateTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsyncPause() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.getIndexStats().pause();
  async.run();
  assertFalse(store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("rootIndex").hasChildNode(INDEX_CONTENT_NODE_NAME));
  async.getIndexStats().resume();
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  assertFalse(root.getChildNode(INDEX_DEFINITIONS_NAME).hasChildNode(":conflict"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWUnrelatedChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").child(":hidden");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertFalse("Store should keep only second checkpoint",secondCp.equals(firstCp));
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupNoRelease() throws Exception {
  final MemoryNodeStore mns=new MemoryNodeStore();
  final AtomicBoolean canRelease=new AtomicBoolean(false);
  ProxyNodeStore store=new ProxyNodeStore(){
    @Override protected NodeStore getNodeStore(){
      return mns;
    }
    @Override public boolean release(    String checkpoint){
      if (canRelease.get()) {
        return super.release(checkpoint);
      }
      return false;
    }
  }
;
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",mns.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",mns.listCheckpoints().size() == 1);
  assertTrue("Expecting one temp checkpoint",newHashSet(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")).size() == 1);
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting two checkpoints",mns.listCheckpoints().size() == 2);
  assertTrue("Expecting two temp checkpoints",newHashSet(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")).size() == 2);
  canRelease.set(true);
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","ghi");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",mns.listCheckpoints().size() == 1);
  String secondCp=mns.listCheckpoints().iterator().next();
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
  for (  String cp : store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getStrings("async-temp")) {
    if (cp.equals(secondCp)) {
      continue;
    }
    assertNull("Temp checkpoint was already cleared from store",store.retrieve(cp));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWErrors() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  FaultyIndexEditorProvder provider=new FaultyIndexEditorProvder();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Error should have been triggered by the commit",provider.isFailed());
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexStats stats=async.getIndexStats();
  String since=stats.getFailingSince();
  assertTrue(stats.isFailing());
  assertEquals(1,stats.getConsecutiveFailedExecutions());
  assertEquals(since,stats.getLatestErrorTime());
  TimeUnit.MILLISECONDS.sleep(100);
  async.run();
  assertTrue(stats.isFailing());
  assertEquals(2,stats.getConsecutiveFailedExecutions());
  assertEquals(since,stats.getFailingSince());
  assertNotEquals(since,stats.getLatestErrorTime());
  stats.fixed();
  assertFalse(stats.isFailing());
  assertEquals(0,stats.getConsecutiveFailedExecutions());
  assertEquals("",stats.getFailingSince());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void closeWithSoftLimit() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final Semaphore asyncLock=new Semaphore(1);
  final AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider){
    @Override protected AsyncUpdateCallback newAsyncUpdateCallback(    NodeStore store,    String name,    long leaseTimeOut,    String beforeCheckpoint,    String afterCheckpoint,    AsyncIndexStats indexStats,    AtomicBoolean stopFlag){
      try {
        asyncLock.acquire();
      }
 catch (      InterruptedException ignore) {
      }
      return super.newAsyncUpdateCallback(store,name,leaseTimeOut,beforeCheckpoint,afterCheckpoint,indexStats,stopFlag);
    }
  }
;
  async.setCloseTimeOut(1000);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      async.run();
    }
  }
);
  Thread closer=new Thread(new Runnable(){
    @Override public void run(){
      async.close();
    }
  }
);
  asyncLock.acquire();
  t.start();
  while (!asyncLock.hasQueuedThreads())   ;
  LogCustomizer lc=createLogCustomizer(Level.DEBUG);
  closer.start();
  while (!async.isClosing())   ;
  assertFalse(async.isClosed());
  assertLogPhrase(lc.getLogs(),"[WAITING]");
  asyncLock.release();
  t.join();
  closer.join();
  assertLogPhrase(lc.getLogs(),"[CLOSED OK]");
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Async Index Test
 * <ul>
 * <li>Add an index definition</li>
 * <li>Add some content</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testAsync() throws Exception {
  NodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  NodeState root=store.getRoot();
  checkPathExists(root,INDEX_DEFINITIONS_NAME,"rootIndex",INDEX_CONTENT_NODE_NAME);
  assertFalse(root.getChildNode(INDEX_DEFINITIONS_NAME).hasChildNode(":conflict"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(root);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void branchBaseOnCheckpoint() throws Exception {
  final Semaphore retrieve=new Semaphore(1);
  final Semaphore checkpoint=new Semaphore(0);
  NodeStore store=new MemoryNodeStore(){
    @CheckForNull @Override public NodeState retrieve(    @Nonnull String checkpoint){
      retrieve.acquireUninterruptibly();
      try {
        return super.retrieve(checkpoint);
      }
  finally {
        retrieve.release();
      }
    }
    @Nonnull @Override public String checkpoint(    long lifetime,    @Nonnull Map<String,String> properties){
      try {
        return super.checkpoint(lifetime,properties);
      }
  finally {
        checkpoint.release();
      }
    }
  }
;
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",false,ImmutableSet.of("foo"),null,TYPE,Collections.singletonMap(ASYNC_PROPERTY_NAME,"async"));
  builder.child("test").setProperty("foo","a");
  builder.child("child");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  builder=store.getRoot().builder();
  builder.child("test").setProperty("foo","b");
  builder.child("child").setProperty("prop","value");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      async.run();
    }
  }
);
  checkpoint.acquireUninterruptibly(checkpoint.availablePermits());
  retrieve.acquireUninterruptibly();
  t.start();
  retrieve.release();
  checkpoint.acquireUninterruptibly();
  builder=store.getRoot().builder();
  builder.child("child").remove();
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  retrieve.release();
  t.join();
  assertFalse(store.getRoot().hasChildNode("child"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2203 Test reindex behavior on an async index when the index provider is missing
 * for a given type
 */
@Test public void testReindexMissingProvider() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"asyncMissing");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  AsyncIndexUpdate async=new AsyncIndexUpdate("asyncMissing",store,provider);
  async.run();
  assertFalse(async.isFailing());
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  assertEquals(firstCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("asyncMissing"));
  provider=CompositeIndexEditorProvider.compose(new ArrayList<IndexEditorProvider>());
  async=new AsyncIndexUpdate("asyncMissing",store,provider);
  async.run();
  assertTrue(async.isFailing());
  PropertyState reindex=store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("rootIndex").getProperty(REINDEX_PROPERTY_NAME);
  assertTrue(reindex == null || !reindex.getValue(Type.BOOLEAN));
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertTrue("Store should not create a new checkpoint",secondCp.equals(firstCp));
  assertEquals(firstCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("asyncMissing"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupWChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String secondCp=store.listCheckpoints().iterator().next();
  assertFalse("Store should keep only second checkpoint",secondCp.equals(firstCp));
  assertEquals(secondCp,store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cpCleanupNoChanges() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  async.run();
  assertTrue(async.isFinished());
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting the initial checkpoint",checkpoints.size() == 1);
  assertEquals(store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC).getString("async"),checkpoints.iterator().next());
  async.run();
  assertEquals("Expecting no checkpoint changes",checkpoints,store.listCheckpoints());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void taskSplitNoMatch() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored",true,false,ImmutableSet.of("baz"),null).setProperty(ASYNC_PROPERTY_NAME,"async-ignored");
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  IndexTaskSpliter splitter=async.getTaskSplitter();
  splitter.registerSplit(newHashSet("/oak:index/ignored"),"async-slow");
  async.run();
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting a single checkpoint",checkpoints.size() == 1);
  String secondCp=checkpoints.iterator().next();
  NodeState asyncNode=store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC);
  assertEquals(secondCp,asyncNode.getString("async"));
  assertNull(firstCp,asyncNode.getString("async-slow"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void taskSplit() throws Exception {
  MemoryNodeStore store=new MemoryNodeStore();
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"changedIndex",true,false,ImmutableSet.of("bar"),null).setProperty(ASYNC_PROPERTY_NAME,"async");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored1",true,false,ImmutableSet.of("baz"),null).setProperty(ASYNC_PROPERTY_NAME,"async-ignored");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"ignored2",true,false,ImmutableSet.of("etc"),null);
  builder.child("testRoot").setProperty("foo","abc");
  builder.child("testRoot").setProperty("bar","abc");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue("Expecting no checkpoints",store.listCheckpoints().size() == 0);
  AsyncIndexUpdate async=new AsyncIndexUpdate("async",store,provider);
  async.run();
  assertTrue("Expecting one checkpoint",store.listCheckpoints().size() == 1);
  String firstCp=store.listCheckpoints().iterator().next();
  builder=store.getRoot().builder();
  builder.child("testRoot").setProperty("foo","def");
  builder.child("testRoot").setProperty("bar","def");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  IndexTaskSpliter splitter=async.getTaskSplitter();
  splitter.registerSplit(newHashSet("/oak:index/changedIndex"),"async-slow");
  async.run();
  Set<String> checkpoints=newHashSet(store.listCheckpoints());
  assertTrue("Expecting two checkpoints",checkpoints.size() == 2);
  assertTrue(checkpoints.remove(firstCp));
  String secondCp=checkpoints.iterator().next();
  NodeState asyncNode=store.getRoot().getChildNode(AsyncIndexUpdate.ASYNC);
  assertEquals(firstCp,asyncNode.getString("async-slow"));
  assertEquals(secondCp,asyncNode.getString("async"));
  assertFalse(newHashSet(asyncNode.getStrings("async-temp")).contains(firstCp));
  NodeState indexNode=store.getRoot().getChildNode(INDEX_DEFINITIONS_NAME);
  assertEquals("async",indexNode.getChildNode("rootIndex").getString("async"));
  assertEquals("async-ignored",indexNode.getChildNode("ignored1").getString("async"));
  assertNull(indexNode.getChildNode("ignored2").getString("async"));
  assertEquals("async-slow",indexNode.getChildNode("changedIndex").getString("async"));
  assertEquals(false,indexNode.getChildNode("changedIndex").getBoolean("reindex"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(store.getRoot());
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"bar","abc"));
  assertEquals(ImmutableSet.of(),find(lookup,"bar","def"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.IndexUpdateTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2203 Test reindex behavior on a sync index when the index provider is missing
 * for a given type
 */
@Test public void testReindexSyncMissingProvider() throws Exception {
  EditorHook hook=new EditorHook(new IndexUpdateProvider(emptyProvider()));
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null);
  builder.child(INDEX_DEFINITIONS_NAME).child("azerty");
  builder.child("testRoot").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  NodeState rootIndex=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  PropertyState ps=rootIndex.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertTrue(ps.getValue(Type.BOOLEAN));
  NodeState azerty=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"azerty");
  assertNull("Node should be ignored by reindexer",azerty.getProperty(REINDEX_PROPERTY_NAME));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReindexCount() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  long t1=getReindexCount(indexed);
  NodeBuilder b2=indexed.builder();
  b2.child(INDEX_DEFINITIONS_NAME).child("rootIndex").setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  indexed=HOOK.processCommit(indexed,b2.getNodeState(),CommitInfo.EMPTY);
  long t2=getReindexCount(indexed);
  assertTrue(t2 > t1);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Async Reindex Test (OAK-2174)
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition with the reindex flag and the reindex-async flag set</li>
 * <li>Run the background async job manually</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindexAsync() throws Exception {
  IndexEditorProvider provider=new PropertyIndexEditorProvider();
  EditorHook hook=new EditorHook(new IndexUpdateProvider(provider));
  NodeStore store=new MemoryNodeStore();
  NodeBuilder builder=store.getRoot().builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).setProperty(REINDEX_ASYNC_PROPERTY_NAME,true);
  builder.child("testRoot").setProperty("foo","abc");
  store.merge(builder,hook,CommitInfo.EMPTY);
  NodeState ns1=checkPathExists(store.getRoot(),INDEX_DEFINITIONS_NAME,"rootIndex");
  assertTrue(ns1.getProperty(REINDEX_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertTrue(ns1.getProperty(REINDEX_ASYNC_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertEquals(ASYNC_REINDEX_VALUE,ns1.getString(ASYNC_PROPERTY_NAME));
  AsyncIndexUpdate async=new AsyncIndexUpdate(ASYNC_REINDEX_VALUE,store,provider,true);
  int max=5;
  boolean done=false;
  int count=0;
  while (!done || count >= max) {
    async.run();
    done=async.isFinished();
    count++;
  }
  NodeState ns=checkPathExists(store.getRoot(),INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  assertFalse(ns.getProperty(REINDEX_PROPERTY_NAME).getValue(Type.BOOLEAN));
  assertNull(ns.getProperty(ASYNC_PROPERTY_NAME));
  PropertyIndexLookup lookup=new PropertyIndexLookup(store.getRoot());
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Reindex Test
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition with the reindex flag set</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindex() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReindexHidden() throws Exception {
  NodeState before=EmptyNodeState.EMPTY_NODE;
  NodeBuilder builder=before.builder();
  builder.child(":testRoot").setProperty("foo","abc");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  NodeState index=checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  assertFalse(index.getChildNodeCount(1) > 0);
  before=indexed;
  builder=before.builder();
  builder.child(INDEX_DEFINITIONS_NAME).child("rootIndex").setProperty("reindex",true);
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  index=checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  assertFalse(index.getChildNodeCount(1) > 0);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Auto Reindex Test
 * <ul>
 * <li>Add some content</li>
 * <li>Add an index definition without a reindex flag (see OAK-1874)</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindexAuto() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  NodeState before=builder.getNodeState();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",false,false,ImmutableSet.of("foo"),null);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Reindex Test
 * <ul>
 * <li>Add some content & an index definition</li>
 * <li>Update the index def by setting the reindex flag to true</li>
 * <li>Search & verify</li>
 * </ul>
 */
@Test public void testReindex2() throws Exception {
  builder.child("testRoot").setProperty("foo","abc");
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"rootIndex",true,false,ImmutableSet.of("foo"),null).removeProperty("reindex");
  NodeState before=builder.getNodeState();
  builder.child(INDEX_DEFINITIONS_NAME).child("rootIndex").setProperty(REINDEX_PROPERTY_NAME,true);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState ns=checkPathExists(indexed,INDEX_DEFINITIONS_NAME,"rootIndex");
  checkPathExists(ns,INDEX_CONTENT_NODE_NAME);
  PropertyState ps=ns.getProperty(REINDEX_PROPERTY_NAME);
  assertNotNull(ps);
  assertFalse(ps.getValue(Type.BOOLEAN));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("testRoot"),find(lookup,"foo","abc"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.aggregate.SimpleNodeAggregatorTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testStarNameWrongParentType(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE + "_");
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList(INCLUDE_ALL));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertTrue(actual.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNodeNameWrongParentType(){
  NodeState root=new MemoryNodeStore().getRoot();
  NodeBuilder builder=root.builder();
  NodeBuilder file=builder.child("file");
  file.setProperty(JCR_PRIMARYTYPE,NT_FILE + "_");
  file.child(JCR_CONTENT);
  SimpleNodeAggregator agg=new SimpleNodeAggregator().newRuleWithName(NT_FILE,newArrayList(JCR_CONTENT));
  String path="/file/jcr:content";
  List<String> actual=newArrayList(agg.getParents(builder.getNodeState(),path));
  assertTrue(actual.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.diffindex.DiffCollectorTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUUID() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("a").setProperty("jcr:uuid","abc");
  builder.child("b").setProperty("jcr:uuid","xyz");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(root,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("abc"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("a",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeepChange() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  NodeBuilder b1=builder.child("rep:security").child("rep:authorizables");
  b1.child("rep:groups").child("t").child("te").child("testGroup_1c22a39f");
  NodeBuilder b2=b1.child("rep:users");
  b2.child("t").child("te").child("testUser_008e00d9");
  NodeBuilder b3=b2.child("a");
  b3.child("an").child("anonymous");
  b3.child("ad").child("admin");
  NodeState before=builder.getNodeState();
  builder=before.builder();
  NodeBuilder a1=builder.child("rep:security").child("rep:authorizables").child("rep:groups").child("t").child("te");
  a1.child("testGroup_1c22a39f").setProperty("jcr:uuid","c6195630-e956-3d4b-8912-479c303bf15a");
  a1.child("testPrincipal_4e6b704e").setProperty("jcr:uuid","ee59b554-76b7-3e27-9fc6-15bda1388894");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(before,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("ee59b554-76b7-3e27-9fc6-15bda1388894"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("rep:security/rep:authorizables/rep:groups/t/te/testPrincipal_4e6b704e",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUUIDInner() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("a").setProperty("jcr:uuid","abc");
  NodeState before=builder.getNodeState();
  builder=before.builder();
  builder.child("a").child("b").setProperty("jcr:uuid","xyz");
  NodeState after=builder.getNodeState();
  UUIDDiffCollector collector=new UUIDDiffCollector(before,after);
  FilterImpl f=new FilterImpl();
  f.restrictProperty("jcr:uuid",Operator.EQUAL,PropertyValues.newString("xyz"));
  Set<String> result=collector.getResults(f);
  Iterator<String> iterator=result.iterator();
  assertTrue(iterator.hasNext());
  assertEquals("a/b",iterator.next());
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.AggregateTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void includeMatches() throws Exception {
  Aggregate ag=new Aggregate("nt:base",of(ni(null,"*",true),ni(null,"*/*",true)));
  assertTrue(ag.hasRelativeNodeInclude("foo"));
  assertTrue(ag.hasRelativeNodeInclude("foo/bar"));
  assertFalse(ag.hasRelativeNodeInclude("foo/bar/baz"));
  Aggregate ag2=new Aggregate("nt:base",of(ni(null,"foo",true),ni(null,"foo/*",true)));
  assertTrue(ag2.hasRelativeNodeInclude("foo"));
  assertFalse(ag2.hasRelativeNodeInclude("bar"));
  assertTrue(ag2.hasRelativeNodeInclude("foo/bar"));
  assertFalse(ag2.hasRelativeNodeInclude("foo/bar/baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void aggregateConfig2() throws Exception {
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.setProperty(LuceneIndexConstants.AGG_RECURSIVE_LIMIT,42);
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PRIMARY_TYPE,"nt:file");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_RELATIVE_NODE,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  Aggregate agg=defn.getAggregate("nt:folder");
  assertNotNull(agg);
  assertEquals(42,agg.reAggregationLimit);
  assertEquals(1,agg.getIncludes().size());
  assertEquals("nt:file",((NodeInclude)agg.getIncludes().get(0)).primaryType);
  assertTrue(((NodeInclude)agg.getIncludes().get(0)).relativeNode);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexCopierTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTestWithFS() throws Exception {
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new IndexCopier(sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  assertEquals(2,wrapped.listAll().length);
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
  File indexBaseDir=c1.getIndexDir("/foo");
  File indexDir=new File(indexBaseDir,"0");
  assertTrue(new File(indexDir,"t1").exists());
  TabularData td=c1.getIndexPathMapping();
  assertEquals(1,td.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void cowCopyDoneOnClose() throws Exception {
  final CollectingExecutor executor=new CollectingExecutor();
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,executor,getWorkDir());
  Directory remote=new CloseSafeDir();
  final Directory local=copier.wrapForWrite(defn,remote,false);
  byte[] t1=writeFile(local,"t1");
  assertTrue(local.fileExists("t1"));
  assertFalse("t1 should NOT be copied to remote",remote.fileExists("t1"));
  executor.executeAll();
  assertTrue("t1 should now be copied to remote",remote.fileExists("t1"));
  byte[] t2=writeFile(local,"t2");
  assertFalse("t2 should NOT be copied to remote",remote.fileExists("t2"));
  final ExecutorService executorService=Executors.newFixedThreadPool(4);
  final CountDownLatch copyLatch=new CountDownLatch(1);
  Future<?> copyTasks=executorService.submit(new Callable(){
    @Override public Object call() throws Exception {
      copyLatch.await();
      executor.setForwardingExecutor(executorService);
      executor.executeAll();
      return null;
    }
  }
);
  final CountDownLatch closeLatch=new CountDownLatch(1);
  Future<?> closeTasks=executorService.submit(new Callable(){
    @Override public Object call() throws Exception {
      closeLatch.await();
      local.close();
      return null;
    }
  }
);
  closeLatch.countDown();
  assertFalse("t2 should NOT be copied to remote",remote.fileExists("t2"));
  copyLatch.countDown();
  closeTasks.get();
  assertTrue("t2 should now be copied to remote",remote.fileExists("t2"));
  executorService.shutdown();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test the interaction between COR and COW using same underlying directory
 */
@Test public void cowConcurrentAccess() throws Exception {
  CollectingExecutor executor=new CollectingExecutor();
  ExecutorService executorService=Executors.newFixedThreadPool(2);
  executor.setForwardingExecutor(executorService);
  Directory baseDir=new CloseSafeDir();
  String indexPath="/foo";
  builder.setProperty(LuceneIndexConstants.INDEX_PATH,indexPath);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,executor,getWorkDir(),true);
  Directory remote=new CloseSafeDir();
  byte[] f1=writeFile(remote,"f1");
  Directory cor1=copier.wrapForRead(indexPath,defn,remote);
  readAndAssert(cor1,"f1",f1);
  cor1.close();
  final CountDownLatch pauseCopyLatch=new CountDownLatch(1);
  Directory remote2=new FilterDirectory(remote){
    @Override public IndexOutput createOutput(    String name,    IOContext context) throws IOException {
      try {
        pauseCopyLatch.await();
      }
 catch (      InterruptedException ignore) {
      }
      return super.createOutput(name,context);
    }
  }
;
  Directory cow1=copier.wrapForWrite(defn,remote2,false);
  byte[] f2=writeFile(cow1,"f2");
  remote.deleteFile("f1");
  Directory cor2=copier.wrapForRead(indexPath,defn,remote);
  executor.enableImmediateExecution();
  cor2.close();
  executor.enableDelayedExecution();
  assertFalse(baseDir.fileExists("f1"));
  assertFalse("f2 should not have been copied to remote so far",remote.fileExists("f2"));
  assertTrue("f2 should exist",baseDir.fileExists("f2"));
  pauseCopyLatch.countDown();
  cow1.close();
  assertTrue("f2 should exist",remote.fileExists("f2"));
  executorService.shutdown();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTest() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  assertEquals(2,wrapped.listAll().length);
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
  assertTrue(baseDir.fileExists("t1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Checks for the case where if the file exist local before writer starts
 * then those files do not get deleted even if deleted by writer via
 * indexing process from 'baseDir' as they might be in use by existing open
 * indexes
 */
@Test public void cowExistingLocalFileNotDeleted() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new CloseSafeDir();
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  Directory local=copier.wrapForWrite(defn,remote,false);
  assertEquals(newHashSet("t1","t2"),newHashSet(local.listAll()));
  byte[] t3=writeFile(local,"t3");
  Directory localForRead=copier.wrapForRead("/foo",defn,remote);
  readAndAssert(localForRead,"t1",t1);
  assertTrue(baseDir.fileExists("t1"));
  local.deleteFile("t1");
  assertFalse("t1 should be deleted from remote",remote.fileExists("t1"));
  assertFalse("t1 should be deleted from 'local' view also",local.fileExists("t1"));
  assertTrue("t1 should not be deleted from baseDir",baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t3"));
  local.deleteFile("t3");
  assertFalse("t1 should be deleted from remote",local.fileExists("t3"));
  assertTrue("t1 should NOT be deleted from remote",baseDir.fileExists("t3"));
  local.close();
  assertFalse("t3 should also be deleted from local",baseDir.fileExists("t3"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void cowCopyDoneOnCloseExceptionHandling() throws Exception {
  final CollectingExecutor executor=new CollectingExecutor();
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,executor,getWorkDir());
  Directory remote=new CloseSafeDir();
  final Directory local=copier.wrapForWrite(defn,remote,false);
  byte[] t1=writeFile(local,"t1");
  assertTrue(local.fileExists("t1"));
  assertFalse("t1 should NOT be copied to remote",remote.fileExists("t1"));
  executor.executeAll();
  assertTrue("t1 should now be copied to remote",remote.fileExists("t1"));
  byte[] t2=writeFile(local,"t2");
  assertFalse("t2 should NOT be copied to remote",remote.fileExists("t2"));
  ExecutorService executorService=Executors.newFixedThreadPool(2);
  final CountDownLatch copyLatch=new CountDownLatch(1);
  Future<?> copyTasks=executorService.submit(new Callable(){
    @Override public Object call() throws Exception {
      copyLatch.await();
      executor.executeAll();
      executor.enableImmediateExecution();
      return null;
    }
  }
);
  final CountDownLatch closeLatch=new CountDownLatch(1);
  Future<?> closeTasks=executorService.submit(new Callable(){
    @Override public Object call() throws Exception {
      closeLatch.await();
      local.close();
      return null;
    }
  }
);
  closeLatch.countDown();
  assertFalse("t2 should NOT be copied to remote",remote.fileExists("t2"));
  copyLatch.countDown();
  closeTasks.get();
  assertTrue("t2 should now be copied to remote",remote.fileExists("t2"));
  executorService.shutdown();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void deleteOldPostReindex() throws Exception {
  assumeNotWindows();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new IndexCopier(sameThreadExecutor(),getWorkDir());
  Directory remote=new CloseSafeDir();
  Directory w1=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  readAndAssert(w1,"t1",t1);
  readAndAssert(w1,"t2",t2);
  File indexBaseDir=c1.getIndexDir("/foo");
  File indexDir=new File(indexBaseDir,"0");
  assertTrue(new File(indexDir,"t1").exists());
  builder.setProperty(REINDEX_COUNT,1);
  defn=new IndexDefinition(root,builder.getNodeState());
  w1.close();
  Directory w2=c1.wrapForRead("/foo",defn,remote);
  readAndAssert(w2,"t1",t1);
  w2.close();
  assertFalse("Old index directory should have been removed",indexDir.exists());
  File indexDir2=new File(indexBaseDir,"1");
  assertTrue(new File(indexDir2,"t1").exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTestWithPrefetch() throws Exception {
  final List<String> syncedFiles=Lists.newArrayList();
  Directory baseDir=new RAMDirectory(){
    @Override public void sync(    Collection<String> names) throws IOException {
      syncedFiles.addAll(names);
      super.sync(names);
    }
  }
;
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir(),true);
  Directory remote=new RAMDirectory();
  byte[] t1=writeFile(remote,"t1");
  byte[] t2=writeFile(remote,"t2");
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  assertEquals(2,wrapped.listAll().length);
  assertThat(syncedFiles,containsInAnyOrder("t1","t2"));
  assertTrue(wrapped.fileExists("t1"));
  assertTrue(wrapped.fileExists("t2"));
  assertTrue(baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
  assertEquals(t1.length,wrapped.fileLength("t1"));
  assertEquals(t2.length,wrapped.fileLength("t2"));
  readAndAssert(wrapped,"t1",t1);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void failureInDelete() throws Exception {
  final Set<String> testFiles=new HashSet<String>();
  Directory baseDir=new CloseSafeDir(){
    @Override public void deleteFile(    String name) throws IOException {
      if (testFiles.contains(name)) {
        throw new IOException("Not allowed to delete " + name);
      }
      super.deleteFile(name);
    }
  }
;
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory r1=new RAMDirectory();
  byte[] t1=writeFile(r1,"t1");
  byte[] t2=writeFile(r1,"t2");
  Directory w1=c1.wrapForRead("/foo",defn,r1);
  readAndAssert(w1,"t1",t1);
  readAndAssert(w1,"t2",t2);
  assertTrue(baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
  Directory r2=new CloseSafeDir();
  copy(r1,r2);
  r2.deleteFile("t1");
  Directory w2=c1.wrapForRead("/foo",defn,r2);
  testFiles.add("t1");
  w2.close();
  assertEquals(1,c1.getFailedToDeleteFiles().size());
  IndexCopier.LocalIndexFile testFile=c1.getFailedToDeleteFiles().values().iterator().next();
  assertEquals(1,testFile.getDeleteAttemptCount());
  assertEquals(IOUtils.humanReadableByteCount(t1.length),c1.getGarbageSize());
  assertEquals(1,c1.getGarbageDetails().length);
  Directory w3=c1.wrapForRead("/foo",defn,r2);
  w3.close();
  assertEquals(2,testFile.getDeleteAttemptCount());
  testFiles.clear();
  Directory w4=c1.wrapForRead("/foo",defn,r2);
  w4.close();
  assertEquals(0,c1.getFailedToDeleteFiles().size());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void deletesOnClose() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory r1=new RAMDirectory();
  byte[] t1=writeFile(r1,"t1");
  byte[] t2=writeFile(r1,"t2");
  Directory w1=c1.wrapForRead("/foo",defn,r1);
  readAndAssert(w1,"t1",t1);
  readAndAssert(w1,"t2",t2);
  assertTrue(baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
  Directory r2=new RAMDirectory();
  copy(r1,r2);
  r2.deleteFile("t1");
  Directory w2=c1.wrapForRead("/foo",defn,r2);
  w2.close();
  assertFalse("t1 should have been deleted",baseDir.fileExists("t1"));
  assertTrue(baseDir.fileExists("t2"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteCorruptedFile() throws Exception {
  Directory baseDir=new RAMDirectory();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  RAMIndexCopier c1=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory(){
    @Override public IndexInput openInput(    String name,    IOContext context) throws IOException {
      throw new IllegalStateException("boom");
    }
  }
;
  String fileName="failed.txt";
  Directory wrapped=c1.wrapForRead("/foo",defn,remote);
  byte[] t1=writeFile(remote,fileName);
  try {
    readAndAssert(wrapped,fileName,t1);
    fail("Read of file should have failed");
  }
 catch (  IllegalStateException ignore) {
  }
  assertFalse(c1.baseDir.fileExists(fileName));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copyOnWriteBasics() throws Exception {
  Directory baseDir=new CloseSafeDir();
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexCopier copier=new RAMIndexCopier(baseDir,sameThreadExecutor(),getWorkDir());
  Directory remote=new RAMDirectory();
  byte[] t1=writeFile(remote,"t1");
  Directory local=copier.wrapForWrite(defn,remote,false);
  assertEquals(newHashSet("t1"),newHashSet(local.listAll()));
  assertEquals(t1.length,local.fileLength("t1"));
  byte[] t2=writeFile(local,"t2");
  assertEquals(newHashSet("t1","t2"),newHashSet(local.listAll()));
  assertEquals(t2.length,local.fileLength("t2"));
  assertTrue(local.fileExists("t1"));
  assertTrue(local.fileExists("t2"));
  assertTrue("t2 should be copied to remote",remote.fileExists("t2"));
  readAndAssert(local,"t1",t1);
  readAndAssert(local,"t2",t2);
  local.deleteFile("t1");
  assertEquals(newHashSet("t2"),newHashSet(local.listAll()));
  local.deleteFile("t2");
  assertEquals(newHashSet(),newHashSet(local.listAll()));
  try {
    local.fileLength("nonExistentFile");
    fail();
  }
 catch (  FileNotFoundException ignore) {
  }
  try {
    local.openInput("nonExistentFile",IOContext.DEFAULT);
    fail();
  }
 catch (  FileNotFoundException ignore) {
  }
  local.close();
  assertFalse(baseDir.fileExists("t2"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexDefinitionTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonIndexPropShouldHaveAllOtherConfigDisabled() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_INDEX,false).setProperty(LuceneIndexConstants.PROP_USE_IN_SUGGEST,true).setProperty(LuceneIndexConstants.PROP_USE_IN_SPELLCHECK,true).setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true).setProperty(LuceneIndexConstants.PROP_NOT_NULL_CHECK_ENABLED,true).setProperty(LuceneIndexConstants.PROP_USE_IN_EXCERPT,true).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true).setProperty(LuceneIndexConstants.PROP_ORDERED,true).setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule);
  PropertyDefinition pd=rule.getConfig("foo");
  assertFalse(pd.index);
  assertFalse(pd.nodeScopeIndex);
  assertFalse(pd.useInSuggest);
  assertFalse(pd.useInSpellcheck);
  assertFalse(pd.nullCheckEnabled);
  assertFalse(pd.notNullCheckEnabled);
  assertFalse(pd.stored);
  assertFalse(pd.ordered);
  assertFalse(pd.analyzed);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSuggestEnabledOnNamedProp() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_USE_IN_SUGGEST,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(idxDefn.isSuggestEnabled());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyDefinition() throws Exception {
  builder.child(PROP_NODE).child("foo").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  builder.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","bar"),STRINGS));
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertTrue(rule.isIndexed("foo"));
  assertTrue(rule.isIndexed("bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo").getType());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void notNullCheckEnabledWithTestNode() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_NOT_NULL_CHECK_ENABLED,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(!idxDefn.getApplicableIndexingRule(TestUtil.NT_TEST).getNotNullCheckEnabledProperties().isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nullCheckEnabledWithTestNode() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_NULL_CHECK_ENABLED,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(!idxDefn.getApplicableIndexingRule(TestUtil.NT_TEST).getNullCheckEnabledProperties().isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyRegExAndRelativeProperty() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING),of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertTrue(defn.isOfOldFormat());
  NodeBuilder updated=IndexDefinition.updateDefinition(defnb.getNodeState().builder());
  IndexDefinition defn2=new IndexDefinition(root,updated.getNodeState());
  IndexingRule rule=defn2.getApplicableIndexingRule(newTree(newNode("nt:base")));
  assertNotNull(rule.getConfig("foo"));
  assertNull("Property regex used should not allow relative properties",rule.getConfig("foo/bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleWithPropertyOrdering() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  rules.child("nt:folder").child(PROP_NODE).setProperty(OAK_CHILD_ORDER,ImmutableList.of("prop2","prop1"),NAMES);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("prop1"));
  assertTrue(rule1.isIndexed("fooProp"));
  assertEquals(4.0f,rule1.getConfig("bazProp2").boost,0);
  assertEquals(4.0f,rule1.getConfig("fooProp").boost,0);
  rules.child("nt:folder").child(PROP_NODE).setProperty(OAK_CHILD_ORDER,ImmutableList.of("prop1","prop2"),NAMES);
  defn=new IndexDefinition(root,builder.getNodeState());
  rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertEquals(3.0f,rule1.getConfig("fooProp").boost,0);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void defaultConfig() throws Exception {
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(idxDefn.saveDirListing());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSuggestDisabled() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo");
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertFalse(idxDefn.isSuggestEnabled());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void skipTokenization() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertFalse(rule.getConfig("foo").skipTokenization("foo"));
  assertTrue(rule.getConfig(JcrConstants.JCR_UUID).skipTokenization(JcrConstants.JCR_UUID));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeFullTextIndexed_Aggregates() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  NodeBuilder aggregates=builder.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:folder");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule);
  assertTrue(rule.isNodeFullTextIndexed());
  assertTrue(rule.indexesAllNodesOfMatchingType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyConfigCaseInsensitive() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/foo").setProperty(LuceneIndexConstants.PROP_NAME,"Foo").setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  TestUtil.child(rules,"nt:folder/properties/bar").setProperty(LuceneIndexConstants.PROP_NAME,"BAR").setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("Foo"));
  assertTrue(rule1.isIndexed("foo"));
  assertTrue(rule1.isIndexed("fOO"));
  assertTrue(rule1.isIndexed("bar"));
  assertFalse(rule1.isIndexed("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeFullTextIndexed_Simple() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,"foo").setProperty(LuceneIndexConstants.PROP_ANALYZED,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule);
  assertFalse(rule.isNodeFullTextIndexed());
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  defn=new IndexDefinition(root,builder.getNodeState());
  rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertTrue(rule.isNodeFullTextIndexed());
  assertTrue(rule.indexesAllNodesOfMatchingType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void formatUpdate() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING),of("foo","Bar"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertTrue(defn.isOfOldFormat());
  NodeBuilder updated=IndexDefinition.updateDefinition(defnb.getNodeState().builder());
  IndexDefinition defn2=new IndexDefinition(root,updated.getNodeState());
  assertFalse(defn2.isOfOldFormat());
  IndexingRule rule=defn2.getApplicableIndexingRule(newTree(newNode("nt:base")));
  assertNotNull(rule);
  assertFalse(rule.getConfig("foo").index);
  assertFalse(rule.getConfig("Bar").index);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void fulltextEnabledAndAggregate() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertFalse(defn.isFullTextEnabled());
  NodeBuilder aggregates=defnb.child(LuceneIndexConstants.AGGREGATES);
  NodeBuilder aggFolder=aggregates.child("nt:base");
  aggFolder.child("i1").setProperty(LuceneIndexConstants.AGG_PATH,"*");
  defn=new IndexDefinition(root,defnb.getNodeState());
  assertTrue(defn.isFullTextEnabled());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void fullTextEnabled() throws Exception {
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertTrue("By default fulltext is enabled",idxDefn.isFullTextEnabled());
  assertTrue("By default everything is indexed",rule.isIndexed("foo"));
  assertTrue("Property types need to be defined",rule.includePropertyType(PropertyType.DATE));
  assertTrue("For fulltext storage is enabled",rule.getConfig("foo").stored);
  assertFalse(rule.getConfig("foo").skipTokenization("foo"));
  assertTrue(rule.getConfig("jcr:uuid").skipTokenization("jcr:uuid"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nodeFullTextIndexed_Regex() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_ANALYZED,true).setProperty(LuceneIndexConstants.PROP_IS_REGEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule);
  assertFalse(rule.isNodeFullTextIndexed());
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  defn=new IndexDefinition(root,builder.getNodeState());
  rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertTrue(rule.isNodeFullTextIndexed());
  assertTrue(rule.indexesAllNodesOfMatchingType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleWithPropertyRegEx() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"foo.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("prop1"));
  assertFalse(rule1.isIndexed("prop2"));
  assertTrue(rule1.isIndexed("fooProp"));
  PropertyDefinition pd=rule1.getConfig("fooProp2");
  assertEquals(4.0f,pd.boost,0);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleSanity() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder").setProperty(LuceneIndexConstants.FIELD_BOOST,2.0);
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0).setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_BOOLEAN);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  assertNull(defn.getApplicableIndexingRule(newTree(newNode("nt:base"))));
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertEquals(2.0f,rule1.boost,0);
  assertTrue(rule1.isIndexed("prop1"));
  assertFalse(rule1.isIndexed("prop2"));
  PropertyDefinition pd=rule1.getConfig("prop1");
  assertEquals(3.0f,pd.boost,0);
  assertEquals(PropertyType.BOOLEAN,pd.getType());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void costConfig() throws Exception {
  NodeBuilder defnb=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of("foo"),"async");
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(1.0,defn.getCostPerEntry(),0);
  assertEquals(1.0,defn.getCostPerExecution(),0);
  assertEquals(IndexDefinition.DEFAULT_ENTRY_COUNT,defn.getEntryCount());
  assertFalse(defn.isEntryCountDefined());
  defnb.setProperty(LuceneIndexConstants.COST_PER_ENTRY,2.0);
  defnb.setProperty(LuceneIndexConstants.COST_PER_EXECUTION,3.0);
  defnb.setProperty(IndexConstants.ENTRY_COUNT_PROPERTY_NAME,500);
  IndexDefinition defn2=new IndexDefinition(root,defnb.getNodeState());
  assertEquals(2.0,defn2.getCostPerEntry(),0);
  assertEquals(3.0,defn2.getCostPerExecution(),0);
  assertEquals(500,defn2.getEntryCount());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSuggestAnalyzed() throws Exception {
  NodeBuilder indexRoot=builder;
  IndexDefinition idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertFalse("Default config",idxDefn.isSuggestAnalyzed());
  indexRoot=builder.child("shadowConfigRoot");
  indexRoot.setProperty(LuceneIndexConstants.SUGGEST_ANALYZED,true);
  indexRoot.child(LuceneIndexConstants.SUGGESTION_CONFIG);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertFalse("Namespaced config node should shadow global config",idxDefn.isSuggestAnalyzed());
  indexRoot=builder.child("backwardCompatibilityRoot");
  indexRoot.setProperty(LuceneIndexConstants.SUGGEST_ANALYZED,true);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertTrue("Backward compatibility config",idxDefn.isSuggestAnalyzed());
  indexRoot=builder.child("indexRoot");
  indexRoot.child(LuceneIndexConstants.SUGGESTION_CONFIG).setProperty(LuceneIndexConstants.SUGGEST_ANALYZED,true);
  idxDefn=new IndexDefinition(root,indexRoot.getNodeState());
  assertTrue("Set config",idxDefn.isSuggestAnalyzed());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSuggestEnabledOnRegexProp() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child(TestUtil.NT_TEST);
  TestUtil.child(rules,"oak:TestNode/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.PROP_USE_IN_SUGGEST,true);
  root=registerTestNodeType(builder).getNodeState();
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  assertTrue(idxDefn.isSuggestEnabled());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyTypes() throws Exception {
  builder.setProperty(createProperty(INCLUDE_PROPERTY_TYPES,of(TYPENAME_LONG),STRINGS));
  builder.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","bar"),STRINGS));
  builder.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertFalse(idxDefn.isFullTextEnabled());
  assertFalse("If fulltext disabled then nothing stored",rule.getConfig("foo").stored);
  assertTrue(rule.includePropertyType(PropertyType.LONG));
  assertFalse(rule.includePropertyType(PropertyType.STRING));
  assertTrue(rule.isIndexed("foo"));
  assertTrue(rule.isIndexed("bar"));
  assertFalse(rule.isIndexed("baz"));
  assertTrue(rule.getConfig("foo").skipTokenization("foo"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void relativePropertyConfig() throws Exception {
  builder.child(PROP_NODE).child("foo1").child("bar").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  builder.child(PROP_NODE).child("foo2").child("bar2").child("baz").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_LONG);
  builder.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo","foo1/bar","foo2/bar2/baz"),STRINGS));
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule.getConfig("foo1/bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo1/bar").getType());
  assertEquals(PropertyType.LONG,rule.getConfig("foo2/bar2/baz").getType());
  assertTrue(rule.getConfig("foo1/bar").relative);
  assertArrayEquals(new String[]{"foo2","bar2"},rule.getConfig("foo2/bar2/baz").ancestors);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyDefinitionWithExcludes() throws Exception {
  builder.child(PROP_NODE).child("foo").setProperty(LuceneIndexConstants.PROP_TYPE,PropertyType.TYPENAME_DATE);
  IndexDefinition idxDefn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule=idxDefn.getApplicableIndexingRule(NT_BASE);
  assertTrue(rule.isIndexed("foo"));
  assertTrue(rule.isIndexed("bar"));
  assertEquals(PropertyType.DATE,rule.getConfig("foo").getType());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void customTikaConfig() throws Exception {
  NodeBuilder defnb=newLuceneIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",of(TYPENAME_STRING));
  IndexDefinition defn=new IndexDefinition(root,defnb.getNodeState());
  assertFalse(defn.hasCustomTikaConfig());
  defnb.child(LuceneIndexConstants.TIKA).child(LuceneIndexConstants.TIKA_CONFIG).child(JcrConstants.JCR_CONTENT).setProperty(JcrConstants.JCR_DATA,"hello".getBytes());
  defn=new IndexDefinition(root,defnb.getNodeState());
  assertTrue(defn.hasCustomTikaConfig());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void indexRuleWithPropertyRegEx2() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.PROP_NAME,".*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_NAME,"metadata/.*").setProperty(LuceneIndexConstants.PROP_IS_REGEX,true).setProperty(LuceneIndexConstants.FIELD_BOOST,4.0);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  assertTrue(rule1.isIndexed("prop1"));
  assertTrue(rule1.isIndexed("prop2"));
  assertFalse(rule1.isIndexed("jcr:content/prop1"));
  assertTrue(rule1.isIndexed("metadata/foo"));
  assertFalse(rule1.isIndexed("metadata/foo/bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzedEnabledForBoostedField() throws Exception {
  NodeBuilder rules=builder.child(INDEX_RULES);
  rules.child("nt:folder");
  TestUtil.child(rules,"nt:folder/properties/prop1").setProperty(LuceneIndexConstants.FIELD_BOOST,3.0).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  TestUtil.child(rules,"nt:folder/properties/prop2").setProperty(LuceneIndexConstants.PROP_ANALYZED,true).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  TestUtil.child(rules,"nt:folder/properties/prop3").setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true).setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  IndexDefinition defn=new IndexDefinition(root,builder.getNodeState());
  IndexingRule rule1=defn.getApplicableIndexingRule(newTree(newNode("nt:folder")));
  assertNotNull(rule1);
  PropertyDefinition pd=rule1.getConfig("prop1");
  assertEquals(3.0f,pd.boost,0);
  assertTrue("Analyzed should be assumed to be true for boosted fields",pd.analyzed);
  assertFalse(rule1.getConfig("prop3").analyzed);
  assertEquals(2,rule1.getNodeScopeAnalyzedProps().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.IndexPlannerTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void purePropertyIndexAndNodeTypeRestriction3() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  defn.setProperty(LuceneIndexConstants.EVALUATE_PATH_RESTRICTION,true);
  defn.setProperty(IndexConstants.DECLARING_NODE_TYPES,of("nt:file"),NAMES);
  defn=IndexDefinition.updateDefinition(defn.getNodeState().builder());
  NodeBuilder foob=getNode(defn,"indexRules/nt:file/properties/foo");
  foob.setProperty(LuceneIndexConstants.PROP_NODE_SCOPE_INDEX,true);
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:file");
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNotNull(plan);
  assertNotNull(pr(plan));
  assertTrue(pr(plan).evaluateNodeTypeRestriction());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void matchingProperty() throws Exception {
  NodeBuilder defn=newLucenePropertyIndexDefinition(builder,"test",of("foo"),"async");
  IndexNode node=createIndexNode(new IndexDefinition(root,defn.getNodeState()));
  FilterImpl filter=createFilter("nt:base");
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  IndexPlanner planner=new IndexPlanner(node,"/foo",filter,Collections.<OrderEntry>emptyList());
  QueryIndex.IndexPlan plan=planner.getPlan();
  assertNotNull(plan);
  assertNotNull(pr(plan));
  assertTrue(pr(plan).evaluateNonFullTextConstraints());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexAggregationTest </h4><pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oak3371AggregateV1() throws CommitFailedException {
  Tree indexdef=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertNotNull(indexdef);
  assertTrue(indexdef.exists());
  indexdef.setProperty(LuceneIndexConstants.COMPAT_MODE,1L);
  indexdef.setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  root.commit();
  oak3371();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexAugmentTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void skipDefaultOnlyUsingAugmentors() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  Tree prop=props.addChild("foo1");
  prop.setProperty(LuceneIndexConstants.PROP_INDEX,true);
  prop=props.addChild("foo2");
  prop.setProperty(LuceneIndexConstants.PROP_NAME,"subChild/foo2");
  prop.setProperty(LuceneIndexConstants.PROP_INDEX,true);
  root.commit();
  final AtomicInteger indexingCounter=new AtomicInteger(0);
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      indexingCounter.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  final AtomicInteger queryingCounter=new AtomicInteger(0);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      queryingCounter.set(1);
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree node1=createNodeWithType(root.getTree("/"),"node1",TestUtil.NT_TEST);
  node1.setProperty("foo1","bar1");
  node1.addChild("subChild").setProperty("foo2","bar2");
  root.commit();
  assertEquals("Indexing augment should get called once",1,indexingCounter.get());
  assertEquals("No docs should get indexed (augmentor hasn't added any field)",0,getSearcher().getIndexReader().numDocs());
  String query="EXPLAIN SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE [foo1]='bar1'";
  List<String> paths=executeQuery(query,SQL2);
  assertTrue("indexed prop name shouldn't decide query plan (" + paths.get(0) + ")",paths.get(0).contains("/* no-index "));
  query="EXPLAIN SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE [subChild/foo2]='bar2'";
  paths=executeQuery(query,SQL2);
  assertTrue("indexed prop name shouldn't decide query plan (" + paths.get(0) + ")",paths.get(0).contains("/* no-index "));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyIndexUsingAugmentors() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enablePropertyIndex(props,"foo1",false);
  TestUtil.enablePropertyIndex(props,"subChild/foo2",false);
  root.commit();
  final AtomicInteger indexingCounter=new AtomicInteger(0);
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      indexingCounter.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  final AtomicInteger queryingCounter=new AtomicInteger(0);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      queryingCounter.set(1);
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree node1=createNodeWithType(root.getTree("/"),"node1",TestUtil.NT_TEST);
  node1.setProperty("foo1","bar1");
  node1.addChild("subChild").setProperty("foo2","bar2");
  root.commit();
  assertEquals("Indexing augment should get called once",1,indexingCounter.get());
  String query="SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE [foo1]='bar1'";
  executeQuery(query,SQL2);
  assertEquals("Query augmentor should not get called for property constraints",0,queryingCounter.get());
  query="EXPLAIN " + query;
  List<String> paths=executeQuery(query,SQL2,false);
  assertTrue("property index should have made the index selected (" + paths.get(0) + ")",paths.get(0).contains("/* lucene:test-index("));
  query="SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE [subChild/foo2]='bar2'";
  executeQuery(query,SQL2);
  assertEquals("Query augmentor should not get called for property constraints",0,queryingCounter.get());
  query="EXPLAIN " + query;
  paths=executeQuery(query,SQL2);
  assertTrue("property index should have made the index selected (" + paths.get(0) + ")",paths.get(0).contains("/* lucene:test-index("));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void fulltextIndexUsingAugmentors() throws Exception {
  NodeTypeRegistry.register(root,IOUtils.toInputStream(TestUtil.TEST_NODE_TYPE),"test nodeType");
  Tree props=createIndex(TestUtil.NT_TEST);
  TestUtil.enableForFullText(props,"foo1");
  TestUtil.enableForFullText(props,"subChild/foo2");
  root.commit();
  final AtomicInteger indexingCounter=new AtomicInteger(0);
  factory.indexFieldProvider=new IndexFieldProvider(){
    @Nonnull @Override public Iterable<Field> getAugmentedFields(    String path,    NodeState document,    NodeState indexDefinition){
      indexingCounter.incrementAndGet();
      return IndexFieldProvider.DEFAULT.getAugmentedFields(path,document,indexDefinition);
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  final AtomicInteger queryingCounter=new AtomicInteger(0);
  factory.fulltextQueryTermsProvider=new FulltextQueryTermsProvider(){
    @Override public Query getQueryTerm(    String text,    Analyzer analyzer,    NodeState indexDefinition){
      queryingCounter.set(1);
      return null;
    }
    @Nonnull @Override public Set<String> getSupportedTypes(){
      return Collections.singleton(TestUtil.NT_TEST);
    }
  }
;
  Tree node1=createNodeWithType(root.getTree("/"),"node1",TestUtil.NT_TEST);
  node1.setProperty("foo1","bar1");
  node1.addChild("subChild").setProperty("foo2","bar2");
  root.commit();
  assertEquals("Indexing augment should get called once",1,indexingCounter.get());
  String query="SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE CONTAINS(*, 'bar1')";
  executeQuery(query,SQL2);
  assertEquals("Query augmentor should get called for full text constraints",1,queryingCounter.get());
  queryingCounter.set(0);
  query="EXPLAIN " + query;
  List<String> paths=executeQuery(query,SQL2,false);
  assertEquals("Query augmentor should get called for full text constraints",1,queryingCounter.get());
  assertTrue("property index should have made the index selected (" + paths.get(0) + ")",paths.get(0).contains("/* lucene:test-index("));
  queryingCounter.set(0);
  query="SELECT [jcr:path] from [" + TestUtil.NT_TEST + "] WHERE CONTAINS(*, 'bar2')";
  executeQuery(query,SQL2);
  assertEquals("Query augmentor should get called for full text constraints",1,queryingCounter.get());
  queryingCounter.set(0);
  query="EXPLAIN " + query;
  paths=executeQuery(query,SQL2,false);
  assertEquals("Query augmentor should get called for full text constraints",1,queryingCounter.get());
  assertTrue("property index should have made the index selected (" + paths.get(0) + ")",paths.get(0).contains("/* lucene:test-index("));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void autoFormatUpdate() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  NodeState indexed=HOOK.processCommit(EMPTY_NODE,builder.getNodeState(),CommitInfo.EMPTY);
  IndexDefinition defn=new IndexDefinition(root,indexed.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode("lucene"));
  assertFalse(defn.isOfOldFormat());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void saveDirectoryListing() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder nb=newLuceneIndexDefinitionV2(index,"lucene",of(TYPENAME_STRING));
  nb.setProperty(LuceneIndexConstants.SAVE_DIR_LISTING,true);
  nb.setProperty(LuceneIndexConstants.FULL_TEXT_ENABLED,false);
  nb.setProperty(createProperty(INCLUDE_PROPERTY_NAMES,of("foo"),STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","fox is jumping");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  NodeState dir=indexed.getChildNode("oak:index").getChildNode("lucene").getChildNode(":data");
  assertTrue(dir.hasProperty(OakDirectory.PROP_DIR_LISTING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderServiceTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void enablePrefetchIndexFiles() throws Exception {
  Map<String,Object> config=getDefaultConfig();
  config.put("prefetchIndexFiles",true);
  MockOsgi.activate(service,context.bundleContext(),config);
  IndexCopier indexCopier=service.getIndexCopier();
  assertTrue(indexCopier.isPrefetchEnabled());
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void defaultSetup() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),getDefaultConfig());
  assertNotNull(context.getService(QueryIndexProvider.class));
  assertNotNull(context.getService(Observer.class));
  assertNotNull(context.getService(IndexEditorProvider.class));
  LuceneIndexEditorProvider editorProvider=(LuceneIndexEditorProvider)context.getService(IndexEditorProvider.class);
  assertNotNull(editorProvider.getIndexCopier());
  IndexCopier indexCopier=service.getIndexCopier();
  assertNotNull("IndexCopier should be initialized as CopyOnRead is enabled by default",indexCopier);
  assertTrue(indexCopier.isPrefetchEnabled());
  assertNotNull("CopyOnRead should be enabled by default",context.getService(CopyOnReadStatsMBean.class));
  assertNotNull(context.getService(CacheStatsMBean.class));
  assertTrue(context.getService(Observer.class) instanceof BackgroundObserver);
  assertEquals(InfoStream.NO_OUTPUT,InfoStream.getDefault());
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void disableOpenIndexAsync() throws Exception {
  Map<String,Object> config=getDefaultConfig();
  config.put("enableOpenIndexAsync",false);
  MockOsgi.activate(service,context.bundleContext(),config);
  assertTrue(context.getService(Observer.class) instanceof LuceneIndexProvider);
  MockOsgi.deactivate(service);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexQueryTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepSimilarAsNativeQuery() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where " + "native('lucene', 'mlt?stream.body=/test/a&mlt.fl=:path&mlt.mindf=0&mlt.mintf=0')";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("text","Hello World");
  test.addChild("b").setProperty("text","He said Hello and then the world said Hello as well.");
  test.addChild("c").setProperty("text","He said Hi.");
  root.commit();
  Iterator<String> result=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void descendantTest() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a");
  test.addChild("b");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test')","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertEquals("/test/b",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeLuceneQuery() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where native('lucene', 'title:foo -title:bar')";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("title","foo");
  test.addChild("b").setProperty("title","bar");
  root.commit();
  Iterator<String> result=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepSimilarXPathQuery() throws Exception {
  String query="//element(*, nt:base)[rep:similar(., '/test/a')]";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("text","Hello World Hello World");
  test.addChild("b").setProperty("text","Hello World");
  test.addChild("c").setProperty("text","World");
  test.addChild("d").setProperty("text","Hello");
  test.addChild("e").setProperty("text","World");
  test.addChild("f").setProperty("text","Hello");
  test.addChild("g").setProperty("text","World");
  test.addChild("h").setProperty("text","Hello");
  root.commit();
  Iterator<String> result=executeQuery(query,"xpath").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ischildnodeTest() throws Exception {
  Tree tree=root.getTree("/");
  Tree parents=tree.addChild("parents");
  parents.addChild("p0").setProperty("id","0");
  parents.addChild("p1").setProperty("id","1");
  parents.addChild("p2").setProperty("id","2");
  Tree children=tree.addChild("children");
  children.addChild("c1").setProperty("p","1");
  children.addChild("c2").setProperty("p","2");
  children.addChild("c3").setProperty("p","3");
  children.addChild("c4").setProperty("p","4");
  root.commit();
  Iterator<String> result=executeQuery("select p.[jcr:path], p2.[jcr:path] from [nt:base] as p inner join [nt:base] as p2 on ischildnode(p2, p) where p.[jcr:path] = '/'","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/, /children",result.next());
  assertEquals("/, /jcr:system",result.next());
  assertEquals("/, /oak:index",result.next());
  assertEquals("/, /parents",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void descendantTest2() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("name",asList("Hello","World"),STRINGS);
  test.addChild("b").setProperty("name","Hello");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test') and name='World'","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepSimilarQuery() throws Exception {
  String query="select [jcr:path] from [nt:base] where similar(., '/test/a')";
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("text","Hello World Hello World");
  test.addChild("b").setProperty("text","Hello World");
  test.addChild("c").setProperty("text","World");
  test.addChild("d").setProperty("text","Hello");
  test.addChild("e").setProperty("text","World");
  test.addChild("f").setProperty("text","Hello");
  test.addChild("g").setProperty("text","World");
  test.addChild("h").setProperty("text","Hello");
  root.commit();
  Iterator<String> result=executeQuery(query,"JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertTrue(result.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexQueryTestSQL2Optimisation </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void oak2660() throws Exception {
  final String name="name";
  final String surname="surname";
  final String description="description";
  final String added="added";
  final String yes="yes";
  Tree t;
  t=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(t.exists());
  t.remove();
  root.commit();
  assertFalse(root.getTree("/oak:index/" + TEST_INDEX_NAME).exists());
  t=root.getTree("/");
  Tree indexDefn=createTestIndexNode(t,LuceneIndexConstants.TYPE_LUCENE);
  useV2(indexDefn);
  indexDefn.setProperty(LuceneIndexConstants.TEST_MODE,true);
  Tree props=TestUtil.newRulePropTree(indexDefn,NT_UNSTRUCTURED);
  TestUtil.enablePropertyIndex(props,name,false);
  TestUtil.enableForFullText(props,surname,false);
  TestUtil.enableForFullText(props,description,false);
  TestUtil.enableForOrdered(props,added);
  root.commit();
  List<String> expected=Lists.newArrayList();
  Tree content=root.getTree("/").addChild("content");
  t=content.addChild("test1");
  t.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,NAME);
  t.setProperty(name,yes);
  t.setProperty(surname,yes);
  t.setProperty(description,yes);
  t.setProperty(added,Calendar.getInstance());
  expected.add(t.getPath());
  t=content.addChild("test2");
  t.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,NAME);
  t.setProperty(name,yes);
  t.setProperty(surname,yes);
  t.setProperty(description,"no");
  t.setProperty(added,Calendar.getInstance());
  expected.add(t.getPath());
  t=content.addChild("test3");
  t.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,NAME);
  t.setProperty(name,yes);
  t.setProperty(surname,"no");
  t.setProperty(description,"no");
  t.setProperty(added,Calendar.getInstance());
  expected.add(t.getPath());
  t=content.addChild("test4");
  t.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,NAME);
  t.setProperty(name,"no");
  t.setProperty(surname,yes);
  t.setProperty(description,"no");
  t.setProperty(added,Calendar.getInstance());
  expected.add(t.getPath());
  t=content.addChild("test5");
  t.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,NAME);
  t.setProperty(name,"no");
  t.setProperty(surname,"no");
  t.setProperty(description,yes);
  t.setProperty(added,Calendar.getInstance());
  expected.add(t.getPath());
  t=content.addChild("test6");
  t.setProperty(JCR_PRIMARYTYPE,NT_UNSTRUCTURED,NAME);
  t.setProperty(name,"no");
  t.setProperty(surname,"no");
  t.setProperty(description,"no");
  t.setProperty(added,Calendar.getInstance());
  root.commit();
  for (  String s : expected) {
    assertTrue("wrong initial state",root.getTree(s).exists());
  }
  final String statement="SELECT * " + "FROM [" + NT_UNSTRUCTURED + "] AS c "+ "WHERE "+ "( "+ "c.["+ name+ "] = '"+ yes+ "' "+ "OR CONTAINS(c.["+ surname+ "], '"+ yes+ "') "+ "OR CONTAINS(c.["+ description+ "], '"+ yes+ "') "+ ") "+ "AND ISDESCENDANTNODE(c, '"+ content.getPath()+ "') "+ "ORDER BY "+ added+ " DESC ";
  assertQuery(statement,SQL2,expected);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCursorStability() throws Exception {
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder fooProp=rules.child("nt:base").child(LuceneIndexConstants.PROP_NODE).child("foo");
  fooProp.setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  NodeState before=builder.getNodeState();
  int noOfDocs=LucenePropertyIndex.LUCENE_QUERY_BATCH_SIZE + 10;
  for (int i=0; i < noOfDocs; i++) {
    builder.child("a" + i).setProperty("foo",(long)i);
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.GREATER_OR_EQUAL,PropertyValues.newLong(0L));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  before=indexed;
  builder=indexed.builder();
  for (int i=0; i < noOfDocs - 10; i++) {
    builder.child("a" + i).remove();
  }
  after=builder.getNodeState();
  indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  builder=indexed.builder();
  NodeBuilder idx=builder.child(INDEX_DEFINITIONS_NAME).child("lucene");
  purgeDeletedDocs(idx,new IndexDefinition(root,idx));
  int numDeletes=getDeletedDocCount(idx,new IndexDefinition(root,idx));
  Assert.assertEquals(0,numDeletes);
  tracker.update(builder.getNodeState());
  Assert.assertTrue(Iterators.size(cursor) > 0);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneV1NonExistentProperty() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  NodeBuilder defn=newLuceneIndexDefinition(index,"lucene",ImmutableSet.of("String"));
  defn.setProperty(LuceneIndexConstants.COMPAT_MODE,IndexFormatVersion.V1.getVersion());
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","value-with-dash");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LuceneIndex(tracker,null);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictPath("/",Filter.PathRestriction.EXACT);
  filter.setFullTextConstraint(FullTextParser.parse("foo","value-with*"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,builder.getNodeState());
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
  FilterImpl filter2=createFilter(NT_BASE);
  filter2.restrictPath("/",Filter.PathRestriction.EXACT);
  filter2.setFullTextConstraint(FullTextParser.parse("baz","value-with*"));
  List<IndexPlan> plans2=queryIndex.getPlans(filter2,null,builder.getNodeState());
  Cursor cursor2=queryIndex.query(plans2.get(0),indexed);
  assertFalse(cursor2.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictPath("/",Filter.PathRestriction.EXACT);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,builder.getNodeState());
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene3() throws Exception {
  NodeBuilder index=newLucenePropertyIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"lucene",ImmutableSet.of("foo"),null);
  NodeBuilder rules=index.child(INDEX_RULES);
  NodeBuilder fooProp=rules.child("nt:base").child(LuceneIndexConstants.PROP_NODE).child("foo");
  fooProp.setProperty(LuceneIndexConstants.PROP_PROPERTY_INDEX,true);
  fooProp.setProperty(LuceneIndexConstants.PROP_INCLUDED_TYPE,PropertyType.TYPENAME_STRING);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  builder.child("a").setProperty("foo","bar");
  builder.child("a").child("b").setProperty("foo","bar",Type.NAME);
  builder.child("a").child("b").child("c").setProperty("foo","bar",Type.NAME);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/a",cursor.next().getPath());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLuceneLazyCursor() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  for (int i=0; i < LuceneIndex.LUCENE_QUERY_BATCH_SIZE; i++) {
    builder.child("parent").child("child" + i).setProperty("foo","bar");
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  List<String> paths=copyOf(transform(cursor,new Function<IndexRow,String>(){
    public String apply(    IndexRow input){
      return input.getPath();
    }
  }
));
  assertTrue(!paths.isEmpty());
  assertEquals(LuceneIndex.LUCENE_QUERY_BATCH_SIZE + 1,paths.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLucene2() throws Exception {
  NodeBuilder index=builder.child(INDEX_DEFINITIONS_NAME);
  newLucenePropertyIndexDefinition(index,"lucene",ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  builder.setProperty("foo","bar");
  builder.child("a").setProperty("foo","bar");
  builder.child("a").child("b").setProperty("foo","bar");
  builder.child("a").child("b").child("c").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  IndexTracker tracker=new IndexTracker();
  tracker.update(indexed);
  AdvancedQueryIndex queryIndex=new LucenePropertyIndex(tracker);
  FilterImpl filter=createFilter(NT_BASE);
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  List<IndexPlan> plans=queryIndex.getPlans(filter,null,indexed);
  Cursor cursor=queryIndex.query(plans.get(0),indexed);
  assertTrue(cursor.hasNext());
  assertEquals("/a/b/c",cursor.next().getPath());
  assertEquals("/a/b",cursor.next().getPath());
  assertEquals("/a",cursor.next().getPath());
  assertEquals("/",cursor.next().getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.LucenePropertyIndexTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void preExtractedTextProvider() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  root.commit();
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("fox is jumping","id1");
  MapBasedProvider textProvider=new MapBasedProvider();
  textProvider.write("id1","lion");
  editorProvider.getExtractedTextCache().setExtractedTextProvider(textProvider);
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"text",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertQuery("select * from [nt:base] where CONTAINS(*, 'fox ')",asList("/test/text/jcr:content"));
  assertEquals(0,textProvider.accessCount);
  testBlob.resetState();
  root.getTree(idx.getPath()).setProperty(IndexConstants.REINDEX_PROPERTY_NAME,true);
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertQuery("select * from [nt:base] where CONTAINS(*, 'lion ')",asList("/test/text/jcr:content"));
  assertEquals(1,textProvider.accessCount);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void excludedBlobContentNotAccessed() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("<?xml version=\"1.0\" encoding=\"UTF-8\"?><msg>sky is blue</msg>");
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"zip",testBlob,"application/zip");
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertEquals(0,testBlob.readByteCount());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void explainScoreTest() throws Exception {
  Tree idx=createIndex("test1",of("propa"));
  idx.addChild(PROP_NODE).addChild("propa");
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").setProperty("propa","a");
  root.commit();
  String query="select [oak:scoreExplanation] from [nt:base] where propa='a'";
  List<String> result=executeQuery(query,SQL2,false,false);
  assertEquals(1,result.size());
  assertTrue(result.get(0).contains("(MATCH)"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void preExtractedTextCache() throws Exception {
  Tree idx=createFulltextIndex(root.getTree("/"),"test");
  TestUtil.useV2(idx);
  root.commit();
  AccessStateProvidingBlob testBlob=new AccessStateProvidingBlob("fox is jumping","id1");
  Tree test=root.getTree("/").addChild("test");
  createFileNode(test,"text",testBlob,"text/plain");
  root.commit();
  editorProvider.getExtractedTextCache().resetCache();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text2",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertEquals(2,testBlob.accessCount);
  testBlob.resetState();
  editorProvider.getExtractedTextCache().resetCache();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text3",testBlob,"text/plain");
  createFileNode(test,"text4",testBlob,"text/plain");
  root.commit();
  assertTrue(testBlob.isStreamAccessed());
  assertEquals(1,testBlob.accessCount);
  testBlob.resetState();
  test=root.getTree("/").addChild("test");
  createFileNode(test,"text5",testBlob,"text/plain");
  root.commit();
  assertFalse(testBlob.isStreamAccessed());
  assertEquals(0,testBlob.accessCount);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.NodeStateAnalyzerFactoryTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerByComposition_FileResource() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  NodeBuilder filters=nb.child(ANL_FILTERS);
  NodeBuilder stop=filters.child("stop");
  stop.setProperty("words","set1.txt, set2.txt");
  createFileNode(stop,"set1.txt",newCharArraySet("foo","bar"));
  createFileNode(stop,"set2.txt",newCharArraySet("foo1","bar1"));
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(1,analyzer.getFilters().length);
  assertEquals(StopFilterFactory.class.getName(),analyzer.getFilters()[0].getClassArg());
  StopFilterFactory sff=(StopFilterFactory)analyzer.getFilters()[0];
  assertTrue(sff.getStopWords().contains("foo"));
  assertTrue(sff.getStopWords().contains("foo1"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerViaReflection() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.setProperty(ANL_CLASS,TestAnalyzer.class.getName());
  TestAnalyzer analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertNotNull(analyzer);
  assertEquals(LuceneIndexConstants.VERSION,analyzer.matchVersion);
  nb.setProperty(LuceneIndexConstants.ANL_LUCENE_MATCH_VERSION,Version.LUCENE_31.toString());
  analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertEquals("Version field not picked from config",Version.LUCENE_31,analyzer.matchVersion);
  byte[] stopWords=newCharArraySet("foo","bar");
  createFileNode(nb,LuceneIndexConstants.ANL_STOPWORDS,stopWords);
  analyzer=(TestAnalyzer)factory.createInstance(nb.getNodeState());
  assertTrue("Configured stopword set not used",analyzer.getStopwordSet().contains("foo"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void analyzerByComposition_TokenFilter() throws Exception {
  NodeBuilder nb=EMPTY_NODE.builder();
  nb.child(ANL_TOKENIZER).setProperty(ANL_NAME,"whitespace");
  NodeBuilder filters=nb.child(ANL_FILTERS);
  filters.setProperty(OAK_CHILD_ORDER,ImmutableList.of("stop","LowerCase"),NAMES);
  filters.child("LowerCase").setProperty(ANL_NAME,"LowerCase");
  filters.child("LowerCase").setProperty(JCR_PRIMARYTYPE,"nt:unstructured");
  filters.child("stop").setProperty(ANL_LUCENE_MATCH_VERSION,Version.LUCENE_31.toString());
  TokenizerChain analyzer=(TokenizerChain)factory.createInstance(nb.getNodeState());
  assertEquals(2,analyzer.getFilters().length);
  assertEquals(StopFilterFactory.class.getName(),analyzer.getFilters()[0].getClassArg());
  assertEquals(LowerCaseFilterFactory.class.getName(),analyzer.getFilters()[1].getClassArg());
  assertTrue(analyzer.getFilters()[0].isExplicitLuceneMatchVersion());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.OakDirectoryTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompatibility() throws Exception {
  builder.setProperty(LuceneIndexConstants.BLOB_SIZE,OakDirectory.DEFAULT_BLOB_SIZE);
  Directory dir=createDir(builder,false);
  byte[] data=assertWrites(dir,OakDirectory.DEFAULT_BLOB_SIZE);
  NodeBuilder testNode=builder.child(INDEX_DATA_CHILD_NAME).child("test");
  testNode.removeProperty(PROP_BLOB_SIZE);
  IndexInput i=dir.openInput("test",IOContext.DEFAULT);
  assertEquals(fileSize,i.length());
  byte[] result=new byte[fileSize];
  i.readBytes(result,0,result.length);
  assertTrue(Arrays.equals(data,result));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.lucene.util.NodeStateFacetsConfigTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultivaluedDimConfig() throws Exception {
  NodeStateFacetsConfig nodeStateFacetsConfig=new NodeStateFacetsConfig(builder);
  String dimension="foo";
  nodeStateFacetsConfig.setMultiValued(dimension,true);
  FacetsConfig.DimConfig dimConfig=nodeStateFacetsConfig.getDimConfig(dimension);
  assertNotNull(dimConfig);
  assertTrue(dimConfig.multiValued);
  NodeStateFacetsConfig nodeStateFacetsConfig2=new NodeStateFacetsConfig(builder);
  FacetsConfig.DimConfig dimConfig2=nodeStateFacetsConfig2.getDimConfig(dimension);
  assertNotNull(dimConfig2);
  assertTrue(dimConfig2.multiValued);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.nodetype.NodeTypeIndexQueryTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void oak3371() throws Exception {
  setTraversalEnabled(false);
  Tree t, t1;
  NodeUtil n=new NodeUtil(root.getTree("/oak:index"));
  createIndexDefinition(n,"nodeType",false,new String[]{JCR_PRIMARYTYPE},new String[]{NT_UNSTRUCTURED});
  root.commit();
  t=root.getTree("/");
  t=child(t,"test",NT_UNSTRUCTURED);
  t1=child(t,"a",NT_UNSTRUCTURED);
  t1.setProperty("foo","bar");
  child(t,"b",NT_UNSTRUCTURED);
  root.commit();
  List<String> plan;
  plan=executeQuery("explain SELECT * FROM [nt:unstructured] " + "WHERE ISDESCENDANTNODE([/test]) " + "AND CONTAINS(foo, 'bar')",Query.JCR_SQL2,false);
  assertEquals(1,plan.size());
  assertTrue(plan.get(0).contains("no-index"));
  assertEquals("[nt:unstructured] as [nt:unstructured] /* no-index\n" + "  where (isdescendantnode([nt:unstructured], [/test]))\n" + "  and (contains([nt:unstructured].[foo], 'bar')) */",plan.get(0));
  plan=executeQuery("explain SELECT * FROM [nt:unstructured] " + "WHERE ISDESCENDANTNODE([/test]) " + "AND NOT CONTAINS(foo, 'bar')",Query.JCR_SQL2,false);
  assertEquals(1,plan.size());
  assertTrue(plan.get(0).contains("no-index"));
  assertEquals("[nt:unstructured] as [nt:unstructured] /* no-index\n" + "  where (isdescendantnode([nt:unstructured], [/test]))\n" + "  and (not contains([nt:unstructured].[foo], 'bar')) */",plan.get(0));
  plan=executeQuery("explain SELECT * FROM [nt:unstructured] " + "WHERE ISDESCENDANTNODE([/test]) " + "AND NOT NOT CONTAINS(foo, 'bar')",Query.JCR_SQL2,false);
  assertEquals(1,plan.size());
  assertTrue(plan.get(0).contains("no-index"));
  assertEquals("[nt:unstructured] as [nt:unstructured] /* no-index\n" + "  where (isdescendantnode([nt:unstructured], [/test]))\n" + "  and (contains([nt:unstructured].[foo], 'bar')) */",plan.get(0));
  setTraversalEnabled(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.MultiPropertyOrTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void query() throws Exception {
  Tree t=root.getTree("/");
  t.addChild("a").setProperty("x","foo");
  t.addChild("b").setProperty("y","bar");
  t.addChild("c").setProperty("z","foo");
  root.commit();
  setTraversalEnabled(false);
  assertQuery("select [jcr:path] from [nt:base] where [x] is not null",ImmutableList.of("/a"));
  List<String> lines=executeQuery("explain select [jcr:path] from [nt:base] where [x] is not null",Query.JCR_SQL2);
  assertEquals(1,lines.size());
  assertTrue(lines.get(0).contains("property xyz IS NOT NULL"));
  lines=executeQuery("explain select [jcr:path] from [nt:base] where [x] = 'foo' OR [y] = 'foo'",Query.JCR_SQL2);
  assertEquals(1,lines.size());
  assertTrue(lines.get(0).contains("property xyz = foo"));
  lines=executeQuery("explain select [jcr:path] from [nt:base] where [x] = 'foo' OR [y] = 'bar'",Query.JCR_SQL2);
  assertEquals(1,lines.size());
  assertTrue(lines.get(0),lines.get(0).contains("property xyz IN (foo, bar)"));
  assertQuery("select [jcr:path] from [nt:base] where [x] = 'foo' OR [y] = 'foo'",ImmutableList.of("/a"));
  assertQuery("select [jcr:path] from [nt:base] where [x] = 'foo' OR [z] = 'foo'",ImmutableList.of("/a","/c"));
  assertQuery("select [jcr:path] from [nt:base] where [x] = 'foo' OR [y] = 'bar'",ImmutableList.of("/a","/b"));
  setTraversalEnabled(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.OrderedPropertyIndexEditorProviderTest </h4><pre class="type-9 type-7 type-6 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void withIndexMultipleNodes() throws RepositoryException, CommitFailedException {
  final int threshold=5;
  final int nodes=16;
  final int traces=nodes / threshold;
  OrderedPropertyIndexEditorProvider.setThreshold(threshold);
  final List<String> expected=Collections.nCopies(traces,OrderedIndex.DEPRECATION_MESSAGE);
  NodeBuilder root=InitialContent.INITIAL_CONTENT.builder();
  createIndexDef(root);
  custom.starting();
  for (int i=0; i < nodes; i++) {
    NodeState before=root.getNodeState();
    root.child("n" + i).setProperty(indexedProperty,"dead" + i);
    NodeState after=root.getNodeState();
    root=hook.processCommit(before,after,CommitInfo.EMPTY).builder();
  }
  assertThat(custom.getLogs(),is(expected));
  custom.finished();
  assertFalse(root.getChildNode(INDEX_DEFINITIONS_NAME).getChildNode(indexName).getChildNode(INDEX_CONTENT_NODE_NAME).exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void withIndexDefSingleNode() throws RepositoryException, CommitFailedException {
  NodeBuilder root=InitialContent.INITIAL_CONTENT.builder();
  createIndexDef(root);
  NodeState before=root.getNodeState();
  root.child("n1").setProperty(indexedProperty,"dead");
  NodeState after=root.getNodeState();
  custom.starting();
  root=hook.processCommit(before,after,CommitInfo.EMPTY).builder();
  assertEquals(1,custom.getLogs().size());
  assertThat(custom.getLogs(),hasItem(OrderedIndex.DEPRECATION_MESSAGE));
  custom.finished();
  NodeBuilder b=root.getChildNode(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE).getChildNode(indexName).getChildNode(IndexConstants.INDEX_CONTENT_NODE_NAME);
  assertFalse("nothing should have been touched under the actual index",b.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexQueryTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void bindVariableTest() throws Exception {
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("hello").setProperty("id","1");
  test.addChild("world").setProperty("id","2");
  root.commit();
  Map<String,PropertyValue> sv=new HashMap<String,PropertyValue>();
  sv.put("id",PropertyValues.newString("1"));
  Iterator<? extends ResultRow> result;
  result=executeQuery("select * from [nt:base] where id = $id",SQL2,sv).getRows().iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/hello",result.next().getPath());
  sv.put("id",PropertyValues.newString("2"));
  result=executeQuery("select * from [nt:base] where id = $id",SQL2,sv).getRows().iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/world",result.next().getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void costMaxEstimation() throws Exception {
  NodeState root=EmptyNodeState.EMPTY_NODE;
  NodeBuilder builder=root.builder();
  createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  NodeState before=builder.getNodeState();
  int nodes=101;
  int levels=12;
  NodeBuilder data=builder;
  for (int i=0; i < levels; i++) {
    data=data.child("l" + i);
  }
  for (int i=0; i < nodes; i++) {
    NodeBuilder c=data.child("c_" + i);
    c.setProperty("foo","azerty");
  }
  for (int i=0; i < 10000; i++) {
    data.child("cx_" + i);
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  double cost=lookup.getCost(f,"foo",PropertyValues.newString("azerty"));
  double traversal=new TraversingIndex().getCost(f,indexed);
  assertTrue("Estimated cost for " + nodes + " nodes should not be higher than traversal ("+ cost+ " < "+ traversal+ ")",cost < traversal);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void traversalWarning() throws Exception {
  ListAppender appender=createAndRegisterAppender();
  int testDataSize=ContentMirrorStoreStrategy.TRAVERSING_WARN;
  NodeState indexed=createTestData(testDataSize);
  assertEquals(testDataSize,getResultSize(indexed,"foo","bar"));
  assertFalse(appender.list.isEmpty());
  appender.list.clear();
  testDataSize=100;
  indexed=createTestData(100);
  assertEquals(testDataSize,getResultSize(indexed,"foo","bar"));
  assertTrue("Warning should not be logged for traversing " + testDataSize,appender.list.isEmpty());
  deregisterAppender(appender);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPathIncludeExclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a/b"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("a").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("abc"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("test/a"),find(lookup,"foo","abc",f));
  PropertyIndexPlan plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test/a/x");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY != plan.getCost());
  f.setPath("/test/a/b");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test/a");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void costEstimation() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty("entryCount",-1);
  NodeState before=builder.getNodeState();
  for (int i=0; i < MANY; i++) {
    builder.child("n" + i).setProperty("foo","x" + i % 20);
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  double cost;
  cost=lookup.getCost(f,"foo",PropertyValues.newString("x1"));
  assertTrue("cost: " + cost,cost >= 6.5 && cost <= 7.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2")));
  assertTrue("cost: " + cost,cost >= 11.5 && cost <= 12.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2","x3","x4","x5")));
  assertTrue("cost: " + cost,cost >= 26.5 && cost <= 27.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2","x3","x4","x5","x6","x7","x8","x9","x0")));
  assertTrue("cost: " + cost,cost >= 51.5 && cost <= 52.5);
  cost=lookup.getCost(f,"foo",null);
  assertTrue("cost: " + cost,cost >= MANY);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPathExcludeInclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/test/a/b"),Type.STRINGS));
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("a").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  try {
    HOOK.processCommit(before,after,CommitInfo.EMPTY);
    assertTrue(false);
  }
 catch (  IllegalStateException expected) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyLookup() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty("entryCount",-1);
  NodeState before=builder.getNodeState();
  builder.child("a").setProperty("foo","abc");
  builder.child("b").setProperty("foo",Arrays.asList("abc","def"),Type.STRINGS);
  for (int i=0; i < MANY; i++) {
    builder.child("n" + i).setProperty("foo","xyz");
  }
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("a","b"),find(lookup,"foo","abc",f));
  assertEquals(ImmutableSet.of("b"),find(lookup,"foo","def",f));
  assertEquals(ImmutableSet.of(),find(lookup,"foo","ghi",f));
  assertEquals(MANY,find(lookup,"foo","xyz",f).size());
  assertEquals(MANY + 2,find(lookup,"foo",null,f).size());
  double cost;
  cost=lookup.getCost(f,"foo",PropertyValues.newString("xyz"));
  assertTrue("cost: " + cost,cost >= MANY);
  cost=lookup.getCost(f,"foo",null);
  assertTrue("cost: " + cost,cost >= MANY);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPathExclude() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("abc"));
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  assertEquals(ImmutableSet.of("test/b"),find(lookup,"foo","abc",f));
  PropertyIndexPlan plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
  f.setPath("/test2");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY != plan.getCost());
  f.setPath("/test");
  plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This is essentially same test as {@link #costEstimation()} with one difference that it uses
 * path constraint in query and creates similar trees under 2 branches {@code path1} and {@code path2}.
 * The cost estimation is then verified to be same as that in {@code costEstimation} for query under {@code path1}
 * @throws Exception
 */
@Test public void pathBasedCostEstimation() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty("entryCount",-1);
  builder.setProperty(COUNT_PROPERTY_NAME,(long)MANY * 2,Type.LONG);
  NodeState before=builder.getNodeState();
  NodeBuilder path1=builder.child("path1");
  NodeBuilder path2=builder.child("path2");
  for (int i=0; i < MANY; i++) {
    path1.child("n" + i).setProperty("foo","x" + i % 20);
    path2.child("n" + i).setProperty("foo","x" + i % 20);
  }
  path1.setProperty(COUNT_PROPERTY_NAME,(long)MANY,Type.LONG);
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictPath("/path1",Filter.PathRestriction.ALL_CHILDREN);
  PropertyIndexLookup lookup=new PropertyIndexLookup(indexed);
  double cost;
  cost=lookup.getCost(f,"foo",PropertyValues.newString("x1"));
  assertTrue("cost: " + cost,cost >= 7.5 && cost <= 8.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2")));
  assertTrue("cost: " + cost,cost >= 14.5 && cost <= 15.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2","x3","x4","x5")));
  assertTrue("cost: " + cost,cost >= 34.5 && cost <= 35.5);
  cost=lookup.getCost(f,"foo",PropertyValues.newString(Arrays.asList("x1","x2","x3","x4","x5","x6","x7","x8","x9","x0")));
  assertTrue("cost: " + cost,cost >= 81.5 && cost <= 82.5);
  cost=lookup.getCost(f,"foo",null);
  assertTrue("cost: " + cost,cost >= MANY);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPathMismatch() throws Exception {
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder index=createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME),"foo",true,false,ImmutableSet.of("foo"),null);
  index.setProperty(createProperty(PROP_INCLUDED_PATHS,of("/test/a"),Type.STRINGS));
  index.setProperty(createProperty(PROP_EXCLUDED_PATHS,of("/test/a/b"),Type.STRINGS));
  NodeState before=builder.getNodeState();
  builder.child("test").child("a").setProperty("foo","abc");
  builder.child("test").child("a").child("b").setProperty("foo","abc");
  NodeState after=builder.getNodeState();
  NodeState indexed=HOOK.processCommit(before,after,CommitInfo.EMPTY);
  FilterImpl f=createFilter(indexed,NT_BASE);
  f.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  PropertyIndexPlan plan=new PropertyIndexPlan("plan",root,index.getNodeState(),f);
  assertTrue(Double.POSITIVE_INFINITY == plan.getCost());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.RelativePathTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void query() throws Exception {
  Tree t=root.getTree("/");
  t.addChild("a").addChild("n").setProperty("myProp","foo");
  t.addChild("b").addChild("n").setProperty("myProp","bar");
  t.addChild("c").addChild("x").setProperty("myProp","foo");
  t.setProperty("myProp","foo");
  root.commit();
  setTraversalEnabled(false);
  assertQuery("select [jcr:path] from [nt:base] where [n/myProp] is not null",ImmutableList.of("/a","/b"));
  List<String> lines=executeQuery("explain select [jcr:path] from [nt:base] where [n/myProp] is not null",Query.JCR_SQL2);
  assertEquals(1,lines.size());
  assertTrue(lines.get(0).contains("property myProp"));
  assertQuery("select [jcr:path] from [nt:base] where [n/myProp] = 'foo'",ImmutableList.of("/a"));
  setTraversalEnabled(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.ValuePathTupleTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void greaterThanPredicate(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.GreaterThanPredicate("b")).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertEquals("e",filtered.next().getValue());
  assertEquals("f",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void greaterThanEqualaPredicate(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.GreaterThanPredicate("b",true)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertEquals("e",filtered.next().getValue());
  assertEquals("f",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void betweenIncludeStart(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.BetweenPredicate("b","d",true,false)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void betweenNoIncludes(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.BetweenPredicate("b","d",false,false)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("c",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void lessThanEqualPredicate(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.LessThanPredicate("e",true)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("a",filtered.next().getValue());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertEquals("e",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void betweenIncludeBoth(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.BetweenPredicate("b","d",true,true)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void lessThanPredicate(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.LessThanPredicate("e")).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("a",filtered.next().getValue());
  assertEquals("b",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertFalse(filtered.hasNext());
  data=ImmutableList.of(new ValuePathTuple("f","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("a","foobar"));
  filtered=Iterables.filter(data,new ValuePathTuple.LessThanPredicate("e")).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("d",filtered.next().getValue());
  assertEquals("c",filtered.next().getValue());
  assertEquals("b",filtered.next().getValue());
  assertEquals("a",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void betweenIncludeEnd(){
  List<ValuePathTuple> data=ImmutableList.of(new ValuePathTuple("a","foobar"),new ValuePathTuple("b","foobar"),new ValuePathTuple("c","foobar"),new ValuePathTuple("d","foobar"),new ValuePathTuple("e","foobar"),new ValuePathTuple("f","foobar"));
  Iterator<ValuePathTuple> filtered=Iterables.filter(data,new ValuePathTuple.BetweenPredicate("b","d",false,true)).iterator();
  assertTrue(filtered.hasNext());
  assertEquals("c",filtered.next().getValue());
  assertEquals("d",filtered.next().getValue());
  assertFalse(filtered.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.property.strategy.ContentMirrorStoreStrategyTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUnique() throws CommitFailedException {
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeState root=EMPTY_NODE;
  NodeBuilder indexMeta=root.builder();
  NodeBuilder index=indexMeta.child(INDEX_CONTENT_NODE_NAME);
  store.update(index,"a",null,null,EMPTY,KEY);
  store.update(index,"b",null,null,EMPTY,KEY);
  Assert.assertTrue("ContentMirrorStoreStrategy should guarantee uniqueness on insert",store.count(root,indexMeta.getNodeState(),Collections.singleton("key"),2) > 1);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIndexCountersUsageWithPathRestriction(){
  final String subPathName="sub-path";
  final int filteredNodeFactor=2;
  final long repoTreeApproxNodeCount=50000;
  final long repoSubPathApproxNodeCount=repoTreeApproxNodeCount / filteredNodeFactor;
  final FilterImpl filter=new FilterImpl();
  filter.restrictPath("/" + subPathName,Filter.PathRestriction.ALL_CHILDREN);
  final long approxNodeCount=100;
  final long approxKeyCount=50;
  final long entryCount=60 * DEFAULT_RESOLUTION;
  final long keyCount=150;
  final int maxTraversal=200;
  final String keyValue=KEY.iterator().next();
  final String approxPropName=COUNT_PROPERTY_PREFIX + "gen_uuid";
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.setProperty(COUNT_PROPERTY_NAME,repoTreeApproxNodeCount,Type.LONG);
  NodeBuilder subPath=rootBuilder.child(subPathName);
  subPath.setProperty(COUNT_PROPERTY_NAME,repoSubPathApproxNodeCount,Type.LONG);
  NodeState root=rootBuilder.getNodeState();
  NodeBuilder indexMeta=rootBuilder.child("propIndex");
  NodeBuilder index=indexMeta.child(INDEX_CONTENT_NODE_NAME);
  NodeBuilder key=index.child(keyValue);
  index.setProperty(approxPropName,approxNodeCount,Type.LONG);
  assertInRange("Approximate count not used for is-not-null query",approxNodeCount,filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),null,maxTraversal));
  key.setProperty(approxPropName,approxKeyCount,Type.LONG);
  assertInRange("Approximate count not used for key=value query",approxKeyCount,filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(ENTRY_COUNT_PROPERTY_NAME,entryCount,Type.LONG);
  assertInRange("Entry count not used even when present for is-not-null query",entryCount,filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),null,maxTraversal));
  Assert.assertTrue("Rough key count not considered for key=value query",entryCount > filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(KEY_COUNT_PROPERTY_NAME,keyCount,Type.LONG);
  Assert.assertTrue("Key count not considered for key=value query",entryCount > filteredNodeFactor * store.count(filter,root,indexMeta.getNodeState(),KEY,maxTraversal));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIndexCountersUsageWithoutPathRestriction(){
  final long approxNodeCount=50;
  final long approxKeyCount=25;
  final long entryCount=30 * DEFAULT_RESOLUTION;
  final long keyCount=75;
  final int maxTraversal=200;
  final String keyValue=KEY.iterator().next();
  final String approxPropName=COUNT_PROPERTY_PREFIX + "gen_uuid";
  IndexStoreStrategy store=new ContentMirrorStoreStrategy();
  NodeState root=EMPTY_NODE;
  NodeBuilder indexMeta=root.builder();
  NodeBuilder index=indexMeta.child(INDEX_CONTENT_NODE_NAME);
  NodeBuilder key=index.child(keyValue);
  index.setProperty(approxPropName,approxNodeCount,Type.LONG);
  Assert.assertEquals("Approximate count not used for is-not-null query",approxNodeCount,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
  key.setProperty(approxPropName,approxKeyCount,Type.LONG);
  Assert.assertEquals("Approximate count not used for key=value query",approxKeyCount,store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(ENTRY_COUNT_PROPERTY_NAME,entryCount,Type.LONG);
  Assert.assertEquals("Entry count not used even when present for is-not-null query",entryCount,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
  Assert.assertTrue("Rough key count not considered for key=value query",entryCount > store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(KEY_COUNT_PROPERTY_NAME,keyCount,Type.LONG);
  Assert.assertTrue("Key count not considered for key=value query",entryCount > store.count(root,indexMeta.getNodeState(),KEY,maxTraversal));
  indexMeta.setProperty(ENTRY_COUNT_PROPERTY_NAME,(long)-1,Type.LONG);
  Assert.assertEquals("Entry count not used even when present for is-not-null query",0,store.count(root,indexMeta.getNodeState(),null,maxTraversal));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.index.SolrCommitHookIT </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveNode() throws Exception {
  Root r=createRoot();
  r.getTree("/").addChild("testRemoveNode").setProperty("foo","bar");
  r.commit();
  SolrQuery query=new SolrQuery();
  query.setQuery("path_exact:\\/testRemoveNode");
  assertTrue("item with id:testRemoveNode was not found in the index",server.query(query).getResults().size() > 0);
  r.getTree("/").getChild("testRemoveNode").remove();
  r.commit();
  assertTrue("item with id:testRemoveNode was found in the index",server.query(query).getResults().size() == 0);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddSomeNodes() throws Exception {
  Root r=createRoot();
  r.getTree("/").addChild("a").addChild("b").addChild("doc1").setProperty("text","hit that hot hat tattoo");
  r.getTree("/").getChild("a").addChild("c").addChild("doc2").setProperty("text","it hits hot hats");
  r.getTree("/").getChild("a").getChild("b").addChild("doc3").setProperty("text","tattoos hate hot hits");
  r.getTree("/").getChild("a").getChild("b").addChild("doc4").setProperty("text","hats tattoos hit hot");
  r.commit();
  SolrQuery query=new SolrQuery();
  query.setQuery("*:*");
  QueryResponse queryResponse=server.query(query);
  assertTrue("no documents were indexed",queryResponse.getResults().size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.index.SolrIndexHookIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSomeNodesCreationWithFullText() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("oak:index").child("solr").setProperty(JCR_PRIMARYTYPE,"oak:QueryIndexDefinition").setProperty("type","solr");
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","bar");
  builder.child("a").setProperty("foo","bar");
  builder.child("a").child("b").setProperty("foo","bar");
  builder.child("a").child("b").child("c").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  QueryIndex queryIndex=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  filter.restrictFulltextCondition("bar");
  Cursor cursor=queryIndex.query(filter,indexed);
  Set<String> paths=newHashSet();
  while (cursor.hasNext()) {
    paths.add(cursor.next().getPath());
  }
  assertTrue(paths.remove("/test"));
  assertTrue(paths.remove("/a"));
  assertTrue(paths.remove("/a/b"));
  assertTrue(paths.remove("/a/b/c"));
  assertTrue(paths.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleNodeCreation() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("oak:index").child("solr").setProperty(JCR_PRIMARYTYPE,"oak:QueryIndexDefinition").setProperty("type","solr");
  NodeState before=builder.getNodeState();
  builder.child("newnode").setProperty("prop","val");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  QueryIndex queryIndex=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictPath("/newnode",Filter.PathRestriction.EXACT);
  filter.restrictProperty("prop",Operator.EQUAL,PropertyValues.newString("val"));
  Cursor cursor=queryIndex.query(filter,indexed);
  assertNotNull(cursor);
  assertTrue("no results found",cursor.hasNext());
  IndexRow next=cursor.next();
  assertNotNull("first returned item should not be null",next);
  assertEquals("/newnode",next.getPath());
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPropertyAddition() throws Exception {
  NodeState root=EMPTY_NODE;
  NodeBuilder builder=root.builder();
  builder.child("oak:index").child("solr").setProperty(JCR_PRIMARYTYPE,"oak:QueryIndexDefinition").setProperty("type","solr");
  NodeState before=builder.getNodeState();
  builder.child("test").setProperty("foo","bar");
  NodeState after=builder.getNodeState();
  NodeState indexed=hook.processCommit(before,after,CommitInfo.EMPTY);
  QueryIndex queryIndex=new SolrQueryIndex("solr",server,configuration);
  FilterImpl filter=new FilterImpl(mock(SelectorImpl.class),"",new QueryEngineSettings());
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  Cursor cursor=queryIndex.query(filter,indexed);
  assertNotNull(cursor);
  assertTrue("no results found",cursor.hasNext());
  IndexRow next=cursor.next();
  assertNotNull("first returned item should not be null",next);
  assertEquals("/test",next.getPath());
  assertNotNull(next.getValue("foo"));
  assertEquals(PropertyValues.newString("[bar]"),next.getValue("foo"));
  assertFalse(cursor.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.FilterQueryParserTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCollapseJcrContentNodes() throws Exception {
  String query="select [jcr:path], [jcr:score], * from [nt:hierarchy] as a where isdescendantnode(a, '/')";
  Filter filter=mock(Filter.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean collapseJcrContentNodes(){
      return true;
    }
  }
;
  when(filter.getQueryStatement()).thenReturn(query);
  SolrQuery solrQuery=FilterQueryParser.getQuery(filter,null,configuration);
  assertNotNull(solrQuery);
  String[] filterQueries=solrQuery.getFilterQueries();
  assertTrue(Arrays.asList(filterQueries).contains("{!collapse field=" + configuration.getCollapsedPathField() + " min="+ configuration.getPathDepthField()+ " hint=top_fc nullPolicy=expand}"));
  assertEquals("*:*",solrQuery.get("q"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAllChildrenQueryParsing() throws Exception {
  String query="select [jcr:path], [jcr:score], * from [nt:hierarchy] as a where isdescendantnode(a, '/')";
  Filter filter=mock(Filter.class);
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPathRestrictions(){
      return true;
    }
  }
;
  when(filter.getQueryStatement()).thenReturn(query);
  Filter.PathRestriction pathRestriction=Filter.PathRestriction.ALL_CHILDREN;
  when(filter.getPathRestriction()).thenReturn(pathRestriction);
  when(filter.getPath()).thenReturn("/");
  SolrQuery solrQuery=FilterQueryParser.getQuery(filter,null,configuration);
  assertNotNull(solrQuery);
  String[] filterQueries=solrQuery.getFilterQueries();
  assertTrue(Arrays.asList(filterQueries).contains(configuration.getFieldForPathRestriction(pathRestriction) + ":\\/"));
  assertEquals("*:*",solrQuery.get("q"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.LMSEstimatorTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleUpdates() throws Exception {
  LMSEstimator lmsEstimator=new LMSEstimator();
  Filter filter=mock(Filter.class);
  FullTextExpression fte=new FullTextTerm("foo","bar",false,false,"");
  when(filter.getFullTextConstraint()).thenReturn(fte);
  SolrDocumentList docs=new SolrDocumentList();
  lmsEstimator.update(filter,docs);
  long actualCount=10;
  docs.setNumFound(actualCount);
  long estimate=lmsEstimator.estimate(filter);
  long diff=actualCount - estimate;
  lmsEstimator.update(filter,docs);
  long estimate2=lmsEstimator.estimate(filter);
  long diff2=actualCount - estimate2;
  assertTrue(diff2 < diff);
  lmsEstimator.update(filter,docs);
  long estimate3=lmsEstimator.estimate(filter);
  assertEquals(estimate3,estimate2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.SolrIndexQueryTestIT </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ischildnodeTest2() throws Exception {
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("jcr:resource").addChild("x");
  test.addChild("resource");
  root.commit();
  Iterator<String> strings=executeQuery("select [jcr:path] from [nt:base] as b where ischildnode(b, '/test')","JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/jcr:resource",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/resource",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortingOnProperty() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  Tree a=test.addChild("a");
  a.setProperty("foo","bar");
  a.addChild("c").setProperty("foo","car");
  Tree b=test.addChild("b");
  b.setProperty("foo","tar");
  b.addChild("d").setProperty("foo","jar");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test') order by [foo] asc","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/a/c",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b/d",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeMLTQueryWithStream() throws Exception {
  assumeTrue(!System.getProperty("java.version").startsWith("1.8"));
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', 'mlt?stream.body=world is nice today&mlt.fl=name&mlt.mindf=0&mlt.mintf=0')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello World, today weather is nice");
  test.addChild("b").setProperty("name","Cheers World, today weather is quite nice");
  test.addChild("c").setProperty("name","Halo Welt, today sky is cloudy");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/c",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void descendantTest2() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").addChild("c").setProperty("name",asList("Hello","World"),STRINGS);
  test.addChild("b").setProperty("name","Hello");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test') and name='World'","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a/c",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCollapsedJcrContentNodeDescandants() throws Exception {
  Tree index=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(index.exists());
  index.setProperty("collapseJcrContentNodes",true);
  index.setProperty("reindex",true);
  root.commit();
  Tree test=root.getTree("/").addChild("test");
  Tree content=test.addChild("content");
  Tree content1=content.addChild("sample1").addChild("jcr:content");
  content1.setProperty("foo","bar");
  content1.addChild("text").setProperty("text","bar");
  Tree content2=content.addChild("sample2").addChild("jcr:content");
  content2.setProperty("foo","bar");
  content2.addChild("text").setProperty("text","bar");
  root.commit();
  String xpath="/jcr:root/test/content//element(*, nt:base)[jcr:contains(., 'bar')]";
  Iterator<String> result=executeQuery(xpath,XPATH).iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/content/sample1/jcr:content",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/content/sample2/jcr:content",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeSolrLocalParams() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', '_query_:\"{!dismax qf=catch_all q.op=OR}hello world\"')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello");
  test.addChild("b").setProperty("name","World");
  test.addChild("c");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/b",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testCompositeRepExcerpt() throws Exception {
  String sqlQuery="select [jcr:path], [jcr:score], [rep:excerpt] from [nt:base] as a " + "where (contains([jcr:content/*], 'square') or contains([jcr:content/jcr:title], 'square')" + " or contains([jcr:content/jcr:description], 'square')) and isdescendantnode(a, '/test') "+ "order by [jcr:score] desc";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  Tree child=test.addChild("child");
  Tree a=child.addChild("a");
  a.setProperty("jcr:title","Hello World, today square is nice");
  Tree b=child.addChild("b");
  b.setProperty("jcr:description","Cheers World, today weather is squary nice");
  Tree c=child.addChild("c");
  c.setProperty("jcr:title","Halo Welt, today sky is square");
  root.commit();
  Iterator<String> strings=executeQuery(sqlQuery,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertTrue(strings.next().startsWith("/test/child,"));
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotNullAndNative() throws Exception {
  Tree index=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(index.exists());
  index.setProperty("rows",10000);
  index.setProperty("reindex",true);
  root.commit();
  Tree content=root.getTree("/").addChild("content");
  Tree a=content.addChild("a");
  a.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  a.setProperty("foo","doc doc doc");
  a.setProperty("loc","2");
  Tree b=content.addChild("b");
  b.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  b.setProperty("foo","bye bye bye");
  b.setProperty("loc","1");
  root.commit();
  String query="select [jcr:path] from [nt:base] where native('solr','select?q=loc:*') AND foo IS NOT NULL";
  Iterator<String> results=executeQuery(query,Query.JCR_SQL2,true).iterator();
  assertTrue(results.hasNext());
  assertEquals("/content/a",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/b",results.next());
  assertFalse(results.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeSolrFunctionQuery() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', 'path_child:\\/test  _val_:\"recip(rord(name),1,2,3)\"')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello");
  test.addChild("b").setProperty("name","World");
  tree.addChild("c");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/b",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ischildnodeTest() throws Exception {
  Tree tree=root.getTree("/");
  Tree parents=tree.addChild("parents");
  parents.addChild("p0").setProperty("id","0");
  parents.addChild("p1").setProperty("id","1");
  parents.addChild("p2").setProperty("id","2");
  Tree children=tree.addChild("children");
  children.addChild("c1").setProperty("p","1");
  children.addChild("c2").setProperty("p","2");
  children.addChild("c3").setProperty("p","3");
  children.addChild("c4").setProperty("p","4");
  root.commit();
  Iterator<String> result=executeQuery("select p.[jcr:path], p2.[jcr:path] from [nt:base] as p inner join [nt:base] as p2 on ischildnode(p2, p) where p.[jcr:path] = '/'","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/, /children",result.next());
  assertTrue(result.hasNext());
  assertEquals("/, /jcr:system",result.next());
  assertTrue(result.hasNext());
  assertEquals("/, /oak:index",result.next());
  assertTrue(result.hasNext());
  assertEquals("/, /parents",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-16 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeMLTQuery() throws Exception {
  assumeTrue(!System.getProperty("java.version").startsWith("1.8"));
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', 'mlt?q=name:World&mlt.fl=name&mlt.mindf=0&mlt.mintf=0')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello World, today weather is nice");
  test.addChild("b").setProperty("name","Cheers World, today weather is quite nice");
  test.addChild("c").setProperty("name","Halo Welt, today sky is cloudy");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/c",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void descendantTest() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").addChild("c");
  test.addChild("b").addChild("d");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test')","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/a/c",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b/d",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOrderByJcrScore() throws Exception {
  Tree index=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(index.exists());
  index.setProperty("rows",10000);
  index.setProperty("reindex",true);
  root.commit();
  Tree content=root.getTree("/").addChild("content");
  Tree a=content.addChild("a");
  a.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  a.setProperty("type","doc doc doc");
  root.commit();
  String statement="select [jcr:path], [jcr:score], [rep:excerpt] " + "from [nt:unstructured] as a " + "where contains(*, 'doc') "+ "and isdescendantnode(a, '/content') "+ "order by [jcr:score] desc";
  Iterator<String> results=executeQuery(statement,Query.JCR_SQL2,true).iterator();
  assertTrue(results.hasNext());
  assertEquals("/content/a",results.next());
  assertFalse(results.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNativeSolrQuery() throws Exception {
  String nativeQueryString="select [jcr:path] from [nt:base] where native('solr', 'name:(Hello OR World)')";
  Tree tree=root.getTree("/");
  Tree test=tree.addChild("test");
  test.addChild("a").setProperty("name","Hello");
  test.addChild("b").setProperty("name","World");
  test.addChild("c");
  root.commit();
  Iterator<String> strings=executeQuery(nativeQueryString,"JCR-SQL2").iterator();
  assertTrue(strings.hasNext());
  assertEquals("/test/a",strings.next());
  assertTrue(strings.hasNext());
  assertEquals("/test/b",strings.next());
  assertFalse(strings.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOrderByMVProperty() throws Exception {
  Tree index=root.getTree("/oak:index/" + TEST_INDEX_NAME);
  assertTrue(index.exists());
  index.setProperty("rows",10000);
  index.setProperty("reindex",true);
  root.commit();
  Tree content=root.getTree("/").addChild("content");
  Tree a=content.addChild("a");
  a.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  a.setProperty("type",Arrays.asList("a","z"),Type.STRINGS);
  a.setProperty("text","a doc");
  Tree aContent=a.addChild("jcr:content");
  aContent.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  aContent.setProperty("type",Collections.singletonList("3"),Type.STRINGS);
  Tree b=content.addChild("b");
  b.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  b.setProperty("type",Arrays.asList("b","y"),Type.STRINGS);
  b.setProperty("text","b doc");
  Tree bContent=b.addChild("jcr:content");
  bContent.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  bContent.setProperty("type",Collections.singletonList("1"),Type.STRINGS);
  root.commit();
  Tree c=content.addChild("c");
  c.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  c.setProperty("type",Arrays.asList("c","x"),Type.STRINGS);
  c.setProperty("text","c doc");
  Tree cContent=c.addChild("jcr:content");
  cContent.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  cContent.setProperty("type",Collections.singletonList("2"),Type.STRINGS);
  root.commit();
  String statement="select [jcr:path], [jcr:score] " + "from [nt:unstructured] as a " + "where contains(*, 'doc') "+ "and isdescendantnode(a, '/content') "+ "order by [type] desc";
  Iterator<String> results=executeQuery(statement,Query.JCR_SQL2,true).iterator();
  assertTrue(results.hasNext());
  assertEquals("/content/c",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/b",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/a",results.next());
  assertFalse(results.hasNext());
  statement="select [jcr:path], [jcr:score] " + "from [nt:unstructured] as a " + "where contains(*, 'doc') "+ "and isdescendantnode(a, '/content') "+ "order by [type] asc";
  results=executeQuery(statement,Query.JCR_SQL2,true).iterator();
  assertTrue(results.hasNext());
  assertEquals("/content/a",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/b",results.next());
  assertTrue(results.hasNext());
  assertEquals("/content/c",results.next());
  assertFalse(results.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortingOnPath() throws Exception {
  Tree test=root.getTree("/").addChild("test");
  test.addChild("a").addChild("c");
  test.addChild("b").addChild("d");
  root.commit();
  Iterator<String> result=executeQuery("select [jcr:path] from [nt:base] where isdescendantnode('/test') order by [jcr:path] asc","JCR-SQL2").iterator();
  assertTrue(result.hasNext());
  assertEquals("/test/a",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/a/c",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b",result.next());
  assertTrue(result.hasNext());
  assertEquals("/test/b/d",result.next());
  assertFalse(result.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.query.SolrQueryIndexTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryOnIgnoredExistingProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=TestUtils.createSolrServer();
  SolrInputDocument document=new SolrInputDocument();
  document.addField("path_exact","/a/b");
  document.addField("name","hello");
  solrServer.add(document);
  solrServer.commit();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getIgnoredProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  String plan=solrQueryIndex.getPlan(filter,root);
  assertNotNull(plan);
  assertTrue(plan.contains("q=*%3A*"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSize() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  String sqlQuery="select [jcr:path], [jcr:score] from [nt:base] as a where" + " contains([jcr:content/*], 'founded')";
  SolrServer solrServer=TestUtils.createSolrServer();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,sqlQuery,new QueryEngineSettings());
  Cursor cursor=solrQueryIndex.query(filter,root);
  assertNotNull(cursor);
  long sizeExact=cursor.getSize(Result.SizePrecision.EXACT,100000);
  long sizeApprox=cursor.getSize(Result.SizePrecision.APPROXIMATION,100000);
  long sizeFastApprox=cursor.getSize(Result.SizePrecision.FAST_APPROXIMATION,100000);
  assertTrue(Math.abs(sizeExact - sizeApprox) < 10);
  assertTrue(Math.abs(sizeExact - sizeFastApprox) > 10000);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryOnExistingProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=TestUtils.createSolrServer();
  SolrInputDocument document=new SolrInputDocument();
  document.addField("path_exact","/a/b");
  document.addField("name","hello");
  solrServer.add(document);
  solrServer.commit();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  String plan=solrQueryIndex.getPlan(filter,root);
  assertNotNull(plan);
  assertTrue(plan.contains("q=name%3Ahello"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryOnExplicitlyUsedProperty() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=TestUtils.createSolrServer();
  SolrInputDocument document=new SolrInputDocument();
  document.addField("path_exact","/a/b");
  document.addField("name","hello");
  solrServer.add(document);
  solrServer.commit();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getUsedProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where name = 'hello')",new QueryEngineSettings());
  filter.restrictProperty("name",Operator.EQUAL,PropertyValues.newString("hello"));
  String plan=solrQueryIndex.getPlan(filter,root);
  assertNotNull(plan);
  assertTrue(plan.contains("name%3Ahello"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQueryOnPropertyNotListedInUsedProperties() throws Exception {
  NodeState root=mock(NodeState.class);
  when(root.getNames(any(String.class))).thenReturn(Collections.<String>emptySet());
  SelectorImpl selector=new SelectorImpl(root,"a");
  SolrServer solrServer=TestUtils.createSolrServer();
  SolrInputDocument document=new SolrInputDocument();
  document.addField("path_exact","/a/b");
  document.addField("name","hello");
  solrServer.add(document);
  solrServer.commit();
  OakSolrConfiguration configuration=new DefaultSolrConfiguration(){
    @Override public boolean useForPropertyRestrictions(){
      return true;
    }
    @Nonnull @Override public Collection<String> getUsedProperties(){
      return Arrays.asList("name");
    }
  }
;
  SolrQueryIndex solrQueryIndex=new SolrQueryIndex("solr",solrServer,configuration);
  FilterImpl filter=new FilterImpl(selector,"select * from [nt:base] as a where foo = 'bar')",new QueryEngineSettings());
  filter.restrictProperty("foo",Operator.EQUAL,PropertyValues.newString("bar"));
  String plan=solrQueryIndex.getPlan(filter,root);
  assertNotNull(plan);
  assertTrue(plan.contains("*%3A*"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.index.solr.util.NodeTypeIndexingUtilsTest </h4><pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSynonymsFileCreation() throws Exception {
  File synonymsFile=NodeTypeIndexingUtils.createPrimaryTypeSynonymsFile(getClass().getResource("/").getFile() + "/pt-synonyms.txt",s);
  assertNotNull(synonymsFile);
  assertTrue(synonymsFile.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.AbstractBlobTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void blobComparisonBasedOnContentIdentity() throws Exception {
  byte[] data=bytes(100);
  Blob a=new TestBlob(data,"id1",false);
  Blob b=new TestBlob(data,"id1",false);
  assertTrue(AbstractBlob.equal(a,b));
  Blob a2=new TestBlob(data,"id1",true);
  Blob b2=new TestBlob(data,"id2",true);
  assertTrue("Blobs with different id but same content should match",AbstractBlob.equal(a2,b2));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void blobComparisonBasedOnLength() throws Exception {
  Blob a=new TestBlob(bytes(100),null,false);
  Blob b=new TestBlob(bytes(50),null,false);
  assertFalse("Blob comparison should not fallback on content if lengths not same",AbstractBlob.equal(a,b));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.EmptyNodeStateTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void emptyEqualsMissing(){
  NodeState empty=EmptyNodeState.EMPTY_NODE;
  NodeState missing=new ModifiedNodeState(EmptyNodeState.MISSING_NODE,new HashMap<String,PropertyState>(),new HashMap<String,MutableNodeState>());
  assertTrue(empty.exists());
  assertFalse(missing.exists());
  assertFalse(missing.equals(empty));
  assertFalse(empty.equals(missing));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void missingEqualsModified(){
  NodeState empty=new ModifiedNodeState(EmptyNodeState.EMPTY_NODE,new HashMap<String,PropertyState>(),new HashMap<String,MutableNodeState>());
  NodeState missing=EmptyNodeState.MISSING_NODE;
  assertTrue(empty.exists());
  assertFalse(missing.exists());
  assertFalse(missing.equals(empty));
  assertFalse(empty.equals(missing));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.memory.MemoryNodeBuilderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void navigateNonExistingNode(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  NodeBuilder aBuilder=rootBuilder.getChildNode("a");
  NodeBuilder bBuilder=aBuilder.getChildNode("b");
  NodeBuilder cBuilder=bBuilder.getChildNode("c");
  assertTrue(aBuilder.exists());
  assertTrue(cBuilder.exists());
  cBuilder.setProperty("c2","c2Value");
  r=rootBuilder.getNodeState();
  a=r.getChildNode("a");
  b=a.getChildNode("b");
  c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addNewChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.setChildNode("any");
  assertTrue(x.exists());
  assertTrue(x.getNodeState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReplacedStatus3(){
  NodeBuilder x=base.builder().getChildNode("x");
  NodeBuilder q=x.getChildNode("q");
  assertFalse(q.isReplaced());
  x.setChildNode("q").setProperty("a","b");
  assertTrue(q.isReplaced());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testConnectOnAddProperty(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  assertFalse(childA.hasProperty("test"));
  childB.setProperty("test","foo");
  assertTrue(childA.hasProperty("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNewStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder n=root.child("n");
  assertTrue(n.exists());
  assertTrue(n.isNew());
  assertFalse(n.isModified());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMoveToSelf(){
  NodeBuilder rootBuilder=base.builder();
  assertFalse(rootBuilder.getChildNode("y").moveTo(rootBuilder,"y"));
  NodeState newRoot=rootBuilder.getNodeState();
  assertTrue(newRoot.hasChildNode("y"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRename(){
  NodeBuilder rootBuilder=base.builder();
  assertTrue(rootBuilder.getChildNode("y").moveTo(rootBuilder,"yy"));
  NodeState newRoot=rootBuilder.getNodeState();
  assertFalse(newRoot.hasChildNode("y"));
  assertTrue(newRoot.hasChildNode("yy"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReset2(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  x.child("y");
  ((MemoryNodeBuilder)root).reset(base);
  assertTrue(root.hasChildNode("x"));
  assertFalse(x.hasChildNode("y"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addExistingChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.setChildNode("x");
  assertTrue(x.exists());
  assertTrue(x.getBaseState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void shadowNonExistingNode1(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  rootBuilder.child("a").setChildNode("b").child("c").setProperty("c2","c2Value");
  r=rootBuilder.getNodeState();
  a=r.getChildNode("a");
  b=a.getChildNode("b");
  c=b.getChildNode("c");
  assertTrue(a.exists());
  assertTrue(b.exists());
  assertTrue(c.exists());
  assertFalse(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemovedStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  root.getChildNode("x").remove();
  assertFalse(x.exists());
  assertFalse(x.isNew());
  assertFalse(x.isModified());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReset(){
  NodeBuilder root=base.builder();
  NodeBuilder child=root.child("x");
  child.child("new");
  assertTrue(child.hasChildNode("new"));
  assertTrue(root.child("x").hasChildNode("new"));
  ((MemoryNodeBuilder)root).reset(base);
  assertFalse(child.hasChildNode("new"));
  assertFalse(root.child("x").hasChildNode("new"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void existingChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.child("x");
  assertTrue(x.exists());
  assertTrue(x.getBaseState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void removeParent(){
  NodeBuilder x=base.builder().getChildNode("x");
  NodeBuilder y=x.setChildNode("y");
  x.remove();
  assertFalse(x.exists());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getNonExistingChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder any=rootBuilder.getChildNode("any");
  assertFalse(any.getChildNode("other").exists());
  assertFalse(any.exists());
  try {
    any.setChildNode("any");
    fail();
  }
 catch (  IllegalStateException expected) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReplacedStatus2(){
  NodeBuilder x=base.builder().getChildNode("x");
  NodeBuilder q=x.getChildNode("q");
  q.remove();
  assertFalse(q.isReplaced());
  x.setChildNode("q").setProperty("a","b");
  assertTrue(q.isReplaced());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getExistingChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.getChildNode("x");
  assertTrue(x.exists());
  assertTrue(x.getNodeState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testModifiedStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  x.setProperty("p","pValue");
  assertTrue(x.exists());
  assertFalse(x.isNew());
  assertTrue(x.isModified());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMoveToDescendant(){
  NodeBuilder rootBuilder=base.builder();
  assertTrue(rootBuilder.getChildNode("x").moveTo(rootBuilder.getChildNode("x"),"xx"));
  assertFalse(rootBuilder.hasChildNode("x"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setTest(){
  Assume.assumeTrue(EMPTY_NODE.builder() instanceof MemoryNodeBuilder);
  MemoryNodeBuilder rootBuilder=(MemoryNodeBuilder)EMPTY_NODE.builder();
  assertFalse(base.equals(rootBuilder.getNodeState()));
  rootBuilder.set(base);
  assertTrue(base.equals(rootBuilder.getNodeState()));
  MemoryNodeBuilder xBuilder=(MemoryNodeBuilder)rootBuilder.getChildNode("x");
  NodeState yState=base.getChildNode("y");
  assertFalse(yState.equals(xBuilder.getNodeState()));
  xBuilder.set(yState);
  assertTrue(yState.equals(xBuilder.getNodeState()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectOnRemoveProperty(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  childB.setProperty("test","foo");
  childA.removeProperty("test");
  assertFalse(childA.hasProperty("test"));
  assertFalse(childB.hasProperty("test"));
  childA.setProperty("test","bar");
  assertEquals("bar",childA.getProperty("test").getValue(STRING));
  assertEquals("bar",childB.getProperty("test").getValue(STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMove(){
  NodeBuilder rootBuilder=base.builder();
  assertTrue(rootBuilder.getChildNode("y").moveTo(rootBuilder.child("x"),"yy"));
  NodeState newRoot=rootBuilder.getNodeState();
  assertFalse(newRoot.hasChildNode("y"));
  assertTrue(newRoot.hasChildNode("x"));
  assertTrue(newRoot.getChildNode("x").hasChildNode("q"));
  assertTrue(newRoot.getChildNode("x").hasChildNode("yy"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void modifyChildNodeOfNonExistingNode(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  rootBuilder.child("a").getChildNode("b").child("c").setProperty("c2","c2Value");
  r=rootBuilder.getNodeState();
  a=r.getChildNode("a");
  b=a.getChildNode("b");
  c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testExistingStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.child("x");
  assertTrue(x.exists());
  assertFalse(x.isNew());
  assertFalse(x.isModified());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReplacedStatus(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.getChildNode("x");
  x.setChildNode("new");
  assertFalse(x.isReplaced());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void removeRoot(){
  assertFalse(base.builder().remove());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void newChildTest(){
  NodeBuilder rootBuilder=base.builder();
  NodeBuilder x=rootBuilder.child("any");
  assertTrue(x.exists());
  assertTrue(x.getNodeState().exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void setNodeTest(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.setChildNode("a",createBC(true));
  NodeState c=rootBuilder.getNodeState().getChildNode("a").getChildNode("c");
  assertTrue(c.hasProperty("c"));
  rootBuilder.child("a").child("c").setProperty("c2","c2Value");
  c=rootBuilder.getNodeState().getChildNode("a").getChildNode("c");
  assertTrue(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddRemovedNodeAgain(){
  NodeBuilder root=base.builder();
  root.getChildNode("x").remove();
  NodeBuilder x=root.child("x");
  x.child("q");
  assertTrue(x.hasChildNode("q"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void shadowNonExistingNode2(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  assertTrue(c.hasProperty("c"));
  rootBuilder.child("a").child("b").child("c").setProperty("c2","c2Value");
  r=rootBuilder.getNodeState();
  a=r.getChildNode("a");
  b=a.getChildNode("b");
  c=b.getChildNode("c");
  assertTrue(a.exists());
  assertTrue(b.exists());
  assertTrue(c.exists());
  assertFalse(c.hasProperty("c"));
  assertTrue(c.hasProperty("c2"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testConnectOnAddNode(){
  NodeBuilder root=base.builder();
  NodeBuilder childA=root.child("x");
  NodeBuilder childB=root.child("x");
  assertFalse(childA.hasChildNode("test"));
  assertFalse(childB.hasChildNode("test"));
  childB.child("test");
  assertTrue(childA.hasChildNode("test"));
  assertTrue(childB.hasChildNode("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void transitiveRemove(){
  NodeBuilder root=base.builder();
  NodeBuilder x=root.getChildNode("x");
  NodeBuilder q=x.getChildNode("q");
  assertTrue(x.exists());
  assertTrue(q.exists());
  root.getChildNode("x").remove();
  assertFalse(q.exists());
  assertFalse(x.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void assertion_OAK781(){
  NodeBuilder rootBuilder=EMPTY_NODE.builder();
  rootBuilder.child("a").setChildNode("b",createBC(false));
  NodeState r=rootBuilder.getNodeState();
  NodeState a=r.getChildNode("a");
  NodeState b=a.getChildNode("b");
  NodeState c=b.getChildNode("c");
  assertTrue(a.exists());
  assertFalse(b.exists());
  assertTrue(c.exists());
  rootBuilder.child("a").child("b").child("c");
  rootBuilder=new MemoryNodeBuilder(r);
  rootBuilder.child("a").child("b").child("c");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.CompositeStatsTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void meter() throws Exception {
  AtomicLong simpleStats=new AtomicLong();
  Meter meter=registry.meter("test");
  CompositeStats meterStats=new CompositeStats(simpleStats,meter);
  meterStats.mark();
  assertEquals(1,simpleStats.get());
  assertEquals(1,meter.getCount());
  meterStats.mark(5);
  assertEquals(6,simpleStats.get());
  assertEquals(6,meter.getCount());
  assertTrue(meterStats.isMeter());
  assertFalse(meterStats.isTimer());
  assertFalse(meterStats.isCounter());
  assertNotNull(meterStats.getMeter());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timer() throws Exception {
  AtomicLong counter=new AtomicLong();
  Timer time=registry.timer("test");
  CompositeStats timerStats=new CompositeStats(counter,time);
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(1,time.getCount());
  assertEquals(TimeUnit.SECONDS.toMillis(100),counter.get());
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(2,timerStats.getCount());
  assertFalse(timerStats.isMeter());
  assertTrue(timerStats.isTimer());
  assertFalse(timerStats.isCounter());
  assertNotNull(timerStats.getTimer());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counter() throws Exception {
  AtomicLong simpleStats=new AtomicLong();
  Counter counter=registry.counter("test");
  CompositeStats counterStats=new CompositeStats(simpleStats,counter);
  counterStats.inc();
  assertEquals(1,simpleStats.get());
  assertEquals(1,counter.getCount());
  assertEquals(1,counterStats.getCount());
  counterStats.inc();
  counterStats.inc();
  assertEquals(3,simpleStats.get());
  counterStats.dec();
  assertEquals(2,simpleStats.get());
  assertEquals(2,counter.getCount());
  counterStats.inc(7);
  assertEquals(9,simpleStats.get());
  assertEquals(9,counter.getCount());
  counterStats.dec(5);
  assertEquals(4,simpleStats.get());
  assertEquals(4,counter.getCount());
  assertFalse(counterStats.isMeter());
  assertFalse(counterStats.isTimer());
  assertTrue(counterStats.isCounter());
  assertNotNull(counterStats.getCounter());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void histogram() throws Exception {
  Histogram histo=registry.histogram("test");
  CompositeStats histoStats=new CompositeStats(new AtomicLong(),histo);
  histoStats.update(100);
  assertEquals(1,histo.getCount());
  assertEquals(100,histo.getSnapshot().getMax());
  assertFalse(histoStats.isMeter());
  assertFalse(histoStats.isTimer());
  assertFalse(histoStats.isCounter());
  assertTrue(histoStats.isHistogram());
  assertNotNull(histoStats.getHistogram());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.MetricStatisticsProviderTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counter() throws Exception {
  CounterStats counterStats=statsProvider.getCounterStats("test",StatsOptions.DEFAULT);
  assertNotNull(counterStats);
  assertNotNull(statsProvider.getRegistry().getCounters().containsKey("test"));
  assertTrue(((CompositeStats)counterStats).isCounter());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void meter() throws Exception {
  MeterStats meterStats=statsProvider.getMeter("test",StatsOptions.DEFAULT);
  assertNotNull(meterStats);
  assertNotNull(statsProvider.getRegistry().getMeters().containsKey("test"));
  assertTrue(((CompositeStats)meterStats).isMeter());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void histogram() throws Exception {
  HistogramStats histoStats=statsProvider.getHistogram("test",StatsOptions.DEFAULT);
  assertNotNull(histoStats);
  assertNotNull(statsProvider.getRegistry().getHistograms().containsKey("test"));
  assertTrue(((CompositeStats)histoStats).isHistogram());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timer() throws Exception {
  TimerStats timerStats=statsProvider.getTimer("test",StatsOptions.DEFAULT);
  assertNotNull(timerStats);
  assertNotNull(statsProvider.getRegistry().getTimers().containsKey("test"));
  assertTrue(((CompositeStats)timerStats).isTimer());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.metric.StatisticsProviderFactoryTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void defaultMode() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),ImmutableMap.<String,Object>of("providerType","DEFAULT"));
  assertTrue(context.getService(StatisticsProvider.class) instanceof DefaultStatisticsProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void autoMode() throws Exception {
  MockOsgi.activate(service,context.bundleContext(),Collections.<String,Object>emptyMap());
  assertTrue(context.getService(StatisticsProvider.class) instanceof MetricStatisticsProvider);
  assertNotNull(context.getService(MetricRegistry.class));
  MockOsgi.deactivate(service);
  assertNull(context.getService(StatisticsProvider.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.nodetype.TypeEditorTest </h4><pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeNamedPropertyToBadRequiredType(){
  EditorHook hook=new EditorHook(new TypeEditorProvider());
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder testNode=builder.child("testNode");
  testNode.setProperty(JCR_PRIMARYTYPE,NT_FOLDER,Type.NAME);
  testNode.setProperty(JCR_MIXINTYPES,ImmutableList.of("mix:title"),Type.NAMES);
  testNode.setProperty("jcr:title","title");
  NodeState before=builder.getNodeState();
  testNode.setProperty("jcr:title",true);
  try {
    hook.processCommit(before,builder.getNodeState(),CommitInfo.EMPTY);
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNamedPropertyWithBadRequiredType(){
  EditorHook hook=new EditorHook(new TypeEditorProvider());
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeState before=builder.getNodeState();
  NodeBuilder testNode=builder.child("testNode");
  testNode.setProperty(JCR_PRIMARYTYPE,NT_FOLDER,Type.NAME);
  testNode.setProperty(JCR_MIXINTYPES,ImmutableList.of("mix:title"),Type.NAMES);
  testNode.setProperty("jcr:title",true);
  try {
    hook.processCommit(before,builder.getNodeState(),CommitInfo.EMPTY);
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMandatoryPropertyWithBadRequiredType(){
  EditorHook hook=new EditorHook(new TypeEditorProvider());
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeState before=builder.getNodeState();
  NodeBuilder acl=builder.child(AccessControlConstants.REP_POLICY);
  acl.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_ACL,Type.NAME);
  NodeBuilder ace=acl.child("first");
  ace.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_GRANT_ACE,Type.NAME);
  ace.setProperty(AccessControlConstants.REP_PRINCIPAL_NAME,EveryonePrincipal.NAME);
  ace.setProperty(AccessControlConstants.REP_PRIVILEGES,ImmutableList.of(PrivilegeConstants.JCR_READ),Type.STRINGS);
  try {
    hook.processCommit(before,builder.getNodeState(),CommitInfo.EMPTY);
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(55,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeMandatoryPropertyToBadRequiredType(){
  EditorHook hook=new EditorHook(new TypeEditorProvider());
  NodeState root=INITIAL_CONTENT;
  NodeBuilder builder=root.builder();
  NodeBuilder acl=builder.child(AccessControlConstants.REP_POLICY);
  acl.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_ACL,Type.NAME);
  NodeBuilder ace=acl.child("first");
  ace.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_GRANT_ACE,Type.NAME);
  ace.setProperty(AccessControlConstants.REP_PRINCIPAL_NAME,EveryonePrincipal.NAME);
  ace.setProperty(AccessControlConstants.REP_PRIVILEGES,ImmutableList.of(PrivilegeConstants.JCR_READ),Type.NAMES);
  NodeState before=builder.getNodeState();
  ace.setProperty(AccessControlConstants.REP_PRIVILEGES,ImmutableList.of(PrivilegeConstants.JCR_READ),Type.STRINGS);
  try {
    hook.processCommit(before,builder.getNodeState(),CommitInfo.EMPTY);
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.nodetype.write.InitialContentTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void noVersionStoragePrePopulated() throws Exception {
  NodeState system=InitialContent.INITIAL_CONTENT.getChildNode(JCR_SYSTEM);
  assertTrue(system.exists());
  NodeState vs=system.getChildNode(JCR_VERSIONSTORAGE);
  assertTrue(vs.exists());
  assertTrue(vs.getChildNodeCount(Integer.MAX_VALUE) == 0);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void versionStoragePrePopulated() throws Exception {
  NodeBuilder root=EMPTY_NODE.builder();
  new InitialContent().withPrePopulatedVersionStore().initialize(root);
  NodeBuilder system=root.getChildNode(JCR_SYSTEM);
  assertTrue(system.exists());
  NodeBuilder vs=system.getChildNode(JCR_VERSIONSTORAGE);
  assertTrue(vs.exists());
  assertTrue(vs.getChildNodeCount(Integer.MAX_VALUE) == 0xff);
  for (  String name : vs.getChildNodeNames()) {
    assertTrue(vs.child(name).getChildNodeCount(Integer.MAX_VALUE) == 0xff);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.CommitRateLimiterTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void delayCommitsWithReset() throws InterruptedException, ExecutionException, TimeoutException {
  limiter.setDelay(10000);
  new Thread(commit).start();
  limiter.setDelay(0);
  assertTrue(commit.get(1,TimeUnit.SECONDS) >= 100);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void delayCommits() throws CommitFailedException {
  limiter.setDelay(1000);
  long t0=Clock.ACCURATE.getTime();
  assertSame(AFTER,limiter.processCommit(EMPTY_NODE,AFTER,null));
  assertTrue(Clock.ACCURATE.getTime() - t0 >= 1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.NodeObserverTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").setProperty("p",42);
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertEquals(ImmutableMap.of("/m/n",ImmutableSet.of("p")),nodeObserver.changed);
  assertEquals(ImmutableMap.of("/m/n",ImmutableMap.of("extra","42")),nodeObserver.properties);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void ignoreAdd(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("a").getChildNode("b").setChildNode("new").setProperty("p","3");
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void ignoreChange(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("a").getChildNode("b").setProperty("p",42);
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void ignoreDelete(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("a").getChildNode("b").remove();
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").getChildNode("o").remove();
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertTrue(nodeObserver.added.isEmpty());
  assertEquals(ImmutableMap.of("/m/n/o",ImmutableSet.of("q")),nodeObserver.deleted);
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNode(){
  NodeBuilder builder=before.builder();
  builder.getChildNode("m").getChildNode("n").setChildNode("new").setProperty("p","3");
  nodeObserver.contentChanged(builder.getNodeState(),CommitInfo.EMPTY);
  assertEquals(ImmutableMap.of("/m/n/new",ImmutableSet.of("p")),nodeObserver.added);
  assertTrue(nodeObserver.deleted.isEmpty());
  assertTrue(nodeObserver.changed.isEmpty());
  assertTrue(nodeObserver.properties.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.GlobbingPathFilterTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * **&#47/y/z should match x/y/x/y/z
 */
@Test public void starStarGlob(){
  EventFilter rootFilter=new GlobbingPathFilter("**/y/z");
  NodeState x1=tree.getChild("x").getNodeState();
  assertFalse(rootFilter.includeAdd("x",x1));
  EventFilter x1Filter=rootFilter.create("x",x1,x1);
  assertNotNull(x1Filter);
  NodeState y1=x1.getChildNode("y");
  assertFalse(x1Filter.includeAdd("y",y1));
  EventFilter y1Filter=x1Filter.create("y",y1,y1);
  assertNotNull(y1Filter);
  NodeState x2=y1.getChildNode("x");
  assertFalse(y1Filter.includeAdd("x",x2));
  EventFilter x2Filter=y1Filter.create("x",x2,x2);
  assertNotNull(x2Filter);
  NodeState y2=x2.getChildNode("y");
  assertFalse(x2Filter.includeAdd("y",y2));
  EventFilter y2Filter=x2Filter.create("y",y2,y2);
  assertNotNull(y2Filter);
  NodeState z=y2.getChildNode("z");
  assertTrue(y2Filter.includeAdd("z",z));
  EventFilter zFilter=(y2Filter.create("z",z,z));
  assertFalse(zFilter.includeAdd("x",EMPTY_NODE));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * a/b/c should match a/b/c
 */
@Test public void literal(){
  EventFilter rootFilter=new GlobbingPathFilter("a/b/c");
  NodeState a=tree.getChild("a").getNodeState();
  assertFalse(rootFilter.includeAdd("a",a));
  EventFilter aFilter=rootFilter.create("a",a,a);
  assertNotNull(aFilter);
  NodeState b=a.getChildNode("b");
  assertFalse(aFilter.includeAdd("b",b));
  EventFilter bFilter=aFilter.create("b",b,b);
  assertNotNull(bFilter);
  NodeState c=b.getChildNode("c");
  assertTrue(bFilter.includeAdd("c",b));
  assertFalse(bFilter.includeAdd("x",b));
  assertNull(bFilter.create("c",c,c));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * **&#47r/s/t/u/v/w should match r/s/t/u/v/r/s/t/u/v/r/s/t/u/v/w
 */
@Test public void matchAtEnd(){
  EventFilter filter=new GlobbingPathFilter("**/r/s/t/u/v/w");
  ImmutableTree t=tree;
  for (  String name : elements("r/s/t/u/v/r/s/t/u/v/r/s/t/u/v")) {
    t=t.getChild(name);
    assertFalse(filter.includeAdd(name,t.getNodeState()));
    filter=filter.create(name,t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
  t=t.getChild("w");
  assertTrue(filter.includeAdd("w",t.getNodeState()));
  filter=filter.create("w",t.getNodeState(),t.getNodeState());
  assertNotNull(filter);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * ** should match every path
 */
@Test public void all(){
  EventFilter filter=new GlobbingPathFilter(STAR_STAR);
  ImmutableTree t=tree;
  for (  String name : elements("a/b/c/d")) {
    t=t.getChild(name);
    assertTrue(filter.includeAdd(name,t.getNodeState()));
    filter=filter.create(name,t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * **&#47r/s/t/u/v should match r/s/t/u/v and r/s/t/u/v/r/s/t/u/v and r/s/t/u/v/r/s/t/u/v/r/s/t/u/v
 */
@Test public void multipleMatches(){
  EventFilter filter=new GlobbingPathFilter("**/r/s/t/u/v");
  ImmutableTree t=tree;
  for (int c=0; c < 2; c++) {
    for (    String name : elements("r/s/t/u")) {
      t=t.getChild(name);
      assertFalse(filter.includeAdd(name,t.getNodeState()));
      filter=filter.create(name,t.getNodeState(),t.getNodeState());
      assertNotNull(filter);
    }
    t=t.getChild("v");
    assertTrue(filter.includeAdd("v",t.getNodeState()));
    filter=filter.create("v",t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * An empty path pattern should match no path
 */
@Test public void emptyMatchesNothing(){
  EventFilter rootFilter=new GlobbingPathFilter("");
  NodeState a=tree.getChild("a").getNodeState();
  assertFalse(rootFilter.includeAdd("a",a));
  assertNull(rootFilter.create("a",a,a));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * a/*&#47c should match a/b/c
 */
@Test public void starGlob(){
  EventFilter rootFilter=new GlobbingPathFilter("a/*/c");
  NodeState a=tree.getChild("a").getNodeState();
  assertFalse(rootFilter.includeAdd("a",a));
  EventFilter aFilter=rootFilter.create("a",a,a);
  assertNotNull(aFilter);
  NodeState b=a.getChildNode("b");
  assertFalse(aFilter.includeAdd("b",b));
  EventFilter bFilter=aFilter.create("b",b,b);
  assertNotNull(bFilter);
  NodeState c=b.getChildNode("c");
  assertTrue(bFilter.includeAdd("c",b));
  assertFalse(bFilter.includeAdd("x",b));
  assertNull(bFilter.create("c",c,c));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * q should match q
 */
@Test public void singleMatchesSingle(){
  EventFilter filter=new GlobbingPathFilter("q");
  assertTrue(filter.includeAdd("q",tree.getNodeState()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * * should match q
 */
@Test public void starMatchesSingle(){
  EventFilter filter=new GlobbingPathFilter(STAR);
  assertTrue(filter.includeAdd("q",tree.getNodeState()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * r/s/t&#47** should match r/s/t and all its descendants
 */
@Test public void matchSuffix(){
  EventFilter filter=new GlobbingPathFilter("r/s/t/**");
  ImmutableTree t=tree;
  for (  String name : elements("r/s")) {
    t=t.getChild(name);
    assertFalse(filter.includeAdd(name,t.getNodeState()));
    filter=filter.create(name,t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
  for (  String name : elements("t/u/v/r/s/t/u/v/r/s/t/u/v/w")) {
    t=t.getChild(name);
    assertTrue(filter.includeAdd(name,t.getNodeState()));
    filter=filter.create(name,t.getNodeState(),t.getNodeState());
    assertNotNull(filter);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * **&#47a/b/c should match a/b/c
 */
@Test public void matchAtStart(){
  EventFilter rootFilter=new GlobbingPathFilter("**/a/b/c");
  NodeState a=tree.getChild("a").getNodeState();
  assertFalse(rootFilter.includeAdd("a",a));
  EventFilter aFilter=rootFilter.create("a",a,a);
  assertNotNull(aFilter);
  NodeState b=a.getChildNode("b");
  assertFalse(aFilter.includeAdd("b",b));
  EventFilter bFilter=aFilter.create("b",b,b);
  assertNotNull(bFilter);
  NodeState c=b.getChildNode("c");
  assertTrue(bFilter.includeAdd("c",b));
  assertFalse(bFilter.includeAdd("x",b));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.NodeTypePredicateTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void multipleNodeTypesMatch(){
  NodeState node=createNodeOfType(NT_FILE);
  TypePredicate p=new TypePredicate(node,new String[]{NT_FOLDER,NT_RESOURCE,NT_FILE});
  assertTrue(p.apply(node));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void singleNodeTypeMiss(){
  NodeState node=createNodeOfType(NT_BASE);
  TypePredicate p=new TypePredicate(node,new String[]{NT_FILE});
  assertFalse(p.apply(node));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void multipleNodeTypesMiss(){
  NodeState node=createNodeOfType(NT_FILE);
  TypePredicate p=new TypePredicate(node,new String[]{NT_FOLDER,NT_RESOURCE,JCR_CONTENT});
  assertFalse(p.apply(node));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void emptyNodeTypeList(){
  NodeState node=createNodeOfType(NT_BASE);
  TypePredicate p=new TypePredicate(node,new String[]{});
  assertFalse(p.apply(node));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void singleNodeTypeMatch(){
  NodeState node=createNodeOfType(NT_BASE);
  TypePredicate p=new TypePredicate(node,new String[]{NT_BASE});
  assertTrue(p.apply(node));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.PropertyPredicateTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void nonExistingProperty(){
  String name="foo";
  final String value="bar";
  PropertyPredicate p=new PropertyPredicate("any",new Predicate<PropertyState>(){
    @Override public boolean apply(    PropertyState property){
      return value.equals(property.getValue(STRING));
    }
  }
);
  assertFalse(p.apply(createWithProperty(name,value)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyMiss(){
  String name="foo";
  final String value="bar";
  PropertyPredicate p=new PropertyPredicate(name,new Predicate<PropertyState>(){
    @Override public boolean apply(    PropertyState property){
      return "baz".equals(property.getValue(STRING));
    }
  }
);
  assertFalse(p.apply(createWithProperty(name,value)));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void propertyMatch(){
  String name="foo";
  final String value="bar";
  PropertyPredicate p=new PropertyPredicate(name,new Predicate<PropertyState>(){
    @Override public boolean apply(    PropertyState property){
      return value.equals(property.getValue(STRING));
    }
  }
);
  assertTrue(p.apply(createWithProperty(name,value)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.observation.filter.UuidPredicateTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void multipleUuidsMiss(){
  UuidPredicate p=new UuidPredicate(new String[]{generateUUID(),generateUUID(),generateUUID()});
  NodeState tree=createNodeWithUuid(generateUUID());
  assertFalse(p.apply(tree));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void multipleUuidsMatch(){
  String uuid=generateUUID();
  UuidPredicate p=new UuidPredicate(new String[]{generateUUID(),generateUUID(),uuid});
  NodeState tree=createNodeWithUuid(uuid);
  assertTrue(p.apply(tree));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void emptyUuidList(){
  UuidPredicate p=new UuidPredicate(new String[]{});
  NodeState tree=createNodeWithUuid(generateUUID());
  assertFalse(p.apply(tree));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void singleUuidMatch(){
  String uuid=generateUUID();
  UuidPredicate p=new UuidPredicate(new String[]{uuid});
  NodeState tree=createNodeWithUuid(uuid);
  assertTrue(p.apply(tree));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void singleUuidMiss(){
  UuidPredicate p=new UuidPredicate(new String[]{generateUUID()});
  NodeState tree=createNodeWithUuid(generateUUID());
  assertFalse(p.apply(tree));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CancelableDiffTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testChildNodeChangedInterruptible() throws Throwable {
  NodeState before=mock(NodeState.class);
  NodeState after=mock(NodeState.class);
  NodeStateDiff wrapped=mock(NodeStateDiff.class);
  doReturn(true).when(wrapped).childNodeChanged("name",before,after);
  assertTrue(newCancelableDiff(wrapped,false).childNodeChanged("name",before,after));
  assertFalse(newCancelableDiff(wrapped,true).childNodeChanged("name",before,after));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPropertyAddedInterruptible() throws Throwable {
  PropertyState after=mock(PropertyState.class);
  NodeStateDiff wrapped=mock(NodeStateDiff.class);
  doReturn(true).when(wrapped).propertyAdded(after);
  assertTrue(newCancelableDiff(wrapped,false).propertyAdded(after));
  assertFalse(newCancelableDiff(wrapped,true).propertyAdded(after));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPropertyChangedInterruptible() throws Throwable {
  PropertyState before=mock(PropertyState.class);
  PropertyState after=mock(PropertyState.class);
  NodeStateDiff wrapped=mock(NodeStateDiff.class);
  doReturn(true).when(wrapped).propertyChanged(before,after);
  assertTrue(newCancelableDiff(wrapped,false).propertyChanged(before,after));
  assertFalse(newCancelableDiff(wrapped,true).propertyChanged(before,after));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testChildNodeAddedInterruptible() throws Throwable {
  NodeState after=mock(NodeState.class);
  NodeStateDiff wrapped=mock(NodeStateDiff.class);
  doReturn(true).when(wrapped).childNodeAdded("name",after);
  assertTrue(newCancelableDiff(wrapped,false).childNodeAdded("name",after));
  assertFalse(newCancelableDiff(wrapped,true).childNodeAdded("name",after));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPropertyDeletedInterruptible() throws Throwable {
  PropertyState before=mock(PropertyState.class);
  NodeStateDiff wrapped=mock(NodeStateDiff.class);
  doReturn(true).when(wrapped).propertyDeleted(before);
  assertTrue(newCancelableDiff(wrapped,false).propertyDeleted(before));
  assertFalse(newCancelableDiff(wrapped,true).propertyDeleted(before));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testChildNodeDeletedInterruptible() throws Throwable {
  NodeState before=mock(NodeState.class);
  NodeStateDiff wrapped=mock(NodeStateDiff.class);
  doReturn(true).when(wrapped).childNodeDeleted("name",before);
  assertTrue(newCancelableDiff(wrapped,false).childNodeDeleted("name",before));
  assertFalse(newCancelableDiff(wrapped,true).childNodeDeleted("name",before));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactionAndCleanupIT </h4><pre class="type-7 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Regression test for OAK-2192 testing for mixed segments. This test does not
 * cover OAK-3348. I.e. it does not assert the segment graph is free of cross
 * gc generation references.
 */
@Test public void testMixedSegments() throws Exception {
  FileStore store=new FileStore(directory,2,false);
  final SegmentNodeStore nodeStore=new SegmentNodeStore(store);
  final AtomicBoolean compactionSuccess=new AtomicBoolean(true);
  CompactionStrategy strategy=new CompactionStrategy(true,false,CLEAN_NONE,0,(byte)5){
    @Override public boolean compacted(    Callable<Boolean> setHead) throws Exception {
      compactionSuccess.set(nodeStore.locked(setHead,1,MINUTES));
      return compactionSuccess.get();
    }
  }
;
  strategy.setForceAfterFail(true);
  store.setCompactionStrategy(strategy);
  NodeBuilder root=nodeStore.getRoot().builder();
  createNodes(root.setChildNode("test"),10,3);
  nodeStore.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final Set<UUID> beforeSegments=new HashSet<UUID>();
  collectSegments(store.getHead(),beforeSegments);
  final AtomicReference<Boolean> run=new AtomicReference<Boolean>(true);
  final List<String> failedCommits=newArrayList();
  Thread[] threads=new Thread[10];
  for (int k=0; k < threads.length; k++) {
    final int threadId=k;
    threads[k]=new Thread(new Runnable(){
      @Override public void run(){
        for (int j=0; run.get(); j++) {
          String nodeName="b-" + threadId + ","+ j;
          try {
            NodeBuilder root=nodeStore.getRoot().builder();
            root.setChildNode(nodeName);
            nodeStore.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
            Thread.sleep(5);
          }
 catch (          CommitFailedException e) {
            failedCommits.add(nodeName);
          }
catch (          InterruptedException e) {
            Thread.interrupted();
            break;
          }
        }
      }
    }
);
    threads[k].start();
  }
  store.compact();
  run.set(false);
  for (  Thread t : threads) {
    t.join();
  }
  store.flush();
  assumeTrue("Failed to acquire compaction lock",compactionSuccess.get());
  assertTrue("Failed commits: " + failedCommits,failedCommits.isEmpty());
  Set<UUID> afterSegments=new HashSet<UUID>();
  collectSegments(store.getHead(),afterSegments);
  try {
    for (    UUID u : beforeSegments) {
      assertFalse("Mixed segments found: " + u,afterSegments.contains(u));
    }
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test asserting OAK-3348: Cross gc sessions might introduce references to pre-compacted segments
 */
@Test @Ignore("OAK-3348") public void preCompactionReferences() throws IOException, CommitFailedException, InterruptedException {
  for (  String ref : new String[]{"merge-before-compact","merge-after-compact"}) {
    File repoDir=new File(directory,ref);
    FileStore fileStore=newFileStore(repoDir).withMaxFileSize(2).create();
    final SegmentNodeStore nodeStore=newSegmentNodeStore(fileStore).create();
    fileStore.setCompactionStrategy(new CompactionStrategy(true,false,CLEAN_NONE,0,(byte)5){
      @Override public boolean compacted(      Callable<Boolean> setHead) throws Exception {
        return nodeStore.locked(setHead);
      }
    }
);
    try {
      NodeBuilder preGCBuilder=nodeStore.getRoot().builder();
      preGCBuilder.setChildNode("test").setProperty("blob",createBlob(nodeStore,1024 * 1024));
      nodeStore.merge(preGCBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      preGCBuilder=nodeStore.getRoot().builder();
      preGCBuilder.getChildNode("test").remove();
      nodeStore.merge(preGCBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      preGCBuilder=nodeStore.getRoot().builder();
      preGCBuilder.setChildNode("test").setChildNode("a").setChildNode("b").setProperty("foo","bar");
      for (int k=0; k < getInteger("update.limit",10000); k+=2) {
        preGCBuilder.setChildNode("dummy").remove();
      }
      if ("merge-before-compact".equals(ref)) {
        NodeBuilder builder=nodeStore.getRoot().builder();
        builder.setChildNode("n");
        nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
        nodeStore.merge(preGCBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      }
      fileStore.compact();
      if ("merge-after-compact".equals(ref)) {
        NodeBuilder builder=nodeStore.getRoot().builder();
        builder.setChildNode("n");
        nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
        nodeStore.merge(preGCBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
      }
    }
  finally {
      fileStore.close();
    }
    fileStore=newFileStore(repoDir).withMaxFileSize(2).create();
    try {
      fileStore.cleanup();
      assertTrue(ref + " repository size " + fileStore.size()+ " < "+ 1024 * 1024,fileStore.size() < 1024 * 1024);
    }
  finally {
      fileStore.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyRetention() throws IOException, CommitFailedException {
  FileStore fileStore=new NonCachingFileStore(directory,1);
  try {
    final SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
    CompactionStrategy strategy=new CompactionStrategy(false,false,CLEAN_ALL,0,(byte)0){
      @Override public boolean compacted(      @Nonnull Callable<Boolean> setHead) throws Exception {
        return nodeStore.locked(setHead);
      }
    }
;
    strategy.setPersistCompactionMap(false);
    fileStore.setCompactionStrategy(strategy);
    NodeBuilder builder=nodeStore.getRoot().builder();
    builder.setChildNode("test").setProperty("property","value");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    NodeState test=nodeStore.getRoot().getChildNode("test");
    SegmentId id=((SegmentNodeState)test).getRecordId().getSegmentId();
    assertTrue(fileStore.containsSegment(id));
    builder=nodeStore.getRoot().builder();
    addContent(builder.setChildNode("dump"));
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    assertTrue(fileStore.containsSegment(id));
    PropertyState property=test.getProperty("property");
    assertEquals("value",property.getValue(STRING));
    fileStore.flush();
    fileStore.compact();
    fileStore.cleanup();
    try {
      fileStore.readSegment(id);
      fail("Segment " + id + "should be gc'ed");
    }
 catch (    SegmentNotFoundException ignore) {
    }
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compactionNoBinaryClone() throws Exception {
  final int blobSize=5 * 1024 * 1024;
  final int dataNodes=10000;
  FileStore fileStore=FileStore.newFileStore(directory).withMaxFileSize(1).create();
  final SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
  CompactionStrategy custom=new CompactionStrategy(false,false,CLEAN_OLD,TimeUnit.HOURS.toMillis(1),(byte)0){
    @Override public boolean compacted(    @Nonnull Callable<Boolean> setHead) throws Exception {
      return nodeStore.locked(setHead);
    }
  }
;
  custom.setPersistCompactionMap(false);
  fileStore.setCompactionStrategy(custom);
  NodeBuilder extra=nodeStore.getRoot().builder();
  NodeBuilder content=extra.child("content");
  for (int i=0; i < dataNodes; i++) {
    NodeBuilder c=content.child("c" + i);
    for (int j=0; j < 1000; j++) {
      c.setProperty("p" + i,"v" + i);
    }
  }
  nodeStore.merge(extra,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  final long dataSize=fileStore.size();
  log.debug("File store dataSize {}",byteCountToDisplaySize(dataSize));
  try {
    NodeBuilder builder=nodeStore.getRoot().builder();
    builder.setProperty("a1",createBlob(nodeStore,blobSize));
    builder.setProperty("b","foo");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    log.debug("File store pre removal {}, expecting {}",byteCountToDisplaySize(fileStore.size()),byteCountToDisplaySize(blobSize + dataSize));
    assertEquals(mb(blobSize + dataSize),mb(fileStore.size()));
    builder=nodeStore.getRoot().builder();
    builder.removeProperty("a1");
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    log.debug("File store pre compaction {}, expecting {}",byteCountToDisplaySize(fileStore.size()),byteCountToDisplaySize(blobSize + dataSize));
    assertEquals(mb(blobSize + dataSize),mb(fileStore.size()));
    assertTrue(fileStore.maybeCompact(false));
    assertSize("post compaction",fileStore.size(),blobSize + dataSize,blobSize + 2 * dataSize);
    builder=nodeStore.getRoot().builder();
    builder.setProperty("a2",createBlob(nodeStore,blobSize));
    nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
    assertSize("pre cleanup",fileStore.size(),2 * blobSize + dataSize,2 * blobSize + 2 * dataSize);
    assertTrue(fileStore.maybeCompact(false));
    fileStore.cleanup();
    assertSize("post cleanup",fileStore.size(),0,blobSize + 2 * dataSize);
    custom.setOlderThan(0);
    TimeUnit.MILLISECONDS.sleep(5);
    boolean needsCompaction=true;
    for (int i=0; i < 3 && needsCompaction; i++) {
      needsCompaction=fileStore.maybeCompact(false);
      fileStore.cleanup();
    }
    assertFalse(fileStore.maybeCompact(false));
    byte[] blob=ByteStreams.toByteArray(nodeStore.getRoot().getProperty("a2").getValue(Type.BINARY).getNewStream());
    assertEquals(blobSize,blob.length);
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.CompactorTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCancel() throws Throwable {
  NodeStore store=SegmentNodeStore.newSegmentNodeStore(segmentStore).create();
  Compactor compactor=new Compactor(segmentStore.getTracker(),Suppliers.ofInstance(true));
  SegmentNodeState sns=compactor.compact(store.getRoot(),addChild(store.getRoot(),"b"),store.getRoot());
  assertFalse(sns.hasChildNode("b"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.ExternalBlobIT </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDataStoreBlob() throws Exception {
  FileDataStore fds=createFileDataStore();
  DataStoreBlobStore dbs=new DataStoreBlobStore(fds);
  nodeStore=getNodeStore(dbs);
  Blob b1=testCreateAndRead(createBlob(fds.getMinRecordLength() - 2));
  assertTrue(b1 instanceof SegmentBlob);
  assertNull(((SegmentBlob)b1).getBlobId());
  byte[] data2=new byte[Segment.MEDIUM_LIMIT + 1];
  new Random().nextBytes(data2);
  Blob b2=testCreateAndRead(nodeStore.createBlob(new ByteArrayInputStream(data2)));
  assertTrue(b2 instanceof SegmentBlob);
  assertNotNull(b2.getReference());
  assertEquals(b2.getContentIdentity(),((SegmentBlob)b2).getBlobId());
  InputStream is=dbs.getInputStream(((SegmentBlob)b2).getBlobId());
  assertNotNull(IOUtils.contentEquals(new ByteArrayInputStream(data2),is));
  is.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.MergeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testOptimisticMerge() throws CommitFailedException, IOException {
  NodeStore store=new SegmentNodeStore(new MemoryStore());
  NodeBuilder a=store.getRoot().builder();
  a.setProperty("foo","abc");
  NodeBuilder b=store.getRoot().builder();
  b.setProperty("bar","xyz");
  assertFalse(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  store.merge(a,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  store.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertTrue(store.getRoot().hasProperty("bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSequentialMerge() throws CommitFailedException, IOException {
  NodeStore store=new SegmentNodeStore(new MemoryStore());
  assertFalse(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  NodeBuilder a=store.getRoot().builder();
  a.setProperty("foo","abc");
  store.merge(a,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  NodeBuilder b=store.getRoot().builder();
  b.setProperty("bar","xyz");
  store.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertTrue(store.getRoot().hasProperty("bar"));
}

</code></pre>

<br>
<pre class="type-13 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPessimisticMerge() throws Exception {
  final SegmentNodeStore store=new SegmentNodeStore(new MemoryStore());
  final Semaphore semaphore=new Semaphore(0);
  final AtomicBoolean running=new AtomicBoolean(true);
  Thread background=new Thread(){
    @Override public void run(){
      for (int i=0; running.get(); i++) {
        try {
          NodeBuilder a=store.getRoot().builder();
          a.setProperty("foo","abc" + i);
          store.merge(a,EmptyHook.INSTANCE,CommitInfo.EMPTY);
          semaphore.release();
        }
 catch (        CommitFailedException e) {
          fail();
        }
      }
    }
  }
;
  background.start();
  semaphore.acquire();
  assertTrue(store.getRoot().hasProperty("foo"));
  assertFalse(store.getRoot().hasProperty("bar"));
  NodeBuilder b=store.getRoot().builder();
  b.setProperty("bar","xyz");
  store.setMaximumBackoff(100);
  store.merge(b,new CommitHook(){
    @Override @Nonnull public NodeState processCommit(    NodeState before,    NodeState after,    CommitInfo info){
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException e) {
        fail();
      }
      return after;
    }
  }
,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasProperty("foo"));
  assertTrue(store.getRoot().hasProperty("bar"));
  running.set(false);
  background.join();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.RecordIdMapTest </h4><pre class="type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmpty(){
  RecordIdMap map=new RecordIdMap();
  assertFalse(map.containsKey((short)0));
  assertNull(map.get((short)0));
  assertEquals(0,map.size());
  try {
    map.getKey(0);
    fail("Expected AIOBE");
  }
 catch (  ArrayIndexOutOfBoundsException ignored) {
  }
  try {
    map.getRecordId(0);
    fail("Expected AIOBE");
  }
 catch (  ArrayIndexOutOfBoundsException ignored) {
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecordIdMap() throws IOException {
  int maxSegments=1000;
  int maxEntriesPerSegment=10;
  int seed=new Random().nextInt();
  Random r=new Random(seed);
  SegmentTracker tracker=new MemoryStore().getTracker();
  RecordIdMap map=new RecordIdMap();
  Map<Short,RecordId> reference=newHashMap();
  int segments=r.nextInt(maxSegments);
  for (int i=0; i < segments; i++) {
    SegmentId id=tracker.newDataSegmentId();
    int n=r.nextInt(maxEntriesPerSegment);
    int offset=MAX_SEGMENT_SIZE;
    for (int j=0; j < n; j++) {
      offset=newValidOffset(r,(n - j) << RECORD_ALIGN_BITS,offset);
      RecordId record=new RecordId(id,offset);
      reference.put(encode(record.getOffset()),record);
    }
  }
  for (  Entry<Short,RecordId> entry : reference.entrySet()) {
    map.put(entry.getKey(),entry.getValue());
  }
  assertEquals("Failed with seed " + seed,reference.size(),map.size());
  for (  Entry<Short,RecordId> entry : reference.entrySet()) {
    short key=entry.getKey();
    assertTrue("Failed with seed " + seed,map.containsKey(key));
    RecordId expected=entry.getValue();
    RecordId actual=map.get(key);
    assertEquals("Failed with seed " + seed,expected,actual);
  }
  for (int k=0; k < map.size(); k++) {
    short key=map.getKey(k);
    RecordId expected=reference.get(key);
    RecordId actual=map.get(key);
    assertEquals("Failed with seed " + seed,expected,actual);
    assertEquals("Failed with seed " + seed,expected,map.getRecordId(k));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.RecordTest </h4><pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorstCaseMap() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  Map<String,RecordId> map=newHashMap();
  char[] key=new char[2];
  for (int i=0; i <= MapRecord.BUCKETS_PER_LEVEL; i++) {
    key[0]=(char)('A' + i);
    key[1]=(char)('\u1000' - key[0] * 31);
    map.put(new String(key),blockId);
  }
  MapRecord bad=writer.writeMap(null,map);
  assertEquals(map.size(),bad.size());
  Iterator<MapEntry> iterator=bad.getEntries().iterator();
  for (int i=0; i < map.size(); i++) {
    assertTrue(iterator.hasNext());
    assertEquals('\u1000',iterator.next().getName().hashCode());
  }
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapRecord() throws IOException {
  RecordId blockId=writer.writeBlock(bytes,0,bytes.length);
  MapRecord zero=writer.writeMap(null,ImmutableMap.<String,RecordId>of());
  MapRecord one=writer.writeMap(null,ImmutableMap.of("one",blockId));
  MapRecord two=writer.writeMap(null,ImmutableMap.of("one",blockId,"two",blockId));
  Map<String,RecordId> map=newHashMap();
  for (int i=0; i < 1000; i++) {
    map.put("key" + i,blockId);
  }
  MapRecord many=writer.writeMap(null,map);
  Iterator<MapEntry> iterator;
  assertEquals(0,zero.size());
  assertNull(zero.getEntry("one"));
  iterator=zero.getEntries().iterator();
  assertFalse(iterator.hasNext());
  assertEquals(1,one.size());
  assertEquals(blockId,one.getEntry("one").getValue());
  assertNull(one.getEntry("two"));
  iterator=one.getEntries().iterator();
  assertTrue(iterator.hasNext());
  assertEquals("one",iterator.next().getName());
  assertFalse(iterator.hasNext());
  assertEquals(2,two.size());
  assertEquals(blockId,two.getEntry("one").getValue());
  assertEquals(blockId,two.getEntry("two").getValue());
  assertNull(two.getEntry("three"));
  iterator=two.getEntries().iterator();
  assertTrue(iterator.hasNext());
  iterator.next();
  assertTrue(iterator.hasNext());
  iterator.next();
  assertFalse(iterator.hasNext());
  assertEquals(1000,many.size());
  iterator=many.getEntries().iterator();
  for (int i=0; i < 1000; i++) {
    assertTrue(iterator.hasNext());
    assertEquals(blockId,iterator.next().getValue());
    assertEquals(blockId,many.getEntry("key" + i).getValue());
  }
  assertFalse(iterator.hasNext());
  assertNull(many.getEntry("foo"));
  Map<String,RecordId> changes=newHashMap();
  changes.put("key0",null);
  changes.put("key1000",blockId);
  MapRecord modified=writer.writeMap(many,changes);
  assertEquals(1000,modified.size());
  iterator=modified.getEntries().iterator();
  for (int i=1; i <= 1000; i++) {
    assertTrue(iterator.hasNext());
    assertEquals(blockId,iterator.next().getValue());
    assertEquals(blockId,modified.getEntry("key" + i).getValue());
  }
  assertFalse(iterator.hasNext());
  assertNull(many.getEntry("foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentDataStoreBlobGCIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void gcWithInlined() throws Exception {
  blobStore=new DataStoreBlobStore(DataStoreUtils.createFDS(new File(getWorkDir(),"datastore"),16516));
  DataStoreState state=setUp();
  addInlined();
  log.info("{} blobs that should remain after gc : {}",state.blobsAdded.size(),state.blobsAdded);
  log.info("{} blobs for nodes which are deleted : {}",state.blobsPresent.size(),state.blobsPresent);
  Set<String> existingAfterGC=gcInternal(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void noGc() throws Exception {
  DataStoreState state=setUp();
  log.info("{} blobs that should remain after gc : {}",state.blobsAdded.size(),state.blobsAdded);
  log.info("{} blobs for nodes which are deleted : {}",state.blobsPresent.size(),state.blobsPresent);
  Set<String> existingAfterGC=gcInternal(86400);
  assertTrue(Sets.symmetricDifference(state.blobsAdded,existingAfterGC).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void consistencyCheckWithGc() throws Exception {
  DataStoreState state=setUp();
  Set<String> existingAfterGC=gcInternal(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  MarkSweepGarbageCollector gcObj=init(86400,executor);
  long candidates=gcObj.checkConsistency();
  assertEquals(1,executor.getTaskCount());
  assertEquals(0,candidates);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gcLongRunningBlobCollection() throws Exception {
  DataStoreState state=setUp();
  log.info("{} Blobs added {}",state.blobsAdded.size(),state.blobsAdded);
  log.info("{} Blobs should be present {}",state.blobsPresent.size(),state.blobsPresent);
  ThreadPoolExecutor executor=(ThreadPoolExecutor)Executors.newFixedThreadPool(10);
  String repoId=null;
  if (SharedDataStoreUtils.isShared(store.getBlobStore())) {
    repoId=ClusterRepositoryInfo.createId(nodeStore);
    ((SharedDataStore)store.getBlobStore()).addMetadataRecord(new ByteArrayInputStream(new byte[0]),REPOSITORY.getNameFromId(repoId));
  }
  TestGarbageCollector gc=new TestGarbageCollector(new SegmentBlobReferenceRetriever(store.getTracker()),(GarbageCollectableBlobStore)store.getBlobStore(),executor,"./target",5,5000,repoId);
  gc.collectGarbage(false);
  Set<String> existingAfterGC=iterate();
  log.info("{} Blobs existing after gc {}",existingAfterGC.size(),existingAfterGC);
  assertTrue(Sets.difference(state.blobsPresent,existingAfterGC).isEmpty());
  assertEquals(gc.additionalBlobs,Sets.symmetricDifference(state.blobsPresent,existingAfterGC));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void gc() throws Exception {
  DataStoreState state=setUp();
  log.info("{} blobs that should remain after gc : {}",state.blobsPresent.size(),state.blobsPresent);
  log.info("{} blobs for nodes which are deleted : {}",state.blobsPresent.size(),state.blobsPresent);
  Set<String> existingAfterGC=gcInternal(0);
  assertTrue(Sets.symmetricDifference(state.blobsPresent,existingAfterGC).isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentIdFactoryTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void referencedSegmentIds() throws InterruptedException {
  SegmentId a=factory.newDataSegmentId();
  SegmentId b=factory.newBulkSegmentId();
  SegmentId c=factory.newDataSegmentId();
  Set<SegmentId> ids=factory.getReferencedSegmentIds();
  assertTrue(ids.contains(a));
  assertTrue(ids.contains(b));
  assertTrue(ids.contains(c));
  assertFalse(ids.contains(factory.newBulkSegmentId()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void segmentIdType(){
  assertTrue(factory.newDataSegmentId().isDataSegmentId());
  assertTrue(factory.newBulkSegmentId().isBulkSegmentId());
  assertFalse(factory.newDataSegmentId().isBulkSegmentId());
  assertFalse(factory.newBulkSegmentId().isDataSegmentId());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void internedSegmentIds(){
  assertTrue(factory.getSegmentId(0,0) == factory.getSegmentId(0,0));
  assertTrue(factory.getSegmentId(1,2) == factory.getSegmentId(1,2));
  assertTrue(factory.getSegmentId(1,2) != factory.getSegmentId(3,4));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentIdTableTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gc() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  int originalCount=1024;
  for (int i=0; i < originalCount; i++) {
    refs.add(tbl.getSegmentId(i,i % 128));
  }
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(1,tbl.getMapRebuildCount());
  for (int i=0; i < refs.size() / 2; i++) {
    refs.remove(0);
  }
  for (int gcCalls=0; ; gcCalls++) {
    System.gc();
    for (    SegmentId id : refs) {
      SegmentId id2=tbl.getSegmentId(id.getMostSignificantBits(),id.getLeastSignificantBits());
      Assert.assertTrue(id2 == id);
    }
    Assert.assertEquals(1,tbl.getMapRebuildCount());
    for (int i=0; i < 10; i++) {
      tbl.getSegmentId(i,i);
    }
    if (tbl.getEntryCount() < originalCount) {
      break;
    }
 else     if (gcCalls > 10) {
      fail("No entries were garbage collected after 10 times System.gc()");
    }
  }
  Assert.assertEquals(2,tbl.getMapRebuildCount());
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void clearTable() throws IOException {
  SegmentTracker tracker=new MemoryStore().getTracker();
  final SegmentIdTable tbl=new SegmentIdTable(tracker);
  List<SegmentId> refs=new ArrayList<SegmentId>();
  int originalCount=8;
  for (int i=0; i < originalCount; i++) {
    refs.add(tbl.getSegmentId(i,i % 2));
  }
  Assert.assertEquals(originalCount,tbl.getEntryCount());
  Assert.assertEquals(0,tbl.getMapRebuildCount());
  tbl.clearSegmentIdTables(new CompactionStrategy(false,false,CleanupType.CLEAN_NONE,originalCount,(byte)0){
    @Override public boolean compacted(    @Nonnull Callable<Boolean> setHead) throws Exception {
      return true;
    }
    @Override public boolean canRemove(    SegmentId id){
      return id.getMostSignificantBits() < 4;
    }
  }
);
  Assert.assertEquals(4,tbl.getEntryCount());
  for (  SegmentId id : refs) {
    if (id.getMostSignificantBits() >= 4) {
      SegmentId id2=tbl.getSegmentId(id.getMostSignificantBits(),id.getLeastSignificantBits());
      List<SegmentId> list=tbl.getRawSegmentIdList();
      if (list.size() != new HashSet<SegmentId>(list).size()) {
        Collections.sort(list);
        fail("duplicate entry " + list.toString());
      }
      Assert.assertTrue(id == id2);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.SegmentParserTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void template() throws IOException {
  NodeBuilder builder=EMPTY_NODE.builder();
  builder.setChildNode("n");
  builder.setProperty("p",1);
  builder.setProperty("jcr:primaryType","type",NAME);
  builder.setProperty("jcr:mixinTypes",ImmutableList.of("type1","type2"),NAMES);
  SegmentNodeState node=writer.writeNode(builder.getNodeState());
  NodeInfo nodeInfo=new TestParser("template"){
    @Override protected void onTemplate(    RecordId parentId,    RecordId templateId){
      TemplateInfo info=parseTemplate(templateId);
      assertEquals(templateId,info.templateId);
      assertTrue(info.hasPrimaryType);
      assertTrue(info.hasMixinType);
      assertFalse(info.zeroChildNodes);
      assertFalse(info.manyChildNodes);
      assertEquals(2,info.mixinCount);
      assertEquals(1,info.propertyCount);
      assertEquals(20,info.size);
    }
    @Override protected void onString(    RecordId parentId,    RecordId stringId){
    }
    @Override protected void onNode(    RecordId parentId,    RecordId nodeId){
    }
    @Override protected void onProperty(    RecordId parentId,    RecordId propertyId,    PropertyTemplate template){
    }
    @Override protected void onList(    RecordId parentId,    RecordId listId,    int count){
      if (segmentVersion == V_10) {
        super.onList(parentId,listId,count);
      }
    }
  }
.parseNode(node.getRecordId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.ShortSetTest </h4><pre class="type-13 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void empty(){
  for (short k=Short.MIN_VALUE; k < Short.MAX_VALUE; k++) {
    assertFalse(set.contains(k));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addOne(){
  set.add(s(42));
  assertTrue(set.contains(s(42)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addTwoReverse(){
  set.add(s(42));
  set.add(s(21));
  assertTrue(set.contains(s(21)));
  assertTrue(set.contains(s(42)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void addTwo(){
  set.add(s(21));
  set.add(s(42));
  assertTrue(set.contains(s(21)));
  assertTrue(set.contains(s(42)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.StringCacheTest </h4><pre class="type-13 type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void empty(){
  final AtomicInteger counter=new AtomicInteger();
  Function<Integer,String> loader=new Function<Integer,String>(){
    @Override @Nullable public String apply(    @Nullable Integer input){
      counter.incrementAndGet();
      return "" + input;
    }
  }
;
  StringCache c=new StringCache(0);
  for (int repeat=0; repeat < 10; repeat++) {
    for (int i=0; i < 1000; i++) {
      assertEquals("" + i,c.getString(i,i,i,loader));
    }
  }
  assertTrue("" + counter,counter.get() > 1000);
  assertTrue("" + counter,counter.get() < 5000);
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void largeEntries(){
  final AtomicInteger counter=new AtomicInteger();
  final String large=new String(new char[1024]);
  Function<Integer,String> loader=new Function<Integer,String>(){
    @Override @Nullable public String apply(    @Nullable Integer input){
      counter.incrementAndGet();
      return large + input;
    }
  }
;
  StringCache c=new StringCache(1024);
  for (int repeat=0; repeat < 10; repeat++) {
    for (int i=0; i < 1000; i++) {
      assertEquals(large + i,c.getString(i,i,i,loader));
      assertEquals(large + 0,c.getString(0,0,0,loader));
    }
  }
  assertTrue("" + counter,counter.get() > 9000);
  assertTrue("" + counter,counter.get() < 10000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.CompactionEstimatorTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGainEstimator() throws Exception {
  final int MB=1024 * 1024;
  final int blobSize=2 * MB;
  FileStore fileStore=new FileStore(directory,2,false);
  SegmentNodeStore nodeStore=new SegmentNodeStore(fileStore);
  NodeBuilder builder=nodeStore.getRoot().builder();
  NodeBuilder c1=builder.child("c1");
  c1.setProperty("a",createBlob(nodeStore,blobSize));
  c1.setProperty("b","foo");
  NodeBuilder c2=builder.child("c2");
  c2.setProperty("a",createBlob(nodeStore,blobSize));
  c2.setProperty("b","foo");
  NodeBuilder c3=builder.child("c3");
  c3.setProperty("a",createBlob(nodeStore,blobSize));
  c3.setProperty("b","foo");
  nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=nodeStore.getRoot().builder();
  builder.child("c1").remove();
  builder.child("c2").remove();
  nodeStore.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  fileStore.flush();
  try {
    assertTrue(fileStore.estimateCompactionGain(Suppliers.ofInstance(false)).estimateCompactionGain(0) > 60);
  }
  finally {
    fileStore.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.FileStoreIT </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompaction() throws IOException {
  int largeBinarySize=10 * 1024 * 1024;
  FileStore store=new FileStore(directory,1,false);
  SegmentWriter writer=store.getTracker().getWriter();
  SegmentNodeState base=store.getHead();
  SegmentNodeBuilder builder=base.builder();
  byte[] data=new byte[largeBinarySize];
  new Random().nextBytes(data);
  SegmentBlob blob=writer.writeStream(new ByteArrayInputStream(data));
  builder.setProperty("foo",blob);
  builder.getNodeState();
  builder.setProperty("foo","bar");
  SegmentNodeState head=builder.getNodeState();
  assertTrue(store.setHead(base,head));
  assertEquals("bar",store.getHead().getString("foo"));
  Compactor compactor=new Compactor(store.getTracker());
  SegmentNodeState compacted=compactor.compact(EMPTY_NODE,head,EMPTY_NODE);
  store.close();
  store=new FileStore(directory,1,false);
  head=store.getHead();
  assertTrue(store.size() > largeBinarySize);
  builder=head.builder();
  builder.setChildNode("old",head);
  builder.getNodeState();
  assertTrue(store.setHead(head,compacted));
  store.close();
  store=new FileStore(directory,1,false);
  assertTrue(store.size() > largeBinarySize);
  store.cleanup();
  assertTrue(store.size() > largeBinarySize);
  store.close();
  store=new FileStore(directory,1,false);
  head=store.getHead();
  assertTrue(store.size() > largeBinarySize);
  writer=new SegmentWriter(store,V_11,"");
  compactor=new Compactor(store.getTracker());
  compacted=compactor.compact(EMPTY_NODE,head,EMPTY_NODE);
  builder=head.builder();
  builder.setChildNode("old",head);
  builder.getNodeState();
  writer.flush();
  assertTrue(store.setHead(head,compacted));
  store.close();
  store=new FileStore(directory,1,false);
  assertTrue(store.size() > largeBinarySize);
  store.cleanup();
  assertTrue(store.size() < largeBinarySize);
  store.close();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecovery() throws IOException {
  FileStore store=new FileStore(directory,1,false);
  store.flush();
  RandomAccessFile data0=new RandomAccessFile(new File(directory,"data00000a.tar"),"r");
  long pos0=data0.length();
  SegmentNodeState base=store.getHead();
  SegmentNodeBuilder builder=base.builder();
  builder.setProperty("step","a");
  store.setHead(base,builder.getNodeState());
  store.flush();
  long pos1=data0.length();
  data0.close();
  base=store.getHead();
  builder=base.builder();
  builder.setProperty("step","b");
  store.setHead(base,builder.getNodeState());
  store.close();
  store=new FileStore(directory,1,false);
  assertEquals("b",store.getHead().getString("step"));
  store.close();
  RandomAccessFile file=new RandomAccessFile(new File(directory,"data00000a.tar"),"rw");
  file.setLength(pos1);
  file.close();
  store=new FileStore(directory,1,false);
  assertEquals("a",store.getHead().getString("step"));
  store.close();
  file=new RandomAccessFile(new File(directory,"data00000a.tar"),"rw");
  file.setLength(pos0);
  file.close();
  store=new FileStore(directory,1,false);
  assertFalse(store.getHead().hasProperty("step"));
  store.close();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRearrangeOldData() throws IOException {
  new FileOutputStream(new File(directory,"data00000.tar")).close();
  new FileOutputStream(new File(directory,"data00010a.tar")).close();
  new FileOutputStream(new File(directory,"data00030.tar")).close();
  new FileOutputStream(new File(directory,"bulk00002.tar")).close();
  new FileOutputStream(new File(directory,"bulk00005a.tar")).close();
  Map<Integer,?> files=FileStore.collectFiles(directory);
  assertEquals(newArrayList(0,1,31,32,33),newArrayList(newTreeSet(files.keySet())));
  assertTrue(new File(directory,"data00000a.tar").isFile());
  assertTrue(new File(directory,"data00001a.tar").isFile());
  assertTrue(new File(directory,"data00031a.tar").isFile());
  assertTrue(new File(directory,"data00032a.tar").isFile());
  assertTrue(new File(directory,"data00033a.tar").isFile());
  files=FileStore.collectFiles(directory);
  assertEquals(newArrayList(0,1,31,32,33),newArrayList(newTreeSet(files.keySet())));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.JournalReaderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleton() throws IOException {
  JournalReader journalReader=createJournalReader("one 1");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiple() throws IOException {
  JournalReader journalReader=createJournalReader("one 1\ntwo 2\nthree 3");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("three",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("two",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEmpty() throws IOException {
  JournalReader journalReader=createJournalReader("");
  try {
    assertFalse(journalReader.iterator().hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpaces() throws IOException {
  JournalReader journalReader=createJournalReader("\n \n  \n   ");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIgnoreInvalid() throws IOException {
  JournalReader journalReader=createJournalReader("one 1\ntwo 2\ninvalid\nthree 3");
  try {
    Iterator<String> journal=journalReader.iterator();
    assertTrue(journal.hasNext());
    assertEquals("three",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("two",journal.next());
    assertTrue(journal.hasNext());
    assertEquals("one",journal.next());
    assertFalse(journal.hasNext());
  }
  finally {
    journalReader.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.file.TarWriterTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Regression test for OAK-2800
 */
@Test public void collectReferences() throws IOException {
  SegmentGraphBuilder graphBuilder=new SegmentGraphBuilder();
  Node c=graphBuilder.createNode("c");
  Node b=graphBuilder.createNode("b",c);
  Node a=graphBuilder.createNode("a",b);
  Node n=graphBuilder.createNode("n");
  Node z=graphBuilder.createNode("z");
  Node y=graphBuilder.createNode("y",z);
  assertEquals(singleton(b),a.getReferences());
  assertEquals(singleton(c),b.getReferences());
  assertTrue(c.getReferences().isEmpty());
  assertEquals(singleton(z),y.getReferences());
  assertTrue(z.getReferences().isEmpty());
  File tar=createTempFile(getClass().getName(),"tar");
  TarWriter tarWriter=new TarWriter(tar);
  try {
    y.write(tarWriter);
    b.write(tarWriter);
    a.write(tarWriter);
    n.write(tarWriter);
    Set<UUID> references=newHashSet();
    references.add(a.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(c + " must be in references as " + a+ " has an transitive reference to "+ c+ " through "+ b+ ", "+ a+ " must not be in references as "+ a+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(b.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(b + " must be in references as " + a+ " has a direct reference to "+ b+ ", "+ a+ " must not be in references as "+ a+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(y.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(z + " must be in references as " + y+ " has a direct reference to "+ z+ ", "+ y+ " must not be in references as "+ y+ " is in the TarWriter, "+ "no other elements must be in references.",singleton(z),toNodes(graphBuilder,references));
    references.clear();
    references.add(c.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(c + " must be in references as " + c+ " is not in the TarWriter, "+ "no other elements must be in references.",singleton(c),toNodes(graphBuilder,references));
    references.clear();
    references.add(z.getUUID());
    tarWriter.collectReferences(references);
    assertEquals(z + " must be in references as " + z+ " is not in the TarWriter "+ "no other elements must be in references.",singleton(z),toNodes(graphBuilder,references));
    references.clear();
    references.add(n.getUUID());
    tarWriter.collectReferences(references);
    assertTrue("references must be empty as " + n + " has no references "+ "and "+ n+ " is in the TarWriter",references.isEmpty());
  }
  finally {
    tarWriter.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.migration.DepthFirstNodeIteratorTest </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPath(){
  Map<String,String> nameToPath=new HashMap<String,String>();
  nameToPath.put("countries","/countries");
  nameToPath.put("uk","/countries/uk");
  nameToPath.put("frognal","/countries/uk/cities/london/districts/frognal");
  nameToPath.put("paris","/countries/france/cities/paris");
  DepthFirstNodeIterator iterator=new DepthFirstNodeIterator(store.getRoot());
  while (iterator.hasNext()) {
    String expectedPath=nameToPath.remove(iterator.next().getName());
    if (expectedPath == null) {
      continue;
    }
    assertEquals(expectedPath,iterator.getPath());
  }
  assertTrue(nameToPath.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterate(){
  Map<String,String[]> subtrees=new HashMap<String,String[]>();
  subtrees.put("uk",new String[]{"cities","london","districts","frognal"});
  subtrees.put("germany",new String[]{});
  subtrees.put("france",new String[]{"cities","paris"});
  DepthFirstNodeIterator iterator=new DepthFirstNodeIterator(store.getRoot());
  assertTrue(iterator.hasNext());
  assertEquals("countries",iterator.next().getName());
  for (int i=0; i < 3; i++) {
    assertTrue(iterator.hasNext());
    String country=iterator.next().getName();
    for (    String node : subtrees.remove(country)) {
      assertTrue(iterator.hasNext());
      assertEquals(node,iterator.next().getName());
    }
  }
  assertFalse(iterator.hasNext());
  assertTrue(subtrees.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.DataStoreTestBase </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSync() throws Exception {
  final int mb=1 * 1024 * 1024;
  final int blobSize=5 * mb;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  cl.run();
  try {
    assertEquals(primary.getHead(),secondary.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() < mb);
  assertTrue(secondary.size() < mb);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.FailoverMultipleClientsTestIT </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleClients() throws Exception {
  NodeStore store=new SegmentNodeStore(storeS);
  final StandbyServer server=new StandbyServer(port,storeS);
  server.start();
  SegmentTestUtils.addTestContent(store,"server");
  storeS.flush();
  StandbyClient cl1=newStandbyClient(storeC);
  StandbyClient cl2=newStandbyClient(storeC2);
  try {
    assertFalse("first client has invalid initial store!",storeS.getHead().equals(storeC.getHead()));
    assertFalse("second client has invalid initial store!",storeS.getHead().equals(storeC2.getHead()));
    assertEquals(storeC.getHead(),storeC2.getHead());
    cl1.run();
    cl2.run();
    assertEquals(storeS.getHead(),storeC.getHead());
    assertEquals(storeS.getHead(),storeC2.getHead());
    cl1.stop();
    SegmentTestUtils.addTestContent(store,"test");
    storeS.flush();
    cl1.run();
    cl2.run();
    assertEquals(storeS.getHead(),storeC2.getHead());
    assertFalse("first client updated in stopped state!",storeS.getHead().equals(storeC.getHead()));
    cl1.start();
    cl1.run();
    assertEquals(storeS.getHead(),storeC.getHead());
  }
  finally {
    server.close();
    cl1.close();
    cl2.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.FailoverSslTestIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testFailoverPlainServerSecureClient() throws Exception {
  NodeStore store=new SegmentNodeStore(storeS);
  final StandbyServer server=new StandbyServer(port,storeS);
  server.start();
  addTestContent(store,"server");
  storeS.flush();
  StandbyClient cl=newStandbyClient(storeC,port,true);
  cl.run();
  try {
    assertFalse("stores are equal but shouldn't!",storeS.getHead().equals(storeC.getHead()));
  }
  finally {
    server.close();
    cl.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testFailoverSecureServerPlainClient() throws Exception {
  NodeStore store=new SegmentNodeStore(storeS);
  final StandbyServer server=new StandbyServer(port,storeS,true);
  server.start();
  addTestContent(store,"server");
  storeS.flush();
  StandbyClient cl=newStandbyClient(storeC);
  cl.run();
  try {
    assertFalse("stores are equal but shouldn't!",storeS.getHead().equals(storeC.getHead()));
  }
  finally {
    server.close();
    cl.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.MBeanTest </h4><pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-8 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("OAK-2086") public void testClientAndServerEmptyConfig() throws Exception {
  final StandbyServer server=new StandbyServer(port,this.storeS);
  server.start();
  System.setProperty(StandbyClient.CLIENT_ID_PROPERTY_NAME,"Bar");
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  ObjectName clientStatus=new ObjectName(client.getMBeanName());
  ObjectName serverStatus=new ObjectName(server.getMBeanName());
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(3,instances.size());
    ObjectName connectionStatus=null;
    for (    ObjectName s : instances) {
      if (!s.equals(clientStatus) && !s.equals(serverStatus))       connectionStatus=s;
    }
    assertNotNull(connectionStatus);
    assertTrue(jmxServer.isRegistered(clientStatus));
    assertTrue(jmxServer.isRegistered(serverStatus));
    assertTrue(jmxServer.isRegistered(connectionStatus));
    String m=jmxServer.getAttribute(clientStatus,"Mode").toString();
    if (!m.startsWith("client: "))     fail("unexpected mode " + m);
    assertEquals("master",jmxServer.getAttribute(serverStatus,"Mode"));
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals("0",jmxServer.getAttribute(clientStatus,"FailedRequests").toString());
    assertEquals("0",jmxServer.getAttribute(clientStatus,"SecondsSinceLastSuccess").toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcFailedRequests",null,null).toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcSecondsSinceLastSuccess",null,null).toString());
    Thread.sleep(1000);
    assertEquals("0",jmxServer.getAttribute(clientStatus,"FailedRequests").toString());
    assertEquals("1",jmxServer.getAttribute(clientStatus,"SecondsSinceLastSuccess").toString());
    assertEquals("0",jmxServer.invoke(clientStatus,"calcFailedRequests",null,null).toString());
    assertEquals("1",jmxServer.invoke(clientStatus,"calcSecondsSinceLastSuccess",null,null).toString());
    assertEquals(new Long(2),jmxServer.getAttribute(connectionStatus,"TransferredSegments"));
    assertEquals(new Long(128),jmxServer.getAttribute(connectionStatus,"TransferredSegmentBytes"));
    jmxServer.invoke(serverStatus,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(serverStatus,"Running"));
    m=jmxServer.getAttribute(serverStatus,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STOPPED) && !m.equals("channel unregistered"))     fail("unexpected Status" + m);
    jmxServer.invoke(serverStatus,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    m=jmxServer.getAttribute(serverStatus,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STARTING) && !m.equals("channel unregistered"))     fail("unexpected Status" + m);
    jmxServer.invoke(clientStatus,"stop",null,null);
    assertEquals(true,jmxServer.getAttribute(serverStatus,"Running"));
    assertEquals(false,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(clientStatus,"Status"));
    jmxServer.invoke(clientStatus,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(clientStatus,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_RUNNING,jmxServer.getAttribute(clientStatus,"Status"));
  }
  finally {
    client.close();
    server.close();
  }
  assertTrue(!jmxServer.isRegistered(clientStatus));
  assertTrue(!jmxServer.isRegistered(serverStatus));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServerEmptyConfig() throws Exception {
  final StandbyServer server=new StandbyServer(this.port,this.storeS);
  server.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(1,instances.size());
    status=instances.toArray(new ObjectName[0])[0];
    assertEquals(new ObjectName(server.getMBeanName()),status);
    assertTrue(jmxServer.isRegistered(status));
    assertEquals("primary",jmxServer.getAttribute(status,"Mode"));
    String m=jmxServer.getAttribute(status,"Status").toString();
    if (!m.equals(StandbyStatusMBean.STATUS_STARTING) && !m.equals("channel unregistered"))     fail("unexpected Status " + m);
    assertEquals(StandbyStatusMBean.STATUS_STARTING,jmxServer.getAttribute(status,"Status"));
    assertEquals(true,jmxServer.getAttribute(status,"Running"));
    jmxServer.invoke(status,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
    jmxServer.invoke(status,"start",null,null);
    assertEquals(true,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_RUNNING,jmxServer.getAttribute(status,"Status"));
  }
  finally {
    server.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClientEmptyConfigNoServer() throws Exception {
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(StandbyStatusMBean.JMX_NAME + ",id=*");
  try {
    Set<ObjectName> instances=jmxServer.queryNames(status,null);
    assertEquals(1,instances.size());
    status=instances.toArray(new ObjectName[0])[0];
    assertEquals(new ObjectName(client.getMBeanName()),status);
    assertTrue(jmxServer.isRegistered(status));
    String m=jmxServer.getAttribute(status,"Mode").toString();
    if (!m.startsWith("client: "))     fail("unexpected mode " + m);
    assertEquals("0",jmxServer.getAttribute(status,"FailedRequests").toString());
    assertEquals("-1",jmxServer.getAttribute(status,"SecondsSinceLastSuccess").toString());
    assertEquals(StandbyStatusMBean.STATUS_INITIALIZING,jmxServer.getAttribute(status,"Status"));
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    jmxServer.invoke(status,"stop",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
    jmxServer.invoke(status,"start",null,null);
    assertEquals(false,jmxServer.getAttribute(status,"Running"));
    assertEquals(StandbyStatusMBean.STATUS_STOPPED,jmxServer.getAttribute(status,"Status"));
  }
  finally {
    client.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClientNoServer() throws Exception {
  System.setProperty(StandbyClient.CLIENT_ID_PROPERTY_NAME,"Foo");
  final StandbyClient client=newStandbyClient(storeC);
  client.start();
  final MBeanServer jmxServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName status=new ObjectName(client.getMBeanName());
  try {
    assertTrue(jmxServer.isRegistered(status));
    assertEquals("client: Foo",jmxServer.getAttribute(status,"Mode"));
    assertEquals("1",jmxServer.getAttribute(status,"FailedRequests").toString());
    assertEquals("-1",jmxServer.getAttribute(status,"SecondsSinceLastSuccess").toString());
    assertEquals("1",jmxServer.invoke(status,"calcFailedRequests",null,null).toString());
    assertEquals("-1",jmxServer.invoke(status,"calcSecondsSinceLastSuccess",null,null).toString());
  }
  finally {
    client.close();
  }
  assertTrue(!jmxServer.isRegistered(status));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.RecoverTestIT </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocalChanges() throws Exception {
  NodeStore store=new SegmentNodeStore(storeC);
  addTestContent(store,"client");
  final StandbyServer server=new StandbyServer(port,storeS);
  server.start();
  store=new SegmentNodeStore(storeS);
  addTestContent(store,"server");
  storeS.flush();
  StandbyClient cl=newStandbyClient(storeC);
  try {
    assertFalse("stores are not expected to be equal",storeS.getHead().equals(storeC.getHead()));
    cl.run();
    assertEquals(storeS.getHead(),storeC.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBrokenConnection() throws Exception {
  NodeStore store=new SegmentNodeStore(storeS);
  DebugSegmentStore s=new DebugSegmentStore(storeS);
  addTestContent(store,"server");
  storeS.flush();
  final StandbyServer server=new StandbyServer(port,s);
  s.createReadErrors=true;
  server.start();
  StandbyClient cl=newStandbyClient(storeC);
  cl.run();
  try {
    assertFalse("store are not expected to be equal",storeS.getHead().equals(storeC.getHead()));
    s.createReadErrors=false;
    cl.run();
    assertEquals(storeS.getHead(),storeC.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.StandbyTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSync() throws Exception {
  final int mb=1 * 1024 * 1024;
  final int blobSize=5 * mb;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize,150);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  cl.run();
  try {
    assertEquals(primary.getHead(),secondary.getHead());
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() > blobSize);
  assertTrue(secondary.size() > blobSize);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.segment.standby.StandbyTestIT </h4><pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * OAK-2430
 */
@Test public void testSyncLoop() throws Exception {
  final int blobSize=25 * 1024;
  final int dataNodes=5000;
  FileStore primary=getPrimary();
  FileStore secondary=getSecondary();
  NodeStore store=new SegmentNodeStore(primary);
  final StandbyServer server=new StandbyServer(port,primary);
  server.start();
  byte[] data=addTestContent(store,"server",blobSize,dataNodes);
  primary.flush();
  StandbyClient cl=newStandbyClient(secondary);
  try {
    for (int i=0; i < 5; i++) {
      String cp=store.checkpoint(Long.MAX_VALUE);
      primary.flush();
      cl.run();
      assertEquals(primary.getHead(),secondary.getHead());
      assertTrue(store.release(cp));
      cl.cleanup();
      assertTrue(secondary.size() > blobSize);
    }
  }
  finally {
    server.close();
    cl.close();
  }
  assertTrue(primary.size() > blobSize);
  assertTrue(secondary.size() > blobSize);
  long primaryFs=FileUtils.sizeOf(directoryS);
  long secondaryFs=FileUtils.sizeOf(directoryC);
  assertTrue(secondaryFs < primaryFs * 1.15);
  PropertyState ps=secondary.getHead().getChildNode("root").getChildNode("server").getProperty("testBlob");
  assertNotNull(ps);
  assertEquals(Type.BINARY.tag(),ps.getType().tag());
  Blob b=ps.getValue(Type.BINARY);
  assertEquals(blobSize,b.length());
  byte[] testData=new byte[blobSize];
  ByteStreams.readFully(b.getNewStream(),testData);
  assertArrayEquals(data,testData);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tika.TikaHelperTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void indexedTypes() throws Exception {
  File config=temporaryFolder.newFile();
  String configText="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + "<properties>\n" + "  <detectors>\n"+ "    <detector class=\"org.apache.tika.detect.DefaultDetector\"/>\n"+ "  </detectors>\n"+ "  <parsers>\n"+ "    <parser class=\"org.apache.tika.parser.DefaultParser\"/>\n"+ "    <parser class=\"org.apache.tika.parser.EmptyParser\">\n"+ "      <mime>application/xml</mime>\n"+ "    </parser>\n"+ "  </parsers>\n"+ "</properties>";
  Files.write(configText,config,Charsets.UTF_8);
  TikaHelper tika=new TikaHelper(config);
  assertFalse(tika.isIndexed("application/xml"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void supportedTypes() throws Exception {
  TikaHelper tika=new TikaHelper(null);
  assertTrue(tika.isSupportedMediaType("text/plain"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.tree.impl.ImmutableTreeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperties(){
  ImmutableTree orderable=immutable.getChild("orderable");
  List<String> propNames=Lists.newArrayList(TreeConstants.OAK_CHILD_ORDER,JcrConstants.JCR_PRIMARYTYPE);
  for (  PropertyState ps : orderable.getProperties()) {
    assertTrue(propNames.remove(ps.getName()));
  }
  assertEquals(2,orderable.getPropertyCount());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonExisting(){
  ImmutableTree child=immutable.getChild("nonExisting");
  assertNotNull(child);
  assertFalse(child.exists());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRootIsRoot(){
  assertTrue(immutable.isRoot());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testExists(){
  ImmutableTree child=immutable.getChild("x");
  assertTrue(child.exists());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasChild(){
  assertTrue(immutable.hasChild("x"));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNodeState(){
  assertNotNull(immutable.getNodeState());
  for (  Tree child : immutable.getChildren()) {
    assertTrue(child instanceof ImmutableTree);
    assertNotNull(((ImmutableTree)child).getNodeState());
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHiddenExists(){
  assertTrue(getHiddenTree(immutable).exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHasHiddenChild(){
  ImmutableTree parent=(ImmutableTree)TreeUtil.getTree(immutable,Text.getRelativeParent(HIDDEN_PATH,1));
  assertNotNull(parent);
  assertTrue(parent.hasChild(Text.getName(HIDDEN_PATH)));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasHiddenProperty(){
  ImmutableTree orderable=immutable.getChild("orderable");
  assertTrue(orderable.hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.plugins.version.ReadOnlyVersionManagerTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsVersionStoreTree() throws Exception {
  assertFalse(ReadOnlyVersionManager.isVersionStoreTree(root.getTree("/")));
  assertFalse(ReadOnlyVersionManager.isVersionStoreTree(root.getTree("/a")));
  assertFalse(ReadOnlyVersionManager.isVersionStoreTree(root.getTree("/a/b/c")));
  assertTrue(ReadOnlyVersionManager.isVersionStoreTree(root.getTree(VersionConstants.VERSION_STORE_PATH)));
  Tree versionHistory=versionManager.getVersionHistory(root.getTree("/a"));
  assertNotNull(versionHistory);
  assertFalse(ReadOnlyVersionManager.isVersionStoreTree(versionHistory));
  assertTrue(ReadOnlyVersionManager.isVersionStoreTree(versionHistory.getParent()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetVersionableTargetRemoved() throws Exception {
  Tree baseVersion=checkNotNull(versionManager.getBaseVersion(versionable));
  versionable.remove();
  root.commit();
  Tree t=versionManager.getVersionable(baseVersion,workspaceName);
  assertNotNull(t);
  assertFalse(t.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.FilterTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void mvp() throws Exception {
  Filter f=createFilter("//*[(@prop = 'aaa' and @prop = 'bbb' and @prop = 'ccc')]");
  assertFalse(f.isAlwaysFalse());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.QueryCostOverheadTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void getCostOverhead(){
  QueryImpl query;
  UnionQueryImpl union;
  ConstraintImpl c, c1, c2, c3, c4, c5;
  c1=new ComparisonImpl(null,null,null);
  c2=new FullTextSearchImpl(null,null,null);
  union=new UnionQueryImpl(false,new QueryImpl(null,null,c1,null,null,null),new QueryImpl(null,null,c2,null,null,null),null);
  assertFalse("we always expect false from a `UnionQueryImpl`",union.containsUnfilteredFullTextCondition());
  c1=new ComparisonImpl(null,null,null);
  c2=new FullTextSearchImpl(null,null,null);
  c=new OrImpl(c1,c2);
  query=new QueryImpl(null,null,c,null,null,null);
  assertTrue(query.containsUnfilteredFullTextCondition());
  c1=new ComparisonImpl(null,null,null);
  c2=new FullTextSearchImpl(null,null,null);
  c3=new FullTextSearchImpl(null,null,null);
  c=new OrImpl(of(c1,c2,c3));
  query=new QueryImpl(null,null,c,null,null,null);
  assertTrue(query.containsUnfilteredFullTextCondition());
  c2=new FullTextSearchImpl(null,null,null);
  c3=new FullTextSearchImpl(null,null,null);
  c4=new ComparisonImpl(null,null,null);
  c1=new OrImpl(of(c2,c3,c4));
  c5=mock(DescendantNodeImpl.class);
  c=new AndImpl(c1,c5);
  query=new QueryImpl(null,null,c,null,null,null);
  assertTrue(query.containsUnfilteredFullTextCondition());
  c=new FullTextSearchImpl(null,null,null);
  query=new QueryImpl(null,null,c,null,null,null);
  assertFalse(query.containsUnfilteredFullTextCondition());
  c1=new FullTextSearchImpl(null,null,null);
  c2=new FullTextSearchImpl(null,null,null);
  c3=new FullTextSearchImpl(null,null,null);
  c=new OrImpl(of(c1,c2,c3));
  query=new QueryImpl(null,null,c,null,null,null);
  assertFalse(query.containsUnfilteredFullTextCondition());
  c1=new ComparisonImpl(null,null,null);
  c2=new FullTextSearchImpl(null,null,null);
  c3=new FullTextSearchImpl(null,null,null);
  c=new AndImpl(of(c1,c2,c3));
  query=new QueryImpl(null,null,c,null,null,null);
  assertFalse(query.containsUnfilteredFullTextCondition());
  c1=new ComparisonImpl(null,null,null);
  c2=new ComparisonImpl(null,null,null);
  c=new AndImpl(of(c1,c2,c3));
  query=new QueryImpl(null,null,c,null,null,null);
  assertFalse(query.containsUnfilteredFullTextCondition());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.SQL2OptimiseQueryTest </h4><pre class="type-7 type-6 type-19 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * ensure that an optimisation is available for the provided queries.
 * @throws ParseException
 */
@Test public void optimise() throws ParseException {
  SQL2Parser parser=new SQL2Parser(getMappings(),getTypes(),qeSettings);
  String statement;
  Query original, optimised;
  statement="SELECT * FROM [nt:unstructured] AS c " + "WHERE " + "(c.[p1]='a' OR c.[p2]='b') ";
  original=parser.parse(statement,false);
  assertNotNull(original);
  optimised=original.buildAlternativeQuery();
  assertNotNull(optimised);
  assertNotSame(original,optimised);
  assertTrue(optimised instanceof UnionQueryImpl);
  statement="SELECT * FROM [nt:unstructured] AS c " + "WHERE " + "(c.[p1]='a' OR c.[p2]='b') "+ "AND "+ "ISDESCENDANTNODE(c, '/test') ";
  original=parser.parse(statement,false);
  assertNotNull(original);
  optimised=original.buildAlternativeQuery();
  assertNotNull(optimised);
  assertNotSame(original,optimised);
  statement="SELECT * FROM [nt:unstructured] AS c " + "WHERE " + "(c.[p1]='a' OR c.[p2]='b' OR c.[p3]='c') "+ "AND "+ "ISDESCENDANTNODE(c, '/test') ";
  original=parser.parse(statement,false);
  assertNotNull(original);
  optimised=original.buildAlternativeQuery();
  assertNotNull(optimised);
  assertNotSame(original,optimised);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.SQL2ParserTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testUnwrappedOr() throws ParseException {
  String q=new XPathToSQL2Converter().convert("/jcr:root/home//test/* [@type='t1' or @type='t2' or @type='t3']");
  String token="and b.[type] in('t1', 't2', 't3')";
  assertTrue(q.contains(token));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.ast.FullTextTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void boost() throws ParseException {
  assertEquals("\"hello\"^2",convertPattern("hello^2"));
  assertEquals("\"hello world\"^2",convertPattern("\"hello world\"^2"));
  assertTrue(test("hello^2","hello"));
  assertTrue(test("\"hello\"^0.2","hello"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void escaped() throws ParseException {
  assertEquals("\"\\\"hello world\\\"\"",convertPattern("\"\\\"hello world\\\"\""));
  assertFalse(test("\\\"hello\\\"","hello"));
  assertTrue(test("\"hello\"","\"hello\""));
  assertTrue(test("\\\"hello\\\"","\"hello\""));
  assertFalse(test("\\-1 2 3","1 2 3"));
  assertTrue(test("\\-1 2 3","-1 2 3"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void quoted() throws ParseException {
  assertEquals("\"hello world\"",convertPattern("\"hello world\""));
  assertEquals("\"hello world\" \"world\"",convertPattern("\"hello world\" world"));
  assertTrue(test("\"hello world\"","hello world"));
  assertFalse(test("\"hello world\"","world hello"));
  assertTrue(test("\"hello-world\"","hello-world"));
  assertTrue(test("\"hello\\-world\"","hello-world"));
  assertTrue(test("\"hello \\\"world\\\"\"","hello \"world\""));
  assertTrue(test("\"hello world\" -hallo","hello world"));
  assertFalse(test("\"hello world\" -hallo","hallo hello world"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void fulltextChars(){
  for (  char c : "a\u00e4\u00dfzAZ\u00c409+\u3360".toCharArray()) {
    assertTrue("char:" + c,FullTextTerm.isFullTextCharacter(c));
  }
  for (  char c : "@-.,;!?\t\n\f".toCharArray()) {
    assertFalse("char:" + c,FullTextTerm.isFullTextCharacter(c));
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void and() throws ParseException {
  assertEquals("\"hello\" \"world\"",convertPattern("hello world"));
  assertEquals("\"hello\" \"world\"",convertPattern("hello  world"));
  assertEquals("\"hello\" \"world\"",convertPattern("hello   world"));
  assertEquals("\"hello\" \"world\"",convertPattern("hello \t  world"));
  assertEquals("\"hello\" \"or\" \"world\"",convertPattern("hello or world"));
  assertFalse(test("hello world","hello"));
  assertFalse(test("hello world","world"));
  assertTrue(test("hello world","world hello"));
  assertTrue(test("hello world ","hello world"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void not() throws ParseException {
  assertEquals("\"hello\" -\"world\"",convertPattern("hello -world"));
  assertTrue(test("hello -world","hello"));
  assertFalse(test("hello -world","hello world"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void or() throws ParseException {
  assertEquals("\"hello\" OR \"world\"",convertPattern("hello OR world"));
  assertTrue(test("hello OR world","hello"));
  assertTrue(test("hello OR world","world"));
  assertFalse(test("hello OR world","hi"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.facet.FacetResultTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResult() throws Exception {
  QueryResult queryResult=mock(QueryResult.class);
  when(queryResult.getColumnNames()).thenReturn(new String[]{"rep:facet(text)","jcr:path","rep:facet(jcr:title)"});
  RowIterator rows=mock(RowIterator.class);
  when(rows.hasNext()).thenReturn(true);
  Row row=mock(Row.class);
  Value value=mock(Value.class);
  when(value.getString()).thenReturn("{}");
  when(row.getValue("rep:facet(text)")).thenReturn(value);
  Value value2=mock(Value.class);
  when(value2.getString()).thenReturn("{\"a\" : 2, \"b\" : 1}");
  when(row.getValue("rep:facet(jcr:title)")).thenReturn(value2);
  when(rows.nextRow()).thenReturn(row);
  when(queryResult.getRows()).thenReturn(rows);
  FacetResult facetResult=new FacetResult(queryResult);
  assertNotNull(facetResult.getDimensions());
  assertEquals(2,facetResult.getDimensions().size());
  assertTrue(facetResult.getDimensions().contains("text"));
  assertTrue(facetResult.getDimensions().contains("jcr:title"));
  assertNotNull(facetResult.getFacets("text"));
  assertTrue(facetResult.getFacets("text").isEmpty());
  assertNotNull(facetResult.getFacets("jcr:title"));
  assertEquals(2,facetResult.getFacets("jcr:title").size());
  assertEquals("a",facetResult.getFacets("jcr:title").get(0).getLabel());
  assertEquals(2,facetResult.getFacets("jcr:title").get(0).getCount(),0);
  assertEquals("b",facetResult.getFacets("jcr:title").get(1).getLabel());
  assertEquals(1,facetResult.getFacets("jcr:title").get(1).getCount(),0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.AdvancedIndexTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void copy() throws Exception {
  Filter f=new FilterImpl(null,"SELECT * FROM [nt:file]",new QueryEngineSettings());
  IndexPlan.Builder b=new IndexPlan.Builder();
  IndexPlan plan1=b.setEstimatedEntryCount(10).setFilter(f).setDelayed(true).build();
  IndexPlan plan2=plan1.copy();
  plan2.setFilter(new FilterImpl(null,"SELECT * FROM [oak:Unstructured]",new QueryEngineSettings()));
  assertEquals(plan1.getEstimatedEntryCount(),10);
  assertEquals(plan2.getEstimatedEntryCount(),10);
  assertTrue(plan1.isDelayed());
  assertTrue(plan2.isDelayed());
  assertEquals(plan1.getFilter().getQueryStatement(),"SELECT * FROM [nt:file]");
  assertEquals(plan2.getFilter().getQueryStatement(),"SELECT * FROM [oak:Unstructured]");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.FilterTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void pathRestrictions() throws Exception {
  FilterImpl f=new FilterImpl();
  assertEquals("/",f.getPath());
  assertEquals(Filter.PathRestriction.NO_RESTRICTION,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.ALL_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.DIRECT_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.PARENT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  f.restrictPath("/",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/y",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.DIRECT_CHILDREN,f.getPathRestriction());
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test2",Filter.PathRestriction.ALL_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x",Filter.PathRestriction.EXACT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.EXACT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  f.restrictPath("/test/y",Filter.PathRestriction.DIRECT_CHILDREN);
  assertTrue(f.isAlwaysFalse());
  f=new FilterImpl();
  f.restrictPath("/test/x/y",Filter.PathRestriction.PARENT);
  assertEquals("/test/x/y",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.ALL_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.DIRECT_CHILDREN);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test/x",Filter.PathRestriction.PARENT);
  assertEquals("/test/x",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test",Filter.PathRestriction.PARENT);
  assertEquals("/test",f.getPath());
  assertEquals(Filter.PathRestriction.PARENT,f.getPathRestriction());
  f.restrictPath("/test2",Filter.PathRestriction.EXACT);
  assertTrue(f.isAlwaysFalse());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void propertyRestriction(){
  PropertyValue one=PropertyValues.newString("1");
  PropertyValue two=PropertyValues.newString("2");
  FilterImpl f=new FilterImpl();
  assertTrue(null == f.getPropertyRestriction("x"));
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2]]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1..]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1.., ..2)]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[..2], [1.., (1.., ..2), 2]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1..]])",f.toString());
  f.restrictProperty("x",Operator.LESS_OR_EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1.., ..1]]])",f.toString());
  f.restrictProperty("x",Operator.GREATER_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[1, [1.., ..1], (1..]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.EQUAL,one);
  assertEquals("Filter(, path=*, property=[x=[1]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[1, ..1)]])",f.toString());
  f=new FilterImpl();
  f.restrictProperty("x",Operator.NOT_EQUAL,null);
  assertEquals("Filter(, path=*, property=[x=[is not null]])",f.toString());
  f.restrictProperty("x",Operator.LESS_THAN,one);
  assertEquals("Filter(, path=*, property=[x=[is not null, ..1)]])",f.toString());
  f.restrictProperty("x",Operator.EQUAL,two);
  assertEquals("Filter(, path=*, property=[x=[is not null, ..1), 2]])",f.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.query.index.TraversingIndexTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void traverse() throws Exception {
  NodeBuilder builder=EMPTY_NODE.builder();
  NodeBuilder parents=builder.child("parents");
  parents.child("p0").setProperty("id",0);
  parents.child("p1").setProperty("id",1);
  parents.child("p2").setProperty("id",2);
  NodeBuilder children=builder.child("children");
  children.child("c1").setProperty("p","1");
  children.child("c2").setProperty("p","1");
  children.child("c3").setProperty("p","2");
  children.child("c4").setProperty("p","3");
  NodeState root=builder.getNodeState();
  TraversingIndex t=new TraversingIndex();
  FilterImpl f=new FilterImpl();
  f.setPath("/");
  Cursor c=t.query(f,root);
  List<String> paths=new ArrayList<String>();
  while (c.hasNext()) {
    paths.add(c.next().getPath());
  }
  Collections.sort(paths);
  assertEquals(Arrays.asList("/","/children","/children/c1","/children/c2","/children/c3","/children/c4","/parents","/parents/p0","/parents/p1","/parents/p2"),paths);
  assertFalse(c.hasNext());
  assertFalse(c.hasNext());
  f.setPath("/nowhere");
  c=t.query(f,root);
  assertFalse(c.hasNext());
  assertFalse(c.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteResultsTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetColumns(){
  String[] columns={"a","b"};
  Result result=mock(Result.class);
  doReturn(columns).when(result).getColumnNames();
  assertTrue(elementsEqual(asList(columns),createContentRemoteResults(result).getColumns()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetSelectors(){
  String[] selectors={"a","b"};
  Result result=mock(Result.class);
  doReturn(selectors).when(result).getSelectorNames();
  assertTrue(elementsEqual(asList(selectors),createContentRemoteResults(result).getSelectors()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.content.ContentRemoteTreeTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiBinaryIdProperty(){
  Blob blob=mock(Blob.class);
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARIES).when(property).getType();
  doReturn(singletonList(blob)).when(property).getValue(Type.BINARIES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("id").when(binaries).put(blob);
  Map<String,RemoteValue> properties=createTree(tree,binaries).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiBinaryId());
  assertEquals("id",getOnlyElement(properties.get("name").asMultiBinaryId()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReferenceProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.REFERENCE).when(property).getType();
  doReturn("value").when(property).getValue(Type.REFERENCE);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isReference());
  assertEquals("value",properties.get("name").asReference());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiBinaryProperty(){
  InputStream stream=mock(InputStream.class);
  Blob blob=mock(Blob.class);
  doReturn(stream).when(blob).getNewStream();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARIES).when(property).getType();
  doReturn(singletonList(blob)).when(property).getValue(Type.BINARIES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public long getBinaryThreshold(){
      return Long.MAX_VALUE;
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiBinary());
  assertEquals(stream,getOnlyElement(properties.get("name").asMultiBinary()).get());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiDecimalProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DECIMALS).when(property).getType();
  doReturn(singletonList(BigDecimal.ONE)).when(property).getValue(Type.DECIMALS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiDecimal());
  assertEquals(BigDecimal.ONE,getOnlyElement(properties.get("name").asMultiDecimal()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildren(){
  Tree child=mock(Tree.class);
  doReturn("child").when(child).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(child)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getDepth(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("child"));
  assertNotNull(children.get("child"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBinaryIdProperty(){
  Blob blob=mock(Blob.class);
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARY).when(property).getType();
  doReturn(blob).when(property).getValue(Type.BINARY);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteBinaries binaries=mock(ContentRemoteBinaries.class);
  doReturn("id").when(binaries).put(blob);
  Map<String,RemoteValue> properties=createTree(tree,binaries).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isBinaryId());
  assertEquals("id",properties.get("name").asBinaryId());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiDoubleProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DOUBLES).when(property).getType();
  doReturn(singletonList(4.2)).when(property).getValue(Type.DOUBLES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiDouble());
  assertEquals(4.2,getOnlyElement(properties.get("name").asMultiDouble()),1e-9);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFilterPropertyOut(){
  PropertyState fooProperty=mock(PropertyState.class);
  doReturn("foo").when(fooProperty).getName();
  doReturn(Type.BOOLEAN).when(fooProperty).getType();
  doReturn(true).when(fooProperty).getValue(Type.BOOLEAN);
  PropertyState barProperty=mock(PropertyState.class);
  doReturn("bar").when(barProperty).getName();
  doReturn(Type.BOOLEAN).when(barProperty).getType();
  doReturn(true).when(barProperty).getValue(Type.BOOLEAN);
  Tree tree=mock(Tree.class);
  doReturn(asList(fooProperty,barProperty)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getPropertyFilters(){
      return newHashSet("-bar");
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("foo"));
  assertFalse(properties.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithCountTooBig(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenCount(){
      return 3;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithIncludeFilters(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getNodeFilters(){
      return newHashSet("foo");
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBooleanProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BOOLEAN).when(property).getType();
  doReturn(true).when(property).getValue(Type.BOOLEAN);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isBoolean());
  assertEquals(true,properties.get("name").asBoolean());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildrenMaxDepth(){
  Tree child=mock(Tree.class);
  doReturn("child").when(child).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(child)).when(tree).getChildren();
  Map<String,RemoteTree> children=createTree(tree).getChildren();
  assertTrue(children.containsKey("child"));
  assertNull(children.get("child"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoubleProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DOUBLE).when(property).getType();
  doReturn(4.2).when(property).getValue(Type.DOUBLE);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isDouble());
  assertEquals(4.2,properties.get("name").asDouble(),1e-9);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiBooleanProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BOOLEANS).when(property).getType();
  doReturn(singletonList(true)).when(property).getValue(Type.BOOLEANS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiBoolean());
  assertEquals(true,getOnlyElement(properties.get("name").asMultiBoolean()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWeakReferenceProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.WEAKREFERENCE).when(property).getType();
  doReturn("value").when(property).getValue(Type.WEAKREFERENCE);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isWeakReference());
  assertEquals("value",properties.get("name").asWeakReference());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiTextProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.STRINGS).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.STRINGS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiText());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiText()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTextProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.STRING).when(property).getType();
  doReturn("value").when(property).getValue(Type.STRING);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isText());
  assertEquals("value",properties.get("name").asText());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBinaryProperty(){
  InputStream stream=mock(InputStream.class);
  Blob blob=mock(Blob.class);
  doReturn(stream).when(blob).getNewStream();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.BINARY).when(property).getType();
  doReturn(blob).when(property).getValue(Type.BINARY);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public long getBinaryThreshold(){
      return Long.MAX_VALUE;
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isBinary());
  assertEquals(stream,properties.get("name").asBinary().get());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithNegativeCount(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenCount(){
      return -1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiNameProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.NAMES).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.NAMES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiName());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiName()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithNegativeStart(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenStart(){
      return -1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiUriProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.URIS).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.URIS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiUri());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiUri()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLongProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.LONG).when(property).getType();
  doReturn(42L).when(property).getValue(Type.LONG);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isLong());
  assertEquals(42L,properties.get("name").asLong().longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiLongProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.LONGS).when(property).getType();
  doReturn(singletonList(42L)).when(property).getValue(Type.LONGS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiLong());
  assertEquals(42L,getOnlyElement(properties.get("name").asMultiLong()).longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPathProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.PATH).when(property).getType();
  doReturn("value").when(property).getValue(Type.PATH);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isPath());
  assertEquals("value",properties.get("name").asPath());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiPathProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.PATHS).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.PATHS);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiPath());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiPath()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiReferenceProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.REFERENCES).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.REFERENCES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiReference());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiReference()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetDateProperty(){
  Calendar calendar=Calendar.getInstance();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DATE).when(property).getType();
  doReturn(ISO8601.format(calendar)).when(property).getValue(Type.DATE);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isDate());
  assertEquals(calendar.getTimeInMillis(),properties.get("name").asDate().longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithStartTooBig(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenStart(){
      return 2;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.NAME).when(property).getType();
  doReturn("value").when(property).getValue(Type.NAME);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isName());
  assertEquals("value",properties.get("name").asName());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFilterPropertyIn(){
  PropertyState fooProperty=mock(PropertyState.class);
  doReturn("foo").when(fooProperty).getName();
  doReturn(Type.BOOLEAN).when(fooProperty).getType();
  doReturn(true).when(fooProperty).getValue(Type.BOOLEAN);
  PropertyState barProperty=mock(PropertyState.class);
  doReturn("bar").when(barProperty).getName();
  doReturn(Type.BOOLEAN).when(barProperty).getType();
  doReturn(true).when(barProperty).getValue(Type.BOOLEAN);
  Tree tree=mock(Tree.class);
  doReturn(asList(fooProperty,barProperty)).when(tree).getProperties();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getPropertyFilters(){
      return newHashSet("foo");
    }
  }
);
  Map<String,RemoteValue> properties=remoteTree.getProperties();
  assertTrue(properties.containsKey("foo"));
  assertFalse(properties.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecimalProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DECIMAL).when(property).getType();
  doReturn(BigDecimal.ONE).when(property).getValue(Type.DECIMAL);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isDecimal());
  assertEquals(BigDecimal.ONE,properties.get("name").asDecimal());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiWeakReferenceProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.WEAKREFERENCES).when(property).getType();
  doReturn(singletonList("value")).when(property).getValue(Type.WEAKREFERENCES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiWeakReference());
  assertEquals("value",getOnlyElement(properties.get("name").asMultiWeakReference()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUriProperty(){
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.URI).when(property).getType();
  doReturn("value").when(property).getValue(Type.URI);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isUri());
  assertEquals("value",properties.get("name").asUri());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMultiDateProperty(){
  Calendar calendar=Calendar.getInstance();
  PropertyState property=mock(PropertyState.class);
  doReturn("name").when(property).getName();
  doReturn(Type.DATES).when(property).getType();
  doReturn(singletonList(ISO8601.format(calendar))).when(property).getValue(Type.DATES);
  Tree tree=mock(Tree.class);
  doReturn(singletonList(property)).when(tree).getProperties();
  Map<String,RemoteValue> properties=createTree(tree).getProperties();
  assertTrue(properties.containsKey("name"));
  assertTrue(properties.get("name").isMultiDate());
  assertEquals(calendar.getTimeInMillis(),getOnlyElement(properties.get("name").asMultiDate()).longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithExcludeFilters(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getNodeFilters(){
      return newHashSet("-bar");
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithSlicingAndFiltering(){
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree baz=mock(Tree.class);
  doReturn("baz").when(baz).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(bar,foo,baz)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public Set<String> getNodeFilters(){
      return Sets.newHashSet("ba*");
    }
    @Override public int getChildrenStart(){
      return 1;
    }
    @Override public int getChildrenCount(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("bar"));
  assertFalse(children.containsKey("foo"));
  assertFalse(children.containsKey("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithSlicing(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree baz=mock(Tree.class);
  doReturn("baz").when(baz).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar,baz)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenStart(){
      return 1;
    }
    @Override public int getChildrenCount(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
  assertFalse(children.containsKey("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithZeroCount(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenCount(){
      return 0;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithCount(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenCount(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertTrue(children.containsKey("foo"));
  assertFalse(children.containsKey("bar"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildrenWithStart(){
  Tree foo=mock(Tree.class);
  doReturn("foo").when(foo).getName();
  Tree bar=mock(Tree.class);
  doReturn("bar").when(bar).getName();
  Tree tree=mock(Tree.class);
  doReturn(asList(foo,bar)).when(tree).getChildren();
  ContentRemoteTree remoteTree=createTree(tree,new RemoteTreeFilters(){
    @Override public int getChildrenStart(){
      return 1;
    }
  }
);
  Map<String,RemoteTree> children=remoteTree.getChildren();
  assertFalse(children.containsKey("foo"));
  assertTrue(children.containsKey("bar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.filter.FilterTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWildcard(){
  Filter filter=new Filter("na*e");
  assertTrue(filter.matches("nae"));
  assertTrue(filter.matches("name"));
  assertTrue(filter.matches("namme"));
  assertFalse(filter.matches("nam"));
  assertFalse(filter.matches("named"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testExact(){
  Filter filter=new Filter("name");
  assertTrue(filter.matches("name"));
  assertFalse(filter.matches("nam"));
  assertFalse(filter.matches("named"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEscapedWildcard(){
  Filter filter=new Filter("na\\*e");
  assertTrue(filter.matches("na*e"));
  assertFalse(filter.matches("nae"));
  assertFalse(filter.matches("name"));
  assertFalse(filter.matches("namme"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.filter.FiltersTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEmptyFilters(){
  Filters filters=new Filters(new HashSet<String>());
  assertTrue(filters.matches("foo"));
  assertTrue(filters.matches("bar"));
  assertTrue(filters.matches("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testExcludeFilter(){
  Filters filters=new Filters(Sets.newHashSet("-foo"));
  assertFalse(filters.matches("foo"));
  assertTrue(filters.matches("bar"));
  assertTrue(filters.matches("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIncludeExcludeFilters(){
  Filters filters=new Filters(Sets.newHashSet("ba*","-baz"));
  assertFalse(filters.matches("foo"));
  assertTrue(filters.matches("bar"));
  assertFalse(filters.matches("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIncludeFilter(){
  Filters filters=new Filters(Sets.newHashSet("ba*"));
  assertFalse(filters.matches("foo"));
  assertTrue(filters.matches("bar"));
  assertTrue(filters.matches("baz"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.http.handler.RemoteServerIT </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithWithNodeFilters() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree foo=node.addChild("foo");
  foo.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree bar=node.addChild("bar");
  bar.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree baz=node.addChild("baz");
  baz.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("children","ba*").queryString("children","-baz").asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("children").has("foo"));
  assertTrue(body.getJSONObject("children").has("bar"));
  assertFalse(body.getJSONObject("children").has("baz"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.REFERENCES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("references",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeUriProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","http://acme.org",Type.URI);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("uri",property.getString("type"));
  assertEquals("http://acme.org",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiWeakReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.WEAKREFERENCES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("weakReferences",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithWithPropertyFilters() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("foo","foo",Type.STRING);
  node.setProperty("bar","bar",Type.STRING);
  node.setProperty("baz","baz",Type.STRING);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("properties","ba*").queryString("properties","-baz").asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("properties").has("foo"));
  assertTrue(body.getJSONObject("properties").has("bar"));
  assertFalse(body.getJSONObject("properties").has("baz"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryRangeOffsetOnly() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes = 3").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*3\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("7",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("3456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiBooleanProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(true,false),Type.BOOLEANS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("booleans",property.getString("type"));
  assertEquals(true,property.getJSONArray("value").getBoolean(0));
  assertEquals(false,property.getJSONArray("value").getBoolean(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiLongProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(4L,2L),Type.LONGS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("longs",property.getString("type"));
  assertEquals(4L,property.getJSONArray("value").getLong(0));
  assertEquals(2L,property.getJSONArray("value").getLong(1));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryMultipleRanges() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0,-1 , 2-2, 3-6").asString();
  assertEquals(206,binaryResponse.getStatus());
  String contentType=binaryResponse.getHeaders().getFirst("content-type");
  assertNotNull(contentType);
  Pattern multipartDelimiterPattern=Pattern.compile("^\\s*multipart/byteranges;\\s*boundary=(.+)");
  Matcher matcher=multipartDelimiterPattern.matcher(contentType);
  assertTrue(matcher.matches());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeNameProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.NAME);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("name",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDecimalProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(BigDecimal.ZERO,BigDecimal.ONE),Type.DECIMALS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("decimals",property.getString("type"));
  assertEquals("0",property.getJSONArray("value").getString(0));
  assertEquals("1",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiStringProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("a","b"),Type.STRINGS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("strings",property.getString("type"));
  assertEquals("a",property.getJSONArray("value").getString(0));
  assertEquals("b",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreePathProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","/value",Type.PATH);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("path",property.getString("type"));
  assertEquals("/value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWithDepth() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree child=node.addChild("child");
  child.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree grandChild=child.addChild("grandChild");
  grandChild.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").queryString("depth",1).asJson();
  assertEquals(200,response.getStatus());
  JSONObject body=response.getBody().getObject();
  assertFalse(body.getJSONObject("children").isNull("child"));
  assertTrue(body.getJSONObject("children").getJSONObject("child").getJSONObject("children").isNull("grandChild"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeLongProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",42L,Type.LONG);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("long",property.getString("type"));
  assertEquals(42L,property.getLong("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeStringProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","a",Type.STRING);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("string",property.getString("type"));
  assertEquals("a",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDecimalProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",BigDecimal.ZERO,Type.DECIMAL);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("decimal",property.getString("type"));
  assertEquals("0",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeWeakReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.WEAKREFERENCE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("weakReference",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiNameProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("first","second"),Type.NAMES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("names",property.getString("type"));
  assertEquals("first",property.getJSONArray("value").getString(0));
  assertEquals("second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDateProperty() throws Exception {
  Calendar calendar=Calendar.getInstance();
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(asString(calendar),asString(calendar)),Type.DATES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("dates",property.getString("type"));
  assertEquals(calendar.getTimeInMillis(),property.getJSONArray("value").getLong(0));
  assertEquals(calendar.getTimeInMillis(),property.getJSONArray("value").getLong(1));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiBinaryProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",root.createBlob(asStream("a")),Type.BINARY);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("binaryId",property.getString("type"));
  assertFalse(property.getString("value").isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeBinaryProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(root.createBlob(asStream("a")),root.createBlob(asStream("b"))),Type.BINARIES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("binaryIds",property.getString("type"));
  assertFalse(property.getJSONArray("value").getString(0).isEmpty());
  assertFalse(property.getJSONArray("value").getString(1).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiDoubleProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList(4.2,2.4),Type.DOUBLES);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("doubles",property.getString("type"));
  assertEquals(4.2,property.getJSONArray("value").getDouble(0),1e-10);
  assertEquals(2.4,property.getJSONArray("value").getDouble(1),1e-10);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeReferenceProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property","value",Type.REFERENCE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("reference",property.getString("type"));
  assertEquals("value",property.getString("value"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadLastRevisionTreeChildren() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree child=node.addChild("child");
  child.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSearchLastRevision() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree test=root.getTree("/").addChild("test");
  test.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree n1=test.addChild("one");
  n1.setProperty("name","one",Type.STRING);
  n1.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  Tree n2=test.addChild("two");
  n2.setProperty("name","two",Type.STRING);
  n2.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree")).basicAuth("admin","admin").queryString("query","select name from nt:unstructured as node where jcr:path like '/test/%'").queryString("language","sql").queryString("offset",0).queryString("limit",10).asJson();
  assertEquals(200,response.getStatus());
  JSONObject results=response.getBody().getObject();
  assertNotNull(results.getLong("total"));
  List<String> columns=getStringArray(results,"columns");
  assertTrue(columns.contains("name"));
  assertTrue(columns.contains("jcr:path"));
  List<String> selectors=getStringArray(results,"selectors");
  assertTrue(selectors.contains("node"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateBinary() throws Exception {
  HttpResponse<JsonNode> response=post(resource("/binaries")).basicAuth("admin","admin").body("body").asJson();
  assertEquals(201,response.getStatus());
  String binaryId=response.getBody().getObject().getString("binaryId");
  assertFalse(binaryId.isEmpty());
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).asString();
  assertEquals(200,binaryResponse.getStatus());
  assertEquals("body",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadLastRevisionTreeHasMoreChildren() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertFalse(body.getBoolean("hasMoreChildren"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeBooleanProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",true,Type.BOOLEAN);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("boolean",property.getString("type"));
  assertEquals(true,property.getBoolean("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiPathProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("/first","/second"),Type.PATHS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("paths",property.getString("type"));
  assertEquals("/first",property.getJSONArray("value").getString(0));
  assertEquals("/second",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinaryRangeSuffix() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-10").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-3").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*7\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("3",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=-1").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeMultiUriProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asList("http://acme.org","http://acme.com"),Type.URIS);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("uris",property.getString("type"));
  assertEquals("http://acme.org",property.getJSONArray("value").getString(0));
  assertEquals("http://acme.com",property.getJSONArray("value").getString(1));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadLastRevisionTreeRevision() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  assertFalse(response.getHeaders().getFirst("oak-revision").isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadBinarySingleRange() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("binary",root.createBlob(asStream("0123456789")),Type.BINARY);
  root.commit();
  HttpResponse<JsonNode> response=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson();
  String binaryId=response.getBody().getObject().getJSONObject("properties").getJSONObject("binary").getString("value");
  HttpResponse<String> binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0-9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=0-").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*0\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("10",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("0123456789",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes=3- 6").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*3\\s*\\-\\s*6\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("4",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("3456",binaryResponse.getBody());
  binaryResponse=get(resource("/binaries/{binaryId}")).basicAuth("admin","admin").routeParam("binaryId",binaryId).header("Range","bytes= 9 - 9").asString();
  assertEquals(206,binaryResponse.getStatus());
  assertTrue(binaryResponse.getHeaders().containsKey("content-range"));
  assertTrue(binaryResponse.getHeaders().getFirst("content-range").matches("^\\s*9\\s*\\-\\s*9\\s*/\\s*(10|\\*)\\s*$"));
  assertEquals("1",binaryResponse.getHeaders().getFirst("content-length"));
  assertEquals("9",binaryResponse.getBody());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDateProperty() throws Exception {
  Calendar calendar=Calendar.getInstance();
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",asString(calendar),Type.DATE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("date",property.getString("type"));
  assertEquals(calendar.getTimeInMillis(),property.getLong("value"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadLastRevisionTreeDoubleProperty() throws Exception {
  Root root=contentSession.getLatestRoot();
  Tree node=root.getTree("/").addChild("node");
  node.setProperty("jcr:primaryType","nt:unstructured",Type.NAME);
  node.setProperty("property",4.2,Type.DOUBLE);
  root.commit();
  JSONObject body=get(resource("/revisions/last/tree/node")).basicAuth("admin","admin").asJson().getBody().getObject();
  assertTrue(body.getJSONObject("children").isNull("child"));
  JSONObject property=body.getJSONObject("properties").getJSONObject("property");
  assertEquals("double",property.getString("type"));
  assertEquals(4.2,property.getDouble("value"),1e-10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.http.matcher.AllMatcherTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSingleMatcher(){
  assertFalse(matches(false));
  assertTrue(matches(true));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNoMatchers(){
  assertTrue(matches());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMatchers(){
  assertFalse(matches(false,false));
  assertFalse(matches(false,true));
  assertFalse(matches(true,false));
  assertTrue(matches(true,true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.http.matcher.MethodMatcherTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCaseInsensitiveMatch(){
  assertTrue(matches("GET","get"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNoMatch(){
  assertFalse(matches("GET","PUT"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMatch(){
  assertTrue(matches("GET","GET"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.remote.http.matcher.PathMatcherTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMatch(){
  assertTrue(matches("/test","/test"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCaseSensitiveMatch(){
  assertFalse(matches("/test","/Test"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNoPathInfo(){
  assertFalse(matches(null,"/test"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPatternMatch(){
  assertTrue(matches("/test/something","/test/.*"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.run.osgi.OakOSGiRepositoryFactoryTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepositoryTar() throws Exception {
  copyConfig("tar");
  config.put(BundleActivator.class.getName(),new TestActivator());
  Repository repository=repositoryFactory.getRepository(config);
  assertTrue("test activator should have been called on startup",calledOnStart);
  TimeUnit.SECONDS.sleep(1);
  assertNotNull(repository);
  System.out.println("Repository started ");
  basicCrudTest(repository);
  testCallback(repository);
  shutdown(repository);
  assertTrue("test activator should have been called on stop",calledOnStop);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.TokenDefaultLoginModuleTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTokenCreationWithImpersonationAttributes() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    sc.setAttribute(".token.mandatory","something");
    sc.setAttribute("attr","val");
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,new AuthInfoImpl(((SimpleCredentials)getAdminCredentials()).getUserID(),Collections.<String,Object>emptyMap(),Collections.<Principal>emptySet()));
    cs=login(ic);
    AuthInfo ai=cs.getAuthInfo();
    Set<String> attrNames=ImmutableSet.copyOf(ai.getAttributeNames());
    assertTrue(attrNames.contains("attr"));
    assertFalse(attrNames.contains(".token"));
    assertFalse(attrNames.contains(".token.mandatory"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTokenCreationWithAttributes() throws Exception {
  ContentSession cs=null;
  try {
    SimpleCredentials sc=(SimpleCredentials)getAdminCredentials();
    sc.setAttribute(".token","");
    sc.setAttribute(".token.mandatory","something");
    sc.setAttribute("attr","val");
    cs=login(sc);
    AuthInfo ai=cs.getAuthInfo();
    Set<String> attrNames=ImmutableSet.copyOf(ai.getAttributeNames());
    assertTrue(attrNames.contains("attr"));
    assertFalse(attrNames.contains(".token"));
    assertFalse(attrNames.contains(".token.mandatory"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LargeLdapProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetMembers() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(GROUP_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("Group instance",id instanceof ExternalGroup);
  ExternalGroup grp=(ExternalGroup)id;
  assertIfEquals("Group members",TEST_MEMBERS,grp.getDeclaredMembers());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LdapLoginTestBase </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReLogin() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    Authorizable user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertFalse(root.getTree(user.getPath()).hasProperty(UserConstants.REP_PASSWORD));
    cs.close();
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    assertEquals(USER_ID,cs.getAuthInfo().getUserID());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncUpdate() throws Exception {
  Authorizable user=userManager.createUser(USER_ID,null);
  ExternalUser externalUser=idp.getUser(USER_ID);
  user.setProperty("rep:externalId",new ValueFactoryImpl(root,NamePathMapper.DEFAULT).createValue(externalUser.getExternalId().getString()));
  root.commit();
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertTrue(user.hasProperty(USER_PROP));
    assertNull(userManager.getAuthorizable(GROUP_DN));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUser() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID,USER_PWD.toCharArray()));
    root.refresh();
    Authorizable user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertTrue(user.hasProperty(USER_PROP));
    Tree userTree=cs.getLatestRoot().getTree(user.getPath());
    assertFalse(userTree.hasProperty(UserConstants.REP_PASSWORD));
    assertNull(userManager.getAuthorizable(GROUP_DN));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUserCaseInsensitive() throws Exception {
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(USER_ID.toUpperCase(),USER_PWD.toCharArray()));
    root.refresh();
    Authorizable user=userManager.getAuthorizable(USER_ID);
    assertNotNull(user);
    assertTrue(user.hasProperty(USER_PROP));
    Tree userTree=cs.getLatestRoot().getTree(user.getPath());
    assertFalse(userTree.hasProperty(UserConstants.REP_PASSWORD));
    assertNull(userManager.getAuthorizable(GROUP_DN));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.ldap.LdapProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetMembers() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_GROUP1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("Group instance",id instanceof ExternalGroup);
  ExternalGroup grp=(ExternalGroup)id;
  assertIfEquals("Group members",TEST_GROUP1_MEMBERS,grp.getDeclaredMembers());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUserByRef() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_USER1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("User instance",id instanceof ExternalUser);
  assertEquals("User ID",TEST_USER1_UID,id.getId());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test case to reproduce OAK-3396 where an ldap user entry
 * without a uid caused a NullpointerException in LdapIdentityProvider.createUser
 */
@Test public void testListUsersWithMissingUid() throws Exception {
  InputStream erroneousDIF=LdapProviderTest.class.getResourceAsStream(ERRONEOUS_LDIF);
  LDAP_SERVER.loadLdif(erroneousDIF);
  Iterator<ExternalUser> users=idp.listUsers();
  while (users.hasNext()) {
    ExternalUser user=users.next();
    assertTrue(!user.getPrincipalName().startsWith("cn=Faulty Entry"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetGroups() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_USER1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("User instance",id instanceof ExternalUser);
  assertIfEquals("Groups",TEST_USER1_GROUPS,id.getDeclaredGroups());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetGroups2() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_USER0_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("User instance",id instanceof ExternalUser);
  assertIfEquals("Groups",TEST_USER0_GROUPS,id.getDeclaredGroups());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetGroupByRef() throws Exception {
  ExternalIdentityRef ref=new ExternalIdentityRef(TEST_GROUP1_DN,IDP_NAME);
  ExternalIdentity id=idp.getIdentity(ref);
  assertTrue("Group instance",id instanceof ExternalGroup);
  assertEquals("Group Name",TEST_GROUP1_NAME,id.getId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.CompositeTokenConfigurationTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTokenProvider(){
  CompositeTokenConfiguration ctc=(CompositeTokenConfiguration)compositeConfiguration;
  TokenProvider tp=ctc.getTokenProvider(root);
  assertNotNull(tp);
  assertFalse(tp instanceof CompositeTokenProvider);
  TokenConfiguration tc=new TokenConfigurationImpl(getSecurityProvider());
  setDefault(tc);
  tp=ctc.getTokenProvider(root);
  assertNotNull(tp);
  assertFalse(tp instanceof CompositeTokenProvider);
  assertTrue(tp instanceof TokenProviderImpl);
  addConfiguration(tc);
  tp=ctc.getTokenProvider(root);
  assertNotNull(tp);
  assertFalse(tp instanceof CompositeTokenProvider);
  assertTrue(tp instanceof TokenProviderImpl);
  addConfiguration(new TokenConfigurationImpl(getSecurityProvider()));
  tp=ctc.getTokenProvider(root);
  assertNotNull(tp);
  assertTrue(tp instanceof CompositeTokenProvider);
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmpty(){
  List<TokenConfiguration> configs=getConfigurations();
  assertNotNull(configs);
  assertTrue(configs.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenAuthenticationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAuthenticate() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertTrue(authentication.authenticate(new TokenCredentials(info.getToken())));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthenticateWithoutTokenProvider() throws Exception {
  Authentication authentication=new TokenAuthentication(null);
  assertFalse(authentication.authenticate(new TokenCredentials("token")));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthenticateWithInvalidCredentials() throws Exception {
  List<Credentials> invalid=new ArrayList<Credentials>();
  invalid.add(new GuestCredentials());
  invalid.add(new SimpleCredentials(userId,new char[0]));
  for (  Credentials creds : invalid) {
    assertFalse(authentication.authenticate(creds));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenConfigurationImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRefresh(){
  boolean refresh=getConfig(TokenConfiguration.class).getParameters().getConfigValue(TokenProvider.PARAM_TOKEN_REFRESH,false);
  assertTrue(refresh);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenInfoTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testResetTokenExpiration() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertFalse(info.resetExpiration(new Date().getTime()));
  long loginTime=new Date().getTime() + 3600000;
  assertFalse(info.isExpired(loginTime));
  assertTrue(info.resetExpiration(loginTime));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsExpired(){
  long loginTime=new Date().getTime();
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertFalse(info.isExpired(loginTime));
  loginTime=new Date().getTime() + 3600000;
  assertFalse(info.isExpired(loginTime));
  long expiredTime=new Date().getTime() + 7200001;
  assertTrue(info.isExpired(expiredTime));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveToken() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertTrue(info.remove());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAttributes(){
  Map<String,String> reserved=new HashMap<String,String>();
  reserved.put(TOKEN_ATTRIBUTE,"value");
  reserved.put(TOKEN_ATTRIBUTE_KEY,"value");
  reserved.put(TOKEN_ATTRIBUTE_EXPIRY,"value");
  Map<String,String> privateAttributes=new HashMap<String,String>();
  privateAttributes.put(".token_exp","value");
  privateAttributes.put(".tokenTest","value");
  privateAttributes.put(".token_something","value");
  Map<String,String> publicAttributes=new HashMap<String,String>();
  publicAttributes.put("any","value");
  publicAttributes.put("another","value");
  Map<String,String> attributes=new HashMap<String,String>();
  attributes.putAll(reserved);
  attributes.putAll(publicAttributes);
  attributes.putAll(privateAttributes);
  TokenInfo info=tokenProvider.createToken(userId,attributes);
  Map<String,String> pubAttr=info.getPublicAttributes();
  assertEquals("public attributes",publicAttributes.size(),pubAttr.size());
  for (  String key : publicAttributes.keySet()) {
    assertTrue("public attribute " + key + " not contained",pubAttr.containsKey(key));
    assertEquals("public attribute " + key,publicAttributes.get(key),pubAttr.get(key));
  }
  Map<String,String> privAttr=info.getPrivateAttributes();
  assertEquals("private attributes",privateAttributes.size(),privAttr.size());
  for (  String key : privateAttributes.keySet()) {
    assertTrue("private attribute " + key + " not contained",privAttr.containsKey(key));
    assertEquals("private attribute" + key,privateAttributes.get(key),privAttr.get(key));
  }
  for (  String key : reserved.keySet()) {
    assertFalse("reserved attribute " + key,privAttr.containsKey(key));
    assertFalse("reserved attribute " + key,pubAttr.containsKey(key));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testResetTokenExpirationExpiredToken() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  long expiredTime=new Date().getTime() + 7200001;
  assertTrue(info.isExpired(expiredTime));
  assertFalse(info.resetExpiration(expiredTime));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveToken2() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertTrue(info.remove());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveTokenRemovesNode() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree userTree=root.getTree(getUserManager(root).getAuthorizable(userId).getPath());
  Tree tokens=userTree.getChild(TOKENS_NODE_NAME);
  String tokenNodePath=tokens.getChildren().iterator().next().getPath();
  info.remove();
  assertFalse(root.getTree(tokenNodePath).exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMatches(){
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  Map<String,String> attributes=new HashMap<String,String>();
  attributes.put("something","value");
  info=tokenProvider.createToken(userId,attributes);
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  attributes.put(".token-something","mandatory");
  info=tokenProvider.createToken(userId,attributes);
  assertFalse(info.matches(new TokenCredentials(info.getToken())));
  TokenCredentials tc=new TokenCredentials(info.getToken());
  tc.setAttribute(".token-something","mandatory");
  assertTrue(info.matches(tc));
  tc.setAttribute("another","value");
  assertTrue(info.matches(tc));
  tc.setAttribute(".token_ignored","value");
  assertTrue(info.matches(tc));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenNoRefreshTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotReset(){
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  assertNotNull(info);
  assertFalse(info.resetExpiration(new Date().getTime()));
  long loginTime=new Date().getTime() + 3600000;
  assertFalse(info.resetExpiration(loginTime));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.token.TokenProviderImplTest </h4><pre class="type-9 type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTokenNode() throws Exception {
  Map<String,String> reserved=new HashMap<String,String>();
  reserved.put(TOKEN_ATTRIBUTE,"value");
  reserved.put(TOKEN_ATTRIBUTE_KEY,"value");
  reserved.put(TOKEN_ATTRIBUTE_EXPIRY,"value");
  Map<String,String> privateAttributes=new HashMap<String,String>();
  privateAttributes.put(".token_exp","value");
  privateAttributes.put(".tokenTest","value");
  privateAttributes.put(".token_something","value");
  Map<String,String> publicAttributes=new HashMap<String,String>();
  publicAttributes.put("any","value");
  publicAttributes.put("another","value");
  Map<String,String> attributes=new HashMap<String,String>();
  attributes.putAll(reserved);
  attributes.putAll(publicAttributes);
  attributes.putAll(privateAttributes);
  TokenInfo info=tokenProvider.createToken(userId,attributes);
  Tree tokenTree=getTokenTree(info);
  PropertyState prop=tokenTree.getProperty(TOKEN_ATTRIBUTE_KEY);
  assertNotNull(prop);
  assertEquals(Type.STRING,prop.getType());
  prop=tokenTree.getProperty(TOKEN_ATTRIBUTE_EXPIRY);
  assertNotNull(prop);
  assertEquals(Type.DATE,prop.getType());
  for (  String key : reserved.keySet()) {
    PropertyState p=tokenTree.getProperty(key);
    if (p != null) {
      assertFalse(reserved.get(key).equals(p.getValue(Type.STRING)));
    }
  }
  for (  String key : privateAttributes.keySet()) {
    assertEquals(privateAttributes.get(key),tokenTree.getProperty(key).getValue(Type.STRING));
  }
  for (  String key : publicAttributes.keySet()) {
    assertEquals(publicAttributes.get(key),tokenTree.getProperty(key).getValue(Type.STRING));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateTokenWithExpirationParam() throws Exception {
  SimpleCredentials sc=new SimpleCredentials(userId,new char[0]);
  sc.setAttribute(TokenProvider.PARAM_TOKEN_EXPIRATION,100000);
  TokenInfo info=tokenProvider.createToken(sc);
  assertTokenInfo(info,userId);
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenTree);
  assertTrue(tokenTree.exists());
  assertTrue(tokenTree.hasProperty(TokenProvider.PARAM_TOKEN_EXPIRATION));
  assertEquals(100000,tokenTree.getProperty(TokenProvider.PARAM_TOKEN_EXPIRATION).getValue(Type.LONG).longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-1985">OAK-1985</a>
 */
@Test public void testTokenValidationIsCaseInsensitive() throws Exception {
  Root root=adminSession.getLatestRoot();
  TokenConfiguration tokenConfig=getSecurityProvider().getConfiguration(TokenConfiguration.class);
  TokenProvider tp=tokenConfig.getTokenProvider(root);
  String userId=((SimpleCredentials)getAdminCredentials()).getUserID();
  TokenInfo info=tp.createToken(userId.toUpperCase(),Collections.<String,Object>emptyMap());
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  assertEquals(userId,info.getUserId());
  info=tp.getTokenInfo(info.getToken());
  assertTrue(info.matches(new TokenCredentials(info.getToken())));
  assertEquals(userId,info.getUserId());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDoCreateToken() throws Exception {
  assertFalse(tokenProvider.doCreateToken(new GuestCredentials()));
  assertFalse(tokenProvider.doCreateToken(new TokenCredentials("token")));
  assertFalse(tokenProvider.doCreateToken(getAdminCredentials()));
  SimpleCredentials sc=new SimpleCredentials("uid","pw".toCharArray());
  assertFalse(tokenProvider.doCreateToken(sc));
  sc.setAttribute("any_attribute","value");
  assertFalse(tokenProvider.doCreateToken(sc));
  sc.setAttribute("rep:token_key","value");
  assertFalse(tokenProvider.doCreateToken(sc));
  sc.setAttribute(".token","existing");
  assertFalse(tokenProvider.doCreateToken(sc));
  sc.setAttribute(".token","");
  assertTrue(tokenProvider.doCreateToken(sc));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTokenInfoFromInvalidLocation4() throws Exception {
  TokenInfo info=tokenProvider.createToken(userId,Collections.<String,Object>emptyMap());
  Tree tokenTree=getTokenTree(info);
  assertNotNull(tokenProvider.getTokenInfo(info.getToken()));
  TokenInfo info2=null;
  try {
    Tree adminTree=root.getTree(getUserManager(root).getAuthorizable(adminSession.getAuthInfo().getUserID()).getPath());
    NodeUtil node=new NodeUtil(adminTree).getOrAddChild(TOKENS_NODE_NAME,JcrConstants.NT_UNSTRUCTURED);
    assertTrue(root.move(tokenTree.getPath(),node.getTree().getPath() + '/' + tokenTree.getName()));
    info2=tokenProvider.getTokenInfo(info.getToken());
    assertNotNull(info2);
    assertFalse(info2.matches(new TokenCredentials(info.getToken())));
  }
  finally {
    root.refresh();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authentication.user.LoginModuleImplTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImpersonationWithAttributes() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    cs.close();
    cs=null;
    sc=new SimpleCredentials(USER_ID,new char[0]);
    sc.setAttribute("attr","value");
    ImpersonationCredentials ic=new ImpersonationCredentials(sc,authInfo);
    cs=login(ic);
    authInfo=cs.getAuthInfo();
    assertTrue(Arrays.asList(authInfo.getAttributeNames()).contains("attr"));
    assertEquals("value",authInfo.getAttribute("attr"));
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnonymousLogin() throws Exception {
  String anonymousID=UserUtil.getAnonymousId(getUserConfiguration().getParameters());
  UserManager userMgr=getUserManager(root);
  Authorizable anonymous=userMgr.getAuthorizable(anonymousID);
  assertNotNull(anonymous);
  assertFalse(root.getTree(anonymous.getPath()).hasProperty(UserConstants.REP_PASSWORD));
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(anonymousID,new char[0]));
    fail("Login with anonymousID should fail since the initial setup doesn't provide a password.");
  }
 catch (  LoginException e) {
  }
 finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoginWithAttributes() throws Exception {
  ContentSession cs=null;
  try {
    createTestUser();
    SimpleCredentials sc=new SimpleCredentials(USER_ID,USER_PW.toCharArray());
    sc.setAttribute("attr","value");
    cs=login(sc);
    AuthInfo authInfo=cs.getAuthInfo();
    assertTrue(Arrays.asList(authInfo.getAttributeNames()).contains("attr"));
    assertEquals("value",authInfo.getAttribute("attr"));
    cs.close();
  }
  finally {
    if (cs != null) {
      cs.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.AuthorizationContextTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAceDefinesContextRoot() throws Exception {
  createAcl("/",PrivilegeConstants.JCR_READ);
  Tree aclTree=root.getTree("/").getChild(AccessControlConstants.REP_POLICY);
  assertTrue(aclTree.exists());
  for (  Tree child : aclTree.getChildren()) {
    assertFalse(AuthorizationContext.getInstance().definesContextRoot(child));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepoPolicyDefinesContextRoot() throws Exception {
  createAcl(null,PrivilegeConstants.JCR_NAMESPACE_MANAGEMENT);
  Tree aclTree=root.getTree("/").getChild(AccessControlConstants.REP_REPO_POLICY);
  assertTrue(aclTree.exists());
  assertTrue(AuthorizationContext.getInstance().definesContextRoot(aclTree));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLocation() throws Exception {
  createAcl("/",PrivilegeConstants.JCR_READ);
  Context ctx=AuthorizationContext.getInstance();
  String policyPath="/rep:policy";
  assertTrue(ctx.definesLocation(TreeLocation.create(root,policyPath + "/allow")));
  assertTrue(ctx.definesLocation(TreeLocation.create(root,policyPath + "/allow/" + AccessControlConstants.REP_PRINCIPAL_NAME)));
  assertTrue(ctx.definesLocation(TreeLocation.create(root,policyPath + "/allow/" + AccessControlConstants.REP_PRIVILEGES)));
  List<String> existingRegular=ImmutableList.of("/","/jcr:system");
  for (  String path : existingRegular) {
    assertFalse(path,ctx.definesLocation(TreeLocation.create(root,path)));
    assertFalse(path,ctx.definesLocation(TreeLocation.create(root,PathUtils.concat(path,JcrConstants.JCR_PRIMARYTYPE))));
  }
  List<String> nonExistingItem=ImmutableList.of('/' + AccessControlConstants.REP_REPO_POLICY,"/content/" + AccessControlConstants.REP_POLICY,"/content/" + AccessControlConstants.REP_PRIVILEGES,"/content/" + AccessControlConstants.REP_REPO_POLICY,"/jcr:system/" + AccessControlConstants.REP_POLICY,PermissionConstants.PERMISSIONS_STORE_PATH + "/nonexisting");
  for (  String path : nonExistingItem) {
    assertTrue(path,ctx.definesLocation(TreeLocation.create(root,path)));
    assertTrue(path,ctx.definesLocation(TreeLocation.create(root,PathUtils.concat(path,AccessControlConstants.REP_PRIVILEGES))));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2740">OAK-2740</a>
 */
@Test public void testItemDefinitionsDefinesContextRoot() throws Exception {
  List<String> paths=Lists.newArrayList("/jcr:system/jcr:nodeTypes/rep:AccessControllable/rep:namedChildNodeDefinitions/rep:policy","/jcr:system/jcr:nodeTypes/rep:RepoAccessControllable/rep:namedChildNodeDefinitions/rep:repoPolicy");
  for (  String defPath : paths) {
    Tree tree=root.getTree(defPath);
    assertFalse(AuthorizationContext.getInstance().definesContextRoot(tree));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPolicyDefinesContextRoot() throws Exception {
  createAcl("/",PrivilegeConstants.JCR_READ);
  Tree aclTree=root.getTree("/").getChild(AccessControlConstants.REP_POLICY);
  assertTrue(aclTree.exists());
  assertTrue(AuthorizationContext.getInstance().definesContextRoot(aclTree));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.ACLTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDifferentPrivilegeImplementation() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,readPriv,false);
  assertFalse(acl.addEntry(new PrincipalImpl(testPrincipal.getName()),readPriv,false));
  assertFalse(acl.addEntry(new Principal(){
    public String getName(){
      return testPrincipal.getName();
    }
  }
,readPriv,false));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleEntries() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,privileges,true);
  privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  assertTrue(acl.addEntry(testPrincipal,privileges,true));
  assertTrue(acl.size() == 1);
  assertACE(acl.getEntries().get(0),true,privileges);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntryTwice() throws Exception {
  acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap());
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntry() throws Exception {
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true));
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddAccessControlEntry() throws Exception {
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetEntryForGroupPrincipal() throws Exception {
  Privilege[] privs=privilegesFromNames(JCR_READ);
  Group grPrincipal=(Group)principalManager.getEveryone();
  assertTrue(acl.addAccessControlEntry(grPrincipal,privs));
  assertTrue(acl.addEntry(grPrincipal,privs,false));
  assertEquals(1,acl.size());
  assertFalse(acl.getEntries().get(0).isAllow());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testComplementaryEntry2() throws Exception {
  Privilege[] repwrite=privilegesFromNames(REP_WRITE);
  acl.addAccessControlEntry(testPrincipal,repwrite);
  Privilege[] modProperties=privilegesFromNames(JCR_MODIFY_PROPERTIES);
  assertTrue(acl.addEntry(testPrincipal,modProperties,false));
  assertTrue(acl.size() == 2);
  Privilege[] expected=privilegesFromNames(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_NODE_TYPE_MANAGEMENT);
  assertACE(acl.getEntries().get(0),true,expected);
  assertACE(acl.getEntries().get(1),false,modProperties);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddEntriesWithCustomPrincipal() throws Exception {
  Principal oakPrincipal=new PrincipalImpl("anonymous");
  Principal principal=new Principal(){
    @Override public String getName(){
      return "anonymous";
    }
  }
;
  assertTrue(acl.addAccessControlEntry(oakPrincipal,privilegesFromNames(JCR_READ)));
  assertTrue(acl.addAccessControlEntry(principal,privilegesFromNames(JCR_READ_ACCESS_CONTROL)));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(principal,privilegesFromNames(JCR_READ),false));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertArrayEquals(privilegesFromNames(JCR_READ_ACCESS_CONTROL),acl.getAccessControlEntries()[0].getPrivileges());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleEntries2() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  acl.addEntry(testPrincipal,privileges,true);
  Privilege[] achPrivs=privilegesFromNames(JCR_ADD_CHILD_NODES);
  assertFalse(acl.addEntry(testPrincipal,achPrivs,true));
  assertTrue(acl.size() == 1);
  assertACE(acl.getEntries().get(0),true,privileges);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testComplementaryEntry1() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ,JCR_ADD_CHILD_NODES);
  acl.addEntry(testPrincipal,privileges,true);
  privileges=privilegesFromNames(JCR_READ);
  assertTrue(acl.addEntry(testPrincipal,privileges,false));
  assertTrue(acl.size() == 2);
  assertACE(acl.getEntries().get(0),true,privilegesFromNames(JCR_ADD_CHILD_NODES));
  assertACE(acl.getEntries().get(1),false,privilegesFromNames(JCR_READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiplePrincipals() throws Exception {
  Principal everyone=principalManager.getEveryone();
  Privilege[] privs=privilegesFromNames(JCR_READ);
  acl.addAccessControlEntry(testPrincipal,privs);
  assertFalse(acl.addAccessControlEntry(testPrincipal,privs));
  assertTrue(acl.addAccessControlEntry(everyone,privs));
  assertTrue(acl.getAccessControlEntries().length == 2);
  assertEquals(everyone,acl.getAccessControlEntries()[1].getPrincipal());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddEntry2() throws Exception {
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.<String,Value>emptyMap()));
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMvRestrictions() throws Exception {
  ValueFactory vf=getValueFactory();
  Value[] vs=new Value[]{vf.createValue(JcrConstants.NT_FILE,PropertyType.NAME),vf.createValue(JcrConstants.NT_FOLDER,PropertyType.NAME)};
  Map<String,Value[]> mvRestrictions=Collections.singletonMap(REP_NT_NAMES,vs);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,vf.createValue("/.*"));
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,false,restrictions,mvRestrictions));
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,false,restrictions,mvRestrictions));
  assertEquals(1,acl.getAccessControlEntries().length);
  JackrabbitAccessControlEntry ace=(JackrabbitAccessControlEntry)acl.getAccessControlEntries()[0];
  try {
    ace.getRestriction(REP_NT_NAMES);
    fail();
  }
 catch (  ValueFormatException e) {
  }
  Value[] vvs=ace.getRestrictions(REP_NT_NAMES);
  assertArrayEquals(vs,vvs);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComplementaryEntry() throws Exception {
  Privilege[] privileges=privilegesFromNames(JCR_READ);
  acl.addEntry(testPrincipal,privileges,true);
  assertTrue(acl.addEntry(testPrincipal,privileges,false));
  assertEquals(1,acl.size());
  assertACE(acl.getEntries().get(0),false,privileges);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveEntry() throws Exception {
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  acl.removeAccessControlEntry(acl.getAccessControlEntries()[0]);
  assertTrue(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateAndComplementary() throws Exception {
  Privilege[] readPriv=privilegesFromNames(JCR_READ);
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  Privilege[] acReadPriv=privilegesFromNames(JCR_READ_ACCESS_CONTROL);
  assertTrue(acl.addEntry(testPrincipal,readPriv,true));
  assertTrue(acl.addEntry(testPrincipal,writePriv,true));
  assertTrue(acl.addEntry(testPrincipal,acReadPriv,true));
  assertEquals(1,acl.size());
  assertTrue(acl.addEntry(testPrincipal,readPriv,false));
  assertEquals(2,acl.size());
  assertACE(acl.getEntries().get(0),true,privilegesFromNames(JCR_WRITE,JCR_READ_ACCESS_CONTROL));
  assertACE(acl.getEntries().get(1),false,readPriv);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveEntries() throws Exception {
  JackrabbitAccessControlList acl=createACL(getTestPath(),createTestEntries(),namePathMapper);
  for (  AccessControlEntry ace : acl.getAccessControlEntries()) {
    acl.removeAccessControlEntry(ace);
  }
  assertTrue(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestrictions() throws Exception {
  String[] names=acl.getRestrictionNames();
  assertNotNull(names);
  assertEquals(4,names.length);
  assertArrayEquals(new String[]{REP_GLOB,REP_NT_NAMES,REP_PREFIXES,REP_ITEM_NAMES},names);
  assertEquals(PropertyType.STRING,acl.getRestrictionType(names[0]));
  assertEquals(PropertyType.NAME,acl.getRestrictionType(names[1]));
  assertEquals(PropertyType.STRING,acl.getRestrictionType(names[2]));
  assertEquals(PropertyType.NAME,acl.getRestrictionType(names[3]));
  Privilege[] writePriv=privilegesFromNames(JCR_WRITE);
  assertTrue(acl.addAccessControlEntry(testPrincipal,writePriv));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertFalse(acl.addAccessControlEntry(testPrincipal,writePriv));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertFalse(acl.addEntry(testPrincipal,writePriv,true));
  assertEquals(1,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(testPrincipal,writePriv,false));
  assertEquals(1,acl.getAccessControlEntries().length);
  Map<String,Value> restrictions=Collections.singletonMap(REP_GLOB,getValueFactory().createValue("/.*"));
  assertTrue(acl.addEntry(testPrincipal,writePriv,false,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertFalse(acl.addEntry(testPrincipal,writePriv,false,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
  assertTrue(acl.addEntry(testPrincipal,writePriv,true,restrictions));
  assertEquals(2,acl.getAccessControlEntries().length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.AccessControlManagerImplTest </h4><pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEffectiveModifiedPolicy() throws Exception {
  ACL acl=setupPolicy(testPath);
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  root.commit();
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT));
  acMgr.setPolicy(testPath,acl);
  AccessControlPolicy[] policies=acMgr.getEffectivePolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof AccessControlList);
  AccessControlEntry[] effectiveAces=((AccessControlList)policies[0]).getAccessControlEntries();
  assertArrayEquals(aces,effectiveAces);
  assertFalse(Arrays.equals(effectiveAces,acl.getAccessControlEntries()));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivileges() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  List<String> testPaths=new ArrayList<String>();
  testPaths.add(null);
  testPaths.add("/");
  testPaths.add("/jcr:system");
  testPaths.add(testPath);
  for (  String path : testPaths) {
    Privilege[] supported=acMgr.getSupportedPrivileges(path);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasEmptyPrivileges() throws Exception {
  assertTrue(acMgr.hasPrivileges(testPath,new Privilege[0]));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasNullPrivileges() throws Exception {
  assertTrue(acMgr.hasPrivileges(testPath,null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyWritesAcContent() throws Exception {
  ACL acl=getApplicablePolicy(testPath);
  acl.addAccessControlEntry(testPrincipal,testPrivileges);
  acl.addEntry(EveryonePrincipal.getInstance(),testPrivileges,false,getGlobRestriction("*/something"));
  acMgr.setPolicy(testPath,acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  Tree tree=root2.getTree(testPath);
  assertTrue(tree.hasChild(REP_POLICY));
  Tree policyTree=tree.getChild(REP_POLICY);
  assertEquals(NT_REP_ACL,TreeUtil.getPrimaryTypeName(policyTree));
  assertEquals(2,policyTree.getChildrenCount(3));
  Iterator<Tree> children=policyTree.getChildren().iterator();
  Tree ace=children.next();
  assertEquals(NT_REP_GRANT_ACE,TreeUtil.getPrimaryTypeName(ace));
  assertEquals(testPrincipal.getName(),TreeUtil.getString(ace,REP_PRINCIPAL_NAME));
  assertEquals(newHashSet(testPrivileges),newHashSet(privilegesFromNames(TreeUtil.getStrings(ace,REP_PRIVILEGES))));
  assertFalse(ace.hasChild(REP_RESTRICTIONS));
  Tree ace2=children.next();
  assertEquals(NT_REP_DENY_ACE,TreeUtil.getPrimaryTypeName(ace2));
  assertEquals(EveryonePrincipal.NAME,ace2.getProperty(REP_PRINCIPAL_NAME).getValue(Type.STRING));
  Privilege[] privs=privilegesFromNames(TreeUtil.getNames(ace2,REP_PRIVILEGES));
  assertEquals(newHashSet(testPrivileges),newHashSet(privs));
  assertTrue(ace2.hasChild(REP_RESTRICTIONS));
  Tree restr=ace2.getChild(REP_RESTRICTIONS);
  assertEquals("*/something",restr.getProperty(REP_GLOB).getValue(Type.STRING));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesAccessControlledNodePath() throws Exception {
  Privilege[] privs=privilegesFromNames(PrivilegeConstants.JCR_ALL);
  for (  String path : getAcContentPaths()) {
    assertTrue(acMgr.hasPrivileges(path,privs));
    assertTrue(acMgr.hasPrivileges(path,getPrincipals(adminSession),privs));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePolicies() throws Exception {
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertTrue(itr.hasNext());
  AccessControlPolicy policy=itr.nextAccessControlPolicy();
  assertNotNull(policy);
  assertTrue(policy instanceof ACL);
  ACL acl=(ACL)policy;
  assertTrue(acl.isEmpty());
  assertEquals(testPath,acl.getPath());
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesByPrincipal2() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  root.commit();
  applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(0,applicable.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesWithCollidingNode() throws Exception {
  NodeUtil testTree=new NodeUtil(root.getTree(testPath));
  testTree.addChild(REP_POLICY,JcrConstants.NT_UNSTRUCTURED);
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicies() throws Exception {
  AccessControlPolicy policy=getApplicablePolicy(testPath);
  acMgr.setPolicy(testPath,policy);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertTrue(acl.isEmpty());
  assertEquals(testPath,acl.getOakPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRepoPolicies() throws Exception {
  String path=null;
  AccessControlPolicy[] policies=acMgr.getPolicies(path);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  acMgr.setPolicy(null,acMgr.getApplicablePolicies(path).nextAccessControlPolicy());
  assertFalse(acMgr.getApplicablePolicies(path).hasNext());
  policies=acMgr.getPolicies(path);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertTrue(acl.isEmpty());
  assertNull(acl.getPath());
  assertNull(acl.getOakPath());
  assertFalse(acMgr.getApplicablePolicies(path).hasNext());
  acMgr.removePolicy(path,acl);
  assertEquals(0,acMgr.getPolicies(path).length);
  assertTrue(acMgr.getApplicablePolicies(path).hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesByPrincipal() throws Exception {
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    AccessControlPolicy[] applicable=acMgr.getApplicablePolicies(principal);
    assertNotNull(applicable);
    assertEquals(1,applicable.length);
    assertTrue(applicable[0] instanceof ACL);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveRepoPolicy() throws Exception {
  ACL acl=setupPolicy(null);
  acMgr.removePolicy(null,acl);
  assertEquals(0,acMgr.getPolicies((String)null).length);
  assertTrue(acMgr.getApplicablePolicies((String)null).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivilegesIncludingPathConversion() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  List<String> testPaths=new ArrayList<String>();
  testPaths.add('/' + TEST_LOCAL_PREFIX + ":testRoot");
  testPaths.add("/{" + TEST_URI + "}testRoot");
  NameMapper remapped=new LocalNameMapper(root,singletonMap(TEST_LOCAL_PREFIX,TEST_URI));
  AccessControlManager acMgr=getAccessControlManager(new NamePathMapperImpl(remapped));
  for (  String path : testPaths) {
    Privilege[] supported=acMgr.getSupportedPrivileges(path);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedForPrivilegesAcContent() throws Exception {
  List<Privilege> allPrivileges=Arrays.asList(getPrivilegeManager(root).getRegisteredPrivileges());
  for (  String acPath : getAcContentPaths()) {
    Privilege[] supported=acMgr.getSupportedPrivileges(acPath);
    assertNotNull(supported);
    assertEquals(allPrivileges.size(),supported.length);
    assertTrue(allPrivileges.containsAll(Arrays.asList(supported)));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPrincipalPolicy() throws Exception {
  JackrabbitAccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  ACL acl=(ACL)applicable[0];
  Value pathValue=getValueFactory().createValue(testPath,PropertyType.PATH);
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.singletonMap(REP_NODE_PATH,pathValue)));
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  Root root2=adminSession.getLatestRoot();
  AccessControlPolicy[] policies=getAccessControlManager(root2).getPolicies(testPath);
  assertEquals(1,policies.length);
  assertEquals(1,((ACL)policies[0]).getAccessControlEntries().length);
  policies=getAccessControlManager(root2).getPolicies(testPrincipal);
  assertEquals(1,policies.length);
  assertArrayEquals(acl.getAccessControlEntries(),((ACL)policies[0]).getAccessControlEntries());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePrincipalPolicy2() throws Exception {
  setupPolicy(testPath);
  root.commit();
  AccessControlPolicy[] policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  acMgr.removePolicy(acl.getPath(),acl);
  policies=acMgr.getPolicies(testPath);
  assertEquals(0,policies.length);
  policies=acMgr.getPolicies(testPrincipal);
  assertEquals(0,policies.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testTestSessionGetEffectivePolicies() throws Exception {
  Privilege[] privileges=privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  setupPolicy(testPath,privileges);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  AccessControlManager testAcMgr=getTestAccessControlManager();
  assertTrue(testAcMgr.hasPrivileges(testPath,privileges));
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(testPath);
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyExistingPolicy() throws Exception {
  ACL acl=getApplicablePolicy(testPath);
  assertTrue(acl.addAccessControlEntry(testPrincipal,testPrivileges));
  AccessControlEntry allowTest=acl.getAccessControlEntries()[0];
  acMgr.setPolicy(testPath,acl);
  root.commit();
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  assertTrue(acl.addEntry(EveryonePrincipal.getInstance(),testPrivileges,false,getGlobRestriction("*/something")));
  AccessControlEntry[] aces=acl.getAccessControlEntries();
  assertEquals(2,aces.length);
  AccessControlEntry denyEveryone=aces[1];
  assertEquals(EveryonePrincipal.getInstance(),denyEveryone.getPrincipal());
  acl.orderBefore(denyEveryone,allowTest);
  acMgr.setPolicy(testPath,acl);
  root.commit();
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  aces=acl.getAccessControlEntries();
  assertEquals(2,aces.length);
  assertEquals(denyEveryone,aces[0]);
  assertEquals(allowTest,aces[1]);
  Privilege[] readAc=new Privilege[]{acMgr.privilegeFromName(PrivilegeConstants.JCR_READ_ACCESS_CONTROL)};
  assertTrue(acl.addEntry(testPrincipal,readAc,false,Collections.<String,Value>emptyMap()));
  assertEquals(3,acl.size());
  AccessControlEntry denyTest=acl.getAccessControlEntries()[2];
  acl.orderBefore(denyTest,allowTest);
  acMgr.setPolicy(testPath,acl);
  acl=(ACL)acMgr.getPolicies(testPath)[0];
  aces=acl.getAccessControlEntries();
  assertEquals(3,aces.length);
  assertEquals(denyEveryone,aces[0]);
  assertEquals(denyTest,aces[1]);
  assertEquals(allowTest,aces[2]);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterSet() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testTestSessionGetEffectivePolicies2() throws Exception {
  NodeUtil child=new NodeUtil(root.getTree(testPath)).addChild("child",JcrConstants.NT_UNSTRUCTURED);
  String childPath=child.getTree().getPath();
  setupPolicy(testPath,privilegesFromNames(PrivilegeConstants.JCR_READ));
  setupPolicy(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  AccessControlManager testAcMgr=getTestAccessControlManager();
  assertTrue(testAcMgr.hasPrivileges(childPath,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)));
  AccessControlPolicy[] effective=testAcMgr.getEffectivePolicies(childPath);
  assertNotNull(effective);
  assertEquals(1,effective.length);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesOnAccessControllable() throws Exception {
  NodeUtil node=new NodeUtil(root.getTree(testPath));
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_ACCESS_CONTROLLABLE);
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertTrue(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePolicy() throws Exception {
  ACL acl=setupPolicy(testPath);
  acMgr.removePolicy(testPath,acl);
  assertEquals(0,acMgr.getPolicies(testPath).length);
  assertTrue(acMgr.getApplicablePolicies(testPath).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEffectivePoliciesFiltering() throws Exception {
  ACL policy=getApplicablePolicy(testPath);
  policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
  policy.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
  policy.addEntry(EveryonePrincipal.getInstance(),privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false);
  assertEquals(3,policy.getAccessControlEntries().length);
  acMgr.setPolicy(testPath,policy);
  root.commit();
  List<Principal> principals=ImmutableList.of(testPrincipal,new PrincipalImpl(testPrincipal.getName()),new Principal(){
    @Override public String getName(){
      return testPrincipal.getName();
    }
  }
);
  for (  Principal princ : principals) {
    AccessControlPolicy[] policies=acMgr.getEffectivePolicies(ImmutableSet.of(princ));
    assertEquals(1,policies.length);
    assertTrue(policies[0] instanceof AccessControlList);
    AccessControlList acl=(AccessControlList)policies[0];
    assertEquals(2,acl.getAccessControlEntries().length);
    for (    AccessControlEntry ace : acl.getAccessControlEntries()) {
      assertEquals(princ.getName(),ace.getPrincipal().getName());
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePoliciesForAccessControlled() throws Exception {
  AccessControlPolicy policy=getApplicablePolicy(testPath);
  acMgr.setPolicy(testPath,policy);
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies(testPath);
  assertNotNull(itr);
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasRepoPrivileges() throws Exception {
  assertTrue(acMgr.hasPrivileges(null,privilegesFromNames(PrivilegeConstants.JCR_ALL)));
  assertTrue(acMgr.hasPrivileges(null,getPrincipals(adminSession),privilegesFromNames(PrivilegeConstants.JCR_ALL)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPrincipalPolicy2() throws Exception {
  setupPolicy(testPath);
  root.commit();
  JackrabbitAccessControlPolicy[] policies=acMgr.getPolicies(testPrincipal);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof ACL);
  ACL acl=(ACL)policies[0];
  Map<String,Value> restrictions=new HashMap<String,Value>();
  restrictions.put(REP_NODE_PATH,getValueFactory().createValue(testPath,PropertyType.PATH));
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,restrictions));
  restrictions.putAll(getGlobRestriction("*"));
  assertFalse(acl.addEntry(testPrincipal,testPrivileges,true,restrictions));
  acMgr.setPolicy(acl.getPath(),acl);
  assertEquals(2,((ACL)acMgr.getPolicies(testPath)[0]).getAccessControlEntries().length);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionHasRepoPrivileges() throws Exception {
  AccessControlManagerImpl testAcMgr=getTestAccessControlManager();
  assertFalse(testAcMgr.hasPrivileges(null,testPrivileges));
  assertFalse(testAcMgr.hasPrivileges(null,getPrincipals(getTestRoot().getContentSession()),testPrivileges));
  try {
    testAcMgr.getPrivileges(null,getPrincipals(adminSession));
    fail("testSession doesn't have sufficient permission to read access control information");
  }
 catch (  AccessDeniedException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTestSessionHasPrivileges() throws Exception {
  setupPolicy(testPath);
  root.commit();
  AccessControlManagerImpl testAcMgr=getTestAccessControlManager();
  List<Privilege[]> granted=new ArrayList<Privilege[]>();
  granted.add(privilegesFromNames(PrivilegeConstants.JCR_READ));
  granted.add(privilegesFromNames(PrivilegeConstants.REP_READ_NODES));
  granted.add(privilegesFromNames(PrivilegeConstants.REP_READ_PROPERTIES));
  granted.add(privilegesFromNames(PrivilegeConstants.JCR_ADD_CHILD_NODES));
  granted.add(testPrivileges);
  for (  Privilege[] privileges : granted) {
    assertTrue(testAcMgr.hasPrivileges(testPath,privileges));
    assertTrue(testAcMgr.hasPrivileges(testPath,getPrincipals(getTestRoot().getContentSession()),privileges));
  }
  List<Privilege[]> denied=new ArrayList<Privilege[]>();
  denied.add(privilegesFromNames(PrivilegeConstants.JCR_ALL));
  denied.add(privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  denied.add(privilegesFromNames(PrivilegeConstants.JCR_WRITE));
  denied.add(privilegesFromNames(PrivilegeConstants.JCR_LOCK_MANAGEMENT));
  for (  Privilege[] privileges : denied) {
    assertFalse(testAcMgr.hasPrivileges(testPath,privileges));
    assertFalse(testAcMgr.hasPrivileges(testPath,getPrincipals(getTestRoot().getContentSession()),privileges));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetApplicablePolicies() throws Exception {
  setupPolicy(testPath);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  JackrabbitAccessControlManager testAcMgr=getTestAccessControlManager();
  List<Principal> principals=ImmutableList.of(testPrincipal,EveryonePrincipal.getInstance());
  for (  Principal principal : principals) {
    AccessControlPolicy[] applicable=testAcMgr.getApplicablePolicies(principal);
    assertNotNull(applicable);
    assertEquals(1,applicable.length);
    assertTrue(applicable[0] instanceof ACL);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterRemove() throws Exception {
  setupPolicy(testPath);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  acMgr.removePolicy(testPath,policies[0]);
  policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(0,policies.length);
  assertTrue(acMgr.getApplicablePolicies(testPath).hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePrincipalPolicy() throws Exception {
  JackrabbitAccessControlPolicy[] applicable=acMgr.getApplicablePolicies(testPrincipal);
  assertNotNull(applicable);
  assertEquals(1,applicable.length);
  assertTrue(applicable[0] instanceof ACL);
  ACL acl=(ACL)applicable[0];
  Value pathValue=getValueFactory().createValue(testPath,PropertyType.PATH);
  assertTrue(acl.addEntry(testPrincipal,testPrivileges,true,Collections.singletonMap(REP_NODE_PATH,pathValue)));
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  acMgr.removePolicy(acl.getPath(),acl);
  root.commit();
  assertEquals(0,acMgr.getPolicies(testPrincipal).length);
  assertEquals(0,acMgr.getPolicies(testPath).length);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestSessionGetEffectivePoliciesWithoutPrivilege() throws Exception {
  Privilege[] privileges=privilegesFromNames(PrivilegeConstants.JCR_READ);
  setupPolicy(testPath,privileges);
  root.commit();
  Root testRoot=getTestRoot();
  testRoot.refresh();
  AccessControlManager testAcMgr=getTestAccessControlManager();
  List<String> paths=ImmutableList.of(testPath,NodeTypeConstants.NODE_TYPES_PATH);
  for (  String path : paths) {
    assertFalse(testAcMgr.hasPrivileges(path,privilegesFromNames(PrivilegeConstants.JCR_READ_ACCESS_CONTROL)));
    try {
      testAcMgr.getEffectivePolicies(path);
      fail("READ_ACCESS_CONTROL is not granted at " + path);
    }
 catch (    AccessDeniedException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicyWithInvalidPrincipal() throws Exception {
  ACL policy=getApplicablePolicy(testPath);
  policy.addEntry(testPrincipal,testPrivileges,true,getGlobRestriction("*"));
  acMgr.setPolicy(testPath,policy);
  NodeUtil aclNode=new NodeUtil(root.getTree(testPath + '/' + REP_POLICY));
  NodeUtil aceNode=aclNode.addChild("testACE",NT_REP_DENY_ACE);
  aceNode.setString(REP_PRINCIPAL_NAME,"invalidPrincipal");
  aceNode.setNames(REP_PRIVILEGES,PrivilegeConstants.JCR_READ);
  AccessControlPolicy[] policies=acMgr.getPolicies(testPath);
  assertNotNull(policies);
  assertEquals(1,policies.length);
  ACL acl=(ACL)policies[0];
  List<String> principalNames=new ArrayList<String>();
  for (  AccessControlEntry ace : acl.getEntries()) {
    principalNames.add(ace.getPrincipal().getName());
  }
  assertTrue(principalNames.remove("invalidPrincipal"));
  assertTrue(principalNames.remove(testPrincipal.getName()));
  assertTrue(principalNames.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicableRepoPolicies() throws Exception {
  AccessControlPolicyIterator itr=acMgr.getApplicablePolicies((String)null);
  assertNotNull(itr);
  assertTrue(itr.hasNext());
  AccessControlPolicy policy=itr.nextAccessControlPolicy();
  assertNotNull(policy);
  assertTrue(policy instanceof ACL);
  ACL acl=(ACL)policy;
  assertTrue(acl.isEmpty());
  assertNull(acl.getPath());
  assertFalse(itr.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.AccessControlValidatorTest </h4><pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidRestriction() throws Exception {
  NodeUtil restriction=createAcl().getChild(aceName).getChild(REP_RESTRICTIONS);
  restriction.setString("invalid","value");
  try {
    root.commit();
    fail("Creating an unsupported restriction should fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidPrivilege() throws Exception {
  NodeUtil acl=createAcl();
  String privName="invalidPrivilegeName";
  createACE(acl,"invalid",NT_REP_GRANT_ACE,testPrincipal.getName(),privName);
  try {
    root.commit();
    fail("Creating an ACE with invalid privilege should fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddIsolatedPolicy() throws Exception {
  String[] policyNames=new String[]{"isolatedACL",REP_POLICY,REP_REPO_POLICY};
  NodeUtil node=getTestRoot();
  for (  String policyName : policyNames) {
    NodeUtil policy=node.addChild(policyName,NT_REP_ACL);
    try {
      root.commit();
      fail("Writing an isolated ACL without the parent being rep:AccessControllable should fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isAccessControlViolation());
    }
 finally {
      policy.getTree().remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbstractPrivilege() throws Exception {
  PrivilegeManager pMgr=getPrivilegeManager(root);
  pMgr.registerPrivilege("abstractPrivilege",true,new String[0]);
  NodeUtil acl=createAcl();
  createACE(acl,"invalid",NT_REP_GRANT_ACE,testPrincipal.getName(),"abstractPrivilege");
  try {
    root.commit();
    fail("Creating an ACE with an abstract privilege should fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddRestrictionWithAcContent() throws Exception {
  NodeUtil acl=createAcl();
  NodeUtil ace=acl.getChild(aceName);
  NodeUtil[] acContent=new NodeUtil[]{acl,ace.getChild(REP_RESTRICTIONS)};
  for (  NodeUtil node : acContent) {
    NodeUtil entry=node.addChild("invalidRestriction",NT_REP_RESTRICTIONS);
    try {
      root.commit();
      fail("Adding an ACE below an ACE or restriction should fail");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
    }
 finally {
      entry.getTree().remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddPolicyWithAcContent() throws Exception {
  NodeUtil acl=createAcl();
  NodeUtil ace=acl.getChild(aceName);
  NodeUtil[] acContent=new NodeUtil[]{acl,ace,ace.getChild(REP_RESTRICTIONS)};
  for (  NodeUtil node : acContent) {
    NodeUtil policy=node.addChild(REP_POLICY,NT_REP_ACL);
    try {
      root.commit();
      fail("Adding an ACL below access control content should fail");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
    }
 finally {
      policy.getTree().remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPolicyWithOutChildOrder() throws AccessDeniedException {
  NodeUtil testRoot=getTestRoot();
  testRoot.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_ACCESS_CONTROLLABLE);
  testRoot.addChild(REP_POLICY,NT_REP_ACL);
  try {
    root.commit();
    fail("Policy node with child node ordering");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals("OakAccessControl0004: Invalid policy node: Order of children is not stable.",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddIsolatedRestriction() throws Exception {
  NodeUtil node=getTestRoot();
  NodeUtil restriction=node.addChild("isolatedRestriction",NT_REP_RESTRICTIONS);
  try {
    root.commit();
    fail("Writing an isolated Restriction should fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
  }
 finally {
    restriction.getTree().remove();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddRepoPolicyWithAcContent() throws Exception {
  NodeUtil acl=createAcl();
  NodeUtil ace=acl.getChild(aceName);
  NodeUtil[] acContent=new NodeUtil[]{acl,ace,ace.getChild(REP_RESTRICTIONS)};
  for (  NodeUtil node : acContent) {
    NodeUtil policy=node.addChild(REP_REPO_POLICY,NT_REP_ACL);
    try {
      root.commit();
      fail("Adding an ACL below access control content should fail");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
    }
 finally {
      policy.getTree().remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddInvalidRepoPolicy() throws Exception {
  NodeUtil testRoot=getTestRoot();
  testRoot.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_ACCESS_CONTROLLABLE);
  NodeUtil policy=getTestRoot().addChild(REP_REPO_POLICY,NT_REP_ACL);
  try {
    root.commit();
    fail("Attempt to add repo-policy with rep:AccessControllable node.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
  }
 finally {
    policy.getTree().remove();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDuplicateAce() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=org.apache.jackrabbit.commons.jackrabbit.authorization.AccessControlUtils.getAccessControlList(acMgr,testPath);
  acl.addAccessControlEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_ADD_CHILD_NODES));
  acMgr.setPolicy(testPath,acl);
  NodeUtil policy=new NodeUtil(root.getTree(testPath + "/rep:policy"));
  NodeUtil ace=policy.addChild("duplicateAce",NT_REP_GRANT_ACE);
  ace.setString(REP_PRINCIPAL_NAME,testPrincipal.getName());
  ace.setNames(AccessControlConstants.REP_PRIVILEGES,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  try {
    root.commit();
    fail("Creating duplicate ACE must be detected");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddAceWithAcContent() throws Exception {
  NodeUtil acl=createAcl();
  NodeUtil ace=acl.getChild(aceName);
  NodeUtil[] acContent=new NodeUtil[]{ace,ace.getChild(REP_RESTRICTIONS)};
  for (  NodeUtil node : acContent) {
    NodeUtil entry=node.addChild("invalidACE",NT_REP_DENY_ACE);
    try {
      root.commit();
      fail("Adding an ACE below an ACE or restriction should fail");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
    }
 finally {
      entry.getTree().remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnlyRootIsRepoAccessControllable(){
  NodeUtil testRoot=getTestRoot();
  testRoot.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_REPO_ACCESS_CONTROLLABLE);
  try {
    root.commit();
    fail("Only the root node can be made RepoAccessControllable.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddIsolatedAce() throws Exception {
  String[] ntNames=new String[]{NT_REP_DENY_ACE,NT_REP_GRANT_ACE};
  NodeUtil node=getTestRoot();
  for (  String aceNtName : ntNames) {
    NodeUtil ace=createACE(node,"isolatedACE",aceNtName,testPrincipal.getName(),PrivilegeConstants.JCR_READ);
    try {
      root.commit();
      fail("Writing an isolated ACE should fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isAccessControlViolation());
    }
 finally {
      ace.getTree().remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestrictionWithInvalidType() throws Exception {
  NodeUtil restriction=createAcl().getChild(aceName).getChild(REP_RESTRICTIONS);
  restriction.setName(REP_GLOB,"rep:glob");
  try {
    root.commit();
    fail("Creating restriction with invalid type should fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.accesscontrol.ReadPolicyTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testGetEffectivePolicies() throws Exception {
  for (  String path : readPaths) {
    AccessControlPolicy[] policies=getAccessControlManager(root).getPolicies(path);
    assertTrue(policies.length > 0);
    boolean found=false;
    for (    AccessControlPolicy policy : policies) {
      if ("org.apache.jackrabbit.oak.security.authorization.accesscontrol.AccessControlManagerImpl$ReadPolicy".equals(policy.getClass().getName())) {
        found=true;
        break;
      }
    }
    assertTrue(found);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testGetPolicies() throws Exception {
  for (  String path : readPaths) {
    AccessControlPolicy[] policies=getAccessControlManager(root).getPolicies(path);
    assertTrue(policies.length > 0);
    boolean found=false;
    for (    AccessControlPolicy policy : policies) {
      if ("org.apache.jackrabbit.oak.security.authorization.accesscontrol.AccessControlManagerImpl$ReadPolicy".equals(policy.getClass().getName())) {
        found=true;
        break;
      }
    }
    assertTrue(found);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.AbstractCompositeProviderTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsNotGrantedAction() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  String[] actions=new String[]{JackrabbitSession.ACTION_LOCKING,JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL};
  for (  String nodePath : NODE_PATHS) {
    String actionStr=getActionString(actions);
    assertFalse(nodePath,pp.isGranted(nodePath,actionStr));
    String propPath=PathUtils.concat(nodePath,JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(propPath,pp.isGranted(propPath,actionStr));
    String nonExPath=PathUtils.concat(nodePath,"nonExisting");
    assertFalse(nonExPath,pp.isGranted(nonExPath,actionStr));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=pp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.canReadAll());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    PropertyState ps=tree.getProperty(JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(p,pp.isGranted(tree,null,Permissions.ALL));
    assertFalse(PathUtils.concat(p,JcrConstants.JCR_PRIMARYTYPE),pp.isGranted(tree,ps,Permissions.ALL));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadProperties() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=pp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.canReadProperties());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsNotGranted() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  PropertyState ps=PropertyStates.createProperty("propName","val");
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=pp.getTreePermission(t,parentPermission);
    assertFalse(tp.isGranted(Permissions.NO_PERMISSION));
    assertFalse(tp.isGranted(Permissions.MODIFY_ACCESS_CONTROL));
    assertFalse(tp.isGranted(Permissions.NO_PERMISSION,ps));
    assertFalse(tp.isGranted(Permissions.MODIFY_ACCESS_CONTROL,ps));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedActionNone() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  String actions="";
  for (  String nodePath : NODE_PATHS) {
    assertFalse(nodePath,pp.isGranted(nodePath,actions));
    String propPath=PathUtils.concat(nodePath,JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(propPath,pp.isGranted(propPath,actions));
    String nonExPath=PathUtils.concat(nodePath,"nonExisting");
    assertFalse(nonExPath,pp.isGranted(nonExPath,actions));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesNone() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,pp.hasPrivileges(tree));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetRepositoryPermissionInstance() throws Exception {
  RepositoryPermission rp=createPermissionProvider().getRepositoryPermission();
  assertTrue(rp.getClass().getName().endsWith("CompositeRepositoryPermission"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesJcrAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(p,pp.hasPrivileges(tree,JCR_ALL));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivilegesOnRepoNone() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  assertTrue(pp.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsNotGranted() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    PropertyState ps=tree.getProperty(JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(p,pp.isGranted(tree,null,Permissions.MODIFY_ACCESS_CONTROL));
    assertFalse(PathUtils.concat(p,JcrConstants.JCR_PRIMARYTYPE),pp.isGranted(tree,ps,Permissions.MODIFY_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivilegesOnRepoJcrAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  assertFalse(pp.hasPrivileges(null,JCR_ALL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsNotGranted() throws Exception {
  RepositoryPermission rp=createPermissionProvider().getRepositoryPermission();
  assertFalse(rp.isGranted(Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.WORKSPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
  assertFalse(rp.isGranted(Permissions.NO_PERMISSION));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedAll() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  TreePermission parentPermission=TreePermission.EMPTY;
  PropertyState ps=PropertyStates.createProperty("propName","val");
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=pp.getTreePermission(t,parentPermission);
    assertFalse(tp.isGranted(Permissions.ALL));
    assertFalse(tp.isGranted(Permissions.ALL,ps));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedNone() throws Exception {
  PermissionProvider pp=createPermissionProvider();
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    PropertyState ps=tree.getProperty(JcrConstants.JCR_PRIMARYTYPE);
    assertFalse(p,pp.isGranted(tree,null,Permissions.NO_PERMISSION));
    assertFalse(PathUtils.concat(p,JcrConstants.JCR_PRIMARYTYPE),pp.isGranted(tree,ps,Permissions.NO_PERMISSION));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeAccessControlManagerTest </h4><pre class="type-13 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetApplicablePolicies() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies("/");
  while (it.hasNext()) {
    if (it.nextAccessControlPolicy() == TestPolicy.INSTANCE) {
      fail("TestPolicy should only be applicable at /test.");
    }
  }
  Set<AccessControlPolicy> applicable=ImmutableSet.copyOf(acMgr.getApplicablePolicies(TEST_PATH));
  assertEquals(2,applicable.size());
  assertTrue(applicable.contains(TestPolicy.INSTANCE));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedPrivileges() throws Exception {
  Set<Privilege> expected=ImmutableSet.copyOf(getPrivilegeManager(root).getRegisteredPrivileges());
  Set<Privilege> result=ImmutableSet.copyOf(acMgr.getSupportedPrivileges("/"));
  assertEquals(expected,result);
  result=Sets.newHashSet(acMgr.getSupportedPrivileges(TEST_PATH));
  assertTrue(result.containsAll(expected));
  assertTrue(result.contains(TestPrivilege.INSTANCE));
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyAtRoot() throws Exception {
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies("/");
  int cnt=0;
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    assertTrue(plc instanceof JackrabbitAccessControlList);
    acMgr.setPolicy("/",plc);
    cnt++;
  }
  assertEquals(1,cnt);
}

</code></pre>

<br>
<pre class="type-13 type-12 type-5 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPolicies() throws Exception {
  int len=0;
  AccessControlPolicy[] policies=acMgr.getPolicies(TEST_PATH);
  assertEquals(len,policies.length);
  acMgr.setPolicy(TEST_PATH,TestPolicy.INSTANCE);
  len++;
  policies=acMgr.getPolicies(TEST_PATH);
  assertEquals(len,policies.length);
  assertSame(TestPolicy.INSTANCE,policies[0]);
  AccessControlPolicyIterator it=acMgr.getApplicablePolicies(TEST_PATH);
  while (it.hasNext()) {
    AccessControlPolicy plc=it.nextAccessControlPolicy();
    if (plc == TestPolicy.INSTANCE) {
      fail("TestPolicy should only be applicable at /test.");
    }
 else {
      acMgr.setPolicy(TEST_PATH,plc);
      len++;
      Set<AccessControlPolicy> policySet=ImmutableSet.copyOf(acMgr.getPolicies(TEST_PATH));
      assertEquals(len,policySet.size());
      assertTrue(policySet.contains(TestPolicy.INSTANCE));
      assertTrue(policySet.contains(plc));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeAuthorizationConfigurationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleGetAccessControlManager() throws RepositoryException {
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()),new AuthorizationConfigurationImpl(getSecurityProvider()));
  AccessControlManager accessControlManager=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertTrue(accessControlManager instanceof CompositeAccessControlManager);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleGetPermissionProvider(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new OpenAuthorizationConfiguration(),new AuthorizationConfigurationImpl(getSecurityProvider()));
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),Collections.<Principal>emptySet());
  assertFalse(pp instanceof CompositePermissionProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleRestrictionProvider(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()),new AuthorizationConfigurationImpl(getSecurityProvider()));
  RestrictionProvider rp=cc.getRestrictionProvider();
  assertTrue(rp instanceof CompositeRestrictionProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSingleGetAccessControlManager(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()));
  AccessControlManager accessControlManager=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertFalse(accessControlManager instanceof CompositeAccessControlManager);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSlingRestrictionProvider(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()));
  RestrictionProvider rp=cc.getRestrictionProvider();
  assertFalse(rp instanceof CompositeRestrictionProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMultipleGetPermissionProvider2(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()),new AuthorizationConfigurationImpl(getSecurityProvider()));
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),Collections.<Principal>emptySet());
  assertTrue(pp instanceof CompositePermissionProvider);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleGetPermissionProvider3(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new OpenAuthorizationConfiguration(),new OpenAuthorizationConfiguration());
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),Collections.<Principal>emptySet());
  assertFalse(pp instanceof CompositePermissionProvider);
  assertSame(EmptyPermissionProvider.getInstance(),pp);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSingleGetPermissionProvider(){
  CompositeAuthorizationConfiguration cc=getCompositeConfiguration(new AuthorizationConfigurationImpl(getSecurityProvider()));
  PermissionProvider pp=cc.getPermissionProvider(root,root.getContentSession().getWorkspaceName(),Collections.<Principal>emptySet());
  assertFalse(pp instanceof CompositePermissionProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderAllTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long expected=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cpp.isGranted(tree,null,expected));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionsIsGranted() throws Exception {
  RepositoryPermission rp=cpp.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      assertTrue(tp.isGranted(toTest,PROPERTY_STATE));
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String p : defPrivileges.keySet()) {
    Set<String> expected=defPrivileges.get(p);
    Tree tree=root.getTree(p);
    assertTrue(p,cpp.hasPrivileges(tree,expected.toArray(new String[expected.size()])));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(root.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      assertTrue(tp.isGranted(toTest));
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedAction2() throws Exception {
  Map<String,String[]> noAccess=ImmutableMap.<String,String[]>builder().put(ROOT_PATH,new String[]{Session.ACTION_READ}).put(ROOT_PATH + "jcr:primaryType",new String[]{Session.ACTION_READ,Session.ACTION_SET_PROPERTY}).put("/nonexisting",new String[]{Session.ACTION_READ,Session.ACTION_ADD_NODE}).put(TEST_PATH_2,new String[]{Session.ACTION_READ,Session.ACTION_REMOVE}).put(TEST_PATH_2 + "/jcr:primaryType",new String[]{Session.ACTION_READ,Session.ACTION_SET_PROPERTY}).put(TEST_A_B_C_PATH,new String[]{Session.ACTION_READ,Session.ACTION_REMOVE}).put(TEST_A_B_C_PATH + "/noneExisting",new String[]{Session.ACTION_READ,JackrabbitSession.ACTION_REMOVE_NODE}).put(TEST_A_B_C_PATH + "/jcr:primaryType",new String[]{JackrabbitSession.ACTION_REMOVE_PROPERTY}).build();
  for (  String p : noAccess.keySet()) {
    assertFalse(p,cpp.isGranted(p,getActionString(noAccess.get(p))));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String p : defActionsGranted.keySet()) {
    String actionStr=getActionString(defActionsGranted.get(p));
    assertTrue(p + " : " + actionStr,cpp.isGranted(p,actionStr));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertTrue(cpp.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long expected=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cpp.isGranted(tree,PROPERTY_STATE,expected));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderCoverageTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(cpp.hasPrivileges(tree,REP_READ_NODES));
    assertFalse(cpp.hasPrivileges(tree,JCR_READ));
    assertFalse(cpp.hasPrivileges(tree,JCR_WRITE));
    assertFalse(cpp.hasPrivileges(tree,JCR_ALL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String nodePath : NODE_PATHS) {
    String propPath=PathUtils.concat(nodePath,JcrConstants.JCR_PRIMARYTYPE);
    assertTrue(cpp.isGranted(nodePath,Session.ACTION_READ));
    assertFalse(cpp.isGranted(propPath,Session.ACTION_READ));
    assertFalse(cpp.isGranted(nodePath,Session.ACTION_REMOVE));
    assertFalse(cpp.isGranted(propPath,JackrabbitSession.ACTION_MODIFY_PROPERTY));
    assertFalse(cpp.isGranted(nodePath,getActionString(JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL,JackrabbitSession.ACTION_READ_ACCESS_CONTROL)));
    String nonExisting=PathUtils.concat(nodePath,"nonExisting");
    assertFalse(cpp.isGranted(nonExisting,Session.ACTION_READ));
    assertFalse(cpp.isGranted(nonExisting,JackrabbitSession.ACTION_ADD_PROPERTY));
    assertFalse(cpp.isGranted(nonExisting,Session.ACTION_ADD_NODE));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.isGranted(Permissions.READ_PROPERTY,PROPERTY_STATE));
    assertFalse(tp.isGranted(Permissions.REMOVE_PROPERTY,PROPERTY_STATE));
    assertFalse(tp.isGranted(Permissions.READ,PROPERTY_STATE));
    assertFalse(tp.isGranted(Permissions.ALL,PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Override @Test public void testGetTreePermissionInstance() throws Exception {
  PermissionProvider pp=createPermissionProvider(EveryonePrincipal.getInstance());
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=pp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertTrue(tp instanceof LimitedTreePermission);
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_NODE));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.LOCK_MANAGEMENT));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.ALL));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_NODE | Permissions.LOCK_MANAGEMENT));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=cpp.getTreePermission(t,parentPermission);
    assertTrue(tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionsIsGranted() throws Exception {
  RepositoryPermission rp=cpp.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertTrue(tp.isGranted(Permissions.READ_NODE));
    assertFalse(tp.isGranted(Permissions.REMOVE_NODE));
    assertFalse(tp.isGranted(Permissions.READ));
    assertFalse(tp.isGranted(Permissions.ALL));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(cpp.isGranted(tree,null,Permissions.READ_NODE));
    assertFalse(cpp.isGranted(tree,null,Permissions.LOCK_MANAGEMENT));
    assertFalse(cpp.isGranted(tree,null,Permissions.ALL));
    assertFalse(cpp.isGranted(tree,null,Permissions.READ_NODE | Permissions.LOCK_MANAGEMENT));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertTrue(cpp.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cpp.hasPrivileges(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cpp.hasPrivileges(null,JCR_ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=cpp.getTreePermission(t,parentPermission);
    assertFalse(tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionGetChild() throws Exception {
  List<String> childNames=ImmutableList.of("test","a","b","c","nonexisting");
  Tree rootTree=readOnlyRoot.getTree(ROOT_PATH);
  NodeState ns=((ImmutableTree)rootTree).getNodeState();
  TreePermission tp=createPermissionProvider().getTreePermission(rootTree,TreePermission.EMPTY);
  for (  String cName : childNames) {
    ns=ns.getChildNode(cName);
    tp=tp.getChildPermission(cName,ns);
    assertTrue(tp instanceof LimitedTreePermission);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderEmptyTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.MODIFY_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.ADD_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.REMOVE_PROPERTY));
    assertFalse(cpp.isGranted(tree,PROPERTY_STATE,Permissions.READ_ACCESS_CONTROL | Permissions.MODIFY_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=cpp.getTreePermission(t,parentPermission);
    assertFalse(tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String nodePath : NODE_PATHS) {
    String propPath=PathUtils.concat(nodePath,JcrConstants.JCR_PRIMARYTYPE);
    String nonExisting=PathUtils.concat(nodePath,"nonExisting");
    assertFalse(cpp.isGranted(nodePath,Session.ACTION_REMOVE));
    assertFalse(cpp.isGranted(propPath,JackrabbitSession.ACTION_MODIFY_PROPERTY));
    assertFalse(cpp.isGranted(nodePath,getActionString(JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL,JackrabbitSession.ACTION_READ_ACCESS_CONTROL)));
    assertFalse(cpp.isGranted(nonExisting,JackrabbitSession.ACTION_ADD_PROPERTY));
    assertFalse(cpp.isGranted(nonExisting,Session.ACTION_ADD_NODE));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionsIsGranted() throws Exception {
  RepositoryPermission rp=cpp.getRepositoryPermission();
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(cpp.isGranted(tree,null,Permissions.READ_NODE));
    assertFalse(cpp.isGranted(tree,null,Permissions.READ_NODE | Permissions.MODIFY_CHILD_NODE_COLLECTION));
    assertFalse(cpp.isGranted(tree,null,Permissions.READ_ACCESS_CONTROL | Permissions.MODIFY_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanRead() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    Tree t=readOnlyRoot.getTree(path);
    TreePermission tp=cpp.getTreePermission(t,parentPermission);
    assertFalse(tp.canRead());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrivilegesOnRepo() throws Exception {
  assertTrue(cpp.getPrivileges(null).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.isGranted(Permissions.READ_NODE));
    assertFalse(tp.isGranted(Permissions.REMOVE_NODE));
    assertFalse(tp.isGranted(Permissions.ALL));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertFalse(cpp.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(cpp.hasPrivileges(tree,JCR_READ));
    assertFalse(cpp.hasPrivileges(tree,JCR_WRITE));
    assertFalse(cpp.hasPrivileges(tree,REP_READ_NODES));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  for (  String p : NODE_PATHS) {
    assertTrue(cpp.getPrivileges(readOnlyRoot.getTree(p)).isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cpp.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    assertFalse(tp.isGranted(Permissions.READ_PROPERTY,PROPERTY_STATE));
    assertFalse(tp.isGranted(Permissions.REMOVE_PROPERTY,PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderFullScopeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegeOnRepoAdmin() throws Exception {
  assertTrue(cppAdminUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppAdminUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertTrue(nodePath,tp.canRead());
    assertFalse(nodePath,tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(p,cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.READ_PROPERTY));
    assertFalse(p,cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.SET_PROPERTY));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesAdmin() throws Exception {
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    assertTrue(cppAdminUser.hasPrivileges(tree,REP_READ_NODES));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_READ));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_ALL));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_WRITE));
    assertFalse(cppAdminUser.hasPrivileges(tree,REP_READ_NODES,REP_READ_PROPERTIES));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_MODIFY_PROPERTIES));
    assertFalse(cppAdminUser.hasPrivileges(tree,JCR_LOCK_MANAGEMENT));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGranted() throws Exception {
  RepositoryPermission rp=cppTestUser.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGrantedAdminUser() throws Exception {
  RepositoryPermission rp=cppAdminUser.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedAction2() throws Exception {
  Map<String,String[]> noAccess=ImmutableMap.<String,String[]>builder().put(ROOT_PATH,new String[]{Session.ACTION_READ}).put(ROOT_PATH + "jcr:primaryType",new String[]{Session.ACTION_READ,Session.ACTION_SET_PROPERTY}).put("/nonexisting",new String[]{Session.ACTION_READ,Session.ACTION_ADD_NODE}).put(TEST_PATH_2,new String[]{Session.ACTION_READ,Session.ACTION_REMOVE}).put(TEST_PATH_2 + "/jcr:primaryType",new String[]{Session.ACTION_READ,Session.ACTION_SET_PROPERTY}).put(TEST_A_B_C_PATH,new String[]{Session.ACTION_READ,Session.ACTION_REMOVE}).put(TEST_A_B_C_PATH + "/noneExisting",new String[]{Session.ACTION_READ,JackrabbitSession.ACTION_REMOVE_NODE}).put(TEST_A_B_C_PATH + "/jcr:primaryType",new String[]{JackrabbitSession.ACTION_REMOVE_PROPERTY}).build();
  for (  String p : noAccess.keySet()) {
    assertFalse(p,cppTestUser.isGranted(p,getActionString(noAccess.get(p))));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  PrivilegeBitsProvider pbp=new PrivilegeBitsProvider(readOnlyRoot);
  PrivilegeBits readNodes=pbp.getBits(REP_READ_NODES);
  for (  String path : defPrivileges.keySet()) {
    Set<String> defaultPrivs=defPrivileges.get(path);
    PrivilegeBits defaultBits=pbp.getBits(defaultPrivs);
    Tree tree=readOnlyRoot.getTree(path);
    if (defaultPrivs.isEmpty()) {
      assertFalse(path,cppTestUser.hasPrivileges(tree,REP_READ_NODES));
    }
 else     if (defaultBits.includes(readNodes)) {
      assertTrue(path,cppTestUser.hasPrivileges(tree,REP_READ_NODES));
      if (!readNodes.equals(defaultBits)) {
        assertFalse(path,cppTestUser.hasPrivileges(tree,defaultPrivs.toArray(new String[defaultPrivs.size()])));
      }
    }
 else {
      assertFalse(path,cppTestUser.hasPrivileges(tree,REP_READ_NODES));
      assertFalse(path,cppTestUser.hasPrivileges(tree,defaultPrivs.toArray(new String[defaultPrivs.size()])));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppTestUser.getTreePermission(tree,parentPermission);
    assertFalse(nodePath,tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertTrue(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cppTestUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppTestUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivileges() throws Exception {
  PrivilegeBitsProvider pbp=new PrivilegeBitsProvider(readOnlyRoot);
  PrivilegeBits readNodes=pbp.getBits(REP_READ_NODES);
  Set<String> expected=ImmutableSet.of(REP_READ_NODES);
  for (  String path : defPrivileges.keySet()) {
    Set<String> defaultPrivs=defPrivileges.get(path);
    Tree tree=readOnlyRoot.getTree(path);
    Set<String> privNames=cppTestUser.getPrivileges(tree);
    if (pbp.getBits(defaultPrivs).includes(readNodes)) {
      assertEquals(expected,privNames);
    }
 else {
      assertTrue(privNames.isEmpty());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedActionAdmin() throws Exception {
  for (  String p : defActionsGranted.keySet()) {
    boolean expectedRead=readOnlyRoot.getTree(p).exists();
    assertEquals(p,expectedRead,cppAdminUser.isGranted(p,Session.ACTION_READ));
    assertFalse(p,cppAdminUser.isGranted(p,getActionString(ALL_ACTIONS)));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      if (Permissions.READ_NODE == toTest) {
        assertTrue(path,tp.isGranted(toTest));
      }
 else {
        boolean canRead=Permissions.includes(toTest,Permissions.READ_NODE);
        assertEquals(path,canRead,tp.isGranted(Permissions.READ_NODE));
        assertFalse(path,tp.isGranted(toTest));
      }
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAdmin() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cppAdminUser.isGranted(tree,null,Permissions.READ_NODE));
    assertFalse(p,cppAdminUser.isGranted(tree,null,Permissions.READ));
    assertFalse(p,cppAdminUser.isGranted(tree,null,Permissions.WRITE));
    assertFalse(p,cppAdminUser.isGranted(tree,null,Permissions.ALL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String p : defActionsGranted.keySet()) {
    String[] actions=defActionsGranted.get(p);
    if (ImmutableList.copyOf(actions).contains(Session.ACTION_READ)) {
      TreeLocation tl=TreeLocation.create(readOnlyRoot,p);
      assertEquals(p,tl.getTree() != null,cppTestUser.isGranted(p,Session.ACTION_READ));
    }
 else {
      assertFalse(p,cppTestUser.isGranted(p,Session.ACTION_READ));
    }
    if (actions.length > 1) {
      assertFalse(p,cppTestUser.isGranted(p,getActionString(actions)));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      boolean granted=(toTest == Permissions.READ_NODE);
      assertEquals(path,granted,tp.isGranted(toTest,PROPERTY_STATE));
    }
    assertFalse(tp.isGranted(Permissions.READ_PROPERTY,PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long defaultPerms=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    if (Permissions.READ_NODE != defaultPerms) {
      assertFalse(p,cppTestUser.isGranted(tree,null,defaultPerms));
    }
    boolean expectedReadNode=Permissions.includes(defaultPerms,Permissions.READ_NODE);
    assertEquals(p,expectedReadNode,cppTestUser.isGranted(tree,null,Permissions.READ_NODE));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedPropertyAdmin() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertFalse(p,cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.READ_PROPERTY));
    assertFalse(p,cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.SET_PROPERTY));
    assertFalse(p,cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ALL));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderNoScopeTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String p : defPrivileges.keySet()) {
    Set<String> expected=defPrivileges.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    String[] privNames=expected.toArray(new String[expected.size()]);
    assertTrue(p,cppTestUser.hasPrivileges(tree,privNames));
    assertEquals(p,defTestUser.hasPrivileges(tree,privNames),cppTestUser.hasPrivileges(tree,privNames));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      assertTrue(tp.isGranted(toTest,PROPERTY_STATE));
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedAction2() throws Exception {
  Map<String,String[]> noAccess=ImmutableMap.<String,String[]>builder().put(ROOT_PATH,new String[]{Session.ACTION_READ}).put(ROOT_PATH + "jcr:primaryType",new String[]{Session.ACTION_READ,Session.ACTION_SET_PROPERTY}).put("/nonexisting",new String[]{Session.ACTION_READ,Session.ACTION_ADD_NODE}).put(TEST_PATH_2,new String[]{Session.ACTION_READ,Session.ACTION_REMOVE}).put(TEST_PATH_2 + "/jcr:primaryType",new String[]{Session.ACTION_READ,Session.ACTION_SET_PROPERTY}).put(TEST_A_B_C_PATH,new String[]{Session.ACTION_READ,Session.ACTION_REMOVE}).put(TEST_A_B_C_PATH + "/noneExisting",new String[]{Session.ACTION_READ,JackrabbitSession.ACTION_REMOVE_NODE}).put(TEST_A_B_C_PATH + "/jcr:primaryType",new String[]{JackrabbitSession.ACTION_REMOVE_PROPERTY}).build();
  for (  String p : noAccess.keySet()) {
    String actions=getActionString(noAccess.get(p));
    assertFalse(p,cppTestUser.isGranted(p,actions));
    assertFalse(p,defTestUser.isGranted(p,actions));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivilegesAdmin() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cppAdminUser.hasPrivileges(tree,JCR_ALL));
    assertTrue(p,defAdminUser.hasPrivileges(tree,JCR_ALL));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long expected=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cppTestUser.isGranted(tree,PROPERTY_STATE,expected));
    assertTrue(p,defTestUser.isGranted(tree,PROPERTY_STATE,expected));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertTrue(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(defTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(cppTestUser.hasPrivileges(null));
  assertTrue(defTestUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      assertTrue(tp.isGranted(toTest));
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long expected=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cppTestUser.isGranted(tree,null,expected));
    assertTrue(p,defTestUser.isGranted(tree,null,expected));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegeOnRepoAdminUser() throws Exception {
  assertTrue(cppAdminUser.hasPrivileges(null,JCR_ALL));
  assertTrue(defAdminUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppAdminUser.hasPrivileges(null));
  assertTrue(defAdminUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedAdmin() throws Exception {
  for (  String p : defPermissions.keySet()) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cppAdminUser.isGranted(tree,null,Permissions.ALL));
    assertTrue(p,defAdminUser.isGranted(tree,null,Permissions.ALL));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedActionAdmin() throws Exception {
  String allActions=getActionString(ALL_ACTIONS);
  for (  String p : defActionsGranted.keySet()) {
    assertTrue(p + " : " + allActions,cppAdminUser.isGranted(p,allActions));
    assertTrue(p + " : " + allActions,defAdminUser.isGranted(p,allActions));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  for (  String p : defActionsGranted.keySet()) {
    String actions=getActionString(defActionsGranted.get(p));
    assertTrue(p + " : " + actions,cppTestUser.isGranted(p,actions));
    assertTrue(p + " : " + actions,defTestUser.isGranted(p,actions));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  TreePermission parentPermission2=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    TreePermission tp2=defAdminUser.getTreePermission(tree,parentPermission2);
    assertTrue(nodePath,tp.canRead());
    assertTrue(nodePath,tp.canRead(PROPERTY_STATE));
    assertTrue(nodePath + "(default)",tp2.canRead());
    assertTrue(nodePath + "(default)",tp2.canRead(PROPERTY_STATE));
    parentPermission=tp;
    parentPermission2=tp2;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGranted() throws Exception {
  RepositoryPermission rp=cppTestUser.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedPropertyAdmin() throws Exception {
  for (  String p : defPermissions.keySet()) {
    Tree tree=readOnlyRoot.getTree(p);
    assertTrue(p,cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ALL));
    assertTrue(p,defAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ALL));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGrantedAdminUser() throws Exception {
  RepositoryPermission rp=cppAdminUser.getRepositoryPermission();
  assertTrue(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeProviderScopeTest </h4><pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long defaultPerms=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    if (testProvider.isSupported(p)) {
      long expected=Permissions.diff(defaultPerms,Permissions.ADD_NODE | Permissions.ADD_PROPERTY);
      assertTrue(cppTestUser.isGranted(tree,PROPERTY_STATE,expected));
      assertFalse(cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.ADD_PROPERTY));
      assertFalse(cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.SET_PROPERTY));
      assertFalse(cppTestUser.isGranted(tree,PROPERTY_STATE,Permissions.WRITE));
    }
 else {
      assertTrue(cppTestUser.isGranted(tree,PROPERTY_STATE,defaultPerms));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAdmin() throws Exception {
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    if (testProvider.isSupported(path)) {
      assertTrue(cppAdminUser.isGranted(tree,null,Permissions.diff(Permissions.ALL,Permissions.ADD_NODE | Permissions.ADD_PROPERTY)));
      assertFalse(cppAdminUser.isGranted(tree,null,Permissions.ADD_NODE));
      assertFalse(cppAdminUser.isGranted(tree,null,Permissions.ADD_PROPERTY));
      assertFalse(cppAdminUser.isGranted(tree,null,Permissions.ADD_NODE | Permissions.ADD_PROPERTY));
      assertFalse(cppAdminUser.isGranted(tree,null,Permissions.WRITE));
    }
 else {
      assertTrue(cppAdminUser.isGranted(tree,null,Permissions.ALL));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegeOnRepoAdmin() throws Exception {
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cppAdminUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppAdminUser.hasPrivileges(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  Set<String> expected=pbp.getPrivilegeNames(pbp.getBits(JCR_ALL).modifiable().diff(pbp.getBits(JCR_NAMESPACE_MANAGEMENT)));
  assertTrue(cppAdminUser.hasPrivileges(null,expected.toArray(new String[expected.size()])));
  assertTrue(cppAdminUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertTrue(nodePath,tp.canRead());
    assertTrue(nodePath,tp.canRead(PROPERTY_STATE));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesOnRepo() throws Exception {
  assertFalse(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT));
  assertFalse(cppTestUser.hasPrivileges(null,JCR_NAMESPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(cppTestUser.hasPrivileges(null,JCR_ALL));
  assertTrue(cppTestUser.hasPrivileges(null,JCR_NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(cppTestUser.hasPrivileges(null));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedProperty() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      if (testProvider.isSupported(path)) {
        assertTrue(tp.isGranted(Permissions.diff(toTest,Permissions.ADD_NODE | Permissions.ADD_PROPERTY),PROPERTY_STATE));
        assertFalse(tp.isGranted(Permissions.ADD_PROPERTY,PROPERTY_STATE));
      }
 else {
        assertTrue(tp.isGranted(toTest,PROPERTY_STATE));
      }
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGranted() throws Exception {
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppTestUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    Long toTest=(defPermissions.containsKey(path)) ? defPermissions.get(path) : defPermissions.get(PathUtils.getAncestorPath(path,1));
    if (toTest != null) {
      if (testProvider.isSupported(path)) {
        assertTrue(tp.isGranted(Permissions.diff(toTest,Permissions.ADD_NODE | Permissions.ADD_PROPERTY)));
        assertFalse(tp.isGranted(Permissions.ADD_PROPERTY | Permissions.ADD_NODE));
      }
 else {
        assertTrue(tp.isGranted(toTest));
      }
    }
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionCanReadAllAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String nodePath : TP_PATHS) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertFalse(nodePath,tp.canReadAll());
    assertTrue(nodePath,tp.canReadProperties());
    parentPermission=tp;
  }
  parentPermission=TreePermission.EMPTY;
  for (  String nodePath : PATH_OUTSIDE_SCOPE) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertFalse(nodePath,tp.canReadAll());
    assertTrue(nodePath,tp.canReadProperties());
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  for (  String path : defPrivileges.keySet()) {
    Set<String> defaultPrivs=defPrivileges.get(path);
    Tree tree=readOnlyRoot.getTree(path);
    if (testProvider.isSupported(path)) {
      Set<String> expected=pbp.getPrivilegeNames(pbp.getBits(defaultPrivs).modifiable().diff(denied));
      assertTrue(path,cppTestUser.hasPrivileges(tree,expected.toArray(new String[expected.size()])));
      assertFalse(path,cppTestUser.hasPrivileges(tree,JCR_ADD_CHILD_NODES));
      assertFalse(path,cppTestUser.hasPrivileges(tree,REP_ADD_PROPERTIES));
      assertFalse(path,cppTestUser.hasPrivileges(tree,JCR_MODIFY_PROPERTIES));
    }
 else {
      assertTrue(path,cppTestUser.hasPrivileges(tree,defaultPrivs.toArray(new String[defaultPrivs.size()])));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedPropertyAdmin() throws Exception {
  for (  String p : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(p);
    if (testProvider.isSupported(p)) {
      assertTrue(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.diff(Permissions.ALL,Permissions.ADD_NODE | Permissions.ADD_PROPERTY)));
      assertFalse(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ADD_NODE));
      assertFalse(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ADD_PROPERTY));
      assertFalse(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ADD_NODE | Permissions.ADD_PROPERTY));
      assertFalse(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.WRITE));
    }
 else {
      assertTrue(cppAdminUser.isGranted(tree,PROPERTY_STATE,Permissions.ALL));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGranted() throws Exception {
  RepositoryPermission rp=cppTestUser.getRepositoryPermission();
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.PRIVILEGE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT | Permissions.WORKSPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRepositoryPermissionIsGrantedAdmin() throws Exception {
  RepositoryPermission rp=cppAdminUser.getRepositoryPermission();
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.NAMESPACE_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.PRIVILEGE_MANAGEMENT));
  assertTrue(rp.isGranted(Permissions.NODE_TYPE_DEFINITION_MANAGEMENT | Permissions.PRIVILEGE_MANAGEMENT | Permissions.WORKSPACE_MANAGEMENT));
  assertFalse(rp.isGranted(Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsGrantedAction() throws Exception {
  Set<String> denied=ImmutableSet.of(Session.ACTION_ADD_NODE,JackrabbitSession.ACTION_ADD_PROPERTY);
  for (  String p : defActionsGranted.keySet()) {
    String[] actions=defActionsGranted.get(p);
    if (testProvider.isSupported(p)) {
      Set<String> expected=Sets.newHashSet(actions);
      expected.removeAll(denied);
      boolean canSetProperty=TreeLocation.create(readOnlyRoot,p).getProperty() != null;
      if (!canSetProperty) {
        expected.remove(Session.ACTION_SET_PROPERTY);
      }
      assertTrue(p,cppTestUser.isGranted(p,getActionString(expected.toArray(new String[expected.size()]))));
      assertEquals(p,canSetProperty,cppTestUser.isGranted(p,Session.ACTION_SET_PROPERTY));
      assertFalse(p,cppTestUser.isGranted(p,Session.ACTION_ADD_NODE));
      assertFalse(p,cppTestUser.isGranted(p,JackrabbitSession.ACTION_ADD_PROPERTY));
    }
 else {
      assertTrue(p,cppTestUser.isGranted(p,getActionString(actions)));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionIsGrantedAdmin(){
  TreePermission parentPermission=TreePermission.EMPTY;
  for (  String path : TP_PATHS) {
    TreePermission tp=cppAdminUser.getTreePermission(readOnlyRoot.getTree(path),parentPermission);
    if (testProvider.isSupported(path)) {
      assertTrue(path,tp.isGranted(Permissions.diff(Permissions.ALL,Permissions.ADD_NODE | Permissions.ADD_PROPERTY)));
      assertFalse(path,tp.isGranted(Permissions.ADD_PROPERTY | Permissions.ADD_NODE));
      assertFalse(path,tp.isGranted(Permissions.ALL));
    }
 else {
      assertTrue(path,tp.isGranted(Permissions.ALL));
    }
    parentPermission=tp;
  }
  parentPermission=TreePermission.EMPTY;
  for (  String nodePath : PATH_OUTSIDE_SCOPE) {
    Tree tree=readOnlyRoot.getTree(nodePath);
    TreePermission tp=cppAdminUser.getTreePermission(tree,parentPermission);
    assertTrue(nodePath,tp.isGranted(Permissions.ALL));
    parentPermission=tp;
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted() throws Exception {
  for (  String p : defPermissions.keySet()) {
    long defaultPerms=defPermissions.get(p);
    Tree tree=readOnlyRoot.getTree(p);
    if (testProvider.isSupported(p)) {
      long expected=Permissions.diff(defaultPerms,Permissions.ADD_NODE | Permissions.ADD_PROPERTY);
      assertTrue(cppTestUser.isGranted(tree,null,expected));
      assertFalse(cppTestUser.isGranted(tree,null,Permissions.ADD_NODE));
      assertFalse(cppTestUser.isGranted(tree,null,Permissions.ADD_PROPERTY));
      assertFalse(cppTestUser.isGranted(tree,null,Permissions.SET_PROPERTY));
      assertFalse(cppTestUser.isGranted(tree,null,Permissions.WRITE));
    }
 else {
      assertTrue(cppTestUser.isGranted(tree,null,defaultPerms));
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedActionAdmin() throws Exception {
  String[] grantedActions=new String[]{Session.ACTION_READ,JackrabbitSession.ACTION_REMOVE_NODE,JackrabbitSession.ACTION_MODIFY_PROPERTY,JackrabbitSession.ACTION_REMOVE_PROPERTY,Session.ACTION_REMOVE,JackrabbitSession.ACTION_READ_ACCESS_CONTROL,JackrabbitSession.ACTION_MODIFY_ACCESS_CONTROL,JackrabbitSession.ACTION_LOCKING,JackrabbitSession.ACTION_NODE_TYPE_MANAGEMENT,JackrabbitSession.ACTION_VERSIONING,JackrabbitSession.ACTION_USER_MANAGEMENT};
  for (  String path : NODE_PATHS) {
    if (testProvider.isSupported(path)) {
      assertTrue(cppAdminUser.isGranted(path,getActionString(grantedActions)));
      assertFalse(cppAdminUser.isGranted(path,Session.ACTION_ADD_NODE));
      assertFalse(cppAdminUser.isGranted(path,Session.ACTION_SET_PROPERTY));
      assertFalse(cppAdminUser.isGranted(path,JackrabbitSession.ACTION_ADD_PROPERTY));
    }
 else {
      assertTrue(cppAdminUser.isGranted(path,Permissions.getString(Permissions.ALL)));
      assertTrue(cppAdminUser.isGranted(path,getActionString(ALL_ACTIONS)));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesAdmin() throws Exception {
  Set<String> expectedAllowed=pbp.getPrivilegeNames(pbp.getBits(JCR_ALL).modifiable().diff(pbp.getBits(JCR_ADD_CHILD_NODES,REP_ADD_PROPERTIES)));
  for (  String path : NODE_PATHS) {
    Tree tree=readOnlyRoot.getTree(path);
    if (testProvider.isSupported(path)) {
      assertTrue(cppAdminUser.hasPrivileges(tree,expectedAllowed.toArray(new String[expectedAllowed.size()])));
      assertFalse(cppAdminUser.hasPrivileges(tree,JCR_ADD_CHILD_NODES));
      assertFalse(cppAdminUser.hasPrivileges(tree,REP_ADD_PROPERTIES));
      assertFalse(cppAdminUser.hasPrivileges(tree,JCR_WRITE));
    }
 else {
      assertTrue(cppAdminUser.hasPrivileges(tree,JCR_ALL));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.composite.CompositeTreePermissionTest </h4><pre class="type-7 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmpty(){
  TreePermission rootTp=createRootTreePermission();
  assertSame(TreePermission.EMPTY,rootTp);
  assertFalse(rootTp.canRead());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.ChildOrderPropertyTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasProperty(){
  Tree a=root.getTree("/a");
  assertFalse(a.hasProperty(TreeConstants.OAK_CHILD_ORDER));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetProperties(){
  Set<String> propertyNames=Sets.newHashSet(JcrConstants.JCR_PRIMARYTYPE,"aProp");
  Tree a=root.getTree("/a");
  for (  PropertyState prop : a.getProperties()) {
    assertTrue(propertyNames.remove(prop.getName()));
  }
  assertTrue(propertyNames.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.HiddenPropertyTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasProperty(){
  Tree a=root.getTree("/a");
  for (  String propName : hiddenProps) {
    assertFalse(a.hasProperty(propName));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetProperties(){
  Set<String> propertyNames=Sets.newHashSet(JcrConstants.JCR_PRIMARYTYPE,"aProp");
  Tree a=root.getTree("/a");
  for (  PropertyState prop : a.getProperties()) {
    assertTrue(propertyNames.remove(prop.getName()));
  }
  assertTrue(propertyNames.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.HiddenTreeTest </h4><pre class="type-9 type-2 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Before public void before() throws Exception {
  super.before();
  String hiddenParentPath="/oak:index/nodetype";
  parent=root.getTree(hiddenParentPath);
  assertTrue(parent.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetHiddenChildren(){
  Iterable<Tree> children=parent.getChildren();
  assertFalse(children.iterator().hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetHiddenTree(){
  Tree hidden=parent.getChild(HIDDEN_NAME);
  assertNotNull(hidden);
  assertFalse(hidden.exists());
  assertEquals(0,hidden.getChildrenCount(1));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasHiddenTree(){
  assertFalse(parent.hasChild(HIDDEN_NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.JcrUUIDTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Removing the jcr:uuid property must fail due to constraint violations.
 */
@Test public void testRemoveJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ);
  try {
    Root testRoot=getTestRoot();
    Tree test=testRoot.getTree(referenceablePath);
    test.removeProperty(JCR_UUID);
    testRoot.commit();
    fail("Removing the jcr:uuid property of a referenceable node must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(22,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creating a non-referenceable tree with an jcr:uuid must fail
 * with AccessDeniedException unless the REP_ADD_PROPERTY privilege
 * is granted
 */
@Test public void testCreateNonReferenceableJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  try {
    Root testRoot=getTestRoot();
    NodeUtil a=new NodeUtil(testRoot.getTree("/a"));
    a.setString(JCR_UUID,IdentifierManager.generateUUID());
    testRoot.commit();
    fail("Creating a jcr:uuid property for an unstructured node without ADD_PROPERTY permission must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creating a referenceable tree with an invalid jcr:uuid must fail.
 */
@Test public void testCreateBooleanJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  try {
    Root testRoot=getTestRoot();
    testRoot.refresh();
    NodeUtil a=new NodeUtil(testRoot.getTree("/a"));
    NodeUtil test=a.addChild("referenceable2",NT_NAME);
    test.setBoolean(JcrConstants.JCR_UUID,false);
    testRoot.commit();
    fail("Creating a referenceable node with an boolean uuid must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creating a referenceable tree with an invalid jcr:uuid must fail.
 */
@Test public void testCreateInvalidJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  try {
    Root testRoot=getTestRoot();
    testRoot.refresh();
    NodeUtil a=new NodeUtil(testRoot.getTree("/a"));
    NodeUtil test=a.addChild("referenceable2",NT_NAME);
    test.setString(JcrConstants.JCR_UUID,"not a uuid");
    testRoot.commit();
    fail("Creating a referenceable node with an invalid uuid must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(12,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creating a non-referenceable tree with a jcr:uuid must fail
 * with AccessDeniedException unless the REP_ADD_PROPERTY privilege
 * is granted
 */
@Test public void testModifyNonReferenceableJcrUuid() throws Exception {
  NodeUtil a=new NodeUtil(root.getTree("/a"));
  a.setString(JCR_UUID,"some-value");
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_ADD_CHILD_NODES);
  try {
    Root testRoot=getTestRoot();
    a=new NodeUtil(testRoot.getTree("/a"));
    assertNotNull(a.getString(JCR_UUID,null));
    a.setString(JCR_UUID,IdentifierManager.generateUUID());
    testRoot.commit();
    fail("Modifying a jcr:uuid property for an unstructured node without MODIFY_PROPERTY permission must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Modifying the jcr:uuid property must fail due to constraint violations.
 */
@Test public void testModifyJcrUuid() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  try {
    Root testRoot=getTestRoot();
    Tree test=testRoot.getTree(referenceablePath);
    test.setProperty(JCR_UUID,"anothervalue");
    testRoot.commit();
    fail("An attempt to change the jcr:uuid property must fail");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(12,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.Jr2CompatibilityTest </h4><pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveNodeWithJr2Flag() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.JCR_REMOVE_NODE);
  Root testRoot=getTestRoot();
  AccessControlManager acMgr=getAccessControlManager(testRoot);
  assertTrue(acMgr.hasPrivileges("/a",privilegesFromNames(PrivilegeConstants.REP_WRITE)));
  assertFalse(acMgr.hasPrivileges("/a/b",privilegesFromNames(PrivilegeConstants.JCR_REMOVE_NODE)));
  try {
    testRoot.getTree("/a").remove();
    testRoot.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveNodeWithJr2Flag2() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.REP_REMOVE_PROPERTIES);
  Root testRoot=getTestRoot();
  AccessControlManager acMgr=getAccessControlManager(testRoot);
  assertTrue(acMgr.hasPrivileges("/a",privilegesFromNames(PrivilegeConstants.REP_WRITE)));
  assertFalse(acMgr.hasPrivileges("/a/b",privilegesFromNames(PrivilegeConstants.REP_REMOVE_PROPERTIES)));
  try {
    testRoot.getTree("/a").remove();
    testRoot.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.MultipleSessionsACLStabilityTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAllowChild3() throws Exception {
  Tree rootTree1=testRoot1.getTree("/");
  Tree rootTree2=testRoot2.getTree("/");
  assertTrue(rootTree1.hasChild("a"));
  assertTrue(rootTree2.hasChild("a"));
  assertFalse(rootTree1.hasChild("a/bb"));
  assertFalse(rootTree2.hasChild("a/bb"));
  setupPermission(testRoot1,"/a",testPrincipal,false,PrivilegeConstants.JCR_READ);
  assertFalse(rootTree1.hasChild("a"));
  assertTrue(rootTree2.hasChild("a"));
  String uid=testPrincipal.getName();
  ContentSession session3=login(new SimpleCredentials(uid,uid.toCharArray()));
  Tree rootTree3=session3.getLatestRoot().getTree("/");
  assertFalse(rootTree3.hasChild("a"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAllowChild() throws Exception {
  Tree rootTree1=testRoot1.getTree("/");
  Tree rootTree2=testRoot2.getTree("/");
  assertFalse(rootTree1.hasChild("a/bb"));
  assertFalse(rootTree2.hasChild("a/bb"));
  setupPermission("/a/bb",testPrincipal,true,PrivilegeConstants.JCR_READ);
  assertFalse(rootTree1.hasChild("a/bb"));
  assertFalse(rootTree2.hasChild("a/bb"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAllowChild2() throws Exception {
  setupPermission("/a/bb",testPrincipal,true,PrivilegeConstants.JCR_READ);
  Tree rootTree1=testRoot1.getTree("/");
  Tree rootTree2=testRoot2.getTree("/");
  assertFalse(rootTree1.hasChild("a/bb"));
  assertFalse(rootTree2.hasChild("a/bb"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.RootTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetTree() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.JCR_READ);
  setupPermission("/a/bb",testPrincipal,false,PrivilegeConstants.JCR_READ);
  Root testRoot=getTestRoot();
  List<String> accessible=ImmutableList.of("/","/a","/a/b","/a/b/c");
  for (  String path : accessible) {
    assertTrue(testRoot.getTree(path).exists());
  }
  assertFalse(testRoot.getTree("/a/bb").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetTree2() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_READ);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.JCR_READ);
  setupPermission("/a/b/c",testPrincipal,true,PrivilegeConstants.JCR_READ);
  Root testRoot=getTestRoot();
  List<String> notAccessible=ImmutableList.of("/","/a/b");
  for (  String path : notAccessible) {
    assertFalse(path,testRoot.getTree(path).exists());
  }
  List<String> accessible=ImmutableList.of("/a","/a/bb","/a/b/c");
  for (  String path : accessible) {
    assertTrue(path,testRoot.getTree(path).exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNodeLocation2() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.REP_READ_NODES);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.REP_READ_NODES);
  setupPermission("/a/b/c",testPrincipal,true,PrivilegeConstants.REP_READ_NODES);
  Root testRoot=getTestRoot();
  List<String> notAccessible=ImmutableList.of("/","/a/b");
  for (  String path : notAccessible) {
    Tree tree=testRoot.getTree(path);
    assertNotNull(path,tree);
    assertFalse(tree.exists());
  }
  List<String> accessible=ImmutableList.of("/a","/a/bb","/a/b/c");
  for (  String path : accessible) {
    Tree tree=testRoot.getTree(path);
    assertNotNull(path,tree);
    assertTrue(tree.exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNodeLocation() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.REP_READ_NODES);
  setupPermission("/a/bb",testPrincipal,false,PrivilegeConstants.REP_READ_NODES);
  Root testRoot=getTestRoot();
  List<String> accessible=ImmutableList.of("/","/a","/a/b","/a/b/c");
  for (  String path : accessible) {
    Tree tree=testRoot.getTree(path);
    assertNotNull(tree);
    assertTrue(tree.exists());
  }
  Tree tree=testRoot.getTree("/a/bb");
  assertNotNull(tree);
  assertFalse(tree.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNodeLocation3() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.REP_READ_PROPERTIES);
  Root testRoot=getTestRoot();
  List<String> notAccessible=ImmutableList.of("/","/a","/a/b","/a/bb","/a/b/c");
  for (  String path : notAccessible) {
    Tree tree=testRoot.getTree(path);
    assertNotNull(path,tree);
    assertFalse(tree.exists());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.ShadowInvisibleContentTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testShadowInvisibleProperty() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_ALL);
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  Root testRoot=getTestRoot();
  Tree a=testRoot.getTree("/a");
  assertNull(a.getProperty("aProp"));
  assertFalse(a.hasProperty("aProp"));
  a.setProperty("aProp","aValue1");
  assertNotNull(a.getProperty("aProp"));
  assertTrue(a.hasProperty("aProp"));
  testRoot.commit();
  assertNull(a.getProperty("aProp"));
  assertFalse(a.hasProperty("aProp"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testShadowInvisibleProperty2() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_ALL);
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_ALTER_PROPERTIES);
  Root testRoot=getTestRoot();
  Tree a=testRoot.getTree("/a");
  assertNull(a.getProperty("aProp"));
  assertFalse(a.hasProperty("aProp"));
  a.setProperty("aProp","aValue");
  assertNotNull(a.getProperty("aProp"));
  assertTrue(a.hasProperty("aProp"));
  testRoot.commit();
  assertNull(a.getProperty("aProp"));
  assertFalse(a.hasProperty("aProp"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testShadowInvisibleNode() throws Exception {
  setupPermission("/a",testPrincipal,true,PrivilegeConstants.JCR_ALL);
  setupPermission("/a/b",testPrincipal,false,PrivilegeConstants.JCR_ALL);
  setupPermission("/a/b/c",testPrincipal,true,PrivilegeConstants.JCR_ALL);
  Root testRoot=getTestRoot();
  Tree a=testRoot.getTree("/a");
  assertFalse(a.hasChild("b"));
  Tree b=a.addChild("b");
  assertTrue(a.hasChild("b"));
  assertFalse(b.hasChild("c"));
  try {
    testRoot.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.TreeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChild() throws Exception {
  Tree rootTree=testRoot.getTree("/");
  assertTrue(rootTree.exists());
  Tree a=rootTree.getChild("a");
  assertTrue(a.exists());
  Tree b=a.getChild("b");
  assertTrue(b.exists());
  assertTrue(b.getChild("c").exists());
  assertFalse(a.getChild("bb").exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPolicyChild() throws Exception {
  assertTrue(root.getTree('/' + AccessControlConstants.REP_POLICY).exists());
  Tree rootTree=testRoot.getTree("/");
  assertFalse(rootTree.hasChild(AccessControlConstants.REP_POLICY));
  assertFalse(rootTree.getChild(AccessControlConstants.REP_POLICY).exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasProperty() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  assertFalse(a.hasProperty("aProp"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyStatus() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_NODES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  assertFalse(a.exists());
  PropertyState p=a.getProperty(JcrConstants.JCR_PRIMARYTYPE);
  assertNotNull(p);
  assertEquals(Tree.Status.UNCHANGED,a.getPropertyStatus(JcrConstants.JCR_PRIMARYTYPE));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetProperties() throws Exception {
  setupPermission("/a",testPrincipal,false,PrivilegeConstants.REP_READ_PROPERTIES);
  testRoot.refresh();
  Tree a=testRoot.getTree("/a");
  Iterable<? extends PropertyState> props=a.getProperties();
  assertFalse(props.iterator().hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasChild() throws Exception {
  Tree rootTree=testRoot.getTree("/");
  assertTrue(rootTree.hasChild("a"));
  assertFalse(rootTree.hasChild(AccessControlConstants.REP_POLICY));
  Tree a=rootTree.getChild("a");
  assertTrue(a.hasChild("b"));
  assertFalse(a.hasChild("bb"));
  Tree b=a.getChild("b");
  assertTrue(b.hasChild("c"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.evaluation.VersionStorageTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetVersionStorage() throws Exception {
  Tree vs=getTestRoot().getTree(VersionConstants.VERSION_STORE_PATH);
  assertFalse(vs.exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testGetVersionHistory2() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.JCR_READ);
  Tree vs=getTestRoot().getTree(vhPath);
  assertTrue(vs.exists());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetVersionStorage2() throws Exception {
  setupPermission("/",testPrincipal,true,PrivilegeConstants.JCR_READ);
  Tree vs=getTestRoot().getTree(VersionConstants.VERSION_STORE_PATH);
  assertTrue(vs.exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testGetVersionHistory() throws Exception {
  Tree vs=getTestRoot().getTree(vhPath);
  assertFalse(vs.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.AllPermissionsTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted(){
  for (  String path : paths) {
    Tree tree=RootFactory.createReadOnlyRoot(root).getTree(path);
    assertTrue(tree.exists());
    assertTrue(all.isGranted(tree,null,Permissions.ALL));
    for (    PropertyState prop : tree.getProperties()) {
      assertTrue(all.isGranted(tree,prop,Permissions.ALL));
    }
    for (    Tree child : tree.getChildren()) {
      assertTrue(all.isGranted(child,null,Permissions.ALL));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTreePermission(){
  for (  String path : paths) {
    Tree tree=RootFactory.createReadOnlyRoot(root).getTree(path);
    assertTrue(tree.exists());
    assertSame(TreePermission.ALL,all.getTreePermission(tree,TreePermission.EMPTY));
    for (    Tree child : tree.getChildren()) {
      assertSame(TreePermission.ALL,all.getTreePermission(child,TreePermission.EMPTY));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.ClusterPermissionsTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPermissionPropagation() throws Exception {
  Tree node=root1.getTree("/").addChild("testNode");
  node.setProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME);
  User user1=userManager1.createUser("testUser1","testUser1");
  User user2=userManager1.createUser("testUser2","testUser2");
  JackrabbitAccessControlList acl1=AccessControlUtils.getAccessControlList(aclMgr1,"/testNode");
  acl1.addEntry(EveryonePrincipal.getInstance(),AccessControlUtils.privilegesFromNames(aclMgr1,"jcr:all"),false);
  acl1.addEntry(user1.getPrincipal(),AccessControlUtils.privilegesFromNames(aclMgr1,"jcr:read"),true);
  aclMgr1.setPolicy("/testNode",acl1);
  root1.commit();
  syncClusterNodes();
  root2.refresh();
  ContentSession session1=contentRepository2.login(new SimpleCredentials("testUser1","testUser1".toCharArray()),null);
  ContentSession session2=contentRepository2.login(new SimpleCredentials("testUser2","testUser2".toCharArray()),null);
  assertTrue(session1.getLatestRoot().getTree("/testNode").exists());
  assertFalse(session2.getLatestRoot().getTree("/testNode").exists());
  acl1=AccessControlUtils.getAccessControlList(aclMgr1,"/testNode");
  acl1.addEntry(EveryonePrincipal.getInstance(),AccessControlUtils.privilegesFromNames(aclMgr1,"jcr:read"),true);
  aclMgr1.setPolicy("/testNode",acl1);
  root1.commit();
  syncClusterNodes();
  root2.refresh();
  assertTrue(session1.getLatestRoot().getTree("/testNode").exists());
  assertTrue(session2.getLatestRoot().getTree("/testNode").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionEntryProviderImplTest </h4><pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoExistingName() throws Exception {
  MockPermissionStore store=new MockPermissionStore();
  PermissionEntryCache cache=new MockPermissionEntryCache();
  Set<String> principalNames=Sets.newHashSet("noEntries","noEntries2","noEntries3");
  PermissionEntryProviderImpl provider=new PermissionEntryProviderImpl(store,cache,principalNames,ConfigurationParameters.EMPTY);
  Set<String> existingNames=getExistingNames(provider);
  assertTrue(existingNames.isEmpty());
  Field pathMapField=provider.getClass().getDeclaredField("pathEntryMap");
  pathMapField.setAccessible(true);
  assertNull(pathMapField.get(provider));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2465">OAK-2465</a>
 */
@Test public void testExistingNamesAndLongOverFlow() throws Exception {
  MockPermissionStore store=new MockPermissionStore();
  PermissionEntryCache cache=new MockPermissionEntryCache();
  Set<String> principalNames=Sets.newHashSet(GROUP_LONG_MAX_MINUS_10,GROUP_50,"noEntries");
  PermissionEntryProviderImpl provider=new PermissionEntryProviderImpl(store,cache,principalNames,ConfigurationParameters.EMPTY);
  Set<String> existingNames=getExistingNames(provider);
  assertFalse(principalNames.equals(existingNames));
  assertEquals(2,existingNames.size());
  principalNames.remove("noEntries");
  assertEquals(principalNames,existingNames);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionHookTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImplicitAceRemoval() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,testPath);
  acl.addAccessControlEntry(getTestPrincipal(),privilegesFromNames(JCR_READ,REP_WRITE));
  acMgr.setPolicy(testPath,acl);
  acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(JCR_READ));
  acMgr.setPolicy(childPath,acl);
  root.commit();
  assertTrue(root.getTree(childPath + "/rep:policy").exists());
  Tree principalRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  assertEquals(4,cntEntries(principalRoot));
  ContentSession testSession=createTestSession();
  Root testRoot=testSession.getLatestRoot();
  assertTrue(testRoot.getTree(childPath).exists());
  assertFalse(testRoot.getTree(childPath + "/rep:policy").exists());
  testRoot.getTree(childPath).remove();
  testRoot.commit();
  testSession.close();
  root.refresh();
  assertFalse(root.getTree(testPath).hasChild("childNode"));
  assertFalse(root.getTree(childPath + "/rep:policy").exists());
  principalRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  assertEquals(2,cntEntries(principalRoot));
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2015">OAK-2015</a>
 */
@Test public void testDynamicJcrAll() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  acl.addAccessControlEntry(EveryonePrincipal.getInstance(),privilegesFromNames(JCR_ALL));
  acMgr.setPolicy(childPath,acl);
  root.commit();
  Tree allEntry=getEntry(EveryonePrincipal.NAME,childPath,0);
  assertTrue(allEntry.exists());
  PropertyState ps=allEntry.getProperty(PermissionConstants.REP_PRIVILEGE_BITS);
  assertEquals(1,ps.count());
  assertEquals(PermissionStore.DYNAMIC_ALL_BITS,ps.getValue(Type.LONG,0).longValue());
  Set<Principal> principalSet=ImmutableSet.<Principal>of(EveryonePrincipal.getInstance());
  PermissionProvider permissionProvider=getConfig(AuthorizationConfiguration.class).getPermissionProvider(root,root.getContentSession().getWorkspaceName(),principalSet);
  Tree childTree=root.getTree(childPath);
  assertTrue(permissionProvider.hasPrivileges(childTree,PrivilegeConstants.JCR_ALL));
  assertTrue(permissionProvider.getPrivileges(childTree).contains(PrivilegeConstants.JCR_ALL));
  long diff=Permissions.diff(Permissions.ALL,Permissions.REMOVE_NODE | Permissions.ADD_NODE);
  assertFalse(permissionProvider.isGranted(childTree,null,Permissions.REMOVE_NODE));
  assertFalse(permissionProvider.isGranted(childTree,null,Permissions.ADD_NODE));
  assertTrue(permissionProvider.isGranted(childTree,null,diff));
  acl=AccessControlUtils.getAccessControlList(acMgr,childPath);
  for (  AccessControlEntry ace : acl.getAccessControlEntries()) {
    if (EveryonePrincipal.NAME.equals(ace.getPrincipal().getName())) {
      acl.removeAccessControlEntry(ace);
    }
  }
  acMgr.setPolicy(childPath,acl);
  root.commit();
  Tree everyoneRoot=getPrincipalRoot(EveryonePrincipal.NAME);
  Tree parent=everyoneRoot.getChild(PermissionUtil.getEntryName(childPath));
  if (parent.exists()) {
    assertFalse(parent.getChild("0").exists());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionProviderImplTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesForReadPaths() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    PermissionProvider pp=createPermissionProvider(testSession);
    for (    String path : READ_PATHS) {
      Tree tree=root.getTree(path);
      assertTrue(pp.hasPrivileges(tree,PrivilegeConstants.JCR_READ));
      assertTrue(pp.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES));
      assertTrue(pp.hasPrivileges(tree,PrivilegeConstants.REP_READ_PROPERTIES));
      assertFalse(pp.hasPrivileges(tree,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
    }
    assertFalse(pp.hasPrivileges(null,PrivilegeConstants.JCR_READ));
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    PermissionProvider pp=createPermissionProvider(testSession);
    assertTrue(pp.hasPrivileges(null));
    assertTrue(pp.hasPrivileges(null,new String[0]));
    assertFalse(pp.hasPrivileges(null,PrivilegeConstants.JCR_WORKSPACE_MANAGEMENT));
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedNonExistingVersionStoreLocation(){
  TreeLocation location=TreeLocation.create(root,VersionConstants.VERSION_STORE_PATH + "/non/existing/tree");
  PermissionProvider pp=createPermissionProvider(adminSession);
  assertTrue(pp instanceof PermissionProviderImpl);
  assertFalse(((PermissionProviderImpl)pp).isGranted(location,Permissions.ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadPath() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    Root r=testSession.getLatestRoot();
    PermissionProvider pp=createPermissionProvider(testSession);
    Tree tree=r.getTree("/");
    assertFalse(tree.exists());
    assertFalse(pp.getTreePermission(tree,TreePermission.EMPTY).canRead());
    for (    String path : READ_PATHS) {
      tree=r.getTree(path);
      assertTrue(tree.exists());
      assertTrue(pp.getTreePermission(tree,TreePermission.EMPTY).canRead());
    }
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedForReadPaths() throws Exception {
  ContentSession testSession=createTestSession();
  try {
    PermissionProvider pp=createPermissionProvider(testSession);
    for (    String path : READ_PATHS) {
      assertTrue(pp.isGranted(path,Permissions.getString(Permissions.READ)));
      assertTrue(pp.isGranted(path,Permissions.getString(Permissions.READ_NODE)));
      assertTrue(pp.isGranted(path + '/' + JcrConstants.JCR_PRIMARYTYPE,Permissions.getString(Permissions.READ_PROPERTY)));
      assertFalse(pp.isGranted(path,Permissions.getString(Permissions.READ_ACCESS_CONTROL)));
    }
    for (    String path : READ_PATHS) {
      Tree tree=root.getTree(path);
      assertTrue(pp.isGranted(tree,null,Permissions.READ));
      assertTrue(pp.isGranted(tree,null,Permissions.READ_NODE));
      assertTrue(pp.isGranted(tree,tree.getProperty(JcrConstants.JCR_PRIMARYTYPE),Permissions.READ_PROPERTY));
      assertFalse(pp.isGranted(tree,null,Permissions.READ_ACCESS_CONTROL));
    }
    RepositoryPermission rp=pp.getRepositoryPermission();
    assertFalse(rp.isGranted(Permissions.READ));
    assertFalse(rp.isGranted(Permissions.READ_NODE));
    assertFalse(rp.isGranted(Permissions.READ_PROPERTY));
    assertFalse(rp.isGranted(Permissions.READ_ACCESS_CONTROL));
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdministatorConfig() throws Exception {
  adminstrators.addMember(getTestUser());
  root.commit();
  ContentSession testSession=createTestSession();
  try {
    Root r=testSession.getLatestRoot();
    Root immutableRoot=RootFactory.createReadOnlyRoot(r);
    PermissionProvider pp=createPermissionProvider(testSession);
    assertTrue(r.getTree("/").exists());
    TreePermission tp=pp.getTreePermission(immutableRoot.getTree("/"),TreePermission.EMPTY);
    assertSame(TreePermission.ALL,tp);
    for (    String path : READ_PATHS) {
      Tree tree=r.getTree(path);
      assertTrue(tree.exists());
      assertSame(TreePermission.ALL,pp.getTreePermission(tree,TreePermission.EMPTY));
    }
  }
  finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionStoreTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadAccess(){
  Tree ps=testRoot.getTree(PermissionConstants.PERMISSIONS_STORE_PATH);
  assertFalse(ps.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted(){
  PermissionProvider pp=createPermissionProvider();
  Tree t=root.getTree(PermissionConstants.PERMISSIONS_STORE_PATH);
  assertFalse(pp.isGranted(t,null,Permissions.READ));
  assertFalse(pp.isGranted(t,t.getProperty(JcrConstants.JCR_PRIMARYTYPE),Permissions.READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrivilege(){
  PermissionProvider pp=createPermissionProvider();
  Tree t=root.getTree(PermissionConstants.PERMISSIONS_STORE_PATH);
  Set<String> privilegeNames=pp.getPrivileges(t);
  assertTrue(privilegeNames.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivilege(){
  PermissionProvider pp=createPermissionProvider();
  Tree t=root.getTree(PermissionConstants.PERMISSIONS_STORE_PATH);
  assertFalse(pp.hasPrivileges(t,PrivilegeConstants.JCR_READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedAtPath(){
  PermissionProvider pp=createPermissionProvider();
  assertFalse(pp.isGranted(PermissionConstants.PERMISSIONS_STORE_PATH,Session.ACTION_READ));
  assertFalse(pp.isGranted(PermissionConstants.PERMISSIONS_STORE_PATH,Session.ACTION_ADD_NODE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.PermissionValidatorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryTypeToPolicyNode() throws Exception {
  testRootNode.getChild("child").addChild(AccessControlConstants.REP_POLICY,NT_UNSTRUCTURED);
  root.commit();
  grant(TEST_ROOT_PATH,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_READ_ACCESS_CONTROL,PrivilegeConstants.REP_WRITE);
  ContentSession testSession=createTestSession();
  try {
    Root testRoot=testSession.getLatestRoot();
    Tree testChild=testRoot.getTree(TEST_CHILD_PATH);
    testChild.setProperty(PropertyStates.createProperty(JcrConstants.JCR_MIXINTYPES,ImmutableList.of(AccessControlConstants.MIX_REP_ACCESS_CONTROLLABLE),Type.NAMES));
    Tree testPolicy=testChild.getChild(AccessControlConstants.REP_POLICY);
    testPolicy.setOrderableChildren(true);
    testPolicy.setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_ACL,Type.NAME);
    testRoot.commit();
    fail("Turning a false policy node into access control content requires the ability to write AC content.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
    assertEquals(0,e.getCode());
  }
 finally {
    testSession.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.TreePermissionImplTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCanReadProperties2() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/test");
  acl.addEntry(getTestUser().getPrincipal(),privilegesFromNames(PrivilegeConstants.JCR_READ),true);
  acMgr.setPolicy("/test",acl);
  root.commit();
  Tree policyTree=root.getTree("/test/rep:policy");
  NodeUtil ace=new NodeUtil(policyTree).addChild("ace2",NT_REP_DENY_ACE);
  ace.setNames(REP_PRIVILEGES,PrivilegeConstants.REP_READ_PROPERTIES);
  ace.setString(REP_PRINCIPAL_NAME,getTestUser().getPrincipal().getName());
  root.commit();
  TreePermission tp=getTreePermission("/test");
  assertFalse(tp.canReadProperties());
  assertTrue(tp.canRead());
  assertFalse(tp.canReadProperties());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCanReadProperties() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/test");
  acl.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_READ),true);
  acl.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.REP_READ_PROPERTIES),false);
  acMgr.setPolicy("/test",acl);
  root.commit();
  TreePermission tp=getTreePermission("/test");
  assertFalse(tp.canReadProperties());
  assertTrue(tp.canRead());
  assertFalse(tp.canReadProperties());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.permission.VersionTreePermissionTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testVersionableRemoved() throws Exception {
  Tree versionHistory=checkNotNull(vMgr.getVersionHistory(testTree));
  testTree.remove();
  root.commit();
  pp.refresh();
  TreePermission tp=getVersionPermission(root,pp,versionHistory.getPath());
  assertVersionPermission(tp,"/",false);
  Tree vTree=versionHistory.getChild("1.0");
  tp=pp.getTreePermission(vTree,tp);
  assertVersionPermission(tp,"/",false);
  Tree frozen=vTree.getChild(JCR_FROZENNODE);
  assertTrue(frozen.exists());
  tp=pp.getTreePermission(frozen,tp);
  assertVersionPermission(tp,"/",false);
  Tree t=frozen;
  String expectedPath="/";
  for (  String name : new String[]{"a","b","c"}) {
    t=t.getChild(name);
    expectedPath=PathUtils.concat(expectedPath,name);
    tp=pp.getTreePermission(t,tp);
    assertVersionPermission(tp,expectedPath,false);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetTreePermission() throws Exception {
  Tree versionHistory=checkNotNull(vMgr.getVersionHistory(testTree));
  String expectedPath="/test";
  TreePermission tp=getVersionPermission(root,pp,versionHistory.getPath());
  assertVersionPermission(tp,expectedPath,true);
  Tree vTree=versionHistory.getChild("1.0");
  assertTrue(vTree.exists());
  tp=pp.getTreePermission(vTree,tp);
  assertVersionPermission(tp,expectedPath,true);
  Tree frozen=vTree.getChild(JCR_FROZENNODE);
  assertTrue(frozen.exists());
  tp=pp.getTreePermission(frozen,tp);
  assertVersionPermission(tp,expectedPath,true);
  Tree t=frozen;
  for (  String name : new String[]{"a","b","c"}) {
    t=t.getChild(name);
    expectedPath=PathUtils.concat(expectedPath,name);
    tp=pp.getTreePermission(t,tp);
    assertVersionPermission(tp,expectedPath,true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.GlobPatternTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPathRestriction(){
  GlobPattern gp=GlobPattern.create("/a/b/c","d");
  Map<String,Boolean> tests=new HashMap<String,Boolean>();
  tests.put("/",false);
  tests.put("/a",false);
  tests.put("/a/b/c",false);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e/f",false);
  tests.put("/a/b/cd",true);
  tests.put("/a/b/cd/e",true);
  tests.put("/a/b/cd/e/f",true);
  tests.put("/a/b/cde",false);
  for (  String toTest : tests.keySet()) {
    assertTrue(gp + " : " + toTest,tests.get(toTest) == gp.matches(toTest));
  }
  gp=GlobPattern.create("/a/b/c","/d");
  tests=new HashMap<String,Boolean>();
  tests.put("/",false);
  tests.put("/a",false);
  tests.put("/a/b/c",false);
  tests.put("/a/b/c/d",true);
  tests.put("/a/b/c/d/e/f",true);
  tests.put("/a/b/cd",false);
  tests.put("/a/b/cd/e",false);
  tests.put("/a/b/cd/e/f",false);
  tests.put("/a/b/cde",false);
  for (  String toTest : tests.keySet()) {
    assertTrue(gp + " : " + toTest,tests.get(toTest) == gp.matches(toTest));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEmptyRestriction(){
  GlobPattern gp=GlobPattern.create("/","");
  Map<String,Boolean> tests=new HashMap<String,Boolean>();
  tests.put("/",true);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e",false);
  tests.put("/a/b/c/d/e/f",false);
  tests.put("/a/b/c",false);
  tests.put("/a",false);
  tests.put("/a/b/cde",false);
  for (  String toTest : tests.keySet()) {
    assertTrue(gp + " : " + toTest,tests.get(toTest) == gp.matches(toTest));
  }
  gp=GlobPattern.create("/a/b/c","");
  tests=new HashMap<String,Boolean>();
  tests.put("/a/b/c",true);
  tests.put("/a/b/c/d",false);
  tests.put("/a/b/c/d/e",false);
  tests.put("/a/b/c/d/e/f",false);
  tests.put("/",false);
  tests.put("/a",false);
  tests.put("/a/b/cde",false);
  for (  String toTest : tests.keySet()) {
    assertTrue(gp + " : " + toTest,tests.get(toTest) == gp.matches(toTest));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.ItemNamePatternTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMatchesItem() throws Exception {
  NodeUtil rootTree=new NodeUtil(root.getTree("/"));
  List<String> matching=ImmutableList.of("a","b","c","d/e/a","a/b/c/d/b","test/c");
  for (  String relPath : matching) {
    Tree testTree=rootTree.getOrAddTree(relPath,NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree();
    assertTrue(pattern.matches(testTree,null));
    assertTrue(pattern.matches(testTree,PropertyStates.createProperty("a",Boolean.FALSE)));
    assertFalse(pattern.matches(testTree,PropertyStates.createProperty("f","anyval")));
  }
  List<String> notMatching=ImmutableList.of("d","b/d","d/e/f","c/b/abc");
  for (  String relPath : notMatching) {
    Tree testTree=rootTree.getOrAddTree(relPath,NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree();
    assertFalse(pattern.matches(testTree,null));
    assertTrue(pattern.matches(testTree,PropertyStates.createProperty("a",Boolean.FALSE)));
    assertFalse(pattern.matches(testTree,PropertyStates.createProperty("f","anyval")));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMatchesPath(){
  List<String> matching=ImmutableList.of("/a","/b","/c","/d/e/a","/a/b/c/d/b","/test/c");
  for (  String p : matching) {
    assertTrue(pattern.matches(p));
  }
  List<String> notMatching=ImmutableList.of("/","/d","/b/d","/d/e/f","/c/b/abc");
  for (  String p : notMatching) {
    assertFalse(pattern.matches(p));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMatchesNull(){
  assertFalse(pattern.matches());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.ItemNameRestrictionTest </h4><pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyProperty() throws Exception {
  Root testRoot=testSession.getLatestRoot();
  Tree c=testRoot.getTree("/a/d/b/e/c");
  try {
    c.setProperty("a","anyvalue");
    testRoot.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
 finally {
    testRoot.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveTree() throws Exception {
  Root testRoot=testSession.getLatestRoot();
  List<String> paths=ImmutableList.of("/a/d/b/e/c","/a/d/b","/a");
  for (  String p : paths) {
    try {
      testRoot.getTree(p).remove();
      testRoot.commit();
      fail();
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isAccessViolation());
    }
 finally {
      testRoot.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddProperty() throws Exception {
  Root testRoot=testSession.getLatestRoot();
  List<String> paths=ImmutableList.of("/a","/a/d/b","/a/d/b/e/c");
  for (  String p : paths) {
    Tree t=testRoot.getTree(p);
    t.setProperty("b","anyvalue");
    testRoot.commit();
  }
  for (  String p : paths) {
    Tree t=testRoot.getTree(p);
    try {
      t.setProperty("notAllowed","anyvalue");
      testRoot.commit();
      fail();
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isAccessViolation());
    }
 finally {
      testRoot.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveTree2() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/a");
  acl.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_REMOVE_CHILD_NODES),true);
  acMgr.setPolicy(acl.getPath(),acl);
  root.commit();
  Root testRoot=testSession.getLatestRoot();
  List<String> paths=ImmutableList.of("/a/d/b/e/c","/a/d/b");
  for (  String p : paths) {
    testRoot.getTree(p).remove();
    testRoot.commit();
  }
  try {
    testRoot.getTree("/a").remove();
    testRoot.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
 finally {
    testRoot.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyMembersOnly() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  String path=PathUtils.getAncestorPath(UserConstants.DEFAULT_USER_PATH,1);
  try {
    JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,path);
    acl.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_READ),true);
    acl.addEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.REP_USER_MANAGEMENT),true,Collections.<String,Value>emptyMap(),ImmutableMap.<String,Value[]>of(AccessControlConstants.REP_ITEM_NAMES,new Value[]{vf.createValue(UserConstants.REP_MEMBERS,PropertyType.NAME)}));
    acMgr.setPolicy(acl.getPath(),acl);
    root.commit();
    Root testRoot=testSession.getLatestRoot();
    UserManager uMgr=getUserManager(testRoot);
    Group gr=uMgr.getAuthorizable(testGroup.getID(),Group.class);
    User u=uMgr.getAuthorizable(getTestUser().getID(),User.class);
    gr.addMember(u);
    testRoot.commit();
    try {
      u.changePassword("blub");
      testRoot.commit();
      fail();
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isAccessViolation());
    }
 finally {
      testRoot.refresh();
    }
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
 finally {
    JackrabbitAccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,path);
    if (acl != null) {
      acMgr.removePolicy(acl.getPath(),acl);
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRead(){
  Root testRoot=testSession.getLatestRoot();
  List<String> visible=ImmutableList.of("/a","/a/d/b","/a/d/b/e/c");
  for (  String p : visible) {
    assertTrue(testRoot.getTree(p).exists());
  }
  List<String> invisible=ImmutableList.of("/","/a/d","/a/d/b/e","/a/d/b/e/c/f");
  for (  String p : invisible) {
    assertFalse(testRoot.getTree(p).exists());
  }
  Tree c=testRoot.getTree("/a/d/b/e/c");
  assertNull(c.getProperty(JcrConstants.JCR_PRIMARYTYPE));
  assertNull(c.getProperty("prop"));
  assertNotNull(c.getProperty("a"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.authorization.restriction.RestrictionProviderImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPatternFromRestrictions() throws Exception {
  Map<PropertyState,RestrictionPattern> map=newHashMap();
  map.put(PropertyStates.createProperty(REP_GLOB,"/*/jcr:content"),GlobPattern.create("/testPath","/*/jcr:content"));
  List<String> ntNames=ImmutableList.of(JcrConstants.NT_FOLDER,JcrConstants.NT_LINKEDFILE);
  map.put(PropertyStates.createProperty(REP_NT_NAMES,ntNames,Type.NAMES),new NodeTypePattern(ntNames));
  List<String> prefixes=ImmutableList.of("rep","jcr");
  map.put(PropertyStates.createProperty(REP_PREFIXES,prefixes,Type.STRINGS),new PrefixPattern(prefixes));
  List<String> itemNames=ImmutableList.of("abc","jcr:primaryType");
  map.put(PropertyStates.createProperty(REP_ITEM_NAMES,itemNames,Type.NAMES),new ItemNamePattern(itemNames));
  NodeUtil tree=new NodeUtil(root.getTree("/")).getOrAddTree("testPath",JcrConstants.NT_UNSTRUCTURED);
  Tree restrictions=tree.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS).getTree();
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
    RestrictionPattern pattern=provider.getPattern("/testPath",provider.readRestrictions("/testPath",tree.getTree()));
    assertEquals(entry.getValue(),pattern);
    restrictions.removeProperty(entry.getKey().getName());
  }
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
  }
  RestrictionPattern pattern=provider.getPattern("/testPath",provider.readRestrictions("/testPath",tree.getTree()));
  assertTrue(pattern instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionPattern() throws Exception {
  Map<PropertyState,RestrictionPattern> map=newHashMap();
  map.put(PropertyStates.createProperty(REP_GLOB,"/*/jcr:content"),GlobPattern.create("/testPath","/*/jcr:content"));
  List<String> ntNames=ImmutableList.of(JcrConstants.NT_FOLDER,JcrConstants.NT_LINKEDFILE);
  map.put(PropertyStates.createProperty(REP_NT_NAMES,ntNames,Type.NAMES),new NodeTypePattern(ntNames));
  NodeUtil tree=new NodeUtil(root.getTree("/")).getOrAddTree("testPath",JcrConstants.NT_UNSTRUCTURED);
  Tree restrictions=tree.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS).getTree();
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
    RestrictionPattern pattern=provider.getPattern("/testPath",restrictions);
    assertEquals(entry.getValue(),pattern);
    restrictions.removeProperty(entry.getKey().getName());
  }
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
  }
  RestrictionPattern pattern=provider.getPattern("/testPath",restrictions);
  assertTrue(pattern instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPatternForAllSupported() throws Exception {
  Map<PropertyState,RestrictionPattern> map=newHashMap();
  map.put(PropertyStates.createProperty(REP_GLOB,"/*/jcr:content"),GlobPattern.create("/testPath","/*/jcr:content"));
  List<String> ntNames=ImmutableList.of(JcrConstants.NT_FOLDER,JcrConstants.NT_LINKEDFILE);
  map.put(PropertyStates.createProperty(REP_NT_NAMES,ntNames,Type.NAMES),new NodeTypePattern(ntNames));
  List<String> prefixes=ImmutableList.of("rep","jcr");
  map.put(PropertyStates.createProperty(REP_PREFIXES,prefixes,Type.STRINGS),new PrefixPattern(prefixes));
  List<String> itemNames=ImmutableList.of("abc","jcr:primaryType");
  map.put(PropertyStates.createProperty(REP_ITEM_NAMES,prefixes,Type.NAMES),new ItemNamePattern(itemNames));
  NodeUtil tree=new NodeUtil(root.getTree("/")).getOrAddTree("testPath",JcrConstants.NT_UNSTRUCTURED);
  Tree restrictions=tree.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS).getTree();
  for (  Map.Entry<PropertyState,RestrictionPattern> entry : map.entrySet()) {
    restrictions.setProperty(entry.getKey());
  }
  RestrictionPattern pattern=provider.getPattern("/testPath",restrictions);
  assertTrue(pattern instanceof CompositePattern);
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedDefinitions(){
  assertTrue(provider.getSupportedRestrictions(null).isEmpty());
  Set<RestrictionDefinition> defs=provider.getSupportedRestrictions("/testPath");
  assertNotNull(defs);
  assertEquals(4,defs.size());
  for (  RestrictionDefinition def : defs) {
    if (REP_GLOB.equals(def.getName())) {
      assertEquals(Type.STRING,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_NT_NAMES.equals(def.getName())) {
      assertEquals(Type.NAMES,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_PREFIXES.equals(def.getName())) {
      assertEquals(Type.STRINGS,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else     if (REP_ITEM_NAMES.equals(def.getName())) {
      assertEquals(Type.NAMES,def.getRequiredType());
      assertFalse(def.isMandatory());
    }
 else {
      fail("unexpected restriction " + def.getName());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.principal.PrincipalProviderImplTest </h4><pre class="type-13 type-9 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testEveryoneMembers() throws Exception {
  Principal everyone=principalProvider.getPrincipal(EveryonePrincipal.NAME);
  assertTrue(everyone instanceof EveryonePrincipal);
  Group everyoneGroup=null;
  try {
    UserManager userMgr=getUserManager(root);
    everyoneGroup=userMgr.createGroup(EveryonePrincipal.NAME);
    root.commit();
    Principal ep=principalProvider.getPrincipal(EveryonePrincipal.NAME);
    Set<? extends Principal> everyoneMembers=ImmutableSet.copyOf(Collections.list(((java.security.acl.Group)ep).members()));
    Iterator<? extends Principal> all=principalProvider.findPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
    while (all.hasNext()) {
      Principal p=all.next();
      if (everyone.equals(p)) {
        assertFalse(everyoneMembers.contains(p));
      }
 else {
        assertTrue(everyoneMembers.contains(p));
      }
    }
  }
  finally {
    if (everyoneGroup != null) {
      everyoneGroup.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.JcrAllCommitHookTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testJcrAll() throws Exception {
  Privilege all=privilegeManager.getPrivilege(PrivilegeConstants.JCR_ALL);
  Set<Privilege> aggregates=Sets.newHashSet(all.getDeclaredAggregatePrivileges());
  assertTrue(aggregates.contains(newPrivilege));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.L4_CustomPrivilegeTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivilege() throws Exception {
  try {
    Privilege[] testPrivileges=new Privilege[]{customAbstractPriv,customAggrPriv};
    Set<Principal> testPrincipals=ImmutableSet.of(EveryonePrincipal.getInstance(),getTestUser().getPrincipal());
    boolean hasPrivilege=getAccessControlManager(root).hasPrivileges("/",testPrincipals,testPrivileges);
    assertTrue(hasPrivilege);
  }
  finally {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.PrivilegeDefinitionWriterTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteDefinition() throws Exception {
  PrivilegeDefinitionWriter writer=new PrivilegeDefinitionWriter(root);
  writer.writeDefinition(new ImmutablePrivilegeDefinition("tmp",true,asList(JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL)));
  Tree privRoot=root.getTree(PRIVILEGES_PATH);
  assertTrue(privRoot.hasChild("tmp"));
  Tree tmpTree=privRoot.getChild("tmp");
  assertTrue(TreeUtil.getBoolean(tmpTree,REP_IS_ABSTRACT));
  assertArrayEquals(new String[]{JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},Iterables.toArray(TreeUtil.getStrings(tmpTree,REP_AGGREGATES),String.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.privilege.PrivilegeValidatorTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2413">OAK-2413</a>
 */
@Test public void testChildNodeChangedWithoutChanges() throws CommitFailedException {
  NodeBuilder nb=EmptyNodeState.EMPTY_NODE.builder();
  nb.setProperty(JcrConstants.JCR_PRIMARYTYPE,NT_REP_PRIVILEGE,Type.NAME);
  NodeState privilegeDefinition=nb.getNodeState();
  assertTrue(NT_REP_PRIVILEGE.equals(NodeStateUtils.getPrimaryTypeName(privilegeDefinition)));
  PrivilegeValidator pv=new PrivilegeValidator(root,root);
  assertNull(pv.childNodeChanged("test",privilegeDefinition,privilegeDefinition));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingPrivilegeBits(){
  try {
    createPrivilegeTree();
    root.commit();
    fail("Missing privilege bits property must be detected.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAggregatesIncludesJcrAll() throws Exception {
  try {
    Tree privTree=createPrivilegeTree();
    privTree.setProperty(PropertyStates.createProperty(REP_AGGREGATES,ImmutableList.of(JCR_ALL,JCR_READ,JCR_WRITE),Type.NAMES));
    PrivilegeBits.getInstance(bitsProvider.getBits(JCR_ALL,JCR_READ,JCR_WRITE)).writeTo(privTree);
    root.commit();
    fail("Aggregation containing jcr:all is invalid.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(53,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see <a href="https://issues.apache.org/jira/browse/OAK-2413">OAK-2413</a>
 */
@Test public void testChildNodeChangedWithChanges() throws CommitFailedException {
  NodeBuilder nb=EmptyNodeState.EMPTY_NODE.builder();
  nb.setProperty(JcrConstants.JCR_PRIMARYTYPE,NT_REP_PRIVILEGE,Type.NAME);
  NodeState privilegeDefinition=nb.getNodeState();
  assertTrue(NT_REP_PRIVILEGE.equals(NodeStateUtils.getPrimaryTypeName(privilegeDefinition)));
  PrivilegeValidator pv=new PrivilegeValidator(root,root);
  try {
    pv.childNodeChanged("test",privilegeDefinition,EmptyNodeState.EMPTY_NODE);
  }
 catch (  CommitFailedException e) {
    assertEquals(41,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AbstractAddMembersByIdTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNoMembers() throws Exception {
  Set<String> failed=testGroup.addMembers();
  assertTrue(failed.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSameId() throws Exception {
  Set<String> failed=testGroup.addMembers(testGroup.getID());
  assertEquals(1,failed.size());
  assertTrue(failed.contains(testGroup.getID()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserMembers() throws Exception {
  Set<String> failed=testGroup.addMembers(getTestUser().getID());
  assertTrue(failed.isEmpty());
  root.commit();
  assertTrue(testGroup.isDeclaredMember(getTestUser()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMixedMembers() throws Exception {
  Set<String> failed=testGroup.addMembers(getTestUser().getID(),memberGroup.getID());
  assertTrue(failed.isEmpty());
  root.commit();
  assertTrue(testGroup.isDeclaredMember(getTestUser()));
  assertTrue(testGroup.isDeclaredMember(memberGroup));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupMembers() throws Exception {
  Set<String> failed=testGroup.addMembers(memberGroup.getID());
  assertTrue(failed.isEmpty());
  root.commit();
  assertTrue(testGroup.isDeclaredMember(memberGroup));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testValidAndNullIdModifiesRoot() throws Exception {
  try {
    testGroup.addMembers(getTestUser().getID(),null);
  }
 catch (  ConstraintViolationException e) {
  }
  assertTrue(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwice() throws Exception {
  Set<String> failed=testGroup.addMembers(memberGroup.getID(),memberGroup.getID());
  assertTrue(failed.isEmpty());
  assertTrue(testGroup.isDeclaredMember(memberGroup));
  Iterable<String> memberIds=getMemberIds(testGroup);
  assertEquals(1,Iterables.size(memberIds));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testValidAndEmptyIdModifiesRoot() throws Exception {
  try {
    testGroup.addMembers(getTestUser().getID(),"");
  }
 catch (  ConstraintViolationException e) {
  }
  assertTrue(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCyclicMembership() throws Exception {
  memberGroup.addMember(testGroup);
  root.commit();
  Set<String> failed=testGroup.addMembers(memberGroup.getID());
  assertTrue(failed.isEmpty());
  try {
    root.commit();
    fail("cyclic group membership must be detected upon commit");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(31,e.getCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AbstractRemoveMembersByIdTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotMember() throws Exception {
  Group gr=null;
  try {
    gr=getUserManager(root).createGroup("testGroup" + UUID.randomUUID().toString());
    Set<String> failed=testGroup.removeMembers(gr.getID());
    assertFalse(failed.isEmpty());
  }
  finally {
    if (gr != null) {
      gr.remove();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTwice() throws Exception {
  Set<String> failed=testGroup.removeMembers(memberGroup.getID(),memberGroup.getID());
  assertTrue(failed.isEmpty());
  assertFalse(testGroup.isDeclaredMember(memberGroup));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSameId() throws Exception {
  Set<String> failed=testGroup.removeMembers(testGroup.getID());
  assertEquals(1,failed.size());
  assertTrue(failed.contains(testGroup.getID()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserMember() throws Exception {
  Set<String> failed=testGroup.removeMembers(getTestUser().getID());
  assertTrue(failed.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupMember() throws Exception {
  Set<String> failed=testGroup.removeMembers(memberGroup.getID());
  assertTrue(failed.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AddMembersByIdBestEffortTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAddByContentID() throws Exception {
  Set<String> failed=testGroup.addMembers(AuthorizableBaseProvider.getContentID(getTestUser().getID()));
  assertTrue(failed.isEmpty());
  assertFalse(testGroup.isMember(getTestUser()));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCyclicWithoutAccess() throws Exception {
  memberGroup.addMember(testGroup);
  root.commit();
  try {
    Set<String> failed=addExistingMemberWithoutAccess();
    fail("CommitFailedException expected");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(31,e.getCode());
  }
 finally {
    root.refresh();
    assertFalse(testGroup.isMember(memberGroup));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNonExistingMember() throws Exception {
  Set<String> failed=addNonExistingMember();
  assertTrue(failed.isEmpty());
  Iterable<String> memberIds=getMemberIds(testGroup);
  Iterables.elementsEqual(ImmutableList.copyOf(NON_EXISTING_IDS),memberIds);
  Iterator<Authorizable> members=testGroup.getDeclaredMembers();
  assertFalse(members.hasNext());
  toRemove=new ArrayList<Authorizable>(NON_EXISTING_IDS.length);
  for (  String id : NON_EXISTING_IDS) {
    toRemove.add(getUserManager(root).createGroup(id));
  }
  members=testGroup.getDeclaredMembers();
  assertTrue(members.hasNext());
  for (  Authorizable a : toRemove) {
    assertTrue(testGroup.isDeclaredMember(a));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testExistingMemberWithoutAccess() throws Exception {
  Set<String> failed=addExistingMemberWithoutAccess();
  assertTrue(failed.isEmpty());
  root.refresh();
  assertTrue(testGroup.isMember(memberGroup));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AddMembersByIdIgnoreTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistingMemberWithoutAccess() throws Exception {
  Set<String> failed=addExistingMemberWithoutAccess();
  assertEquals(ImmutableSet.of(memberGroup.getID()),failed);
  root.refresh();
  assertFalse(testGroup.isMember(memberGroup));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.AuthorizableImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testNotEqualAuthorizables() throws Exception {
  UserManager otherUserManager=getUserConfiguration().getUserManager(root,getNamePathMapper());
  Authorizable user=otherUserManager.getAuthorizable(testUser.getID());
  Authorizable group=otherUserManager.getAuthorizable(testGroup.getID());
  Map<Authorizable,Authorizable> notEqual=new HashMap<Authorizable,Authorizable>();
  notEqual.put(testUser,testGroup);
  notEqual.put(user,group);
  notEqual.put(testUser,user);
  notEqual.put(testGroup,group);
  for (  Map.Entry entry : notEqual.entrySet()) {
    assertFalse(entry.getKey().equals(entry.getValue()));
    assertFalse(entry.getValue().equals(entry.getKey()));
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testHashCode() throws Exception {
  Authorizable user=userMgr.getAuthorizable(testUser.getID());
  Authorizable group=userMgr.getAuthorizable(testGroup.getID());
  Map<Authorizable,Authorizable> sameHashCode=new HashMap<Authorizable,Authorizable>();
  sameHashCode.put(testUser,testUser);
  sameHashCode.put(testGroup,testGroup);
  sameHashCode.put(user,user);
  sameHashCode.put(group,group);
  sameHashCode.put(testUser,user);
  sameHashCode.put(testGroup,group);
  for (  Map.Entry entry : sameHashCode.entrySet()) {
    assertEquals(entry.getKey().hashCode(),entry.getValue().hashCode());
  }
  UserManager otherUserManager=getUserConfiguration().getUserManager(root,getNamePathMapper());
  user=otherUserManager.getAuthorizable(testUser.getID());
  group=otherUserManager.getAuthorizable(testGroup.getID());
  Map<Authorizable,Authorizable> notSameHashCode=new HashMap<Authorizable,Authorizable>();
  notSameHashCode.put(testUser,testGroup);
  notSameHashCode.put(user,group);
  notSameHashCode.put(testUser,user);
  notSameHashCode.put(testGroup,group);
  for (  Map.Entry entry : notSameHashCode.entrySet()) {
    assertFalse(entry.getKey().hashCode() == entry.getValue().hashCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.CacheValidatorProviderTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheBelowProfile() throws Exception {
  try {
    NodeUtil node=new NodeUtil(getAuthorizableTree(getTestUser()));
    NodeUtil child=node.addChild("profile",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    child.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE).setLong(CacheConstants.REP_EXPIRATION,23);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating rep:cache node below a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyCache() throws Exception {
  List<PropertyState> props=new ArrayList();
  props.add(PropertyStates.createProperty(CacheConstants.REP_EXPIRATION,25));
  props.add(PropertyStates.createProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES,EveryonePrincipal.NAME));
  props.add(PropertyStates.createProperty(JcrConstants.JCR_PRIMARYTYPE,JcrConstants.NT_UNSTRUCTURED,Type.NAME));
  props.add(PropertyStates.createProperty("residualProp","anyvalue"));
  Tree cache=getCache(getTestUser());
  for (  PropertyState prop : props) {
    try {
      cache.setProperty(prop);
      root.commit(CacheValidatorProvider.asCommitAttributes());
      fail("Modifying rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheByName() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      node.addChild(CacheConstants.REP_CACHE,JcrConstants.NT_UNSTRUCTURED);
      root.commit();
      fail("Creating rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheWithCommitInfo() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit(CacheValidatorProvider.asCommitAttributes());
      fail("Creating rep:cache node below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryType() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild("childNode",JcrConstants.NT_UNSTRUCTURED);
      root.commit();
      cache.setName(JcrConstants.JCR_PRIMARYTYPE,CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit();
      fail("Changing primary type of residual node below an user/group to rep:Cache must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheBelowPersistedProfile() throws Exception {
  try {
    NodeUtil node=new NodeUtil(getAuthorizableTree(getTestUser()));
    NodeUtil child=node.addChild("profile",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    root.commit();
    child.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE).setLong(CacheConstants.REP_EXPIRATION,23);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating rep:cache node below a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheOutsideOfAuthorizable() throws Exception {
  NodeUtil n=new NodeUtil(root.getTree("/"));
  try {
    NodeUtil child=n.addChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
    child.setLong(CacheConstants.REP_EXPIRATION,1);
    root.commit();
    fail("Using rep:cache/rep:Cache outside a user or group must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
    Tree c=n.getTree().getChild(CacheConstants.REP_CACHE);
    if (c.exists()) {
      c.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedCache() throws Exception {
  NodeUtil cache=new NodeUtil(getCache(getTestUser()));
  try {
    NodeUtil c=cache.getOrAddChild(CacheConstants.REP_CACHE,CacheConstants.NT_REP_CACHE);
    c.setLong(CacheConstants.REP_EXPIRATION,223);
    root.commit(CacheValidatorProvider.asCommitAttributes());
    fail("Creating nested cache must fail.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(34,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateCacheByNodeType() throws RepositoryException {
  for (  Authorizable a : authorizables) {
    try {
      NodeUtil node=new NodeUtil(getAuthorizableTree(a));
      NodeUtil cache=node.addChild("childNode",CacheConstants.NT_REP_CACHE);
      cache.setLong(CacheConstants.REP_EXPIRATION,1);
      root.commit();
      fail("Creating node with nt rep:Cache below a user or group must fail.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(34,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.EveryoneGroupTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEveryoneMemberOf() throws Exception {
  Iterator<Group> groups=everyoneGroup.memberOf();
  assertFalse(groups.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMemberOfIncludesEveryone() throws Exception {
  for (  Authorizable a : authorizables) {
    Set<Group> groups=ImmutableSet.copyOf(a.memberOf());
    assertTrue(groups.contains(everyoneGroup));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetDeclaredMembers() throws Exception {
  Set<Authorizable> members=ImmutableSet.copyOf(everyoneGroup.getDeclaredMembers());
  assertFalse(members.contains(everyoneGroup));
  for (  Authorizable a : authorizables) {
    assertTrue(members.contains(a));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsDeclaredMember() throws Exception {
  for (  Authorizable a : authorizables) {
    assertTrue(everyoneGroup.isDeclaredMember(a));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetMembers() throws Exception {
  Set<Authorizable> members=ImmutableSet.copyOf(everyoneGroup.getMembers());
  assertFalse(members.contains(everyoneGroup));
  for (  Authorizable a : authorizables) {
    assertTrue(members.contains(a));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEveryoneIsMember() throws Exception {
  assertFalse(everyoneGroup.isMember(everyoneGroup));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEveryoneIsDeclaredMember() throws Exception {
  assertFalse(everyoneGroup.isDeclaredMember(everyoneGroup));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEveryoneDeclaredMemberOf() throws Exception {
  Iterator<Group> groups=everyoneGroup.declaredMemberOf();
  assertFalse(groups.hasNext());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAddEveryoneAsMember() throws Exception {
  assertFalse(everyoneGroup.addMember(everyoneGroup));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeclaredMemberOfIncludesEveryone() throws Exception {
  for (  Authorizable a : authorizables) {
    Set<Group> groups=ImmutableSet.copyOf(a.declaredMemberOf());
    assertTrue(groups.contains(everyoneGroup));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsMember() throws Exception {
  for (  Authorizable a : authorizables) {
    assertTrue(everyoneGroup.isMember(a));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAddMember() throws Exception {
  for (  Authorizable a : authorizables) {
    assertFalse(everyoneGroup.addMember(a));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveMember() throws Exception {
  for (  Authorizable a : authorizables) {
    assertFalse(everyoneGroup.removeMember(a));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveEveryoneFromMembers() throws Exception {
  assertFalse(everyoneGroup.removeMember(everyoneGroup));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.IntermediatePathTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAbsolutePathsWithParentElements() throws Exception {
  Authorizable authorizable=createAuthorizable(true,UserConstants.DEFAULT_GROUP_PATH + "/a/../b");
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_GROUP_PATH + "/b"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testUserAbsolutePath() throws Exception {
  Authorizable authorizable=createAuthorizable(false,UserConstants.DEFAULT_USER_PATH + "/a/b/c");
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_USER_PATH + "/a/b/c"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGroupAbsolutePath() throws Exception {
  Authorizable authorizable=createAuthorizable(true,UserConstants.DEFAULT_GROUP_PATH + "/a/b/c");
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_GROUP_PATH + "/a/b/c"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupEmptyPath() throws Exception {
  Authorizable authorizable=createAuthorizable(true,"");
  assertFalse(UserConstants.DEFAULT_GROUP_PATH.equals(PathUtils.getAncestorPath(authorizable.getPath(),1)));
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_GROUP_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserRootPath() throws Exception {
  Authorizable authorizable=createAuthorizable(false,UserConstants.DEFAULT_USER_PATH);
  assertFalse(UserConstants.DEFAULT_USER_PATH.equals(PathUtils.getAncestorPath(authorizable.getPath(),1)));
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_USER_PATH));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRelativePaths() throws Exception {
  new NodeUtil(root.getTree("/")).addChild("testNode",NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  List<String> invalidPaths=ImmutableList.of("..","../..","../../..","../../../testNode","a/b/../../../c");
  for (  String relPath : invalidPaths) {
    try {
      Authorizable authorizable=createAuthorizable(false,relPath);
      root.commit();
      fail("Invalid path " + relPath + " outside of configured scope.");
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isConstraintViolation());
      assertEquals(28,e.getCode());
    }
 finally {
      root.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testUserRelativePath() throws Exception {
  Authorizable authorizable=createAuthorizable(false,"a/b/c");
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_USER_PATH + "/a/b/c"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserEmptyPath() throws Exception {
  Authorizable authorizable=createAuthorizable(false,"");
  assertFalse(UserConstants.DEFAULT_USER_PATH.equals(PathUtils.getAncestorPath(authorizable.getPath(),1)));
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_USER_PATH));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupRootPath() throws Exception {
  Authorizable authorizable=createAuthorizable(true,UserConstants.DEFAULT_GROUP_PATH);
  assertFalse(UserConstants.DEFAULT_GROUP_PATH.equals(PathUtils.getAncestorPath(authorizable.getPath(),1)));
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_GROUP_PATH));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbsolutePathsWithInvalidParentElements() throws Exception {
  try {
    String invalidPath=UserConstants.DEFAULT_GROUP_PATH + "/../a";
    Authorizable authorizable=createAuthorizable(true,invalidPath);
    assertTrue(authorizable.getPath().startsWith(PathUtils.getAncestorPath(UserConstants.DEFAULT_GROUP_PATH,1) + "/a"));
    root.commit();
    fail("Invalid path " + invalidPath + " outside of configured scope.");
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
    assertEquals(28,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGroupRelativePath() throws Exception {
  Authorizable authorizable=createAuthorizable(true,"a/b/c");
  assertTrue(authorizable.getPath().startsWith(UserConstants.DEFAULT_GROUP_PATH + "/a/b/c"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L10_RemovalAndMembershipTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMemberAfterRecreation() throws RepositoryException, CommitFailedException {
  String id=user.getID();
  user.remove();
  root.commit();
  User u=getUserManager(root).createUser(id,ExerciseUtility.TEST_PW);
  root.commit();
  assertFalse(administrators.addMember(u));
  assertTrue(administrators.isDeclaredMember(u));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotMemberAfterRecreation() throws RepositoryException, CommitFailedException {
  String id=user.getID();
  user.remove();
  root.commit();
  User u=getUserManager(root).createUser(id,ExerciseUtility.TEST_PW);
  root.commit();
  assertFalse(administrators.isDeclaredMember(u));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L13_SystemUserTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserNode() throws RepositoryException {
  Tree systemUserTree=root.getTree(systemUser.getPath());
  assertTrue(systemUserTree.exists());
  String expectedPrimaryTypeName=null;
  assertEquals(expectedPrimaryTypeName,TreeUtil.getPrimaryTypeName(systemUserTree));
  String expectedId=null;
  assertEquals(expectedId,TreeUtil.getString(systemUserTree,UserConstants.REP_AUTHORIZABLE_ID));
  String expectedPw=null;
  assertEquals(expectedPw,TreeUtil.getString(systemUserTree,UserConstants.REP_PASSWORD));
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUser() throws RepositoryException {
  UserManager userMgr=getUserManager(root);
  Authorizable authorizable=userMgr.getAuthorizable(systemUser.getID());
  Boolean isGroup=null;
  assertEquals(isGroup.booleanValue(),authorizable.isGroup());
  Boolean isAdmin=null;
  assertEquals(isAdmin.booleanValue(),systemUser.isAdmin());
  Class cls=null;
  Authorizable sUser=userMgr.getAuthorizable(systemUser.getID(),cls);
  Iterator<Group> memberOf=sUser.memberOf();
  Set<Group> expectedGroups=null;
  while (memberOf.hasNext()) {
    assertTrue(expectedGroups.remove(memberOf.next()));
  }
  assertTrue(expectedGroups.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserPrincipal() throws RepositoryException {
  Authorizable authorizable=getUserManager(root).getAuthorizable(systemUser.getID());
  Principal principal=authorizable.getPrincipal();
  PrincipalManager principalManager=getPrincipalManager(root);
  PrincipalIterator pIter=principalManager.getGroupMembership(principal);
  int expectedSize=-1;
  assertEquals(expectedSize,pIter.getSize());
  List<Principal> expectedGroupPrincipals=null;
  while (pIter.hasNext()) {
    Principal group=pIter.nextPrincipal();
    assertTrue(expectedGroupPrincipals.remove(group));
  }
  assertTrue(expectedGroupPrincipals.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L14_AuthorizableNodeNameTest </h4><pre class="type-7 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomAuthorizableNodeName() throws RepositoryException {
  AuthorizableNodeName configured=getUserConfiguration().getParameters().getConfigValue(UserConstants.PARAM_AUTHORIZABLE_NODE_NAME,AuthorizableNodeName.DEFAULT);
  assertNotSame(AuthorizableNodeName.DEFAULT,configured);
  assertTrue(configured instanceof RandomAuthorizableNodeName);
  testUser=userManager.createUser("test/:User",null);
  String nodeName=Text.getName(testUser.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L16_RepositoryWithoutUserManagement </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserManagementDescriptor() throws RepositoryException {
  Oak oak=new Oak().with(new InitialContent()).with(getSecurityProvider());
  ContentRepository contentRepository=oak.createContentRepository();
  assertFalse(contentRepository.getDescriptors().getValue(JackrabbitRepository.OPTION_USER_MANAGEMENT_SUPPORTED).getBoolean());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L4_AuthorizableIdTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIdWithManualCreation() throws RepositoryException, CommitFailedException {
  Tree userTree=root.getTree(testUser.getPath());
  Tree authorizableFolder=userTree.getParent();
  try {
    String id=TreeUtil.getString(userTree,UserConstants.REP_AUTHORIZABLE_ID);
    Tree anotherUser=authorizableFolder.addChild("nodeName");
    anotherUser.setProperty(userTree.getProperty(JcrConstants.JCR_PRIMARYTYPE));
    anotherUser.setProperty(userTree.getProperty(JcrConstants.JCR_UUID));
    anotherUser.setProperty(UserConstants.REP_PRINCIPAL_NAME,TreeUtil.getString(userTree,UserConstants.REP_PRINCIPAL_NAME));
    anotherUser.setProperty(UserConstants.REP_AUTHORIZABLE_ID,id);
    root.commit();
    User another=getUserManager(root).getAuthorizable(id,User.class);
    assertEquals(id,another.getID());
    assertFalse(another.equals(testUser));
  }
  finally {
    root.refresh();
    Tree t=authorizableFolder.getChild("nodeName");
    if (t.exists()) {
      t.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.L8_MembershipTest </h4><pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeclaredMembership() throws RepositoryException, CommitFailedException {
  group.addMember(group2);
  group2.addMember(group3);
  group3.addMember(user);
  root.commit();
  Set<Group> expectedGroups=null;
  Iterator<Group> groups=user.declaredMemberOf();
  while (groups.hasNext()) {
    assertTrue(expectedGroups.remove(groups.next()));
  }
  assertTrue(expectedGroups.isEmpty());
  Set<Authorizable> expectedMembers=null;
  Iterator<Authorizable> memberIterator=group.getDeclaredMembers();
  while (memberIterator.hasNext()) {
    assertTrue(expectedMembers.remove(memberIterator.next()));
  }
  assertTrue(expectedMembers.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddRemoveMembers() throws RepositoryException, CommitFailedException {
  root.commit();
  assertTrue(group.isDeclaredMember(user));
  assertFalse(group2.isDeclaredMember(user));
  assertFalse(group3.isDeclaredMember(user));
  assertTrue(group2.isMember(user));
  assertTrue(group3.isMember(user));
  Boolean isDeclaredMember=null;
  assertEquals(isDeclaredMember,group.isDeclaredMember(group2));
  isDeclaredMember=null;
  assertEquals(isDeclaredMember,group3.isDeclaredMember(group));
  Boolean isMember=null;
  assertEquals(isMember,group.isMember(group2));
  isMember=null;
  assertEquals(isMember,group3.isMember(group));
  root.commit();
  assertFalse(group.isMember(user));
  assertTrue(group.isMember(group2));
  assertTrue(group3.isMember(group2));
  assertTrue(group3.isMember(group));
  assertTrue(group3.isMember(user));
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMembersContentStructure() throws RepositoryException, CommitFailedException {
  int size=new MembershipWriter().getMembershipSizeThreshold() * 5;
  List<String> memberUuids=new ArrayList<String>();
  for (int i=0; i < size; i++) {
    Authorizable user=createNewAuthorizable(false);
    String uuid=TreeUtil.getString(root.getTree(user.getPath()),JcrConstants.JCR_UUID);
    memberUuids.add(uuid);
    group.addMember(user);
  }
  root.commit();
  Tree groupTree=root.getTree(group.getPath());
  Iterator<String> values=groupTree.getProperty(UserConstants.REP_MEMBERS).getValue(Type.STRINGS).iterator();
  while (values.hasNext()) {
    assertTrue(memberUuids.remove(values.next()));
  }
  assertFalse(memberUuids.isEmpty());
  assertTrue(memberUuids.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInheritedMembership() throws RepositoryException, CommitFailedException {
  group.addMember(group2);
  group.addMember(group3);
  group3.addMember(user);
  root.commit();
  Set<Group> groups=null;
  Iterator<Group> groupIterator=user.memberOf();
  while (groupIterator.hasNext()) {
    Group gr=groupIterator.next();
    assertTrue(groups.remove(gr));
  }
  assertTrue(groups.isEmpty());
  Set<Authorizable> expectedMembers=null;
  Iterator<Authorizable> memberIterator=group.getMembers();
  while (memberIterator.hasNext()) {
    assertTrue(expectedMembers.remove(memberIterator.next()));
  }
  assertTrue(expectedMembers.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.MembershipProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMembersAgain() throws Exception {
  Set<String> members=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    members.add(usr.getID());
  }
  root.commit();
  for (  String id : members) {
    assertFalse(grp.addMember(userMgr.getAuthorizable(id)));
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManyMemberships() throws Exception {
  Set<String> memberships=new HashSet<String>();
  User usr=createUser();
  for (int i=0; i < NUM_GROUPS; i++) {
    Group grp=createGroup();
    grp.addMember(usr);
    memberships.add(grp.getID());
  }
  root.commit();
  Iterator<Group> iter=usr.declaredMemberOf();
  while (iter.hasNext()) {
    Group group=iter.next();
    Assert.assertTrue(memberships.remove(group.getID()));
  }
  assertEquals(0,memberships.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddMembersAgainOnMembershipProvider() throws Exception {
  Set<String> memberPaths=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    memberPaths.add(usr.getPath());
  }
  root.commit();
  MembershipProvider mp=userMgr.getMembershipProvider();
  Tree groupTree=root.getTree(grp.getPath());
  for (  String path : memberPaths) {
    Tree memberTree=root.getTree(path);
    assertFalse(mp.addMember(groupTree,memberTree));
    assertFalse(mp.addMember(groupTree,TreeUtil.getString(memberTree,JcrConstants.JCR_UUID)));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManyMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    members.add(usr.getID());
  }
  root.commit();
  checkMembers(grp,members);
  Tree tree=root.getTree(grp.getPath());
  assertEquals("rep:members property must have correct number of references",SIZE_TH,tree.getProperty(UserConstants.REP_MEMBERS).count());
  Tree membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertTrue("rep:memberList must exist",membersList.exists());
  assertEquals("rep:memberList must have correct primary type.",UserConstants.NT_REP_MEMBER_REFERENCES_LIST,membersList.getProperty(JcrConstants.JCR_PRIMARYTYPE).getValue(Type.STRING));
  assertEquals("rep:memberList must have correct number of child nodes.",(NUM_USERS / SIZE_TH) - 1,membersList.getChildrenCount(Long.MAX_VALUE));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  Set<String> declaredMembers=new HashSet<String>();
  Group grp=createGroup();
  for (int i=0; i < 10; i++) {
    Group g1=createGroup();
    grp.addMember(g1);
    members.add(g1.getID());
    declaredMembers.add(g1.getID());
    for (int j=0; j < 10; j++) {
      Group g2=createGroup();
      g1.addMember(g2);
      members.add(g2.getID());
      for (int k=0; k < 10; k++) {
        User usr=createUser();
        g2.addMember(usr);
        members.add(usr.getID());
      }
    }
  }
  root.commit();
  checkMembers(grp,members);
  Iterator<Authorizable> iter=grp.getDeclaredMembers();
  while (iter.hasNext()) {
    Authorizable member=iter.next();
    Assert.assertTrue(declaredMembers.remove(member.getID()));
  }
  assertEquals(0,declaredMembers.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMembers() throws Exception {
  Set<String> members=new HashSet<String>();
  String[] users=new String[NUM_USERS];
  Group grp=createGroup();
  for (int i=0; i < NUM_USERS; i++) {
    User usr=createUser();
    grp.addMember(usr);
    members.add(usr.getID());
    users[i]=usr.getID();
  }
  root.commit();
  for (int i=0; i < SIZE_TH; i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.remove(users[i]);
    grp.removeMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  Tree tree=root.getTree(grp.getPath());
  assertNull("rep:members property not exist",tree.getProperty(UserConstants.REP_MEMBERS));
  for (int i=0; i < SIZE_TH / 2; i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.add(users[i]);
    grp.addMember(auth);
  }
  root.commit();
  assertEquals("rep:members property must have correct number of references",SIZE_TH / 2,tree.getProperty(UserConstants.REP_MEMBERS).count());
  checkMembers(grp,members);
  for (int i=2 * SIZE_TH; i < (3 * SIZE_TH); i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.remove(users[i]);
    grp.removeMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  Tree membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertFalse("the first overflow node must not exist",membersList.getChild("1").exists());
  for (int i=2 * SIZE_TH; i < (3 * SIZE_TH); i++) {
    Authorizable auth=userMgr.getAuthorizable(users[i]);
    members.add(users[i]);
    grp.addMember(auth);
  }
  root.commit();
  checkMembers(grp,members);
  membersList=tree.getChild(UserConstants.REP_MEMBERS_LIST);
  assertTrue("the first overflow node must not exist",membersList.getChild("1").exists());
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedMemberships() throws Exception {
  Set<String> memberships=new HashSet<String>();
  User user=createUser();
  Group grp=createGroup();
  memberships.add(grp.getID());
  for (int i=0; i < 10; i++) {
    Group g1=createGroup();
    grp.addMember(g1);
    memberships.add(g1.getID());
    for (int j=0; j < 10; j++) {
      Group g2=createGroup();
      g1.addMember(g2);
      memberships.add(g2.getID());
      g2.addMember(user);
    }
  }
  root.commit();
  Iterator<Group> iter=user.memberOf();
  while (iter.hasNext()) {
    Group group=iter.next();
    Assert.assertTrue(memberships.remove(group.getID()));
  }
  assertEquals(0,memberships.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordExpiryAndForceInitialChangeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangePasswordReset() throws Exception {
  User user=getTestUser();
  user.changePassword(userId);
  root.commit();
  PropertyState p=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  long newModTime=p.getValue(Type.LONG);
  assertTrue(newModTime > 0);
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  a.authenticate(new SimpleCredentials(userId,userId.toCharArray()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCreateUser() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    assertFalse(root.getTree(user.getPath()).hasChild(UserConstants.REP_PWD));
    assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordExpiryTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangePassword() throws Exception {
  User user=getTestUser();
  PropertyState p1=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  long oldModTime=p1.getValue(Type.LONG,0);
  assertTrue(oldModTime > 0);
  waitForSystemTimeIncrement(oldModTime);
  user.changePassword(userId);
  root.commit();
  PropertyState p2=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  long newModTime=p2.getValue(Type.LONG,0);
  assertTrue(newModTime > oldModTime);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthenticatePasswordExpiredChangePassword() throws Exception {
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  root.getTree(getTestUser().getPath()).getChild(UserConstants.REP_PWD).setProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED,0);
  root.commit();
  getTestUser().changePassword(userId);
  root.commit();
  assertTrue(a.authenticate(new SimpleCredentials(userId,userId.toCharArray())));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    Tree pwdTree=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD);
    assertTrue(pwdTree.exists());
    assertTrue(TreeUtil.isNodeType(pwdTree,UserConstants.NT_REP_PASSWORD,root.getTree(NodeTypeConstants.NODE_TYPES_PATH)));
    ReadOnlyNodeTypeManager ntMgr=ReadOnlyNodeTypeManager.getInstance(root,getNamePathMapper());
    assertTrue(ntMgr.getDefinition(pwdTree.getParent(),pwdTree).isProtected());
    PropertyState property=pwdTree.getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
    assertNotNull(property);
    assertEquals(Type.LONG,property.getType());
    assertTrue(property.getValue(Type.LONG,0) > 0);
    assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordForceInitialPasswordChangeTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCreateUser() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    assertFalse(root.getTree(user.getPath()).hasChild(UserConstants.REP_PWD));
    assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePassword() throws Exception {
  User user=getTestUser();
  PropertyState p1=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  assertNull(p1);
  user.changePassword(userId);
  root.commit();
  PropertyState p2=root.getTree(user.getPath()).getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED);
  assertNotNull(p2);
  assertTrue(p2.getValue(Type.LONG) > 0);
  Authentication a=new UserAuthentication(getUserConfiguration(),root,userId);
  a.authenticate(new SimpleCredentials(userId,userId.toCharArray()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.PasswordHistoryTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHistoryOrder() throws Exception {
  User user=getTestUser();
  for (  String pw : PASSWORDS) {
    user.changePassword(pw);
  }
  int i=1;
  for (  String pwHash : getHistory(user)) {
    assertTrue(PasswordUtil.isSame(pwHash,PASSWORDS[i++]));
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEnabledPasswordHistory() throws Exception {
  PasswordHistory history=new PasswordHistory(CONFIG);
  assertTrue(isEnabled(history));
  assertEquals(10,getMaxSize(history).longValue());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNoPwdTreeOnUserCreation() throws Exception {
  User user=getTestUser();
  assertFalse(root.getTree(user.getPath()).hasChild(REP_PWD));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHistoryEmptyOnUserCreationWithPassword() throws Exception {
  User user=getTestUser();
  assertFalse(root.getTree(user.getPath()).hasChild(REP_PWD));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHistoryUpperLimit() throws Exception {
  PasswordHistory history=new PasswordHistory(ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,Integer.MAX_VALUE));
  assertTrue(isEnabled(history));
  assertEquals(1000,getMaxSize(history).longValue());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSingleTypeHistoryProperty() throws Exception {
  Tree userTree=root.getTree(getTestUser().getPath());
  Tree pwdNode=new NodeUtil(userTree).getOrAddChild(REP_PWD,NT_REP_PASSWORD).getTree();
  pwdNode.setProperty(REP_PWD_HISTORY,"singleValuedProperty");
  assertFalse(pwdNode.getProperty(REP_PWD_HISTORY).isArray());
  assertFalse(pwdNode.getProperty(REP_PWD_HISTORY).getType().isArray());
  PasswordHistory history=new PasswordHistory(CONFIG);
  assertTrue(history.updatePasswordHistory(userTree,"anyOtherPassword"));
  assertTrue(pwdNode.getProperty(REP_PWD_HISTORY).isArray());
  assertTrue(pwdNode.getProperty(REP_PWD_HISTORY).getType().isArray());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ConstraintViolationException.class) public void testCheckPasswordHistory() throws Exception {
  Tree userTree=root.getTree(getTestUser().getPath());
  PasswordHistory history=new PasswordHistory(CONFIG);
  assertTrue(isEnabled(history));
  assertEquals(10,getMaxSize(history).longValue());
  history.updatePasswordHistory(userTree,getTestUser().getID());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDisabledPasswordHistory() throws Exception {
  User user=getTestUser();
  Tree userTree=root.getTree(user.getPath());
  List<ConfigurationParameters> configs=ImmutableList.of(ConfigurationParameters.EMPTY,ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,PASSWORD_HISTORY_DISABLED_SIZE),ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,-1),ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,Integer.MIN_VALUE));
  for (  ConfigurationParameters config : configs) {
    PasswordHistory disabledHistory=new PasswordHistory(config);
    assertFalse(isEnabled(disabledHistory));
    assertFalse(disabledHistory.updatePasswordHistory(userTree,user.getID()));
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoHistoryUpdateOnViolation() throws Exception {
  User user=getTestUser();
  try {
    user.changePassword("abc");
    user.changePassword("def");
    user.changePassword("abc");
    fail("history violation not detected");
  }
 catch (  ConstraintViolationException e) {
    String[] expected=new String[]{user.getID(),"abc"};
    int i=0;
    for (    String pwHash : getHistory(user)) {
      assertTrue(PasswordUtil.isSame(pwHash,expected[i++]));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigurationChange() throws Exception {
  User user=getTestUser();
  Tree userTree=root.getTree(user.getPath());
  PasswordHistory history=new PasswordHistory(CONFIG);
  for (  String pw : PASSWORDS) {
    assertTrue(history.updatePasswordHistory(userTree,pw));
  }
  assertEquals(10,getHistory(user).size());
  history=new PasswordHistory(ConfigurationParameters.of(PARAM_PASSWORD_HISTORY_SIZE,5));
  List<String> oldPwds=getHistory(user);
  assertEquals(10,oldPwds.size());
  Iterables.skip(oldPwds,6);
  history.updatePasswordHistory(userTree,oldPwds.iterator().next());
  assertEquals(5,getHistory(user).size());
  history=new PasswordHistory(CONFIG);
  history.updatePasswordHistory(userTree,"newPwd");
  assertEquals(6,getHistory(user).size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHistoryWithSinglePasswordChange() throws Exception {
  User user=getTestUser();
  String oldPassword=TreeUtil.getString(root.getTree(user.getPath()),REP_PASSWORD);
  user.changePassword("newPwd");
  root.commit();
  assertTrue(root.getTree(user.getPath()).hasChild(REP_PWD));
  Tree pwTree=root.getTree(user.getPath()).getChild(REP_PWD);
  assertTrue(pwTree.hasProperty(REP_PWD_HISTORY));
  List<String> history=getHistory(user);
  assertEquals(1,history.size());
  assertEquals(oldPassword,history.iterator().next());
  String currentPw=TreeUtil.getString(root.getTree(user.getPath()),REP_PASSWORD);
  assertNotSame(currentPw,oldPassword);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEnableDisable() throws Exception {
  User user=getTestUser();
  Tree userTree=root.getTree(user.getPath());
  PasswordHistory history=new PasswordHistory(CONFIG);
  for (  String pw : PASSWORDS) {
    assertTrue(history.updatePasswordHistory(userTree,pw));
  }
  assertEquals(10,getHistory(user).size());
  history=new PasswordHistory(ConfigurationParameters.EMPTY);
  history.updatePasswordHistory(userTree,PASSWORDS[8]);
  assertEquals(10,getHistory(user).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RandomAuthorizableNodeNameTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGenerateNodeName(){
  String nodeName=nameGenerator.generateNodeName(id);
  assertFalse("id".equals(nodeName));
  assertEquals(RandomAuthorizableNodeName.DEFAULT_LENGTH,nodeName.length());
  assertFalse(nodeName.equals(nameGenerator.generateNodeName(id)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RemoveMembersByIdBestEffortTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNonExistingMemberAfterAdd() throws Exception {
  Set<String> failed=testGroup.addMembers(NON_EXISTING_IDS);
  assertTrue(failed.isEmpty());
  failed=removeNonExistingMember();
  assertTrue(failed.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMissingAccessMember() throws Exception {
  Set<String> failed=removeExistingMemberWithoutAccess();
  assertTrue(failed.isEmpty());
  root.refresh();
  assertFalse(testGroup.isMember(memberGroup));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.RemoveMembersByIdIgnoreTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingAccessMember() throws Exception {
  Set<String> failed=removeExistingMemberWithoutAccess();
  assertEquals(ImmutableSet.of(memberGroup.getID()),failed);
  root.refresh();
  assertTrue(testGroup.isMember(memberGroup));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.ResetExpiredPasswordTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeWithNonStringAttribute() throws Exception {
  try {
    authenticate(userId,new Long(1));
    fail("Authentication with non-string attribute should fail.");
  }
 catch (  CredentialExpiredException e) {
  }
 finally {
    Tree userTree=root.getTree(getTestUser().getPath());
    assertTrue(PasswordUtil.isSame(userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING),userId));
    assertEquals(0,userTree.getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getValue(Type.LONG).longValue());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeWithWrongPw() throws Exception {
  try {
    authenticate("wrongPw","newPw");
    fail("Authentication with wrong expired password should fail and should not reset pw.");
  }
 catch (  LoginException e) {
  }
 finally {
    Tree userTree=root.getTree(getTestUser().getPath());
    assertTrue(PasswordUtil.isSame(userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING),userId));
    assertEquals(0,userTree.getChild(UserConstants.REP_PWD).getProperty(UserConstants.REP_PASSWORD_LAST_MODIFIED).getValue(Type.LONG).longValue());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPasswordChangePersisted() throws Exception {
  authenticate(userId,"newPw");
  Root rootBasedOnSeparateSession=login(getAdminCredentials()).getLatestRoot();
  Tree userTree=rootBasedOnSeparateSession.getTree(getTestUser().getPath());
  assertTrue(PasswordUtil.isSame(userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING),"newPw"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.SystemUserImplTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testCreateUserWithAbsolutePath3() throws Exception {
  String userRoot=UserConstants.DEFAULT_USER_PATH + '/' + UserConstants.DEFAULT_SYSTEM_RELATIVE_PATH;
  String path=userRoot + "/any/path/to/the/new/user";
  user=createUser(path);
  assertTrue(user.getPath().startsWith(path));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasNoPassword() throws Exception {
  user=createUser(null);
  Tree userTree=root.getTree(user.getPath());
  assertFalse(userTree.hasProperty(UserConstants.REP_PASSWORD));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentials() throws Exception {
  user=createUser(null);
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof UserIdCredentials);
  UserIdCredentials impl=(UserIdCredentials)creds;
  assertEquals(uid,impl.getUserId());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCreateSystemUser() throws Exception {
  user=createUser(null);
  assertTrue(user instanceof SystemUserImpl);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrincipal() throws Exception {
  user=createUser(null);
  assertTrue(user.getPrincipal() instanceof SystemUserPrincipal);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserTree() throws Exception {
  user=createUser(null);
  Tree t=root.getTree(user.getPath());
  assertFalse(t.hasProperty(UserConstants.REP_PASSWORD));
  assertEquals(UserConstants.NT_REP_SYSTEM_USER,TreeUtil.getPrimaryTypeName(t));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithRelativePath2() throws Exception {
  user=createUser(UserConstants.DEFAULT_SYSTEM_RELATIVE_PATH + "/any/path");
  assertNotNull(user.getID());
  assertTrue(user.getPath().contains("any/path"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddToGroup() throws Exception {
  user=createUser(null);
  Group g=null;
  try {
    g=userMgr.createGroup("testGroup");
    g.addMember(user);
    root.commit();
    assertTrue(g.isMember(user));
    assertTrue(g.isDeclaredMember(user));
    boolean isMemberOfG=false;
    Iterator<Group> groups=user.declaredMemberOf();
    while (groups.hasNext() && !isMemberOfG) {
      if (g.getID().equals(groups.next().getID())) {
        isMemberOfG=true;
      }
    }
    assertTrue(isMemberOfG);
  }
  finally {
    if (g != null) {
      g.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateSystemUserWithOtherPath() throws Exception {
  String path=null;
  try {
    Tree t=root.getTree(UserConstants.DEFAULT_USER_PATH);
    NodeUtil systemUserTree=new NodeUtil(t).addChild("systemUser",UserConstants.NT_REP_SYSTEM_USER);
    systemUserTree.setString(UserConstants.REP_PRINCIPAL_NAME,"systemUser");
    systemUserTree.setString(UserConstants.REP_AUTHORIZABLE_ID,"systemUser");
    path=systemUserTree.getTree().getPath();
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isConstraintViolation());
  }
 finally {
    root.refresh();
    if (path != null) {
      Tree t=root.getTree(path);
      if (t.exists()) {
        t.remove();
        root.commit();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test asserting that {@link AuthorizableAction#onCreate(User,String,Root,NamePathMapper)}is omitted upon calling {@link UserManager#createSystemUser(String,String)}.
 */
@Test public void testOnCreateOmitted() throws Exception {
  user=createUser(null);
  Tree t=root.getTree(user.getPath());
  assertFalse(t.hasChild(AccessControlConstants.REP_POLICY));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserAuthenticationFactoryImplTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthentication() throws Exception {
  Authentication authentication=factory.getAuthentication(getUserConfiguration(),root,userId);
  assertNotNull(authentication);
  assertTrue(authentication instanceof UserAuthentication);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserAuthenticationTest </h4><pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateIdMismatch() throws Exception {
  try {
    authentication.authenticate(new SimpleCredentials("unknownUser","pw".toCharArray()));
    fail("LoginException expected");
  }
 catch (  LoginException e) {
    assertTrue(e instanceof FailedLoginException);
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthenticateWithoutUserId() throws Exception {
  authentication=new UserAuthentication(getUserConfiguration(),root,null);
  assertFalse(authentication.authenticate(new SimpleCredentials(userId,userId.toCharArray())));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateResolvesToGroup() throws Exception {
  Group g=getUserManager(root).createGroup("g1");
  SimpleCredentials sc=new SimpleCredentials(g.getID(),"pw".toCharArray());
  Authentication a=new UserAuthentication(getUserConfiguration(),root,sc.getUserID());
  try {
    a.authenticate(sc);
    fail("Authenticating Group should fail");
  }
 catch (  LoginException e) {
    assertTrue(e instanceof AccountNotFoundException);
  }
 finally {
    if (g != null) {
      g.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthenticateInvalidCredentials() throws Exception {
  List<Credentials> invalid=new ArrayList<Credentials>();
  invalid.add(new TokenCredentials("token"));
  invalid.add(new Credentials(){
  }
);
  for (  Credentials creds : invalid) {
    assertFalse(authentication.authenticate(creds));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthenticateImpersonationCredentials2() throws Exception {
  SimpleCredentials sc=new SimpleCredentials(userId,new char[0]);
  assertTrue(authentication.authenticate(new ImpersonationCredentials(sc,new TestAuthInfo())));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateInvalidImpersonationCredentials() throws Exception {
  List<Credentials> invalid=new ArrayList<Credentials>();
  invalid.add(new ImpersonationCredentials(new GuestCredentials(),adminSession.getAuthInfo()));
  invalid.add(new ImpersonationCredentials(new SimpleCredentials(adminSession.getAuthInfo().getUserID(),new char[0]),new TestAuthInfo()));
  invalid.add(new ImpersonationCredentials(new SimpleCredentials("unknown",new char[0]),adminSession.getAuthInfo()));
  invalid.add(new ImpersonationCredentials(new SimpleCredentials("unknown",new char[0]),new TestAuthInfo()));
  for (  Credentials creds : invalid) {
    try {
      authentication.authenticate(creds);
      fail("LoginException expected");
    }
 catch (    LoginException e) {
      assertTrue(e instanceof FailedLoginException);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthenticateSimpleCredentials() throws Exception {
  assertTrue(authentication.authenticate(new SimpleCredentials(userId,userId.toCharArray())));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateInvalidSimpleCredentials() throws Exception {
  List<Credentials> invalid=new ArrayList<Credentials>();
  invalid.add(new SimpleCredentials(userId,"wrongPw".toCharArray()));
  invalid.add(new SimpleCredentials(userId,"".toCharArray()));
  invalid.add(new SimpleCredentials("unknownUser","pw".toCharArray()));
  for (  Credentials creds : invalid) {
    try {
      authentication.authenticate(creds);
      fail("LoginException expected");
    }
 catch (    LoginException e) {
      assertTrue(e instanceof FailedLoginException);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAuthenticateCannotResolveUser() throws Exception {
  SimpleCredentials sc=new SimpleCredentials("unknownUser","pw".toCharArray());
  Authentication a=new UserAuthentication(getUserConfiguration(),root,sc.getUserID());
  assertFalse(a.authenticate(sc));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAuthenticateResolvesToDisabledUser() throws Exception {
  User testUser=getTestUser();
  SimpleCredentials sc=new SimpleCredentials(testUser.getID(),testUser.getID().toCharArray());
  Authentication a=new UserAuthentication(getUserConfiguration(),root,sc.getUserID());
  try {
    getTestUser().disable("disabled");
    root.commit();
    a.authenticate(sc);
    fail("Authenticating disabled user should fail");
  }
 catch (  LoginException e) {
    assertTrue(e instanceof AccountLockedException);
  }
 finally {
    getTestUser().disable(null);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthenticateImpersonationCredentials() throws Exception {
  SimpleCredentials sc=new SimpleCredentials(userId,new char[0]);
  assertTrue(authentication.authenticate(new ImpersonationCredentials(sc,adminSession.getAuthInfo())));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserConfigurationImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidators(){
  UserConfigurationImpl configuration=new UserConfigurationImpl(getSecurityProvider());
  List<? extends ValidatorProvider> validators=configuration.getValidators(adminSession.getWorkspaceName(),Collections.<Principal>emptySet(),new MoveTracker());
  assertEquals(2,validators.size());
  List<String> clNames=Lists.newArrayList(UserValidatorProvider.class.getName(),CacheValidatorProvider.class.getName());
  for (  ValidatorProvider vp : validators) {
    clNames.remove(vp.getClass().getName());
  }
  assertTrue(clNames.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserImplTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentialsUserWithoutPassword() throws Exception {
  user=userMgr.createUser(uid,null);
  root.commit();
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof UserIdCredentials);
  assertEquals(uid,((UserIdCredentials)creds).getUserId());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentials() throws Exception {
  user=userMgr.createUser(uid,uid);
  root.commit();
  Credentials creds=user.getCredentials();
  assertTrue(creds instanceof CredentialsImpl);
  CredentialsImpl cImpl=(CredentialsImpl)creds;
  assertEquals(uid,cImpl.getUserId());
  assertTrue(PasswordUtil.isSame(cImpl.getPasswordHash(),uid));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserInitializerTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnonymous() throws Exception {
  Authorizable a=userMgr.getAuthorizable(UserUtil.getAnonymousId(config));
  assertFalse(a.isGroup());
  User anonymous=(User)a;
  assertFalse(anonymous.isAdmin());
  assertFalse(anonymous.getPrincipal() instanceof AdminPrincipal);
  assertTrue(anonymous.getPrincipal() instanceof TreeBasedPrincipal);
  assertEquals(anonymous.getID(),anonymous.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserIndexDefinitions() throws Exception {
  Tree oakIndex=root.getTree('/' + IndexConstants.INDEX_DEFINITIONS_NAME);
  assertTrue(oakIndex.exists());
  Tree id=oakIndex.getChild("authorizableId");
  assertIndexDefinition(id,UserConstants.REP_AUTHORIZABLE_ID,true);
  Tree princName=oakIndex.getChild("principalName");
  assertIndexDefinition(princName,UserConstants.REP_PRINCIPAL_NAME,true);
  Iterable<String> declaringNtNames=TreeUtil.getStrings(princName,IndexConstants.DECLARING_NODE_TYPES);
  assertArrayEquals(new String[]{UserConstants.NT_REP_AUTHORIZABLE},Iterables.toArray(declaringNtNames,String.class));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdminUser() throws Exception {
  Authorizable a=userMgr.getAuthorizable(UserUtil.getAdminId(config));
  assertFalse(a.isGroup());
  User admin=(User)a;
  assertTrue(admin.isAdmin());
  assertTrue(admin.getPrincipal() instanceof AdminPrincipal);
  assertTrue(admin.getPrincipal() instanceof TreeBasedPrincipal);
  assertEquals(admin.getID(),admin.getPrincipal().getName());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserContent() throws Exception {
  Authorizable a=userMgr.getAuthorizable(UserUtil.getAdminId(config));
  assertTrue(root.getTree(a.getPath()).exists());
  a=userMgr.getAuthorizable(UserUtil.getAnonymousId(config));
  assertTrue(root.getTree(a.getPath()).exists());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0 The configuration defines if the password of the
 * admin user is being set.
 */
@Test public void testAdminConfiguration() throws Exception {
  Map<String,Object> userParams=new HashMap();
  userParams.put(UserConstants.PARAM_ADMIN_ID,"admin");
  userParams.put(UserConstants.PARAM_OMIT_ADMIN_PW,true);
  ConfigurationParameters params=ConfigurationParameters.of(UserConfiguration.NAME,ConfigurationParameters.of(userParams));
  SecurityProvider sp=new SecurityProviderImpl(params);
  final ContentRepository repo=new Oak().with(new InitialContent()).with(new PropertyIndexEditorProvider()).with(new PropertyIndexProvider()).with(new TypeEditorProvider()).with(sp).createContentRepository();
  ContentSession cs=Subject.doAs(SystemSubject.INSTANCE,new PrivilegedExceptionAction<ContentSession>(){
    @Override public ContentSession run() throws Exception {
      return repo.login(null,null);
    }
  }
);
  try {
    Root root=cs.getLatestRoot();
    UserConfiguration uc=sp.getConfiguration(UserConfiguration.class);
    UserManager umgr=uc.getUserManager(root,NamePathMapper.DEFAULT);
    Authorizable adminUser=umgr.getAuthorizable("admin");
    assertNotNull(adminUser);
    Tree adminTree=root.getTree(adminUser.getPath());
    assertTrue(adminTree.exists());
    assertNull(adminTree.getProperty(UserConstants.REP_PASSWORD));
  }
  finally {
    cs.close();
  }
  ContentSession adminSession=null;
  try {
    adminSession=repo.login(new SimpleCredentials("admin",new char[0]),null);
    fail();
  }
 catch (  LoginException e) {
  }
 finally {
    if (adminSession != null) {
      adminSession.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserManagerImplTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test related to OAK-1922: Asserting that the default behavior is such that
 * no rep:pwd node is created upon user-creation.
 * @since Oak 1.1
 */
@Test public void testNewUserHasNoPwdNode() throws Exception {
  String newUserId="newuser" + UUID.randomUUID();
  User user=null;
  try {
    user=getUserManager(root).createUser(newUserId,newUserId);
    root.commit();
    Assert.assertFalse(root.getTree(user.getPath()).hasChild(UserConstants.REP_PWD));
    Assert.assertFalse(user.hasProperty(UserConstants.REP_PWD + "/" + UserConstants.REP_PASSWORD_LAST_MODIFIED));
  }
  finally {
    if (user != null) {
      user.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFindWithNullValue() throws RepositoryException {
  Iterator<Authorizable> result=userMgr.findAuthorizables(UserConstants.REP_PRINCIPAL_NAME,null);
  assertTrue(result.hasNext());
  result=userMgr.findAuthorizables("./" + UserConstants.REP_PRINCIPAL_NAME,null);
  assertTrue(result.hasNext());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPassword() throws Exception {
  User user=userMgr.createUser(testUserId,"pw");
  root.commit();
  List<String> pwds=new ArrayList<String>();
  pwds.add("pw");
  pwds.add("");
  pwds.add("{sha1}pw");
  Tree userTree=root.getTree(user.getPath());
  for (  String pw : pwds) {
    userMgr.setPassword(userTree,testUserId,pw,true);
    String pwHash=userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING);
    assertNotNull(pwHash);
    assertTrue(PasswordUtil.isSame(pwHash,pw));
  }
  for (  String pw : pwds) {
    userMgr.setPassword(userTree,testUserId,pw,false);
    String pwHash=userTree.getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING);
    assertNotNull(pwHash);
    if (!pw.startsWith("{")) {
      assertTrue(PasswordUtil.isSame(pwHash,pw));
    }
 else {
      assertFalse(PasswordUtil.isSame(pwHash,pw));
      assertEquals(pw,pwHash);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsAutoSave() throws Exception {
  assertFalse(userMgr.isAutoSave());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserPrincipalProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreeBasedUserPrincipal() throws Exception {
  User user=getTestUser();
  Principal principal=principalProvider.getPrincipal(user.getPrincipal().getName());
  assertTrue(principal instanceof TreeBasedPrincipal);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreeBasedGroupPrincipal() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(group.getPrincipal().getName());
    assertTrue(principal instanceof AbstractGroupPrincipal);
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEveryoneMembers() throws Exception {
  Principal everyone=principalProvider.getPrincipal(EveryonePrincipal.NAME);
  assertTrue(everyone instanceof EveryonePrincipal);
  Group everyoneGroup=null;
  try {
    UserManager userMgr=getUserManager(root);
    everyoneGroup=userMgr.createGroup(EveryonePrincipal.NAME);
    root.commit();
    Principal ep=principalProvider.getPrincipal(EveryonePrincipal.NAME);
    assertTrue(ep instanceof java.security.acl.Group);
    ((java.security.acl.Group)ep).members();
    ((java.security.acl.Group)ep).isMember(getTestUser().getPrincipal());
  }
  finally {
    if (everyoneGroup != null) {
      everyoneGroup.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreeBasedSystemUserPrincipal() throws Exception {
  User systemUser=getUserManager(root).createSystemUser("systemUser" + UUID.randomUUID(),null);
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(systemUser.getPrincipal().getName());
    assertTrue(principal instanceof SystemUserPrincipalImpl);
  }
  finally {
    systemUser.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupMembers() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  group.addMember(getTestUser());
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(group.getPrincipal().getName());
    assertTrue(principal instanceof java.security.acl.Group);
    boolean found=false;
    Enumeration<? extends Principal> members=((java.security.acl.Group)principal).members();
    while (members.hasMoreElements() && !found) {
      found=members.nextElement().equals(getTestUser().getPrincipal());
    }
    assertTrue(found);
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrincipalsForSystemUser() throws Exception {
  User systemUser=getUserManager(root).createSystemUser("systemUser" + UUID.randomUUID(),null);
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  group.addMember(systemUser);
  root.commit();
  try {
    Set<? extends Principal> principals=principalProvider.getPrincipals(systemUser.getID());
    for (    Principal p : principals) {
      String name=p.getName();
      if (name.equals(systemUser.getPrincipal().getName())) {
        assertTrue(p instanceof SystemUserPrincipalImpl);
      }
 else       if (!EveryonePrincipal.NAME.equals(name)) {
        assertTrue(p instanceof AbstractGroupPrincipal);
      }
    }
  }
  finally {
    systemUser.remove();
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupIsMember() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  group.addMember(getTestUser());
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(group.getPrincipal().getName());
    assertTrue(principal instanceof java.security.acl.Group);
    ((java.security.acl.Group)principal).isMember(getTestUser().getPrincipal());
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrincipalsForUser() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  group.addMember(getTestUser());
  root.commit();
  try {
    Set<? extends Principal> principals=principalProvider.getPrincipals(getTestUser().getID());
    for (    Principal p : principals) {
      String name=p.getName();
      if (name.equals(getTestUser().getPrincipal().getName())) {
        assertTrue(p instanceof TreeBasedPrincipal);
      }
 else       if (!EveryonePrincipal.NAME.equals(name)) {
        assertTrue(p instanceof AbstractGroupPrincipal);
      }
    }
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrincipalsForAdminUser() throws Exception {
  Authorizable adminUser=getUserManager(root).getAuthorizable(adminSession.getAuthInfo().getUserID());
  if (adminUser != null && adminUser.getPrincipal() instanceof AdminPrincipal) {
    Set<? extends Principal> principals=principalProvider.getPrincipals(adminUser.getID());
    for (    Principal p : principals) {
      String name=p.getName();
      if (name.equals(adminUser.getPrincipal().getName())) {
        assertTrue(p instanceof AdminPrincipalImpl);
      }
 else       if (!EveryonePrincipal.NAME.equals(name)) {
        assertTrue(p instanceof AbstractGroupPrincipal);
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserPrincipalProviderWithCacheTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLongOverflow() throws Exception {
  long[] maxCache=new long[]{Long.MAX_VALUE,Long.MAX_VALUE - 1,Long.MAX_VALUE - 10000};
  Root systemRoot=getSystemSession().getLatestRoot();
  for (  long exp : maxCache) {
    changeUserConfiguration(ConfigurationParameters.of(UserPrincipalProvider.PARAM_CACHE_EXPIRATION,exp));
    PrincipalProvider pp=createPrincipalProvider(systemRoot);
    pp.getPrincipals(userId);
    Tree userTree=systemRoot.getTree(getTestUser().getPath());
    Tree cache=userTree.getChild(CacheConstants.REP_CACHE);
    assertTrue(cache.exists());
    PropertyState propertyState=cache.getProperty(CacheConstants.REP_EXPIRATION);
    assertNotNull(propertyState);
    assertEquals(Long.MAX_VALUE,propertyState.getValue(Type.LONG).longValue());
    cache.remove();
    systemRoot.commit();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMembershipChange() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  UserManager uMgr=getUserManager(root);
  Group gr=uMgr.getAuthorizable(groupId,Group.class);
  assertTrue(gr.removeMember(uMgr.getAuthorizable(userId)));
  root.commit();
  systemRoot.refresh();
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertEquals(principals,principalsAgain);
  changeUserConfiguration(ConfigurationParameters.EMPTY);
  pp=createPrincipalProvider(systemRoot);
  assertPrincipals(pp.getPrincipals(userId),EveryonePrincipal.getInstance(),getTestUser().getPrincipal());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrincipalsForGroups() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(testGroup.getID());
  assertTrue(principals.isEmpty());
  principals=pp.getPrincipals(testGroup2.getID());
  assertTrue(principals.isEmpty());
  root.refresh();
  Tree principalCache=getCacheTree(root,testGroup.getPath());
  assertFalse(principalCache.exists());
  principalCache=getCacheTree(root,testGroup2.getPath());
  assertFalse(principalCache.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetGroupMembershipForGroups() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getGroupMembership(testGroup.getPrincipal());
  assertPrincipals(principals,EveryonePrincipal.getInstance());
  principals=pp.getGroupMembership(testGroup2.getPrincipal());
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root,testGroup.getPath());
  assertFalse(principalCache.exists());
  principalCache=getCacheTree(root,testGroup2.getPath());
  assertFalse(principalCache.exists());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetGroupMembershipPopulatesCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getGroupMembership(getTestUser().getPrincipal());
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupPrincipals() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Iterable<? extends Principal> principals=Iterables.filter(pp.getPrincipals(userId),new GroupPredicate());
  for (  Principal p : principals) {
    String className=p.getClass().getName();
    assertEquals("org.apache.jackrabbit.oak.security.user.UserPrincipalProvider$GroupPrincipal",className);
  }
  Principal testPrincipal=getTestUser().getPrincipal();
  Iterable<? extends Principal> principalsAgain=Iterables.filter(pp.getPrincipals(userId),new GroupPredicate());
  for (  Principal p : principalsAgain) {
    String className=p.getClass().getName();
    assertEquals("org.apache.jackrabbit.oak.security.user.UserPrincipalProvider$CachedGroupPrincipal",className);
    assertTrue(p instanceof TreeBasedPrincipal);
    assertEquals(testGroup.getPath(),((TreeBasedPrincipal)p).getPath());
    java.security.acl.Group principalGroup=(java.security.acl.Group)p;
    assertTrue(principalGroup.isMember(testPrincipal));
    Enumeration<? extends Principal> members=principalGroup.members();
    assertTrue(members.hasMoreElements());
    assertEquals(testPrincipal,members.nextElement());
    assertEquals(testGroup2.getPrincipal(),members.nextElement());
    assertFalse(members.hasMoreElements());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrincipalManagerGetGroupMembershipPopulatesCache() throws Exception {
  PrincipalManager principalManager=getPrincipalManager(systemRoot);
  PrincipalIterator principalIterator=principalManager.getGroupMembership(getTestUser().getPrincipal());
  assertPrincipals(ImmutableSet.copyOf(principalIterator),EveryonePrincipal.getInstance(),testGroup.getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupPrincipalNameEscape() throws Exception {
  String gId=null;
  try {
    Principal groupPrincipal=new PrincipalImpl(groupId + ",,%,%%");
    Group gr=getUserManager(root).createGroup(groupPrincipal);
    gId=gr.getID();
    gr.addMember(getTestUser());
    root.commit();
    systemRoot.refresh();
    PrincipalProvider pp=createPrincipalProvider(systemRoot);
    Set<? extends Principal> principals=pp.getPrincipals(userId);
    assertTrue(principals.contains(groupPrincipal));
    principals=pp.getPrincipals(userId);
    assertTrue(principals.contains(groupPrincipal));
  }
  finally {
    root.refresh();
    if (gId != null) {
      getUserManager(root).getAuthorizable(gId).remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMissingExpiration() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertTrue(getCacheTree(systemRoot).exists());
  Tree cache=getCacheTree(systemRoot);
  cache.removeProperty(CacheConstants.REP_EXPIRATION);
  systemRoot.commit(CacheValidatorProvider.asCommitAttributes());
  assertFalse(getCacheTree(systemRoot).hasProperty(CacheConstants.REP_EXPIRATION));
  pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertTrue(principals.equals(principalsAgain));
  cache=getCacheTree(systemRoot);
  assertTrue(cache.hasProperty(CacheConstants.REP_EXPIRATION));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testInvalidExpiry() throws Exception {
  long[] noCache=new long[]{0,-1,Long.MIN_VALUE};
  for (  long exp : noCache) {
    changeUserConfiguration(ConfigurationParameters.of(UserPrincipalProvider.PARAM_CACHE_EXPIRATION,exp));
    PrincipalProvider pp=createPrincipalProvider(systemRoot);
    pp.getPrincipals(userId);
    root.refresh();
    Tree userTree=root.getTree(getTestUser().getPath());
    assertFalse(userTree.hasChild(CacheConstants.REP_CACHE));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipalsPopulatesCache() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
  root.refresh();
  Tree principalCache=getCacheTree(root);
  assertTrue(principalCache.exists());
  assertEquals(CacheConstants.NT_REP_CACHE,TreeUtil.getPrimaryTypeName(principalCache));
  assertNotNull(principalCache.getProperty(CacheConstants.REP_EXPIRATION));
  PropertyState ps=principalCache.getProperty(CacheConstants.REP_GROUP_PRINCIPAL_NAMES);
  assertNotNull(ps);
  String val=ps.getValue(Type.STRING);
  assertEquals(testGroup.getPrincipal().getName(),val);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCacheUpdate() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principals=pp.getPrincipals(userId);
  assertTrue(getCacheTree(systemRoot).exists());
  UserManager uMgr=getUserConfiguration().getUserManager(systemRoot,namePathMapper);
  Group gr=uMgr.getAuthorizable(groupId,Group.class);
  assertTrue(gr.removeMember(uMgr.getAuthorizable(userId)));
  systemRoot.commit();
  Tree cache=getCacheTree(systemRoot);
  cache.setProperty(CacheConstants.REP_EXPIRATION,2);
  systemRoot.commit(CacheValidatorProvider.asCommitAttributes());
  pp=createPrincipalProvider(systemRoot);
  Set<? extends Principal> principalsAgain=pp.getPrincipals(userId);
  assertFalse(principals.equals(principalsAgain));
  assertPrincipals(principalsAgain,EveryonePrincipal.getInstance(),getTestUser().getPrincipal());
  cache=getCacheTree(systemRoot);
  assertNotSame(2,new NodeUtil(cache).getLong(CacheConstants.REP_EXPIRATION,2));
  assertEquals("",TreeUtil.getString(cache,CacheConstants.REP_GROUP_PRINCIPAL_NAMES));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCachedPrincipalsGroupRemoved() throws Exception {
  PrincipalProvider pp=createPrincipalProvider(systemRoot);
  Iterable<? extends Principal> principals=Iterables.filter(pp.getPrincipals(userId),new GroupPredicate());
  for (  Principal p : principals) {
    String className=p.getClass().getName();
    assertEquals("org.apache.jackrabbit.oak.security.user.UserPrincipalProvider$GroupPrincipal",className);
  }
  testGroup.remove();
  root.commit();
  systemRoot.refresh();
  Iterable<? extends Principal> principalsAgain=Iterables.filter(pp.getPrincipals(userId),new GroupPredicate());
  for (  Principal p : principalsAgain) {
    String className=p.getClass().getName();
    assertEquals("org.apache.jackrabbit.oak.security.user.UserPrincipalProvider$CachedGroupPrincipal",className);
    assertTrue(p instanceof TreeBasedPrincipal);
    assertNull(((TreeBasedPrincipal)p).getPath());
    java.security.acl.Group principalGroup=(java.security.acl.Group)p;
    assertFalse(principalGroup.isMember(getTestUser().getPrincipal()));
    Enumeration<? extends Principal> members=principalGroup.members();
    assertFalse(members.hasMoreElements());
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testOnlySystemCreatesCache() throws Exception {
  Set<? extends Principal> principals=principalProvider.getPrincipals(getTestUser().getID());
  assertPrincipals(principals,EveryonePrincipal.getInstance(),testGroup.getPrincipal(),getTestUser().getPrincipal());
  root.refresh();
  Tree userTree=root.getTree(getTestUser().getPath());
  assertFalse(userTree.hasChild(CacheConstants.REP_CACHE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserProviderTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroup() throws RepositoryException {
  UserProvider up=createUserProvider();
  Tree groupTree=up.createGroup("group1",null);
  assertNotNull(groupTree);
  assertTrue(Text.isDescendant(defaultGroupPath,groupTree.getPath()));
  int level=defaultConfig.getConfigValue(UserConstants.PARAM_DEFAULT_DEPTH,UserConstants.DEFAULT_DEPTH) + 1;
  assertEquals(defaultGroupPath,Text.getRelativeParent(groupTree.getPath(),level));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithPath() throws Exception {
  UserProvider up=createUserProvider(1);
  Tree userTree=up.createUser("nadine","a/b/c");
  assertNotNull(userTree);
  assertTrue(Text.isDescendant(customUserPath,userTree.getPath()));
  String userPath=customUserPath + "/a/b/c/nadine";
  assertEquals(userPath,userTree.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateGroupWithPath() throws Exception {
  UserProvider up=createUserProvider(4);
  Tree group=up.createGroup("authors","a/b/c");
  assertNotNull(group);
  assertTrue(Text.isDescendant(customGroupPath,group.getPath()));
  String groupPath=customGroupPath + "/a/b/c/authors";
  assertEquals(groupPath,group.getPath());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws Exception {
  UserProvider up=createUserProvider();
  Tree userTree=up.createUser("user1",null);
  assertNotNull(userTree);
  assertTrue(Text.isDescendant(defaultUserPath,userTree.getPath()));
  int level=defaultConfig.getConfigValue(UserConstants.PARAM_DEFAULT_DEPTH,UserConstants.DEFAULT_DEPTH) + 1;
  assertEquals(defaultUserPath,Text.getRelativeParent(userTree.getPath(),level));
  userTree=up.createUser("b",null);
  assertEquals(defaultUserPath + "/b/bb/b",userTree.getPath());
  Map<String,String> m=new HashMap<String,String>();
  m.put("bb","/b/bb/bb");
  m.put("bbb","/b/bb/bbb");
  m.put("bbbb","/b/bb/bbbb");
  m.put("bh","/b/bh/bh");
  m.put("bHbh","/b/bH/bHbh");
  m.put("b_Hb","/b/b_/b_Hb");
  m.put("basim","/b/ba/basim");
  for (  String uid : m.keySet()) {
    userTree=up.createUser(uid,null);
    assertEquals(defaultUserPath + m.get(uid),userTree.getPath());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.UserValidatorTest </h4><pre class="type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since oak 1.0 cyclic group membership added in a single set of transient
 * modifications must be detected upon save.
 */
@Test public void testDetectCyclicMembership() throws Exception {
  Group group1=null;
  Group group2=null;
  Group group3=null;
  UserManager userMgr=getUserManager(root);
  try {
    group1=userMgr.createGroup("group1");
    group2=userMgr.createGroup("group2");
    group3=userMgr.createGroup("group3");
    group1.addMember(group2);
    group2.addMember(group3);
    assertFalse(group3.addMember(group1));
    Tree group3Tree=root.getTree(group3.getPath());
    Set<String> values=Collections.singleton(root.getTree(group1.getPath()).getProperty(JcrConstants.JCR_UUID).getValue(Type.STRING));
    PropertyState prop=PropertyStates.createProperty(REP_MEMBERS,values,Type.WEAKREFERENCES);
    group3Tree.setProperty(prop);
    root.commit();
    fail("Cyclic group membership must be detected");
  }
 catch (  CommitFailedException e) {
  }
 finally {
    if (group1 != null)     group1.remove();
    if (group2 != null)     group2.remove();
    if (group3 != null)     group3.remove();
    root.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.autosave.AuthorizableByTypeTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroupByIdAndType() throws Exception {
  Group g=mgr.getAuthorizable(group.getID(),Group.class);
  assertTrue(g instanceof GroupImpl);
  Authorizable auth=mgr.getAuthorizable(group.getID(),group.getClass());
  assertTrue(auth instanceof GroupImpl);
  auth=mgr.getAuthorizable(group.getID(),Authorizable.class);
  assertTrue(auth instanceof AuthorizableImpl);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserByIdAndType() throws Exception {
  User u=mgr.getAuthorizable(user.getID(),User.class);
  assertTrue(u instanceof UserImpl);
  Authorizable auth=mgr.getAuthorizable(user.getID(),user.getClass());
  assertTrue(auth instanceof UserImpl);
  auth=mgr.getAuthorizable(user.getID(),Authorizable.class);
  assertTrue(auth instanceof AuthorizableImpl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.autosave.AutoSaveEnabledManagerTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeclaredMemberOf() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  assertTrue(g.addMember(u));
  Iterator<Group> groups=u.declaredMemberOf();
  assertTrue(groups.hasNext());
  Group gAgain=groups.next();
  assertTrue(gAgain instanceof GroupImpl);
  assertTrue(gAgain.removeMember(u));
  assertFalse(root.hasPendingChanges());
  assertFalse(u.declaredMemberOf().hasNext());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAuthorizable() throws Exception {
  User u=mgr.createUser("u","u");
  u.setProperty("prop",getValueFactory().createValue("value"));
  assertFalse(root.hasPendingChanges());
  u.setProperty("prop",new Value[]{getValueFactory().createValue(true)});
  assertFalse(root.hasPendingChanges());
  u.removeProperty("prop");
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testImpersonation() throws Exception {
  User u=mgr.createUser("u","u");
  Impersonation imp=u.getImpersonation();
  Principal p=mgr.getAuthorizable("anonymous").getPrincipal();
  assertTrue(imp.grantImpersonation(p));
  assertFalse(root.hasPendingChanges());
  assertTrue(imp.revokeImpersonation(p));
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGroup() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  assertTrue(g.addMember(u));
  assertFalse(root.hasPendingChanges());
  assertTrue(g.isDeclaredMember(u));
  Iterator<Authorizable> it=g.getDeclaredMembers();
  if (it.hasNext()) {
    Authorizable a=it.next();
    assertTrue(a instanceof AuthorizableImpl);
    a.setProperty("prop",getValueFactory().createValue("blub"));
    assertFalse(root.hasPendingChanges());
  }
  it=g.getMembers();
  if (it.hasNext()) {
    Authorizable a=it.next();
    assertTrue(a instanceof AuthorizableImpl);
    a.setProperty("prop",getValueFactory().createValue("blub"));
    assertFalse(root.hasPendingChanges());
  }
  assertTrue(g.removeMember(u));
  assertFalse(root.hasPendingChanges());
  assertFalse(g.isDeclaredMember(u));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAddMembers() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  assertTrue(g.addMembers(u.getID()).isEmpty());
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAuthorizable() throws RepositoryException {
  Authorizable a=mgr.getAuthorizable(UserConstants.DEFAULT_ANONYMOUS_ID);
  assertNotNull(a);
  assertTrue(a instanceof AuthorizableImpl);
  assertTrue(a instanceof UserImpl);
  a=mgr.getAuthorizableByPath(a.getPath());
  assertNotNull(a);
  assertTrue(a instanceof AuthorizableImpl);
  assertTrue(a instanceof UserImpl);
  a=mgr.getAuthorizable(a.getPrincipal());
  assertNotNull(a);
  assertTrue(a instanceof AuthorizableImpl);
  assertTrue(a instanceof UserImpl);
  assertNull(mgr.getAuthorizable("unknown"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCreateRemoveGroup() throws RepositoryException {
  Group g=mgr.createGroup("g");
  assertFalse(root.hasPendingChanges());
  g.remove();
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAuthorizable() throws RepositoryException {
  Iterator<Authorizable> res=mgr.findAuthorizables(UserConstants.REP_AUTHORIZABLE_ID,UserConstants.DEFAULT_ANONYMOUS_ID);
  assertTrue(res.hasNext());
  Authorizable a=res.next();
  assertNotNull(a);
  assertTrue(a instanceof AuthorizableImpl);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMemberOf() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  assertTrue(g.addMember(u));
  Iterator<Group> groups=u.memberOf();
  assertTrue(groups.hasNext());
  Group gAgain=groups.next();
  assertTrue(gAgain instanceof GroupImpl);
  assertTrue(gAgain.removeMember(u));
  assertFalse(root.hasPendingChanges());
  assertFalse(u.declaredMemberOf().hasNext());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCreateRemoveUser() throws RepositoryException {
  User u=mgr.createUser("u","u");
  assertFalse(root.hasPendingChanges());
  u.remove();
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAutoSaveEnabled() throws RepositoryException {
  assertTrue(mgr instanceof AutoSaveEnabledManager);
  assertTrue(mgr.isAutoSave());
  mgr.autoSave(false);
  assertFalse(mgr.isAutoSave());
  mgr.autoSave(true);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveMembers() throws Exception {
  User u=mgr.createUser("u","u");
  Group g=mgr.createGroup("g");
  g.addMember(u);
  assertTrue(g.removeMembers(u.getID()).isEmpty());
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUser() throws Exception {
  User u=mgr.createUser("u","u");
  u.disable("disabled");
  assertTrue(u.isDisabled());
  assertFalse(root.hasPendingChanges());
  u.disable(null);
  assertFalse(u.isDisabled());
  assertFalse(root.hasPendingChanges());
  u.changePassword("t");
  assertFalse(root.hasPendingChanges());
  u.changePassword("tt","t");
  assertFalse(root.hasPendingChanges());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsAutoSave(){
  assertTrue(mgr.isAutoSave());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitFailedRevertChanges() throws RepositoryException {
  User u=mgr.createUser("u","u");
  try {
    User u2=mgr.createUser("u","u");
    fail();
  }
 catch (  RepositoryException e) {
    assertFalse(root.hasPendingChanges());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.security.user.query.UserQueryManagerTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @since OAK 1.0
 */
@Test public void testFindNodesExact() throws Exception {
  Value vs=valueFactory.createValue("value \\, containing backslash");
  user.setProperty(propertyName,vs);
  root.commit();
  try {
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value \\, containing backslash",AuthorizableType.USER,true);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesNonExactWithApostrophe() throws Exception {
  Value vs=valueFactory.createValue("value ' with apostrophe");
  try {
    user.setProperty(propertyName,vs);
    root.commit();
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value ' with apostrophe",AuthorizableType.USER,false);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesExactWithApostrophe() throws Exception {
  Value vs=valueFactory.createValue("value ' with apostrophe");
  try {
    user.setProperty(propertyName,vs);
    root.commit();
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value ' with apostrophe",AuthorizableType.USER,true);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindNodesNonExact() throws Exception {
  Value vs=valueFactory.createValue("value \\, containing backslash");
  user.setProperty(propertyName,vs);
  root.commit();
  try {
    Iterator<Authorizable> result=queryMgr.findAuthorizables(propertyName,"value \\, containing backslash",AuthorizableType.USER,false);
    assertTrue("expected result",result.hasNext());
    assertEquals(user.getID(),result.next().getID());
    assertFalse("expected no more results",result.hasNext());
  }
  finally {
    user.removeProperty(propertyName);
    root.commit();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.AbstractBlobStoreTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCloseStream() throws Exception {
  final AtomicBoolean closed=new AtomicBoolean();
  InputStream in=new InputStream(){
    @Override public void close(){
      closed.set(true);
    }
    @Override public int read() throws IOException {
      return -1;
    }
  }
;
  store.writeBlob(in);
  assertTrue(closed.get());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void list() throws Exception {
  Set<String> ids=createArtifacts();
  Iterator<String> iter=store.getAllChunkIds(0);
  while (iter.hasNext()) {
    ids.remove(iter.next());
  }
  assertTrue("unexpected ids in store: " + ids,ids.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testExceptionWhileReading() throws Exception {
  final AtomicBoolean closed=new AtomicBoolean();
  InputStream in=new InputStream(){
    @Override public void close(){
      closed.set(true);
    }
    @Override public int read() throws IOException {
      throw new RuntimeException("abc");
    }
  }
;
  try {
    store.writeBlob(in);
  }
 catch (  Exception e) {
    String msg=e.getMessage();
    assertTrue(msg,msg.indexOf("abc") >= 0);
  }
  assertTrue(closed.get());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteCount() throws Exception {
  Set<String> ids=createArtifacts();
  long count=store.countDeleteChunks(Lists.newArrayList(ids),0);
  Iterator<String> iter=store.getAllChunkIds(0);
  Set<String> ret=Sets.newHashSet();
  while (iter.hasNext()) {
    ret.add(iter.next());
  }
  assertTrue(ret.toString(),ret.isEmpty());
  assertEquals(ids.size(),count);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void delete() throws Exception {
  Set<String> ids=createArtifacts();
  store.deleteChunks(Lists.newArrayList(ids),0);
  Iterator<String> iter=store.getAllChunkIds(0);
  Set<String> ret=Sets.newHashSet();
  while (iter.hasNext()) {
    ret.add(iter.next());
  }
  assertTrue(ret.toString(),ret.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGarbageCollection() throws Exception {
  HashMap<String,byte[]> map=new HashMap<String,byte[]>();
  ArrayList<String> mem=new ArrayList<String>();
  int count;
  for (int i=1; i <= 1000; i*=10) {
    byte[] data=new byte[i];
    String id;
    id=store.writeBlob(new ByteArrayInputStream(data));
    map.put(new String(id),data);
    mem.add(id);
    data=new byte[i];
    Arrays.fill(data,(byte)1);
    id=store.writeBlob(new ByteArrayInputStream(data));
    map.put(new String(id),data);
    mem.add(id);
  }
  store.startMark();
  store.sweep();
  for (  String id : map.keySet()) {
    byte[] test=readFully(id);
    assertTrue(Arrays.equals(map.get(id),test));
  }
  mem.clear();
  store.clearInUse();
  store.startMark();
  for (  String id : map.keySet()) {
    byte[] d=map.get(id);
    if (d[0] != 0) {
      continue;
    }
    if (store instanceof AbstractBlobStore) {
      ((AbstractBlobStore)store).mark(id);
    }
 else {
      store.getBlobLength(id);
    }
  }
  count=store.sweep();
  store.clearInUse();
  store.clearCache();
  try {
    Thread.sleep(1);
  }
 catch (  InterruptedException e) {
  }
  store.startMark();
  count=store.sweep();
  assertTrue("count: " + count,count > 0);
  int failedCount=0;
  for (  String id : map.keySet()) {
    long length=store.getBlobLength(id);
    try {
      readFully(id);
    }
 catch (    Exception e) {
      assertTrue(id + ":" + length,length > store.getBlockSizeMin());
      failedCount++;
    }
  }
  assertTrue("failedCount: " + failedCount,failedCount > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.ConcurrentBlobTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("OAK-1599") @Test public void test() throws Exception {
  final AtomicInteger id=new AtomicInteger();
  Concurrent.run("blob",new Concurrent.Task(){
    @Override public void call() throws Exception {
      int i=id.getAndIncrement();
      ByteArrayOutputStream out=new ByteArrayOutputStream();
      IOUtils.writeLong(out,i);
      out.write(EMPTY);
      byte[] data=out.toByteArray();
      String id=store.writeBlob(new ByteArrayInputStream(data));
      Assert.assertEquals(58,store.getBlobLength(id));
      byte[] test=out.toByteArray();
      Assert.assertEquals(8,store.readBlob(id,0,test,0,8));
      Assert.assertTrue(Arrays.equals(data,test));
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.blob.split.SplitBlobStoreTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsMigrated() throws IOException {
  for (  String id : oldBlobIds) {
    assertFalse(splitBlobStore.isMigrated(id));
  }
  for (  String id : newBlobIds) {
    assertTrue(splitBlobStore.isMigrated(id));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.commit.BackgroundObserverTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Assert that each observer of many running concurrently sees the same
 * linearly sequence of commits (i.e. sees the commits in the correct order).
 */
@Test public void concurrentObservers() throws InterruptedException {
  Observer observer=createCompositeObserver(newFixedThreadPool(16),128);
  for (int k=0; k < CHANGE_COUNT; k++) {
    contentChanged(observer,k);
  }
  done(observer);
  assertTrue(doneCounter.await(5,TimeUnit.SECONDS));
  for (  Runnable assertion : assertions) {
    assertion.run();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.commit.MoveTrackerTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotEmpty(){
  MoveTracker mt=new MoveTracker();
  mt.addMove("/a/b/c","/d/e/f");
  assertFalse(mt.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsEmpty(){
  assertTrue(new MoveTracker().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.query.CursorsTest </h4><pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void intersectionCursor(){
  QueryEngineSettings s=new QueryEngineSettings();
  Cursor a=new SimpleCursor("1:","/b","/c","/e","/e","/c");
  Cursor b=new SimpleCursor("2:","/a","/c","/d","/b","/c");
  Cursor c=Cursors.newIntersectionCursor(a,b,s);
  assertEquals("1:/b, 1:/c",list(c));
  assertFalse(c.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.query.PropertyStateValueTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void compareDates(){
  Calendar d1, d2;
  PropertyValue v1, v2;
  d1=newCal(null);
  d2=newCal(d1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,GMT,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,GMT,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null,PST,0);
  d2=newCal(d1,PST,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null);
  d2=newCal(d1,CET,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,CET,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,CET,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
  d1=newCal(null);
  d2=newCal(d1,PST,0);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertEquals("v1 and v2 should be equals",0,v1.compareTo(v2));
  assertEquals("v1 and v2 should be equals",0,v2.compareTo(v1));
  d1=newCal(null);
  d2=newCal(d1,PST,1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 < v2",v1.compareTo(v2) < 0);
  assertTrue("v2 > v1",v2.compareTo(v1) > 0);
  d1=newCal(null);
  d2=newCal(d1,PST,-1);
  v1=newDate(format(d1));
  v2=newDate(format(d2));
  assertTrue("v1 > v2",v1.compareTo(v2) > 0);
  assertTrue("v2 < v1",v2.compareTo(v1) < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.CompositeConfigurationTest </h4><pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetDefaultConfig(){
  SecurityConfiguration sc=new SecurityConfiguration.Default();
  compositeConfiguration.setDefaultConfig(sc);
  List<SecurityConfiguration> configurations=compositeConfiguration.getConfigurations();
  assertFalse(configurations.isEmpty());
  assertEquals(1,configurations.size());
  assertEquals(sc,configurations.iterator().next());
}

</code></pre>

<br>
<pre class="type-7 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmpty(){
  assertSame(ConfigurationParameters.EMPTY,compositeConfiguration.getParameters());
  assertTrue(compositeConfiguration.getConfigurations().isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddConfiguration(){
  compositeConfiguration.addConfiguration(new SecurityConfiguration.Default());
  compositeConfiguration.addConfiguration(new SecurityConfiguration.Default());
  List<SecurityConfiguration> configurations=getConfigurations();
  assertFalse(configurations.isEmpty());
  assertEquals(2,configurations.size());
  SecurityConfiguration def=new SecurityConfiguration.Default();
  compositeConfiguration.setDefaultConfig(def);
  configurations=getConfigurations();
  assertEquals(2,configurations.size());
  assertFalse(configurations.contains(def));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.ConfigurationParametersTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConversion(){
  TestObject testObject=new TestObject("t");
  Integer int1000=1000;
  Map<String,Object> m=new HashMap<String,Object>();
  m.put("TEST",testObject);
  m.put("String","1000");
  m.put("Int2",1000);
  m.put("Int3",1000);
  m.put("time0","1s");
  m.put("time1",1000);
  ConfigurationParameters options=ConfigurationParameters.of(m);
  assertEquals(testObject,options.getConfigValue("TEST",testObject));
  assertEquals("t",options.getConfigValue("TEST","defaultString"));
  assertTrue(1000 == options.getConfigValue("String",10,int.class));
  assertTrue(1000 == options.getConfigValue("String",10));
  assertEquals(int1000,options.getConfigValue("String",10));
  assertEquals(new Long(1000),options.getConfigValue("String",10l));
  assertEquals("1000",options.getConfigValue("String","10"));
  assertEquals(int1000,options.getConfigValue("Int2",10));
  assertEquals("1000",options.getConfigValue("Int2","1000"));
  assertEquals(int1000,options.getConfigValue("Int3",10));
  assertEquals("1000",options.getConfigValue("Int3","1000"));
  assertEquals(ConfigurationParameters.Milliseconds.of(1000),options.getConfigValue("time0",ConfigurationParameters.Milliseconds.NULL));
  assertEquals(ConfigurationParameters.Milliseconds.of(1000),options.getConfigValue("time1",ConfigurationParameters.Milliseconds.NULL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContains(){
  ConfigurationParameters params=ConfigurationParameters.EMPTY;
  assertFalse(params.contains("some"));
  assertFalse(params.contains(""));
  Map<String,String> map=new HashMap<String,String>();
  map.put("key1","v");
  map.put("key2","v");
  params=ConfigurationParameters.of(map);
  assertTrue(params.contains("key1"));
  assertTrue(params.contains("key2"));
  assertFalse(params.contains("another"));
  assertFalse(params.contains(""));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreation(){
  ConfigurationParameters params=ConfigurationParameters.of(ConfigurationParameters.EMPTY,null,ConfigurationParameters.of("a","a"));
  assertFalse(params.isEmpty());
  assertEquals(1,params.size());
  assertTrue(params.contains("a"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullValue(){
  ConfigurationParameters options=ConfigurationParameters.of(Collections.singletonMap("test",null));
  assertNull(options.getConfigValue("test",null));
  assertEquals("value",options.getConfigValue("test","value"));
  TestObject to=new TestObject("t");
  assertEquals(to,options.getConfigValue("test",to));
  assertFalse(options.getConfigValue("test",false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.AbstractLoginModuleTest </h4><pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSharedCredentials(){
  Map<String,Object> sharedState=new HashMap<String,Object>();
  sharedState.put(AbstractLoginModule.SHARED_KEY_CREDENTIALS,new TestCredentials());
  AbstractLoginModule lm=initLoginModule(TestCredentials.class,sharedState);
  assertTrue(lm.getSharedCredentials() instanceof TestCredentials);
  sharedState.put(AbstractLoginModule.SHARED_KEY_CREDENTIALS,new SimpleCredentials("test","test".toCharArray()));
  lm=initLoginModule(TestCredentials.class,sharedState);
  assertTrue(lm.getSharedCredentials() instanceof SimpleCredentials);
  lm=initLoginModule(SimpleCredentials.class,sharedState);
  assertTrue(lm.getSharedCredentials() instanceof SimpleCredentials);
  sharedState.put(AbstractLoginModule.SHARED_KEY_CREDENTIALS,"no credentials object");
  lm=initLoginModule(TestCredentials.class,sharedState);
  assertNull(lm.getSharedCredentials());
  sharedState.clear();
  lm=initLoginModule(TestCredentials.class,sharedState);
  assertNull(lm.getSharedCredentials());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentialsFromCallbackHandler(){
  CallbackHandler cbh=new CallbackHandler(){
    @Override public void handle(    Callback[] callbacks){
      for (      Callback cb : callbacks) {
        if (cb instanceof CredentialsCallback) {
          ((CredentialsCallback)cb).setCredentials(new TestCredentials());
        }
      }
    }
  }
;
  AbstractLoginModule lm=initLoginModule(TestCredentials.class,cbh);
  assertTrue(lm.getCredentials() instanceof TestCredentials);
  lm=initLoginModule(SimpleCredentials.class,cbh);
  assertNull(lm.getCredentials());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCredentialsFromSharedState(){
  Map<String,Credentials> sharedState=new HashMap<String,Credentials>();
  sharedState.put(AbstractLoginModule.SHARED_KEY_CREDENTIALS,new TestCredentials());
  AbstractLoginModule lm=initLoginModule(TestCredentials.class,sharedState);
  assertTrue(lm.getCredentials() instanceof TestCredentials);
  SimpleCredentials sc=new SimpleCredentials("test","test".toCharArray());
  sharedState.put(AbstractLoginModule.SHARED_KEY_CREDENTIALS,sc);
  lm=initLoginModule(TestCredentials.class,sharedState);
  assertNull(lm.getCredentials());
  sharedState.put(AbstractLoginModule.SHARED_KEY_CREDENTIALS,sc);
  lm=initLoginModule(SimpleCredentials.class,sharedState);
  assertTrue(lm.getCredentials() instanceof SimpleCredentials);
  sharedState.clear();
  lm=initLoginModule(TestCredentials.class,sharedState);
  assertNull(lm.getCredentials());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.GuestLoginModuleTest </h4><pre class="type-9 type-7 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullLogin() throws LoginException {
  Subject subject=new Subject();
  CallbackHandler cbh=new TestCallbackHandler(null);
  Map sharedState=new HashMap();
  guestLoginModule.initialize(subject,cbh,sharedState,Collections.<String,Object>emptyMap());
  assertTrue(guestLoginModule.login());
  Object sharedCreds=sharedState.get(AbstractLoginModule.SHARED_KEY_CREDENTIALS);
  assertNotNull(sharedCreds);
  assertTrue(sharedCreds instanceof GuestCredentials);
  assertTrue(guestLoginModule.commit());
  assertFalse(subject.getPrincipals(EveryonePrincipal.class).isEmpty());
  assertFalse(subject.getPublicCredentials(GuestCredentials.class).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGuestCredentials() throws LoginException {
  Subject subject=new Subject();
  CallbackHandler cbh=new TestCallbackHandler(new GuestCredentials());
  Map sharedState=new HashMap();
  guestLoginModule.initialize(subject,cbh,sharedState,Collections.<String,Object>emptyMap());
  assertFalse(guestLoginModule.login());
  assertFalse(sharedState.containsKey(AbstractLoginModule.SHARED_KEY_CREDENTIALS));
  assertFalse(guestLoginModule.commit());
  assertTrue(subject.getPrincipals().isEmpty());
  assertTrue(subject.getPublicCredentials().isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSimpleCredentials() throws LoginException {
  Subject subject=new Subject();
  CallbackHandler cbh=new TestCallbackHandler(new SimpleCredentials("test",new char[0]));
  Map sharedState=new HashMap();
  guestLoginModule.initialize(subject,cbh,sharedState,Collections.<String,Object>emptyMap());
  assertFalse(guestLoginModule.login());
  assertFalse(sharedState.containsKey(AbstractLoginModule.SHARED_KEY_CREDENTIALS));
  assertFalse(guestLoginModule.commit());
  assertTrue(subject.getPrincipals().isEmpty());
  assertTrue(subject.getPublicCredentials().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.DefaultSyncHandlerTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiresSync() throws Exception {
  login(new SimpleCredentials(userId,new char[0])).close();
  root.refresh();
  ValueFactory valueFactory=new ValueFactoryImpl(root,NamePathMapper.DEFAULT);
  final Calendar nowCal=Calendar.getInstance();
  nowCal.setTimeInMillis(nowCal.getTimeInMillis() - 1000);
  Value nowValue=valueFactory.createValue(nowCal);
  UserManager userManager=getUserManager(root);
  Authorizable a=userManager.getAuthorizable(userId);
  a.setProperty(DefaultSyncContext.REP_LAST_SYNCED,nowValue);
  root.commit();
  SyncHandler mgr=syncManager.getSyncHandler("default");
  SyncedIdentity id=mgr.findIdentity(userManager,userId);
  assertNotNull("known authorizable should exist",id);
  assertTrue("synced id should require sync",mgr.requiresSync(id));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiresNoSync() throws Exception {
  login(new SimpleCredentials(userId,new char[0])).close();
  root.refresh();
  UserManager userManager=getUserManager(root);
  SyncHandler mgr=syncManager.getSyncHandler("default");
  SyncedIdentity id=mgr.findIdentity(userManager,userId);
  assertNotNull("known authorizable should exist",id);
  assertFalse("freshly synced id should not require sync",mgr.requiresSync(id));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalIdentityRefTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetString(){
  String s=refNullProvider.getString();
  assertNotNull(s);
  assertFalse(USERID.equals(s));
  assertEquals("user%25id",s);
  s=refEmptyProvider.getString();
  assertNotNull(s);
  assertFalse(USERID.equals(s));
  assertEquals("user%25id",s);
  s=ref.getString();
  assertNotNull(s);
  assertEquals("user%25id;provider%3bName",s);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEquals(){
  assertTrue(refNullProvider.equals(refNullProvider));
  assertTrue(refNullProvider.equals(new ExternalIdentityRef(USERID,refNullProvider.getProviderName())));
  assertTrue(refNullProvider.equals(new ExternalIdentityRef(USERID,refEmptyProvider.getProviderName())));
  assertTrue(refNullProvider.equals(refEmptyProvider));
  assertTrue(refEmptyProvider.equals(refNullProvider));
  assertFalse(refNullProvider.equals(ref));
  assertFalse(ref.equals(refNullProvider));
  assertFalse(refNullProvider.equals(null));
  assertFalse(refNullProvider.equals(new ExternalIdentityRef("anotherId",null)));
  assertTrue(ref.equals(ref));
  assertTrue(ref.equals(new ExternalIdentityRef(ref.getId(),ref.getProviderName())));
  assertTrue(ref.equals(new ExternalIdentityRef(USERID,PROVIDER_NAME)));
  assertFalse(ref.equals(new ExternalIdentity(){
    @Nonnull @Override public ExternalIdentityRef getExternalId(){
      return ref;
    }
    @Nonnull @Override public String getId(){
      return ref.getId();
    }
    @Nonnull @Override public String getPrincipalName(){
      return ref.getId();
    }
    @CheckForNull @Override public String getIntermediatePath(){
      return null;
    }
    @Nonnull @Override public Iterable<ExternalIdentityRef> getDeclaredGroups() throws ExternalIdentityException {
      return ImmutableSet.of();
    }
    @Nonnull @Override public Map<String,?> getProperties(){
      return ImmutableMap.of();
    }
  }
));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalLoginModuleFactoryTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUser() throws Exception {
  setUpJaasFactoryWithInjection();
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.ExternalLoginModuleTest </h4><pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncUpdate() throws Exception {
  UserManager userManager=getUserManager(root);
  ExternalUser externalUser=idp.getUser(userId);
  Authorizable user=userManager.createUser(externalUser.getId(),null);
  user.setProperty("rep:externalId",new ValueFactoryImpl(root,NamePathMapper.DEFAULT).createValue(externalUser.getExternalId().getString()));
  root.commit();
  ContentSession cs=null;
  try {
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    for (    String prop : externalUser.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUserCaseInsensitive() throws Exception {
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId.toUpperCase(),new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncCreateUser() throws Exception {
  UserManager userManager=getUserManager(root);
  ContentSession cs=null;
  try {
    assertNull(userManager.getAuthorizable(userId));
    cs=login(new SimpleCredentials(userId,new char[0]));
    root.refresh();
    Authorizable a=userManager.getAuthorizable(userId);
    assertNotNull(a);
    ExternalUser user=idp.getUser(userId);
    for (    String prop : user.getProperties().keySet()) {
      assertTrue(a.hasProperty(prop));
    }
    assertEquals(TEST_CONSTANT_PROPERTY_VALUE,a.getProperty(TEST_CONSTANT_PROPERTY_NAME)[0].getString());
  }
  finally {
    if (cs != null) {
      cs.close();
    }
    options.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authentication.external.basic.DefaultSyncContextTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyncAutoMembership() throws Exception {
  Group gr=createTestGroup();
  config.user().setAutoMembership(gr.getID());
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  assertEquals(SyncResult.Status.ADD,result.getStatus());
  Authorizable a=getUserManager(root).getAuthorizable(result.getIdentity().getId());
  assertTrue(gr.isDeclaredMember(a));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLostMembershipDifferentIDP() throws Exception {
  Group gr=createTestGroup();
  setExternalID(gr,"differentIDP");
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  User user=getUserManager(root).getAuthorizable(result.getIdentity().getId(),User.class);
  gr.addMember(user);
  root.commit();
  syncCtx.setForceUserSync(true);
  config.user().setMembershipExpirationTime(-1);
  config.user().setMembershipNestingDepth(1);
  assertEquals(SyncResult.Status.UPDATE,syncCtx.sync(user.getID()).getStatus());
  assertTrue(gr.isDeclaredMember(user));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLostMembership() throws Exception {
  Group gr=createTestGroup();
  setExternalID(gr,idp.getName());
  SyncResult result=syncCtx.sync(idp.listUsers().next());
  User user=getUserManager(root).getAuthorizable(result.getIdentity().getId(),User.class);
  gr.addMember(user);
  root.commit();
  syncCtx.setForceUserSync(true);
  config.user().setMembershipExpirationTime(-1);
  config.user().setMembershipNestingDepth(-1);
  syncCtx.sync(user.getID()).getStatus();
  assertTrue(gr.isDeclaredMember(user));
  config.user().setMembershipNestingDepth(1);
  assertEquals(SyncResult.Status.UPDATE,syncCtx.sync(user.getID()).getStatus());
  assertFalse(gr.isDeclaredMember(user));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.ACETest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNotEquals() throws RepositoryException {
  ACE ace=createEntry(new String[]{PrivilegeConstants.JCR_ALL},true);
  List<JackrabbitAccessControlEntry> otherAces=new ArrayList<JackrabbitAccessControlEntry>();
  try {
    Principal princ=new Principal(){
      public String getName(){
        return "a name";
      }
    }
;
    Privilege[] privs=new Privilege[]{acMgr.privilegeFromName(PrivilegeConstants.JCR_ALL)};
    otherAces.add(createEntry(princ,privs,true));
  }
 catch (  RepositoryException e) {
  }
  try {
    otherAces.add(createEntry(new String[]{PrivilegeConstants.JCR_READ},true));
  }
 catch (  RepositoryException e) {
  }
  try {
    otherAces.add(createEntry(new String[]{PrivilegeConstants.JCR_ALL},false));
  }
 catch (  RepositoryException e) {
  }
  try {
    otherAces.add(createEntry(new String[]{PrivilegeConstants.REP_WRITE},false));
  }
 catch (  RepositoryException e) {
  }
  final Privilege[] privs=new Privilege[]{acMgr.privilegeFromName(PrivilegeConstants.JCR_ALL)};
  JackrabbitAccessControlEntry pe=new JackrabbitAccessControlEntry(){
    public boolean isAllow(){
      return true;
    }
    public String[] getRestrictionNames(){
      return new String[0];
    }
    public Value getRestriction(    String restrictionName){
      return null;
    }
    public Value[] getRestrictions(    String restrictionName){
      return null;
    }
    public Principal getPrincipal(){
      return testPrincipal;
    }
    public Privilege[] getPrivileges(){
      return privs;
    }
  }
;
  otherAces.add(pe);
  for (  JackrabbitAccessControlEntry otherAce : otherAces) {
    assertFalse(ace.equals(otherAce));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsAllow() throws RepositoryException {
  ACE ace=createEntry(new String[]{PrivilegeConstants.JCR_READ},true);
  assertTrue(ace.isAllow());
  ace=createEntry(new String[]{PrivilegeConstants.JCR_READ},false);
  assertFalse(ace.isAllow());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHashCode2() throws Exception {
  JackrabbitAccessControlEntry ace=createEntry(new String[]{PrivilegeConstants.JCR_ALL},true);
  final Privilege[] privs=AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_ALL);
  List<JackrabbitAccessControlEntry> otherAces=new ArrayList<JackrabbitAccessControlEntry>();
  Principal princ=new Principal(){
    public String getName(){
      return "a name";
    }
  }
;
  otherAces.add(createEntry(princ,privs,true));
  otherAces.add(createEntry(new String[]{PrivilegeConstants.JCR_READ},true));
  otherAces.add(createEntry(new String[]{PrivilegeConstants.JCR_ALL},false));
  otherAces.add(createEntry(new String[]{PrivilegeConstants.REP_WRITE},false));
  JackrabbitAccessControlEntry pe=new JackrabbitAccessControlEntry(){
    public boolean isAllow(){
      return true;
    }
    public String[] getRestrictionNames(){
      return new String[0];
    }
    public Value getRestriction(    String restrictionName){
      return null;
    }
    public Value[] getRestrictions(    String restrictionName){
      return null;
    }
    public Principal getPrincipal(){
      return testPrincipal;
    }
    public Privilege[] getPrivileges(){
      return privs;
    }
  }
;
  otherAces.add(pe);
  for (  JackrabbitAccessControlEntry otherAce : otherAces) {
    assertFalse(ace.hashCode() == otherAce.hashCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.AbstractAccessControlListTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyAcl() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  assertNotNull(acl.getAccessControlEntries());
  assertNotNull(acl.getEntries());
  assertTrue(acl.getAccessControlEntries().length == 0);
  assertEquals(acl.getAccessControlEntries().length,acl.getEntries().size());
  assertEquals(0,acl.size());
  assertTrue(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionNames() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  String[] restrNames=acl.getRestrictionNames();
  assertNotNull(restrNames);
  List<String> names=Lists.newArrayList(restrNames);
  for (  RestrictionDefinition def : getRestrictionProvider().getSupportedRestrictions(getTestPath())) {
    assertTrue(names.remove(namePathMapper.getJcrName(def.getName())));
  }
  assertTrue(names.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsEmpty() throws RepositoryException {
  AbstractAccessControlList acl=createACL(createTestEntries());
  assertFalse(acl.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEntries() throws RepositoryException {
  List<ACE> aces=createTestEntries();
  AbstractAccessControlList acl=createACL(aces);
  assertNotNull(acl.getEntries());
  assertNotNull(acl.getAccessControlEntries());
  assertEquals(aces.size(),acl.getEntries().size());
  assertEquals(aces.size(),acl.getAccessControlEntries().length);
  assertTrue(acl.getEntries().containsAll(aces));
  assertTrue(Arrays.asList(acl.getAccessControlEntries()).containsAll(aces));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestrictionType() throws RepositoryException {
  AbstractAccessControlList acl=createEmptyACL();
  for (  RestrictionDefinition def : getRestrictionProvider().getSupportedRestrictions(getTestPath())) {
    int reqType=acl.getRestrictionType(namePathMapper.getJcrName(def.getName()));
    assertTrue(reqType > PropertyType.UNDEFINED);
    assertEquals(def.getRequiredType().tag(),reqType);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.accesscontrol.ImmutableACLTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHashCode() throws Exception {
  RestrictionProvider rp=getRestrictionProvider();
  ACE ace1=createEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_VERSION_MANAGEMENT),false);
  ACE ace2=createEntry(testPrincipal,testPrivileges,true);
  ACE ace2b=createEntry(testPrincipal,getAggregatedPrivileges(testPrivileges),true);
  JackrabbitAccessControlList acl=createACL(ace1,ace2);
  JackrabbitAccessControlList repoAcl=createACL((String)null,ace1,ace2);
  int hc=acl.hashCode();
  assertTrue(hc == createACL(ace1,ace2).hashCode());
  assertTrue(hc == createACL(ace1,ace2b).hashCode());
  assertTrue(repoAcl.hashCode() == createACL((String)null,ace1,ace2b).hashCode());
  assertFalse(hc == createACL(ace2,ace1).hashCode());
  assertFalse(hc == repoAcl.hashCode());
  assertFalse(hc == createEmptyACL().hashCode());
  assertFalse(hc == createACL("/anotherPath",ace1,ace2).hashCode());
  assertFalse(hc == new TestACL("/anotherPath",rp,ace1,ace2).hashCode());
  assertFalse(hc == new TestACL("/anotherPath",rp,ace1,ace2).hashCode());
  assertFalse(hc == new TestACL("/anotherPath",rp).hashCode());
  assertFalse(hc == new TestACL(getTestPath(),rp,ace1,ace2).hashCode());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsForEmpty() throws Exception {
  JackrabbitAccessControlList acl=createEmptyACL();
  assertEquals(acl,createEmptyACL());
  ACE entry=createEntry(testPrincipal,testPrivileges,true);
  assertFalse(acl.equals(createACL(entry)));
  assertFalse(acl.equals(new TestACL(getTestPath(),getRestrictionProvider(),Collections.<JackrabbitAccessControlEntry>emptyList())));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals() throws Exception {
  RestrictionProvider rp=getRestrictionProvider();
  ACE ace1=createEntry(testPrincipal,false,null,PrivilegeConstants.JCR_VERSION_MANAGEMENT);
  ACE ace2=createEntry(testPrincipal,testPrivileges,true);
  ACE ace2b=createEntry(testPrincipal,getAggregatedPrivileges(testPrivileges),true);
  JackrabbitAccessControlList acl=createACL(ace1,ace2);
  JackrabbitAccessControlList repoAcl=createACL((String)null,ace1,ace2);
  assertEquals(acl,createACL(ace1,ace2));
  assertEquals(acl,createACL(ace1,ace2b));
  assertEquals(repoAcl,createACL((String)null,ace1,ace2b));
  assertFalse(acl.equals(createACL(ace2,ace1)));
  assertFalse(acl.equals(repoAcl));
  assertFalse(acl.equals(createEmptyACL()));
  assertFalse(acl.equals(createACL("/anotherPath",ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp,ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp,ace1,ace2)));
  assertFalse(acl.equals(new TestACL("/anotherPath",rp)));
  assertFalse(acl.equals(new TestACL(getTestPath(),rp,ace1,ace2)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyIsImmutable() throws Exception {
  JackrabbitAccessControlList acl=createEmptyACL();
  assertTrue(acl.isEmpty());
  assertEquals(0,acl.size());
  assertEquals(getTestPath(),acl.getPath());
  assertImmutable(acl);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImmutable() throws Exception {
  List<ACE> entries=new ArrayList<ACE>();
  entries.add(createEntry(testPrincipal,testPrivileges,true));
  entries.add(createEntry(testPrincipal,privilegesFromNames(PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT),false));
  JackrabbitAccessControlList acl=createACL(entries);
  assertFalse(acl.isEmpty());
  assertEquals(2,acl.size());
  assertEquals(getTestPath(),acl.getPath());
  assertImmutable(acl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.AccessControlTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGranted(){
  for (  String acPath : acPaths) {
    assertFalse(pp.isGranted(root.getTree(acPath),null,Permissions.READ));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasPrivileges(){
  for (  String acPath : acPaths) {
    assertFalse(pp.hasPrivileges(root.getTree(acPath),PrivilegeConstants.JCR_READ));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrivileges(){
  for (  String acPath : acPaths) {
    assertTrue(pp.getPrivileges(root.getTree(acPath)).isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedPath(){
  for (  String acPath : acPaths) {
    assertFalse(pp.isGranted(acPath,Permissions.getString(Permissions.READ)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugAccessControlManagerTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetApplicablePolicies() throws Exception {
  AccessControlPolicyIterator it=cugAccessControlManager.getApplicablePolicies(SUPPORTED_PATH);
  assertTrue(it.hasNext());
  AccessControlPolicy policy=cugAccessControlManager.getApplicablePolicies(SUPPORTED_PATH).nextAccessControlPolicy();
  assertTrue(policy instanceof CugPolicyImpl);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemovePolicyPersisted() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  root.commit();
  cugAccessControlManager.removePolicy(SUPPORTED_PATH,cugAccessControlManager.getPolicies(SUPPORTED_PATH)[0]);
  root.commit();
  Tree tree=root.getTree(SUPPORTED_PATH);
  assertFalse(tree.hasChild(CugConstants.REP_CUG_POLICY));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicy() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cug.addPrincipals(EveryonePrincipal.getInstance());
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  AccessControlPolicy policy=policies[0];
  assertTrue(policy instanceof CugPolicyImpl);
  Set<Principal> principals=((CugPolicy)policy).getPrincipals();
  assertEquals(1,principals.size());
  assertEquals(EveryonePrincipal.getInstance(),principals.iterator().next());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetPolicyPersisted() throws Exception {
  CugPolicy cug=getApplicableCug(SUPPORTED_PATH);
  cug.addPrincipals(EveryonePrincipal.getInstance());
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,cug);
  root.commit();
  Tree tree=root.getTree(SUPPORTED_PATH);
  assertTrue(TreeUtil.isNodeType(tree,CugConstants.MIX_REP_CUG_MIXIN,root.getTree(NodeTypeConstants.NODE_TYPES_PATH)));
  Tree cugTree=tree.getChild(CugConstants.REP_CUG_POLICY);
  assertTrue(cugTree.exists());
  assertEquals(CugConstants.NT_REP_CUG_POLICY,TreeUtil.getPrimaryTypeName(cugTree));
  PropertyState prop=cugTree.getProperty(CugConstants.REP_PRINCIPAL_NAMES);
  assertNotNull(prop);
  assertTrue(prop.isArray());
  assertEquals(Type.STRINGS,prop.getType());
  assertEquals(1,prop.count());
  assertEquals(EveryonePrincipal.NAME,prop.getValue(Type.STRING,0));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetApplicablePoliciesAfterSet() throws Exception {
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,getApplicableCug(SUPPORTED_PATH));
  AccessControlPolicyIterator it=cugAccessControlManager.getApplicablePolicies(SUPPORTED_PATH);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetApplicablePoliciesUnsupportedPath() throws Exception {
  AccessControlPolicyIterator it=cugAccessControlManager.getApplicablePolicies(UNSUPPORTED_PATH);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterSet() throws Exception {
  cugAccessControlManager.setPolicy(SUPPORTED_PATH,getApplicableCug(SUPPORTED_PATH));
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof CugPolicyImpl);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetApplicablePoliciesNullPath() throws Exception {
  AccessControlPolicyIterator it=cugAccessControlManager.getApplicablePolicies((String)null);
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPoliciesAfterManualCreation() throws Exception {
  NodeUtil n=new NodeUtil(root.getTree(SUPPORTED_PATH));
  NodeUtil cug=n.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  AccessControlPolicy[] policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  assertEquals(1,policies.length);
  assertTrue(policies[0] instanceof CugPolicy);
  CugPolicy cugPolicy=(CugPolicy)policies[0];
  assertTrue(cugPolicy.getPrincipals().isEmpty());
  cug.setStrings(REP_PRINCIPAL_NAMES,"unknownPrincipalName",EveryonePrincipal.NAME);
  policies=cugAccessControlManager.getPolicies(SUPPORTED_PATH);
  cugPolicy=(CugPolicy)policies[0];
  assertEquals(2,cugPolicy.getPrincipals().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugConfigurationTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAccessControlManagerSupportedPaths(){
  ConfigurationParameters params=ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,true,CugConstants.PARAM_CUG_SUPPORTED_PATHS,"/content");
  CugConfiguration cc=createConfiguration(params);
  AccessControlManager acMgr=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertTrue(acMgr instanceof CugAccessControlManager);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAccessControlManagerNoSupportedPaths(){
  CugConfiguration cc=createConfiguration(ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,true));
  AccessControlManager acMgr=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertTrue(acMgr instanceof CugAccessControlManager);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAccessControlManagerDisabled(){
  CugConfiguration cc=createConfiguration(ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,false));
  AccessControlManager acMgr=cc.getAccessControlManager(root,NamePathMapper.DEFAULT);
  assertTrue(acMgr instanceof CugAccessControlManager);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPermissionProviderSupportedPaths(){
  ConfigurationParameters params=ConfigurationParameters.of(CugConstants.PARAM_CUG_ENABLED,true,CugConstants.PARAM_CUG_SUPPORTED_PATHS,"/content");
  CugConfiguration cc=createConfiguration(params);
  PermissionProvider pp=cc.getPermissionProvider(root,"default",ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
  assertTrue(pp instanceof CugPermissionProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugContextTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDefinesProperty(){
  Tree cugTree=root.getTree(CUG_PATH);
  PropertyState repPrincipalNames=cugTree.getProperty(CugConstants.REP_PRINCIPAL_NAMES);
  assertTrue(CugContext.INSTANCE.definesProperty(cugTree,repPrincipalNames));
  assertFalse(CugContext.INSTANCE.definesProperty(cugTree,cugTree.getProperty(JcrConstants.JCR_PRIMARYTYPE)));
  for (  String path : NO_CUG_PATH) {
    assertFalse(path,CugContext.INSTANCE.definesProperty(root.getTree(path),repPrincipalNames));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInvalidCug() throws Exception {
  PropertyState ps=PropertyStates.createProperty(CugConstants.REP_PRINCIPAL_NAMES,ImmutableSet.of(getTestUser().getPrincipal().getName()),Type.STRINGS);
  Tree invalidCug=new NodeUtil(root.getTree(UNSUPPORTED_PATH)).addChild(CugConstants.REP_CUG_POLICY,CugConstants.NT_REP_CUG_POLICY).getTree();
  invalidCug.setProperty(ps);
  assertTrue(CugContext.INSTANCE.definesContextRoot(invalidCug));
  assertTrue(CugContext.INSTANCE.definesTree(invalidCug));
  assertTrue(CugContext.INSTANCE.definesProperty(invalidCug,invalidCug.getProperty(CugConstants.REP_PRINCIPAL_NAMES)));
  invalidCug=new NodeUtil(root.getTree(UNSUPPORTED_PATH)).addChild(CugConstants.REP_CUG_POLICY,NT_OAK_UNSTRUCTURED).getTree();
  invalidCug.setProperty(ps);
  assertFalse(CugContext.INSTANCE.definesContextRoot(invalidCug));
  assertFalse(CugContext.INSTANCE.definesTree(invalidCug));
  assertFalse(CugContext.INSTANCE.definesProperty(invalidCug,invalidCug.getProperty(CugConstants.REP_PRINCIPAL_NAMES)));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDefinesTree(){
  assertTrue(CugContext.INSTANCE.definesTree(root.getTree(CUG_PATH)));
  for (  String path : NO_CUG_PATH) {
    assertFalse(path,CugContext.INSTANCE.definesTree(root.getTree(path)));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDefinesLocation() throws AccessDeniedException {
  assertTrue(CugContext.INSTANCE.definesLocation(TreeLocation.create(root,CUG_PATH)));
  assertTrue(CugContext.INSTANCE.definesLocation(TreeLocation.create(root,CUG_PATH + "/" + CugConstants.REP_PRINCIPAL_NAMES)));
  List<String> existingNoCug=ImmutableList.of("/content","/content/a","/content/rep:policy");
  for (  String path : existingNoCug) {
    assertFalse(path,CugContext.INSTANCE.definesLocation(TreeLocation.create(root,path)));
    assertFalse(path,CugContext.INSTANCE.definesLocation(TreeLocation.create(root,path + "/" + CugConstants.REP_PRINCIPAL_NAMES)));
  }
  List<String> nonExistingCug=ImmutableList.of("/content/rep:cugPolicy",UNSUPPORTED_PATH + "/rep:cugPolicy");
  for (  String path : nonExistingCug) {
    assertTrue(path,CugContext.INSTANCE.definesLocation(TreeLocation.create(root,path)));
    assertTrue(path,CugContext.INSTANCE.definesLocation(TreeLocation.create(root,path + "/" + CugConstants.REP_PRINCIPAL_NAMES)));
    assertFalse(path,CugContext.INSTANCE.definesLocation(TreeLocation.create(root,path + "/" + JcrConstants.JCR_PRIMARYTYPE)));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDefinesContextRoot(){
  assertTrue(CugContext.INSTANCE.definesContextRoot(root.getTree(CUG_PATH)));
  for (  String path : NO_CUG_PATH) {
    assertFalse(path,CugContext.INSTANCE.definesContextRoot(root.getTree(path)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugEvaluationTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrivilegesEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(EveryonePrincipal.getInstance());
  assertTrue(pp.getPrivileges(content).isEmpty());
  assertTrue(pp.getPrivileges(content2).isEmpty());
  assertTrue(pp.getPrivileges(a).isEmpty());
  assertTrue(pp.getPrivileges(c).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedTestGroup() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertTrue(pp.isGranted(content,null,Permissions.READ));
  assertTrue(pp.isGranted(a,null,Permissions.READ));
  assertFalse(pp.isGranted(c,null,Permissions.READ));
  assertTrue(pp.isGranted(content,null,Permissions.READ_ACCESS_CONTROL));
  assertTrue(pp.isGranted(a,null,Permissions.READ_ACCESS_CONTROL));
  assertTrue(pp.isGranted(c,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteAcl() throws Exception {
  ContentSession cs=createTestSession2();
  Root r=cs.getLatestRoot();
  try {
    Tree tree=r.getTree("/content/a/b/c");
    tree.setProperty(JCR_MIXINTYPES,ImmutableList.of(MIX_REP_CUG_MIXIN,AccessControlConstants.MIX_REP_ACCESS_CONTROLLABLE),Type.NAMES);
    tree.addChild(AccessControlConstants.REP_POLICY).setProperty(JCR_PRIMARYTYPE,AccessControlConstants.NT_REP_ACL,Type.NAME);
    r.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
 finally {
    r.refresh();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedTestUserEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  assertTrue(pp.isGranted(content,null,Permissions.READ));
  assertFalse(pp.isGranted(a,null,Permissions.READ));
  assertTrue(pp.isGranted(c,null,Permissions.READ));
  assertFalse(pp.isGranted(content,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(a,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(c,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRead() throws Exception {
  List<String> noAccess=ImmutableList.of("/",UNSUPPORTED_PATH,"/content/a","/content/a/b","/content/aa/bb","/content2");
  for (  String p : noAccess) {
    assertFalse(p,testRoot.getTree(p).exists());
  }
  List<String> readAccess=ImmutableList.of("/content","/content/subtree","/content/a/b/c","/content/aa");
  for (  String p : readAccess) {
    assertTrue(p,testRoot.getTree(p).exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(EveryonePrincipal.getInstance());
  assertFalse(pp.isGranted(content,null,Permissions.READ));
  assertFalse(pp.isGranted(content2,null,Permissions.READ));
  assertFalse(pp.isGranted(a,null,Permissions.READ));
  assertFalse(pp.isGranted(c,null,Permissions.READ));
  assertFalse(pp.isGranted(content,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(content2,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(a,null,Permissions.READ_ACCESS_CONTROL));
  assertFalse(pp.isGranted(c,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadCug2() throws Exception {
  ContentSession cs=createTestSession2();
  try {
    Root r=cs.getLatestRoot();
    assertTrue(r.getTree("/content/a/rep:cugPolicy").exists());
    assertFalse(r.getTree("/content2/rep:cugPolicy").exists());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWrite2() throws Exception {
  ContentSession cs=createTestSession2();
  Root r=cs.getLatestRoot();
  try {
    PermissionProvider pp=createPermissionProvider(cs);
    assertTrue(pp.isGranted(root.getTree("/content/writeTest"),null,Permissions.ADD_NODE));
    assertTrue(pp.isGranted(root.getTree("/content/a/b/c/writeTest"),null,Permissions.ADD_NODE));
    List<String> paths=ImmutableList.of("/content","/content/a/b/c");
    for (    String p : paths) {
      NodeUtil content=new NodeUtil(r.getTree(p));
      content.addChild("writeTest",NT_OAK_UNSTRUCTURED);
      r.commit();
    }
  }
  finally {
    r.refresh();
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedTestGroupEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal,EveryonePrincipal.getInstance());
  assertTrue(pp.isGranted(content,null,Permissions.READ));
  assertTrue(pp.isGranted(a,null,Permissions.READ));
  assertTrue(pp.isGranted(c,null,Permissions.READ));
  assertTrue(pp.isGranted(content,null,Permissions.READ_ACCESS_CONTROL));
  assertTrue(pp.isGranted(a,null,Permissions.READ_ACCESS_CONTROL));
  assertTrue(pp.isGranted(c,null,Permissions.READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteCug() throws Exception {
  ContentSession cs=createTestSession2();
  Root r=cs.getLatestRoot();
  try {
    Tree tree=r.getTree("/content/a/rep:cugPolicy");
    tree.setProperty(REP_PRINCIPAL_NAMES,ImmutableList.of(EveryonePrincipal.NAME,testGroupPrincipal.getName()),Type.STRINGS);
    r.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessViolation());
  }
 finally {
    r.refresh();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAllPrivileges() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertFalse(pp.hasPrivileges(content,PrivilegeConstants.JCR_ALL));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.JCR_ALL));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.JCR_ALL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadAcl2() throws Exception {
  ContentSession cs=createTestSession2();
  try {
    Root r=cs.getLatestRoot();
    assertTrue(r.getTree("/content/rep:policy").exists());
  }
  finally {
    cs.close();
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadCug() throws Exception {
  List<String> noAccess=ImmutableList.of("/content/a/rep:cugPolicy","/content/aa/bb/rep:cugPolicy","/content2/rep:cugPolicy");
  for (  String p : noAccess) {
    assertFalse(p,testRoot.getTree(p).exists());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestGroupEveryone() throws Exception {
  Set<String> r_w_rac=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal,EveryonePrincipal.getInstance());
  assertEquals(r_w_rac,pp.getPrivileges(content));
  assertEquals(r_w_rac,pp.getPrivileges(a));
  assertEquals(r_w_rac,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestUserEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  Set<String> r=ImmutableSet.of(PrivilegeConstants.JCR_READ);
  assertEquals(r,pp.getPrivileges(content));
  assertEquals(r,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(a).isEmpty());
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrivilegesTestGroup() throws Exception {
  Set<String> w_rac=ImmutableSet.of(PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  Set<String> r_w_rac=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL);
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertEquals(r_w_rac,pp.getPrivileges(content));
  assertEquals(r_w_rac,pp.getPrivileges(a));
  assertEquals(w_rac,pp.getPrivileges(c));
  assertTrue(pp.getPrivileges(content2).isEmpty());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWrite() throws Exception {
  List<String> readOnly=ImmutableList.of("/content","/content/a/b/c");
  for (  String p : readOnly) {
    try {
      NodeUtil content=new NodeUtil(testRoot.getTree(p));
      content.addChild("writeTest",NT_OAK_UNSTRUCTURED);
      testRoot.commit();
      fail();
    }
 catch (    CommitFailedException e) {
      assertTrue(e.isAccessViolation());
    }
 finally {
      testRoot.refresh();
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(EveryonePrincipal.getInstance());
  assertFalse(pp.hasPrivileges(content,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(content2,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(content,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(content2,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesTestUserEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(content,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(a,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAllPrivileges2() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  AccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/content/a");
  acl.addAccessControlEntry(testGroupPrincipal,privilegesFromNames(PrivilegeConstants.JCR_ALL));
  acMgr.setPolicy("/content/a",acl);
  root.commit();
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertFalse(pp.hasPrivileges(root.getTree("/content"),PrivilegeConstants.JCR_ALL));
  assertTrue(pp.hasPrivileges(root.getTree("/content/a"),PrivilegeConstants.JCR_ALL));
  assertTrue(pp.hasPrivileges(root.getTree("/content/a/b"),PrivilegeConstants.JCR_ALL));
  assertFalse(pp.hasPrivileges(root.getTree("/content/a/b/c"),PrivilegeConstants.JCR_ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesTestGroup() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal);
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(c,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAllPrivilegesAdmin() throws Exception {
  PermissionProvider pp=createPermissionProvider(adminSession);
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.JCR_ALL));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.JCR_ALL));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.JCR_ALL));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivilegesTestGroupEveryone() throws Exception {
  PermissionProvider pp=createPermissionProvider(testGroupPrincipal,EveryonePrincipal.getInstance());
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.JCR_READ));
  assertTrue(pp.hasPrivileges(content,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertTrue(pp.hasPrivileges(a,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
  assertTrue(pp.hasPrivileges(c,PrivilegeConstants.REP_WRITE,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadAcl() throws Exception {
  assertFalse(testRoot.getTree("/content/rep:policy").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugExcludeDefaultTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMixedPrincipals(){
  Set<Principal> principals=new HashSet<Principal>();
  principals.add(new PrincipalImpl("test"));
  principals.add(new SystemUserPrincipal(){
    @Override public String getName(){
      return "test";
    }
  }
);
  assertTrue(exclude.isExcluded(principals));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPrincipals(){
  Set<Principal> principals=new HashSet<Principal>();
  principals.add(new PrincipalImpl("test"));
  principals.add(new ItemBasedPrincipal(){
    @Override public String getPath(){
      return "/path";
    }
    @Override public String getName(){
      return "test";
    }
  }
);
  assertFalse(exclude.isExcluded(principals));
  for (  Principal p : principals) {
    assertFalse(exclude.isExcluded(ImmutableSet.of(p)));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEmptyPrincipalSet(){
  assertTrue(exclude.isExcluded(ImmutableSet.<Principal>of()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSystemPrincipal(){
  Set<Principal> principals=ImmutableSet.<Principal>of(SystemPrincipal.INSTANCE);
  assertTrue(exclude.isExcluded(principals));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAdminPrincipal(){
  Set<Principal> principals=ImmutableSet.<Principal>of(new AdminPrincipal(){
    @Override public String getName(){
      return "admin";
    }
  }
);
  assertTrue(exclude.isExcluded(principals));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSystemUserPrincipal(){
  Set<Principal> principals=ImmutableSet.<Principal>of(new SystemUserPrincipal(){
    @Override public String getName(){
      return "test";
    }
  }
);
  assertTrue(exclude.isExcluded(principals));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugExcludeImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEmpty(){
  assertFalse(exclude.isExcluded(principals));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testExcludeAnother(){
  Map<String,Object> m=ImmutableMap.<String,Object>of("principalNames",new String[]{"a","b","c","test"});
  activate(m);
  assertFalse(exclude.isExcluded(ImmutableSet.<Principal>of(new PrincipalImpl("another"))));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEmpty2(){
  activate(Collections.<String,Object>emptyMap());
  assertFalse(exclude.isExcluded(principals));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testExcludeTest(){
  Map<String,Object> m=ImmutableMap.<String,Object>of("principalNames",new String[]{"a","b","c","test"});
  activate(m);
  assertTrue(exclude.isExcluded(principals));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugImportBaseTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCugValidPrincipalsNoMixin() throws Exception {
  testGroup=((JackrabbitSession)adminSession).getUserManager().createGroup(new PrincipalImpl(TEST_GROUP_PRINCIPAL_NAME));
  adminSession.save();
  doImport(getTargetPath(),XML_CUG_POLICY);
  try {
    adminSession.save();
    fail();
  }
 catch (  AccessControlException e) {
    Throwable cause=e.getCause();
    assertTrue(cause instanceof CommitFailedException);
    assertTrue(((CommitFailedException)cause).isAccessControlViolation());
    assertEquals(22,((CommitFailedException)cause).getCode());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNestedCugSave() throws Exception {
  getTargetNode().addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),XML_NESTED_CUG_POLICY);
  assertTrue(getTargetNode().hasNode(CugConstants.REP_CUG_POLICY));
  Node cugPolicy=getTargetNode().getNode(CugConstants.REP_CUG_POLICY);
  assertTrue(cugPolicy.hasProperty(CugConstants.REP_PRINCIPAL_NAMES));
  assertFalse(cugPolicy.hasNode(CugConstants.REP_CUG_POLICY));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCugAtUnsupportedPath() throws Exception {
  doImport("/",XML_CHILD_WITH_CUG);
  getImportSession().save();
  assertTrue(getImportSession().getRootNode().hasNode("child"));
  assertFalse(getImportSession().getRootNode().hasNode("child/rep:cugPolicy"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCugWithEmptyPrincipalNames() throws Exception {
  String xmlCugPolicyEmptyPrincipals="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"rep:cugPolicy\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "<sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:CugPolicy</sv:value></sv:property>"+ "<sv:property sv:name=\"rep:principalNames\" sv:type=\"String\" sv:multiple=\"true\"></sv:property>"+ "</sv:node>";
  getTargetNode().addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),xmlCugPolicyEmptyPrincipals);
  getImportSession().save();
  String propPath=getTargetPath() + "/" + CugConstants.REP_CUG_POLICY+ "/"+ CugConstants.REP_PRINCIPAL_NAMES;
  assertTrue(getImportSession().propertyExists(propPath));
  assertArrayEquals(new Value[0],getImportSession().getProperty(propPath).getValues());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCugWithoutPrincipalNames() throws Exception {
  String xmlCugPolicyWithoutPrincipals="<?xml version=\"1.0\" encoding=\"UTF-8\"?>" + "<sv:node sv:name=\"rep:cugPolicy\" xmlns:mix=\"http://www.jcp.org/jcr/mix/1.0\" xmlns:nt=\"http://www.jcp.org/jcr/nt/1.0\" xmlns:fn_old=\"http://www.w3.org/2004/10/xpath-functions\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:sv=\"http://www.jcp.org/jcr/sv/1.0\" xmlns:rep=\"internal\" xmlns:jcr=\"http://www.jcp.org/jcr/1.0\">" + "<sv:property sv:name=\"jcr:primaryType\" sv:type=\"Name\"><sv:value>rep:CugPolicy</sv:value></sv:property>"+ "</sv:node>";
  doImport(getTargetPath(),xmlCugPolicyWithoutPrincipals);
  assertFalse(getTargetNode().hasNode(CugConstants.REP_CUG_POLICY));
  getImportSession().save();
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNestedCugWithMixin() throws Exception {
  getTargetNode().addMixin(CugConstants.MIX_REP_CUG_MIXIN);
  doImport(getTargetPath(),XML_NESTED_CUG_POLICY);
  assertTrue(getTargetNode().hasNode(CugConstants.REP_CUG_POLICY));
  Node cugPolicy=getTargetNode().getNode(CugConstants.REP_CUG_POLICY);
  assertTrue(cugPolicy.hasProperty(CugConstants.REP_PRINCIPAL_NAMES));
  assertFalse(cugPolicy.hasNode(CugConstants.REP_CUG_POLICY));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugPermissionProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#isGranted(String,String)
 */
@Test public void testIsGrantedJcrActionsNonExistingPath(){
  String p="/path/to/non/existing/tree";
  assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ));
  assertFalse(cugPermProvider.isGranted(p,Permissions.getString(Permissions.READ_NODE)));
  assertFalse(cugPermProvider.isGranted(p,Permissions.getString(Permissions.READ_PROPERTY)));
  assertFalse(cugPermProvider.isGranted(p,Session.ACTION_ADD_NODE));
  assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ + ',' + Session.ACTION_ADD_NODE));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see PermissionProvider#getPrivileges(org.apache.jackrabbit.oak.api.Tree)
 */
@Test public void testGetPrivilegesAtCug2(){
  PermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH),testGroupPrincipal);
  Set<String> expected=ImmutableSet.of(PrivilegeConstants.JCR_READ,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES);
  assertEquals(expected,pp.getPrivileges(root.getTree("/content/a")));
  assertEquals(expected,pp.getPrivileges(root.getTree("/content/aa/bb")));
  assertTrue(pp.getPrivileges(root.getTree("/content/a/b/c")).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#isGranted(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testIsGrantedRead(){
  for (  String p : NOT_READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertFalse(cugPermProvider.isGranted(tree,null,Permissions.READ));
      assertFalse(cugPermProvider.isGranted(tree,tree.getProperty(JCR_PRIMARYTYPE),Permissions.READ_PROPERTY));
    }
  }
  for (  String p : READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertTrue(cugPermProvider.isGranted(tree,null,Permissions.READ));
      assertTrue(cugPermProvider.isGranted(tree,null,Permissions.READ_NODE));
      assertTrue(cugPermProvider.isGranted(tree,tree.getProperty(JCR_PRIMARYTYPE),Permissions.READ_PROPERTY));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#hasPrivileges(org.apache.jackrabbit.oak.api.Tree,String)
 */
@Test public void testHasReadPrivilegesAtCug(){
  for (  String p : READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertTrue(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_READ));
      assertTrue(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES));
      assertTrue(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_PROPERTIES));
      assertTrue(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see PermissionProvider#getTreePermission(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.spi.security.authorization.permission.TreePermission)
 */
@Test public void testGetTreePermissions() throws AccessDeniedException {
  TreePermission rootTp=cugPermProvider.getTreePermission(root.getTree("/"),TreePermission.EMPTY);
  assertTrue(rootTp instanceof EmptyCugTreePermission);
  TreePermission contentTp=cugPermProvider.getTreePermission(root.getTree(SUPPORTED_PATH),rootTp);
  assertTrue(contentTp instanceof CugTreePermission);
  TreePermission aTp=cugPermProvider.getTreePermission(root.getTree("/content/a"),contentTp);
  assertTrue(aTp instanceof CugTreePermission);
  TreePermission bTp=cugPermProvider.getTreePermission(root.getTree("/content/a/b"),aTp);
  assertTrue(bTp instanceof CugTreePermission);
  TreePermission cTp=cugPermProvider.getTreePermission(root.getTree("/content/a/b/c"),bTp);
  assertTrue(cTp instanceof CugTreePermission);
  TreePermission aaTp=cugPermProvider.getTreePermission(root.getTree("/content/aa"),contentTp);
  assertTrue(aaTp instanceof CugTreePermission);
  TreePermission bbTp=cugPermProvider.getTreePermission(root.getTree("/content/aa/bb"),aaTp);
  assertTrue(bbTp instanceof CugTreePermission);
  TreePermission ccTp=cugPermProvider.getTreePermission(root.getTree("/content/aa/bb/cc"),bbTp);
  assertTrue(ccTp instanceof CugTreePermission);
  Tree aaTree=root.getTree("/content/aa");
  new NodeUtil(aaTree).addChild(CugConstants.REP_CUG_POLICY,NT_OAK_UNSTRUCTURED);
  TreePermission aaTp2=cugPermProvider.getTreePermission(root.getTree("/content/aa"),contentTp);
  assertTrue(aaTp2 instanceof CugTreePermission);
  TreePermission falseCugTp=cugPermProvider.getTreePermission(root.getTree("/content/aa/rep:cugPolicy"),aaTp2);
  assertNotSame(TreePermission.EMPTY,falseCugTp);
  TreePermission cugTp=cugPermProvider.getTreePermission(root.getTree("/content/a/rep:cugPolicy"),aTp);
  assertSame(TreePermission.NO_RECOURSE,cugTp);
  TreePermission jcrSystemTp=cugPermProvider.getTreePermission(root.getTree("/jcr:system"),rootTp);
  assertTrue(jcrSystemTp instanceof EmptyCugTreePermission);
  assertSame(TreePermission.NO_RECOURSE,cugPermProvider.getTreePermission(root.getTree(NodeTypeConstants.NODE_TYPES_PATH),jcrSystemTp));
  TreePermission unsupportedPathTp=cugPermProvider.getTreePermission(root.getTree(UNSUPPORTED_PATH),rootTp);
  assertSame(TreePermission.NO_RECOURSE,unsupportedPathTp);
  try {
    cugPermProvider.getTreePermission(root.getTree(UNSUPPORTED_PATH + "/child"),unsupportedPathTp);
    fail();
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#isGranted(org.apache.jackrabbit.oak.plugins.tree.TreeLocation,long)
 */
@Test public void testIsGrantedByLocation() throws Exception {
  for (  String p : NOT_READABLE_PATHS) {
    TreeLocation location=TreeLocation.create(root,p);
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ));
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ_NODE));
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ_PROPERTY));
    assertFalse(cugPermProvider.isGranted(location,Permissions.ALL));
    assertFalse(cugPermProvider.isGranted(location,Permissions.ADD_NODE));
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ_ACCESS_CONTROL));
  }
  for (  String p : READABLE_PATHS) {
    TreeLocation location=TreeLocation.create(root,p);
    assertTrue(cugPermProvider.isGranted(location,Permissions.READ));
    assertTrue(cugPermProvider.isGranted(location,Permissions.READ_NODE));
    assertTrue(cugPermProvider.isGranted(location,Permissions.READ_PROPERTY));
    assertFalse(cugPermProvider.isGranted(location,Permissions.ALL));
    assertFalse(cugPermProvider.isGranted(location,Permissions.ADD_NODE));
    assertFalse(cugPermProvider.isGranted(location,Permissions.READ_ACCESS_CONTROL));
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
/** 
 * @see PermissionProvider#getPrivileges(org.apache.jackrabbit.oak.api.Tree)
 */
@Test public void getPrivileges(){
  for (  String p : NOT_READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertTrue(cugPermProvider.getPrivileges(root.getTree(p)).isEmpty());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#isGranted(org.apache.jackrabbit.oak.plugins.tree.TreeLocation,long)
 */
@Test public void testIsGrantedNonExistingLocation() throws Exception {
  ContentSession anonymous=login(new GuestCredentials());
  try {
    Root anonymousRoot=anonymous.getLatestRoot();
    for (    Root r : new Root[]{anonymousRoot,root}) {
      TreeLocation location=TreeLocation.create(r,"/path/to/non/existing/tree");
      assertFalse(cugPermProvider.isGranted(location,Permissions.READ));
      assertFalse(cugPermProvider.isGranted(location,Permissions.READ_NODE));
      assertFalse(cugPermProvider.isGranted(location,Permissions.READ_PROPERTY));
      assertFalse(cugPermProvider.isGranted(location,Permissions.ALL));
      assertFalse(cugPermProvider.isGranted(location,Permissions.ADD_NODE));
      assertFalse(cugPermProvider.isGranted(location,Permissions.READ_ACCESS_CONTROL));
    }
  }
  finally {
    anonymous.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPrivileges(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBits)
 */
@Test public void testSupportedPrivileges(){
  PrivilegeBits readBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_READ);
  PrivilegeBits readNodeBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES);
  PrivilegeBits readPropBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_PROPERTIES);
  PrivilegeBitsProvider provider=new PrivilegeBitsProvider(root);
  for (  String path : PATH_INCUG_MAP.keySet()) {
    boolean isInCug=PATH_INCUG_MAP.get(path);
    Tree tree=root.getTree(path);
    if (isInCug) {
      assertPrivilegeBits(readBits,cugPermProvider.supportedPrivileges(tree,readBits));
      assertPrivilegeBits(readNodeBits,cugPermProvider.supportedPrivileges(tree,readNodeBits));
      assertPrivilegeBits(readPropBits,cugPermProvider.supportedPrivileges(tree,readPropBits));
      assertPrivilegeBits(readBits,cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.JCR_ALL)));
      assertPrivilegeBits(readNodeBits,cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)));
    }
 else {
      assertTrue(cugPermProvider.supportedPrivileges(tree,readBits).isEmpty());
      assertTrue(cugPermProvider.supportedPrivileges(tree,readNodeBits).isEmpty());
      assertTrue(cugPermProvider.supportedPrivileges(tree,readPropBits).isEmpty());
      assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.JCR_ALL)).isEmpty());
      assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)).isEmpty());
    }
    assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.REP_WRITE)).isEmpty());
    assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_NODE)).isEmpty());
    assertTrue(cugPermProvider.supportedPrivileges(tree,provider.getBits(PrivilegeConstants.JCR_READ_ACCESS_CONTROL)).isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see org.apache.jackrabbit.oak.spi.security.authorization.permission.AggregatedPermissionProvider#supportedPrivileges(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBits)
 */
@Test public void testSupportedPrivilegesForNullTree(){
  PrivilegeBits readBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.JCR_READ);
  PrivilegeBits readNodeBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES);
  PrivilegeBits readPropBits=PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_PROPERTIES);
  PrivilegeBitsProvider provider=new PrivilegeBitsProvider(root);
  assertTrue(cugPermProvider.supportedPrivileges(null,readBits).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,readNodeBits).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,readPropBits).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.JCR_ALL)).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.JCR_READ_ACCESS_CONTROL)).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.REP_WRITE)).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.JCR_ADD_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_CHILD_NODES,PrivilegeConstants.JCR_REMOVE_NODE)).isEmpty());
  assertTrue(cugPermProvider.supportedPrivileges(null,provider.getBits(PrivilegeConstants.JCR_READ_ACCESS_CONTROL)).isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#hasPrivileges(org.apache.jackrabbit.oak.api.Tree,String)
 */
@Test public void testHasNonReadPrivileges(){
  for (  String p : Iterables.concat(READABLE_PATHS,NOT_READABLE_PATHS)) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_WRITE));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_READ,PrivilegeConstants.JCR_LIFECYCLE_MANAGEMENT));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_READ_ACCESS_CONTROL));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_ALL));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#hasPrivileges(org.apache.jackrabbit.oak.api.Tree,String)
 */
@Test public void testHasReadPrivileges(){
  for (  String p : NOT_READABLE_PATHS) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.JCR_READ));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_PROPERTIES));
      assertFalse(cugPermProvider.hasPrivileges(tree,PrivilegeConstants.REP_READ_NODES,PrivilegeConstants.REP_READ_PROPERTIES));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#isGranted(String,String)
 */
@Test public void testIsGrantedJcrActions(){
  for (  String p : NOT_READABLE_PATHS) {
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ));
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_ADD_NODE));
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ + ',' + Session.ACTION_ADD_NODE));
  }
  for (  String p : READABLE_PATHS) {
    assertTrue(cugPermProvider.isGranted(p,Session.ACTION_READ));
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_ADD_NODE));
    assertFalse(cugPermProvider.isGranted(p,Session.ACTION_READ + ',' + Session.ACTION_ADD_NODE));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * @see PermissionProvider#isGranted(org.apache.jackrabbit.oak.api.Tree,org.apache.jackrabbit.oak.api.PropertyState,long)
 */
@Test public void testIsGrantedNonRead(){
  for (  String p : Iterables.concat(READABLE_PATHS,NOT_READABLE_PATHS)) {
    Tree tree=root.getTree(p);
    if (tree.exists()) {
      assertFalse(cugPermProvider.isGranted(tree,null,Permissions.ALL));
      assertFalse(cugPermProvider.isGranted(tree,null,Permissions.READ | Permissions.READ_ACCESS_CONTROL));
      assertFalse(cugPermProvider.isGranted(tree,null,Permissions.REMOVE_NODE));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * @see PermissionProvider#hasPrivileges(org.apache.jackrabbit.oak.api.Tree,String)
 */
@Test public void testHasPrivilegesNullPath(){
  assertFalse(cugPermProvider.hasPrivileges(null,PrivilegeConstants.JCR_READ));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * @see PermissionProvider#getPrivileges(org.apache.jackrabbit.oak.api.Tree)
 */
@Test public void testGetPrivilegesNullPath(){
  assertTrue(cugPermProvider.getPrivileges(null).isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugPolicyImplTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddNullPrincipal() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.ABORT,principals);
  assertTrue(cug.addPrincipals(EveryonePrincipal.getInstance(),null));
  assertTrue(cug.getPrincipals().contains(EveryonePrincipal.getInstance()));
  assertTrue(cug.getPrincipals().contains(testPrincipal));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipals(){
  CugPolicyImpl cug=createCugPolicy(principals);
  Set<Principal> principalSet=cug.getPrincipals();
  assertFalse(principalSet.isEmpty());
  assertEquals(principals,principalSet);
  assertNotSame(principals,principalSet);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPrincipalSetPolicy(){
  assertTrue(createCugPolicy(principals) instanceof PrincipalSetPolicy);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddInvalidPrincipalsBestEffort() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT,principals);
  assertTrue(cug.addPrincipals(EveryonePrincipal.getInstance(),new PrincipalImpl("unknown")));
  Set<Principal> principalSet=cug.getPrincipals();
  assertEquals(3,principalSet.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipalNames(){
  CugPolicyImpl cug=createCugPolicy(principals);
  Iterator<String> it=cug.getPrincipalNames().iterator();
  assertTrue(it.hasNext());
  assertEquals("test",it.next());
  assertFalse(it.hasNext());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddContainedPrincipal() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT,principals);
  assertFalse(cug.addPrincipals(new PrincipalImpl("test")));
  assertEquals(principals,cug.getPrincipals());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddPrincipals() throws Exception {
  CugPolicy empty=createEmptyCugPolicy();
  assertTrue(empty.addPrincipals(EveryonePrincipal.getInstance()));
  assertFalse(empty.addPrincipals(EveryonePrincipal.getInstance()));
  CugPolicy cug=createCugPolicy(principals);
  assertTrue(cug.addPrincipals(EveryonePrincipal.getInstance()));
  assertFalse(cug.addPrincipals(EveryonePrincipal.getInstance()));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemoveNullPrincipal() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.ABORT,principals);
  assertTrue(cug.removePrincipals(testPrincipal,null));
  assertTrue(cug.getPrincipals().isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddInvalidPrincipalsIgnore() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.IGNORE,principals);
  assertTrue(cug.addPrincipals(new PrincipalImpl("unknown"),EveryonePrincipal.getInstance()));
  Set<Principal> principalSet=cug.getPrincipals();
  assertEquals(2,principalSet.size());
  assertFalse(principalSet.contains(new PrincipalImpl("unknown")));
  assertFalse(principalSet.contains(new PrincipalImpl("")));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrincipalNames2(){
  CugPolicyImpl empty=createEmptyCugPolicy();
  assertFalse(empty.getPrincipalNames().iterator().hasNext());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testGetPrincipals2(){
  CugPolicyImpl empty=createEmptyCugPolicy();
  assertTrue(empty.getPrincipals().isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRemovePrincipals() throws Exception {
  CugPolicy cug=new CugPolicyImpl(path,NamePathMapper.DEFAULT,principalManager,ImportBehavior.BESTEFFORT,ImmutableSet.of(testPrincipal,EveryonePrincipal.getInstance()));
  assertFalse(cug.removePrincipals(new PrincipalImpl("unknown")));
  assertTrue(cug.removePrincipals(testPrincipal,EveryonePrincipal.getInstance(),new PrincipalImpl("unknown")));
  assertTrue(cug.getPrincipals().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugTreePermissionTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted(){
  assertFalse(allowedTp.isGranted(Permissions.ALL));
  assertFalse(allowedTp.isGranted(Permissions.WRITE));
  assertTrue(allowedTp.isGranted(Permissions.READ_NODE));
  assertFalse(deniedTp.isGranted(Permissions.ALL));
  assertFalse(deniedTp.isGranted(Permissions.WRITE));
  assertFalse(deniedTp.isGranted(Permissions.READ_NODE));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsInCugChild() throws Exception {
  String childPath=SUPPORTED_PATH + "/subtree";
  CugTreePermission tp=getCugTreePermission(childPath);
  assertTrue(tp.isInCug());
  tp=getCugTreePermission(childPath,getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  assertTrue(tp.isInCug());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty(){
  PropertyState ps=PropertyStates.createProperty("prop","val");
  assertFalse(allowedTp.isGranted(Permissions.ALL,ps));
  assertFalse(allowedTp.isGranted(Permissions.WRITE,ps));
  assertTrue(allowedTp.isGranted(Permissions.READ_PROPERTY,ps));
  assertFalse(deniedTp.isGranted(Permissions.ALL,ps));
  assertFalse(deniedTp.isGranted(Permissions.WRITE,ps));
  assertFalse(deniedTp.isGranted(Permissions.READ_PROPERTY,ps));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCanReadProperties(){
  assertTrue(allowedTp.canReadProperties());
  assertFalse(deniedTp.canReadProperties());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsInCugNestedCug() throws Exception {
  String childPath=SUPPORTED_PATH + "/subtree";
  createCug(childPath,EveryonePrincipal.getInstance());
  root.commit();
  CugTreePermission tp=getCugTreePermission(childPath);
  assertTrue(tp.isInCug());
  tp=getCugTreePermission(childPath,getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  assertTrue(tp.isInCug());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsAllowNestedCug() throws Exception {
  String childPath=SUPPORTED_PATH + "/subtree";
  CugTreePermission tp=getCugTreePermission(childPath);
  assertFalse(tp.isAllow());
  tp=getCugTreePermission(childPath,getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  assertTrue(tp.isAllow());
  createCug(childPath,EveryonePrincipal.getInstance());
  root.commit();
  tp=getCugTreePermission(childPath);
  assertFalse(tp.isAllow());
  tp=getCugTreePermission(childPath,getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  assertTrue(tp.isAllow());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsInCugSupportedPathWithoutCug() throws Exception {
  NodeUtil node=new NodeUtil(root.getTree(SUPPORTED_PATH2));
  Tree c1=node.addChild("c1",NT_OAK_UNSTRUCTURED).getTree();
  Tree c2=node.addChild("c2",NT_OAK_UNSTRUCTURED).getTree();
  String cugPath=c2.getPath();
  createCug(cugPath,getTestGroupPrincipal());
  root.commit();
  assertTrue(getCugTreePermission(cugPath).isInCug());
  assertFalse(getCugTreePermission(c1.getPath()).isInCug());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildPermission() throws Exception {
  NodeState ns=((AbstractTree)root.getTree(SUPPORTED_PATH + "/subtree")).getNodeState();
  TreePermission child=allowedTp.getChildPermission("subtree",ns);
  assertTrue(child instanceof CugTreePermission);
  child=deniedTp.getChildPermission("subtree",ns);
  assertTrue(child instanceof CugTreePermission);
  NodeState cugNs=((AbstractTree)root.getTree(PathUtils.concat(SUPPORTED_PATH,REP_CUG_POLICY))).getNodeState();
  TreePermission cugChild=allowedTp.getChildPermission(REP_CUG_POLICY,cugNs);
  assertSame(TreePermission.NO_RECOURSE,cugChild);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsAllow() throws Exception {
  assertTrue(allowedTp.isAllow());
  assertFalse(deniedTp.isAllow());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testHasNested(){
  CugTreePermission tp=getCugTreePermission(SUPPORTED_PATH);
  assertFalse(tp.hasNestedCug());
  String childPath=SUPPORTED_PATH + "/subtree";
  tp=getCugTreePermission(childPath);
  assertFalse(tp.hasNestedCug());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCanReadAll(){
  assertFalse(allowedTp.canReadAll());
  assertFalse(deniedTp.canReadAll());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsInCug(){
  assertTrue(allowedTp.isInCug());
  assertTrue(deniedTp.isInCug());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCanRead(){
  assertTrue(allowedTp.canRead());
  assertFalse(deniedTp.canRead());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCanReadProperty(){
  PropertyState ps=PropertyStates.createProperty("prop","val");
  assertTrue(allowedTp.canRead(ps));
  assertFalse(deniedTp.canRead(ps));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testHasNestedWithNestedCug() throws Exception {
  String childPath=SUPPORTED_PATH + "/subtree";
  createCug(childPath,EveryonePrincipal.getInstance());
  root.commit();
  CugTreePermission tp=getCugTreePermission(SUPPORTED_PATH);
  assertTrue(tp.hasNestedCug());
  tp=getCugTreePermission(childPath);
  assertFalse(tp.hasNestedCug());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugUtilTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDefinesCug() throws Exception {
  assertFalse(CugUtil.definesCug(root.getTree(PathUtils.concat(INVALID_PATH,REP_CUG_POLICY))));
  assertTrue(CugUtil.definesCug(root.getTree(PathUtils.concat(SUPPORTED_PATH,REP_CUG_POLICY))));
  Tree invalid=new NodeUtil(root.getTree(SUPPORTED_PATH2)).addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree();
  assertFalse(CugUtil.definesCug(invalid));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasCugNodeBuilder() throws Exception {
  assertTrue(CugUtil.hasCug(getNodeState(root.getTree(SUPPORTED_PATH)).builder()));
  assertFalse(CugUtil.hasCug((NodeBuilder)null));
  for (  String path : new String[]{PathUtils.ROOT_PATH,INVALID_PATH,UNSUPPORTED_PATH,SUPPORTED_PATH + "/subtree",SUPPORTED_PATH2,SUPPORTED_PATH3}) {
    assertFalse(CugUtil.hasCug(getNodeState(root.getTree(path)).builder()));
  }
  new NodeUtil(root.getTree(SUPPORTED_PATH2)).addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  assertTrue(CugUtil.hasCug(getNodeState(root.getTree(SUPPORTED_PATH2)).builder()));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsSupportedPath(){
  assertFalse(CugUtil.isSupportedPath(null,CUG_CONFIG));
  assertFalse(CugUtil.isSupportedPath(UNSUPPORTED_PATH,CUG_CONFIG));
  assertTrue(CugUtil.isSupportedPath(SUPPORTED_PATH,CUG_CONFIG));
  assertTrue(CugUtil.isSupportedPath(SUPPORTED_PATH2,CUG_CONFIG));
  assertTrue(CugUtil.isSupportedPath(SUPPORTED_PATH + "/child",CUG_CONFIG));
  assertTrue(CugUtil.isSupportedPath(SUPPORTED_PATH2 + "/child",CUG_CONFIG));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasCugNodeState() throws Exception {
  assertTrue(CugUtil.hasCug(getNodeState(root.getTree(SUPPORTED_PATH))));
  assertFalse(CugUtil.hasCug((NodeState)null));
  for (  String path : new String[]{PathUtils.ROOT_PATH,INVALID_PATH,UNSUPPORTED_PATH,SUPPORTED_PATH + "/subtree",SUPPORTED_PATH2,SUPPORTED_PATH3}) {
    assertFalse(CugUtil.hasCug(getNodeState(root.getTree(path))));
  }
  new NodeUtil(root.getTree(SUPPORTED_PATH2)).addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  assertTrue(CugUtil.hasCug(getNodeState(root.getTree(SUPPORTED_PATH2))));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHasCug() throws Exception {
  assertTrue(CugUtil.hasCug(root.getTree(SUPPORTED_PATH)));
  for (  String path : new String[]{PathUtils.ROOT_PATH,INVALID_PATH,UNSUPPORTED_PATH,SUPPORTED_PATH + "/subtree",SUPPORTED_PATH2,SUPPORTED_PATH3}) {
    assertFalse(CugUtil.hasCug(root.getTree(path)));
  }
  new NodeUtil(root.getTree(SUPPORTED_PATH2)).addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree();
  assertTrue(CugUtil.hasCug(root.getTree(SUPPORTED_PATH2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.CugValidatorTest </h4><pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingMixin() throws Exception {
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(22,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidPrimaryType() throws Exception {
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(21,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCugPolicyWithDifferentName() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild("anotherName",NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  try {
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(23,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryType(){
  try {
    node.setName(JcrConstants.JCR_PRIMARYTYPE,NT_REP_CUG_POLICY);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(20,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePrimaryTypeOfCug() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  root.commit();
  try {
    cug.setName(JcrConstants.JCR_PRIMARYTYPE,NodeTypeConstants.NT_OAK_UNSTRUCTURED);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(21,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMixin() throws Exception {
  node.setNames(JcrConstants.JCR_MIXINTYPES,MIX_REP_CUG_MIXIN);
  NodeUtil cug=node.addChild(REP_CUG_POLICY,NT_REP_CUG_POLICY);
  cug.setStrings(REP_PRINCIPAL_NAMES,EveryonePrincipal.NAME);
  root.commit();
  try {
    node.removeProperty(JcrConstants.JCR_MIXINTYPES);
    root.commit();
    fail();
  }
 catch (  CommitFailedException e) {
    assertTrue(e.isAccessControlViolation());
    assertEquals(22,e.getCode());
  }
 finally {
    root.refresh();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.EmptyCugTreePermissionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCanRead(){
  assertFalse(tp.canRead());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCanReadProperty(){
  assertFalse(tp.canRead(PropertyStates.createProperty("prop","val")));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCanReadAll(){
  assertFalse(tp.canReadAll());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildPermission() throws Exception {
  String name=Text.getName(SUPPORTED_PATH2);
  NodeState ns=rootState.getChildNode(name);
  TreePermission child=tp.getChildPermission(name,ns);
  assertSame(TreePermission.NO_RECOURSE,child);
  name=Text.getName(SUPPORTED_PATH);
  ns=rootState.getChildNode(name);
  child=tp.getChildPermission(name,ns);
  assertCugPermission(child,true);
  assertTrue(((CugTreePermission)child).isInCug());
  TreePermission subtree=child.getChildPermission("subtree",ns.getChildNode("subtree"));
  assertCugPermission(subtree,true);
  assertTrue(((CugTreePermission)subtree).isInCug());
  name=Text.getName(UNSUPPORTED_PATH);
  ns=rootState.getChildNode(name);
  TreePermission child2=tp.getChildPermission(name,ns);
  assertFalse(child2 instanceof EmptyCugTreePermission);
  assertSame(child2,TreePermission.NO_RECOURSE);
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGranted(){
  assertFalse(tp.isGranted(Permissions.ALL));
  assertFalse(tp.isGranted(Permissions.WRITE));
  assertFalse(tp.isGranted(Permissions.READ));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCanReadProperties(){
  assertFalse(tp.canReadProperties());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedProperty(){
  PropertyState ps=PropertyStates.createProperty("prop","val");
  assertFalse(tp.isGranted(Permissions.ALL,ps));
  assertFalse(tp.isGranted(Permissions.WRITE,ps));
  assertFalse(tp.isGranted(Permissions.READ,ps));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.HiddenTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasPrivileges(){
  assertTrue(pp.hasPrivileges(readOnlyRoot.getTree(SUPPORTED_PATH),PrivilegeConstants.JCR_READ));
  assertFalse(pp.hasPrivileges(readOnlyRoot.getTree(SUPPORTED_PATH + "/:hidden"),PrivilegeConstants.JCR_READ));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedHiddenBelowCug(){
  assertTrue(pp.isGranted(readOnlyRoot.getTree(SUPPORTED_PATH),null,Permissions.READ));
  assertFalse(pp.isGranted(readOnlyRoot.getTree(SUPPORTED_PATH + "/:hidden"),null,Permissions.READ));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGranted(){
  assertFalse(pp.isGranted(hiddenTree,null,Permissions.READ));
}

</code></pre>

<br>
<pre class="type-2 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void before() throws Exception {
  super.before();
  createCug(SUPPORTED_PATH,EveryonePrincipal.getInstance());
  root.commit();
  readOnlyRoot=RootFactory.createReadOnlyRoot(root);
  hiddenTree=readOnlyRoot.getTree("/oak:index/acPrincipalName/:index");
  assertTrue(hiddenTree.exists());
  pp=createCugPermissionProvider(ImmutableSet.of("/"),EveryonePrincipal.getInstance());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCombinedSetup() throws Exception {
  AccessControlManager acMgr=getAccessControlManager(root);
  try {
    AccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/");
    acl.addAccessControlEntry(EveryonePrincipal.getInstance(),AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_READ));
    acMgr.setPolicy("/",acl);
    root.commit();
    PermissionProvider combined=getConfig(AuthorizationConfiguration.class).getPermissionProvider(readOnlyRoot,root.getContentSession().getWorkspaceName(),ImmutableSet.<Principal>of(EveryonePrincipal.getInstance()));
    assertFalse(combined.hasPrivileges(hiddenTree,PrivilegeConstants.JCR_READ));
    assertTrue(combined.getPrivileges(hiddenTree).isEmpty());
    assertTrue(combined.isGranted(hiddenTree,null,Permissions.ALL));
    assertTrue(combined.isGranted(hiddenTree.getPath(),Permissions.getString(Permissions.ALL)));
    Tree t=readOnlyRoot.getTree("/");
    TreePermission tp=combined.getTreePermission(t,TreePermission.EMPTY);
    for (    String name : PathUtils.elements(hiddenTree.getPath())) {
      t=t.getChild(name);
      tp=combined.getTreePermission(t,tp);
    }
    assertTrue(tp.isGranted(Permissions.ALL));
  }
  finally {
    AccessControlList acl=AccessControlUtils.getAccessControlList(acMgr,"/");
    acl.addAccessControlEntry(EveryonePrincipal.getInstance(),AccessControlUtils.privilegesFromNames(acMgr,PrivilegeConstants.JCR_READ));
    acMgr.removePolicy("/",acl);
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetPrivileges(){
  assertFalse(pp.getPrivileges(readOnlyRoot.getTree(SUPPORTED_PATH)).isEmpty());
  assertTrue(pp.getPrivileges(readOnlyRoot.getTree(SUPPORTED_PATH + "/:hidden")).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsGrantedPath(){
  assertTrue(pp.isGranted(SUPPORTED_PATH,Permissions.getString(Permissions.READ)));
  assertFalse(pp.isGranted(SUPPORTED_PATH + "/:hidden",Permissions.getString(Permissions.READ)));
  assertFalse(pp.isGranted(SUPPORTED_PATH + "/:hidden/child",Permissions.getString(Permissions.READ)));
  assertFalse(pp.isGranted(hiddenTree.getPath(),Permissions.getString(Permissions.READ)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.NestedCugHookRootSupportedTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveRootCug() throws Exception {
  createCug(ROOT_PATH,EveryonePrincipal.getInstance());
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  assertTrue(removeCug(ROOT_PATH,true));
  assertNestedCugs(root,ROOT_PATH,false,"/content","/content2");
  assertTrue(removeCug("/content",true));
  assertNestedCugs(root,ROOT_PATH,false,"/content2");
  assertTrue(removeCug("/content2",true));
  assertNestedCugs(root,ROOT_PATH,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAddAtRoot() throws Exception {
  createCug(ROOT_PATH,EveryonePrincipal.getInstance());
  root.commit();
  assertTrue(root.getTree("/").hasChild(REP_CUG_POLICY));
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,true,"/content","/content2");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveRootCug4() throws Exception {
  createCug("/",EveryonePrincipal.getInstance());
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  assertTrue(removeCug("/content",false));
  assertTrue(removeCug("/content2",false));
  assertTrue(removeCug("/",false));
  root.commit();
  assertNestedCugs(root,"/",false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveRootCug3() throws Exception {
  createCug(ROOT_PATH,EveryonePrincipal.getInstance());
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  assertTrue(removeCug("/content",true));
  assertNestedCugs(root,ROOT_PATH,true,"/content2");
  assertTrue(removeCug("/content2",true));
  assertNestedCugs(root,ROOT_PATH,true);
  assertTrue(removeCug(ROOT_PATH,true));
  assertNestedCugs(root,ROOT_PATH,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.NestedCugHookTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveMultipleCug2() throws Exception {
  setupCugsAndAcls();
  assertTrue(removeCug("/content/a",false));
  assertTrue(removeCug("/content/a/b/c",false));
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,"/content/aa/bb","/content2");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveCug() throws Exception {
  createCug("/content",getTestGroupPrincipal());
  root.commit();
  assertTrue(removeCug("/content",true));
  assertNestedCugs(root,ROOT_PATH,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveIntermediateCug() throws Exception {
  setupCugsAndAcls();
  assertTrue(removeCug("/content/a",true));
  assertNestedCugs(root,ROOT_PATH,false,"/content/aa/bb","/content2","/content/a/b/c");
  assertFalse(root.getTree("/content/a").hasChild(REP_CUG_POLICY));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveMultipleCug() throws Exception {
  setupCugsAndAcls();
  assertTrue(removeCug("/content/a",false));
  assertTrue(removeCug("/content/aa/bb",false));
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,"/content2","/content/a/b/c");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAddAtRoot() throws Exception {
  createCug(root,ROOT_PATH,EveryonePrincipal.NAME);
  root.commit();
  assertTrue(root.getTree(ROOT_PATH).hasChild(REP_CUG_POLICY));
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,true,"/content","/content2");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveRootCug() throws Exception {
  createCug(root,ROOT_PATH,EveryonePrincipal.NAME);
  createCug("/content",getTestGroupPrincipal());
  createCug("/content2",EveryonePrincipal.getInstance());
  root.commit();
  assertTrue(root.getTree(PathUtils.concat(ROOT_PATH,REP_CUG_POLICY)).remove());
  root.commit();
  assertNestedCugs(root,ROOT_PATH,false,"/content","/content2");
  assertTrue(removeCug("/content",true));
  assertNestedCugs(root,ROOT_PATH,false,"/content2");
  assertTrue(removeCug("/content2",true));
  assertNestedCugs(root,ROOT_PATH,false);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testRemoveNestedCug() throws Exception {
  setupCugsAndAcls();
  assertTrue(removeCug("/content/a/b/c",true));
  assertNestedCugs(root,ROOT_PATH,false,"/content/a","/content/aa/bb","/content2");
  assertNestedCugs(root,"/content/a",true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.NoCugTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGranted(){
  for (  String p : PATHS) {
    assertFalse(p,cugPermProvider.isGranted(root.getTree(p),null,Permissions.READ));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSupportedPrivileges(){
  PrivilegeBits bits=new PrivilegeBitsProvider(root).getBits(PrivilegeConstants.JCR_READ);
  for (  String p : PATHS) {
    assertTrue(p,cugPermProvider.supportedPrivileges(root.getTree(p),bits).isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSupportedPrivileges2(){
  for (  String p : PATHS) {
    assertTrue(p,cugPermProvider.supportedPrivileges(root.getTree(p),null).isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHiddenProperty(){
  Root immutableRoot=RootFactory.createReadOnlyRoot(root);
  assertFalse(immutableRoot.getTree(PathUtils.ROOT_PATH).hasProperty(HIDDEN_NESTED_CUGS));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedActions(){
  for (  String p : PATHS) {
    assertFalse(p,cugPermProvider.isGranted(p,Session.ACTION_READ));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsGrantedTreeLocation(){
  for (  String p : PATHS) {
    assertFalse(p,cugPermProvider.isGranted(TreeLocation.create(root.getTree(p)),Permissions.READ));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void hasPrivileges(){
  for (  String p : PATHS) {
    assertFalse(p,cugPermProvider.hasPrivileges(root.getTree(p),PrivilegeConstants.JCR_READ));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void getPrivileges(){
  for (  String p : PATHS) {
    assertTrue(p,cugPermProvider.getPrivileges(root.getTree(p)).isEmpty());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.SupportedPathsTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEmpty(){
  SupportedPaths supportedPaths=new SupportedPaths(ImmutableSet.<String>of());
  List<String> paths=ImmutableList.of("/","/content","/jcr:system","/testRoot","/some/other/path","/content/a","/content/a/b");
  for (  String path : paths) {
    assertFalse(path,supportedPaths.includes(path));
    assertFalse(path,supportedPaths.mayContainCug(path));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRootPath(){
  SupportedPaths supportedPaths=new SupportedPaths(ImmutableSet.of("/"));
  List<String> paths=ImmutableList.of("/","/content","/jcr:system","/testRoot","/some/other/path","/content/a","/content/a/b");
  for (  String path : paths) {
    assertTrue(path,supportedPaths.includes(path));
    assertTrue(path,supportedPaths.mayContainCug(path));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.TopLevelPathTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContainsWithCugAtRoot() throws Exception {
  createCug(root,ROOT_PATH,EveryonePrincipal.NAME);
  root.commit();
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertTrue(tlp.contains(ROOT_PATH));
  assertFalse(tlp.contains(SUPPORTED_PATH));
  assertFalse(tlp.contains(SUPPORTED_PATH2));
  assertFalse(tlp.contains(SUPPORTED_PATH3));
  assertFalse(tlp.contains(UNSUPPORTED_PATH));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMayContainWithCug2() throws Exception {
  String cugPath=SUPPORTED_PATH + "/subtree";
  createCug(cugPath,EveryonePrincipal.getInstance());
  root.commit();
  Root readOnlyRoot=RootFactory.createReadOnlyRoot(root);
  TopLevelPaths tlp=new TopLevelPaths(readOnlyRoot);
  assertTrue(tlp.contains(PathUtils.ROOT_PATH));
  assertTrue(tlp.contains(SUPPORTED_PATH));
  assertTrue(tlp.contains(cugPath));
  assertFalse(tlp.contains(SUPPORTED_PATH3));
  CugPermissionProvider cugPermProvider=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2,SUPPORTED_PATH3),getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  Tree t=readOnlyRoot.getTree(PathUtils.ROOT_PATH);
  TreePermission rootTp=cugPermProvider.getTreePermission(t,TreePermission.EMPTY);
  assertTrue(rootTp instanceof EmptyCugTreePermission);
  TreePermission tp=rootTp;
  for (  String segm : PathUtils.elements(cugPath)) {
    t=t.getChild(segm);
    tp=cugPermProvider.getTreePermission(t,tp);
    assertCugPermission(tp,Text.isDescendantOrEqual(SUPPORTED_PATH,t.getPath()));
  }
  tp=getTreePermission(readOnlyRoot,Text.getAbsoluteParent(SUPPORTED_PATH3,0),cugPermProvider);
  assertSame(TreePermission.NO_RECOURSE,tp);
  for (  String p : new String[]{SUPPORTED_PATH2,UNSUPPORTED_PATH}) {
    tp=getTreePermission(readOnlyRoot,p,cugPermProvider);
    assertSame(p,TreePermission.NO_RECOURSE,tp);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMayContainWithCug() throws Exception {
  String cugPath=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree().getPath();
  createCug(cugPath,EveryonePrincipal.getInstance());
  root.commit();
  Root readOnlyRoot=RootFactory.createReadOnlyRoot(root);
  TopLevelPaths tlp=new TopLevelPaths(readOnlyRoot);
  for (  String p : PATHS) {
    assertEquals(p,Text.isDescendantOrEqual(p,cugPath),tlp.contains(p));
  }
  assertTrue(tlp.contains(Text.getAbsoluteParent(SUPPORTED_PATH3,0)));
  assertTrue(tlp.contains(cugPath));
  CugPermissionProvider cugPermProvider=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2,SUPPORTED_PATH3),getTestUser().getPrincipal(),EveryonePrincipal.getInstance());
  Tree t=readOnlyRoot.getTree(ROOT_PATH);
  TreePermission rootTp=cugPermProvider.getTreePermission(t,TreePermission.EMPTY);
  assertTrue(rootTp instanceof EmptyCugTreePermission);
  TreePermission tp=rootTp;
  for (  String segm : PathUtils.elements(cugPath)) {
    t=t.getChild(segm);
    tp=cugPermProvider.getTreePermission(t,tp);
    assertCugPermission(tp,Text.isDescendantOrEqual(SUPPORTED_PATH3,t.getPath()));
  }
  for (  String p : new String[]{SUPPORTED_PATH,SUPPORTED_PATH2,UNSUPPORTED_PATH}) {
    tp=getTreePermission(readOnlyRoot,p,cugPermProvider);
    assertSame(p,TreePermission.NO_RECOURSE,tp);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAnyNoCug(){
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertFalse(tlp.hasAny());
  assertFalse(tlp.hasAny());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContainsWithCug() throws Exception {
  String cugPath=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree().getPath();
  createCug(cugPath,EveryonePrincipal.getInstance());
  root.commit();
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertTrue(tlp.contains(ROOT_PATH));
  assertTrue(tlp.contains(SUPPORTED_PATH3));
  assertTrue(tlp.contains(cugPath));
  assertFalse(tlp.contains(cugPath + "/subtree"));
  assertFalse(tlp.contains(SUPPORTED_PATH));
  assertFalse(tlp.contains(UNSUPPORTED_PATH));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testContainsNoCug() throws Exception {
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  for (  String p : PATHS) {
    assertFalse(tlp.contains(p));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testHasAnyWithCug() throws Exception {
  Tree tree=new NodeUtil(root.getTree(SUPPORTED_PATH3)).addChild("child",NodeTypeConstants.NT_OAK_UNSTRUCTURED).getTree();
  createCug(tree.getPath(),EveryonePrincipal.getInstance());
  root.commit();
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertTrue(tlp.hasAny());
  assertTrue(tlp.hasAny());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testContainsMany() throws Exception {
  NodeUtil n=new NodeUtil(root.getTree(SUPPORTED_PATH3));
  for (int i=0; i <= TopLevelPaths.MAX_CNT; i++) {
    Tree c=n.addChild("c" + i,NT_OAK_UNSTRUCTURED).getTree();
    createCug(c.getPath(),EveryonePrincipal.getInstance());
  }
  root.commit();
  TopLevelPaths tlp=new TopLevelPaths(RootFactory.createReadOnlyRoot(root));
  assertTrue(tlp.contains(ROOT_PATH));
  assertTrue(tlp.contains(SUPPORTED_PATH));
  assertTrue(tlp.contains(SUPPORTED_PATH2));
  assertTrue(tlp.contains(SUPPORTED_PATH3));
  assertTrue(tlp.contains(UNSUPPORTED_PATH));
  assertTrue(tlp.contains(Text.getRelativeParent(SUPPORTED_PATH3,1)));
  assertTrue(tlp.contains(SUPPORTED_PATH3 + "/c0"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.cug.impl.VersionTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionAtVersionableAboveSupported() throws Exception {
  Tree vh=checkNotNull(versionManager.getVersionHistory(root.getTree(SUPPORTED_PATH)));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH + "/a"));
  TreePermission tp=getTreePermission(root,vh.getPath(),pp);
  assertTrue(tp instanceof EmptyCugTreePermission);
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionVersionableUnsupportedPath() throws Exception {
  Tree versionable=root.getTree(UNSUPPORTED_PATH);
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  Tree t=root.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  for (  String segm : PathUtils.elements(vh.getPath())) {
    t=t.getChild(segm);
    tp=pp.getTreePermission(t,tp);
    if (JCR_SYSTEM.equals(segm) || ReadOnlyVersionManager.isVersionStoreTree(t)) {
      assertTrue(t.getPath(),tp instanceof EmptyCugTreePermission);
    }
 else {
      assertSame(t.getPath(),TreePermission.NO_RECOURSE,tp);
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTreePermissionVersionable() throws Exception {
  Tree versionable=root.getTree("/content/a");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2),EveryonePrincipal.getInstance());
  Tree t=root.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  String path=PathUtils.concat(vh.getPath(),"1.0",JCR_FROZENNODE,"b/c");
  for (  String segm : PathUtils.elements(path)) {
    t=t.getChild(segm);
    tp=pp.getTreePermission(t,tp);
    if (JCR_SYSTEM.equals(segm) || ReadOnlyVersionManager.isVersionStoreTree(t)) {
      assertTrue(t.getPath(),tp instanceof EmptyCugTreePermission);
    }
 else {
      assertTrue(t.getPath(),tp instanceof CugTreePermission);
      assertEquals(t.getPath(),"c".equals(segm),tp.canRead());
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadVersionContent() throws Exception {
  IdentifierManager idMgr=new IdentifierManager(testRoot);
  ReadOnlyVersionManager vMgr=ReadOnlyVersionManager.getInstance(testRoot,NamePathMapper.DEFAULT);
  for (  String path : readAccess) {
    Tree t=testRoot.getTree(path);
    assertTrue(path,t.exists());
    PropertyState ps=t.getProperty(JCR_VERSIONHISTORY);
    assertNotNull(ps);
    String vhUUID=ps.getValue(Type.STRING);
    assertEquals(vhUUID,ps.getValue(Type.STRING));
    Tree versionHistory=vMgr.getVersionHistory(t);
    assertNotNull(versionHistory);
    assertTrue(versionHistory.exists());
    assertTrue(versionHistory.getChild(JCR_ROOTVERSION).exists());
    assertFalse(versionHistory.getParent().exists());
    Tree vhTree=testRoot.getTree(versionHistory.getPath());
    assertTrue(vhTree.exists());
    String vhPath=idMgr.resolveUUID(vhUUID);
    assertNotNull(vhPath);
    assertEquals(versionHistory.getPath(),vhPath);
    assertTrue(testRoot.getTree(vhPath).exists());
    assertTrue(testRoot.getTree(vhPath + '/' + JCR_ROOTVERSION).exists());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCugAtRoot() throws Exception {
  Tree versionable=root.getTree(UNSUPPORTED_PATH);
  String vhPath=checkNotNull(versionManager.getVersionHistory(versionable)).getPath();
  try {
    createCug(root,PathUtils.ROOT_PATH,EveryonePrincipal.NAME);
    root.commit();
    CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of("/"));
    Tree t=root.getTree("/");
    TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
    assertTrue(tp instanceof CugTreePermission);
    for (    String segm : PathUtils.elements(vhPath)) {
      t=t.getChild(segm);
      tp=pp.getTreePermission(t,tp);
      assertTrue(tp instanceof CugTreePermission);
    }
  }
  finally {
    root.getTree("/").removeProperty(JCR_MIXINTYPES);
    Tree cug=root.getTree("/rep:cugPolicy");
    if (cug.exists()) {
      cug.remove();
    }
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersionableRemoved2() throws Exception {
  Tree versionable=root.getTree("/content/a");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  assertFalse(testRoot.getTree(vh.getPath()).exists());
  versionable.remove();
  root.commit();
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  assertEquals(Permissions.NO_PERMISSION,pp.supportedPermissions(vh,null,Permissions.READ));
  assertFalse(pp.isGranted(vh,null,Permissions.READ));
  testRoot.refresh();
  assertTrue(testRoot.getTree(vh.getPath()).exists());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testReadVersionStorage(){
  assertFalse(testRoot.getTree(VersionConstants.VERSION_STORE_PATH).exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadVersionContentNoAccess() throws Exception {
  IdentifierManager idMgr=new IdentifierManager(testRoot);
  for (  String path : noReadAccess) {
    String vhUUID=checkNotNull(TreeUtil.getString(root.getTree(path),JCR_VERSIONHISTORY));
    String vhPath=PathUtils.concat(VERSION_STORE_PATH,versionManager.getVersionHistoryPath(vhUUID));
    Tree vHistory=testRoot.getTree(vhPath);
    assertFalse(vHistory.exists());
    assertFalse(vHistory.getParent().exists());
    assertFalse(vHistory.getChild(JCR_ROOTVERSION).exists());
    assertFalse(testRoot.getTree(vhPath + '/' + JCR_ROOTVERSION).exists());
    String vh=idMgr.resolveUUID(vhUUID);
    assertNull(path,vh);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersionableRemoved() throws Exception {
  Tree versionable=addVersionContent("/content/a/b/c");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  assertTrue(testRoot.getTree(vh.getPath()).exists());
  versionable.remove();
  root.commit();
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  assertEquals(Permissions.READ,pp.supportedPermissions(vh,null,Permissions.READ));
  assertFalse(pp.isGranted(vh,null,Permissions.READ));
  testRoot.refresh();
  assertFalse(testRoot.getTree(vh.getPath()).exists());
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreePermissionVersionable2() throws Exception {
  Tree versionable=root.getTree("/content");
  Tree vh=checkNotNull(versionManager.getVersionHistory(versionable));
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2));
  Tree t=root.getTree("/");
  TreePermission tp=pp.getTreePermission(t,TreePermission.EMPTY);
  String path=PathUtils.concat(vh.getPath(),"1.0",JCR_FROZENNODE,"aa");
  for (  String segm : PathUtils.elements(path)) {
    t=t.getChild(segm);
    tp=pp.getTreePermission(t,tp);
    if (JCR_SYSTEM.equals(segm) || ReadOnlyVersionManager.isVersionStoreTree(t)) {
      assertTrue(t.getPath(),tp instanceof EmptyCugTreePermission);
    }
 else {
      assertTrue(t.getPath(),tp instanceof CugTreePermission);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testVersionableWithCugParent() throws Exception {
  addVersionContent("/content/aa/bb/cc");
  Tree cc=root.getTree("/content/aa/bb/cc");
  assertFalse(CugUtil.hasCug(cc));
  Tree vh=checkNotNull(versionManager.getVersionHistory(cc));
  Tree t=root.getTree("/");
  CugPermissionProvider pp=createCugPermissionProvider(ImmutableSet.of(SUPPORTED_PATH,SUPPORTED_PATH2),getTestGroupPrincipal());
  TreePermission tp=getTreePermission(root,vh.getPath(),pp);
  assertTrue(tp instanceof CugTreePermission);
  assertTrue(((CugTreePermission)tp).isInCug());
  assertTrue(((CugTreePermission)tp).isAllow());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.AbstractRestrictionProviderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteRestrictions() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  Tree aceTree=getAceTree();
  restrictionProvider.writeRestrictions(testPath,aceTree,ImmutableSet.<Restriction>of(r));
  assertTrue(aceTree.hasChild(REP_RESTRICTIONS));
  Tree restr=aceTree.getChild(REP_RESTRICTIONS);
  assertEquals(r.getProperty(),restr.getProperty(REP_GLOB));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,valueFactory.createValue("nt:folder",PropertyType.NAME),valueFactory.createValue("nt:file",PropertyType.NAME));
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  PropertyState ps=r.getProperty();
  assertTrue(ps.isArray());
  assertEquals(Type.NAMES,ps.getType());
  List<Value> vs=ValueFactoryImpl.createValues(ps,namePathMapper);
  assertArrayEquals(nameValues,vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction3() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,nameValue);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertArrayEquals(new Value[]{nameValue},vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadRestrictions() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_GLOB,globValue);
  Tree aceTree=getAceTree(r);
  Set<Restriction> restrictions=restrictionProvider.readRestrictions(testPath,aceTree);
  assertEquals(1,restrictions.size());
  assertTrue(restrictions.contains(r));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateMvRestriction2() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,nameValues);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  PropertyState ps=r.getProperty();
  assertTrue(ps.isArray());
  assertEquals(Type.NAMES,ps.getType());
  List<Value> vs=ValueFactoryImpl.createValues(ps,namePathMapper);
  assertArrayEquals(nameValues,vs.toArray(new Value[vs.size()]));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateEmptyMvRestriction() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertNotNull(vs);
  assertEquals(0,vs.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedRestrictions() throws Exception {
  Set<RestrictionDefinition> defs=restrictionProvider.getSupportedRestrictions(testPath);
  assertNotNull(defs);
  assertEquals(supported.size(),defs.size());
  for (  RestrictionDefinition def : supported.values()) {
    assertTrue(defs.contains(def));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testReadRestrictionsForUnsupportedPath() throws Exception {
  Set<Restriction> restrictions=restrictionProvider.readRestrictions(unsupportedPath,getAceTree());
  assertTrue(restrictions.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedRestrictionsForUnsupportedPath() throws Exception {
  Set<RestrictionDefinition> defs=restrictionProvider.getSupportedRestrictions(unsupportedPath);
  assertNotNull(defs);
  assertTrue(defs.isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateEmptyMvRestriction2() throws Exception {
  Restriction r=restrictionProvider.createRestriction(testPath,REP_NT_NAMES,new Value[0]);
  assertNotNull(r);
  assertEquals(REP_NT_NAMES,r.getDefinition().getName());
  assertEquals(Type.NAMES,r.getDefinition().getRequiredType());
  assertTrue(r.getProperty().isArray());
  assertEquals(Type.NAMES,r.getProperty().getType());
  List<Value> vs=ValueFactoryImpl.createValues(r.getProperty(),namePathMapper);
  assertNotNull(vs);
  assertEquals(0,vs.size());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteInvalidRestrictions() throws Exception {
  PropertyState ps=PropertyStates.createProperty(REP_GLOB,valueFactory.createValue(false));
  Tree aceTree=getAceTree();
  restrictionProvider.writeRestrictions(testPath,aceTree,ImmutableSet.<Restriction>of(new RestrictionImpl(ps,false)));
  assertTrue(aceTree.hasChild(REP_RESTRICTIONS));
  Tree restr=aceTree.getChild(REP_RESTRICTIONS);
  assertEquals(ps,restr.getProperty(REP_GLOB));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.CompositeRestrictionProviderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSupportedRestrictions(){
  String[] paths=new String[]{null,"/testPath"};
  for (  String path : paths) {
    Set<RestrictionDefinition> defs=provider.getSupportedRestrictions(path);
    int expectedSize=rp1.getSupportedRestrictions(path).size() + rp2.getSupportedRestrictions(path).size();
    assertEquals(expectedSize,defs.size());
    assertTrue(defs.containsAll(rp1.getSupportedRestrictions(path)));
    assertTrue(defs.containsAll(rp2.getSupportedRestrictions(path)));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetRestrictionPattern() throws Exception {
  NodeUtil aceNode=new NodeUtil(root.getTree("/")).addChild("test",NT_REP_GRANT_ACE);
  NodeUtil rNode=aceNode.addChild(REP_RESTRICTIONS,NT_REP_RESTRICTIONS);
  rNode.setString(REP_GLOB,"*");
  assertFalse(provider.getPattern("/test",aceNode.getTree()) instanceof CompositePattern);
  rNode.setBoolean("boolean",true);
  rNode.setValues("longs",new Value[]{vf.createValue(10),vf.createValue(290)});
  assertTrue(provider.getPattern("/test",rNode.getTree()) instanceof CompositePattern);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.RestrictionDefinitionImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsMandatory(){
  assertTrue(definition.isMandatory());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNotEqual(){
  List<RestrictionDefinition> defs=new ArrayList<RestrictionDefinition>();
  defs.add(new RestrictionDefinitionImpl(name,Type.STRING,true));
  defs.add(new RestrictionDefinitionImpl("otherName",Type.NAME,true));
  defs.add(new RestrictionDefinitionImpl(name,Type.NAME,false));
  defs.add(new RestrictionDefinitionImpl(name,Type.NAMES,true));
  defs.add(new RestrictionDefinition(){
    @Nonnull @Override public String getName(){
      return name;
    }
    @Nonnull @Override public Type<?> getRequiredType(){
      return Type.NAME;
    }
    @Override public boolean isMandatory(){
      return true;
    }
  }
);
  for (  RestrictionDefinition rd : defs) {
    assertFalse(definition.equals(rd));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.authorization.restriction.RestrictionImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNotEqual(){
  List<Restriction> rs=new ArrayList<Restriction>();
  rs.add(new RestrictionImpl(PropertyStates.createProperty(name,value,Type.STRING),true));
  rs.add(new RestrictionImpl(PropertyStates.createProperty(name,ImmutableList.of(value),Type.NAMES),true));
  rs.add(new RestrictionImpl(createProperty("otherName",value),true));
  rs.add(new RestrictionImpl(createProperty("name","otherValue"),true));
  rs.add(new RestrictionImpl(createProperty(name,value),false));
  rs.add(new Restriction(){
    @Nonnull @Override public RestrictionDefinition getDefinition(){
      return new RestrictionDefinitionImpl(name,Type.NAME,true);
    }
    @Nonnull @Override public PropertyState getProperty(){
      return createProperty(name,value);
    }
  }
);
  for (  Restriction r : rs) {
    assertFalse(restriction.equals(r));
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsMandatory(){
  assertTrue(restriction.getDefinition().isMandatory());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.principal.AbstractPrincipalProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testFindWithoutHint() throws Exception {
  User testUser=null;
  Group testGroup=null;
  try {
    UserManager userMgr=getUserManager(root);
    testUser=userMgr.createUser("TestUser","pw");
    testGroup=userMgr.createGroup("TestGroup");
    root.commit();
    Set<String> resultNames=new HashSet<String>();
    Iterator<? extends Principal> principals=principalProvider.findPrincipals(PrincipalManager.SEARCH_TYPE_ALL);
    while (principals.hasNext()) {
      resultNames.add(principals.next().getName());
    }
    assertTrue(resultNames.contains(EveryonePrincipal.NAME));
    assertTrue(resultNames.contains("TestUser"));
    assertTrue(resultNames.contains("TestGroup"));
  }
  finally {
    if (testUser != null) {
      testUser.remove();
    }
    if (testGroup != null) {
      testGroup.remove();
    }
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupPrincipal() throws Exception {
  Group group=getUserManager(root).createGroup("testGroup" + UUID.randomUUID());
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(group.getPrincipal().getName());
    assertNotNull(principal);
    assertTrue(principal instanceof java.security.acl.Group);
  }
  finally {
    group.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemUserPrincipal() throws Exception {
  User user=getUserManager(root).createSystemUser("testSystemUser" + UUID.randomUUID(),null);
  root.commit();
  try {
    Principal principal=principalProvider.getPrincipal(user.getPrincipal().getName());
    assertNotNull(principal);
    assertTrue(principal instanceof SystemUserPrincipal);
  }
  finally {
    user.remove();
    root.commit();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPrincipals() throws Exception {
  String adminId=adminSession.getAuthInfo().getUserID();
  Set<? extends Principal> principals=principalProvider.getPrincipals(adminId);
  assertNotNull(principals);
  assertFalse(principals.isEmpty());
  assertTrue(principals.contains(EveryonePrincipal.getInstance()));
  for (  Principal principal : principals) {
    assertNotNull(principalProvider.getPrincipal(principal.getName()));
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAdminPrincipal() throws Exception {
  String userId=adminSession.getAuthInfo().getUserID();
  Authorizable admin=getUserManager(root).getAuthorizable(userId);
  if (admin != null && admin.getPrincipal() instanceof AdminPrincipal) {
    Principal principal=principalProvider.getPrincipal(admin.getPrincipal().getName());
    assertTrue(principal instanceof AdminPrincipal);
    Set<? extends Principal> principals=principalProvider.getPrincipals(userId);
    boolean containsAdminPrincipal=false;
    for (    Principal p : principals) {
      if (p instanceof AdminPrincipal) {
        containsAdminPrincipal=true;
        break;
      }
    }
    assertTrue(containsAdminPrincipal);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEveryone() throws Exception {
  Principal everyone=principalProvider.getPrincipal(EveryonePrincipal.NAME);
  assertTrue(everyone instanceof EveryonePrincipal);
  Group everyoneGroup=null;
  try {
    UserManager userMgr=getUserManager(root);
    everyoneGroup=userMgr.createGroup(EveryonePrincipal.NAME);
    root.commit();
    Principal ep=principalProvider.getPrincipal(EveryonePrincipal.NAME);
    assertFalse(ep instanceof EveryonePrincipal);
  }
  finally {
    if (everyoneGroup != null) {
      everyoneGroup.remove();
      root.commit();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.principal.EveryonePrincipalTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEqualsOtherJackrabbitPrincipal(){
  Principal someotherEveryone=new OtherEveryone();
  assertFalse(everyone.equals(someotherEveryone));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHashCode(){
  assertTrue(everyone.hashCode() == EveryonePrincipal.getInstance().hashCode());
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNotEqualsOtherPrincipalWithSameName(){
  Principal someotherEveryone=new Principal(){
    public String getName(){
      return EveryonePrincipal.NAME;
    }
  }
;
  assertFalse(everyone.equals(someotherEveryone));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.principal.PrincipalImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testNotEquals(){
  List<Principal> principals=new ArrayList<Principal>();
  principals.add(new PrincipalImpl("otherName"));
  principals.add(new Principal(){
    @Override public String getName(){
      return "name";
    }
  }
);
  for (  Principal p : principals) {
    assertFalse(principal.equals(p));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBitsProviderTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAll(){
  PrivilegeBits all=bitsProvider.getBits(JCR_ALL);
  assertFalse(all.isEmpty());
  assertEquals(Collections.singleton(JCR_ALL),bitsProvider.getPrivilegeNames(all));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAggregatedNames() throws Exception {
  assertFalse(bitsProvider.getAggregatedPrivilegeNames().iterator().hasNext());
  assertFalse(bitsProvider.getAggregatedPrivilegeNames("unknown").iterator().hasNext());
  for (  String nonAggregate : PrivilegeConstants.NON_AGGREGATE_PRIVILEGES) {
    assertEquals(Collections.singleton(nonAggregate),bitsProvider.getAggregatedPrivilegeNames(nonAggregate));
  }
  Map<String[],Set<String>> testMap=Maps.newHashMap();
  testMap.put(new String[]{JCR_READ},ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES));
  testMap.put(new String[]{JCR_MODIFY_PROPERTIES},ImmutableSet.of(REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES));
  testMap.put(new String[]{JCR_WRITE},ImmutableSet.of(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES));
  testMap.put(new String[]{REP_WRITE},ImmutableSet.of(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_NODE_TYPE_MANAGEMENT));
  testMap.put(new String[]{JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},ImmutableSet.of(JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL));
  testMap.put(new String[]{JCR_READ,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL},ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL));
  testMap.put(new String[]{JCR_ALL},NON_AGGREGATE_PRIVILEGES);
  testMap.put(new String[]{JCR_READ,JCR_WRITE,JCR_ALL},NON_AGGREGATE_PRIVILEGES);
  for (  String[] prvNames : testMap.keySet()) {
    Set<String> expected=testMap.get(prvNames);
    assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(prvNames)));
    assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(prvNames)));
  }
  PrivilegeManager pMgr=getPrivilegeManager(root);
  pMgr.registerPrivilege("test1",true,null);
  assertEquals(ImmutableSet.of("test1"),ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames("test1")));
  Set<String> expected=Sets.newHashSet(NON_AGGREGATE_PRIVILEGES);
  expected.add("test1");
  assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(JCR_ALL)));
  assertEquals(expected,ImmutableSet.copyOf(bitsProvider.getAggregatedPrivilegeNames(JCR_ALL)));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetBits(){
  PrivilegeBits bits=bitsProvider.getBits(JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES);
  assertFalse(bits.isEmpty());
  PrivilegeBits mod=PrivilegeBits.getInstance(bitsProvider.getBits(JCR_ADD_CHILD_NODES)).add(bitsProvider.getBits(JCR_REMOVE_CHILD_NODES));
  assertEquals(bits,mod.unmodifiable());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.privilege.PrivilegeBitsTest </h4><pre class="type-13 type-9 type-5 type-7 type-6 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNextBits(){
  assertSame(PrivilegeBits.EMPTY,PrivilegeBits.EMPTY.nextBits());
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  long l=getLongValue(pb);
  while (l < Long.MAX_VALUE / 2) {
    l=l << 1;
    pb=pb.nextBits();
    assertEquals(l,getLongValue(pb));
  }
  for (int i=0; i < 10; i++) {
    PrivilegeBits nxt=pb.nextBits();
    assertEquals(nxt,pb.nextBits());
    assertFalse(pb.equals(nxt));
    pb=nxt;
  }
  pb=READ_NODES_PRIVILEGE_BITS;
  for (int i=0; i < 100; i++) {
    PrivilegeBits modifiable=PrivilegeBits.getInstance(pb);
    try {
      modifiable.nextBits();
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    pb=pb.nextBits();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdd(){
  try {
    PrivilegeBits.EMPTY.add(PrivilegeBits.EMPTY);
    fail("UnsupportedOperation expected");
  }
 catch (  UnsupportedOperationException e) {
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    try {
      pb.add(PrivilegeBits.EMPTY);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.add(mod);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    PrivilegeBits nxt=pb.nextBits();
    try {
      pb.add(nxt);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    long before=getLongValue(mod);
    long nxtLong=getLongValue(nxt);
    mod.add(nxt);
    if (getLongValue(nxt) != 0) {
      assertEquals(before | nxtLong,getLongValue(mod));
    }
    assertTrue(mod.includes(nxt));
    PrivilegeBits tmp=PrivilegeBits.getInstance(pb);
    assertTrue(tmp.includes(pb));
    assertFalse(tmp.includes(nxt));
    if (READ_NODES_PRIVILEGE_BITS.equals(pb)) {
      assertTrue(tmp.includes(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES)));
    }
 else {
      assertFalse(tmp.includes(PrivilegeBits.BUILT_IN.get(PrivilegeConstants.REP_READ_NODES)));
    }
    tmp.add(nxt);
    assertTrue(tmp.includes(pb) && tmp.includes(nxt));
    if (READ_NODES_PRIVILEGE_BITS.equals(pb)) {
      assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    }
 else {
      assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    }
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRetain(){
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  List<PrivilegeBits> pbs=new ArrayList<PrivilegeBits>();
  pbs.add(pb);
  Random random=new Random();
  for (int i=0; i < 100; i++) {
    PrivilegeBits nxt=pb.nextBits();
    PrivilegeBits mod=PrivilegeBits.getInstance(nxt,pb);
    mod.retain(nxt);
    assertEquivalent(nxt,mod);
    mod=PrivilegeBits.getInstance(nxt);
    mod.retain(pb);
    assertTrue(nxt.toString(),mod.isEmpty());
    mod=PrivilegeBits.getInstance(nxt);
    mod.retain(READ_NODES_PRIVILEGE_BITS);
    assertTrue(nxt.toString(),mod.isEmpty());
    mod=PrivilegeBits.getInstance(nxt,READ_NODES_PRIVILEGE_BITS);
    mod.retain(nxt);
    assertEquivalent(nxt,mod);
    mod=PrivilegeBits.getInstance(nxt,pb,READ_NODES_PRIVILEGE_BITS);
    mod.retain(READ_NODES_PRIVILEGE_BITS);
    assertEquivalent(READ_NODES_PRIVILEGE_BITS,mod);
    mod=PrivilegeBits.getInstance(nxt);
    PrivilegeBits other=PrivilegeBits.getInstance();
    for (int j=0; j < pbs.size() / 2; j++) {
      other.add(pbs.get(random.nextInt(pbs.size() - 1)));
    }
    mod.add(other);
    mod.retain(other);
    assertEquivalent(other,mod);
    other.retain(nxt);
    assertTrue(other.isEmpty());
    pbs.add(nxt);
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCalculatePermissions(){
  PrivilegeBitsProvider provider=new PrivilegeBitsProvider(root);
  Map<PrivilegeBits,Long> simple=new HashMap<PrivilegeBits,Long>();
  simple.put(PrivilegeBits.EMPTY,Permissions.NO_PERMISSION);
  simple.put(provider.getBits(JCR_READ),Permissions.READ);
  simple.put(provider.getBits(JCR_LOCK_MANAGEMENT),Permissions.LOCK_MANAGEMENT);
  simple.put(provider.getBits(JCR_VERSION_MANAGEMENT),Permissions.VERSION_MANAGEMENT);
  simple.put(provider.getBits(JCR_READ_ACCESS_CONTROL),Permissions.READ_ACCESS_CONTROL);
  simple.put(provider.getBits(JCR_MODIFY_ACCESS_CONTROL),Permissions.MODIFY_ACCESS_CONTROL);
  simple.put(provider.getBits(REP_READ_NODES),Permissions.READ_NODE);
  simple.put(provider.getBits(REP_READ_PROPERTIES),Permissions.READ_PROPERTY);
  simple.put(provider.getBits(REP_USER_MANAGEMENT),Permissions.USER_MANAGEMENT);
  simple.put(provider.getBits(JCR_MODIFY_PROPERTIES),Permissions.SET_PROPERTY);
  simple.put(provider.getBits(REP_ADD_PROPERTIES),Permissions.ADD_PROPERTY);
  simple.put(provider.getBits(REP_ALTER_PROPERTIES),Permissions.MODIFY_PROPERTY);
  simple.put(provider.getBits(REP_REMOVE_PROPERTIES),Permissions.REMOVE_PROPERTY);
  simple.put(provider.getBits(REP_INDEX_DEFINITION_MANAGEMENT),Permissions.INDEX_DEFINITION_MANAGEMENT);
  for (  PrivilegeBits pb : simple.keySet()) {
    long expected=simple.get(pb).longValue();
    assertTrue(expected == PrivilegeBits.calculatePermissions(pb,PrivilegeBits.EMPTY,true));
    assertTrue(expected == PrivilegeBits.calculatePermissions(pb,pb,true));
  }
  PrivilegeBits add_change=provider.getBits(REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES);
  long permissions=(Permissions.ADD_PROPERTY | Permissions.MODIFY_PROPERTY);
  assertTrue(permissions == PrivilegeBits.calculatePermissions(add_change,PrivilegeBits.EMPTY,true));
  assertTrue(permissions == PrivilegeBits.calculatePermissions(add_change,add_change,true));
  PrivilegeBits add_rm=provider.getBits(REP_ADD_PROPERTIES,REP_REMOVE_PROPERTIES);
  permissions=(Permissions.ADD_PROPERTY | Permissions.REMOVE_PROPERTY);
  assertTrue(permissions == PrivilegeBits.calculatePermissions(add_rm,PrivilegeBits.EMPTY,true));
  assertTrue(permissions == PrivilegeBits.calculatePermissions(add_rm,add_rm,true));
  PrivilegeBits ch_rm=provider.getBits(REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES);
  permissions=(Permissions.MODIFY_PROPERTY | Permissions.REMOVE_PROPERTY);
  assertTrue(permissions == PrivilegeBits.calculatePermissions(ch_rm,PrivilegeBits.EMPTY,true));
  assertTrue(permissions == PrivilegeBits.calculatePermissions(ch_rm,add_rm,true));
  PrivilegeBits all=provider.getBits(JCR_ALL);
  assertFalse(Permissions.ALL == PrivilegeBits.calculatePermissions(all,PrivilegeBits.EMPTY,true));
  assertTrue(Permissions.ALL == PrivilegeBits.calculatePermissions(all,all,true));
  PrivilegeBits addChild=provider.getBits(JCR_ADD_CHILD_NODES);
  assertFalse(Permissions.ADD_NODE == PrivilegeBits.calculatePermissions(addChild,PrivilegeBits.EMPTY,true));
  assertTrue(Permissions.ADD_NODE == PrivilegeBits.calculatePermissions(PrivilegeBits.EMPTY,addChild,true));
  PrivilegeBits removeChild=provider.getBits(JCR_REMOVE_CHILD_NODES);
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(removeChild,PrivilegeBits.EMPTY,true));
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(PrivilegeBits.EMPTY,removeChild,true));
  PrivilegeBits removeNode=provider.getBits(JCR_REMOVE_NODE);
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(removeNode,PrivilegeBits.EMPTY,true));
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(PrivilegeBits.EMPTY,removeNode,true));
  PrivilegeBits remove=provider.getBits(JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE);
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(remove,PrivilegeBits.EMPTY,true));
  assertFalse(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(PrivilegeBits.EMPTY,remove,true));
  assertTrue(Permissions.REMOVE_NODE == PrivilegeBits.calculatePermissions(remove,remove,true));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsEmpty(){
  assertTrue(PrivilegeBits.EMPTY.isEmpty());
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    assertFalse(pb.isEmpty());
    assertFalse(PrivilegeBits.getInstance(pb).isEmpty());
    pb=pb.nextBits();
    mod.add(pb);
    assertFalse(mod.isEmpty());
    PrivilegeBits tmp=PrivilegeBits.getInstance(pb);
    tmp.diff(pb);
    assertTrue(tmp.toString(),tmp.isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDiff(){
  try {
    PrivilegeBits.EMPTY.diff(PrivilegeBits.EMPTY);
    fail("UnsupportedOperation expected");
  }
 catch (  UnsupportedOperationException e) {
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    PrivilegeBits nxt=pb.nextBits();
    try {
      pb.diff(nxt);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.diff(mod);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    PrivilegeBits before=PrivilegeBits.getInstance(mod);
    mod.diff(nxt);
    assertEquivalent(before,mod);
    mod.add(nxt);
    assertFalse(before.equals(mod));
    mod.diff(nxt);
    assertEquivalent(before,mod);
    mod.add(nxt);
    PrivilegeBits tmp=PrivilegeBits.getInstance(pb);
    tmp.add(nxt);
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    tmp.diff(tmp);
    assertEquivalent(PrivilegeBits.EMPTY,tmp);
    tmp=PrivilegeBits.getInstance(pb);
    tmp.add(nxt);
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    tmp.diff(PrivilegeBits.getInstance(tmp));
    assertEquivalent(PrivilegeBits.EMPTY,tmp);
    tmp=PrivilegeBits.getInstance(pb);
    tmp.diff(nxt);
    assertEquivalent(PrivilegeBits.getInstance(pb),tmp);
    tmp=PrivilegeBits.getInstance(nxt);
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    assertTrue(tmp.includes(nxt));
    tmp.diff(nxt);
    assertEquivalent(READ_NODES_PRIVILEGE_BITS,tmp);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    assertFalse(tmp.includes(nxt));
    tmp=PrivilegeBits.getInstance(pb);
    tmp.add(READ_NODES_PRIVILEGE_BITS);
    PrivilegeBits tmp2=PrivilegeBits.getInstance(pb);
    tmp2.add(nxt);
    PrivilegeBits tmp3=PrivilegeBits.getInstance(tmp2);
    assertEquivalent(tmp2,tmp3);
    tmp.diff(tmp2);
    if (READ_NODES_PRIVILEGE_BITS.equals(pb)) {
      assertEquivalent(PrivilegeBits.EMPTY,tmp);
    }
 else {
      assertEquivalent(READ_NODES_PRIVILEGE_BITS,tmp);
    }
    assertEquivalent(tmp3,tmp2);
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIncludes(){
  assertTrue(PrivilegeBits.EMPTY.includes(PrivilegeBits.EMPTY));
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance();
  for (int i=0; i < 100; i++) {
    assertFalse(PrivilegeBits.EMPTY.includes(pb));
    assertTrue(pb.includes(PrivilegeBits.EMPTY));
    mod.add(pb);
    assertTrue(mod.includes(pb));
    PrivilegeBits nxt=pb.nextBits();
    assertTrue(nxt.includes(nxt));
    assertTrue(nxt.includes(PrivilegeBits.getInstance(nxt)));
    assertFalse(pb + " should not include " + nxt,pb.includes(nxt));
    assertFalse(nxt + " should not include " + pb,nxt.includes(pb));
    assertFalse(mod.includes(nxt));
    assertFalse(nxt.includes(mod));
    pb=nxt;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetainSimple(){
  PrivilegeBits pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  assertEquals(pb,pb.retain(pb));
  assertEquals(pb,pb.retain(READ_NODES_PRIVILEGE_BITS));
  pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  pb.retain(PrivilegeBits.getInstance());
  assertTrue(pb.isEmpty());
  pb=PrivilegeBits.getInstance(READ_NODES_PRIVILEGE_BITS);
  pb.retain(PrivilegeBits.EMPTY);
  assertTrue(pb.isEmpty());
  PrivilegeBits write=PrivilegeBits.BUILT_IN.get(PrivilegeBits.REP_WRITE);
  pb=PrivilegeBits.getInstance().add(write);
  assertEquals(pb,pb.retain(pb));
  assertEquals(pb,pb.retain(write));
  pb.retain(READ_NODES_PRIVILEGE_BITS);
  assertTrue(pb.isEmpty());
  pb.add(READ_NODES_PRIVILEGE_BITS).add(write);
  pb.retain(write);
  assertEquivalent(write,pb);
  assertFalse(pb.includes(READ_NODES_PRIVILEGE_BITS));
  PrivilegeBits lock=PrivilegeBits.BUILT_IN.get(PrivilegeBits.JCR_LOCK_MANAGEMENT);
  PrivilegeBits lw=PrivilegeBits.getInstance(write,lock);
  pb.add(READ_NODES_PRIVILEGE_BITS).add(write).add(lock);
  pb.retain(lw);
  assertEquivalent(lw,pb);
  assertFalse(pb.includes(READ_NODES_PRIVILEGE_BITS));
}

</code></pre>

<br>
<pre class="type-13 type-9 type-12 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddDifference(){
  try {
    PrivilegeBits.EMPTY.addDifference(PrivilegeBits.EMPTY,PrivilegeBits.EMPTY);
    fail("UnsupportedOperation expected");
  }
 catch (  UnsupportedOperationException e) {
  }
  PrivilegeBits pb=READ_NODES_PRIVILEGE_BITS;
  PrivilegeBits mod=PrivilegeBits.getInstance(pb);
  for (int i=0; i < 100; i++) {
    PrivilegeBits nxt=pb.nextBits();
    try {
      pb.addDifference(nxt,mod);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    try {
      pb.addDifference(nxt,READ_NODES_PRIVILEGE_BITS);
      fail("UnsupportedOperation expected");
    }
 catch (    UnsupportedOperationException e) {
    }
    PrivilegeBits tmp=PrivilegeBits.getInstance(mod);
    tmp.addDifference(nxt,READ_NODES_PRIVILEGE_BITS);
    mod.add(nxt);
    assertEquivalent(mod,tmp);
    if (!pb.equals(READ_NODES_PRIVILEGE_BITS)) {
      tmp=PrivilegeBits.getInstance(nxt);
      PrivilegeBits mod2=PrivilegeBits.getInstance(mod);
      tmp.addDifference(mod2,READ_NODES_PRIVILEGE_BITS);
      assertFalse(nxt.equals(tmp));
      assertEquivalent(mod2,mod);
      assertTrue(tmp.includes(pb));
      assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
      assertFalse(tmp.includes(mod));
    }
    tmp=PrivilegeBits.getInstance(nxt);
    PrivilegeBits mod2=PrivilegeBits.getInstance(mod);
    tmp.addDifference(READ_NODES_PRIVILEGE_BITS,mod2);
    assertEquivalent(nxt,tmp);
    assertEquivalent(mod2,mod);
    assertFalse(tmp.includes(pb));
    assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    assertFalse(tmp.includes(mod));
    tmp=PrivilegeBits.getInstance(nxt);
    tmp.addDifference(READ_NODES_PRIVILEGE_BITS,READ_NODES_PRIVILEGE_BITS);
    assertEquivalent(nxt,tmp);
    assertFalse(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    tmp=PrivilegeBits.getInstance(mod);
    tmp.addDifference(READ_NODES_PRIVILEGE_BITS,READ_NODES_PRIVILEGE_BITS);
    assertEquivalent(mod,tmp);
    assertTrue(tmp.includes(READ_NODES_PRIVILEGE_BITS));
    pb=nxt;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.action.PasswordValidationActionTest </h4><pre class="type-9 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPasswordValidationActionOnCreate() throws Exception {
  String hashed=PasswordUtil.buildPasswordHash("DWkej32H");
  testUser=getUserManager(root).createUser("testuser",hashed);
  root.commit();
  String pwValue=root.getTree(testUser.getPath()).getProperty(UserConstants.REP_PASSWORD).getValue(Type.STRING);
  assertFalse(PasswordUtil.isPlainTextPassword(pwValue));
  assertTrue(PasswordUtil.isSame(pwValue,hashed));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.security.user.util.PasswordUtilTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsPlainTextForNull() throws Exception {
  assertTrue(PasswordUtil.isPlainTextPassword(null));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsPlainTextPassword() throws Exception {
  for (  String pw : plainPasswords) {
    assertTrue(pw + " should be plain text.",PasswordUtil.isPlainTextPassword(pw));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPBKDF2WithHmacSHA1() throws Exception {
  String algo="PBKDF2WithHmacSHA1";
  String pw="pass\0word";
  int iterations=4096;
  String hash=PasswordUtil.buildPasswordHash(pw,algo,5,iterations);
  assertTrue(hash.startsWith("{PBKDF2WithHmacSHA1}"));
  int cntOctets=hash.substring(hash.lastIndexOf('-') + 1).length() / 2;
  assertEquals(16,cntOctets);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsPlainTextForPwHash() throws Exception {
  for (  String pwHash : hashedPasswords.values()) {
    assertFalse(pwHash + " should not be plain text.",PasswordUtil.isPlainTextPassword(pwHash));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testBuildPasswordHash() throws Exception {
  for (  String pw : plainPasswords) {
    String pwHash=PasswordUtil.buildPasswordHash(pw);
    assertFalse(pw.equals(pwHash));
  }
  List<Integer[]> l=new ArrayList<Integer[]>();
  l.add(new Integer[]{0,1000});
  l.add(new Integer[]{1,10});
  l.add(new Integer[]{8,50});
  l.add(new Integer[]{10,5});
  l.add(new Integer[]{-1,-1});
  for (  Integer[] params : l) {
    for (    String pw : plainPasswords) {
      int saltsize=params[0];
      int iterations=params[1];
      String pwHash=PasswordUtil.buildPasswordHash(pw,PasswordUtil.DEFAULT_ALGORITHM,saltsize,iterations);
      assertFalse(pw.equals(pwHash));
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testIsNotSame() throws Exception {
  String previous=null;
  for (  String pw : hashedPasswords.keySet()) {
    String pwHash=hashedPasswords.get(pw);
    assertFalse(pw,PasswordUtil.isSame(pw,pw));
    assertFalse(pwHash,PasswordUtil.isSame(pwHash,pwHash));
    if (previous != null) {
      assertFalse(previous,PasswordUtil.isSame(pwHash,previous));
    }
    previous=pw;
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIsSame() throws Exception {
  for (  String pw : hashedPasswords.keySet()) {
    String pwHash=hashedPasswords.get(pw);
    assertTrue("Not the same " + pw + ", "+ pwHash,PasswordUtil.isSame(pwHash,pw));
  }
  String pw="password";
  String pwHash=PasswordUtil.buildPasswordHash(pw,"SHA-1",4,50);
  assertTrue("Not the same '" + pw + "', "+ pwHash,PasswordUtil.isSame(pwHash,pw));
  pwHash=PasswordUtil.buildPasswordHash(pw,"md5",0,5);
  assertTrue("Not the same '" + pw + "', "+ pwHash,PasswordUtil.isSame(pwHash,pw));
  pwHash=PasswordUtil.buildPasswordHash(pw,"md5",-1,-1);
  assertTrue("Not the same '" + pw + "', "+ pwHash,PasswordUtil.isSame(pwHash,pw));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.AbstractRebaseDiffTest </h4><pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteDeletedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.removeProperty("x");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.removeProperty("x");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteDeletedProperty(    NodeBuilder builder,    PropertyState before){
      assertEquals(createProperty("x",1),before);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeDeletedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.removeProperty("x");
  headBuilder.removeProperty("y");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("x",1);
  branchBuilder.setProperty("y",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeDeletedProperty(    NodeBuilder builder,    PropertyState after){
      assertEquals(createProperty("y",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("p",1);
  headBuilder.setProperty("p",1);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("p",1);
  branchBuilder.setProperty("p",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void addExistingProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("p",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addExistingNodeWithConflict(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setChildNode("n");
  headBuilder.setChildNode("m").setChildNode("m1");
  headBuilder.getChildNode("m").setProperty("p",1);
  headBuilder.getChildNode("m").setChildNode("mm").setChildNode("mmm").setProperty("pp",1);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setChildNode("n");
  branchBuilder.setChildNode("m").setChildNode("m2");
  branchBuilder.getChildNode("m").setProperty("q",1);
  branchBuilder.getChildNode("m").setChildNode("mm").setChildNode("mmm").setProperty("pp",2);
  NodeState branch=branchBuilder.getNodeState();
  NodeBuilder builder=head.builder();
class ConflictResolver extends RebaseDiff {
    private final ConflictResolver parent;
    private ConflictResolver(    NodeBuilder builder){
      this(null,builder);
    }
    public ConflictResolver(    ConflictResolver parent,    NodeBuilder builder){
      super(builder);
      this.parent=parent;
    }
    @Override protected void resolve(){
      if (parent == null) {
        super.resolve();
      }
 else {
        parent.resolve();
      }
    }
    @Override protected AbstractRebaseDiff createDiff(    NodeBuilder builder,    String name){
      return new ConflictResolver(this,builder.getChildNode(name));
    }
    @Override protected void addExistingProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("pp",1),before);
      assertEquals(createProperty("pp",2),after);
      resolve();
    }
  }
  RebaseDiff rebaseDiff=new ConflictResolver(builder);
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeChangedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("x",11);
  headBuilder.setProperty("y",22);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.setProperty("x",11);
  branchBuilder.setProperty("y",0);
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeChangedProperty(    NodeBuilder builder,    PropertyState before,    PropertyState after){
      assertEquals(createProperty("y",0),after);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteDeletedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").remove();
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").remove();
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteDeletedNode(    NodeBuilder builder,    String name,    NodeState before){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void changeDeletedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").remove();
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").setChildNode("aa");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void changeDeletedNode(    NodeBuilder builder,    String name,    NodeState after){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteChangedProperty(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.setProperty("x",11);
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.removeProperty("x");
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteChangedProperty(    NodeBuilder builder,    PropertyState before){
      assertEquals(createProperty("x",1),before);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteChangedNode(){
  NodeBuilder headBuilder=base.builder();
  headBuilder.getChildNode("a").setChildNode("aa");
  NodeState head=headBuilder.getNodeState();
  NodeBuilder branchBuilder=base.builder();
  branchBuilder.getChildNode("a").remove();
  NodeState branch=branchBuilder.getNodeState();
  RebaseDiff rebaseDiff=new RebaseDiff(head.builder()){
    @Override protected void deleteChangedNode(    NodeBuilder builder,    String name,    NodeState before){
      assertEquals("a",name);
      resolve();
    }
  }
;
  branch.compareAgainstBaseState(base,rebaseDiff);
  assertTrue(rebaseDiff.isResolved());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.CheckpointTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkpoint() throws CommitFailedException {
  String cp=store.checkpoint(Long.MAX_VALUE);
  NodeBuilder builder=store.getRoot().builder();
  builder.setChildNode("new");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertFalse(root.equals(store.getRoot()));
  assertEquals(root,store.retrieve(cp));
  assertTrue(store.release(cp));
  assertNull(store.retrieve(cp));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void retrieveAny(){
  assertTrue(store.retrieve("r42-0-0") == null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.LargeNodeStateTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildNode(){
  assertTrue(state.getChildNode("x0").exists());
  assertTrue(state.getChildNode("x1").exists());
  assertTrue(state.getChildNode("x" + N).exists());
  assertFalse(state.getChildNode("x" + (N + 1)).exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeBuilderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void rebasePreservesNew(){
  NodeBuilder root=store.getRoot().builder();
  NodeBuilder added=root.setChildNode("added");
  assertTrue(root.hasChildNode("added"));
  assertTrue(added.isNew());
  store.rebase(root);
  assertTrue(added.exists());
  assertTrue(root.hasChildNode("added"));
  assertTrue(added.isNew());
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void deletes() throws CommitFailedException {
  NodeBuilder builder=store.getRoot().builder();
  builder.child("x").child("y").child("z");
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  builder=store.getRoot().builder();
  assertTrue("child node x should be present",builder.hasChildNode("x"));
  assertTrue("child node x/y should be present",builder.child("x").hasChildNode("y"));
  assertTrue("child node x/y/z should be present",builder.child("x").child("y").hasChildNode("z"));
  builder.getChildNode("x").remove();
  assertFalse("child node x not should be present",builder.hasChildNode("x"));
  assertFalse("child node x/y not should be present",builder.child("x").hasChildNode("y"));
  assertFalse("child node x/y/z not should not be present",builder.child("x").child("y").hasChildNode("z"));
  store.merge(builder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeStateTest </h4><pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperty(){
  assertEquals("a",state.getProperty("a").getName());
  assertEquals(1,(long)state.getProperty("a").getValue(LONG));
  assertEquals("b",state.getProperty("b").getName());
  assertEquals(2,(long)state.getProperty("b").getValue(LONG));
  assertEquals("c",state.getProperty("c").getName());
  assertEquals(3,(long)state.getProperty("c").getValue(LONG));
  assertNull(state.getProperty("x"));
  assertFalse(state.hasProperty("x"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetChildNode(){
  assertTrue(state.getChildNode("x").exists());
  assertTrue(state.getChildNode("y").exists());
  assertTrue(state.getChildNode("z").exists());
  assertFalse(state.getChildNode("a").exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.spi.state.NodeStoreTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void move(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  NodeBuilder y=test.getChildNode("y");
  assertTrue(x.moveTo(y,"xx"));
  assertFalse(x.exists());
  assertTrue(y.exists());
  assertFalse(test.hasChildNode("x"));
  assertTrue(y.hasChildNode("xx"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void beforeCommitHook() throws CommitFailedException {
  NodeState root=store.getRoot();
  NodeBuilder rootBuilder=root.builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  newNodeBuilder.setProperty("n",42);
  testBuilder.getChildNode("a").remove();
  store.merge(rootBuilder,new CommitHook(){
    @Nonnull @Override public NodeState processCommit(    NodeState before,    NodeState after,    CommitInfo info){
      NodeBuilder rootBuilder=after.builder();
      NodeBuilder testBuilder=rootBuilder.child("test");
      testBuilder.child("fromHook");
      return rootBuilder.getNodeState();
    }
  }
,CommitInfo.EMPTY);
  NodeState test=store.getRoot().getChildNode("test");
  assertTrue(test.getChildNode("newNode").exists());
  assertTrue(test.getChildNode("fromHook").exists());
  assertFalse(test.getChildNode("a").exists());
  assertEquals(42,(long)test.getChildNode("newNode").getProperty("n").getValue(LONG));
  assertEquals(test,store.getRoot().getChildNode("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveNonExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder any=test.getChildNode("any");
  NodeBuilder y=test.getChildNode("y");
  assertFalse(any.moveTo(y,"xx"));
  assertFalse(any.exists());
  assertTrue(y.exists());
  assertFalse(y.hasChildNode("xx"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void rebaseWithFailedMerge() throws CommitFailedException {
  NodeBuilder rootBuilder=store.getRoot().builder();
  rootBuilder.child("foo");
  NodeBuilder b=store.getRoot().builder();
  b.child("bar");
  store.merge(b,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  try {
    store.merge(rootBuilder,new CommitHook(){
      @Nonnull @Override public NodeState processCommit(      NodeState before,      NodeState after,      CommitInfo info) throws CommitFailedException {
        throw new CommitFailedException("",0,"commit rejected");
      }
    }
,CommitInfo.EMPTY);
    fail("must throw CommitFailedException");
  }
 catch (  CommitFailedException e) {
  }
  NodeState root=store.merge(rootBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(root.hasChildNode("bar"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToSelfNonExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder any=test.getChildNode("any");
  assertFalse(any.moveTo(test,"any"));
  assertFalse(any.exists());
  assertFalse(test.hasChildNode("any"));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void merge() throws CommitFailedException {
  NodeState base=store.getRoot();
  NodeBuilder builder1=base.builder();
  NodeBuilder builder2=base.builder();
  builder1.setChildNode("node1");
  builder2.setChildNode("node2");
  store.merge(builder1,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasChildNode("node1"));
  assertFalse(store.getRoot().hasChildNode("node2"));
  store.merge(builder2,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  assertTrue(store.getRoot().hasChildNode("node1"));
  assertTrue(store.getRoot().hasChildNode("node2"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-16 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void afterCommitHook() throws CommitFailedException, InterruptedException {
  assumeTrue(store instanceof Observable);
  final AtomicReference<NodeState> observedRoot=new AtomicReference<NodeState>(null);
  final CountDownLatch latch=new CountDownLatch(2);
  ((Observable)store).addObserver(new Observer(){
    @Override public void contentChanged(    @Nonnull NodeState root,    @Nullable CommitInfo info){
      if (root.getChildNode("test").hasChildNode("newNode")) {
        observedRoot.set(checkNotNull(root));
        latch.countDown();
      }
    }
  }
);
  NodeState root=store.getRoot();
  NodeBuilder rootBuilder=root.builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  newNodeBuilder.setProperty("n",42);
  testBuilder.getChildNode("a").remove();
  store.merge(rootBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState newRoot=store.getRoot();
  latch.await(2,TimeUnit.SECONDS);
  NodeState after=observedRoot.get();
  assertNotNull(after);
  assertTrue(after.getChildNode("test").getChildNode("newNode").exists());
  assertFalse(after.getChildNode("test").getChildNode("a").exists());
  assertEquals(42,(long)after.getChildNode("test").getChildNode("newNode").getProperty("n").getValue(LONG));
  assertEquals(newRoot,after);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void manyChildNodes() throws CommitFailedException {
  NodeBuilder root=store.getRoot().builder();
  NodeBuilder parent=root.child("parent");
  for (int i=0; i <= 100; i++) {
    parent.child("child-" + i);
  }
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  NodeState base=store.getRoot();
  root=base.builder();
  parent=root.child("parent");
  parent.child("child-new");
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  Diff diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(0,diff.removed.size());
  assertEquals(1,diff.added.size());
  assertEquals("child-new",diff.added.get(0));
  base=store.getRoot();
  root=base.builder();
  parent=root.getChildNode("parent");
  parent.getChildNode("child-new").moveTo(parent,"child-moved");
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(1,diff.removed.size());
  assertEquals("child-new",diff.removed.get(0));
  assertEquals(1,diff.added.size());
  assertEquals("child-moved",diff.added.get(0));
  base=store.getRoot();
  root=base.builder();
  parent=root.child("parent");
  parent.child("child-moved").setProperty("foo","value");
  parent.child("child-moved").setProperty(new MultiStringPropertyState("bar",Arrays.asList("value")));
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(0,diff.removed.size());
  assertEquals(0,diff.added.size());
  assertEquals(2,diff.addedProperties.size());
  assertTrue(diff.addedProperties.contains("foo"));
  assertTrue(diff.addedProperties.contains("bar"));
  base=store.getRoot();
  root=base.builder();
  parent=root.child("parent");
  parent.setProperty("foo","value");
  parent.setProperty(new MultiStringPropertyState("bar",Arrays.asList("value")));
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(0,diff.removed.size());
  assertEquals(0,diff.added.size());
  assertEquals(2,diff.addedProperties.size());
  assertTrue(diff.addedProperties.contains("foo"));
  assertTrue(diff.addedProperties.contains("bar"));
  base=store.getRoot();
  root=base.builder();
  parent=root.child("parent");
  parent.getChildNode("child-moved").remove();
  store.merge(root,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  diff=new Diff();
  store.getRoot().compareAgainstBaseState(base,diff);
  assertEquals(1,diff.removed.size());
  assertEquals(0,diff.added.size());
  assertEquals("child-moved",diff.removed.get(0));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleMerge() throws CommitFailedException {
  NodeBuilder rootBuilder=store.getRoot().builder();
  NodeBuilder testBuilder=rootBuilder.child("test");
  NodeBuilder newNodeBuilder=testBuilder.child("newNode");
  testBuilder.getChildNode("x").remove();
  newNodeBuilder.setProperty("n",42);
  NodeState testState=rootBuilder.getNodeState().getChildNode("test");
  assertTrue(testState.getChildNode("newNode").exists());
  assertFalse(testState.getChildNode("x").exists());
  assertEquals(42,(long)testState.getChildNode("newNode").getProperty("n").getValue(LONG));
  testState=store.getRoot().getChildNode("test");
  assertFalse(testState.getChildNode("newNode").exists());
  assertTrue(testState.getChildNode("x").exists());
  store.merge(rootBuilder,EmptyHook.INSTANCE,CommitInfo.EMPTY);
  testState=store.getRoot().getChildNode("test");
  assertTrue(testState.getChildNode("newNode").exists());
  assertFalse(testState.getChildNode("x").exists());
  assertEquals(42,(long)testState.getChildNode("newNode").getProperty("n").getValue(LONG));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToSelf(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  assertFalse(x.moveTo(test,"x"));
  assertTrue(x.exists());
  assertTrue(test.hasChildNode("x"));
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToDescendant(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  if (fixture == NodeStoreFixtures.SEGMENT_MK || fixture == NodeStoreFixtures.MEMORY_NS) {
    assertTrue(x.moveTo(x,"xx"));
    assertFalse(x.exists());
    assertFalse(test.hasChildNode("x"));
  }
 else {
    assertFalse(x.moveTo(x,"xx"));
    assertTrue(x.exists());
    assertTrue(test.hasChildNode("x"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void renameToExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  assertFalse(x.moveTo(test,"y"));
  assertTrue(x.exists());
  assertTrue(test.hasChildNode("x"));
  assertTrue(test.hasChildNode("y"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void moveToExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  assertFalse(x.moveTo(test,"y"));
  assertTrue(x.exists());
  assertTrue(test.hasChildNode("x"));
  assertTrue(test.hasChildNode("y"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void renameNonExisting(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder any=test.getChildNode("any");
  assertFalse(any.moveTo(test,"xx"));
  assertFalse(any.exists());
  assertFalse(test.hasChildNode("xx"));
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void rename(){
  NodeBuilder test=store.getRoot().builder().getChildNode("test");
  NodeBuilder x=test.getChildNode("x");
  assertTrue(x.moveTo(test,"xx"));
  assertFalse(x.exists());
  assertFalse(test.hasChildNode("x"));
  assertTrue(test.hasChildNode("xx"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.stats.DefaultStatisticsProviderTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void metricOnly() throws Exception {
  MeterStats meterStats=statsProvider.getMeter("test",StatsOptions.METRICS_ONLY);
  assertFalse(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timer() throws Exception {
  TimerStats timerStats=statsProvider.getTimer("test",StatsOptions.DEFAULT);
  assertNotNull(timerStats);
  timerStats.update(100,TimeUnit.SECONDS);
  assertEquals(TimeUnit.SECONDS.toMillis(100),statsImpl(statsProvider).getCounter("test",false).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void meter() throws Exception {
  MeterStats meterStats=statsProvider.getMeter("test",StatsOptions.DEFAULT);
  assertNotNull(meterStats);
  meterStats.mark();
  assertEquals(1,statsImpl(statsProvider).getCounter("test",true).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counter() throws Exception {
  CounterStats counterStats=statsProvider.getCounterStats("test",StatsOptions.DEFAULT);
  assertNotNull(counterStats);
  counterStats.inc();
  assertEquals(1,statsImpl(statsProvider).getCounter("test",false).get());
  assertTrue(getRegisteredTimeSeries(statsProvider).contains("test"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.LongNameTest </h4><pre class="type-9 type-7 type-6 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void longNameOnSegmentStoreWorksFine() throws RepositoryException, IOException {
  SegmentStore memoryStore=new MemoryStore();
  try {
    SegmentNodeStore nodeStore=SegmentNodeStore.newSegmentNodeStore(memoryStore).create();
    upgrade(nodeStore,false);
    NodeState parent=getParent(nodeStore.getRoot());
    Assert.assertTrue(parent.hasChildNode(NOT_TOO_LONG_NAME));
    Assert.assertTrue(parent.hasChildNode(TOO_LONG_NAME));
  }
  finally {
    memoryStore.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void longNameShouldBeSkipped() throws RepositoryException, IOException {
  DocumentNodeStore nodeStore=new DocumentMK.Builder().getNodeStore();
  try {
    upgrade(nodeStore,true);
    NodeState parent=getParent(nodeStore.getRoot());
    Assert.assertTrue(parent.hasChildNode(NOT_TOO_LONG_NAME));
    Assert.assertEquals(1,parent.getChildNodeCount(10));
  }
  finally {
    nodeStore.dispose();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.PrivilegeUpgradeTest </h4><pre class="type-9 type-12 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyPrivileges() throws RepositoryException {
  Set<String> nonAggregatePrivileges=newHashSet(REP_READ_NODES,REP_READ_PROPERTIES,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL,JCR_NODE_TYPE_MANAGEMENT,JCR_VERSION_MANAGEMENT,JCR_LOCK_MANAGEMENT,JCR_LIFECYCLE_MANAGEMENT,JCR_RETENTION_MANAGEMENT,JCR_WORKSPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT,JCR_NAMESPACE_MANAGEMENT,REP_PRIVILEGE_MANAGEMENT,REP_USER_MANAGEMENT,REP_INDEX_DEFINITION_MANAGEMENT,"test:privilege","test:privilege2");
  Map<String,Set<String>> aggregatePrivileges=Maps.newHashMap();
  aggregatePrivileges.put(JCR_READ,ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES));
  aggregatePrivileges.put(JCR_MODIFY_PROPERTIES,ImmutableSet.of(REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES));
  aggregatePrivileges.put(JCR_WRITE,ImmutableSet.of(JCR_MODIFY_PROPERTIES,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE));
  aggregatePrivileges.put(REP_WRITE,ImmutableSet.of(JCR_WRITE,JCR_MODIFY_PROPERTIES,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_NODE_TYPE_MANAGEMENT));
  aggregatePrivileges.put(JCR_ALL,ImmutableSet.of(REP_READ_NODES,REP_READ_PROPERTIES,REP_ADD_PROPERTIES,REP_ALTER_PROPERTIES,REP_REMOVE_PROPERTIES,JCR_ADD_CHILD_NODES,JCR_REMOVE_CHILD_NODES,JCR_REMOVE_NODE,JCR_READ_ACCESS_CONTROL,JCR_MODIFY_ACCESS_CONTROL,JCR_NODE_TYPE_MANAGEMENT,JCR_VERSION_MANAGEMENT,JCR_LOCK_MANAGEMENT,JCR_LIFECYCLE_MANAGEMENT,JCR_RETENTION_MANAGEMENT,JCR_WORKSPACE_MANAGEMENT,JCR_NODE_TYPE_DEFINITION_MANAGEMENT,JCR_NAMESPACE_MANAGEMENT,REP_PRIVILEGE_MANAGEMENT,REP_USER_MANAGEMENT,REP_INDEX_DEFINITION_MANAGEMENT,JCR_READ,JCR_MODIFY_PROPERTIES,JCR_WRITE,REP_WRITE,"test:privilege","test:privilege2","test:aggregate","test:aggregate2"));
  aggregatePrivileges.put("test:aggregate",ImmutableSet.of(JCR_READ,REP_READ_NODES,REP_READ_PROPERTIES,"test:privilege"));
  aggregatePrivileges.put("test:aggregate2",ImmutableSet.of(JCR_READ,REP_READ_NODES,REP_READ_PROPERTIES,"test:privilege","test:privilege2","test:aggregate"));
  JackrabbitSession session=createAdminSession();
  try {
    JackrabbitWorkspace workspace=(JackrabbitWorkspace)session.getWorkspace();
    PrivilegeManager manager=workspace.getPrivilegeManager();
    Privilege[] privileges=manager.getRegisteredPrivileges();
    for (    Privilege privilege : privileges) {
      if (privilege.isAggregate()) {
        Set<String> expected=aggregatePrivileges.remove(privilege.getName());
        if (expected != null) {
          String[] actual=getNames(privilege.getAggregatePrivileges());
          assertTrue("Miss match in aggregate privilege " + privilege.getName() + " expected "+ expected+ " actual "+ Arrays.toString(actual),newHashSet(expected).equals(newHashSet(actual)));
        }
      }
 else {
        nonAggregatePrivileges.remove(privilege.getName());
      }
    }
    assertTrue("Missing non aggregate privileges: " + nonAggregatePrivileges,nonAggregatePrivileges.isEmpty());
    assertTrue("Missing aggregate privileges: " + aggregatePrivileges.keySet(),aggregatePrivileges.isEmpty());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomPrivileges() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    JackrabbitWorkspace workspace=(JackrabbitWorkspace)session.getWorkspace();
    PrivilegeManager manager=workspace.getPrivilegeManager();
    Privilege privilege=manager.getPrivilege("test:privilege");
    assertNotNull(privilege);
    assertFalse(privilege.isAbstract());
    assertFalse(privilege.isAggregate());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    Privilege privilege2=manager.getPrivilege("test:privilege2");
    assertNotNull(privilege2);
    assertTrue(privilege2.isAbstract());
    assertFalse(privilege2.isAggregate());
    assertEquals(0,privilege.getDeclaredAggregatePrivileges().length);
    Privilege aggregate=manager.getPrivilege("test:aggregate");
    assertNotNull(aggregate);
    assertFalse(aggregate.isAbstract());
    assertTrue(aggregate.isAggregate());
    List<Privilege> agg=ImmutableList.copyOf(aggregate.getDeclaredAggregatePrivileges());
    assertEquals(2,agg.size());
    assertTrue(agg.contains(privilege));
    assertTrue(agg.contains(manager.getPrivilege(JCR_READ)));
    Privilege aggregate2=manager.getPrivilege("test:aggregate2");
    assertNotNull(aggregate2);
    assertTrue(aggregate2.isAbstract());
    assertTrue(aggregate2.isAggregate());
    List<Privilege> agg2=ImmutableList.copyOf(aggregate2.getDeclaredAggregatePrivileges());
    assertEquals(2,agg2.size());
    assertTrue(agg2.contains(aggregate));
    assertTrue(agg2.contains(privilege2));
    Privilege jcrAll=manager.getPrivilege("jcr:all");
    List<Privilege> privileges=asList(jcrAll.getAggregatePrivileges());
    assertTrue(privileges.contains(privilege));
    assertTrue(privileges.contains(privilege2));
    assertTrue(privileges.contains(aggregate));
    assertTrue(privileges.contains(aggregate2));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositoryGroupMemberUpgradeTest </h4><pre class="type-13 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGroupNodeTypes() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumGroups(); i++) {
      Group grp=(Group)userMgr.getAuthorizable(TEST_GROUP_PREFIX + i);
      assertNotNull(grp);
      Node grpNode=session.getNode(grp.getPath());
      NodeType nt=grpNode.getPrimaryNodeType();
      assertEquals("Migrated group needs to be rep:Group",UserConstants.NT_REP_GROUP,nt.getName());
      assertTrue("Migrated group needs to be new node type",nt.isNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyMemberOf() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumUsers(); i++) {
      User user=(User)userMgr.getAuthorizable(TEST_USER_PREFIX + i);
      assertNotNull(user);
      Set<String> groups=new HashSet<String>();
      for (int j=0; j < getNumGroups(); j++) {
        groups.add(TEST_GROUP_PREFIX + j);
      }
      Iterator<Group> groupIterator=user.declaredMemberOf();
      while (groupIterator.hasNext()) {
        Group grp=groupIterator.next();
        assertTrue("user must be member of group " + grp.getID(),groups.remove(grp.getID()));
      }
      assertEquals("user " + user.getID() + " must be member of all groups",0,groups.size());
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-9 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyMembers() throws Exception {
  JackrabbitSession session=createAdminSession();
  try {
    UserManager userMgr=session.getUserManager();
    for (int i=0; i < getNumGroups(); i++) {
      Group grp=(Group)userMgr.getAuthorizable(TEST_GROUP_PREFIX + i);
      assertNotNull(grp);
      Set<String> testUsers=new HashSet<String>();
      for (int j=0; j < getNumUsers(); j++) {
        testUsers.add(TEST_USER_PREFIX + j);
      }
      Iterator<Authorizable> declaredMembers=grp.getDeclaredMembers();
      while (declaredMembers.hasNext()) {
        Authorizable auth=declaredMembers.next();
        assertTrue("group must have member " + auth.getID(),testUsers.remove(auth.getID()));
      }
      assertEquals("group must have all members",0,testUsers.size());
    }
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositorySidegradeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyVersionHistory() throws RepositoryException {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/versionable"));
    Node versionable=session.getNode("/versionable");
    assertTrue(versionable.hasNode("child"));
    Node child=versionable.getNode("child");
    assertTrue(child.hasNode("child2"));
    Node child2=child.getNode("child2");
    assertFalse(versionable.isCheckedOut());
    assertTrue(versionable.hasProperty(JCR_UUID));
    assertFalse(child.isCheckedOut());
    assertTrue(child.hasProperty(JCR_UUID));
    assertFalse(child2.isCheckedOut());
    assertFalse(child2.hasProperty(JCR_UUID));
    VersionManager manager=session.getWorkspace().getVersionManager();
    Version version=manager.getBaseVersion("/versionable");
    Node frozen=version.getFrozenNode();
    assertEquals(versionable.getPrimaryNodeType().getName(),frozen.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertEquals(versionable.getMixinNodeTypes()[0].getName(),frozen.getProperty(JCR_FROZENMIXINTYPES).getValues()[0].getString());
    assertEquals(versionable.getIdentifier(),frozen.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild=frozen.getNode("child");
    assertEquals(child.getPrimaryNodeType().getName(),frozenChild.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child.getIdentifier(),frozenChild.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild2=frozenChild.getNode("child2");
    assertEquals(child2.getPrimaryNodeType().getName(),frozenChild2.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild2.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child2.getIdentifier(),frozenChild2.getProperty(JCR_FROZENUUID).getString());
    VersionHistory history=manager.getVersionHistory("/versionable");
    assertTrue(history.isNodeType("rep:VersionablePaths"));
    Property versionablePath=history.getProperty("default");
    assertEquals("/versionable",versionablePath.getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGenericProperties() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.BOOLEAN,properties.getProperty("boolean").getType());
    assertEquals(true,properties.getProperty("boolean").getBoolean());
    assertEquals(PropertyType.BINARY,properties.getProperty("binary").getType());
    Binary binary=properties.getProperty("binary").getBinary();
    try {
      InputStream stream=binary.getStream();
      try {
        for (        byte aBINARY : BINARY) {
          assertEquals(aBINARY,(byte)stream.read());
        }
        assertEquals(-1,stream.read());
      }
  finally {
        stream.close();
      }
    }
  finally {
      binary.dispose();
    }
    assertEquals(PropertyType.DATE,properties.getProperty("date").getType());
    assertEquals(DATE.getTimeInMillis(),properties.getProperty("date").getDate().getTimeInMillis());
    assertEquals(PropertyType.DECIMAL,properties.getProperty("decimal").getType());
    assertEquals(new BigDecimal(123),properties.getProperty("decimal").getDecimal());
    assertEquals(PropertyType.DOUBLE,properties.getProperty("double").getType());
    assertEquals(Math.PI,properties.getProperty("double").getDouble());
    assertEquals(PropertyType.LONG,properties.getProperty("long").getType());
    assertEquals(9876543210L,properties.getProperty("long").getLong());
    assertEquals(PropertyType.STRING,properties.getProperty("string").getType());
    assertEquals("test",properties.getProperty("string").getString());
    assertEquals(PropertyType.STRING,properties.getProperty("multiple").getType());
    Value[] values=properties.getProperty("multiple").getValues();
    assertEquals(3,values.length);
    assertEquals("a",values[0].getString());
    assertEquals("b",values[1].getString());
    assertEquals("c",values[2].getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyReplacedBuiltinNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    NodeType nt=manager.getNodeType(UserConstants.NT_REP_GROUP);
    assertTrue("Migrated repository must have new nodetype definitions",nt.isNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyNewBuiltinNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
    assertTrue(manager.hasNodeType(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyAsync() throws Exception {
  NodeState state=targetNodeStore.getRoot().getChildNode(":async");
  assertFalse(state.hasProperty("test"));
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReferencePropertiesContent() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/referenceable"));
    String testNodeIdentifier=session.getNode("/referenceable").getIdentifier();
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.REFERENCE,properties.getProperty("reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("reference").getString());
    assertEquals("/referenceable",properties.getProperty("reference").getNode().getPath());
    PropertyIterator refs=session.getNode("/referenceable").getReferences();
    assertTrue(refs.hasNext());
    assertEquals(properties.getPath() + "/reference",refs.nextProperty().getPath());
    assertFalse(refs.hasNext());
    PropertyIterator refs2=session.getNode("/versionable").getReferences();
    assertTrue(refs2.hasNext());
    assertEquals(properties.getPath() + "/mv_reference",refs2.nextProperty().getPath());
    assertFalse(refs2.hasNext());
    assertEquals(PropertyType.WEAKREFERENCE,properties.getProperty("weak_reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("weak_reference").getString());
    assertEquals("/referenceable",properties.getProperty("weak_reference").getNode().getPath());
    PropertyIterator weakRefs=session.getNode("/referenceable").getWeakReferences();
    assertTrue(weakRefs.hasNext());
    assertEquals(properties.getPath() + "/weak_reference",weakRefs.nextProperty().getPath());
    assertFalse(weakRefs.hasNext());
    PropertyIterator weakRefs2=session.getNode("/versionable").getWeakReferences();
    assertTrue(weakRefs2.hasNext());
    assertEquals(properties.getPath() + "/mv_weak_reference",weakRefs2.nextProperty().getPath());
    assertFalse(weakRefs2.hasNext());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType("test:unstructured"));
    NodeType type=manager.getNodeType("test:unstructured");
    assertFalse(type.isMixin());
    assertTrue(type.isNodeType("nt:unstructured"));
    boolean foundDefaultString=false;
    boolean foundDefaultPath=false;
    for (    PropertyDefinition pDef : type.getPropertyDefinitions()) {
      if ("defaultString".equals(pDef.getName())) {
        assertEquals(PropertyType.STRING,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("stringValue",pDef.getDefaultValues()[0].getString());
        foundDefaultString=true;
      }
 else       if ("defaultPath".equals(pDef.getName())) {
        assertEquals(PropertyType.PATH,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("/jcr:path/nt:value",pDef.getDefaultValues()[0].getString());
        foundDefaultPath=true;
      }
    }
    assertTrue("Expected property definition with name \"defaultString\"",foundDefaultString);
    assertTrue("Expected property definition with name \"defaultPath\"",foundDefaultPath);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.RepositoryUpgradeTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyVersionHistory() throws RepositoryException {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/versionable"));
    Node versionable=session.getNode("/versionable");
    assertTrue(versionable.hasNode("child"));
    Node child=versionable.getNode("child");
    assertTrue(child.hasNode("child2"));
    Node child2=child.getNode("child2");
    assertFalse(versionable.isCheckedOut());
    assertTrue(versionable.hasProperty(JCR_UUID));
    assertFalse(child.isCheckedOut());
    assertTrue(child.hasProperty(JCR_UUID));
    assertFalse(child2.isCheckedOut());
    assertFalse(child2.hasProperty(JCR_UUID));
    VersionManager manager=session.getWorkspace().getVersionManager();
    Version version=manager.getBaseVersion("/versionable");
    Node frozen=version.getFrozenNode();
    assertEquals(versionable.getPrimaryNodeType().getName(),frozen.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertEquals(versionable.getMixinNodeTypes()[0].getName(),frozen.getProperty(JCR_FROZENMIXINTYPES).getValues()[0].getString());
    assertEquals(versionable.getIdentifier(),frozen.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild=frozen.getNode("child");
    assertEquals(child.getPrimaryNodeType().getName(),frozenChild.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child.getIdentifier(),frozenChild.getProperty(JCR_FROZENUUID).getString());
    Node frozenChild2=frozenChild.getNode("child2");
    assertEquals(child2.getPrimaryNodeType().getName(),frozenChild2.getProperty(JCR_FROZENPRIMARYTYPE).getString());
    assertFalse(frozenChild2.hasProperty(JCR_FROZENMIXINTYPES));
    assertEquals("OAK-1789",child2.getIdentifier(),frozenChild2.getProperty(JCR_FROZENUUID).getString());
    VersionHistory history=manager.getVersionHistory("/versionable");
    assertTrue(history.isNodeType("rep:VersionablePaths"));
    Property versionablePath=history.getProperty("default");
    assertEquals("/versionable",versionablePath.getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-12 type-7 type-6 type-4 type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyCustomNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType("test:unstructured"));
    NodeType type=manager.getNodeType("test:unstructured");
    assertFalse(type.isMixin());
    assertTrue(type.isNodeType("nt:unstructured"));
    boolean foundDefaultString=false;
    boolean foundDefaultPath=false;
    for (    PropertyDefinition pDef : type.getPropertyDefinitions()) {
      if ("defaultString".equals(pDef.getName())) {
        assertEquals(PropertyType.STRING,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("stringValue",pDef.getDefaultValues()[0].getString());
        foundDefaultString=true;
      }
 else       if ("defaultPath".equals(pDef.getName())) {
        assertEquals(PropertyType.PATH,pDef.getRequiredType());
        assertNotNull(pDef.getDefaultValues());
        assertEquals(1,pDef.getDefaultValues().length);
        assertEquals("/jcr:path/nt:value",pDef.getDefaultValues()[0].getString());
        foundDefaultPath=true;
      }
    }
    assertTrue("Expected property definition with name \"defaultString\"",foundDefaultString);
    assertTrue("Expected property definition with name \"defaultPath\"",foundDefaultPath);
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-13 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifySNS() throws RepositoryException {
  Set<String> nodeNames=Sets.newHashSet("sibling","sibling[2]","sibling[3]");
  Session session=createAdminSession();
  try {
    Node sns=session.getNode("/sns");
    NodeIterator ns=sns.getNodes();
    int c=0;
    while (ns.hasNext()) {
      Node node=ns.nextNode();
      String name=node.getName();
      assertTrue("Unexpected node: " + name,nodeNames.remove(name));
    }
    assertTrue("Missing nodes: " + nodeNames,nodeNames.isEmpty());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyGenericProperties() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.BOOLEAN,properties.getProperty("boolean").getType());
    assertEquals(true,properties.getProperty("boolean").getBoolean());
    assertEquals(PropertyType.BINARY,properties.getProperty("binary").getType());
    Binary binary=properties.getProperty("binary").getBinary();
    try {
      InputStream stream=binary.getStream();
      try {
        for (        byte aBINARY : BINARY) {
          assertEquals(aBINARY,(byte)stream.read());
        }
        assertEquals(-1,stream.read());
      }
  finally {
        stream.close();
      }
    }
  finally {
      binary.dispose();
    }
    assertEquals(PropertyType.DATE,properties.getProperty("date").getType());
    assertEquals(DATE.getTimeInMillis(),properties.getProperty("date").getDate().getTimeInMillis());
    assertEquals(PropertyType.DECIMAL,properties.getProperty("decimal").getType());
    assertEquals(new BigDecimal(123),properties.getProperty("decimal").getDecimal());
    assertEquals(PropertyType.DOUBLE,properties.getProperty("double").getType());
    assertEquals(Math.PI,properties.getProperty("double").getDouble());
    assertEquals(PropertyType.LONG,properties.getProperty("long").getType());
    assertEquals(9876543210L,properties.getProperty("long").getLong());
    assertEquals(PropertyType.STRING,properties.getProperty("string").getType());
    assertEquals("test",properties.getProperty("string").getString());
    assertEquals(PropertyType.STRING,properties.getProperty("multiple").getType());
    Value[] values=properties.getProperty("multiple").getValues();
    assertEquals(3,values.length);
    assertEquals("a",values[0].getString());
    assertEquals("b",values[1].getString());
    assertEquals("c",values[2].getString());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReferencePropertiesContent() throws Exception {
  Session session=createAdminSession();
  try {
    assertTrue(session.nodeExists("/referenceable"));
    String testNodeIdentifier=session.getNode("/referenceable").getIdentifier();
    assertTrue(session.nodeExists("/properties"));
    Node properties=session.getNode("/properties");
    assertEquals(PropertyType.REFERENCE,properties.getProperty("reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("reference").getString());
    assertEquals("/referenceable",properties.getProperty("reference").getNode().getPath());
    PropertyIterator refs=session.getNode("/referenceable").getReferences();
    assertTrue(refs.hasNext());
    assertEquals(properties.getPath() + "/reference",refs.nextProperty().getPath());
    assertFalse(refs.hasNext());
    PropertyIterator refs2=session.getNode("/versionable").getReferences();
    assertTrue(refs2.hasNext());
    assertEquals(properties.getPath() + "/mv_reference",refs2.nextProperty().getPath());
    assertFalse(refs2.hasNext());
    assertEquals(PropertyType.WEAKREFERENCE,properties.getProperty("weak_reference").getType());
    assertEquals(testNodeIdentifier,properties.getProperty("weak_reference").getString());
    assertEquals("/referenceable",properties.getProperty("weak_reference").getNode().getPath());
    PropertyIterator weakRefs=session.getNode("/referenceable").getWeakReferences();
    assertTrue(weakRefs.hasNext());
    assertEquals(properties.getPath() + "/weak_reference",weakRefs.nextProperty().getPath());
    assertFalse(weakRefs.hasNext());
    PropertyIterator weakRefs2=session.getNode("/versionable").getWeakReferences();
    assertTrue(weakRefs2.hasNext());
    assertEquals(properties.getPath() + "/mv_weak_reference",weakRefs2.nextProperty().getPath());
    assertFalse(weakRefs2.hasNext());
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyNewBuiltinNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    assertTrue(manager.hasNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
    assertTrue(manager.hasNodeType(IndexConstants.INDEX_DEFINITIONS_NODE_TYPE));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyReplacedBuiltinNodeTypes() throws Exception {
  Session session=createAdminSession();
  try {
    NodeTypeManager manager=session.getWorkspace().getNodeTypeManager();
    NodeType nt=manager.getNodeType(UserConstants.NT_REP_GROUP);
    assertTrue("Migrated repository must have new nodetype definitions",nt.isNodeType(UserConstants.NT_REP_MEMBER_REFERENCES));
  }
  finally {
    session.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.blob.LengthCachingDataStoreTest </h4><pre class="type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void delegateRecordTest() throws Exception {
  FileDataStore ds=new FileDataStore();
  byte[] data=bytes(ds.getMinRecordLength() + 10);
  ds.init(tempFolder.getRoot().getAbsolutePath());
  DataRecord dr=ds.addRecord(new ByteArrayInputStream(data));
  File mappingFile=new File(tempFolder.getRoot(),"mapping.txt");
  String text=String.format("%s|%s",data.length,dr.getIdentifier().toString());
  Files.write(text,mappingFile,Charset.defaultCharset());
  LengthCachingDataStore fds=new LengthCachingDataStore();
  fds.setDelegateClass(FileDataStore.class.getName());
  fds.setMappingFilePath(mappingFile.getAbsolutePath());
  fds.init(tempFolder.getRoot().getAbsolutePath());
  DataRecord dr2=fds.getRecordIfStored(dr.getIdentifier());
  assertEquals(dr,dr2);
  assertEquals(dr.getLength(),dr2.getLength());
  assertTrue(ByteStreams.equal(supplier(dr),supplier(dr2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.upgrade.nodestate.FilteringNodeStateTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void exists(){
  final NodeState decorated=wrap("/",rootNodeState,null,of("/content/foo"));
  assertTrue("/content should exist and be visible",getNodeState(decorated,"/content").exists());
  assertFalse("/content/foo should be hidden",getNodeState(decorated,"/content/foo").exists());
  assertFalse("/nonexisting should not exist",getNodeState(decorated,"/nonexisting").exists());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void shouldDelegateHasProperty(){
  final NodeState decorated=wrap("/",rootNodeState,null,of("/content/foo/de"));
  assertTrue(getNodeState(decorated,"/content").hasProperty(OAK_CHILD_ORDER));
  assertFalse(getNodeState(decorated,"/content").hasProperty("foo"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-19 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldDecorateAncestorOfExcludedDescendants(){
  final NodeState foo=getNodeState(rootNodeState,"/content/foo");
  final NodeState decorated=wrap("/content/foo",foo,of("/content"),of("/content/foo/de"));
  assertNotSame("foo should not be identical to decorated",foo,decorated);
  assertMissing(decorated,"de");
  assertExists(decorated,"en");
  assertFalse("child nodes \"de\" should not be equal",getNodeState(foo,"de").equals(getNodeState(decorated,"de")));
  final NodeState en=getNodeState(decorated,"en");
  assertEquals("child nodes \"en\" should be equal",getNodeState(foo,"en"),en);
  assertTrue("child node \"en\" should not be decorated",!(en instanceof FilteringNodeState));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldHaveCorrectChildOrderProperty() throws CommitFailedException {
  final NodeState content=rootNodeState.getChildNode("content");
  final NodeState decorated=wrap("/content",content,null,of("/content/foo"));
  assertTrue(decorated.hasProperty(OAK_CHILD_ORDER));
{
    final PropertyState childOrder=decorated.getProperty(OAK_CHILD_ORDER);
    final Iterable<String> values=childOrder.getValue(Type.STRINGS);
    assertEquals(newArrayList("football"),newArrayList(values));
  }
{
    final Predicate<PropertyState> isChildOrderProperty=new Predicate<PropertyState>(){
      @Override public boolean apply(      PropertyState propertyState){
        return OAK_CHILD_ORDER.equals(propertyState.getName());
      }
    }
;
    final PropertyState childOrder=Iterables.find(decorated.getProperties(),isChildOrderProperty);
    final Iterable<String> values=childOrder.getValue(Type.STRINGS);
    assertEquals(newArrayList("football"),newArrayList(values));
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void shouldDecorateExcludedNode(){
  final NodeState decoratedRoot=wrap("/",rootNodeState,of("/content"),of("/content/foo/de"));
  final NodeState de=getNodeState(rootNodeState,"/content/foo/de");
  final NodeState decorated=getNodeState(decoratedRoot,"/content/foo/de");
  assertFalse("de should not be equal to decorated",de.equals(decorated));
  assertFalse("decorated should not exist",decorated.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.jackrabbit.oak.util.ApproximateCounterTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void addRemove(){
  ApproximateCounter.setSeed(0);
  Random r=new Random(1);
  long result=0;
  long exactResult=0;
  long count=100000;
  long sumChange=0;
  int nonZero=0;
  for (long i=0; i < count; i++) {
    int o=r.nextInt(20) - 10;
    exactResult+=o;
    sumChange+=Math.abs(o);
    long offset=ApproximateCounter.calculateOffset(o,1000);
    if (offset != 0) {
      nonZero++;
      result+=offset;
    }
  }
  assertTrue(nonZero < count / 50);
  assertTrue(Math.abs(result - exactResult) < sumChange / 10);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void regularResolution(){
  ApproximateCounter.setSeed(0);
  long result=0;
  long count=100000;
  int nonZero=0;
  for (long i=0; i < count; i++) {
    long offset=ApproximateCounter.calculateOffset(1,1000);
    if (offset != 0) {
      nonZero++;
      result+=offset;
    }
  }
  assertTrue(nonZero < count / 500);
  assertTrue(Math.abs(result - count) < count / 10);
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lowResolution(){
  ApproximateCounter.setSeed(0);
  long result=0;
  long count=100000;
  int nonZero=0;
  for (long i=0; i < count; i++) {
    long offset=ApproximateCounter.calculateOffset(1,100);
    if (offset != 0) {
      offset=ApproximateCounter.adjustOffset(result,offset,100);
    }
    if (offset != 0) {
      nonZero++;
      result+=offset;
    }
  }
  assertTrue(nonZero < count / 500);
  assertTrue(Math.abs(result - count) < count / 10);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
